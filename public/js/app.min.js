/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId])
/******/ 			return installedModules[moduleId].exports;
/******/
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// identity function for calling harmony imports with the correct context
/******/ 	__webpack_require__.i = function(value) { return value; };
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, {
/******/ 				configurable: false,
/******/ 				enumerable: true,
/******/ 				get: getter
/******/ 			});
/******/ 		}
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = 14);
/******/ })
/************************************************************************/
/******/ ([
/* 0 */
/***/ (function(module, exports, __webpack_require__) {

!function(t,e){if(true)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var n=e();for(var i in n)("object"==typeof exports?exports:t)[i]=n[i]}}(this,function(){return function(t){function e(i){if(n[i])return n[i].exports;var r=n[i]={exports:{},id:i,loaded:!1};return t[i].call(r.exports,r,r.exports,e),r.loaded=!0,r.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){(function(e){"use strict";var i=n(4),r=n(8),o=n(2),s=n(9),a=n(1).Promise,u=n(15),h=n(16);t.exports=e.SC={initialize:function(){var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];o.set("oauth_token",t.oauth_token),o.set("client_id",t.client_id),o.set("redirect_uri",t.redirect_uri),o.set("baseURL",t.baseURL),o.set("connectURL",t.connectURL)},get:function(t,e){return i.request("GET",t,e)},post:function(t,e){return i.request("POST",t,e)},put:function(t,e){return i.request("PUT",t,e)},"delete":function(t){return i.request("DELETE",t)},upload:function(t){return i.upload(t)},connect:function(t){return s(t)},isConnected:function(){return void 0!==o.get("oauth_token")},oEmbed:function(t,e){return i.oEmbed(t,e)},resolve:function(t){return i.resolve(t)},Recorder:u,Promise:a,stream:function(t,e){return h(t,e)},connectCallback:function(){r.notifyDialog(this.location)}}}).call(e,function(){return this}())},function(t,e,n){var i;(function(t,r,o,s){/*!
	 * @overview es6-promise - a tiny implementation of Promises/A+.
	 * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
	 * @license   Licensed under MIT license
	 *            See https://raw.githubusercontent.com/jakearchibald/es6-promise/master/LICENSE
	 * @version   2.3.0
	 */
(function(){"use strict";function a(t){return"function"==typeof t||"object"==typeof t&&null!==t}function u(t){return"function"==typeof t}function h(t){return"object"==typeof t&&null!==t}function c(t){q=t}function l(t){Q=t}function f(){var e=t.nextTick,n=t.versions.node.match(/^(?:(\d+)\.)?(?:(\d+)\.)?(\*|\d+)$/);return Array.isArray(n)&&"0"===n[1]&&"10"===n[2]&&(e=r),function(){e(m)}}function d(){return function(){K(m)}}function p(){var t=0,e=new et(m),n=document.createTextNode("");return e.observe(n,{characterData:!0}),function(){n.data=t=++t%2}}function g(){var t=new MessageChannel;return t.port1.onmessage=m,function(){t.port2.postMessage(0)}}function _(){return function(){setTimeout(m,1)}}function m(){for(var t=0;Z>t;t+=2){var e=rt[t],n=rt[t+1];e(n),rt[t]=void 0,rt[t+1]=void 0}Z=0}function y(){try{var t=n(26);return K=t.runOnLoop||t.runOnContext,d()}catch(e){return _()}}function v(){}function E(){return new TypeError("You cannot resolve a promise with itself")}function S(){return new TypeError("A promises callback cannot return that same promise.")}function A(t){try{return t.then}catch(e){return ut.error=e,ut}}function w(t,e,n,i){try{t.call(e,n,i)}catch(r){return r}}function T(t,e,n){Q(function(t){var i=!1,r=w(n,e,function(n){i||(i=!0,e!==n?I(t,n):O(t,n))},function(e){i||(i=!0,R(t,e))},"Settle: "+(t._label||" unknown promise"));!i&&r&&(i=!0,R(t,r))},t)}function b(t,e){e._state===st?O(t,e._result):e._state===at?R(t,e._result):D(e,void 0,function(e){I(t,e)},function(e){R(t,e)})}function P(t,e){if(e.constructor===t.constructor)b(t,e);else{var n=A(e);n===ut?R(t,ut.error):void 0===n?O(t,e):u(n)?T(t,e,n):O(t,e)}}function I(t,e){t===e?R(t,E()):a(e)?P(t,e):O(t,e)}function L(t){t._onerror&&t._onerror(t._result),M(t)}function O(t,e){t._state===ot&&(t._result=e,t._state=st,0!==t._subscribers.length&&Q(M,t))}function R(t,e){t._state===ot&&(t._state=at,t._result=e,Q(L,t))}function D(t,e,n,i){var r=t._subscribers,o=r.length;t._onerror=null,r[o]=e,r[o+st]=n,r[o+at]=i,0===o&&t._state&&Q(M,t)}function M(t){var e=t._subscribers,n=t._state;if(0!==e.length){for(var i,r,o=t._result,s=0;s<e.length;s+=3)i=e[s],r=e[s+n],i?x(n,i,r,o):r(o);t._subscribers.length=0}}function k(){this.error=null}function N(t,e){try{return t(e)}catch(n){return ht.error=n,ht}}function x(t,e,n,i){var r,o,s,a,h=u(n);if(h){if(r=N(n,i),r===ht?(a=!0,o=r.error,r=null):s=!0,e===r)return void R(e,S())}else r=i,s=!0;e._state!==ot||(h&&s?I(e,r):a?R(e,o):t===st?O(e,r):t===at&&R(e,r))}function C(t,e){try{e(function(e){I(t,e)},function(e){R(t,e)})}catch(n){R(t,n)}}function F(t,e){var n=this;n._instanceConstructor=t,n.promise=new t(v),n._validateInput(e)?(n._input=e,n.length=e.length,n._remaining=e.length,n._init(),0===n.length?O(n.promise,n._result):(n.length=n.length||0,n._enumerate(),0===n._remaining&&O(n.promise,n._result))):R(n.promise,n._validationError())}function U(t){return new ct(this,t).promise}function B(t){function e(t){I(r,t)}function n(t){R(r,t)}var i=this,r=new i(v);if(!$(t))return R(r,new TypeError("You must pass an array to race.")),r;for(var o=t.length,s=0;r._state===ot&&o>s;s++)D(i.resolve(t[s]),void 0,e,n);return r}function H(t){var e=this;if(t&&"object"==typeof t&&t.constructor===e)return t;var n=new e(v);return I(n,t),n}function j(t){var e=this,n=new e(v);return R(n,t),n}function G(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function Y(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function V(t){this._id=gt++,this._state=void 0,this._result=void 0,this._subscribers=[],v!==t&&(u(t)||G(),this instanceof V||Y(),C(this,t))}function z(){var t;if("undefined"!=typeof o)t=o;else if("undefined"!=typeof self)t=self;else try{t=Function("return this")()}catch(e){throw new Error("polyfill failed because global object is unavailable in this environment")}var n=t.Promise;n&&"[object Promise]"===Object.prototype.toString.call(n.resolve())&&!n.cast||(t.Promise=_t)}var W;W=Array.isArray?Array.isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)};var K,q,X,$=W,Z=0,Q=({}.toString,function(t,e){rt[Z]=t,rt[Z+1]=e,Z+=2,2===Z&&(q?q(m):X())}),J="undefined"!=typeof window?window:void 0,tt=J||{},et=tt.MutationObserver||tt.WebKitMutationObserver,nt="undefined"!=typeof t&&"[object process]"==={}.toString.call(t),it="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,rt=new Array(1e3);X=nt?f():et?p():it?g():void 0===J?y():_();var ot=void 0,st=1,at=2,ut=new k,ht=new k;F.prototype._validateInput=function(t){return $(t)},F.prototype._validationError=function(){return new Error("Array Methods must be provided an Array")},F.prototype._init=function(){this._result=new Array(this.length)};var ct=F;F.prototype._enumerate=function(){for(var t=this,e=t.length,n=t.promise,i=t._input,r=0;n._state===ot&&e>r;r++)t._eachEntry(i[r],r)},F.prototype._eachEntry=function(t,e){var n=this,i=n._instanceConstructor;h(t)?t.constructor===i&&t._state!==ot?(t._onerror=null,n._settledAt(t._state,e,t._result)):n._willSettleAt(i.resolve(t),e):(n._remaining--,n._result[e]=t)},F.prototype._settledAt=function(t,e,n){var i=this,r=i.promise;r._state===ot&&(i._remaining--,t===at?R(r,n):i._result[e]=n),0===i._remaining&&O(r,i._result)},F.prototype._willSettleAt=function(t,e){var n=this;D(t,void 0,function(t){n._settledAt(st,e,t)},function(t){n._settledAt(at,e,t)})};var lt=U,ft=B,dt=H,pt=j,gt=0,_t=V;V.all=lt,V.race=ft,V.resolve=dt,V.reject=pt,V._setScheduler=c,V._setAsap=l,V._asap=Q,V.prototype={constructor:V,then:function(t,e){var n=this,i=n._state;if(i===st&&!t||i===at&&!e)return this;var r=new this.constructor(v),o=n._result;if(i){var s=arguments[i-1];Q(function(){x(i,r,s,o)})}else D(n,r,t,e);return r},"catch":function(t){return this.then(null,t)}};var mt=z,yt={Promise:_t,polyfill:mt};n(19).amd?(i=function(){return yt}.call(e,n,e,s),!(void 0!==i&&(s.exports=i))):"undefined"!=typeof s&&s.exports?s.exports=yt:"undefined"!=typeof this&&(this.ES6Promise=yt),mt()}).call(this)}).call(e,n(6),n(3).setImmediate,function(){return this}(),n(20)(t))},function(t,e){"use strict";var n={oauth_token:void 0,baseURL:"https://api.soundcloud.com",connectURL:"//connect.soundcloud.com",client_id:void 0,redirect_uri:void 0};t.exports={get:function(t){return n[t]},set:function(t,e){e&&(n[t]=e)}}},function(t,e,n){(function(t,i){function r(t,e){this._id=t,this._clearFn=e}var o=n(6).nextTick,s=Function.prototype.apply,a=Array.prototype.slice,u={},h=0;e.setTimeout=function(){return new r(s.call(setTimeout,window,arguments),clearTimeout)},e.setInterval=function(){return new r(s.call(setInterval,window,arguments),clearInterval)},e.clearTimeout=e.clearInterval=function(t){t.close()},r.prototype.unref=r.prototype.ref=function(){},r.prototype.close=function(){this._clearFn.call(window,this._id)},e.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},e.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},e._unrefActive=e.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;e>=0&&(t._idleTimeoutId=setTimeout(function(){t._onTimeout&&t._onTimeout()},e))},e.setImmediate="function"==typeof t?t:function(t){var n=h++,i=arguments.length<2?!1:a.call(arguments,1);return u[n]=!0,o(function(){u[n]&&(i?t.apply(null,i):t.call(null),e.clearImmediate(n))}),n},e.clearImmediate="function"==typeof i?i:function(t){delete u[t]}}).call(e,n(3).setImmediate,n(3).clearImmediate)},function(t,e,n){(function(e){"use strict";var i=n(2),r=n(17),o=n(1).Promise,s=function(t,n,i,r){var s=void 0,a=new o(function(o){var a=e.FormData&&i instanceof FormData;s=new XMLHttpRequest,s.upload&&s.upload.addEventListener("progress",r),s.open(t,n,!0),a||s.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),s.onreadystatechange=function(){4===s.readyState&&o({responseText:s.responseText,request:s})},s.send(i)});return a.request=s,a},a=function(t){var e=t.responseText,n=t.request,i=void 0,r=void 0;try{r=JSON.parse(e)}catch(o){}return r?r.errors&&(i={message:""},r.errors[0]&&r.errors[0].error_message&&(i={message:r.errors[0].error_message})):i=n?{message:"HTTP Error: "+n.status}:{message:"Unknown error"},i&&(i.status=n.status),{json:r,error:i}},u=function c(t,e,n,i){var r=s(t,e,n,i),o=r.then(function(t){var e=t.responseText,n=t.request,i=a({responseText:e,request:n});if(i.json&&"302 - Found"===i.json.status)return c("GET",i.json.location,null);if(200!==n.status&&i.error)throw i.error;return i.json});return o.request=r.request,o},h=function(t,e,n){Object.keys(e).forEach(function(i){n?t.append(i,e[i]):t[i]=e[i]})};t.exports={request:function(t,n){var o=arguments.length<=2||void 0===arguments[2]?{}:arguments[2],s=arguments.length<=3||void 0===arguments[3]?function(){}:arguments[3],a=i.get("oauth_token"),c=i.get("client_id"),l={},f=e.FormData&&o instanceof FormData,d=void 0,p=void 0;return l.format="json",a?l.oauth_token=a:l.client_id=c,h(o,l,f),"GET"!==t&&(d=f?o:r.encode(o),o={oauth_token:a}),n="/"!==n[0]?"/"+n:n,p=""+i.get("baseURL")+n+"?"+r.encode(o),u(t,p,d,s)},oEmbed:function(t){var e=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],n=e.element;delete e.element,e.url=t;var i="https://soundcloud.com/oembed.json?"+r.encode(e);return u("GET",i,null).then(function(t){return n&&t.html&&(n.innerHTML=t.html),t})},upload:function(){var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],e=t.asset_data||t.file,n=i.get("oauth_token")&&t.title&&e;if(!n)return new o(function(t,e){e({status:0,error_message:"oauth_token needs to be present and title and asset_data / file passed as parameters"})});var r=Object.keys(t),s=new FormData;return r.forEach(function(e){var n=t[e];"file"===e&&(e="asset_data",n=t.file),s.append("track["+e+"]",n)}),this.request("POST","/tracks",s,t.progress)},resolve:function(t){return this.request("GET","/resolve",{url:t,_status_code_map:{302:200}})}}}).call(e,function(){return this}())},function(t,e){"use strict";var n={};t.exports={get:function(t){return n[t]},set:function(t,e){n[t]=e}}},function(t,e){function n(){h&&s&&(h=!1,s.length?u=s.concat(u):c=-1,u.length&&i())}function i(){if(!h){var t=setTimeout(n);h=!0;for(var e=u.length;e;){for(s=u,u=[];++c<e;)s&&s[c].run();c=-1,e=u.length}s=null,h=!1,clearTimeout(t)}}function r(t,e){this.fun=t,this.array=e}function o(){}var s,a=t.exports={},u=[],h=!1,c=-1;a.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];u.push(new r(t,e)),1!==u.length||h||setTimeout(i,0)},r.prototype.run=function(){this.fun.apply(null,this.array)},a.title="browser",a.browser=!0,a.env={},a.argv=[],a.version="",a.versions={},a.on=o,a.addListener=o,a.once=o,a.off=o,a.removeListener=o,a.removeAllListeners=o,a.emit=o,a.binding=function(t){throw new Error("process.binding is not supported")},a.cwd=function(){return"/"},a.chdir=function(t){throw new Error("process.chdir is not supported")},a.umask=function(){return 0}},function(t,e,n){"use strict";var i=n(18);e.extract=function(t){return t.split("?")[1]||""},e.parse=function(t){return"string"!=typeof t?{}:(t=t.trim().replace(/^(\?|#|&)/,""),t?t.split("&").reduce(function(t,e){var n=e.replace(/\+/g," ").split("="),i=n.shift(),r=n.length>0?n.join("="):void 0;return i=decodeURIComponent(i),r=void 0===r?null:decodeURIComponent(r),t.hasOwnProperty(i)?Array.isArray(t[i])?t[i].push(r):t[i]=[t[i],r]:t[i]=r,t},{}):{})},e.stringify=function(t){return t?Object.keys(t).sort().map(function(e){var n=t[e];return Array.isArray(n)?n.sort().map(function(t){return i(e)+"="+i(t)}).join("&"):i(e)+"="+i(n)}).filter(function(t){return t.length>0}).join("&"):""}},function(t,e,n){"use strict";var i=n(7),r=n(5);t.exports={notifyDialog:function(t){var e=i.parse(t.search),n=i.parse(t.hash),o={oauth_token:e.access_token||n.access_token,dialog_id:e.state||n.state,error:e.error||n.error,error_description:e.error_description||n.error_description},s=r.get(o.dialog_id);s&&s.handleConnectResponse(o)}}},function(t,e,n){"use strict";var i=n(2),r=n(11),o=n(1).Promise,s=function(t){return i.set("oauth_token",t.oauth_token),t};t.exports=function(){var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],e=i.get("oauth_token");if(e)return new o(function(t){t({oauth_token:e})});var n={client_id:t.client_id||i.get("client_id"),redirect_uri:t.redirect_uri||i.get("redirect_uri"),response_type:"code_and_token",scope:t.scope||"non-expiring",display:"popup"};if(!n.client_id||!n.redirect_uri)throw new Error("Options client_id and redirect_uri must be passed");var a=new r(n);return a.open().then(s)}},function(t,e,n){"use strict";var i=n(1).Promise;t.exports=function(){var t={};return t.promise=new i(function(e,n){t.resolve=e,t.reject=n}),t}},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=n(10),s=n(5),a=n(12),u=n(7),h="SoundCloud_Dialog",c=function(){return[h,Math.ceil(1e6*Math.random()).toString(16)].join("_")},l=function(t){return"https://soundcloud.com/connect?"+u.stringify(t)},f=function(){function t(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];i(this,t),this.id=c(),this.options=e,this.options.state=this.id,this.width=456,this.height=510,this.deferred=o()}return r(t,[{key:"open",value:function(){var t=l(this.options);return this.popup=a.open(t,this.width,this.height),s.set(this.id,this),this.deferred.promise}},{key:"handleConnectResponse",value:function(t){var e=t.error;e?this.deferred.reject(t):this.deferred.resolve(t),this.popup.close()}}]),t}();t.exports=f},function(t,e){"use strict";t.exports={open:function(t,e,n){var i={},r=void 0;return i.location=1,i.width=e,i.height=n,i.left=window.screenX+(window.outerWidth-e)/2,i.top=window.screenY+(window.outerHeight-n)/2,i.toolbar="no",i.scrollbars="yes",r=Object.keys(i).map(function(t){return t+"="+i[t]}).join(", "),window.open(t,i.name,r)}}},function(t,e){(function(e){"use strict";var n=e.AudioContext||e.webkitAudioContext,i=null;t.exports=function(){return i?i:i=new n}}).call(e,function(){return this}())},function(t,e){(function(e){"use strict";var n=e.navigator.getUserMedia||e.navigator.webkitGetUserMedia||e.navigator.mozGetUserMedia;t.exports=function(t,i,r){n.call(e.navigator,t,i,r)}}).call(e,function(){return this}())},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=n(13),s=n(14),a=n(1).Promise,u=n(24),h=function(){var t=this,e=this.context;return new a(function(n,i){t.source?t.source instanceof AudioNode?n(t.source):i(new Error("source needs to be an instance of AudioNode")):s({audio:!0},function(i){t.stream=i,t.source=e.createMediaStreamSource(i),n(t.source)}.bind(t),i)})},c=function(){function t(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];i(this,t),this.context=e.context||o(),this._recorder=null,this.source=e.source,this.stream=null}return r(t,[{key:"start",value:function(){var t=this;return h.call(this).then(function(e){return t._recorder=new u(e),t._recorder.record(),e})}},{key:"stop",value:function(){if(this._recorder&&this._recorder.stop(),this.stream)if(this.stream.stop)this.stream.stop();else if(this.stream.getTracks){var t=this.stream.getTracks()[0];t&&t.stop()}}},{key:"getBuffer",value:function(){var t=this;return new a(function(e,n){t._recorder?t._recorder.getBuffer(function(n){var i=t.context.sampleRate,r=t.context.createBuffer(2,n[0].length,i);r.getChannelData(0).set(n[0]),r.getChannelData(1).set(n[1]),e(r)}.bind(t)):n(new Error("Nothing has been recorded yet."))})}},{key:"getWAV",value:function(){var t=this;return new a(function(e,n){t._recorder?t._recorder.exportWAV(function(t){e(t)}):n(new Error("Nothing has been recorded yet."))})}},{key:"play",value:function(){var t=this;return this.getBuffer().then(function(e){var n=t.context.createBufferSource();return n.buffer=e,n.connect(t.context.destination),n.start(0),n})}},{key:"saveAs",value:function(t){return this.getWAV().then(function(e){u.forceDownload(e,t)})}},{key:"delete",value:function(){this._recorder&&(this._recorder.stop(),this._recorder.clear(),this._recorder=null),this.stream&&this.stream.stop()}}]),t}();t.exports=c},function(t,e,n){"use strict";var i=n(4),r=n(23),o=new r({flashAudioPath:"https://connect.soundcloud.com/sdk/flashAudio.swf"}),s=n(2),a=n(25);t.exports=function(t,e){var n=e?{secret_token:e}:{};return i.request("GET",t,n).then(function(t){var n=s.get("baseURL"),i=s.get("client_id"),r=n+"/tracks/"+t.id+"/streams?client_id="+i,u=n+"/tracks/"+t.id+"/plays?client_id="+i;return e&&(r+="&secret_token="+e,u+="&secret_token="+e),new a(o,{soundId:t.id,duration:t.duration,streamUrlsEndpoint:r,registerEndpoint:u})})}},function(t,e){t.exports={encode:function(t,e){function n(t){return t.filter(function(t){return"string"==typeof t&&t.length}).join("&")}function i(t){var e=Object.keys(t);return l?e.sort():e}function r(t,e){var r=":name[:prop]";return n(i(e).map(function(n){return s(r.replace(/:name/,t).replace(/:prop/,n),e[n])}))}function o(t,e){var i=":name[]";return n(e.map(function(e){return s(i.replace(/:name/,t),e)}))}function s(t,e){var n=/%20/g,i=encodeURIComponent,s=typeof e,a=null;return Array.isArray(e)?a=o(t,e):"string"===s?a=i(t)+"="+u(e):"number"===s?a=i(t)+"="+i(e).replace(n,"+"):"boolean"===s?a=i(t)+"="+e:"object"===s&&(null!==e?a=r(t,e):c||(a=i(t)+"=null")),a}function a(t){return"%"+("0"+t.charCodeAt(0).toString(16)).slice(-2).toUpperCase()}function u(t){return t.replace(/[^ !'()~\*]*/g,encodeURIComponent).replace(/ /g,"+").replace(/[!'()~\*]/g,a)}var h="object"==typeof e?e:{},c=h.ignorenull||!1,l=h.sorted||!1;return n(i(t).map(function(e){return s(e,t[e])}))}}},function(t,e){"use strict";t.exports=function(t){return encodeURIComponent(t).replace(/[!'()*]/g,function(t){return"%"+t.charCodeAt(0).toString(16).toUpperCase()})}},function(t,e){t.exports=function(){throw new Error("define cannot be used indirect")}},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children=[],t.webpackPolyfill=1),t}},function(t,e){var n=window.URL||window.webkitURL;t.exports=function(t,e){try{try{var i;try{var r=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder;i=new r,i.append(t),i=i.getBlob()}catch(o){i=new Blob([t])}return new Worker(n.createObjectURL(i))}catch(o){return new Worker("data:application/javascript,"+encodeURIComponent(t))}}catch(o){return new Worker(e)}}},function(t,e,n){t.exports=function(){return n(21)('!function(t){function n(r){if(e[r])return e[r].exports;var a=e[r]={exports:{},id:r,loaded:!1};return t[r].call(a.exports,a,a.exports,n),a.loaded=!0,a.exports}var e={};return n.m=t,n.c=e,n.p="",n(0)}([function(t,n){(function(t){function n(t){h=t.sampleRate,v=t.numChannels,s()}function e(t){for(var n=0;v>n;n++)p[n].push(t[n]);g+=t[0].length}function r(t){for(var n=[],e=0;v>e;e++)n.push(i(p[e],g));if(2===v)var r=f(n[0],n[1]);else var r=n[0];var a=l(r),o=new Blob([a],{type:t});this.postMessage(o)}function a(){for(var t=[],n=0;v>n;n++)t.push(i(p[n],g));this.postMessage(t)}function o(){g=0,p=[],s()}function s(){for(var t=0;v>t;t++)p[t]=[]}function i(t,n){for(var e=new Float32Array(n),r=0,a=0;a<t.length;a++)e.set(t[a],r),r+=t[a].length;return e}function f(t,n){for(var e=t.length+n.length,r=new Float32Array(e),a=0,o=0;e>a;)r[a++]=t[o],r[a++]=n[o],o++;return r}function c(t,n,e){for(var r=0;r<e.length;r++,n+=2){var a=Math.max(-1,Math.min(1,e[r]));t.setInt16(n,0>a?32768*a:32767*a,!0)}}function u(t,n,e){for(var r=0;r<e.length;r++)t.setUint8(n+r,e.charCodeAt(r))}function l(t){var n=new ArrayBuffer(44+2*t.length),e=new DataView(n);return u(e,0,"RIFF"),e.setUint32(4,36+2*t.length,!0),u(e,8,"WAVE"),u(e,12,"fmt "),e.setUint32(16,16,!0),e.setUint16(20,1,!0),e.setUint16(22,v,!0),e.setUint32(24,h,!0),e.setUint32(28,4*h,!0),e.setUint16(32,2*v,!0),e.setUint16(34,16,!0),u(e,36,"data"),e.setUint32(40,2*t.length,!0),c(e,44,t),e}var h,v,g=0,p=[];t.onmessage=function(t){switch(t.data.command){case"init":n(t.data.config);break;case"record":e(t.data.buffer);break;case"exportWAV":r(t.data.type);break;case"getBuffer":a();break;case"clear":o()}}}).call(n,function(){return this}())}]);\n//# sourceMappingURL=9f9aac32c9a7432b5555.worker.js.map',n.p+"9f9aac32c9a7432b5555.worker.js")}},function(t,e){t.exports=function(t){function e(i){if(n[i])return n[i].exports;var r=n[i]={exports:{},id:i,loaded:!1};return t[i].call(r.exports,r,r.exports,e),r.loaded=!0,r.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}(function(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))switch(typeof t[e]){case"function":break;case"object":t[e]=function(e){var n=e.slice(1),i=t[e[0]];return function(t,e,r){i.apply(this,[t,e,r].concat(n))}}(t[e]);break;default:t[e]=t[t[e]]}return t}([function(t,e,n){var i,r=n(1),o=n(12),s=n(14),a=n(38),u=n(43),h=n(39),c=n(16),l=n(42),f=n(128),d=n(129);t.exports=i=function(t){t=t||{},this._players={},this._volume=1,this._mute=!1,this.States=a,this.Errors=u,this._settings=o({},t,i.defaults)},i.MimeTypes=d,i.Protocols=f,i.Events=h,i.States=a,i.Errors=u,i.BrowserUtils=c,i.defaults={flashAudioPath:"flashAudio.swf",flashLoadTimeout:2e3,flashObjectID:"flashAudioObject",audioObjectID:"html5AudioObject",updateInterval:300,bufferTime:8e3,bufferingDelay:800,streamUrlProvider:null,debug:!1},i.capabilities=l.names,i.createDefaultMediaDescriptor=function(t,e,n){if(!t||!e||!e.length)throw new Error("invalid input to create media descriptor");return n||(n=0),{id:t,src:e,duration:n,forceSingle:!1,forceFlash:!1,forceHTML5:!1,forceCustomHLS:!1,mimeType:void 0}},i.prototype.getAudioPlayer=function(t){return this._players[t]},i.prototype.hasAudioPlayer=function(t){return void 0!==this._players[t]},i.prototype.removeAudioPlayer=function(t){this.hasAudioPlayer(t)&&delete this._players[t]},i.prototype.setVolume=function(t){t=Math.min(1,t),this._volume=Math.max(0,t);for(var e in this._players)this._players.hasOwnProperty(e)&&this._players[e].setVolume(this._volume)},i.prototype.getVolume=function(){return this._volume},i.prototype.setMute=function(t){this._muted=t;for(var e in this._players)this._players.hasOwnProperty(e)&&this._players[e].setMute(this._muted)},i.prototype.getMute=function(){return this._muted},i.prototype.createAudioPlayer=function(t,e){var n,i=r({},this._settings,e);if(!t)throw"AudioManager: No media descriptor object passed, can`t build any player";if(t.id||(t.id=Math.floor(1e10*Math.random()).toString()+(new Date).getTime().toString()),!t.src)throw new Error("AudioManager: You need to pass a valid media source URL");if(!this._players[t.id]){if(n=s.createAudioPlayer(t,i),!n)throw new Error("AudioManager: No player could be created from the given descriptor");this._players[t.id]=n}return this._players[t.id].setVolume(this._volume),this._players[t.id].setMute(this._muted),this._players[t.id].on(h.STATE_CHANGE,this._onStateChange,this),this._players[t.id]},i.prototype._onStateChange=function(t,e){e.getState()===a.DEAD&&this.removeAudioPlayer(e.getId())}},[130,2,8,4],[131,3,4],function(t,e){function n(t,e,n){n||(n={});for(var i=-1,r=e.length;++i<r;){var o=e[i];n[o]=t[o]}return n}t.exports=n},[132,5,6,7],function(t,e){function n(t){return!!t&&"object"==typeof t}function i(t,e){var n=null==t?void 0:t[e];return s(n)?n:void 0}function r(t){return o(t)&&f.call(t)==a}function o(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function s(t){return null==t?!1:r(t)?d.test(c.call(t)):n(t)&&u.test(t)}var a="[object Function]",u=/^\[object .+?Constructor\]$/,h=Object.prototype,c=Function.prototype.toString,l=h.hasOwnProperty,f=h.toString,d=RegExp("^"+c.call(l).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");t.exports=i},function(t,e){function n(t){return!!t&&"object"==typeof t}function i(t){return function(e){return null==e?void 0:e[t]}}function r(t){return null!=t&&o(l(t))}function o(t){return"number"==typeof t&&t>-1&&t%1==0&&c>=t}function s(t){return n(t)&&r(t)&&u.call(t,"callee")&&!h.call(t,"callee")}var a=Object.prototype,u=a.hasOwnProperty,h=a.propertyIsEnumerable,c=9007199254740991,l=i("length");t.exports=s},function(t,e){function n(t){return!!t&&"object"==typeof t}function i(t,e){var n=null==t?void 0:t[e];return a(n)?n:void 0}function r(t){return"number"==typeof t&&t>-1&&t%1==0&&m>=t}function o(t){return s(t)&&p.call(t)==h}function s(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function a(t){return null==t?!1:o(t)?g.test(f.call(t)):n(t)&&c.test(t)}var u="[object Array]",h="[object Function]",c=/^\[object .+?Constructor\]$/,l=Object.prototype,f=Function.prototype.toString,d=l.hasOwnProperty,p=l.toString,g=RegExp("^"+f.call(d).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),_=i(Array,"isArray"),m=9007199254740991,y=_||function(t){return n(t)&&r(t.length)&&p.call(t)==u};t.exports=y},[133,9,10,11],function(t,e){function n(t,e,n){if("function"!=typeof t)return i;if(void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 3:return function(n,i,r){return t.call(e,n,i,r)};case 4:return function(n,i,r,o){return t.call(e,n,i,r,o)};case 5:return function(n,i,r,o,s){return t.call(e,n,i,r,o,s)}}return function(){return t.apply(e,arguments)}}function i(t){return t}t.exports=n},function(t,e){function n(t){return function(e){return null==e?void 0:e[t]}}function i(t){return null!=t&&s(c(t))}function r(t,e){return t="number"==typeof t||u.test(t)?+t:-1,e=null==e?h:e,t>-1&&t%1==0&&e>t}function o(t,e,n){if(!a(n))return!1;var o=typeof e;if("number"==o?i(n)&&r(e,n.length):"string"==o&&e in n){var s=n[e];return t===t?t===s:s!==s}return!1}function s(t){return"number"==typeof t&&t>-1&&t%1==0&&h>=t}function a(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}var u=/^\d+$/,h=9007199254740991,c=n("length");t.exports=o},function(t,e){function n(t,e){if("function"!=typeof t)throw new TypeError(i);return e=r(void 0===e?t.length-1:+e||0,0),function(){for(var n=arguments,i=-1,o=r(n.length-e,0),s=Array(o);++i<o;)s[i]=n[e+i];switch(e){case 0:return t.call(this,s);case 1:return t.call(this,n[0],s);case 2:return t.call(this,n[0],n[1],s)}var a=Array(e+1);for(i=-1;++i<e;)a[i]=n[i];return a[e]=s,t.apply(this,a)}}var i="Expected a function",r=Math.max;t.exports=n},function(t,e,n){function i(t,e){return void 0===t?e:t}function r(t,e){return s(function(n){var i=n[0];return null==i?i:(n.push(e),t.apply(void 0,n))})}var o=n(1),s=n(13),a=r(o,i);t.exports=a},11,function(t,e,n){t.exports=n(15)},function(t,e,n){var i,r=n(16),o=n(17),s=n(45),a=n(49),u=n(46),h=n(48),c=n(50),l=n(129);t.exports=i=function(){},i.createAudioPlayer=function(t,e){var n;if(n=t.src.split(":")[0],("rtmp"===n||"rtmpt"===n||t.forceFlash)&&!t.forceHTML5)return new o(t,e);if(t.mimeType=i.getMimeType(t),t.mimeType===l.M3U8){if(r.isMSESupportMPEG()||r.isMSESupportMP4())return new c(t,e);if(r.isNativeHlsSupported()&&!t.forceCustomHLS)return r.isMobile()||t.forceSingle?new a(t,e):new s(t,e)}else{if(r.supportHTML5Audio()&&r.canPlayType(t.mimeType)||t.forceHTML5)return r.isMobile()||t.forceSingle?new h(t,e):new u(t,e);if(t.mimeType===l.MP3)return new o(t,e)}return null},i.getMimeType=function(t){if(t.mimeType)return t.mimeType;var e=t.src.split("?")[0];return e=e.substring(e.lastIndexOf(".")+1,e.length),l.getTypeByExtension(e)}},function(t,e){function n(){return!(!window.MediaSource&&!window.WebKitMediaSource)}t.exports={supportHTML5Audio:function(){var t;try{if(window.HTMLAudioElement&&"undefined"!=typeof Audio)return t=new Audio,!0}catch(e){return!1}},createAudioElement:function(){var t=document.createElement("audio");return t.setAttribute("msAudioCategory","BackgroundCapableMedia"),t.mozAudioChannelType="content",t},isMobile:function(t){var e=window.navigator.userAgent,n=["mobile","iPhone","iPad","iPod","Android","Skyfire"];return n.some(function(t){return t=new RegExp(t,"i"),t.test(e)})},isIE10Mobile:function(){return/IEmobile\/10\.0/gi.test(navigator.userAgent)},canPlayType:function(t){var e=document.createElement("audio");return!!(e&&e.canPlayType&&e.canPlayType(t).match(/maybe|probably/i))},isNativeHlsSupported:function(){var t,e,n,i=navigator.userAgent,r=["iPhone","iPad","iPod"];return t=function(t){return t.test(i)},e=!t(/chrome/i)&&!t(/opera/i)&&t(/safari/i),n=r.some(function(e){return t(new RegExp(e,"i"))}),n||e},isMSESupported:n,isMSESupportMPEG:function(){return n()&&MediaSource.isTypeSupported("audio/mpeg")},isMSESupportMP4:function(){return n()&&MediaSource.isTypeSupported("audio/mp4")}}},function(t,e,n){function i(t,e){a.call(this,"FlashAudioProxy",t,e),i.players[t.id]=this,this._errorMessage=null,this._errorID=null,this._volume=1,this._muted=!1,i.creatingFlashAudio||(i.flashAudio?this._createFlashAudio():i.createFlashObject(e))}var r=n(1),o=n(18),s=n(29),a=n(35),u=n(39),h=n(43),c=n(38),l=n(44);t.exports=i,r(i.prototype,a.prototype),i.players={},i.createFlashObject=function(t){i.creatingFlashAudio=!0,i.containerElement=document.createElement("div"),i.containerElement.setAttribute("id",t.flashObjectID+"-container"),i.flashElementTarget=document.createElement("div"),i.flashElementTarget.setAttribute("id",t.flashObjectID+"-target"),i.containerElement.appendChild(i.flashElementTarget),document.body.appendChild(i.containerElement);var e=function(e){if(e.success)i.flashAudio=document.getElementById(t.flashObjectID),window.setTimeout(function(){if(i.flashAudio&&!("PercentLoaded"in i.flashAudio))for(var t in i.players)i.players.hasOwnProperty(t)&&(i.players[t]._errorID=h.FLASH_PROXY_FLASH_BLOCKED,i.players[t]._errorMessage="Flash object blocked",i.players[t]._setState(c.ERROR),i.players[t]._logger.type=i.players[t].getType(),i.players[t]._logger.log(i.players[t]._errorMessage))},t.flashLoadTimeout),i.flashAudio.triggerEvent=function(t,e){i.players[t]._triggerEvent(e)},i.flashAudio.onPositionChange=function(t,e,n,r){i.players[t]._onPositionChange(e,n,r)},i.flashAudio.onDebug=function(t,e,n){i.players[t]._logger.type=e,i.players[t]._logger.log(n)},i.flashAudio.onStateChange=function(t,e){i.players[t]._setState(e),e===c.DEAD&&delete i.players[t]},i.flashAudio.onInit=function(t){i.creatingFlashAudio=!1,o(s(i.players),"_createFlashAudio")};else for(var n in i.players)i.players.hasOwnProperty(n)&&(i.players[n]._errorID=h.FLASH_PROXY_CANT_LOAD_FLASH,i.players[n]._errorMessage="Cannot create flash object",i.players[n]._setState(c.ERROR))};document.getElementById(t.flashObjectID)||l.embedSWF(t.flashAudioPath,t.flashObjectID+"-target","1","1","9.0.24","",{json:encodeURIComponent(JSON.stringify(t))},{allowscriptaccess:"always"},{id:t.flashObjectID,tabIndex:"-1"},e)},i._ready=function(){return i.flashAudio&&!i.creatingFlashAudio},i.prototype._createFlashAudio=function(){i.flashAudio.createAudio(this.getDescriptor()),this._state=i.flashAudio.getState(this.getId()),this.setVolume(this._volume),this.setMute(this._muted)},i.prototype._triggerEvent=function(t){this._logger.log("Flash element triggered event: "+t),this.trigger(t,this)},i.prototype._setState=function(t){this._state!==t&&(this._state=t,this.trigger(u.STATE_CHANGE,t,this))},i.prototype._onPositionChange=function(t,e,n){this.trigger(u.POSITION_CHANGE,t,e,n,this)},i.prototype.getType=function(){return i._ready()?i.flashAudio.getType(this.getId()):this._type},i.prototype.getContainerElement=function(){
return i.containerElement},i.prototype.play=function(t){if(i._ready()){if(this.getState()===c.PAUSED)return void this.resume();t=void 0===t?0:t,i.flashAudio.playAudio(this.getId(),t)}},i.prototype.pause=function(){i._ready()&&i.flashAudio.pauseAudio(this.getId())},i.prototype.seek=function(t){i._ready()&&i.flashAudio.seekAudio(this.getId(),t)},i.prototype.resume=function(){i._ready()&&i.flashAudio.resumeAudio(this.getId())},i.prototype.setVolume=function(t){this._volume=t,i._ready()&&i.flashAudio.setVolume(this.getId(),t)},i.prototype.getVolume=function(){return i._ready()?i.flashAudio.getVolume(this.getId()):this._volume},i.prototype.setMute=function(t){this._muted=t,i._ready()&&i.flashAudio.setMute(this.getId(),t)},i.prototype.getMute=function(){return i._ready()?i.flashAudio.getMute(this.getId()):this._muted},i.prototype.getState=function(){return this._state},i.prototype.getCurrentPosition=function(){return i._ready()?i.flashAudio.getCurrentPosition(this.getId()):0},i.prototype.getLoadedPosition=function(){return i._ready()?i.flashAudio.getLoadedPosition(this.getId()):0},i.prototype.getDuration=function(){return i._ready()?i.flashAudio.getDuration(this.getId()):0},i.prototype.kill=function(){return i._ready()?void i.flashAudio.killAudio(this.getId()):0},i.prototype.getErrorMessage=function(){return this._errorMessage?this._errorMessage:i.flashAudio.getErrorMessage(this.getId())},i.prototype.getErrorID=function(){return this._errorID?this._errorID:i.flashAudio.getErrorID(this.getId())},i.prototype.getLevelNum=function(){return i._ready()?i.flashAudio.getLevelNum(this.getId()):0},i.prototype.getLevel=function(){return i._ready()?i.flashAudio.getLevel(this.getId()):0},i.prototype.setLevel=function(t){return i._ready()?i.flashAudio.setLevel(this.getId(),t):0}},function(t,e,n){function i(t){return function(e){return null==e?void 0:e[t]}}function r(t){return null!=t&&s(_(t))}function o(t,e){var n=typeof t;if("string"==n&&p.test(t)||"number"==n)return!0;if(l(t))return!1;var i=!d.test(t);return i||null!=e&&t in a(e)}function s(t){return"number"==typeof t&&t>-1&&t%1==0&&g>=t}function a(t){return u(t)?t:Object(t)}function u(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}var h=n(19),c=n(24),l=n(23),f=n(28),d=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\n\\]|\\.)*?\1)\]/,p=/^\w*$/,g=9007199254740991,_=i("length"),m=f(function(t,e,n){var i=-1,s="function"==typeof e,a=o(e),u=r(t)?Array(t.length):[];return h(t,function(t){var r=s?e:a&&null!=t?t[e]:void 0;u[++i]=r?r.apply(t,n):c(t,e,n)}),u});t.exports=m},[134,20],[132,21,22,23],5,6,7,function(t,e,n){function i(t,e,n){null==t||r(e,t)||(e=c(e),t=1==e.length?t:u(t,h(e,0,-1)),e=s(e));var i=null==t?t:t[e];return null==i?void 0:i.apply(t,n)}function r(t,e){var n=typeof t;if("string"==n&&d.test(t)||"number"==n)return!0;if(l(t))return!1;var i=!f.test(t);return i||null!=e&&t in o(e)}function o(t){return a(t)?t:Object(t)}function s(t){var e=t?t.length:0;return e?t[e-1]:void 0}function a(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}var u=n(25),h=n(26),c=n(27),l=n(23),f=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\n\\]|\\.)*?\1)\]/,d=/^\w*$/;t.exports=i},function(t,e){function n(t,e,n){if(null!=t){void 0!==n&&n in i(t)&&(e=[n]);for(var r=0,o=e.length;null!=t&&o>r;)t=t[e[r++]];return r&&r==o?t:void 0}}function i(t){return r(t)?t:Object(t)}function r(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}t.exports=n},function(t,e){function n(t,e,n){var i=-1,r=t.length;e=null==e?0:+e||0,0>e&&(e=-e>r?0:r+e),n=void 0===n||n>r?r:+n||0,0>n&&(n+=r),r=e>n?0:n-e>>>0,e>>>=0;for(var o=Array(r);++i<r;)o[i]=t[i+e];return o}t.exports=n},function(t,e,n){function i(t){return null==t?"":t+""}function r(t){if(o(t))return t;var e=[];return i(t).replace(s,function(t,n,i,r){e.push(i?r.replace(a,"$1"):n||t)}),e}var o=n(23),s=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\n\\]|\\.)*?)\2)\]/g,a=/\\(\\)?/g;t.exports=r},11,function(t,e,n){function i(t){return r(t,o(t))}var r=n(30),o=n(31);t.exports=i},function(t,e){function n(t,e){for(var n=-1,i=e.length,r=Array(i);++n<i;)r[n]=t[e[n]];return r}t.exports=n},[132,32,33,34],5,6,7,function(t,e,n){function i(t,e,n,i){this._type=t,this._id=e.id,this._descriptor=e,this._settings=n,this._currentPosition=this._loadedPosition=this._duration=0,this._capabilities=r({},h.createDefaults(),i),this._logger=new u(this.getType(),this.getId(),e.title,n);try{h.validate(this.getCapabilities())}catch(o){return this.getLogger().log("Bad caps: "+o),void this.updateState(s.ERROR)}this.updateState(s.INITIALIZE)}var r=n(1),o=n(36),s=n(38),a=n(39),u=n(40),h=n(42);t.exports=i,r(i.prototype,o),i.prototype.canPlay=function(){return!1},i.prototype.getCapabilities=function(){return this._capabilities},i.prototype.getLogger=function(){return this._logger},i.prototype.getSettings=function(){return this._settings},i.prototype.getDescriptor=function(){return this._descriptor},i.prototype.getType=function(){return this._type},i.prototype.getId=function(){return this._id+""},i.prototype.beforeStateChange=function(t,e){return!0},i.prototype.notifyStateChange=function(t,e){return!0},i.prototype.afterStateChange=function(t,e){},i.prototype.updateState=function(t){var e=this._state;e!==t&&e!==s.DEAD&&this.beforeStateChange(e,t)&&(this._state=t,this._logger.log('state changed "'+this.getState()+'", position: '+this.getCurrentPosition()+", duration: "+this.getDuration()),this.notifyStateChange(e,t)&&this.trigger(a.STATE_CHANGE,t,this),this.afterStateChange(e,t))},i.prototype.getState=function(){return this._state},i.prototype._isInOneOfStates=function(){for(var t in arguments)if(arguments[t]===this.getState())return!0;return!1},i.prototype.getCurrentPosition=function(){return this._currentPosition},i.prototype.getLoadedPosition=function(){return this._loadedPosition},i.prototype.getDuration=function(){return this._duration}},function(t,e,n){t.exports=n(37)},function(t,e,n){!function(){function n(){return{keys:Object.keys||function(t){if("object"!=typeof t&&"function"!=typeof t||null===t)throw new TypeError("keys() called on a non-object");var e,n=[];for(e in t)t.hasOwnProperty(e)&&(n[n.length]=e);return n},uniqueId:function(t){var e=++a+"";return t?t+e:e},has:function(t,e){return o.call(t,e)},each:function(t,e,n){if(null!=t)if(r&&t.forEach===r)t.forEach(e,n);else if(t.length===+t.length)for(var i=0,o=t.length;o>i;i++)e.call(n,t[i],i,t);else for(var s in t)this.has(t,s)&&e.call(n,t[s],s,t)},once:function(t){var e,n=!1;return function(){return n?e:(n=!0,e=t.apply(this,arguments),t=null,e)}}}}var i,r=Array.prototype.forEach,o=Object.prototype.hasOwnProperty,s=Array.prototype.slice,a=0,u=n();i={on:function(t,e,n){if(!c(this,"on",t,[e,n])||!e)return this;this._events||(this._events={});var i=this._events[t]||(this._events[t]=[]);return i.push({callback:e,context:n,ctx:n||this}),this},once:function(t,e,n){if(!c(this,"once",t,[e,n])||!e)return this;var i=this,r=u.once(function(){i.off(t,r),e.apply(this,arguments)});return r._callback=e,this.on(t,r,n)},off:function(t,e,n){var i,r,o,s,a,h,l,f;if(!this._events||!c(this,"off",t,[e,n]))return this;if(!t&&!e&&!n)return this._events={},this;for(s=t?[t]:u.keys(this._events),a=0,h=s.length;h>a;a++)if(t=s[a],o=this._events[t]){if(this._events[t]=i=[],e||n)for(l=0,f=o.length;f>l;l++)r=o[l],(e&&e!==r.callback&&e!==r.callback._callback||n&&n!==r.context)&&i.push(r);i.length||delete this._events[t]}return this},trigger:function(t){if(!this._events)return this;var e=s.call(arguments,1);if(!c(this,"trigger",t,e))return this;var n=this._events[t],i=this._events.all;return n&&l(n,e),i&&l(i,arguments),this},stopListening:function(t,e,n){var i=this._listeners;if(!i)return this;var r=!e&&!n;"object"==typeof e&&(n=this),t&&((i={})[t._listenerId]=t);for(var o in i)i[o].off(e,n,this),r&&delete this._listeners[o];return this}};var h=/\s+/,c=function(t,e,n,i){if(!n)return!0;if("object"==typeof n){for(var r in n)t[e].apply(t,[r,n[r]].concat(i));return!1}if(h.test(n)){for(var o=n.split(h),s=0,a=o.length;a>s;s++)t[e].apply(t,[o[s]].concat(i));return!1}return!0},l=function(t,e){var n,i=-1,r=t.length,o=e[0],s=e[1],a=e[2];switch(e.length){case 0:for(;++i<r;)(n=t[i]).callback.call(n.ctx);return;case 1:for(;++i<r;)(n=t[i]).callback.call(n.ctx,o);return;case 2:for(;++i<r;)(n=t[i]).callback.call(n.ctx,o,s);return;case 3:for(;++i<r;)(n=t[i]).callback.call(n.ctx,o,s,a);return;default:for(;++i<r;)(n=t[i]).callback.apply(n.ctx,e)}},f={listenTo:"on",listenToOnce:"once"};u.each(f,function(t,e){i[e]=function(e,n,i){var r=this._listeners||(this._listeners={}),o=e._listenerId||(e._listenerId=u.uniqueId("l"));return r[o]=e,"object"==typeof n&&(i=this),e[t](n,i,this),this}}),i.bind=i.on,i.unbind=i.off,i.mixin=function(t){var e=["on","once","off","trigger","stopListening","listenTo","listenToOnce","bind","unbind"];return u.each(e,function(e){t[e]=this[e]},this),t},"undefined"!=typeof t&&t.exports&&(e=t.exports=i),e.BackboneEvents=i}(this)},function(t,e){t.exports={PLAYING:"playing",LOADING:"loading",SEEKING:"seeking",PAUSED:"paused",ERROR:"error",IDLE:"idle",INITIALIZE:"initialize",ENDED:"ended",DEAD:"dead"}},function(t,e){t.exports={POSITION_CHANGE:"position-change",STATE_CHANGE:"state-change",DATA:"data",NETWORK_TIMEOUT:"network-timeout",METADATA:"metadata"}},function(t,e,n){var i,r=n(41),o=null;t.exports=function(t,e,n,s){if(!i&&(i=r(!!s.debug,"audiomanager"),o)){var a=i;i=function(){a(o(arguments[0]+"%s",Array.prototype.slice.call(arguments,1)))}}return n=n&&n.length?" ["+n.replace(/\s/g,"").substr(0,6)+"]":"",{log:i.bind(null,"%s (%s)%s",t,e,n)}}},function(t,e){function n(){function t(t,n){for(var i,r=arguments.length,o=Array(r>2?r-2:0),s=2;r>s;s++)o[s-2]=arguments[s];"string"==typeof n?n=" "+n:(o.unshift(n),n=""),(i=window.console)[t].apply(i,[e()+" |"+c+"%c"+n].concat(l,o))}function e(){var t=new Date,e=null===h?0:t-h;return h=+t,"%c"+r(t.getHours())+":"+r(t.getMinutes())+":"+r(t.getSeconds())+"."+i(t.getMilliseconds(),"0",3)+"%c (%c"+i("+"+e+"ms"," ",8)+"%c)"}var n=arguments.length<=0||void 0===arguments[0]?!0:arguments[0],o=arguments.length<=1||void 0===arguments[1]?"":arguments[1];if(!n)return s;var h=null,c=a(o),l=["color: green","color: grey","color: blue","color: grey",u(o),""],f=t.bind(null,"log");return f.log=f,["info","warn","error"].forEach(function(e){f[e]=t.bind(null,e)}),f}function i(t,e,n){return o(e,n-(""+t).length)+t}function r(t){return i(t,"0",2)}function o(t,e){return e>0?new Array(e+1).join(t):""}function s(){}function a(t){return t?"%c"+t:"%c"}t.exports=n,s.log=s.info=s.warn=s.error=s;var u=function(){var t=["#51613C","#447848","#486E5F","#787444","#6E664E"],e=0;return function(n){return n?"background-color:"+t[e++%t.length]+";color:#fff;border-radius:3px;padding:2px 4px;font-family:sans-serif;text-transform:uppercase;font-size:9px;margin:0 4px":""}}()},function(t,e){function n(t){for(var e in r)if(r.hasOwnProperty(e)&&void 0===t[r[e]])throw new Error("Caps lack required field: "+e);if(!(t[r.PROTOCOLS]instanceof Array))throw new Error("Caps protocols must be an array");if(!(t[r.MIMETYPES]instanceof Array))throw new Error("Caps mimetypes must be an array");return!0}function i(){var t={};return t[r.MIMETYPES]=[],t[r.PROTOCOLS]=[],t[r.AUDIO_ONLY]=!0,t[r.CAN_SEEK_ALWAYS]=!0,t[r.NEEDS_URL_REFRESH]=!0,t}var r={MIMETYPES:"mimetypes",PROTOCOLS:"protocols",AUDIO_ONLY:"audioOnly",CAN_SEEK_ALWAYS:"canSeekAlways",NEEDS_URL_REFRESH:"needsUrlRefresh"},o={createDefaults:i,names:r,validate:n};t.exports=o},function(t,e){t.exports={FLASH_HLS_PLAYLIST_NOT_FOUND:"HLS_PLAYLIST_NOT_FOUND",FLASH_HLS_PLAYLIST_SECURITY_ERROR:"HLS_SECURITY_ERROR",FLASH_HLS_NOT_VALID_PLAYLIST:"HLS_NOT_VALID_PLAYLIST",FLASH_HLS_NO_TS_IN_PLAYLIST:"HLS_NO_TS_IN_PLAYLIST",FLASH_HLS_NO_PLAYLIST_IN_MANIFEST:"HLS_NO_PLAYLIST_IN_MANIFEST",FLASH_HLS_TS_IS_CORRUPT:"HLS_TS_IS_CORRUPT",FLASH_HLS_FLV_TAG_CORRUPT:"HLS_FLV_TAG_CORRUPT",FLASH_HTTP_FILE_NOT_FOUND:"HTTP_FILE_NOT_FOUND",FLASH_RTMP_CONNECT_FAILED:"RTMP_CONNECT_FAILED",FLASH_RTMP_CONNECT_CLOSED:"RTMP_CONNECT_CLOSED",FLASH_RTMP_CANNOT_PLAY_STREAM:"RTMP_CANNOT_PLAY_STREAM",FLASH_PROXY_CANT_LOAD_FLASH:"CANT_LOAD_FLASH",FLASH_PROXY_FLASH_BLOCKED:"FLASH_PROXY_FLASH_BLOCKED",GENERIC_AUDIO_ENDED_EARLY:"GENERIC_AUDIO_ENDED_EARLY",GENERIC_AUDIO_OVERRUN:"GENERIC_AUDIO_OVERRUN",HTML5_AUDIO_ABORTED:"HTML5_AUDIO_ABORTED",HTML5_AUDIO_NETWORK:"HTML5_AUDIO_NETWORK",HTML5_AUDIO_DECODE:"HTML5_AUDIO_DECODE",HTML5_AUDIO_SRC_NOT_SUPPORTED:"HTML5_AUDIO_SRC_NOT_SUPPORTED",MSE_BAD_OBJECT_STATE:"MSE_BAD_OBJECT_STATE",MSE_NOT_SUPPORTED:"MSE_NOT_SUPPORTED",MSE_MP3_NOT_SUPPORTED:"MSE_MP3_NOT_SUPPORTED",MSE_HLS_NOT_VALID_PLAYLIST:"MSE_HLS_NOT_VALID_PLAYLIST",MSE_HLS_PLAYLIST_NOT_FOUND:"MSE_HLS_PLAYLIST_NOT_FOUND",MSE_HLS_SEGMENT_NOT_FOUND:"MSE_HLS_SEGMENT_NOT_FOUND"}},function(t,e){function n(){if(!q&&document.getElementsByTagName("body")[0]){try{var t,e=v("span");e.style.display="none",t=j.getElementsByTagName("body")[0].appendChild(e),t.parentNode.removeChild(t),t=null,e=null}catch(n){return}q=!0;for(var i=V.length,r=0;i>r;r++)V[r]()}}function i(t){q?t():V[V.length]=t}function r(t){if(typeof H.addEventListener!=k)H.addEventListener("load",t,!1);else if(typeof j.addEventListener!=k)j.addEventListener("load",t,!1);else if(typeof H.attachEvent!=k)S(H,"onload",t);else if("function"==typeof H.onload){var e=H.onload;H.onload=function(){e(),t()}}else H.onload=t}function o(){var t=j.getElementsByTagName("body")[0],e=v(N);e.setAttribute("style","visibility: hidden;"),e.setAttribute("type",F);var n=t.appendChild(e);if(n){var i=0;!function r(){if(typeof n.GetVariable!=k)try{var o=n.GetVariable("$version");o&&(o=o.split(" ")[1].split(","),Q.pv=[E(o[0]),E(o[1]),E(o[2])])}catch(a){Q.pv=[8,0,0]}else if(10>i)return i++,void window.setTimeout(r,10);t.removeChild(e),n=null,s()}()}else s()}function s(){var t=z.length;if(t>0)for(var e=0;t>e;e++){var n=z[e].id,i=z[e].callbackFn,r={success:!1,id:n};if(Q.pv[0]>0){var o=y(n);if(o)if(!A(z[e].swfVersion)||Q.wk&&Q.wk<312)if(z[e].expressInstall&&u()){var s={};s.data=z[e].expressInstall,s.width=o.getAttribute("width")||"0",s.height=o.getAttribute("height")||"0",o.getAttribute("class")&&(s.styleclass=o.getAttribute("class")),o.getAttribute("align")&&(s.align=o.getAttribute("align"));for(var l={},f=o.getElementsByTagName("param"),d=f.length,p=0;d>p;p++)"movie"!==f[p].getAttribute("name").toLowerCase()&&(l[f[p].getAttribute("name")]=f[p].getAttribute("value"));h(s,l,n,i)}else c(o),i&&i(r);else T(n,!0),i&&(r.success=!0,r.ref=a(n),r.id=n,i(r))}else if(T(n,!0),i){var g=a(n);g&&typeof g.SetVariable!=k&&(r.success=!0,r.ref=g,r.id=g.id),i(r)}}}function a(t){var e=null,n=y(t);return n&&"OBJECT"===n.nodeName.toUpperCase()&&(e=typeof n.SetVariable!==k?n:n.getElementsByTagName(N)[0]||n),e}function u(){return!X&&A("6.0.65")&&(Q.win||Q.mac)&&!(Q.wk&&Q.wk<312)}function h(t,e,n,i){var r=y(n);if(n=m(n),X=!0,O=i||null,R={success:!1,id:n},r){"OBJECT"===r.nodeName.toUpperCase()?(I=l(r),L=null):(I=r,L=n),t.id=U,(typeof t.width==k||!/%$/.test(t.width)&&E(t.width)<310)&&(t.width="310"),(typeof t.height==k||!/%$/.test(t.height)&&E(t.height)<137)&&(t.height="137");var o=Q.ie?"ActiveX":"PlugIn",s="MMredirectURL="+encodeURIComponent(H.location.toString().replace(/&/g,"%26"))+"&MMplayerType="+o+"&MMdoctitle="+encodeURIComponent(j.title.slice(0,47)+" - Flash Player Installation");if(typeof e.flashvars!=k?e.flashvars+="&"+s:e.flashvars=s,Q.ie&&4!==r.readyState){var a=v("div");n+="SWFObjectNew",a.setAttribute("id",n),r.parentNode.insertBefore(a,r),r.style.display="none",g(r)}d(t,e,n)}}function c(t){if(Q.ie&&4!==t.readyState){t.style.display="none";var e=v("div");t.parentNode.insertBefore(e,t),e.parentNode.replaceChild(l(t),e),g(t)}else t.parentNode.replaceChild(l(t),t)}function l(t){var e=v("div");if(Q.win&&Q.ie)e.innerHTML=t.innerHTML;else{var n=t.getElementsByTagName(N)[0];if(n){var i=n.childNodes;if(i)for(var r=i.length,o=0;r>o;o++)1===i[o].nodeType&&"PARAM"===i[o].nodeName||8===i[o].nodeType||e.appendChild(i[o].cloneNode(!0))}}return e}function f(t,e){var n=v("div");return n.innerHTML="<object classid='clsid:D27CDB6E-AE6D-11cf-96B8-444553540000'><param name='movie' value='"+t+"'>"+e+"</object>",n.firstChild}function d(t,e,n){var i,r=y(n);if(n=m(n),Q.wk&&Q.wk<312)return i;if(r){var o,s,a,u=v(Q.ie?"div":N);typeof t.id==k&&(t.id=n);for(a in e)e.hasOwnProperty(a)&&"movie"!==a.toLowerCase()&&p(u,a,e[a]);Q.ie&&(u=f(t.data,u.innerHTML));for(o in t)t.hasOwnProperty(o)&&(s=o.toLowerCase(),"styleclass"===s?u.setAttribute("class",t[o]):"classid"!==s&&"data"!==s&&u.setAttribute(o,t[o]));Q.ie?W[W.length]=t.id:(u.setAttribute("type",F),u.setAttribute("data",t.data)),r.parentNode.replaceChild(u,r),i=u}return i}function p(t,e,n){var i=v("param");i.setAttribute("name",e),i.setAttribute("value",n),t.appendChild(i)}function g(t){var e=y(t);e&&"OBJECT"===e.nodeName.toUpperCase()&&(Q.ie?(e.style.display="none",function n(){if(4===e.readyState){for(var t in e)"function"==typeof e[t]&&(e[t]=null);e.parentNode.removeChild(e)}else window.setTimeout(n,10)}()):e.parentNode.removeChild(e))}function _(t){return t&&t.nodeType&&1===t.nodeType}function m(t){return _(t)?t.id:t}function y(t){if(_(t))return t;var e=null;try{e=j.getElementById(t)}catch(n){}return e}function v(t){return j.createElement(t)}function E(t){return parseInt(t,10)}function S(t,e,n){t.attachEvent(e,n),K[K.length]=[t,e,n]}function A(t){t+="";var e=Q.pv,n=t.split(".");return n[0]=E(n[0]),n[1]=E(n[1])||0,n[2]=E(n[2])||0,e[0]>n[0]||e[0]===n[0]&&e[1]>n[1]||e[0]===n[0]&&e[1]===n[1]&&e[2]>=n[2]}function w(t,e,n,i){var r=j.getElementsByTagName("head")[0];if(r){var o="string"==typeof n?n:"screen";if(i&&(D=null,M=null),!D||M!==o){var s=v("style");s.setAttribute("type","text/css"),s.setAttribute("media",o),D=r.appendChild(s),Q.ie&&typeof j.styleSheets!=k&&j.styleSheets.length>0&&(D=j.styleSheets[j.styleSheets.length-1]),M=o}D&&(typeof D.addRule!=k?D.addRule(t,e):typeof j.createTextNode!=k&&D.appendChild(j.createTextNode(t+" {"+e+"}")))}}function T(t,e){if($){var n=e?"visible":"hidden",i=y(t);q&&i?i.style.visibility=n:"string"==typeof t&&w("#"+t,"visibility:"+n)}}function b(t){var e=/[\\\"<>\.;]/,n=null!=e.exec(t);return n&&typeof encodeURIComponent!=k?encodeURIComponent(t):t}/*!    SWFObject v2.3.20130521 <http://github.com/swfobject/swfobject>
		    is released under the MIT License <http://www.opensource.org/licenses/mit-license.php>
		*/
var P,I,L,O,R,D,M,k="undefined",N="object",x="Shockwave Flash",C="ShockwaveFlash.ShockwaveFlash",F="application/x-shockwave-flash",U="SWFObjectExprInst",B="onreadystatechange",H=window,j=document,G=navigator,Y=!1,V=[],z=[],W=[],K=[],q=!1,X=!1,$=!0,Z=!1,Q=function(){var t=typeof j.getElementById!=k&&typeof j.getElementsByTagName!=k&&typeof j.createElement!=k,e=G.userAgent.toLowerCase(),n=G.platform.toLowerCase(),i=n?/win/.test(n):/win/.test(e),r=n?/mac/.test(n):/mac/.test(e),o=/webkit/.test(e)?parseFloat(e.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):!1,s="Microsoft Internet Explorer"===G.appName,a=[0,0,0],u=null;if(typeof G.plugins!=k&&typeof G.plugins[x]==N)u=G.plugins[x].description,u&&typeof G.mimeTypes!=k&&G.mimeTypes[F]&&G.mimeTypes[F].enabledPlugin&&(Y=!0,s=!1,u=u.replace(/^.*\s+(\S+\s+\S+$)/,"$1"),a[0]=E(u.replace(/^(.*)\..*$/,"$1")),a[1]=E(u.replace(/^.*\.(.*)\s.*$/,"$1")),a[2]=/[a-zA-Z]/.test(u)?E(u.replace(/^.*[a-zA-Z]+(.*)$/,"$1")):0);else if(typeof H.ActiveXObject!=k)try{var h=new ActiveXObject(C);h&&(u=h.GetVariable("$version"),u&&(s=!0,u=u.split(" ")[1].split(","),a=[E(u[0]),E(u[1]),E(u[2])]))}catch(c){}return{w3:t,pv:a,wk:o,ie:s,win:i,mac:r}}();!function(){Q.w3&&((typeof j.readyState!=k&&("complete"===j.readyState||"interactive"===j.readyState)||typeof j.readyState==k&&(j.getElementsByTagName("body")[0]||j.body))&&n(),q||(typeof j.addEventListener!=k&&j.addEventListener("DOMContentLoaded",n,!1),Q.ie&&(j.attachEvent(B,function t(){"complete"===j.readyState&&(j.detachEvent(B,t),n())}),H===top&&!function e(){if(!q){try{j.documentElement.doScroll("left")}catch(t){return void window.setTimeout(e,0)}n()}}()),Q.wk&&!function i(){return q?void 0:/loaded|complete/.test(j.readyState)?void n():void window.setTimeout(i,0)}()))}(),V[0]=function(){Y?o():s()},function(){Q.ie&&window.attachEvent("onunload",function(){for(var t=K.length,e=0;t>e;e++)K[e][0].detachEvent(K[e][1],K[e][2]);for(var n=W.length,i=0;n>i;i++)g(W[i]);for(var r in Q)Q[r]=null;Q=null;for(var o in P)P[o]=null;P=null})}(),t.exports=P={registerObject:function(t,e,n,i){if(Q.w3&&t&&e){var r={};r.id=t,r.swfVersion=e,r.expressInstall=n,r.callbackFn=i,z[z.length]=r,T(t,!1)}else i&&i({success:!1,id:t})},getObjectById:function(t){return Q.w3?a(t):void 0},embedSWF:function(t,e,n,r,o,s,a,c,l,f){var p=m(e),g={success:!1,id:p};Q.w3&&!(Q.wk&&Q.wk<312)&&t&&e&&n&&r&&o?(T(p,!1),i(function(){n+="",r+="";var i={};if(l&&typeof l===N)for(var _ in l)i[_]=l[_];i.data=t,i.width=n,i.height=r;var m={};if(c&&typeof c===N)for(var y in c)m[y]=c[y];if(a&&typeof a===N)for(var v in a)if(a.hasOwnProperty(v)){var E=Z?encodeURIComponent(v):v,S=Z?encodeURIComponent(a[v]):a[v];typeof m.flashvars!=k?m.flashvars+="&"+E+"="+S:m.flashvars=E+"="+S}if(A(o)){var w=d(i,m,e);i.id===p&&T(p,!0),g.success=!0,g.ref=w,g.id=w.id}else{if(s&&u())return i.data=s,void h(i,m,e,f);T(p,!0)}f&&f(g)})):f&&f(g)},switchOffAutoHideShow:function(){$=!1},enableUriEncoding:function(t){Z=typeof t===k?!0:t},ua:Q,getFlashPlayerVersion:function(){return{major:Q.pv[0],minor:Q.pv[1],release:Q.pv[2]}},hasFlashPlayerVersion:A,createSWF:function(t,e,n){return Q.w3?d(t,e,n):void 0},showExpressInstall:function(t,e,n,i){Q.w3&&u()&&h(t,e,n,i)},removeSWF:function(t){Q.w3&&g(t)},createCSS:function(t,e,n,i){Q.w3&&w(t,e,n,i)},addDomLoadEvent:i,addLoadEvent:r,getQueryParamValue:function(t){var e=j.location.search||j.location.hash;if(e){if(/\?/.test(e)&&(e=e.split("?")[1]),null==t)return b(e);for(var n=e.split("&"),i=0;i<n.length;i++)if(n[i].substring(0,n[i].indexOf("="))===t)return b(n[i].substring(n[i].indexOf("=")+1))}return""},expressInstallCallback:function(){if(X){var t=y(U);t&&I&&(t.parentNode.replaceChild(I,t),L&&(T(L,!0),Q.ie&&(I.style.display="block")),O&&O(R)),X=!1}},version:"2.3"}},function(t,e,n){function i(t,e,n,i){if(n!==s&&n!==o&&void 0!==n)throw new Error("Can not use the provided base class");this._baseclass=n||o,this._baseclass.call(this,t,e,i||"HLSAudioPlayer"),this._seekPosition=0}var r=n(1),o=n(46),s=n(48),a=n(38);t.exports=i,r(i.prototype,o.prototype),i.prototype.seek=function(t){this._baseclass.prototype.seek.apply(this,arguments),this._isInOneOfStates(a.LOADING,a.SEEKING)&&(this._seekPosition=t)},i.prototype.getCurrentPosition=function(){if(this._isInOneOfStates(a.LOADING)&&this._seekPosition>0)return this._seekPosition;if(this._isInOneOfStates(a.PLAYING,a.SEEKING)){if(this._seekPosition>=this._currentPosition)return this._seekPosition;this._seekPosition=0}return this._baseclass.prototype.getCurrentPosition.apply(this,arguments)}},function(t,e,n){function i(t,e,n){this._duration=0,this._currentPosition=0,this._loadedPosition=0,h.prototype.constructor.call(this,n||"HTML5AudioPlayer",t,e),this._isLoaded=!1,this._prevCurrentPosition=0,this._prevCheckTime=0,this._positionUpdateTimer=0,this._playRequested=!1,this._startFromPosition=0,this.getDescriptor().duration&&(this._duration=this.getDescriptor().duration),this._bindHandlers(),this._initMediaElement(),this.updateState(s.IDLE)}var r=n(1),o=n(47).bindAll,s=n(38),a=n(39),u=n(43),h=n(35),c=n(16);t.exports=i,r(i.prototype,h.prototype),i.MediaAPIEvents=["ended","play","playing","pause","seeking","waiting","seeked","error","loadeddata","loadedmetadata"],i.prototype.play=function(t){return this._isInOneOfStates(s.ERROR,s.DEAD)?void this._logger.log("play called but state is ERROR or DEAD"):(this._logger.log("play from "+t),this._startFromPosition=t||0,this._playRequested=!0,this._isInOneOfStates(s.PAUSED,s.ENDED)?void this.resume():(this.updateState(s.LOADING),this._html5Audio.readyState>0&&this._onLoadedMetadata(),this._html5Audio.readyState>1&&this._onLoaded(),void(this._isLoaded?this._playAfterLoaded():this.once(a.DATA,this._playAfterLoaded))))},i.prototype.pause=function(){this._isInOneOfStates(s.ERROR,s.DEAD)||(this._logger.log("pause"),this._playRequested=!1,this._html5Audio&&this._html5Audio.pause())},i.prototype.seek=function(t){var e,n=!1,i=t/1e3,r=this._html5Audio.seekable;if(!this._isInOneOfStates(s.ERROR,s.DEAD)){if(!this._isLoaded)return this.once(a.DATA,function(){this.seek(t)}),void this._logger.log("postponing seek for when loaded");if(c.isIE10Mobile)n=!0;else for(e=0;e<r.length;e++)if(i<=r.end(e)&&i>=r.start(e)){n=!0;break}if(!n)return void this._logger.log("can not seek");this._logger.log("seek"),this.updateState(s.SEEKING),this._html5Audio.currentTime=i,this._currentPosition=t,this._lastMediaClockCheck=null}},i.prototype.resume=function(){return this._isInOneOfStates(s.ERROR,s.DEAD)?void this._logger.log("resume called but state is ERROR or DEAD"):(this._logger.log("resume"),void(this.getState()===s.PAUSED?(this.updateState(s.PLAYING),this._html5Audio.play(this._html5Audio.currentTime)):this.getState()===s.ENDED&&this._html5Audio.play(0)))},i.prototype.setVolume=function(t){this._html5Audio&&(this._html5Audio.volume=t)},i.prototype.getVolume=function(){return this._html5Audio?this._html5Audio.volume:1},i.prototype.setMute=function(t){this._html5Audio&&(this._html5Audio.muted=t)},i.prototype.getMute=function(){return this._html5Audio?this._html5Audio.muted:!1},i.prototype.kill=function(){this._state!==s.DEAD&&(this._logger.log("killing ..."),this._resetPositionInterval(!1),this._playRequested=!1,this._toggleEventListeners(!1),this.pause(),delete this._html5Audio,this.updateState(s.DEAD),this._logger.log("dead"))},i.prototype.getErrorMessage=function(){return this._errorMessage},i.prototype.getErrorID=function(){return this._errorID},i.prototype._bindHandlers=function(){o(this,["_onPositionChange","_onHtml5MediaEvent","_onLoaded","_onLoadedMetadata"])},i.prototype._initMediaElement=function(){this._html5Audio=c.createAudioElement(),this._html5Audio.id=this.getSettings().audioObjectID+"_"+this.getId(),this._html5Audio.preload="auto",this._html5Audio.type=this.getDescriptor().mimeType,this._html5Audio.src=this.getDescriptor().src,this._html5Audio.load(),this._toggleEventListeners(!0)},i.prototype._playAfterLoaded=function(){this._playRequested&&(this._trySeekToStartPosition(),this._html5Audio.play())},i.prototype._isInOneOfStates=function(){for(var t in arguments)if(arguments[t]===this._state)return!0;return!1},i.prototype._toggleEventListeners=function(t){if(this._html5Audio){var e=t?"addEventListener":"removeEventListener";i.MediaAPIEvents.forEach(function(t){switch(t){case"loadeddata":this._html5Audio[e]("loadeddata",this._onLoaded);break;case"loadedmetadata":this._html5Audio[e]("loadedmetadata",this._onLoadedMetadata);break;default:this._html5Audio[e](t,this._onHtml5MediaEvent)}},this)}},i.prototype._trySeekToStartPosition=function(){var t;return this._startFromPosition>0&&(this._logger.log("seek to start position: "+this._startFromPosition),t=this._startFromPosition/1e3,this._html5Audio.currentTime=t,this._html5Audio.currentTime===t)?(this._lastMediaClockCheck=null,this._currentPosition=this._startFromPosition,this._startFromPosition=0,!0):!1},i.prototype._onLoaded=function(){this._logger.log("HTML5 media loadeddata event"),this.trigger(a.DATA,this)},i.prototype._onLoadedMetadata=function(){this._logger.log("HTML5 media loadedmetadata event"),(void 0===this._duration||0===this._duration)&&(this._duration=1e3*this._html5Audio.duration),this._loadedPosition=this._duration,this._isLoaded=!0,this.trigger(a.METADATA,this)},i.prototype._resetPositionInterval=function(t){window.clearInterval(this._positionUpdateTimer),t&&(this._positionUpdateTimer=window.setInterval(this._onPositionChange,this.getSettings().updateInterval))},i.prototype._onPositionChange=function(){if(!this._isInOneOfStates(s.DEAD)){var t;return Date.now(),this._currentPosition=1e3*this._html5Audio.currentTime,this.trigger(a.POSITION_CHANGE,this.getCurrentPosition(),this._loadedPosition,this._duration,this),this._isInOneOfStates(s.PLAYING,s.LOADING)?0!==this._duration&&(this._currentPosition>this._duration||this._currentPosition>this._loadedPosition&&!c.isIE10Mobile)?void this._onHtml5MediaEvent({type:"ended"}):this.getState()!==s.PLAYING||this._mediasHasProgressed()?void(this.getState()!==s.PLAYING&&this._mediasHasProgressed()&&this.updateState(s.PLAYING)):(this._logger.log("media clock check failed, playhead is not advancing anymore"),void this.updateState(s.LOADING)):void(this._state===s.SEEKING&&t>0&&this.updateState(s.PLAYING))}},i.prototype._mediasHasProgressed=function(){var t=!1,e=Date.now();if(this._lastMediaClockCheck){var n=e-this._lastMediaClockCheck,i=this._currentPosition-this._lastMediaClockValue;if(.1*n>i){if(0===i&&50>n)return!0;t=!0}}return this._lastMediaClockValue=this._currentPosition,this._lastMediaClockCheck=e,!t},i.prototype._onHtml5MediaEvent=function(t){switch(this._logger.log("HTML5 media event: "+t.type),t.type){case"playing":if(this._trySeekToStartPosition())break;this._onPositionChange(),this._resetPositionInterval(!0),this.updateState(s.PLAYING);break;case"pause":this._onPositionChange(),this._resetPositionInterval(!1),this.updateState(s.PAUSED);break;case"ended":this._currentPosition=this._loadedPosition=this._duration,this._resetPositionInterval(!1),this.updateState(s.ENDED);break;case"waiting":if(this.getState()===s.SEEKING)break;this.updateState(s.LOADING);break;case"seeking":this.updateState(s.SEEKING);break;case"seeked":this._html5Audio.paused?this.updateState(s.PAUSED):this.updateState(s.PLAYING),this._onPositionChange(t);break;case"error":this._error(this._html5AudioErrorCodeToErrorId(),!0)}},i.prototype._html5AudioErrorCodeToErrorId=function(){return{1:u.HTML5_AUDIO_ABORTED,2:u.HTML5_AUDIO_NETWORK,3:u.HTML5_AUDIO_DECODE,4:u.HTML5_AUDIO_SRC_NOT_SUPPORTED}[this._html5Audio.error.code]},i.prototype._error=function(t,e){var n="error: ";e&&(n="error (native): "),this._errorID=t,this._errorMessage=this._getErrorMessage(this._errorID),this._logger.log(n+this._errorID+" "+this._errorMessage),this.updateState(s.ERROR),this._toggleEventListeners(!1)},i.prototype._getErrorMessage=function(t){var e={};return e[u.HTML5_AUDIO_ABORTED]="The fetching process for the media resource was aborted by the user agent at the user's request.",e[u.HTML5_AUDIO_NETWORK]="A network error of some description caused the user agent to stop fetching the media resource, after the resource was established to be usable.",e[u.HTML5_AUDIO_DECODE]="An error of some description occurred while decoding the media resource, after the resource was established to be usable.",e[u.HTML5_AUDIO_SRC_NOT_SUPPORTED]="The media resource indicated by the src attribute was not suitable.",e[t]}},function(t,e){function n(t,e){var n=new Uint8Array(t.byteLength+e.byteLength);return n.set(new Uint8Array(t),0),n.set(new Uint8Array(e),t.byteLength),n}t.exports={bindAll:function(t,e){e.forEach(function(e){t[e]=t[e].bind(t)})},concatBuffersToUint8Array:n}},function(t,e,n){function i(t,e,n){u.prototype.constructor.call(this,t,e,n||"HTML5SingleAudioPlayer")}var r,o=n(1),s=n(16),a=n(39),u=n(46),h=n(38),c={};t.exports=i,o(i.prototype,u.prototype),i._onLoaded=function(t){i._pauseOthersAndForwardEvent("_onLoaded",t)},i._onLoadedMetadata=function(t){i._pauseOthersAndForwardEvent("_onLoadedMetadata",t)},i._onHtml5MediaEvent=function(t){i._pauseOthersAndForwardEvent("_onHtml5MediaEvent",t)},i._pauseOthersAndForwardEvent=function(t,e){Object.keys(c).forEach(function(n){var i=c[n];n===r?i[t](e):i.pause()})},i.prototype._initMediaElement=function(){i._html5Audio||(i._html5Audio=s.createAudioElement(),i._html5Audio.id=this.getSettings().audioObjectID+"_Single",u.prototype._toggleEventListeners.call(i,!0)),this._toggleEventListeners(!0),this._html5Audio=i._html5Audio,this._logger.log("initialized player for use with: "+this.getDescriptor().src)},i.prototype._toggleEventListeners=function(t){t?c[this.getId()]=this:delete c[this.getId()]},i.prototype.play=function(t){this._logger.log("singleton play at: "+t),(0===this._html5Audio.readyState||this.getDescriptor().src!==this._html5Audio.src)&&(this._logger.log("setting up audio element for use with: "+this.getDescriptor().src),r=this.getId(),this._isInOneOfStates(h.PAUSED)&&(this._logger.log("state was paused"),t=this._currentPosition||0),this._toggleEventListeners(!0),this._html5Audio.preload="auto",this._html5Audio.type=this.getDescriptor().mimeType,this._html5Audio.src=this.getDescriptor().src,this._html5Audio.load()),u.prototype.play.call(this,t)},i.prototype.resume=function(){return this._isInOneOfStates(h.ERROR,h.DEAD)?void 0:r!==this.getId()?void this.play(this._currentPosition):void u.prototype.resume.apply(this,arguments)},i.prototype.pause=function(){this._isInOneOfStates(h.ERROR,h.DEAD)||(this._logger.log("singleton pause"),r===this.getId()?u.prototype.pause.apply(this,arguments):(this._toggleEventListeners(!1),this._isInOneOfStates(h.PAUSED)||this.updateState(h.PAUSED),this._resetPositionInterval(!1)))},i.prototype.seek=function(t){return r!==this.getId()?(this._currentPosition=t,void this.trigger(a.POSITION_CHANGE,this._currentPosition,this._loadedPosition,this._duration,this)):void u.prototype.seek.apply(this,arguments)}},function(t,e,n){function i(t,e){o.call(this,t,e,s,"HLSSingleAudioPlayer")}var r=n(1),o=n(45),s=n(48);t.exports=i,r(i.prototype,s.prototype,o.prototype)},function(t,e,n){function i(t,e){return u.prototype.constructor.call(this,"HLSMSEPlayer",t,e,w()),o(this,["_onPositionChange","_onPlaylistLoaded","_onPlaylistFailed","_onSegmentLoaded","_onSegmentProgress","_onSegmentFailed","_onHtml5MediaEvent","_onLoadedData","_onLoadedMetadata","_onMediaSourceAppend","_onMediaSourceReady","_onMediaSourceDestroy","_onMediaSourceError"]),this._streamUrlProvider=this.getSettings().streamUrlProvider||null,this._minPreBufferLengthForPlayback=5e3,this._maxBufferLength=3e4,this._streamUrlRetryTimer=null,this._streamUrlTimesFailed=0,this._playlistRetryTimer=null,this._playlistTimesFailed=0,this._playlistRefreshInProgress=!1,this._isPlaylistLoaded=!1,this._loadOnInit=!1,this._schedulingSegmentIndex=-1,this._segmentsDownloading=[],this._nextSchedulingTimeout=null,this._mimeType=T(),this._mimeType?(this._mseToolkit=new l(this._logger,this._mimeType),this._mseToolkit.on(l.Events.SEGMENT_APPENDED,this._onMediaSourceAppend),this._mseToolkit.on(l.Events.SOURCE_READY,this._onMediaSourceReady),this._mseToolkit.on(l.Events.SOURCE_DESTROY,this._onMediaSourceDestroy),this._mseToolkit.on(l.Events.SOURCE_ERROR,this._onMediaSourceError),this._hlsToolkit=new c(this._logger,this.getDescriptor().src),this._hlsToolkit.on(c.Events.SEGMENT_LOADED,this._onSegmentLoaded),this._hlsToolkit.on(c.Events.SEGMENT_PROGRESS,this._onSegmentProgress),this._hlsToolkit.on(c.Events.SEGMENT_FAILED,this._onSegmentFailed),this._hlsToolkit.on(c.Events.PLAYLIST_LOADED,this._onPlaylistLoaded),this._hlsToolkit.on(c.Events.PLAYLIST_FAILED,this._onPlaylistFailed),this._hlsToolkit.on(c.Events.PLAYLIST_PARSE_ERROR,this._onPlaylistFailed),this._html5Audio=this._mseToolkit.media(),void this._toggleEventListeners(!0)):void this._error(a.MSE_NOT_SUPPORTED)}var r=n(1),o=n(47).bindAll,s=n(39),a=n(43),u=n(35),h=n(46),c=n(51),l=n(66),f=n(67),d=n(38),p=n(42),g=n(128),_=n(129),m=n(16),y=200,v=500,E=3,S=1e4,A=function(t){var e=t/E,n=v*(Math.pow(Math.E,e)/Math.E);return n+=Math.random()*y,n>S&&(n=S),n},w=function(){var t={};return t[p.names.PROTOCOLS]=[g.HLS],t[p.names.MIMETYPES]=[_.HLS,_.M3U8,_.MP3],t[p.names.NEEDS_URL_REFRESH]=!1,t},T=function(){return m.isMSESupportMPEG()&&!m.isNativeHlsSupported()?"audio/mpeg":m.isMSESupportMP4()?"audio/mp4":null};t.exports=i,r(i.prototype,u.prototype),i.prototype._onLoadedData=function(){this._logger.log("loadeddata event handler"),this.trigger(s.DATA)},i.prototype._onLoadedMetadata=function(){this._logger.log("loadedmetadata event handler")},i.prototype._mediasHasProgressed=function(){var t=!1,e=Date.now();if(this._lastMediaClockCheck){var n=e-this._lastMediaClockCheck,i=this._currentPosition-this._lastMediaClockValue;if(.1*n>i){if(0===i&&50>n)return!0;t=!0}}return this._lastMediaClockValue=this._currentPosition,this._lastMediaClockCheck=e,!t},i.prototype._onPositionChange=function(){return this._html5Audio&&this.getState()!==d.SEEKING?(this._currentPosition=1e3*this._html5Audio.currentTime,this.getState()!==d.PLAYING||this._mediasHasProgressed()?(this.getState()!==d.PLAYING&&this._mediasHasProgressed()&&this.updateState(d.PLAYING),this._triggerPositionEvent(),this._currentPosition>=this._duration?void this.updateState(d.ENDED):void 0):(this._logger.log("media clock check failed, playhead is not advancing anymore"),void this.updateState(d.LOADING))):void 0},i.prototype._onMediaSourceReady=function(){this.getDescriptor().duration&&(this._setDuration(this.getDescriptor().duration),this._logger.log("duration set from descriptor to "+this._duration)),this.updateState(d.IDLE),this._loadOnInit&&this._loadInitialPlaylist()},i.prototype._onMediaSourceDestroy=function(){this.kill()},i.prototype._onMediaSourceError=function(t){this._logger.log("MediaSource API error: "+t.message),this._error(a.MSE_BAD_OBJECT_STATE),this.kill()},i.prototype._onMediaSourceAppend=function(t){this._logger.log("segment appended: "+t.index),this.trigger(s.DATA,t),this._loadedPosition=t.endPosition,this._playRequested&&(this._logger.log("triggering playback after appending enough segments"),this._html5Audio.play(this._currentPosition))},i.prototype._onSegmentProgress=function(t){var e=Math.round(t.loaded/t.total*100);this._logger.log("segment "+t.index+" loaded "+t.loaded+" of "+t.total+" bytes ("+e+"%)"),this._loadedPosition=t.endPosition-t.duration*(t.loaded/t.total)},i.prototype._onSegmentLoaded=function(t){return this._mseToolkit.sourceIsReady()?void this._appendSegments():void this._logger.log("we have been disposed while loading a segment, noop")},i.prototype._onSegmentFailed=function(t){switch(this._logger.log("segment loading failed handler: "+t.status),t.status){case c.Status.NOT_FOUND:case c.Status.FORBIDDEN:this._cancelNextScheduling(),this._cancelAllInFlightRequests(),this._refreshPlaylist();break;case c.Status.TIMEOUT:this.trigger(s.NETWORK_TIMEOUT);case c.Status.SERVER_ERROR:if(t.aborted){this._logger.log("aborted segment has been prevented from being retried");break}t.scheduleRetry(A(t.timesFailed),this._hlsToolkit.loadSegment,this._hlsToolkit);break;case c.Status.FAILED:this._logger.log("WARNING: segment loading failed for unknown reason!");break;default:throw new Error("Invalid status on failed segment: "+t.status)}},i.prototype._onPlaylistLoaded=function(){return this._logger.log("playlist loaded handler"),this._mseToolkit.sourceIsReady()?(this._playlistRefreshInProgress&&(this._cancelNextScheduling(),this._runScheduling()),this._playlistRefreshInProgress=!1,this._playlistTimesFailed=0,this._isPlaylistLoaded=!0,this._inspectEncryptionData(),this._setDuration(this._hlsToolkit.getDuration()),this._logger.log("duration set from playlist info to "+this._duration),void this.trigger(s.METADATA)):void this._logger.log("we have been disposed while loading the playlist, noop")},i.prototype._onPlaylistFailed=function(t){return this._logger.log("playlist loading failed handler. HTTP status code is "+t),this._mseToolkit.sourceIsReady()?(this._logger.log("Playlist loading failed  "+this._playlistTimesFailed+" times before"),this._playlistTimesFailed++,this._playlistRetryTimer=window.setTimeout(function(){this.hasStreamUrlProvider()?this._refreshPlaylist():this._hlsToolkit.updatePlaylist()}.bind(this),A(this._playlistTimesFailed)),void(0===t&&this.trigger(s.NETWORK_TIMEOUT))):void this._logger.log("we have been disposed while loading the playlist, noop")},i.prototype.afterStateChange=function(t,e){switch(e){case d.PLAYING:this._runScheduling();break;case d.PAUSED:this._cancelNextScheduling()}},i.prototype._onHtml5MediaEvent=function(t){switch(this._logger.log('HTML5 media event "'+t.type+'"'),this._waitingToPause=!1,t.type){case"playing":this._playRequested=!1,this._triggerPositionEvent(),this._resetPositionTimer(!0),this.updateState(d.PLAYING);break;case"pause":this._triggerPositionEvent(),this._resetPositionTimer(!1),this.updateState(d.PAUSED);break;case"ended":this._currentPosition=this._loadedPosition=this._duration,this._triggerPositionEvent(),this._resetPositionTimer(!1),this.updateState(d.ENDED);break;case"waiting":if(this.getState()===d.SEEKING)break;this.updateState(d.LOADING);break;case"seeking":this._triggerPositionEvent(),this.updateState(d.SEEKING);break;case"seeked":this._html5Audio.paused?this.updateState(d.PAUSED):this.updateState(d.PLAYING),this._onPositionChange();break;case"error":this._error(this._html5AudioErrorCodeToErrorId(),!0)}},i.prototype._toggleEventListeners=function(t){if(this._html5Audio){var e=t?"addEventListener":"removeEventListener";h.MediaAPIEvents.forEach(function(t){switch(t){case"loadeddata":this._html5Audio[e]("loadeddata",this._onLoadedData);break;case"loadedmetadata":this._html5Audio[e]("loadedmetadata",this._onLoadedMetadata);break;case"timeupdate":default:this._html5Audio[e](t,this._onHtml5MediaEvent)}},this)}},i.prototype._loadInitialPlaylist=function(){this.updateState(d.LOADING),this._hlsToolkit.updatePlaylist()},i.prototype._refreshPlaylist=function(){this.hasStreamUrlProvider()&&(this._playlistRefreshfInProgress||(this._playlistRefreshInProgress=!0,this._streamUrlProvider().done(function(t){this._logger.log("got new M3u8 URL: "+t),this._streamUrlTimesFailed=0,this._hlsToolkit.setUri(t),this._hlsToolkit.updatePlaylist()}.bind(this)).fail(function(){this._logger.log("failed to retrieve stream URL :("),this._streamUrlRetryTimer=window.setTimeout(function(){this._playlistRefreshInProgress=!1,this._refreshPlaylist()}.bind(this),A(++this._streamUrlTimesFailed))}.bind(this))))},i.prototype._setDuration=function(t){this._duration=t;try{this._mseToolkit.duration(this._duration)}catch(e){this._onMediaSourceError(e)}},i.prototype._resetPositionTimer=function(t){window.clearInterval(this._positionUpdateTimer),t&&(this._positionUpdateTimer=window.setInterval(this._onPositionChange,this.getSettings().updateInterval))},i.prototype._triggerPositionEvent=function(){this.trigger(s.POSITION_CHANGE,this._currentPosition,this._loadedPosition,this._duration,this)},i.prototype._initTransmuxerOnce=function(t,e){if(!this._transmuxer){var n=this._mimeType!==t.mimeType?f.Configs.MP3_TO_FMP4:f.Configs.VOID;this._transmuxer=new f(n),this._transmuxer.on("segment",function(t){this._logger.log("transmuxed data ready, "+t.data.length+" bytes for segment "+t.index),e(t)}.bind(this))}},i.prototype._transmuxSegment=function(t,e){this._logger.log("transmuxing segment "+t.index),this._initTransmuxerOnce(t,e),this._transmuxer.process(t)},i.prototype._appendSegments=function(){var t=!0;this._segmentsDownloading.slice().forEach(function(e){e.isComplete()&&t?(this._decryptSegment(e),this._transmuxSegment(e,function(t){this._mseToolkit.append(t)}.bind(this)),this._segmentsDownloading.shift()):t=!1},this)},i.prototype._cancelNextScheduling=function(){this._logger.log("cancelling next scheduling"),window.clearTimeout(this._nextSchedulingTimeout),this._nextSchedulingTimeout=null},i.prototype._getBufferUntilTime=function(){return this._currentPosition+this._maxBufferLength},i.prototype._getCurrentSegment=function(){return this._schedulingSegmentIndex>0?this._hlsToolkit.getSegment(this._schedulingSegmentIndex):this._hlsToolkit.getSegmentForTime(this._currentPosition)},i.prototype._runScheduling=function(){function t(){var e=!1,n=this._getBufferUntilTime(),i=this._getCurrentSegment(),r=i?i.duration:Math.Infinity;if(this._logger.log("scheduling next requests, current buffer-until time: "+n+" ms"),!i)return void this._logger.log("no segment to schedule, closing loop");for(this._logger.log("current segment index: "+i.index);i.endPosition<=n;){if(this._logger.log("scheduling loop at "+this._currentPosition+" ms, current segment "+i.index),this._requestSegment(i),i.isLast){e=!0,this._logger.log("end of playlist reached");break}this._schedulingSegmentIndex=i.index+1,i=this._hlsToolkit.getSegment(this._schedulingSegmentIndex)}this._isInOneOfStates(d.DEAD,d.PAUSED)||e?(this._logger.log("not re-scheduling"),this._nextSchedulingTimeout=null):(this._logger.log("timing next check for more data in "+r+" ms"),this._nextSchedulingTimeout=window.setTimeout(t.bind(this),r))}this._nextSchedulingTimeout||t.call(this)},i.prototype._cancelAllInFlightRequests=function(){this._schedulingSegmentIndex=-1,this._segmentsDownloading.forEach(function(t){t.isComplete()||t.cancel()}),this._segmentsDownloading=[]},i.prototype._requestSegment=function(t){return this._segmentsDownloading.push(t),t.isComplete()?(this._logger.log("requested data is already loaded from segment "+t.index),void this._onSegmentLoaded(t)):t.hasBeenRequested()||t.hasFailed()?void this._logger.log("segment already in flight or failed (will retry): "+t.timesFailed+" times"):void this._hlsToolkit.loadSegment(t)},i.prototype._decryptSegment=function(t){this._hlsToolkit.isAES128Encrypted()&&this._hlsToolkit.decryptSegmentAES128(t)},i.prototype._inspectEncryptionData=function(){this._hlsToolkit.isAES128Encrypted()&&(this._logger.log("got key of byte length "+this._hlsToolkit.getEncryptionKey().byteLength),this._hlsToolkit.getEncryptionIv()?this._logger.log("got IV of byte length "+this._hlsToolkit.getEncryptionIv().byteLength):this._logger.log("no IV found in header, will use per-segment-index IV"))},i.prototype._html5AudioErrorCodeToErrorId=function(){return{1:a.HTML5_AUDIO_ABORTED,2:a.HTML5_AUDIO_NETWORK,3:a.HTML5_AUDIO_DECODE,4:a.HTML5_AUDIO_SRC_NOT_SUPPORTED}[this._html5Audio.error.code]},i.prototype._error=function(t,e){this._errorID=t,this._errorMessage=this._getErrorMessage(this._errorID),e&&this._html5Audio.error&&(this._errorMessage+=" (native message: "+this._html5Audio.error.message+")"),this._logger.log(this._errorID+" "+this._errorMessage),this.updateState(d.ERROR),this._toggleEventListeners(!1)},i.prototype._getErrorMessage=function(t){var e={};return e[a.MSE_NOT_SUPPORTED]="The browser does not support MediaSource API",e[a.MSE_BAD_OBJECT_STATE]="MediaSource API has thrown an exception",e[t]?"Error: "+t+" ("+e[t]+")":"Error: "+t},i.prototype.setVolume=function(t){this._html5Audio&&(this._html5Audio.volume=t)},i.prototype.getVolume=function(){return this._html5Audio?this._html5Audio.volume:1},i.prototype.setMute=function(t){this._html5Audio&&(this._html5Audio.muted=t)},i.prototype.getMute=function(){return this._html5Audio?this._html5Audio.muted:!1},i.prototype.getErrorID=function(){return this._errorID},i.prototype.play=function(t){return this._isInOneOfStates(d.ERROR,d.DEAD)?void this._logger.log("play called but state is ERROR or DEAD"):this._isInOneOfStates(d.IDLE,d.INITIALIZE)?(t=t||0,this._logger.log("play from "+t),this._playRequested=!0,this.seek(t),this.getState()===d.INITIALIZE?void(this._loadOnInit=!0):void this._loadInitialPlaylist()):void this.resume()},i.prototype.pause=function(){this._html5Audio&&(this._playRequested=!1,this._html5Audio.pause())},i.prototype.seek=function(t){if(!this._isInOneOfStates(d.ERROR,d.DEAD)){if(!this._isPlaylistLoaded)return void this.once(s.METADATA,function(){this.seek(t)}.bind(this));if(t>this._duration)return void this._logger.log("can not seek to position over duration");this._logger.log("seek to "+t+" ms"),this.updateState(d.SEEKING),this._lastMediaClockCheck=null,this._currentPosition=t;try{this._html5Audio.currentTime=t/1e3}catch(e){this._logger.log("error seeking: "+e.message)}this._cancelAllInFlightRequests(),this._cancelNextScheduling(),this._runScheduling()}},i.prototype.resume=function(){this._html5Audio&&(this._logger.log("resume from "+this._currentPosition),this._html5Audio.play(1e3*this._currentPosition))},i.prototype.kill=function(){this.getState()!==d.DEAD&&(this._logger.log("kill"),this._resetPositionTimer(!1),this._cancelNextScheduling(),this._cancelAllInFlightRequests(),window.clearTimeout(this._playlistRetryTimer),window.clearTimeout(this._streamUrlRetryTimer),this._playRequested=!1,this._toggleEventListeners(!1),this._html5Audio.pause(),this.updateState(d.DEAD))},i.prototype.getErrorMessage=function(){return this._errorMessage},i.prototype.hasStreamUrlProvider=function(){return!!this._streamUrlProvider}},function(t,e,n){var i,r=n(1),o=n(52),s=n(58),a=null,u=n(36),h={NEW:"new",REQUESTED:"requested",COMPLETE:"complete",TIMEOUT:"timeout",FORBIDDEN:"forbidden",NOT_FOUND:"not-found",SERVER_ERROR:"server-error",FAILED:"failed"},c={FIRST:"#EXTM3U",PLAYLIST:"#EXT-X-STREAM-INF:",SEGMENT:"#EXTINF:",END_TAG:"#EXT-X-ENDLIST",ENCRYPTION:"#EXT-X-KEY:"};t.exports=i=function(t,e){this._logger=t,this._duration=0,this.setUri(e)},i.Events={PLAYLIST_LOADED:"playlist-loaded",PLAYLIST_PARSE_ERROR:"playlist-parse-error",PLAYLIST_FAILED:"playlist-failed",SEGMENT_LOADED:"segment-loaded",SEGMENT_PROGRESS:"segment-progress",SEGMENT_FAILED:"segment-failed",SEGMENT_CANCELED:"segment-canceled"},i.Status=h,r(i.prototype,u),i.Segment=function(t,e,n,i,o){r(this,{toolkit:t,uri:e,startPosition:n,endPosition:n+i,duration:i,index:o,data:null,status:h.NEW,isLast:!1,timesFailed:0,loaded:0,total:-1,aborted:!1,xhr:null,mimeType:"audio/mpeg"}),this._logger=t._logger},i.Segment.prototype.containsTime=function(t){return t>=this.startPosition&&t<=this.endPosition},i.Segment.prototype.isComplete=function(){return this.status===h.COMPLETE},i.Segment.prototype.hasFailed=function(){return this.status===h.TIMEOUT||this.status===h.FORBIDDEN||this.status===h.NOT_FOUND||this.status===h.SERVER_ERROR||this.status===h.FAILED},i.Segment.prototype.isNew=function(){return this.status===h.NEW},i.Segment.prototype.hasBeenRequested=function(){return this.status===h.REQUESTED},i.Segment.prototype.scheduleRetry=function(t,e,n){var i=this;this._retryTimer=window.setTimeout(function(){e.call(n,i)},t)},i.Segment.prototype.cancel=function(){this._logger.log("segment cancelled, clearing timeout: "+this.index),window.clearTimeout(this._retryTimer),this.xhr&&(this._logger.log("will abort & reset segment: "+this.index),this.status=h.NEW,this.aborted=!0,this.data=null,this.timesFailed=0,this.xhr.abort(),this.xhr=null,this.toolkit.trigger(i.Events.SEGMENT_CANCELED,this));
},i.prototype.setUri=function(t){var e=this._uri=t;e.indexOf("?")>-1&&(e=e.substr(0,e.indexOf("?"))),this._baseURI=e.substr(0,e.lastIndexOf("/")+1)},i.prototype.updatePlaylist=function(){var t=!1,e=new XMLHttpRequest;e.open("GET",this._uri,!0),e.responseType="text",this._logger.log("downloading playlist");var n=function(n){t||(t=!0,this.trigger(i.Events.PLAYLIST_FAILED,e.status))}.bind(this);e.onload=function(t){return 200!==e.status?void n():(this._segments=[],this._duration=0,this._parsePlaylist(e.responseText)?(this.getLastSegment().isLast=!0,this._logger.log("playlist download complete"),void this._retrieveEncryptionKey(function(){this.trigger(i.Events.PLAYLIST_LOADED)})):(this._logger.log("error parsing playlist"),void this.trigger(i.Events.PLAYLIST_PARSE_ERROR)))}.bind(this),e.onerror=function(t){n(t)}.bind(this),e.send()},i.prototype._parsePlaylist=function(t){for(var e,n,r,o=t.split("\n"),s=!1,a=0,u=0;a<o.length;)e=o[a++],0===e.indexOf(c.SEGMENT)?(r=1e3*Number(e.substr(8,e.indexOf(",")-8)),n=this._createSegmentURL(o[a]),this._addSegment(new i.Segment(this,n,this._duration,r,u++)),a++):0===e.indexOf(c.ENCRYPTION)?this._parsePlaylistEncryptionHeader(e):0===e.indexOf(c.END_TAG)&&(s=!0);return!(0===this.getNumSegments()||!s)},i.prototype._addSegment=function(t){this._segments.push(t),this._duration+=t.duration},i.prototype._parsePlaylistEncryptionHeader=function(t){var e,n,i,r=t.substr(c.ENCRYPTION.length).split(",");if(s(r,function(t){t.indexOf("METHOD")>=0?n=t.split("=")[1]:t.indexOf("URI")>=0?e=t.split("=")[1]:t.indexOf("IV")>=0&&(i=t.split("=")[1])}),!(n&&e&&n.length&&e.length))throw new Error("Failed to parse M3U8 encryption header");n=n.trim(),e=e.trim().replace(/"/g,""),this._encryptionMethod=n,this._encryptionKeyUri=e,i&&i.length?(this._encryptionIvHexString=i.trim(),this._parseEncryptionIvHexString()):this._encryptionIv=null},i.prototype._parseEncryptionIvHexString=function(){var t,e=this._encryptionIvHexString.replace("0x",""),n=new Uint16Array(8),i=0;if(e.length%4!==0)throw new Error("Failed to parse M3U8 encryption IV (length is not multiple of 4)");for(;i<e.length;i+=4){if(t=parseInt(e.substr(i,4),16),isNaN(t))throw new Error("Failed to parse hex number in IV string");n[i/4]=t}this._encryptionIv=n},i.prototype._encryptionIvForSegment=function(t){var e=new DataView(new ArrayBuffer(16));return e.setUint32(0,t.index,!0),e.buffer},i.prototype._retrieveEncryptionKey=function(t){if(t){if(!this._encryptionKeyUri)return void t.call(this);var e=this._encryptionKeyUri,n=new XMLHttpRequest;n.open("GET",e,!0),n.responseType="arraybuffer",n.onload=o(function(i){200===n.status?this._encryptionKey=new Uint8Array(n.response):this._logger.log("Failed to retrieve encryption key from "+e+", returned status "+n.status),t.call(this)},this),n.send(),this._logger.log("Downloading encryption key from "+e)}},i.prototype._removeEncryptionPaddingBytes=function(t){var e=t.data[t.data.byteLength-1];e?(this._logger.log("Detected PKCS7 padding length of "+e+" bytes, slicing segment."),t.data=t.data.subarray(0,t.data.byteLength-e)):this._logger.log("No padding detected (last byte is zero)")},i.prototype.decryptSegmentAES128=function(t){if(this._logger.log("Decrypting AES-128 cyphered segment ..."),!a)throw new Error("AES decryption not built-in");var e=a.cipher.createDecipher("AES-CBC",a.util.createBuffer(this._encryptionKey)),n=0,i=t.data.byteLength,r=this._encryptionIv||this._encryptionIvForSegment(t);for(this._logger.log("Using IV ->"),e.start({iv:a.util.createBuffer(r)}),e.update(a.util.createBuffer(t.data)),e.finish(),t.data=new Uint8Array(i);i>n;n++)t.data[n]=e.output.getByte();this._removeEncryptionPaddingBytes(t)},i.prototype.isAES128Encrypted=function(){return"AES-128"===this._encryptionMethod},i.prototype.getEncryptionKeyUri=function(){return this._encryptionKeyUri},i.prototype.getEncryptionIv=function(){return this._encryptionIv},i.prototype.getEncryptionKey=function(){return this._encryptionKey},i.prototype._createSegmentURL=function(t){return"http://"===t.substr(0,7)||"https://"===t.substr(0,8)||"/"===t.substr(0,1)?t:this._baseURI+t},i.prototype._handleLoadSegmentFailure=function(t,e,n){t.aborted||(this._logger.log("segment aborted: "+t.aborted),this._logger.log("segment loading failure: HTTP response status: "+e.status),0===e.status?t.status=h.TIMEOUT:403===e.status?t.status=h.FORBIDDEN:404===e.status?t.status=h.NOT_FOUND:e.status>=500?t.status=h.SERVER_ERROR:t.status=h.FAILED,t.timesFailed++,this.trigger(i.Events.SEGMENT_FAILED,t))},i.prototype.loadSegment=function(t){var e=!1,n=new XMLHttpRequest,r=t.uri,o=function(i){e||(e=!0,this._handleLoadSegmentFailure(t,n,i))}.bind(this);(t.hasBeenRequested()||t.isComplete())&&this._logger.log("segment cant be loaded, requested: ",!!t.hasBeenRequested()," complete: ",t.isComplete()),n.open("GET",r,!0),n.responseType="arraybuffer",n.onload=function(){if(!t.aborted){if(200!==n.status)return void o();this._logger.log("download of segment "+t.index+" complete"),t.status=h.COMPLETE,t.data=new Uint8Array(n.response),t.downloadTime=Date.now()-t.downloadStartTime,this.trigger(i.Events.SEGMENT_LOADED,t)}}.bind(this),n.onprogress=function(e){t.aborted||e.loaded&&e.total&&(t.loaded=e.loaded,t.total=e.total,this.trigger(i.Events.SEGMENT_PROGRESS,t))}.bind(this),n.onerror=function(t){o(t)}.bind(this),this._logger.log("requesting segment "+t.index+" from "+r),t.xhr=n,t.aborted=!1,t.downloadStartTime=Date.now(),t.status=h.REQUESTED,n.send()},i.prototype.getSegment=function(t){return this._segments&&this._segments[t]?this._segments[t]:null},i.prototype.getSegmentIndexForTime=function(t){var e,n;if(t>this._duration||0>t||!this._segments||0===this._segments.length)return-1;for(e=Math.floor(this._segments.length*(t/this._duration)),n=this._segments[e];!(n.startPosition<=t&&n.startPosition+n.duration>t);)n.startPosition+n.duration>=t?e--:e++,n=this._segments[e];return e},i.prototype.getSegmentForTime=function(t){var e=this.getSegmentIndexForTime(t);return e>=0?this._segments[e]:null},i.prototype.getDuration=function(){return this._duration},i.prototype.getNumSegments=function(){return this._segments.length},i.prototype.getLastSegment=function(){return this._segments.length?this._segments[this._segments.length-1]:null}},function(t,e,n){var i=n(53),r=n(56),o=n(57),s=1,a=32,u=o(function(t,e,n){var o=s;if(n.length){var h=r(n,u.placeholder);o|=a}return i(t,o,e,n,h)});u.placeholder={},t.exports=u},function(t,e,n){(function(e){function i(t,e,n){for(var i=n.length,r=-1,o=P(t.length-i,0),s=-1,a=e.length,u=Array(a+o);++s<a;)u[s]=e[s];for(;++r<i;)u[n[r]]=t[r];for(;o--;)u[s++]=t[r++];return u}function r(t,e,n){for(var i=-1,r=n.length,o=-1,s=P(t.length-r,0),a=-1,u=e.length,h=Array(s+u);++o<s;)h[o]=t[o];for(var c=o;++a<u;)h[c+a]=e[a];for(;++i<r;)h[c+n[i]]=t[o++];return h}function o(t,n){function i(){var o=this&&this!==e&&this instanceof i?r:t;return o.apply(n,arguments)}var r=s(t);return i}function s(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var n=p(t.prototype),i=t.apply(n,e);return f(i)?i:n}}function a(t,n,o,u,h,c,f,p,T,b){function I(){for(var y=arguments.length,v=y,E=Array(y);v--;)E[v]=arguments[v];if(u&&(E=i(E,u,h)),c&&(E=r(E,c,f)),D||k){var w=I.placeholder,x=g(E,w);if(y-=x.length,b>y){var C=p?d(p):void 0,F=P(b-y,0),U=D?x:void 0,B=D?void 0:x,H=D?E:void 0,j=D?void 0:E;n|=D?S:A,n&=~(D?A:S),M||(n&=~(_|m));var G=a(t,n,o,H,U,j,B,C,T,F);return G.placeholder=w,G}}var Y=O?o:this,V=R?Y[t]:t;return p&&(E=l(E,p)),L&&T<E.length&&(E.length=T),this&&this!==e&&this instanceof I&&(V=N||s(t)),V.apply(Y,E)}var L=n&w,O=n&_,R=n&m,D=n&v,M=n&y,k=n&E,N=R?void 0:s(t);return I}function u(t,n,i,r){function o(){for(var n=-1,s=arguments.length,h=-1,c=r.length,l=Array(c+s);++h<c;)l[h]=r[h];for(;s--;)l[h++]=arguments[++n];var f=this&&this!==e&&this instanceof o?u:t;return f.apply(a?i:this,l)}var a=n&_,u=s(t);return o}function h(t,e,n,i,r,s,h,c){var l=e&m;if(!l&&"function"!=typeof t)throw new TypeError(T);var f=i?i.length:0;if(f||(e&=~(S|A),i=r=void 0),f-=r?r.length:0,e&A){var d=i,p=r;i=r=void 0}var g=[t,e,n,i,r,d,p,s,h,c];if(g[9]=null==c?l?0:t.length:P(c-f,0)||0,e==_)var y=o(g[0],g[2]);else y=e!=S&&e!=(_|S)||g[4].length?a.apply(void 0,g):u.apply(void 0,g);return y}function c(t,e){return t="number"==typeof t||b.test(t)?+t:-1,e=null==e?L:e,t>-1&&t%1==0&&e>t}function l(t,e){for(var n=t.length,i=I(e.length,n),r=d(t);i--;){var o=e[i];t[i]=c(o,n)?r[o]:void 0}return t}function f(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}var d=n(54),p=n(55),g=n(56),_=1,m=2,y=4,v=8,E=16,S=32,A=64,w=128,T="Expected a function",b=/^\d+$/,P=Math.max,I=Math.min,L=9007199254740991;t.exports=h}).call(e,function(){return this}())},function(t,e){function n(t,e){var n=-1,i=t.length;for(e||(e=Array(i));++n<i;)e[n]=t[n];return e}t.exports=n},function(t,e){function n(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}var i=function(){function t(){}return function(e){if(n(e)){t.prototype=e;var i=new t;t.prototype=void 0}return i||{}}}();t.exports=i},function(t,e){function n(t,e){for(var n=-1,r=t.length,o=-1,s=[];++n<r;)t[n]===e&&(t[n]=i,s[++o]=n);return s}var i="__lodash_placeholder__";t.exports=n},11,function(t,e,n){function i(t,e){return function(n,i,r){return"function"==typeof i&&void 0===r&&a(n)?t(n,i):e(n,s(i,r,3))}}var r=n(59),o=n(60),s=n(65),a=n(64),u=i(r,o);t.exports=u},function(t,e){function n(t,e){for(var n=-1,i=t.length;++n<i&&e(t[n],n,t)!==!1;);return t}t.exports=n},[134,61],[132,62,63,64],5,6,7,9,function(t,e,n){var i,r=n(36),o=n(16),s=n(47).bindAll,a=n(1);t.exports=i=function(t,e){s(this,["_onMSEInit","_onMSEDispose","_onSourceBufferUpdate"]),this.mimeType=e,this._logger=t,this._isBufferPrepared=!1,this._sourceBufferPtsOffset=0,this._segmentsAwaitingAppendance=[],this._isNotReady=!0,this._sourceBuffer=null,this._mediaSource=new MediaSource,this._mediaSource.addEventListener("sourceopen",this._onMSEInit,!1),this._mediaSource.addEventListener("sourceclose",this._onMSEDispose,!1),this._mediaElem=o.createAudioElement(),this._mediaElem.src=window.URL.createObjectURL(this._mediaSource)},i.Events={SOURCE_READY:"source-ready",SOURCE_DESTROYED:"source-destroy",SOURCE_ERROR:"source-error",SEGMENT_APPENDED:"segment-appended"},a(i.prototype,r),a(i.prototype,{_onMSEInit:function(){this._logger.log("source open handler"),this._isNotReady=!1,this._mediaSource.removeEventListener("sourceopen",this._onMSEInit,!1),this._sourceBuffer=this._mediaSource.addSourceBuffer(this.mimeType),this._sourceBuffer.addEventListener("update",this._onSourceBufferUpdate),this.trigger(i.Events.SOURCE_READY)},_onMSEDispose:function(){this._isNotReady=!0,this._logger.log("source dispose handler"),this._mediaSource.removeEventListener("sourceclose",this._onMSEDispose,!1)},_appendNextSegment:function(t){try{if(this._sourceBuffer.updating)return this._logger.log("source buffer is busy updating already, enqueuing data for later appending"),void this._segmentsAwaitingAppendance.unshift(t);t.isLast&&this._logger.log("about to append last segment"),this._currentSegmentAppending=t,this._sourceBuffer.timestampOffset=t.startPosition/1e3,this._sourceBuffer.appendBuffer(t.data),this._logger.log("appending segment "+t.index)}catch(e){this._logger.log("error while appending to SourceBuffer: "+e.message+")"),this.trigger(i.Events.SOURCE_ERROR,e)}},_tryAppendEos:function(){this._logger.log("attempting to finalize stream");try{"open"!==this._mediaSource.readyState||this._sourceBuffer.updating?this._logger.log("couldn't call endOfStream because SourceBuffer is still updating, we'll call it once its done"):(this._mediaSource.endOfStream(),this._logger.log("called endOfStream"))}catch(t){this._logger.log("SourceBuffer endOfStream() call failed with error: "+t.message),this.trigger(i.Events.SOURCE_ERROR,t)}},_onSourceBufferUpdate:function(){(this._currentSegmentAppending||this._sourceBuffer.updating)&&(this._logger.log("done updating SourceBuffer with segment "+this._currentSegmentAppending.index),this.trigger(i.Events.SEGMENT_APPENDED,this._currentSegmentAppending),this._currentSegmentAppending.isLast&&(this._logger.log("was last segment, setting on EOS on SourceBuffer"),this._tryAppendEos()),this._segmentsAwaitingAppendance.length&&!this._sourceBuffer.updating&&this._appendNextSegment(this._segmentsAwaitingAppendance.pop()))},append:function(t){if(!this.sourceIsReady())throw new Error("MediaSource is not ready yet");this._appendNextSegment(t)},media:function(){return this._mediaElem},sourceIsReady:function(){return!this._isNotReady},duration:function(t){return this._mediaSource.duration=t/1e3,1e3*this._mediaSource.duration}})},function(t,e,n){var i,r=n(47).concatBuffersToUint8Array,o=n(1),s=n(36),a=n(68);t.exports=i=function(t){this.config=t,this.reset(),this.segments=[],this.pushedInitData=!1},o(i.prototype,s),i.prototype.process=function(t){switch(this.segments.push(t),this.config){case i.Configs.VOID:this.trigger("segment",t);break;case i.Configs.MP3_TO_FMP4:this.src.enqueue(new a.Unit.Transfer(t.data,"binary")),this.src.enqueue(a.Unit.Transfer.Flush());break;default:throw new Error("Config "+this.config+" not supported")}},i.prototype.dequeue=function(){return this.segments.shift()},i.prototype.reset=function(){switch(this.config){case i.Configs.VOID:break;case i.Configs.MP3_TO_FMP4:this.gotInitData=!1,this.src=new a.Unit.BasePushSrc,this.parser=new a.Units.MP3Parser,this.muxer=new a.Units.MP4Mux(a.Units.MP4Mux.Profiles.MP3_AUDIO_ONLY),this.sink=new a.Unit.BaseSink,this.sink._onData=function(){var t,e=this.sink.dequeue().data;return this.gotInitData?(t=this.dequeue(),t.mimeType="audio/mp4",this.gotInitData&&!this.pushedInitData?(t.data=r(this.initData,e),this.pushedInitData=!0):t.data=e,this.trigger("segment",t),void this.reset()):(this.gotInitData=!0,void(this.initData=e))}.bind(this),a.Unit.link(this.src,this.parser,this.muxer,this.sink);break;default:throw new Error("Config "+this.config+" not supported")}},i.Configs={VOID:"VOID",MP3_TO_FMP4:"MP3_TO_FMP4"}},function(t,e,n){var i,r=n(69),o=n(115),s=n(118),a=n(121),u=n(124),h=n(125);t.exports=i={Unit:r,Units:{File:h,MP4Mux:o,MP3Parser:s,MSESink:a,XHR:u}}},function(t,e,n){(function(e){var i,r,o,s,a,u,h,c,l,f,d=n(74),p=n(76),g=n(85),_=n(96),m=n(97);t.exports=i=function(){_.call(this),this.inputs||(this.inputs=[]),this.outputs||(this.outputs=[])},i.create=function(t){return p(i.prototype,t)},i.createBaseSrc=function(t){return p(u.prototype,t)},i.createBasePushSrc=function(t){return p(h.prototype,t)},i.createBaseSink=function(t){return p(c.prototype,t)},i.createBaseTransform=function(t){return p(a.prototype,t)},i.createBaseParser=function(t){return p(l.prototype,t)},i.link=function(t,e){if(arguments.length>2)return i.linkArray(arguments);for(var n=0;n<Math.min(t.numberOfOuts(),e.numberOfIns());n++)t.out(n).pipe(e["in"](n));return e},i.linkArray=function(t){var e,n,r;for(r=0;r<t.length;r++)e=t[r],t.length>r+1&&(n=t[r+1],i.link(e,n));return n};var y=i.Event={CHAIN:"chain",NEED_DATA:"need-data",FINISH:"finish",PIPE:"pipe",UNPIPE:"unpipe",ERROR:"error",END:"end",OPEN:"open",CLOSE:"close"};i.prototype=p(_.prototype,{constructor:i,"in":function(t){return this.inputs[t]},out:function(t){return this.outputs[t]},numberOfIns:function(){return this.inputs.length},numberOfOuts:function(){return this.outputs.length},add:function(t){return t instanceof r?this.addInput(t):t instanceof o&&this.addOutput(t),this},remove:function(t){t instanceof r?this.removeInput(t):t instanceof o&&this.removeOutput(t)},addInput:function(t){this._installEventForwarder(t,y.FINISH),this._installEventForwarder(t,y.OPEN),this._installEventForwarder(t,y.PIPE),this._installEventForwarder(t,y.UNPIPE),this._installEventForwarder(t,y.ERROR),this._installEventForwarder(t,y.CHAIN),this.inputs.push(t)},addOutput:function(t){this._installEventForwarder(t,y.END),this._installEventForwarder(t,y.OPEN),this._installEventForwarder(t,y.CLOSE),this._installEventForwarder(t,y.ERROR),this._installEventForwarder(t,y.NEED_DATA),this.outputs.push(t)},removeInput:function(t){removePut(this.inputs,t)},removeOutput:function(t){removePut(this.outputs,t)},removePut:function(t,e){t.slice().forEach(function(n,i){n==e&&t.splice(i,1)})},_installEventForwarder:function(t,e){t.on(e,function(n){this.emit(e,t,n)}.bind(this))}}),i.Transfer=s=function(t,n,i){n||(n=t instanceof e?"buffer":t instanceof String?"utf8":"object"),this.resolved=!1,this.data=t,this.encoding=n,this.doneCallback=i},s.prototype=p(Object.prototype,{constructor:s,resolve:function(){this.doneCallback&&!this.resolved&&(this.doneCallback(),this.resolved=!0)},setFlushing:function(t){return this.data.flush=t,this},setEmpty:function(t){return this.data.empty=t,this}}),s.Flush=function(){return new s({},"binary").setFlushing(!0).setEmpty(!0)},s.EOS=function(){return new s(null,"binary")},i.Input=r=function(t,e){m.Writable.prototype.constructor.call(this,{objectMode:!0,decodeStrings:!1})},r.prototype=p(m.Writable.prototype,{constructor:r,_write:function(t,e,n){d("_write: "+e),this.emit(i.Event.CHAIN,new s(t,e,n))}}),i.Output=o=function(t){m.Readable.prototype.constructor.call(this,{objectMode:!0}),this._dataRequested=0,this._shouldPushMore=!0},o.eos=function(t){t.push(null,"null")},o.prototype=p(m.Readable.prototype,{constructor:o,_read:function(t){this._dataRequested++,this.emit(y.NEED_DATA,this)},push:function(t,e){return this._dataRequested--,this._shouldPushMore=m.Readable.prototype.push.call(this,t,e),this._shouldPushMore},isPulling:function(){return this._dataRequested>0},eos:function(){m.Readable.prototype.push.call(this,null,"null")}}),i.BaseTransform=a=function(){i.prototype.constructor.apply(this,arguments),this.add(new r).add(new o),this.on(y.CHAIN,this._onChain.bind(this)),this.on(y.FINISH,this._onFinish.bind(this))},a.prototype=p(i.prototype,{constructor:a,_onChain:function(t,e){this._transform(e),this.out(0).push(e.data,e.encoding),e.resolve()},_onFinish:function(t){o.eos(this.out(0))},_transform:function(t){}}),i.BaseSrc=u=function(){i.prototype.constructor.apply(this,arguments),this.add(new o),this.on(y.NEED_DATA,this.squeeze.bind(this))},u.prototype=p(i.prototype,{constructor:u,squeeze:function(){d("squeeze");var t=this._source();t&&(this.out(0).push(t.data,t.encoding),t.resolve())},_source:function(){}}),i.BasePushSrc=h=function(){u.prototype.constructor.apply(this,arguments),this._bufferOut=[]},h.prototype=p(u.prototype,{constructor:h,_source:function(){return this._bufferOut.length?this._bufferOut.shift():null},enqueue:function(t){this._bufferOut.push(t),this.out(0).isPulling&&this.out(0).isPulling()&&this.squeeze()}}),i.BaseSink=c=function(){i.prototype.constructor.apply(this,arguments),this.add(new r),this.on(y.CHAIN,this._onChain.bind(this)),this._bufferIn=[]},c.prototype=p(i.prototype,{constructor:c,_onChain:function(t,e){d("BaseSink._onChain: "+e.encoding),this._bufferIn.push(e),this._onData(),e.resolve()},_onData:function(){},dequeue:function(){return this._bufferIn.length?this._bufferIn.shift():null}}),i.BaseParser=l=function(){h.prototype.constructor.apply(this,arguments),c.prototype.constructor.apply(this,arguments),this.on("finish",this._onFinish.bind(this))},g(l.prototype,i.prototype,_.prototype,u.prototype,h.prototype,c.prototype,{constructor:l,_onData:function(){this._parse(this.dequeue())},_onFinish:function(){d("BaseParser._onFinish"),o.eos(this.out(0))},_parse:function(t){}}),i.InputSelector=f=function(t){for(a.prototype.constructor.apply(this,arguments),t=(t||1)-1;t-- >0;)this.add(new r);this.selectedInputIndex=0},g(f.prototype,a.prototype,{constructor:f,_onChain:function(t,e){var n=this["in"](this.selectedInputIndex);return t!==n?void e.resolve():(this._transform(e),this.out(0).push(e.data,e.encoding),void e.resolve())},_onFinish:function(t){var e=this["in"](this.selectedInputIndex);t===e&&o.eos(this.out(0))}})}).call(e,n(70).Buffer)},function(t,e,n){(function(t,i){function r(){function t(){}try{var e=new Uint8Array(1);return e.foo=function(){return 42},e.constructor=t,42===e.foo()&&e.constructor===t&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(n){return!1}}function o(){return t.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function t(e){return this instanceof t?(this.length=0,this.parent=void 0,"number"==typeof e?s(this,e):"string"==typeof e?a(this,e,arguments.length>1?arguments[1]:"utf8"):u(this,e)):arguments.length>1?new t(e,arguments[1]):new t(e)}function s(e,n){if(e=g(e,0>n?0:0|_(n)),!t.TYPED_ARRAY_SUPPORT)for(var i=0;n>i;i++)e[i]=0;return e}function a(t,e,n){("string"!=typeof n||""===n)&&(n="utf8");var i=0|y(e,n);return t=g(t,i),t.write(e,n),t}function u(e,n){if(t.isBuffer(n))return h(e,n);if($(n))return c(e,n);if(null==n)throw new TypeError("must start with number, buffer, array or string");if("undefined"!=typeof ArrayBuffer){if(n.buffer instanceof ArrayBuffer)return l(e,n);if(n instanceof ArrayBuffer)return f(e,n)}return n.length?d(e,n):p(e,n)}function h(t,e){var n=0|_(e.length);return t=g(t,n),e.copy(t,0,0,n),t}function c(t,e){var n=0|_(e.length);t=g(t,n);for(var i=0;n>i;i+=1)t[i]=255&e[i];return t}function l(t,e){var n=0|_(e.length);t=g(t,n);for(var i=0;n>i;i+=1)t[i]=255&e[i];return t}function f(e,n){return t.TYPED_ARRAY_SUPPORT?(n.byteLength,e=t._augment(new Uint8Array(n))):e=l(e,new Uint8Array(n)),e}function d(t,e){var n=0|_(e.length);t=g(t,n);for(var i=0;n>i;i+=1)t[i]=255&e[i];return t}function p(t,e){var n,i=0;"Buffer"===e.type&&$(e.data)&&(n=e.data,i=0|_(n.length)),t=g(t,i);for(var r=0;i>r;r+=1)t[r]=255&n[r];return t}function g(e,n){t.TYPED_ARRAY_SUPPORT?(e=t._augment(new Uint8Array(n)),e.__proto__=t.prototype):(e.length=n,e._isBuffer=!0);var i=0!==n&&n<=t.poolSize>>>1;return i&&(e.parent=Z),e}function _(t){if(t>=o())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o().toString(16)+" bytes");return 0|t}function m(e,n){if(!(this instanceof m))return new m(e,n);var i=new t(e,n);return delete i.parent,i}function y(t,e){"string"!=typeof t&&(t=""+t);var n=t.length;if(0===n)return 0;for(var i=!1;;)switch(e){case"ascii":case"binary":case"raw":case"raws":return n;case"utf8":case"utf-8":return Y(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return W(t).length;default:if(i)return Y(t).length;e=(""+e).toLowerCase(),i=!0}}function v(t,e,n){var i=!1;if(e=0|e,n=void 0===n||n===1/0?this.length:0|n,t||(t="utf8"),0>e&&(e=0),n>this.length&&(n=this.length),e>=n)return"";for(;;)switch(t){case"hex":return D(this,e,n);case"utf8":case"utf-8":return I(this,e,n);case"ascii":return O(this,e,n);case"binary":return R(this,e,n);case"base64":return P(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return M(this,e,n);default:if(i)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),i=!0}}function E(t,e,n,i){n=Number(n)||0;var r=t.length-n;i?(i=Number(i),i>r&&(i=r)):i=r;var o=e.length;if(o%2!==0)throw new Error("Invalid hex string");i>o/2&&(i=o/2);for(var s=0;i>s;s++){var a=parseInt(e.substr(2*s,2),16);if(isNaN(a))throw new Error("Invalid hex string");t[n+s]=a}return s}function S(t,e,n,i){return K(Y(e,t.length-n),t,n,i)}function A(t,e,n,i){return K(V(e),t,n,i)}function w(t,e,n,i){return A(t,e,n,i)}function T(t,e,n,i){return K(W(e),t,n,i)}function b(t,e,n,i){return K(z(e,t.length-n),t,n,i)}function P(t,e,n){return 0===e&&n===t.length?q.fromByteArray(t):q.fromByteArray(t.slice(e,n))}function I(t,e,n){n=Math.min(t.length,n);for(var i=[],r=e;n>r;){var o=t[r],s=null,a=o>239?4:o>223?3:o>191?2:1;if(n>=r+a){var u,h,c,l;switch(a){case 1:128>o&&(s=o);break;case 2:u=t[r+1],128===(192&u)&&(l=(31&o)<<6|63&u,l>127&&(s=l));break;case 3:u=t[r+1],h=t[r+2],128===(192&u)&&128===(192&h)&&(l=(15&o)<<12|(63&u)<<6|63&h,l>2047&&(55296>l||l>57343)&&(s=l));break;case 4:u=t[r+1],h=t[r+2],c=t[r+3],128===(192&u)&&128===(192&h)&&128===(192&c)&&(l=(15&o)<<18|(63&u)<<12|(63&h)<<6|63&c,l>65535&&1114112>l&&(s=l))}}null===s?(s=65533,a=1):s>65535&&(s-=65536,i.push(s>>>10&1023|55296),s=56320|1023&s),i.push(s),r+=a}return L(i)}function L(t){var e=t.length;if(Q>=e)return String.fromCharCode.apply(String,t);for(var n="",i=0;e>i;)n+=String.fromCharCode.apply(String,t.slice(i,i+=Q));return n}function O(t,e,n){var i="";n=Math.min(t.length,n);for(var r=e;n>r;r++)i+=String.fromCharCode(127&t[r]);return i}function R(t,e,n){var i="";n=Math.min(t.length,n);for(var r=e;n>r;r++)i+=String.fromCharCode(t[r]);return i}function D(t,e,n){var i=t.length;(!e||0>e)&&(e=0),(!n||0>n||n>i)&&(n=i);for(var r="",o=e;n>o;o++)r+=G(t[o]);return r}function M(t,e,n){for(var i=t.slice(e,n),r="",o=0;o<i.length;o+=2)r+=String.fromCharCode(i[o]+256*i[o+1]);return r}function k(t,e,n){if(t%1!==0||0>t)throw new RangeError("offset is not uint");if(t+e>n)throw new RangeError("Trying to access beyond buffer length")}function N(e,n,i,r,o,s){if(!t.isBuffer(e))throw new TypeError("buffer must be a Buffer instance");if(n>o||s>n)throw new RangeError("value is out of bounds");if(i+r>e.length)throw new RangeError("index out of range")}function x(t,e,n,i){0>e&&(e=65535+e+1);for(var r=0,o=Math.min(t.length-n,2);o>r;r++)t[n+r]=(e&255<<8*(i?r:1-r))>>>8*(i?r:1-r)}function C(t,e,n,i){0>e&&(e=4294967295+e+1);for(var r=0,o=Math.min(t.length-n,4);o>r;r++)t[n+r]=e>>>8*(i?r:3-r)&255}function F(t,e,n,i,r,o){if(e>r||o>e)throw new RangeError("value is out of bounds");if(n+i>t.length)throw new RangeError("index out of range");if(0>n)throw new RangeError("index out of range")}function U(t,e,n,i,r){return r||F(t,e,n,4,3.4028234663852886e38,-3.4028234663852886e38),X.write(t,e,n,i,23,4),n+4}function B(t,e,n,i,r){return r||F(t,e,n,8,1.7976931348623157e308,-1.7976931348623157e308),X.write(t,e,n,i,52,8),n+8}function H(t){if(t=j(t).replace(tt,""),t.length<2)return"";for(;t.length%4!==0;)t+="=";return t}function j(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function G(t){return 16>t?"0"+t.toString(16):t.toString(16)}function Y(t,e){e=e||1/0;for(var n,i=t.length,r=null,o=[],s=0;i>s;s++){if(n=t.charCodeAt(s),n>55295&&57344>n){if(!r){if(n>56319){(e-=3)>-1&&o.push(239,191,189);continue}if(s+1===i){(e-=3)>-1&&o.push(239,191,189);continue}r=n;continue}if(56320>n){(e-=3)>-1&&o.push(239,191,189),r=n;continue}n=(r-55296<<10|n-56320)+65536}else r&&(e-=3)>-1&&o.push(239,191,189);if(r=null,128>n){if((e-=1)<0)break;o.push(n)}else if(2048>n){if((e-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(65536>n){if((e-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(1114112>n))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function V(t){for(var e=[],n=0;n<t.length;n++)e.push(255&t.charCodeAt(n));return e}function z(t,e){for(var n,i,r,o=[],s=0;s<t.length&&!((e-=2)<0);s++)n=t.charCodeAt(s),i=n>>8,r=n%256,o.push(r),o.push(i);return o}function W(t){return q.toByteArray(H(t))}function K(t,e,n,i){for(var r=0;i>r&&!(r+n>=e.length||r>=t.length);r++)e[r+n]=t[r];return r}/*!
		 * The buffer module from node.js, for the browser.
		 *
		 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
		 * @license  MIT
		 */
var q=n(71),X=n(72),$=n(73);e.Buffer=t,e.SlowBuffer=m,e.INSPECT_MAX_BYTES=50,t.poolSize=8192;var Z={};t.TYPED_ARRAY_SUPPORT=void 0!==i.TYPED_ARRAY_SUPPORT?i.TYPED_ARRAY_SUPPORT:r(),t.TYPED_ARRAY_SUPPORT&&(t.prototype.__proto__=Uint8Array.prototype,t.__proto__=Uint8Array),t.isBuffer=function(t){return!(null==t||!t._isBuffer)},t.compare=function(e,n){if(!t.isBuffer(e)||!t.isBuffer(n))throw new TypeError("Arguments must be Buffers");if(e===n)return 0;for(var i=e.length,r=n.length,o=0,s=Math.min(i,r);s>o&&e[o]===n[o];)++o;return o!==s&&(i=e[o],r=n[o]),r>i?-1:i>r?1:0},t.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"raw":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},t.concat=function(e,n){if(!$(e))throw new TypeError("list argument must be an Array of Buffers.");if(0===e.length)return new t(0);var i;if(void 0===n)for(n=0,i=0;i<e.length;i++)n+=e[i].length;var r=new t(n),o=0;for(i=0;i<e.length;i++){var s=e[i];s.copy(r,o),o+=s.length}return r},t.byteLength=y,t.prototype.length=void 0,t.prototype.parent=void 0,t.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?I(this,0,t):v.apply(this,arguments)},t.prototype.equals=function(e){if(!t.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e?!0:0===t.compare(this,e)},t.prototype.inspect=function(){var t="",n=e.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(t+=" ... ")),"<Buffer "+t+">"},t.prototype.compare=function(e){if(!t.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e?0:t.compare(this,e)},t.prototype.indexOf=function(e,n){function i(t,e,n){for(var i=-1,r=0;n+r<t.length;r++)if(t[n+r]===e[-1===i?0:r-i]){if(-1===i&&(i=r),r-i+1===e.length)return n+i}else i=-1;return-1}if(n>2147483647?n=2147483647:-2147483648>n&&(n=-2147483648),n>>=0,0===this.length)return-1;if(n>=this.length)return-1;if(0>n&&(n=Math.max(this.length+n,0)),"string"==typeof e)return 0===e.length?-1:String.prototype.indexOf.call(this,e,n);if(t.isBuffer(e))return i(this,e,n);if("number"==typeof e)return t.TYPED_ARRAY_SUPPORT&&"function"===Uint8Array.prototype.indexOf?Uint8Array.prototype.indexOf.call(this,e,n):i(this,[e],n);throw new TypeError("val must be string, number or Buffer")},t.prototype.get=function(t){return console.log(".get() is deprecated. Access using array indexes instead."),this.readUInt8(t)},t.prototype.set=function(t,e){return console.log(".set() is deprecated. Access using array indexes instead."),this.writeUInt8(t,e)},t.prototype.write=function(t,e,n,i){if(void 0===e)i="utf8",n=this.length,e=0;else if(void 0===n&&"string"==typeof e)i=e,n=this.length,e=0;else if(isFinite(e))e=0|e,isFinite(n)?(n=0|n,void 0===i&&(i="utf8")):(i=n,n=void 0);else{var r=i;i=e,e=0|n,n=r}var o=this.length-e;if((void 0===n||n>o)&&(n=o),t.length>0&&(0>n||0>e)||e>this.length)throw new RangeError("attempt to write outside buffer bounds");i||(i="utf8");for(var s=!1;;)switch(i){case"hex":return E(this,t,e,n);case"utf8":case"utf-8":return S(this,t,e,n);case"ascii":return A(this,t,e,n);case"binary":return w(this,t,e,n);case"base64":return T(this,t,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return b(this,t,e,n);default:if(s)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),s=!0}},t.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var Q=4096;t.prototype.slice=function(e,n){var i=this.length;e=~~e,n=void 0===n?i:~~n,0>e?(e+=i,0>e&&(e=0)):e>i&&(e=i),0>n?(n+=i,0>n&&(n=0)):n>i&&(n=i),e>n&&(n=e);var r;if(t.TYPED_ARRAY_SUPPORT)r=t._augment(this.subarray(e,n));else{var o=n-e;r=new t(o,void 0);for(var s=0;o>s;s++)r[s]=this[s+e]}return r.length&&(r.parent=this.parent||this),r},t.prototype.readUIntLE=function(t,e,n){t=0|t,e=0|e,n||k(t,e,this.length);for(var i=this[t],r=1,o=0;++o<e&&(r*=256);)i+=this[t+o]*r;return i},t.prototype.readUIntBE=function(t,e,n){t=0|t,e=0|e,n||k(t,e,this.length);for(var i=this[t+--e],r=1;e>0&&(r*=256);)i+=this[t+--e]*r;return i},t.prototype.readUInt8=function(t,e){return e||k(t,1,this.length),this[t]},t.prototype.readUInt16LE=function(t,e){return e||k(t,2,this.length),this[t]|this[t+1]<<8},t.prototype.readUInt16BE=function(t,e){return e||k(t,2,this.length),this[t]<<8|this[t+1]},t.prototype.readUInt32LE=function(t,e){return e||k(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},t.prototype.readUInt32BE=function(t,e){return e||k(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},t.prototype.readIntLE=function(t,e,n){t=0|t,e=0|e,n||k(t,e,this.length);for(var i=this[t],r=1,o=0;++o<e&&(r*=256);)i+=this[t+o]*r;return r*=128,i>=r&&(i-=Math.pow(2,8*e)),i},t.prototype.readIntBE=function(t,e,n){t=0|t,e=0|e,n||k(t,e,this.length);for(var i=e,r=1,o=this[t+--i];i>0&&(r*=256);)o+=this[t+--i]*r;return r*=128,o>=r&&(o-=Math.pow(2,8*e)),o},t.prototype.readInt8=function(t,e){return e||k(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},t.prototype.readInt16LE=function(t,e){e||k(t,2,this.length);var n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},t.prototype.readInt16BE=function(t,e){e||k(t,2,this.length);var n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},t.prototype.readInt32LE=function(t,e){return e||k(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},t.prototype.readInt32BE=function(t,e){return e||k(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},t.prototype.readFloatLE=function(t,e){return e||k(t,4,this.length),X.read(this,t,!0,23,4)},t.prototype.readFloatBE=function(t,e){return e||k(t,4,this.length),X.read(this,t,!1,23,4)},t.prototype.readDoubleLE=function(t,e){return e||k(t,8,this.length),X.read(this,t,!0,52,8)},t.prototype.readDoubleBE=function(t,e){return e||k(t,8,this.length),X.read(this,t,!1,52,8)},t.prototype.writeUIntLE=function(t,e,n,i){t=+t,e=0|e,n=0|n,i||N(this,t,e,n,Math.pow(2,8*n),0);var r=1,o=0;for(this[e]=255&t;++o<n&&(r*=256);)this[e+o]=t/r&255;return e+n},t.prototype.writeUIntBE=function(t,e,n,i){t=+t,e=0|e,n=0|n,i||N(this,t,e,n,Math.pow(2,8*n),0);var r=n-1,o=1;for(this[e+r]=255&t;--r>=0&&(o*=256);)this[e+r]=t/o&255;return e+n},t.prototype.writeUInt8=function(e,n,i){return e=+e,n=0|n,i||N(this,e,n,1,255,0),t.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[n]=255&e,n+1},t.prototype.writeUInt16LE=function(e,n,i){return e=+e,n=0|n,i||N(this,e,n,2,65535,0),t.TYPED_ARRAY_SUPPORT?(this[n]=255&e,this[n+1]=e>>>8):x(this,e,n,!0),n+2},t.prototype.writeUInt16BE=function(e,n,i){return e=+e,n=0|n,i||N(this,e,n,2,65535,0),t.TYPED_ARRAY_SUPPORT?(this[n]=e>>>8,this[n+1]=255&e):x(this,e,n,!1),n+2},t.prototype.writeUInt32LE=function(e,n,i){return e=+e,n=0|n,i||N(this,e,n,4,4294967295,0),t.TYPED_ARRAY_SUPPORT?(this[n+3]=e>>>24,this[n+2]=e>>>16,this[n+1]=e>>>8,this[n]=255&e):C(this,e,n,!0),n+4},t.prototype.writeUInt32BE=function(e,n,i){return e=+e,n=0|n,i||N(this,e,n,4,4294967295,0),t.TYPED_ARRAY_SUPPORT?(this[n]=e>>>24,this[n+1]=e>>>16,this[n+2]=e>>>8,this[n+3]=255&e):C(this,e,n,!1),n+4},t.prototype.writeIntLE=function(t,e,n,i){if(t=+t,e=0|e,!i){var r=Math.pow(2,8*n-1);N(this,t,e,n,r-1,-r)}var o=0,s=1,a=0>t?1:0;for(this[e]=255&t;++o<n&&(s*=256);)this[e+o]=(t/s>>0)-a&255;return e+n},t.prototype.writeIntBE=function(t,e,n,i){if(t=+t,e=0|e,!i){var r=Math.pow(2,8*n-1);N(this,t,e,n,r-1,-r)}var o=n-1,s=1,a=0>t?1:0;for(this[e+o]=255&t;--o>=0&&(s*=256);)this[e+o]=(t/s>>0)-a&255;return e+n},t.prototype.writeInt8=function(e,n,i){return e=+e,n=0|n,i||N(this,e,n,1,127,-128),t.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),0>e&&(e=255+e+1),this[n]=255&e,n+1},t.prototype.writeInt16LE=function(e,n,i){return e=+e,n=0|n,i||N(this,e,n,2,32767,-32768),t.TYPED_ARRAY_SUPPORT?(this[n]=255&e,this[n+1]=e>>>8):x(this,e,n,!0),n+2},t.prototype.writeInt16BE=function(e,n,i){return e=+e,n=0|n,i||N(this,e,n,2,32767,-32768),t.TYPED_ARRAY_SUPPORT?(this[n]=e>>>8,this[n+1]=255&e):x(this,e,n,!1),n+2},t.prototype.writeInt32LE=function(e,n,i){return e=+e,n=0|n,i||N(this,e,n,4,2147483647,-2147483648),t.TYPED_ARRAY_SUPPORT?(this[n]=255&e,this[n+1]=e>>>8,this[n+2]=e>>>16,this[n+3]=e>>>24):C(this,e,n,!0),n+4},t.prototype.writeInt32BE=function(e,n,i){return e=+e,n=0|n,i||N(this,e,n,4,2147483647,-2147483648),0>e&&(e=4294967295+e+1),t.TYPED_ARRAY_SUPPORT?(this[n]=e>>>24,this[n+1]=e>>>16,this[n+2]=e>>>8,this[n+3]=255&e):C(this,e,n,!1),n+4},t.prototype.writeFloatLE=function(t,e,n){return U(this,t,e,!0,n)},t.prototype.writeFloatBE=function(t,e,n){return U(this,t,e,!1,n)},t.prototype.writeDoubleLE=function(t,e,n){return B(this,t,e,!0,n)},t.prototype.writeDoubleBE=function(t,e,n){return B(this,t,e,!1,n)},t.prototype.copy=function(e,n,i,r){if(i||(i=0),r||0===r||(r=this.length),n>=e.length&&(n=e.length),n||(n=0),r>0&&i>r&&(r=i),r===i)return 0;if(0===e.length||0===this.length)return 0;if(0>n)throw new RangeError("targetStart out of bounds");if(0>i||i>=this.length)throw new RangeError("sourceStart out of bounds");if(0>r)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-n<r-i&&(r=e.length-n+i);var o,s=r-i;if(this===e&&n>i&&r>n)for(o=s-1;o>=0;o--)e[o+n]=this[o+i];else if(1e3>s||!t.TYPED_ARRAY_SUPPORT)for(o=0;s>o;o++)e[o+n]=this[o+i];else e._set(this.subarray(i,i+s),n);return s},t.prototype.fill=function(t,e,n){if(t||(t=0),e||(e=0),n||(n=this.length),e>n)throw new RangeError("end < start");if(n!==e&&0!==this.length){if(0>e||e>=this.length)throw new RangeError("start out of bounds");if(0>n||n>this.length)throw new RangeError("end out of bounds");var i;if("number"==typeof t)for(i=e;n>i;i++)this[i]=t;else{var r=Y(t.toString()),o=r.length;for(i=e;n>i;i++)this[i]=r[i%o]}return this}},t.prototype.toArrayBuffer=function(){if("undefined"!=typeof Uint8Array){if(t.TYPED_ARRAY_SUPPORT)return new t(this).buffer;for(var e=new Uint8Array(this.length),n=0,i=e.length;i>n;n+=1)e[n]=this[n];return e.buffer}throw new TypeError("Buffer.toArrayBuffer not supported in this browser")};var J=t.prototype;t._augment=function(e){return e.constructor=t,e._isBuffer=!0,e._set=e.set,e.get=J.get,e.set=J.set,e.write=J.write,e.toString=J.toString,e.toLocaleString=J.toString,e.toJSON=J.toJSON,e.equals=J.equals,e.compare=J.compare,e.indexOf=J.indexOf,e.copy=J.copy,e.slice=J.slice,e.readUIntLE=J.readUIntLE,e.readUIntBE=J.readUIntBE,e.readUInt8=J.readUInt8,e.readUInt16LE=J.readUInt16LE,e.readUInt16BE=J.readUInt16BE,e.readUInt32LE=J.readUInt32LE,e.readUInt32BE=J.readUInt32BE,e.readIntLE=J.readIntLE,e.readIntBE=J.readIntBE,e.readInt8=J.readInt8,e.readInt16LE=J.readInt16LE,e.readInt16BE=J.readInt16BE,e.readInt32LE=J.readInt32LE,e.readInt32BE=J.readInt32BE,e.readFloatLE=J.readFloatLE,e.readFloatBE=J.readFloatBE,e.readDoubleLE=J.readDoubleLE,e.readDoubleBE=J.readDoubleBE,e.writeUInt8=J.writeUInt8,e.writeUIntLE=J.writeUIntLE,e.writeUIntBE=J.writeUIntBE,e.writeUInt16LE=J.writeUInt16LE,e.writeUInt16BE=J.writeUInt16BE,e.writeUInt32LE=J.writeUInt32LE,e.writeUInt32BE=J.writeUInt32BE,e.writeIntLE=J.writeIntLE,e.writeIntBE=J.writeIntBE,e.writeInt8=J.writeInt8,e.writeInt16LE=J.writeInt16LE,e.writeInt16BE=J.writeInt16BE,e.writeInt32LE=J.writeInt32LE,e.writeInt32BE=J.writeInt32BE,e.writeFloatLE=J.writeFloatLE,e.writeFloatBE=J.writeFloatBE,e.writeDoubleLE=J.writeDoubleLE,e.writeDoubleBE=J.writeDoubleBE,e.fill=J.fill,e.inspect=J.inspect,e.toArrayBuffer=J.toArrayBuffer,e};var tt=/[^+\/0-9A-Za-z-_]/g}).call(e,n(70).Buffer,function(){return this}())},function(t,e,n){var i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";!function(t){"use strict";function e(t){var e=t.charCodeAt(0);return e===s||e===l?62:e===a||e===f?63:u>e?-1:u+10>e?e-u+26+26:c+26>e?e-c:h+26>e?e-h+26:void 0}function n(t){function n(t){h[l++]=t}var i,r,s,a,u,h;if(t.length%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var c=t.length;u="="===t.charAt(c-2)?2:"="===t.charAt(c-1)?1:0,h=new o(3*t.length/4-u),s=u>0?t.length-4:t.length;var l=0;for(i=0,r=0;s>i;i+=4,r+=3)a=e(t.charAt(i))<<18|e(t.charAt(i+1))<<12|e(t.charAt(i+2))<<6|e(t.charAt(i+3)),n((16711680&a)>>16),n((65280&a)>>8),n(255&a);return 2===u?(a=e(t.charAt(i))<<2|e(t.charAt(i+1))>>4,n(255&a)):1===u&&(a=e(t.charAt(i))<<10|e(t.charAt(i+1))<<4|e(t.charAt(i+2))>>2,n(a>>8&255),n(255&a)),h}function r(t){function e(t){return i.charAt(t)}function n(t){return e(t>>18&63)+e(t>>12&63)+e(t>>6&63)+e(63&t)}var r,o,s,a=t.length%3,u="";for(r=0,s=t.length-a;s>r;r+=3)o=(t[r]<<16)+(t[r+1]<<8)+t[r+2],u+=n(o);switch(a){case 1:o=t[t.length-1],u+=e(o>>2),u+=e(o<<4&63),u+="==";break;case 2:o=(t[t.length-2]<<8)+t[t.length-1],u+=e(o>>10),u+=e(o>>4&63),u+=e(o<<2&63),u+="="}return u}var o="undefined"!=typeof Uint8Array?Uint8Array:Array,s="+".charCodeAt(0),a="/".charCodeAt(0),u="0".charCodeAt(0),h="a".charCodeAt(0),c="A".charCodeAt(0),l="-".charCodeAt(0),f="_".charCodeAt(0);t.toByteArray=n,t.fromByteArray=r}(e)},function(t,e){e.read=function(t,e,n,i,r){var o,s,a=8*r-i-1,u=(1<<a)-1,h=u>>1,c=-7,l=n?r-1:0,f=n?-1:1,d=t[e+l];for(l+=f,o=d&(1<<-c)-1,d>>=-c,c+=a;c>0;o=256*o+t[e+l],l+=f,c-=8);for(s=o&(1<<-c)-1,o>>=-c,c+=i;c>0;s=256*s+t[e+l],l+=f,c-=8);if(0===o)o=1-h;else{if(o===u)return s?NaN:(d?-1:1)*(1/0);s+=Math.pow(2,i),o-=h}return(d?-1:1)*s*Math.pow(2,o-i)},e.write=function(t,e,n,i,r,o){var s,a,u,h=8*o-r-1,c=(1<<h)-1,l=c>>1,f=23===r?Math.pow(2,-24)-Math.pow(2,-77):0,d=i?0:o-1,p=i?1:-1,g=0>e||0===e&&0>1/e?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,s=c):(s=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-s))<1&&(s--,u*=2),e+=s+l>=1?f/u:f*Math.pow(2,1-l),e*u>=2&&(s++,u/=2),s+l>=c?(a=0,s=c):s+l>=1?(a=(e*u-1)*Math.pow(2,r),s+=l):(a=e*Math.pow(2,l-1)*Math.pow(2,r),s=0));r>=8;t[n+d]=255&a,d+=p,a/=256,r-=8);for(s=s<<r|a,h+=r;h>0;t[n+d]=255&s,d+=p,s/=256,h-=8);t[n+d-p]|=128*g}},function(t,e){var n=Array.isArray,i=Object.prototype.toString;t.exports=n||function(t){return!!t&&"[object Array]"==i.call(t)}},function(t,e,n){var i=n(75);t.exports=function(){i.loggingEnabled()&&console.log.apply(console,arguments)}},function(t,e){var n=!1;t.exports={loggingEnabled:function(t){return void 0!==t&&(n=t),n}}},function(t,e,n){function i(t,e,n){var i=o(t);return n&&s(t,e,n)&&(e=void 0),e?r(i,e):i}var r=n(77),o=n(83),s=n(84);t.exports=i},[131,78,79],3,[132,80,81,82],5,6,7,55,10,[130,86,92,88],[131,87,88],3,[132,89,90,91],5,6,7,[133,93,94,95],9,10,11,function(t,e){function n(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function i(t){return"function"==typeof t}function r(t){return"number"==typeof t}function o(t){return"object"==typeof t&&null!==t}function s(t){return void 0===t}t.exports=n,n.EventEmitter=n,n.prototype._events=void 0,n.prototype._maxListeners=void 0,n.defaultMaxListeners=10,n.prototype.setMaxListeners=function(t){if(!r(t)||0>t||isNaN(t))throw TypeError("n must be a positive number");return this._maxListeners=t,this},n.prototype.emit=function(t){var e,n,r,a,u,h;if(this._events||(this._events={}),"error"===t&&(!this._events.error||o(this._events.error)&&!this._events.error.length)){if(e=arguments[1],e instanceof Error)throw e;throw TypeError('Uncaught, unspecified "error" event.')}if(n=this._events[t],s(n))return!1;if(i(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:a=Array.prototype.slice.call(arguments,1),n.apply(this,a)}else if(o(n))for(a=Array.prototype.slice.call(arguments,1),h=n.slice(),r=h.length,u=0;r>u;u++)h[u].apply(this,a);return!0},n.prototype.addListener=function(t,e){var r;if(!i(e))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",t,i(e.listener)?e.listener:e),this._events[t]?o(this._events[t])?this._events[t].push(e):this._events[t]=[this._events[t],e]:this._events[t]=e,o(this._events[t])&&!this._events[t].warned&&(r=s(this._maxListeners)?n.defaultMaxListeners:this._maxListeners,r&&r>0&&this._events[t].length>r&&(this._events[t].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[t].length),"function"==typeof console.trace&&console.trace())),this},n.prototype.on=n.prototype.addListener,n.prototype.once=function(t,e){function n(){this.removeListener(t,n),r||(r=!0,e.apply(this,arguments))}if(!i(e))throw TypeError("listener must be a function");var r=!1;return n.listener=e,this.on(t,n),this},n.prototype.removeListener=function(t,e){var n,r,s,a;if(!i(e))throw TypeError("listener must be a function");if(!this._events||!this._events[t])return this;if(n=this._events[t],s=n.length,r=-1,n===e||i(n.listener)&&n.listener===e)delete this._events[t],this._events.removeListener&&this.emit("removeListener",t,e);else if(o(n)){for(a=s;a-- >0;)if(n[a]===e||n[a].listener&&n[a].listener===e){r=a;break}if(0>r)return this;1===n.length?(n.length=0,delete this._events[t]):n.splice(r,1),this._events.removeListener&&this.emit("removeListener",t,e)}return this},n.prototype.removeAllListeners=function(t){var e,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[t]&&delete this._events[t],this;if(0===arguments.length){for(e in this._events)"removeListener"!==e&&this.removeAllListeners(e);return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[t],i(n))this.removeListener(t,n);else if(n)for(;n.length;)this.removeListener(t,n[n.length-1]);return delete this._events[t],this},n.prototype.listeners=function(t){var e;return e=this._events&&this._events[t]?i(this._events[t])?[this._events[t]]:this._events[t].slice():[]},n.prototype.listenerCount=function(t){if(this._events){var e=this._events[t];if(i(e))return 1;if(e)return e.length}return 0},n.listenerCount=function(t,e){return t.listenerCount(e)}},function(t,e,n){function i(){r.call(this)}t.exports=i;var r=n(96).EventEmitter,o=n(98);o(i,r),i.Readable=n(99),i.Writable=n(111),i.Duplex=n(112),i.Transform=n(113),i.PassThrough=n(114),i.Stream=i,i.prototype.pipe=function(t,e){function n(e){t.writable&&!1===t.write(e)&&h.pause&&h.pause()}function i(){h.readable&&h.resume&&h.resume()}function o(){c||(c=!0,t.end())}function s(){c||(c=!0,"function"==typeof t.destroy&&t.destroy())}function a(t){if(u(),0===r.listenerCount(this,"error"))throw t}function u(){h.removeListener("data",n),t.removeListener("drain",i),h.removeListener("end",o),h.removeListener("close",s),h.removeListener("error",a),t.removeListener("error",a),h.removeListener("end",u),h.removeListener("close",u),t.removeListener("close",u)}var h=this;h.on("data",n),t.on("drain",i),t._isStdio||e&&e.end===!1||(h.on("end",o),h.on("close",s));var c=!1;return h.on("error",a),t.on("error",a),h.on("end",u),h.on("close",u),t.on("close",u),t.emit("pipe",h),t}},function(t,e){"function"==typeof Object.create?t.exports=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(t,e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}},function(t,e,n){e=t.exports=n(100),e.Stream=n(97),e.Readable=e,e.Writable=n(107),e.Duplex=n(106),e.Transform=n(109),e.PassThrough=n(110)},function(t,e,n){(function(e){function i(t,e){var i=n(106);t=t||{};var r=t.highWaterMark,o=t.objectMode?16:16384;this.highWaterMark=r||0===r?r:o,this.highWaterMark=~~this.highWaterMark,this.buffer=[],this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.objectMode=!!t.objectMode,e instanceof i&&(this.objectMode=this.objectMode||!!t.readableObjectMode),this.defaultEncoding=t.defaultEncoding||"utf8",this.ranOut=!1,this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(L||(L=n(108).StringDecoder),this.decoder=new L(t.encoding),this.encoding=t.encoding)}function r(t){return n(106),this instanceof r?(this._readableState=new i(t,this),this.readable=!0,void P.call(this)):new r(t)}function o(t,e,n,i,r){var o=h(e,n);if(o)t.emit("error",o);else if(I.isNullOrUndefined(n))e.reading=!1,e.ended||c(t,e);else if(e.objectMode||n&&n.length>0)if(e.ended&&!r){var a=new Error("stream.push() after EOF");t.emit("error",a)}else if(e.endEmitted&&r){var a=new Error("stream.unshift() after end event");t.emit("error",a)}else!e.decoder||r||i||(n=e.decoder.write(n)),r||(e.reading=!1),e.flowing&&0===e.length&&!e.sync?(t.emit("data",n),t.read(0)):(e.length+=e.objectMode?1:n.length,r?e.buffer.unshift(n):e.buffer.push(n),e.needReadable&&l(t)),d(t,e);else r||(e.reading=!1);return s(e)}function s(t){return!t.ended&&(t.needReadable||t.length<t.highWaterMark||0===t.length)}function a(t){if(t>=R)t=R;else{t--;for(var e=1;32>e;e<<=1)t|=t>>e;t++}return t}function u(t,e){return 0===e.length&&e.ended?0:e.objectMode?0===t?0:1:isNaN(t)||I.isNull(t)?e.flowing&&e.buffer.length?e.buffer[0].length:e.length:0>=t?0:(t>e.highWaterMark&&(e.highWaterMark=a(t)),t>e.length?e.ended?e.length:(e.needReadable=!0,0):t)}function h(t,e){var n=null;return I.isBuffer(e)||I.isString(e)||I.isNullOrUndefined(e)||t.objectMode||(n=new TypeError("Invalid non-string/buffer chunk")),n}function c(t,e){if(e.decoder&&!e.ended){var n=e.decoder.end();n&&n.length&&(e.buffer.push(n),e.length+=e.objectMode?1:n.length)}e.ended=!0,l(t)}function l(t){var n=t._readableState;n.needReadable=!1,n.emittedReadable||(O("emitReadable",n.flowing),n.emittedReadable=!0,n.sync?e.nextTick(function(){f(t)}):f(t))}function f(t){O("emit readable"),t.emit("readable"),y(t)}function d(t,n){n.readingMore||(n.readingMore=!0,e.nextTick(function(){p(t,n)}))}function p(t,e){for(var n=e.length;!e.reading&&!e.flowing&&!e.ended&&e.length<e.highWaterMark&&(O("maybeReadMore read 0"),t.read(0),n!==e.length);)n=e.length;e.readingMore=!1}function g(t){return function(){var e=t._readableState;O("pipeOnDrain",e.awaitDrain),e.awaitDrain&&e.awaitDrain--,0===e.awaitDrain&&b.listenerCount(t,"data")&&(e.flowing=!0,y(t))}}function _(t,n){n.resumeScheduled||(n.resumeScheduled=!0,e.nextTick(function(){m(t,n)}))}function m(t,e){e.resumeScheduled=!1,t.emit("resume"),y(t),e.flowing&&!e.reading&&t.read(0)}function y(t){var e=t._readableState;if(O("flow",e.flowing),e.flowing)do var n=t.read();while(null!==n&&e.flowing)}function v(t,e){var n,i=e.buffer,r=e.length,o=!!e.decoder,s=!!e.objectMode;if(0===i.length)return null;if(0===r)n=null;else if(s)n=i.shift();else if(!t||t>=r)n=o?i.join(""):T.concat(i,r),i.length=0;else if(t<i[0].length){var a=i[0];n=a.slice(0,t),i[0]=a.slice(t)}else if(t===i[0].length)n=i.shift();else{n=o?"":new T(t);for(var u=0,h=0,c=i.length;c>h&&t>u;h++){var a=i[0],l=Math.min(t-u,a.length);o?n+=a.slice(0,l):a.copy(n,u,0,l),l<a.length?i[0]=a.slice(l):i.shift(),u+=l}}return n}function E(t){var n=t._readableState;if(n.length>0)throw new Error("endReadable called on non-empty stream");n.endEmitted||(n.ended=!0,e.nextTick(function(){n.endEmitted||0!==n.length||(n.endEmitted=!0,t.readable=!1,t.emit("end"))}))}function S(t,e){for(var n=0,i=t.length;i>n;n++)e(t[n],n)}function A(t,e){for(var n=0,i=t.length;i>n;n++)if(t[n]===e)return n;return-1}t.exports=r;var w=n(102),T=n(70).Buffer;r.ReadableState=i;var b=n(96).EventEmitter;b.listenerCount||(b.listenerCount=function(t,e){return t.listeners(e).length});var P=n(97),I=n(103);I.inherits=n(104);var L,O=n(105);O=O&&O.debuglog?O.debuglog("stream"):function(){},I.inherits(r,P),r.prototype.push=function(t,e){var n=this._readableState;return I.isString(t)&&!n.objectMode&&(e=e||n.defaultEncoding,e!==n.encoding&&(t=new T(t,e),e="")),o(this,n,t,e,!1)},r.prototype.unshift=function(t){var e=this._readableState;return o(this,e,t,"",!0)},r.prototype.setEncoding=function(t){return L||(L=n(108).StringDecoder),this._readableState.decoder=new L(t),this._readableState.encoding=t,this};var R=8388608;r.prototype.read=function(t){O("read",t);var e=this._readableState,n=t;if((!I.isNumber(t)||t>0)&&(e.emittedReadable=!1),0===t&&e.needReadable&&(e.length>=e.highWaterMark||e.ended))return O("read: emitReadable",e.length,e.ended),0===e.length&&e.ended?E(this):l(this),null;if(t=u(t,e),0===t&&e.ended)return 0===e.length&&E(this),null;var i=e.needReadable;O("need readable",i),(0===e.length||e.length-t<e.highWaterMark)&&(i=!0,O("length less than watermark",i)),(e.ended||e.reading)&&(i=!1,O("reading or ended",i)),i&&(O("do read"),e.reading=!0,e.sync=!0,0===e.length&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1),i&&!e.reading&&(t=u(n,e));var r;return r=t>0?v(t,e):null,I.isNull(r)&&(e.needReadable=!0,t=0),e.length-=t,0!==e.length||e.ended||(e.needReadable=!0),n!==t&&e.ended&&0===e.length&&E(this),I.isNull(r)||this.emit("data",r),r},r.prototype._read=function(t){this.emit("error",new Error("not implemented"))},r.prototype.pipe=function(t,n){function i(t){O("onunpipe"),t===l&&o()}function r(){O("onend"),t.end()}function o(){O("cleanup"),t.removeListener("close",u),t.removeListener("finish",h),t.removeListener("drain",_),t.removeListener("error",a),t.removeListener("unpipe",i),l.removeListener("end",r),l.removeListener("end",o),l.removeListener("data",s),!f.awaitDrain||t._writableState&&!t._writableState.needDrain||_()}function s(e){O("ondata");var n=t.write(e);!1===n&&(O("false write response, pause",l._readableState.awaitDrain),l._readableState.awaitDrain++,l.pause())}function a(e){O("onerror",e),c(),t.removeListener("error",a),0===b.listenerCount(t,"error")&&t.emit("error",e)}function u(){t.removeListener("finish",h),c()}function h(){O("onfinish"),t.removeListener("close",u),c()}function c(){O("unpipe"),l.unpipe(t)}var l=this,f=this._readableState;switch(f.pipesCount){case 0:f.pipes=t;break;case 1:f.pipes=[f.pipes,t];break;default:f.pipes.push(t)}f.pipesCount+=1,O("pipe count=%d opts=%j",f.pipesCount,n);var d=(!n||n.end!==!1)&&t!==e.stdout&&t!==e.stderr,p=d?r:o;f.endEmitted?e.nextTick(p):l.once("end",p),t.on("unpipe",i);var _=g(l);return t.on("drain",_),l.on("data",s),t._events&&t._events.error?w(t._events.error)?t._events.error.unshift(a):t._events.error=[a,t._events.error]:t.on("error",a),t.once("close",u),t.once("finish",h),t.emit("pipe",l),f.flowing||(O("pipe resume"),l.resume()),t},r.prototype.unpipe=function(t){var e=this._readableState;if(0===e.pipesCount)return this;if(1===e.pipesCount)return t&&t!==e.pipes?this:(t||(t=e.pipes),e.pipes=null,e.pipesCount=0,e.flowing=!1,t&&t.emit("unpipe",this),this);if(!t){var n=e.pipes,i=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=!1;for(var r=0;i>r;r++)n[r].emit("unpipe",this);return this}var r=A(e.pipes,t);return-1===r?this:(e.pipes.splice(r,1),e.pipesCount-=1,1===e.pipesCount&&(e.pipes=e.pipes[0]),t.emit("unpipe",this),this)},r.prototype.on=function(t,n){var i=P.prototype.on.call(this,t,n);if("data"===t&&!1!==this._readableState.flowing&&this.resume(),"readable"===t&&this.readable){var r=this._readableState;if(!r.readableListening)if(r.readableListening=!0,r.emittedReadable=!1,r.needReadable=!0,r.reading)r.length&&l(this,r);else{var o=this;e.nextTick(function(){O("readable nexttick read 0"),o.read(0)})}}return i},r.prototype.addListener=r.prototype.on,r.prototype.resume=function(){var t=this._readableState;return t.flowing||(O("resume"),t.flowing=!0,t.reading||(O("resume read 0"),this.read(0)),_(this,t)),this},r.prototype.pause=function(){return O("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(O("pause"),this._readableState.flowing=!1,this.emit("pause")),this},r.prototype.wrap=function(t){var e=this._readableState,n=!1,i=this;t.on("end",function(){if(O("wrapped end"),e.decoder&&!e.ended){var t=e.decoder.end();t&&t.length&&i.push(t)}i.push(null)}),t.on("data",function(r){if(O("wrapped data"),e.decoder&&(r=e.decoder.write(r)),r&&(e.objectMode||r.length)){var o=i.push(r);o||(n=!0,t.pause())}});for(var r in t)I.isFunction(t[r])&&I.isUndefined(this[r])&&(this[r]=function(e){return function(){return t[e].apply(t,arguments)}}(r));var o=["error","close","destroy","pause","resume"];return S(o,function(e){t.on(e,i.emit.bind(i,e))}),i._read=function(e){O("wrapped _read",e),n&&(n=!1,t.resume())},i},r._fromList=v}).call(e,n(101))},function(t,e){function n(){h=!1,s.length?u=s.concat(u):c=-1,u.length&&i()}function i(){if(!h){var t=setTimeout(n);h=!0;for(var e=u.length;e;){for(s=u,u=[];++c<e;)s&&s[c].run();c=-1,e=u.length}s=null,h=!1,clearTimeout(t)}}function r(t,e){this.fun=t,this.array=e}function o(){}var s,a=t.exports={},u=[],h=!1,c=-1;a.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];u.push(new r(t,e)),1!==u.length||h||setTimeout(i,0)},r.prototype.run=function(){this.fun.apply(null,this.array)},a.title="browser",a.browser=!0,a.env={},a.argv=[],a.version="",a.versions={},a.on=o,a.addListener=o,a.once=o,a.off=o,a.removeListener=o,a.removeAllListeners=o,a.emit=o,a.binding=function(t){throw new Error("process.binding is not supported")},a.cwd=function(){return"/"},a.chdir=function(t){throw new Error("process.chdir is not supported")},a.umask=function(){return 0}},function(t,e){t.exports=Array.isArray||function(t){return"[object Array]"==Object.prototype.toString.call(t)}},function(t,e,n){(function(t){function n(t){return Array.isArray?Array.isArray(t):"[object Array]"===_(t)}function i(t){return"boolean"==typeof t}function r(t){return null===t}function o(t){return null==t}function s(t){return"number"==typeof t}function a(t){return"string"==typeof t}function u(t){return"symbol"==typeof t}function h(t){return void 0===t}function c(t){return"[object RegExp]"===_(t)}function l(t){return"object"==typeof t&&null!==t}function f(t){return"[object Date]"===_(t)}function d(t){return"[object Error]"===_(t)||t instanceof Error}function p(t){return"function"==typeof t}function g(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||"undefined"==typeof t}function _(t){return Object.prototype.toString.call(t)}e.isArray=n,e.isBoolean=i,e.isNull=r,e.isNullOrUndefined=o,e.isNumber=s,e.isString=a,e.isSymbol=u,e.isUndefined=h,e.isRegExp=c,e.isObject=l,e.isDate=f,e.isError=d,e.isFunction=p,e.isPrimitive=g,e.isBuffer=t.isBuffer}).call(e,n(70).Buffer)},98,function(t,e){},function(t,e,n){(function(e){function i(t){return this instanceof i?(u.call(this,t),h.call(this,t),t&&t.readable===!1&&(this.readable=!1),t&&t.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,t&&t.allowHalfOpen===!1&&(this.allowHalfOpen=!1),void this.once("end",r)):new i(t)}function r(){this.allowHalfOpen||this._writableState.ended||e.nextTick(this.end.bind(this))}function o(t,e){for(var n=0,i=t.length;i>n;n++)e(t[n],n)}t.exports=i;var s=Object.keys||function(t){var e=[];for(var n in t)e.push(n);return e},a=n(103);a.inherits=n(104);var u=n(100),h=n(107);a.inherits(i,u),o(s(h.prototype),function(t){i.prototype[t]||(i.prototype[t]=h.prototype[t])})}).call(e,n(101))},function(t,e,n){(function(e){function i(t,e,n){this.chunk=t,this.encoding=e,this.callback=n}function r(t,e){var i=n(106);t=t||{};var r=t.highWaterMark,o=t.objectMode?16:16384;this.highWaterMark=r||0===r?r:o,this.objectMode=!!t.objectMode,e instanceof i&&(this.objectMode=this.objectMode||!!t.writableObjectMode),this.highWaterMark=~~this.highWaterMark,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;var s=t.decodeStrings===!1;this.decodeStrings=!s,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(t){d(e,t)},this.writecb=null,this.writelen=0,this.buffer=[],this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1}function o(t){var e=n(106);return this instanceof o||this instanceof e?(this._writableState=new r(t,this),this.writable=!0,void w.call(this)):new o(t)}function s(t,n,i){var r=new Error("write after end");
t.emit("error",r),e.nextTick(function(){i(r)})}function a(t,n,i,r){var o=!0;if(!(A.isBuffer(i)||A.isString(i)||A.isNullOrUndefined(i)||n.objectMode)){var s=new TypeError("Invalid non-string/buffer chunk");t.emit("error",s),e.nextTick(function(){r(s)}),o=!1}return o}function u(t,e,n){return!t.objectMode&&t.decodeStrings!==!1&&A.isString(e)&&(e=new S(e,n)),e}function h(t,e,n,r,o){n=u(e,n,r),A.isBuffer(n)&&(r="buffer");var s=e.objectMode?1:n.length;e.length+=s;var a=e.length<e.highWaterMark;return a||(e.needDrain=!0),e.writing||e.corked?e.buffer.push(new i(n,r,o)):c(t,e,!1,s,n,r,o),a}function c(t,e,n,i,r,o,s){e.writelen=i,e.writecb=s,e.writing=!0,e.sync=!0,n?t._writev(r,e.onwrite):t._write(r,o,e.onwrite),e.sync=!1}function l(t,n,i,r,o){i?e.nextTick(function(){n.pendingcb--,o(r)}):(n.pendingcb--,o(r)),t._writableState.errorEmitted=!0,t.emit("error",r)}function f(t){t.writing=!1,t.writecb=null,t.length-=t.writelen,t.writelen=0}function d(t,n){var i=t._writableState,r=i.sync,o=i.writecb;if(f(i),n)l(t,i,r,n,o);else{var s=m(t,i);s||i.corked||i.bufferProcessing||!i.buffer.length||_(t,i),r?e.nextTick(function(){p(t,i,s,o)}):p(t,i,s,o)}}function p(t,e,n,i){n||g(t,e),e.pendingcb--,i(),v(t,e)}function g(t,e){0===e.length&&e.needDrain&&(e.needDrain=!1,t.emit("drain"))}function _(t,e){if(e.bufferProcessing=!0,t._writev&&e.buffer.length>1){for(var n=[],i=0;i<e.buffer.length;i++)n.push(e.buffer[i].callback);e.pendingcb++,c(t,e,!0,e.length,e.buffer,"",function(t){for(var i=0;i<n.length;i++)e.pendingcb--,n[i](t)}),e.buffer=[]}else{for(var i=0;i<e.buffer.length;i++){var r=e.buffer[i],o=r.chunk,s=r.encoding,a=r.callback,u=e.objectMode?1:o.length;if(c(t,e,!1,u,o,s,a),e.writing){i++;break}}i<e.buffer.length?e.buffer=e.buffer.slice(i):e.buffer.length=0}e.bufferProcessing=!1}function m(t,e){return e.ending&&0===e.length&&!e.finished&&!e.writing}function y(t,e){e.prefinished||(e.prefinished=!0,t.emit("prefinish"))}function v(t,e){var n=m(t,e);return n&&(0===e.pendingcb?(y(t,e),e.finished=!0,t.emit("finish")):y(t,e)),n}function E(t,n,i){n.ending=!0,v(t,n),i&&(n.finished?e.nextTick(i):t.once("finish",i)),n.ended=!0}t.exports=o;var S=n(70).Buffer;o.WritableState=r;var A=n(103);A.inherits=n(104);var w=n(97);A.inherits(o,w),o.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe. Not readable."))},o.prototype.write=function(t,e,n){var i=this._writableState,r=!1;return A.isFunction(e)&&(n=e,e=null),A.isBuffer(t)?e="buffer":e||(e=i.defaultEncoding),A.isFunction(n)||(n=function(){}),i.ended?s(this,i,n):a(this,i,t,n)&&(i.pendingcb++,r=h(this,i,t,e,n)),r},o.prototype.cork=function(){var t=this._writableState;t.corked++},o.prototype.uncork=function(){var t=this._writableState;t.corked&&(t.corked--,t.writing||t.corked||t.finished||t.bufferProcessing||!t.buffer.length||_(this,t))},o.prototype._write=function(t,e,n){n(new Error("not implemented"))},o.prototype._writev=null,o.prototype.end=function(t,e,n){var i=this._writableState;A.isFunction(t)?(n=t,t=null,e=null):A.isFunction(e)&&(n=e,e=null),A.isNullOrUndefined(t)||this.write(t,e),i.corked&&(i.corked=1,this.uncork()),i.ending||i.finished||E(this,i,n)}}).call(e,n(101))},function(t,e,n){function i(t){if(t&&!u(t))throw new Error("Unknown encoding: "+t)}function r(t){return t.toString(this.encoding)}function o(t){this.charReceived=t.length%2,this.charLength=this.charReceived?2:0}function s(t){this.charReceived=t.length%3,this.charLength=this.charReceived?3:0}var a=n(70).Buffer,u=a.isEncoding||function(t){switch(t&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}},h=e.StringDecoder=function(t){switch(this.encoding=(t||"utf8").toLowerCase().replace(/[-_]/,""),i(t),this.encoding){case"utf8":this.surrogateSize=3;break;case"ucs2":case"utf16le":this.surrogateSize=2,this.detectIncompleteChar=o;break;case"base64":this.surrogateSize=3,this.detectIncompleteChar=s;break;default:return void(this.write=r)}this.charBuffer=new a(6),this.charReceived=0,this.charLength=0};h.prototype.write=function(t){for(var e="";this.charLength;){var n=t.length>=this.charLength-this.charReceived?this.charLength-this.charReceived:t.length;if(t.copy(this.charBuffer,this.charReceived,0,n),this.charReceived+=n,this.charReceived<this.charLength)return"";t=t.slice(n,t.length),e=this.charBuffer.slice(0,this.charLength).toString(this.encoding);var i=e.charCodeAt(e.length-1);if(!(i>=55296&&56319>=i)){if(this.charReceived=this.charLength=0,0===t.length)return e;break}this.charLength+=this.surrogateSize,e=""}this.detectIncompleteChar(t);var r=t.length;this.charLength&&(t.copy(this.charBuffer,0,t.length-this.charReceived,r),r-=this.charReceived),e+=t.toString(this.encoding,0,r);var r=e.length-1,i=e.charCodeAt(r);if(i>=55296&&56319>=i){var o=this.surrogateSize;return this.charLength+=o,this.charReceived+=o,this.charBuffer.copy(this.charBuffer,o,0,o),t.copy(this.charBuffer,0,0,o),e.substring(0,r)}return e},h.prototype.detectIncompleteChar=function(t){for(var e=t.length>=3?3:t.length;e>0;e--){var n=t[t.length-e];if(1==e&&n>>5==6){this.charLength=2;break}if(2>=e&&n>>4==14){this.charLength=3;break}if(3>=e&&n>>3==30){this.charLength=4;break}}this.charReceived=e},h.prototype.end=function(t){var e="";if(t&&t.length&&(e=this.write(t)),this.charReceived){var n=this.charReceived,i=this.charBuffer,r=this.encoding;e+=i.slice(0,n).toString(r)}return e}},function(t,e,n){function i(t,e){this.afterTransform=function(t,n){return r(e,t,n)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null}function r(t,e,n){var i=t._transformState;i.transforming=!1;var r=i.writecb;if(!r)return t.emit("error",new Error("no writecb in Transform class"));i.writechunk=null,i.writecb=null,u.isNullOrUndefined(n)||t.push(n),r&&r(e);var o=t._readableState;o.reading=!1,(o.needReadable||o.length<o.highWaterMark)&&t._read(o.highWaterMark)}function o(t){if(!(this instanceof o))return new o(t);a.call(this,t),this._transformState=new i(t,this);var e=this;this._readableState.needReadable=!0,this._readableState.sync=!1,this.once("prefinish",function(){u.isFunction(this._flush)?this._flush(function(t){s(e,t)}):s(e)})}function s(t,e){if(e)return t.emit("error",e);var n=t._writableState,i=t._transformState;if(n.length)throw new Error("calling transform done when ws.length != 0");if(i.transforming)throw new Error("calling transform done when still transforming");return t.push(null)}t.exports=o;var a=n(106),u=n(103);u.inherits=n(104),u.inherits(o,a),o.prototype.push=function(t,e){return this._transformState.needTransform=!1,a.prototype.push.call(this,t,e)},o.prototype._transform=function(t,e,n){throw new Error("not implemented")},o.prototype._write=function(t,e,n){var i=this._transformState;if(i.writecb=n,i.writechunk=t,i.writeencoding=e,!i.transforming){var r=this._readableState;(i.needTransform||r.needReadable||r.length<r.highWaterMark)&&this._read(r.highWaterMark)}},o.prototype._read=function(t){var e=this._transformState;u.isNull(e.writechunk)||!e.writecb||e.transforming?e.needTransform=!0:(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform))}},function(t,e,n){function i(t){return this instanceof i?void r.call(this,t):new i(t)}t.exports=i;var r=n(109),o=n(103);o.inherits=n(104),o.inherits(i,r),i.prototype._transform=function(t,e,n){n(null,t)}},function(t,e,n){t.exports=n(107)},function(t,e,n){t.exports=n(106)},function(t,e,n){t.exports=n(109)},function(t,e,n){t.exports=n(110)},function(t,e,n){(function(e){var i,r=n(74),o=n(69),s=(o.BaseTransform,o.BaseParser),a=n(116);t.exports=i=function(t,e){o.BaseParser.prototype.constructor.apply(this,arguments),t||(t={audioTrackId:-1,videoTrackId:-1,tracks:[]}),this.muxer=new a(t),this.muxer.ondata=this._onMp4Data.bind(this),this.muxer.oncodecinfo=this._onCodecInfo.bind(this),this._codecInfo=null,this._timestamp=0,e&&(this.worker="undefined"!=typeof Worker?new Worker("/dist/mp4-mux-worker-bundle.js"):null),this.worker&&(this.worker.onmessage=function(t){this._onMp4Data(t.data)}.bind(this),this.worker.postMessage({mp4MuxProfile:t}))},i.Profiles=a.Profiles,i.prototype=o.createBaseParser({constructor:i,_onMp4Data:function(t){r("_onMp4Data"),this.enqueue(new o.Transfer(new e(t),"buffer"))},_onCodecInfo:function(t){r("Codec info: "+t),this._codecInfo=t},_onFinish:function(t){r("MP4Mux._onFinish"),this.worker?this.worker.postMessage({eos:!0}):this.muxer&&this.muxer.flush(),s.prototype._onFinish.call(this,t)},_parse:function(t){var e;t.data&&(e=this._timestamp=t.data.timestamp),t.data.flush&&(this._needFlush=!0),r("UnitMP4Mux Timestamp: "+this._timestamp),r("UnitMP4Mux._parse: Payload type: "+typeof t.data),this.worker?(t.data.empty||this.worker.postMessage({data:t.data,meta:t.data.meta,timestamp:e,packetType:a.TYPE_AUDIO_PACKET}),this._needFlush&&(this.worker.postMessage({eos:!0}),this._needFlush=!1)):this.muxer&&(t.data.empty||this.muxer.pushPacket(a.TYPE_AUDIO_PACKET,new Uint8Array(t.data),e,t.data.meta),this._needFlush&&(this.muxer.flush(),this._needFlush=!1))}})}).call(e,n(70).Buffer)},function(t,e,n){function i(t){for(var e=t.length>>1,n=new Uint8Array(e),i=0;e>i;i++)n[i]=parseInt(t.substr(2*i,2),16);return n}function r(t,e){var n,i=0,r=s.RAW;switch(e.codecId){case l:var o=t[i++];r=o,n=1024;break;case c:var u=t[i+1]>>3&3,f=t[i+1]>>1&3;n=1===f?3===u?1152:576:3===f?384:1152}return info={codecDescription:h[e.codecId],codecId:e.codecId,data:t.subarray(i),rate:e.sampleRate,size:e.sampleSize,channels:e.channels,samples:n,packetType:r},a("parsed audio packet with %d samples",n),info}function o(t){var e=0,n=t[e]>>4,i=15&t[e];e++;var r={frameType:n,codecId:i,codecDescription:d[i]};switch(i){case g:var o=t[e++];r.packetType=o,r.compositionTime=(t[e]<<24|t[e+1]<<16|t[e+2]<<8)>>8,e+=3;break;case p:r.packetType=_.NALU,r.horizontalOffset=t[e]>>4&15,r.verticalOffset=15&t[e],r.compositionTime=0,e++}return r.data=t.subarray(e),r}var s,a=n(74),u=n(117),h=["PCM","ADPCM","MP3","PCM le","Nellymouser16","Nellymouser8","Nellymouser","G.711 A-law","G.711 mu-law",null,"AAC","Speex","MP3 8khz"],c=2,l=10;!function(t){t[t.HEADER=0]="HEADER",t[t.RAW=1]="RAW"}(s||(s={}));var f,d=[null,"JPEG","Sorenson","Screen","VP6","VP6 alpha","Screen2","AVC"],p=4,g=7;!function(t){t[t.KEY=1]="KEY",t[t.INNER=2]="INNER",t[t.DISPOSABLE=3]="DISPOSABLE",t[t.GENERATED=4]="GENERATED",t[t.INFO=5]="INFO"}(f||(f={}));var _;!function(t){t[t.HEADER=0]="HEADER",t[t.NALU=1]="NALU",t[t.END=2]="END"}(_||(_={}));var m,y=8,v=9,E=!0;!function(t){t[t.CAN_GENERATE_HEADER=0]="CAN_GENERATE_HEADER",t[t.NEED_HEADER_DATA=1]="NEED_HEADER_DATA",t[t.MAIN_PACKETS=2]="MAIN_PACKETS"}(m||(m={}));var S=function(){function t(t){var e=this;this.oncodecinfo=function(t){throw new Error("MP4Mux.oncodecinfo is not set")},this.ondata=function(t){throw new Error("MP4Mux.ondata is not set")},this.metadata=t,this.trackStates=this.metadata.tracks.map(function(t,n){var i={trackId:n+1,trackInfo:t,cachedDuration:0,samplesProcessed:0,initializationData:[]};return e.metadata.audioTrackId===n&&(e.audioTrackState=i),e.metadata.videoTrackId===n&&(e.videoTrackState=i),i},this),this._checkIfNeedHeaderData(),this.filePos=0,this.cachedPackets=[],this.chunkIndex=0}return t.prototype.pushPacket=function(t,e,n,i){switch(this.state===m.CAN_GENERATE_HEADER&&this._tryGenerateHeader(),t){case y:var a=this.audioTrackState,u=r(e,i);if(!a||a.trackInfo.codecId!==u.codecId)throw new Error("Unexpected audio packet codec: "+u.codecDescription);switch(u.codecId){default:throw new Error("Unsupported audio codec: "+u.codecDescription);case c:break;case l:if(u.packetType===s.HEADER)return void a.initializationData.push(u.data)}this.cachedPackets.push({packet:u,timestamp:n,trackId:a.trackId});break;case v:var h=this.videoTrackState,f=o(e);if(!h||h.trackInfo.codecId!==f.codecId)throw new Error("Unexpected video packet codec: "+f.codecDescription);switch(f.codecId){default:throw new Error("unsupported video codec: "+f.codecDescription);case p:break;case g:if(f.packetType===_.HEADER)return void h.initializationData.push(f.data)}this.cachedPackets.push({packet:f,timestamp:n,trackId:h.trackId});break;default:throw new Error("unknown packet type: "+t)}this.state===m.NEED_HEADER_DATA&&this._tryGenerateHeader()},t.prototype.flush=function(){this.cachedPackets.length>0&&this._chunk()},t.prototype._checkIfNeedHeaderData=function(){this.trackStates.some(function(t){return t.trackInfo.codecId===l||t.trackInfo.codecId===g})?this.state=m.NEED_HEADER_DATA:this.state=m.CAN_GENERATE_HEADER},t.prototype._tryGenerateHeader=function(){var t=this.trackStates.every(function(t){switch(t.trackInfo.codecId){case l:case g:return t.initializationData.length>0;default:return!0}});if(t){for(var e=["isom"],n=1,r=1,o=[],s=0;s<this.trackStates.length;s++){var a,h=this.trackStates[s],f=h.trackInfo;switch(f.codecId){case l:var d=h.initializationData[0];a=new u.AudioSampleEntry("mp4a",n,f.channels,f.samplesize,f.samplerate);var _=new Uint8Array(41+d.length);_.set(i("0000000003808080"),0),_[8]=32+d.length,_.set(i("00020004808080"),9),_[16]=18+d.length,_.set(i("40150000000000FA000000000005808080"),17),_[34]=d.length,_.set(d,35),_.set(i("068080800102"),35+d.length),a.otherBoxes=[new u.RawTag("esds",_)];var y=d[0]>>3;h.mimeTypeCodec="mp4a.40."+y;break;case c:a=new u.AudioSampleEntry(".mp3",n,f.channels,f.samplesize,f.samplerate),h.mimeTypeCodec="mp3";break;case g:var v=h.initializationData[0];a=new u.VideoSampleEntry("avc1",r,f.width,f.height),a.otherBoxes=[new u.RawTag("avcC",v)];var E=v[1]<<16|v[2]<<8|v[3];h.mimeTypeCodec="avc1."+(16777216|E).toString(16).substr(1),e.push("iso2","avc1","mp41");break;case p:a=new u.VideoSampleEntry("VP6F",r,f.width,f.height),a.otherBoxes=[new u.RawTag("glbl",i("00"))],h.mimeTypeCodec="avc1.42001E";break;default:throw new Error("not supported track type")}var S,A=u.TrackHeaderFlags.TRACK_ENABLED|u.TrackHeaderFlags.TRACK_IN_MOVIE;h===this.audioTrackState?S=new u.TrackBox(new u.TrackHeaderBox(A,h.trackId,-1,0,0,1,s),new u.MediaBox(new u.MediaHeaderBox(f.timescale,-1,f.language),new u.HandlerBox("soun","SoundHandler"),new u.MediaInformationBox(new u.SoundMediaHeaderBox,new u.DataInformationBox(new u.DataReferenceBox([new u.DataEntryUrlBox(u.SELF_CONTAINED_DATA_REFERENCE_FLAG)])),new u.SampleTableBox(new u.SampleDescriptionBox([a]),new u.RawTag("stts",i("0000000000000000")),new u.RawTag("stsc",i("0000000000000000")),new u.RawTag("stsz",i("000000000000000000000000")),new u.RawTag("stco",i("0000000000000000")))))):h===this.videoTrackState&&(S=new u.TrackBox(new u.TrackHeaderBox(A,h.trackId,-1,f.width,f.height,0,s),new u.MediaBox(new u.MediaHeaderBox(f.timescale,-1,f.language),new u.HandlerBox("vide","VideoHandler"),new u.MediaInformationBox(new u.VideoMediaHeaderBox,new u.DataInformationBox(new u.DataReferenceBox([new u.DataEntryUrlBox(u.SELF_CONTAINED_DATA_REFERENCE_FLAG)])),new u.SampleTableBox(new u.SampleDescriptionBox([a]),new u.RawTag("stts",i("0000000000000000")),new u.RawTag("stsc",i("0000000000000000")),new u.RawTag("stsz",i("000000000000000000000000")),new u.RawTag("stco",i("0000000000000000"))))))),o.push(S)}var w=new u.MovieExtendsBox(null,[new u.TrackExtendsBox(1,1,0,0,0),new u.TrackExtendsBox(2,1,0,0,0)],null),T=new u.BoxContainerBox("udat",[new u.MetaBox(new u.RawTag("hdlr",i("00000000000000006D6469726170706C000000000000000000")),[new u.RawTag("ilst",i("00000025A9746F6F0000001D6461746100000001000000004C61766635342E36332E313034"))])]),b=new u.MovieHeaderBox(1e3,0,this.trackStates.length+1),P=new u.MovieBox(b,o,w,T),I=new u.FileTypeBox("isom",512,e),L=I.layout(0),O=P.layout(L),R=new Uint8Array(L+O);I.write(R),P.write(R),this.oncodecinfo(this.trackStates.map(function(t){return t.mimeTypeCodec})),this.ondata(R),this.filePos+=R.length,this.state=m.MAIN_PACKETS}},t.prototype._chunk=function(){var t=this.cachedPackets;if(E&&this.videoTrackState){for(var e=t.length-1,n=this.videoTrackState.trackId;e>0&&(t[e].trackId!==n||t[e].packet.frameType!==f.KEY);)e--;e>0&&(t=t.slice(0,e))}if(0!==t.length){for(var i=[],r=0,o=[],s=[],a=0;a<this.trackStates.length;a++){var h=this.trackStates[a],d=h.trackInfo,_=h.trackId,m=t.filter(function(t){return t.trackId===_});if(0!==m.length){var y,v,S,A=new u.TrackFragmentBaseMediaDecodeTimeBox(h.cachedDuration);switch(s.push(r),d.codecId){case l:case c:S=[];for(var e=0;e<m.length;e++){var w=m[e].packet,T=Math.round(w.samples*d.timescale/d.samplerate);i.push(w.data),r+=w.data.length,S.push({duration:T,size:w.data.length}),h.samplesProcessed+=w.samples}var b=u.TrackFragmentFlags.DEFAULT_SAMPLE_FLAGS_PRESENT;y=new u.TrackFragmentHeaderBox(b,_,0,0,0,0,u.SampleFlags.SAMPLE_DEPENDS_ON_NO_OTHERS);var P=u.TrackRunFlags.DATA_OFFSET_PRESENT|u.TrackRunFlags.SAMPLE_DURATION_PRESENT|u.TrackRunFlags.SAMPLE_SIZE_PRESENT;v=new u.TrackRunBox(P,S,0,0),h.cachedDuration=Math.round(h.samplesProcessed*d.timescale/d.samplerate);break;case g:case p:S=[];for(var I=h.samplesProcessed,L=I*d.timescale/d.framerate,O=Math.round(L),e=0;e<m.length;e++){var R=m[e].packet;I++;var D=Math.round(I*d.timescale/d.framerate),M=D-O;O=D;var k=Math.round(I*d.timescale/d.framerate+R.compositionTime*d.timescale/1e3);i.push(R.data),r+=R.data.length;var N=R.frameType===f.KEY?u.SampleFlags.SAMPLE_DEPENDS_ON_NO_OTHERS:u.SampleFlags.SAMPLE_DEPENDS_ON_OTHER|u.SampleFlags.SAMPLE_IS_NOT_SYNC;S.push({duration:M,size:R.data.length,flags:N,compositionTimeOffset:k-D})}var b=u.TrackFragmentFlags.DEFAULT_SAMPLE_FLAGS_PRESENT;y=new u.TrackFragmentHeaderBox(b,_,0,0,0,0,u.SampleFlags.SAMPLE_DEPENDS_ON_NO_OTHERS);var P=u.TrackRunFlags.DATA_OFFSET_PRESENT|u.TrackRunFlags.SAMPLE_DURATION_PRESENT|u.TrackRunFlags.SAMPLE_SIZE_PRESENT|u.TrackRunFlags.SAMPLE_FLAGS_PRESENT|u.TrackRunFlags.SAMPLE_COMPOSITION_TIME_OFFSET;v=new u.TrackRunBox(P,S,0,0),h.cachedDuration=O,h.samplesProcessed=I;break;default:throw new Error("Un codec")}var x=new u.TrackFragmentBox(y,A,v);o.push(x)}}this.cachedPackets.splice(0,t.length);for(var C=new u.MovieFragmentHeaderBox(++this.chunkIndex),F=new u.MovieFragmentBox(C,o),U=F.layout(0),B=new u.MediaDataBox(i),H=B.layout(U),j=U+8,a=0;a<o.length;a++)o[a].run.dataOffset=j+s[a];var G=new Uint8Array(U+H);F.write(G),B.write(G),this.ondata(G),this.filePos+=G.length}},t}();t.exports=S,S.MP3_SOUND_CODEC_ID=c,S.AAC_SOUND_CODEC_ID=l,S.TYPE_AUDIO_PACKET=y,S.TYPE_VIDEO_PACKET=v,S.Profiles={MP3_AUDIO_ONLY:{audioTrackId:0,videoTrackId:-1,tracks:[{codecId:S.MP3_SOUND_CODEC_ID,channels:2,samplerate:44100,samplesize:16,timescale:44100}]}}},function(t,e){function n(t){for(var e=new Uint8Array(4*t.length),n=0,i=0,r=t.length;r>i;i++){var o=t.charCodeAt(i);if(127>=o)e[n++]=o;else{if(o>=55296&&56319>=o){var s=t.charCodeAt(i+1);s>=56320&&57343>=s&&(o=((1023&o)<<10)+(1023&s)+65536,++i)}0!==(4292870144&o)?(e[n++]=248|o>>>24&3,e[n++]=128|o>>>18&63,e[n++]=128|o>>>12&63,e[n++]=128|o>>>6&63,e[n++]=128|63&o):0!==(4294901760&o)?(e[n++]=240|o>>>18&7,e[n++]=128|o>>>12&63,e[n++]=128|o>>>6&63,e[n++]=128|63&o):0!==(4294965248&o)?(e[n++]=224|o>>>12&15,e[n++]=128|o>>>6&63,e[n++]=128|63&o):(e[n++]=192|o>>>6&31,e[n++]=128|63&o)}}return e.subarray(0,n)}function i(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return Array.prototype.concat.apply(t,e)}function r(t,e,n){t[e]=n>>24&255,t[e+1]=n>>16&255,t[e+2]=n>>8&255,t[e+3]=255&n}function o(t){return t.charCodeAt(0)<<24|t.charCodeAt(1)<<16|t.charCodeAt(2)<<8|t.charCodeAt(3)}function s(t){return(t-d)/1e3|0}function a(t){return 65536*t|0}function u(t){return 1073741824*t|0}function h(t){return 256*t|0}function c(t){return(31&t.charCodeAt(0))<<10|(31&t.charCodeAt(1))<<5|31&t.charCodeAt(2)}var l,f=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)};t.exports=l={};var d=-20828448e5,p=[1,0,0,0,1,0,0,0,1],g=[0,0,0],_=function(){function t(t,e){this.boxtype=t,"uuid"===t&&(this.userType=e)}return t.prototype.layout=function(t){this.offset=t;var e=8;return this.userType&&(e+=16),this.size=e,e},t.prototype.write=function(t){return r(t,this.offset,this.size),r(t,this.offset+4,o(this.boxtype)),this.userType?(t.set(this.userType,this.offset+8),24):8},t.prototype.toUint8Array=function(){var t=this.layout(0),e=new Uint8Array(t);return this.write(e),e},t}();l.Box=_;var m=function(t){function e(e,n,i){void 0===n&&(n=0),void 0===i&&(i=0),t.call(this,e),this.version=n,this.flags=i}return f(e,t),e.prototype.layout=function(e){return this.size=t.prototype.layout.call(this,e)+4,this.size},e.prototype.write=function(e){var n=t.prototype.write.call(this,e);return r(e,this.offset+n,this.version<<24|this.flags),n+4},e}(_);l.FullBox=m;var y=function(t){function e(e,n,i){t.call(this,"ftype"),this.majorBrand=e,this.minorVersion=n,this.compatibleBrands=i}return f(e,t),e.prototype.layout=function(e){return this.size=t.prototype.layout.call(this,e)+4*(2+this.compatibleBrands.length),this.size},e.prototype.write=function(e){var n=this,i=t.prototype.write.call(this,e);return r(e,this.offset+i,o(this.majorBrand)),r(e,this.offset+i+4,this.minorVersion),i+=8,this.compatibleBrands.forEach(function(t){r(e,n.offset+i,o(t)),i+=4},this),i},e}(_);l.FileTypeBox=y;var v=function(t){function e(e,n){t.call(this,e),this.children=n}return f(e,t),e.prototype.layout=function(e){var n=t.prototype.layout.call(this,e);return this.children.forEach(function(t){t&&(n+=t.layout(e+n))}),this.size=n},e.prototype.write=function(e){var n=t.prototype.write.call(this,e);return this.children.forEach(function(t){t&&(n+=t.write(e))}),n},e}(_);l.BoxContainerBox=v;var E=function(t){function e(e,n,r,o){t.call(this,"moov",i([e],n,[r,o])),this.header=e,this.tracks=n,this.extendsBox=r,this.userData=o}return f(e,t),e}(v);l.MovieBox=E;var S=function(t){function e(e,n,i,r,o,s,a,u){void 0===r&&(r=1),void 0===o&&(o=1),void 0===s&&(s=p),void 0===a&&(a=d),void 0===u&&(u=d),t.call(this,"mvhd",0,0),this.timescale=e,this.duration=n,this.nextTrackId=i,this.rate=r,this.volume=o,this.matrix=s,this.creationTime=a,this.modificationTime=u}return f(e,t),e.prototype.layout=function(e){return this.size=t.prototype.layout.call(this,e)+16+4+2+2+8+36+24+4,this.size},e.prototype.write=function(e){var n=t.prototype.write.call(this,e);return r(e,this.offset+n,s(this.creationTime)),r(e,this.offset+n+4,s(this.modificationTime)),r(e,this.offset+n+8,this.timescale),r(e,this.offset+n+12,this.duration),n+=16,r(e,this.offset+n,a(this.rate)),r(e,this.offset+n+4,h(this.volume)<<16),r(e,this.offset+n+8,0),r(e,this.offset+n+12,0),n+=16,r(e,this.offset+n,a(this.matrix[0])),r(e,this.offset+n+4,a(this.matrix[1])),r(e,this.offset+n+8,a(this.matrix[2])),r(e,this.offset+n+12,a(this.matrix[3])),r(e,this.offset+n+16,a(this.matrix[4])),r(e,this.offset+n+20,a(this.matrix[5])),r(e,this.offset+n+24,u(this.matrix[6])),r(e,this.offset+n+28,u(this.matrix[7])),r(e,this.offset+n+32,u(this.matrix[8])),n+=36,r(e,this.offset+n,0),r(e,this.offset+n+4,0),r(e,this.offset+n+8,0),r(e,this.offset+n+12,0),r(e,this.offset+n+16,0),r(e,this.offset+n+20,0),n+=24,r(e,this.offset+n,this.nextTrackId),n+=4},e}(m);l.MovieHeaderBox=S,function(t){t[t.TRACK_ENABLED=1]="TRACK_ENABLED",t[t.TRACK_IN_MOVIE=2]="TRACK_IN_MOVIE",t[t.TRACK_IN_PREVIEW=4]="TRACK_IN_PREVIEW"}(l.TrackHeaderFlags||(l.TrackHeaderFlags={}));var A=(l.TrackHeaderFlags,function(t){function e(e,n,i,r,o,s,a,u,h,c,l){void 0===a&&(a=0),void 0===u&&(u=0),void 0===h&&(h=p),void 0===c&&(c=d),void 0===l&&(l=d),t.call(this,"tkhd",0,e),this.trackId=n,this.duration=i,this.width=r,this.height=o,this.volume=s,this.alternateGroup=a,this.layer=u,this.matrix=h,this.creationTime=c,this.modificationTime=l}return f(e,t),e.prototype.layout=function(e){return this.size=t.prototype.layout.call(this,e)+20+8+6+2+36+8,this.size},e.prototype.write=function(e){var n=t.prototype.write.call(this,e);return r(e,this.offset+n,s(this.creationTime)),r(e,this.offset+n+4,s(this.modificationTime)),r(e,this.offset+n+8,this.trackId),r(e,this.offset+n+12,0),r(e,this.offset+n+16,this.duration),n+=20,r(e,this.offset+n,0),r(e,this.offset+n+4,0),r(e,this.offset+n+8,this.layer<<16|this.alternateGroup),r(e,this.offset+n+12,h(this.volume)<<16),n+=16,r(e,this.offset+n,a(this.matrix[0])),r(e,this.offset+n+4,a(this.matrix[1])),r(e,this.offset+n+8,a(this.matrix[2])),r(e,this.offset+n+12,a(this.matrix[3])),r(e,this.offset+n+16,a(this.matrix[4])),r(e,this.offset+n+20,a(this.matrix[5])),r(e,this.offset+n+24,u(this.matrix[6])),r(e,this.offset+n+28,u(this.matrix[7])),r(e,this.offset+n+32,u(this.matrix[8])),n+=36,r(e,this.offset+n,a(this.width)),r(e,this.offset+n+4,a(this.height)),n+=8},e}(m));l.TrackHeaderBox=A;var w=function(t){function e(e,n,i,r,o){void 0===i&&(i="unk"),void 0===r&&(r=d),void 0===o&&(o=d),t.call(this,"mdhd",0,0),this.timescale=e,this.duration=n,this.language=i,this.creationTime=r,this.modificationTime=o}return f(e,t),e.prototype.layout=function(e){return this.size=t.prototype.layout.call(this,e)+16+4,this.size},e.prototype.write=function(e){var n=t.prototype.write.call(this,e);return r(e,this.offset+n,s(this.creationTime)),r(e,this.offset+n+4,s(this.modificationTime)),r(e,this.offset+n+8,this.timescale),r(e,this.offset+n+12,this.duration),r(e,this.offset+n+16,c(this.language)<<16),n+20},e}(m);l.MediaHeaderBox=w;var T=function(t){function e(e,i){t.call(this,"hdlr",0,0),this.handlerType=e,this.name=i,this._encodedName=n(this.name)}return f(e,t),e.prototype.layout=function(e){return this.size=t.prototype.layout.call(this,e)+8+12+(this._encodedName.length+1),this.size},e.prototype.write=function(e){var n=t.prototype.write.call(this,e);return r(e,this.offset+n,0),r(e,this.offset+n+4,o(this.handlerType)),r(e,this.offset+n+8,0),r(e,this.offset+n+12,0),r(e,this.offset+n+16,0),n+=20,e.set(this._encodedName,this.offset+n),e[this.offset+n+this._encodedName.length]=0,n+=this._encodedName.length+1},e}(m);l.HandlerBox=T;var b=function(t){function e(e){void 0===e&&(e=0),t.call(this,"smhd",0,0),this.balance=e}return f(e,t),e.prototype.layout=function(e){return this.size=t.prototype.layout.call(this,e)+4,this.size},e.prototype.write=function(e){var n=t.prototype.write.call(this,e);return r(e,this.offset+n,h(this.balance)<<16),n+4},e}(m);l.SoundMediaHeaderBox=b;var P=function(t){function e(e,n){void 0===e&&(e=0),void 0===n&&(n=g),t.call(this,"vmhd",0,0),this.graphicsMode=e,this.opColor=n}return f(e,t),e.prototype.layout=function(e){return this.size=t.prototype.layout.call(this,e)+8,this.size},e.prototype.write=function(e){var n=t.prototype.write.call(this,e);return r(e,this.offset+n,this.graphicsMode<<16|this.opColor[0]),r(e,this.offset+n+4,this.opColor[1]<<16|this.opColor[2]),n+8},e}(m);l.VideoMediaHeaderBox=P,l.SELF_CONTAINED_DATA_REFERENCE_FLAG=1;var I=function(t){function e(e,i){void 0===i&&(i=null),t.call(this,"url ",0,e),this.location=i,e&l.SELF_CONTAINED_DATA_REFERENCE_FLAG||(this._encodedLocation=n(i))}return f(e,t),e.prototype.layout=function(e){var n=t.prototype.layout.call(this,e);return this._encodedLocation&&(n+=this._encodedLocation.length+1),this.size=n},e.prototype.write=function(e){var n=t.prototype.write.call(this,e);return this._encodedLocation&&(e.set(this._encodedLocation,this.offset+n),e[this.offset+n+this._encodedLocation.length]=0,n+=this._encodedLocation.length),n},e}(m);l.DataEntryUrlBox=I;var L=function(t){function e(e){t.call(this,"dref",0,0),this.entries=e}return f(e,t),e.prototype.layout=function(e){var n=t.prototype.layout.call(this,e)+4;return this.entries.forEach(function(t){n+=t.layout(e+n)}),this.size=n},e.prototype.write=function(e){var n=t.prototype.write.call(this,e);return r(e,this.offset+n,this.entries.length),this.entries.forEach(function(t){n+=t.write(e)}),n},e}(m);l.DataReferenceBox=L;var O=function(t){function e(e){t.call(this,"dinf",[e]),this.dataReference=e}return f(e,t),e}(v);l.DataInformationBox=O;var R=function(t){function e(e){t.call(this,"stsd",0,0),this.entries=e}return f(e,t),e.prototype.layout=function(e){var n=t.prototype.layout.call(this,e);return n+=4,this.entries.forEach(function(t){n+=t.layout(e+n)}),this.size=n},e.prototype.write=function(e){var n=t.prototype.write.call(this,e);return r(e,this.offset+n,this.entries.length),n+=4,this.entries.forEach(function(t){n+=t.write(e)}),n},e}(m);l.SampleDescriptionBox=R;var D=function(t){function e(e,n,i,r,o){t.call(this,"stbl",[e,n,i,r,o]),this.sampleDescriptions=e,this.timeToSample=n,this.sampleToChunk=i,this.sampleSizes=r,this.chunkOffset=o}return f(e,t),e}(v);l.SampleTableBox=D;var M=function(t){function e(e,n,i){t.call(this,"minf",[e,n,i]),this.header=e,this.info=n,this.sampleTable=i}return f(e,t),e}(v);l.MediaInformationBox=M;var k=function(t){function e(e,n,i){t.call(this,"mdia",[e,n,i]),this.header=e,this.handler=n,this.info=i}return f(e,t),e}(v);l.MediaBox=k;var N=function(t){function e(e,n){t.call(this,"trak",[e,n]),this.header=e,this.media=n}return f(e,t),e}(v);l.TrackBox=N;var x=function(t){function e(e,n,i,r,o){t.call(this,"trex",0,0),this.trackId=e,this.defaultSampleDescriptionIndex=n,this.defaultSampleDuration=i,this.defaultSampleSize=r,this.defaultSampleFlags=o}return f(e,t),e.prototype.layout=function(e){return this.size=t.prototype.layout.call(this,e)+20,this.size},e.prototype.write=function(e){var n=t.prototype.write.call(this,e);return r(e,this.offset+n,this.trackId),r(e,this.offset+n+4,this.defaultSampleDescriptionIndex),r(e,this.offset+n+8,this.defaultSampleDuration),r(e,this.offset+n+12,this.defaultSampleSize),r(e,this.offset+n+16,this.defaultSampleFlags),n+20},e}(m);l.TrackExtendsBox=x;var C=function(t){function e(e,n,r){t.call(this,"mvex",i([e],n,[r])),this.header=e,this.tracDefaults=n,this.levels=r}return f(e,t),e}(v);l.MovieExtendsBox=C;var F=function(t){function e(e,n){t.call(this,"meta",0,0),this.handler=e,this.otherBoxes=n}return f(e,t),e.prototype.layout=function(e){var n=t.prototype.layout.call(this,e);return n+=this.handler.layout(e+n),this.otherBoxes.forEach(function(t){n+=t.layout(e+n)}),this.size=n},e.prototype.write=function(e){var n=t.prototype.write.call(this,e);return n+=this.handler.write(e),this.otherBoxes.forEach(function(t){n+=t.write(e)}),n},e}(m);l.MetaBox=F;var U=function(t){function e(e){t.call(this,"mfhd",0,0),this.sequenceNumber=e}return f(e,t),e.prototype.layout=function(e){return this.size=t.prototype.layout.call(this,e)+4,this.size},e.prototype.write=function(e){var n=t.prototype.write.call(this,e);return r(e,this.offset+n,this.sequenceNumber),n+4},e}(m);l.MovieFragmentHeaderBox=U,function(t){t[t.BASE_DATA_OFFSET_PRESENT=1]="BASE_DATA_OFFSET_PRESENT",t[t.SAMPLE_DESCRIPTION_INDEX_PRESENT=2]="SAMPLE_DESCRIPTION_INDEX_PRESENT",t[t.DEFAULT_SAMPLE_DURATION_PRESENT=8]="DEFAULT_SAMPLE_DURATION_PRESENT",t[t.DEFAULT_SAMPLE_SIZE_PRESENT=16]="DEFAULT_SAMPLE_SIZE_PRESENT",t[t.DEFAULT_SAMPLE_FLAGS_PRESENT=32]="DEFAULT_SAMPLE_FLAGS_PRESENT"}(l.TrackFragmentFlags||(l.TrackFragmentFlags={}));var B=l.TrackFragmentFlags,H=function(t){function e(e,n,i,r,o,s,a){t.call(this,"tfhd",0,e),this.trackId=n,this.baseDataOffset=i,this.sampleDescriptionIndex=r,this.defaultSampleDuration=o,this.defaultSampleSize=s,this.defaultSampleFlags=a}return f(e,t),e.prototype.layout=function(e){var n=t.prototype.layout.call(this,e)+4,i=this.flags;return i&B.BASE_DATA_OFFSET_PRESENT&&(n+=8),i&B.SAMPLE_DESCRIPTION_INDEX_PRESENT&&(n+=4),i&B.DEFAULT_SAMPLE_DURATION_PRESENT&&(n+=4),i&B.DEFAULT_SAMPLE_SIZE_PRESENT&&(n+=4),i&B.DEFAULT_SAMPLE_FLAGS_PRESENT&&(n+=4),this.size=n},e.prototype.write=function(e){var n=t.prototype.write.call(this,e),i=this.flags;return r(e,this.offset+n,this.trackId),n+=4,i&B.BASE_DATA_OFFSET_PRESENT&&(r(e,this.offset+n,0),r(e,this.offset+n+4,this.baseDataOffset),n+=8),i&B.SAMPLE_DESCRIPTION_INDEX_PRESENT&&(r(e,this.offset+n,this.sampleDescriptionIndex),n+=4),i&B.DEFAULT_SAMPLE_DURATION_PRESENT&&(r(e,this.offset+n,this.defaultSampleDuration),n+=4),i&B.DEFAULT_SAMPLE_SIZE_PRESENT&&(r(e,this.offset+n,this.defaultSampleSize),n+=4),i&B.DEFAULT_SAMPLE_FLAGS_PRESENT&&(r(e,this.offset+n,this.defaultSampleFlags),n+=4),n},e}(m);l.TrackFragmentHeaderBox=H;
var j=function(t){function e(e){t.call(this,"tfdt",0,0),this.baseMediaDecodeTime=e}return f(e,t),e.prototype.layout=function(e){return this.size=t.prototype.layout.call(this,e)+4,this.size},e.prototype.write=function(e){var n=t.prototype.write.call(this,e);return r(e,this.offset+n,this.baseMediaDecodeTime),n+4},e}(m);l.TrackFragmentBaseMediaDecodeTimeBox=j;var G=function(t){function e(e,n,i){t.call(this,"traf",[e,n,i]),this.header=e,this.decodeTime=n,this.run=i}return f(e,t),e}(v);l.TrackFragmentBox=G,function(t){t[t.IS_LEADING_MASK=201326592]="IS_LEADING_MASK",t[t.SAMPLE_DEPENDS_ON_MASK=50331648]="SAMPLE_DEPENDS_ON_MASK",t[t.SAMPLE_DEPENDS_ON_OTHER=16777216]="SAMPLE_DEPENDS_ON_OTHER",t[t.SAMPLE_DEPENDS_ON_NO_OTHERS=33554432]="SAMPLE_DEPENDS_ON_NO_OTHERS",t[t.SAMPLE_IS_DEPENDED_ON_MASK=12582912]="SAMPLE_IS_DEPENDED_ON_MASK",t[t.SAMPLE_HAS_REDUNDANCY_MASK=3145728]="SAMPLE_HAS_REDUNDANCY_MASK",t[t.SAMPLE_PADDING_VALUE_MASK=917504]="SAMPLE_PADDING_VALUE_MASK",t[t.SAMPLE_IS_NOT_SYNC=65536]="SAMPLE_IS_NOT_SYNC",t[t.SAMPLE_DEGRADATION_PRIORITY_MASK=65535]="SAMPLE_DEGRADATION_PRIORITY_MASK"}(l.SampleFlags||(l.SampleFlags={})),l.SampleFlags,!function(t){t[t.DATA_OFFSET_PRESENT=1]="DATA_OFFSET_PRESENT",t[t.FIRST_SAMPLE_FLAGS_PRESENT=4]="FIRST_SAMPLE_FLAGS_PRESENT",t[t.SAMPLE_DURATION_PRESENT=256]="SAMPLE_DURATION_PRESENT",t[t.SAMPLE_SIZE_PRESENT=512]="SAMPLE_SIZE_PRESENT",t[t.SAMPLE_FLAGS_PRESENT=1024]="SAMPLE_FLAGS_PRESENT",t[t.SAMPLE_COMPOSITION_TIME_OFFSET=2048]="SAMPLE_COMPOSITION_TIME_OFFSET"}(l.TrackRunFlags||(l.TrackRunFlags={}));var Y=l.TrackRunFlags,V=function(t){function e(e,n,i,r){t.call(this,"trun",1,e),this.samples=n,this.dataOffset=i,this.firstSampleFlags=r}return f(e,t),e.prototype.layout=function(e){var n=t.prototype.layout.call(this,e)+4,i=this.samples.length,r=this.flags;return r&Y.DATA_OFFSET_PRESENT&&(n+=4),r&Y.FIRST_SAMPLE_FLAGS_PRESENT&&(n+=4),r&Y.SAMPLE_DURATION_PRESENT&&(n+=4*i),r&Y.SAMPLE_SIZE_PRESENT&&(n+=4*i),r&Y.SAMPLE_FLAGS_PRESENT&&(n+=4*i),r&Y.SAMPLE_COMPOSITION_TIME_OFFSET&&(n+=4*i),this.size=n},e.prototype.write=function(e){var n=t.prototype.write.call(this,e),i=this.samples.length,o=this.flags;r(e,this.offset+n,i),n+=4,o&Y.DATA_OFFSET_PRESENT&&(r(e,this.offset+n,this.dataOffset),n+=4),o&Y.FIRST_SAMPLE_FLAGS_PRESENT&&(r(e,this.offset+n,this.firstSampleFlags),n+=4);for(var s=0;i>s;s++){var a=this.samples[s];o&Y.SAMPLE_DURATION_PRESENT&&(r(e,this.offset+n,a.duration),n+=4),o&Y.SAMPLE_SIZE_PRESENT&&(r(e,this.offset+n,a.size),n+=4),o&Y.SAMPLE_FLAGS_PRESENT&&(r(e,this.offset+n,a.flags),n+=4),o&Y.SAMPLE_COMPOSITION_TIME_OFFSET&&(r(e,this.offset+n,a.compositionTimeOffset),n+=4)}return n},e}(m);l.TrackRunBox=V;var z=function(t){function e(e,n){t.call(this,"moof",i([e],n)),this.header=e,this.trafs=n}return f(e,t),e}(v);l.MovieFragmentBox=z;var W=function(t){function e(e){t.call(this,"mdat"),this.chunks=e}return f(e,t),e.prototype.layout=function(e){var n=t.prototype.layout.call(this,e);return this.chunks.forEach(function(t){n+=t.length}),this.size=n},e.prototype.write=function(e){var n=this,i=t.prototype.write.call(this,e);return this.chunks.forEach(function(t){e.set(t,n.offset+i),i+=t.length},this),i},e}(_);l.MediaDataBox=W;var K=function(t){function e(e,n){t.call(this,e),this.dataReferenceIndex=n}return f(e,t),e.prototype.layout=function(e){return this.size=t.prototype.layout.call(this,e)+8,this.size},e.prototype.write=function(e){var n=t.prototype.write.call(this,e);return r(e,this.offset+n,0),r(e,this.offset+n+4,this.dataReferenceIndex),n+8},e}(_);l.SampleEntry=K;var q=function(t){function e(e,n,i,r,o,s){void 0===i&&(i=2),void 0===r&&(r=16),void 0===o&&(o=44100),void 0===s&&(s=null),t.call(this,e,n),this.channelCount=i,this.sampleSize=r,this.sampleRate=o,this.otherBoxes=s}return f(e,t),e.prototype.layout=function(e){var n=t.prototype.layout.call(this,e)+20;return this.otherBoxes&&this.otherBoxes.forEach(function(t){n+=t.layout(e+n)}),this.size=n},e.prototype.write=function(e){var n=t.prototype.write.call(this,e);return r(e,this.offset+n,0),r(e,this.offset+n+4,0),r(e,this.offset+n+8,this.channelCount<<16|this.sampleSize),r(e,this.offset+n+12,0),r(e,this.offset+n+16,this.sampleRate<<16),n+=20,this.otherBoxes&&this.otherBoxes.forEach(function(t){n+=t.write(e)}),n},e}(K);l.AudioSampleEntry=q,l.COLOR_NO_ALPHA_VIDEO_SAMPLE_DEPTH=24;var X=function(t){function e(e,n,i,r,o,s,a,u,h,c){if(void 0===o&&(o=""),void 0===s&&(s=72),void 0===a&&(a=72),void 0===u&&(u=1),void 0===h&&(h=l.COLOR_NO_ALPHA_VIDEO_SAMPLE_DEPTH),void 0===c&&(c=null),t.call(this,e,n),this.width=i,this.height=r,this.compressorName=o,this.horizResolution=s,this.vertResolution=a,this.frameCount=u,this.depth=h,this.otherBoxes=c,o.length>31)throw new Error("invalid compressor name")}return f(e,t),e.prototype.layout=function(e){var n=t.prototype.layout.call(this,e)+16+12+4+2+32+2+2;return this.otherBoxes&&this.otherBoxes.forEach(function(t){n+=t.layout(e+n)}),this.size=n},e.prototype.write=function(e){var n=t.prototype.write.call(this,e);r(e,this.offset+n,0),r(e,this.offset+n+4,0),r(e,this.offset+n+8,0),r(e,this.offset+n+12,0),n+=16,r(e,this.offset+n,this.width<<16|this.height),r(e,this.offset+n+4,a(this.horizResolution)),r(e,this.offset+n+8,a(this.vertResolution)),n+=12,r(e,this.offset+n,0),r(e,this.offset+n+4,this.frameCount<<16),n+=6,e[this.offset+n]=this.compressorName.length;for(var i=0;31>i;i++)e[this.offset+n+i+1]=i<this.compressorName.length?127&this.compressorName.charCodeAt(i):0;return n+=32,r(e,this.offset+n,this.depth<<16|65535),n+=4,this.otherBoxes&&this.otherBoxes.forEach(function(t){n+=t.write(e)}),n},e}(K);l.VideoSampleEntry=X;var $=function(t){function e(e,n){t.call(this,e),this.data=n}return f(e,t),e.prototype.layout=function(e){return this.size=t.prototype.layout.call(this,e)+this.data.length,this.size},e.prototype.write=function(e){var n=t.prototype.write.call(this,e);return e.set(this.data,this.offset+n),n+this.data.length},e}(_);l.RawTag=$},function(t,e,n){(function(e){var i,r=n(74),o=n(69),s=(o.BaseTransform,n(119));n(120),t.exports=i=function(){o.BaseParser.prototype.constructor.apply(this,arguments),this.parser=new s,this.parser.onFrame=this._onMp3Frame.bind(this),this.parser.onNoise=this._onNoise.bind(this),this.parser.onClose=this._onClose.bind(this),this._sampleRate=0,this._bitRate=0,this._timestamp=0},i.prototype=o.createBaseParser({constructor:i,_onMp3Frame:function(t,n,i){r("Found frame length "+t.length+" bitRate="+n+", sampleRate="+i);var s=new e(t),a=1152;s.meta={mimeType:"audio/mpeg",codecId:2,channels:2,bitRate:n,sampleRate:i,sampleSize:16},s.duration=a,s.timestamp=this._timestamp,this.enqueue(new o.Transfer(s,"buffer")),this._bitRate=n,this._timestamp+=a},_onNoise:function(){r("mp3 has noise")},_onClose:function(){r("parser closed")},_parse:function(t){return r("parse called"),t.data.empty?(r("empty transfer"),void this.enqueue(t)):void this.parser.push(new Uint8Array(t.data))}})}).call(e,n(70).Buffer)},function(t,e,n){var i=n(74),r=[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],o=[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],s=function(){function t(){this.buffer=null,this.bufferSize=0}return t.prototype.push=function(t){var e;if(this.bufferSize>0){var n=t.length+this.bufferSize;if(!this.buffer||this.buffer.length<n){var r=new Uint8Array(n);this.bufferSize>0&&r.set(this.buffer.subarray(0,this.bufferSize)),this.buffer=r}this.buffer.set(t,this.bufferSize),this.bufferSize=n,t=this.buffer,e=n}else e=t.length;i("push "+e);for(var o,s=0;e>s&&(o=this._parse(t,s,e))>0;)s+=o;var a=e-s;a>0&&(!this.buffer||this.buffer.length<a?this.buffer=new Uint8Array(t.subarray(s,e)):this.buffer.set(t.subarray(s,e))),this.bufferSize=a},t.prototype._parse=function(t,e,n){if(i("_parse"),e+2>n)return-1;if(255===t[e]||224===(224&t[e+1])){if(e+24>n)return-1;var s=t[e+1]>>3&3,a=t[e+1]>>1&3,u=t[e+2]>>4&15,h=t[e+2]>>2&3,c=!!(2&t[e+2]);if(1!==s&&0!==u&&15!==u&&3!==h){var l=3===s?3-a:3===a?3:4,f=1e3*r[14*l+u-1],d=3===s?0:2===s?1:2,p=o[3*d+h],g=c?1:0,_=3===a?(3===s?12:6)*f/p+g<<2:(3===s?144:72)*f/p+g|0;return e+_>n?-1:(this.onFrame&&(i("onFrame"),this.onFrame(t.subarray(e,e+_),f,p)),_)}}for(var m=e+2;n>m;){if(255===t[m-1]&&224===(224&t[m]))return this.onNoise&&this.onNoise(t.subarray(e,m-1)),m-e-1;m++}return-1},t.prototype.close=function(){this.bufferSize>0&&this.onNoise&&this.onNoise(this.buffer.subarray(0,this.bufferSize)),this.buffer=null,this.bufferSize=0,this.onClose&&this.onClose()},t}();t.exports=s},function(t,e){var n=1e9;t.exports={TIMESCALE_SECONDS:n}},function(t,e,n){var i,r=n(122),o=n(69),s=o.BaseSink,a=n(123);t.exports=i=function(t){if(s.prototype.constructor.call(this),!r.haveMediaSourceSupportMimeType(t))throw new Error("Local MediaSource doesn't support provided MIME type: "+t);var e;e=arguments.length>1?Array.prototype.slice.call(arguments):t instanceof Array?t:[t],this.mimeTypes=e,this.mediaSource=new MediaSource,this.mseWriter=new a(this.mediaSource),this.dataSources=[],this.selectedDataSourceIndex=0,this.mimeTypes.forEach(function(t){var e={mimeType:t};this.mseWriter.listen(e),this.dataSources.push(e)}.bind(this))},i.prototype=o.createBaseSink({constructor:i,_onData:function(){var t=this.dataSources[this.selectedDataSourceIndex];if(!t||!t.onData)throw new Error("DataSource is not existing or has no onData function defined");var e=this.dequeue();e&&t.onData(e.data)},getMediaSourceUrl:function(){return URL.createObjectURL(this.mediaSource)}})},function(t,e){var n;t.exports=n={haveGlobalWindow:function(){return"undefined"!=typeof window},haveMediaSourceExtensions:function(){return n.haveGlobalWindow()&&window.MediaSource},haveMediaSourceSupportMimeType:function(t){return n.haveMediaSourceExtensions()&&window.MediaSource.isTypeSupported(t)}}},function(t,e){var n=function(){function t(t,e){this.mediaSource=t,this.dataSource=e,this.dataSource.onData=this.pushData.bind(this),this.updateEnabled=!1,this.buffer=[],this.sourceBuffer=null,this.sourceBufferUpdatedBound=null}return t.prototype.allowWriting=function(){this.updateEnabled=!0,this.update()},t.prototype.pushData=function(t){this.buffer.push(t),this.update()},t.prototype.update=function(){if(this.updateEnabled&&0!==this.buffer.length){this.sourceBuffer||(this.sourceBuffer=this.mediaSource.addSourceBuffer(this.dataSource.mimeType),this.sourceBufferUpdatedBound=this._sourceBufferUpdated.bind(this),this.sourceBuffer.addEventListener("update",this.sourceBufferUpdatedBound)),this.updateEnabled=!1;var t=this.buffer.shift();if(null===t)return void this.sourceBuffer.removeEventListener("update",this.sourceBufferUpdatedBound);t.timestamp&&(this.sourceBuffer.timestampOffset=t.timestamp/1e9),this.sourceBuffer.appendBuffer(t)}},t.prototype._sourceBufferUpdated=function(t){this.updateEnabled=!0,this.update()},t.prototype.finish=function(){this.buffer.push(null),this.update()},t}(),i=function(){function t(t){this.bufferWriters=[],this.mediaSource=t,this.mediaSourceOpened=!1,this.mediaSource.addEventListener("sourceopen",function(t){this.mediaSourceOpened=!0,this.bufferWriters.forEach(function(t){t.allowWriting()})}.bind(this)),this.mediaSource.addEventListener("sourceend",function(t){this.mediaSourceOpened=!1}.bind(this))}return t.prototype.listen=function(t){var e=new n(this.mediaSource,t);this.bufferWriters.push(e),this.mediaSourceOpened&&e.allowWriting()},t}();t.exports=i},function(t,e,n){var i,r,o=n(69);r=function(t){o.BasePushSrc.prototype.constructor.call(this);var e=this.req=new XMLHttpRequest;e.open("GET",t,!0),e.responseType="arraybuffer",e.onload=function(t){this.enqueue(new o.Transfer(new Uint8Array(e.response),"binary")),this.enqueue(new o.Transfer(null,"binary"))}.bind(this),e.send()},r.prototype=o.createBasePushSrc({constructor:r}),t.exports=i={Src:r}},function(t,e,n){var i,r,o,s=n(69),a=n(126);n(76),r=function(t,e){s.prototype.constructor.call(this);var n=a.createReadStream(t,e);this.on("end",function(){n.close()}),this.addOutput(n)},r.prototype=s.create({constructor:r}),o=function(t,e){s.prototype.constructor.call(this);var n=a.createWriteStream(t,e);this.on("finish",function(){n.close()}),this.addInput(n)},o.prototype=s.create({constructor:o}),t.exports=i={Src:r,Sink:o}},function(t,e,n){var i=n(122);t.exports=i.haveGlobalWindow()?new(n(127)):n(!function(){var t=new Error('Cannot find module "fs"');throw t.code="MODULE_NOT_FOUND",t}())},function(t,e,n){var i;i=function(){function t(){return!1}function e(t){return!(!(t&&t.data instanceof Object)||n(t))}function n(t){return!!(t&&t.data instanceof ArrayBuffer)}function i(t,n){var i,r=t.length,o=n;for(i=0;r>i;++i){if(!e(o))throw new Error("ENOENT");o=o.data[t[i]]}return o}String.prototype.trim||!function(){var t=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;String.prototype.trim=function(){return this.replace(t,"")}}();var r=function(){var t=Date.now();this.root={mtime:t,ctime:t,atime:t,data:{}}};return r.prototype.join=function(){var t=[],e=arguments||[];return t=this.parse(Array.prototype.slice.call(e).join("/")),("/"===e[0][0]?"/":"")+t.join("/")},r.prototype.parse=function(t){var e=[];return t=t||"/",t.split(/\/+/).forEach(function(t){t=t.trim(),t.length&&"."!==t&&(".."===t?e.pop():e.push(t))}),e},r.prototype.fileSizeSI=function(t,e,n,i,r){return(e=Math,n=e.log,i=1e3,r=n(t)/n(i)|0,t/e.pow(i,r)).toFixed(r?2:0)+" "+(r?"kMGTPEZY"[--r]+"B":"Bytes")},r.prototype.fileSizeIEC=function(t,e,n,i,r){return(e=Math,n=e.log,i=1024,r=n(t)/n(i)|0,t/e.pow(i,r)).toFixed(r?2:0)+" "+(r?"KMGTPEZY"[--r]+"iB":"Bytes")},r.prototype.statSync=function(n){var r=this.parse(n),o=i(r,this.root),s=e(o);if(!o||!o.data)throw new Error("ENOENT");return{size:s?Object.keys(o.data).length:o.data.byteLength,ctime:new Date(o.ctime),mtime:new Date(o.mtime),atime:new Date(o.atime),isFile:function(){return!s},isDirectory:function(){return s},isBlockDevice:t,isCharacterDevice:t,isSymbolicLink:t,isFIFO:t,isSocket:t}},r.prototype.existsSync=function(t){var n,i=this.parse(t),r=i.length,o=this.root;for(n=0;r>n;++n){if(!e(o))return!1;o=o.data[i[n]]}return!!o},r.prototype.mkdirSync=function(t){var n=this.parse(t),r=i(n.slice(0,n.length-1),this.root),o=Date.now();if(!n.length||!e(r))throw new Error("ENODIR");r.data[n[n.length-1]]={data:{},ctime:o,mtime:o,atime:o},r.mtime=o},r.prototype.mkdirpSync=function(t){var r,o,s,a=this.parse(t),u=a.length;if(!a.length)throw new Error("ENODIR");for(o=0;u>o;++o){if(r=a.slice(0,o+1),s=i(r,this.root),n(s))throw new Error("ENODIR");e(s)||this.mkdirSync(r.join("/"))}},r.prototype.readdirSync=function(t){var n=this.parse(t),r=i(n,this.root);if(!e(r))throw new Error("ENODIR");return r.atime=Date.now(),Object.keys(r.data)},r.prototype.rmdirSync=function(t){var n=this.parse(t),r=i(n,this.root);if(dirname=n.pop(),parentDir=i(n,this.root),!e(r))throw new Error("ENODIR");if(Object.keys(r.data).length)throw new Error("ENOTEMPTY");delete parentDir.data[dirname],parentDir.mtime=Date.now()},r.prototype.rmrfSync=function(t){var n=this.parse(t),r=n.pop(),o=i(n,this.root);if(!e(o))throw new Error("ENODIR");r?delete o.data[r]:o.data={},o.mtime=Date.now()},r.prototype.writeFileSync=function(t,n,r){var o,s,a=this.parse(t),u=a.pop(),h=this.existsSync(t),c=i(a,this.root);if(!e(c))throw new Error("ENODIR");if(!u)throw new Error("EINVALIDPATH");if(r=r||{encoding:!0},"string"==typeof n){o=new ArrayBuffer(2*n.length);for(var l=new Uint16Array(o),f=0,d=n.length;d>f;++f)l[f]=n.charCodeAt(f)}else o=n;s=Date.now(),c.data[u]={data:o,ctime:s,mtime:s,atime:s},h||(c.mtime=s),c.atime=s},r.prototype.readFileSync=function(t,e){var r=this.parse(t),o=i(r,this.root),e=e||{encoding:!1};if(!n(o))throw new Error("ENOENT");return o.atime=Date.now(),e.encoding?String.fromCharCode.apply(null,new Uint16Array(o.data)):o.data},r.prototype.renameSync=function(t,n){var r=this.parse(t),o=i(r,this.root),s=i(r.slice(0,r.length-1),this.root),a=r[r.length-1],u=this.parse(n),h=i(u,this.root),c=i(u.slice(0,u.length-1),this.root),l=u[u.length-1],f=Date.now();if(!r.length||!u.length)throw new Error("ENOENT");if(!e(s||!e(c)))throw new Error("ENODIR");if(h)throw new Error("EEXISTS");c.data[l]=h=o,h.ctime=f,c.mtime=f,delete s.data[a],s.mtime=f},["stat","exists","readdir","mkdirp","mkdir","rmdir","rmrf","unlink"].forEach(function(t){r.prototype[t]=function(e,n){try{var i=this[t+"Sync"](e)}catch(r){return n(r)}return n(null,i)}}),["writeFile","readFile"].forEach(function(t){r.prototype[t]=function(e,n,i){i||(i=n,n=void 0);try{var r=this[t+"Sync"](e,n)}catch(o){return i(o)}return i(null,r)}}),["rename"].forEach(function(t){r.prototype[t]=function(e,n,i){try{var r=this[t+"Sync"](e,n)}catch(o){return i(o)}return i(null,r)}}),r}.call(e,n,e,t),!(void 0!==i&&(t.exports=i))},function(t,e){var n={HTTP:"http",RTMP:"rtmp",HLS:"hls"};t.exports=n},function(t,e){t.exports={AAC:"audio/aac",M3U8:"application/x-mpegURL",HLS:"application/vnd.apple.mpegurl",MP4A:"audio/mp4",MP3:"audio/mpeg",OGG:"audio/ogg",WAV:"audio/wav",WEBMA:"audio/webm",getTypeByExtension:function(t){var e={mp3:this.MP3,aac:this.AAC,mp4:this.MP4A,mp4a:this.MP4A,ogg:this.OGG,oga:this.OGG,opus:this.OGG,webm:this.WEBM,wav:this.WAV,m3u8:this.M3U8};return e[t]||null}}},function(t,e,n,i,r,o){function s(t,e,n){for(var i=-1,r=h(e),o=r.length;++i<o;){var s=r[i],a=t[s],u=n(a,e[s],s,t,e);(u===u?u===a:a!==a)&&(void 0!==a||s in t)||(t[s]=u)}return t}var a=n(i),u=n(r),h=n(o),c=u(function(t,e,n){return n?s(t,e,n):a(t,e)});t.exports=c},function(t,e,n,i,r){function o(t,e){return null==e?t:s(e,a(e),t)}var s=n(i),a=n(r);t.exports=o},function(t,e,n,i,r,o){function s(t){return function(e){return null==e?void 0:e[t]}}function a(t){return null!=t&&h(S(t))}function u(t,e){return t="number"==typeof t||_.test(t)?+t:-1,e=null==e?E:e,t>-1&&t%1==0&&e>t}function h(t){return"number"==typeof t&&t>-1&&t%1==0&&E>=t}function c(t){for(var e=f(t),n=e.length,i=n&&t.length,r=!!i&&h(i)&&(g(t)||p(t)),o=-1,s=[];++o<n;){var a=e[o];(r&&u(a,i)||y.call(t,a))&&s.push(a)}return s}function l(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function f(t){if(null==t)return[];l(t)||(t=Object(t));var e=t.length;e=e&&h(e)&&(g(t)||p(t))&&e||0;for(var n=t.constructor,i=-1,r="function"==typeof n&&n.prototype===t,o=Array(e),s=e>0;++i<e;)o[i]=i+"";for(var a in t)s&&u(a,e)||"constructor"==a&&(r||!y.call(t,a))||o.push(a);return o}var d=n(i),p=n(r),g=n(o),_=/^\d+$/,m=Object.prototype,y=m.hasOwnProperty,v=d(Object,"keys"),E=9007199254740991,S=s("length"),A=v?function(t){var e=null==t?void 0:t.constructor;return"function"==typeof e&&e.prototype===t||"function"!=typeof t&&a(t)?c(t):l(t)?v(t):[]}:c;t.exports=A},function(t,e,n,i,r,o){function s(t){return h(function(e,n){var i=-1,r=null==e?0:n.length,o=r>2?n[r-2]:void 0,s=r>2?n[2]:void 0,h=r>1?n[r-1]:void 0;for("function"==typeof o?(o=a(o,h,5),r-=2):(o="function"==typeof h?h:void 0,r-=o?1:0),s&&u(n[0],n[1],s)&&(o=3>r?void 0:o,r=1);++i<r;){var c=n[i];c&&t(e,c,o)}return e})}var a=n(i),u=n(r),h=n(o);t.exports=s},function(t,e,n,i){function r(t,e){return p(t,e,l)}function o(t){return function(e){return null==e?void 0:e[t]}}function s(t,e){return function(n,i){var r=n?g(n):0;if(!u(r))return t(n,i);for(var o=e?r:-1,s=h(n);(e?o--:++o<r)&&i(s[o],o,s)!==!1;);return n}}function a(t){return function(e,n,i){for(var r=h(e),o=i(e),s=o.length,a=t?s:-1;t?a--:++a<s;){var u=o[a];if(n(r[u],u,r)===!1)break}return e}}function u(t){return"number"==typeof t&&t>-1&&t%1==0&&f>=t}function h(t){return c(t)?t:Object(t)}function c(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}var l=n(i),f=9007199254740991,d=s(r),p=a(),g=o("length");t.exports=d}]))},function(t,e,n){var i=n(22),r=function(t,e){var n=e||{},r=n.bufferLen||4096,o=n.numChannels||2;this.context=t.context,this.node=(this.context.createScriptProcessor||this.context.createJavaScriptNode).call(this.context,r,o,o);var s=new i;s.postMessage({command:"init",config:{sampleRate:this.context.sampleRate,numChannels:o}});var a,u=!1;this.node.onaudioprocess=function(t){if(u){for(var e=[],n=0;o>n;n++)e.push(t.inputBuffer.getChannelData(n));s.postMessage({command:"record",buffer:e})}},this.configure=function(t){for(var e in t)t.hasOwnProperty(e)&&(n[e]=t[e])},this.record=function(){u=!0},this.stop=function(){u=!1},this.clear=function(){s.postMessage({command:"clear"})},this.getBuffer=function(t){a=t||n.callback,s.postMessage({command:"getBuffer"})},this.exportWAV=function(t,e){if(a=t||n.callback,e=e||n.type||"audio/wav",!a)throw new Error("Callback not set");s.postMessage({command:"exportWAV",type:e})},s.onmessage=function(t){var e=t.data;a(e)},t.connect(this.node),this.node.connect(this.context.destination)};r.forceDownload=function(t,e){var n=(window.URL||window.webkitURL).createObjectURL(t),i=window.document.createElement("a");i.href=n,i.download=e||"output.wav";var r=document.createEvent("Event");r.initEvent("click",!0,!0),i.dispatchEvent(r)},t.exports=r},function(t,e){t.exports=function(t){function e(i){if(n[i])return n[i].exports;var r=n[i]={exports:{},id:i,loaded:!1};return t[i].call(r.exports,r,r.exports,e),r.loaded=!0,r.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){function i(){return this._hooksPause.every(function(t){return t.call()})}function r(t){var e=t.resource_id||t.id||t.cid;if(!e)throw new Error("Your model should have a unique `id`, `cid` or `resource_id` property");return e}function o(t){C=t,t&&(x.AudioManagerStates=t.States)}function s(){var t=G();return p.call(this,!0).done(function(e){t.resolve(e.url)}).fail(function(){t.reject()}),t.promise()}function a(t){var e,n=this.options;return e={id:this.getId(),src:t.url,duration:$.result(n.duration),title:this.options.title,mimeType:t.mimeType,forceSingle:n.useSinglePlayer},C.createAudioPlayer(e,{streamUrlProvider:s.bind(this)})}function u(t,e){var n=e?"on":"off";t[n]("state-change",L,this)[n]("position-change",c,this)[n]("metadata",h,this)}function h(){this.trigger(Y.METADATA)}function c(){this._prevPosition!==this.currentTime()&&(this.trigger(Y.TIME),this._prevPosition=this.currentTime())}function l(){this._initAudioDefer&&(this._initAudioDefer.reject(),this._initAudioDefer=null,this.streamInfo=null)}function f(){l.call(this),this.controller&&(this._storedPosition=this.currentTime(),this.controller.kill(),this.controller=null,this.trigger(Y.RESET))}function d(){this._registerPlays=!0,this.pause(),this.trigger(Y.FINISH)}function p(t){var e=G(),n=this.streamInfo&&!t;return n?e.resolve(this.streamInfo):g.call(this).done(function(t){var n=q.choosePreferredStream(t,this.options);n?e.resolve(n):(this.trigger(Y.NO_PROTOCOL),F.warn("(%s) Could not match a protocol of given media descriptor to one of the supported protocols (%s), aborting attempt to play.",this.getId(),this.options.protocols),e.reject())}.bind(this)).fail(function(t){F.warn("(%s) Stream request failed with status: %d",this.getId(),t.status),_.call(this,t),m.call(this,t),e.reject()}.bind(this)),e.promise()}function g(){if(this.options.streamUrls&&!this._usedPrefetchUrls){var t,e=G();return this._usedPrefetchUrls=!0,t=$.result(this.options.streamUrls),e.resolve(t),e.promise()}return this.ajax({type:"GET",url:$.result(this.options.streamUrlsEndpoint),dataType:"json",async:this.options.asyncFetch,timeout:this.options.asyncFetch?nt:et})}function _(t){var e=t.status>=400&&-1!==(t.responseText||"").indexOf("geo_blocked");e&&this.trigger(Y.GEO_BLOCKED)}function m(t){0===t.status&&this.trigger(Y.NO_CONNECTION)}function y(){return this.controller&&this.controller.getCapabilities&&this.controller.getCapabilities()?this.controller.getCapabilities().needsUrlRefresh:!0}function v(t){if(!y.call(this))return!0;var e=this._initAudioDefer&&this._initAudioDefer.state(),n=q.streamValidForPlayingFrom(this.streamInfo,t);return this.controller&&this.controller.hasStreamUrlProvider&&this.controller.hasStreamUrlProvider()?!0:e&&("pending"===e||"resolved"===e&&n)}function E(t){t&&!this._bufferingTimeout?this._bufferingTimeout=window.setTimeout(function(){this._isBuffering=!0,this.trigger(Y.BUFFERRING_START)}.bind(this),it):t||(this._bufferingTimeout&&(window.clearTimeout(this._bufferingTimeout),this._bufferingTimeout=null),this._isBuffering&&(this._isBuffering=!1,this.trigger(Y.BUFFERRING_END)))}function S(){this.off(Y.TIME,this.seekTimeEventHandler),this.trigger(Y.SEEKED),this.seekTimeEventHandler=null}function A(){this._errorRecoveryFlagsResetTimeout=window.setTimeout(function(){this._errorRecoveryTime=null,this._errorRecoveryCounts=0}.bind(this),at)}function w(){this._errorRecoveryFlagsResetTimeout&&window.clearTimeout(this._errorRecoveryFlagsResetTimeout)}function T(){var t=this.isPlaying(),e=Date.now();return w.call(this),this._errorRecoveryTime&&this._errorRecoveryTime+ot>e&&this._errorRecoveryCounts>st?void this.trigger(Y.AUDIO_ERROR,this):(this._errorRecoveryTime=Date.now(),this._errorRecoveryCounts++,f.call(this),void(t&&this.play({seek:this.currentTime(),userInitiated:!1})))}function b(t){this.logAudioError({error_code:t,protocol:this.streamInfo?this.streamInfo.protocol:void 0,player_type:this.controller?this.controller.getType():void 0,host:this.streamInfo?X.getUrlHost(this.streamInfo.url):void 0,url:this.streamInfo?this.streamInfo.url:void 0})}function P(){var t,e=C.Errors;if(!this.controller)return F.error("(%s) Controller is null, aborting error handler.",this.getId(),this),b.call(this,null),void T.call(this);switch(t=this.controller&&this.controller.getErrorID(),F.error("(%s) %s",this.getId(),this.controller.getErrorMessage?this.controller.getErrorMessage():"Controller does not provide getErrorMessage()"),D(t,"MSE","GENERIC","HTML5_AUDIO_DECODE","HTML5_AUDIO_SRC_NOT_SUPPORTED","FLASH_PROXY","FLASH_RTMP_CONNECT_FAILED","FLASH_RTMP_CANNOT_PLAY_STREAM")&&b.call(this,t),t){case e.FLASH_PROXY_CANT_LOAD_FLASH:this.trigger(Y.FLASH_NOT_LOADED);break;case e.FLASH_PROXY_FLASH_BLOCKED:this.trigger(Y.FLASH_BLOCK);break;case e.FLASH_RTMP_CONNECT_FAILED:$.without(this.options.protocols,W.RTMP);case e.FLASH_RTMP_CANNOT_PLAY_STREAM:case e.FLASH_RTMP_CONNECT_CLOSED:case e.HTML5_AUDIO_NETWORK:case e.HTML5_AUDIO_ABORTED:case e.HTML5_AUDIO_DECODE:case e.HTML5_AUDIO_SRC_NOT_SUPPORTED:case e.GENERIC_AUDIO_ENDED_EARLY:case e.MSE_BAD_OBJECT_STATE:case e.MSE_NOT_SUPPORTED:case e.MSE_MP3_NOT_SUPPORTED:case e.MSE_HLS_NOT_VALID_PLAYLIST:case e.MSE_HLS_PLAYLIST_NOT_FOUND:case e.MSE_HLS_SEGMENT_NOT_FOUND:T.call(this);break;case e.GENERIC_AUDIO_OVERRUN:d.call(this);break;default:F.error("(%s) Unhandled audio error code: %s",this.getId(),t,this)}}function I(t,e){switch(this.options.debug&&O.call(this,t,e),t){case Y.PAUSE:this._isPlaying=!1,this._isPlayActionQueued=!1;break;case Y.PLAY:var n=e;this.toggleMute(J.muted),this.setVolume(J.volume),this._isPlaying=!1,this._isPlayActionQueued=!0,this._userInitiatedPlay=void 0!==n.userInitiated?!!n.userInitiated:!0,M.call(this);break;case Y.PLAY_START:this._isPlaying=!0,this._isPlayActionQueued=!1,this._registerPlays&&this.registerPlay();break;case Y.BUFFERRING_START:case Y.SEEK:this._isPlaying&&(this._isPlaying=!1,this._isPlayActionQueued=!0);break;case Y.BUFFERRING_END:case Y.SEEKED:this._isPlayActionQueued&&(this._isPlaying=!0,this._isPlayActionQueued=!1);break;case Y.NO_CONNECTION:this._hasNoConnection=!0,this._noConnectionSince=Date.now();break;case Y.NO_STREAMS:this.pause(),E.call(this,!1),l.call(this),N.call(this);break;case Y.STREAMS:this._noConnectionSince=null,this._hasNoConnection=!1;break;case Y.ONLINE:k.call(this);break;case Y.OFFLINE:}}function L(t){var e=C.States,n=C.Errors;switch(t){case e.IDLE:R.call(this),this.controller&&this.controller.getErrorID()===n.FLASH_PROXY_FLASH_BLOCKED&&this.trigger(Y.FLASH_UNBLOCK);break;case e.PAUSED:R.call(this),E.call(this,!1),this.seekTimeEventHandler&&this.isPaused()&&S.call(this),this.isPlaying()&&this.trigger(Y.PAUSE,{position:this.currentTime()});break;case e.PLAYING:R.call(this),E.call(this,!1),A.call(this),this.trigger(Y.PLAY_RESUME);break;case e.LOADING:case e.SEEKING:R.call(this),E.call(this,!0);break;case e.ENDED:R.call(this),d.call(this);break;case e.ERROR:E.call(this,!1),P.call(this)}this.trigger(Y.STATE_CHANGE,t)}function O(t,e){var n=this.options.title;n=n&&n.length?" ["+n.replace(/\s/g,"").substr(0,6)+"]":"",t===Y.STATE_CHANGE?F("(%s)%s Event: %s (%s)",this.getId(),n,t,e):t!==Y.TIME||this._loggedTime?t!==Y.TIME&&F("(%s)%s Event: %s",this.getId(),n,t):F("(%s)%s Event: %s %dms",this.getId(),n,t,this.currentTime()),this._loggedTime=t===Y.TIME}function R(){this._initAudioDefer&&this._initAudioDefer.resolve()}function D(t){return void 0===C.Errors[t]?!1:Array.prototype.slice.call(arguments,1).some(function(e){return 0===t.indexOf(e)})}function M(){function t(){var t=window.navigator.onLine;F("Navigator `onLine` status is now: "+t),window.setTimeout(function(){window.navigator.onLine===t&&this.trigger(t?Y.ONLINE:Y.OFFLINE)}.bind(this),500)}this._onlineEventsRegistered||(this._onlineEventsRegistered=!0,window.addEventListener("online",t.bind(this)),window.addEventListener("offline",t.bind(this)))}function k(){if(this.hasNoConnection()&&this._isPlayRetryQueued){var t=Date.now()-this._noConnectionSince;this._isPlayRetryQueued=!0,t<this.options.retryAfterNoConnectionEventTimeout&&this.play({userInitiated:!1})}}function N(){this.hasNoConnection()&&!this._userInitiatedPlay&&(this._isPlayRetryQueued=!0)}var x,C,F,U=n(1),B=n(6),H=n(8),j=n(9),G=n(2).Deferred,Y=n(7),V=n(14),z=n(10),W=n(15),K=n(16),q=n(18),X=n(12),$=n(13),Z=n(19),Q={},J={muted:!1,volume:1},tt={soundId:Q,duration:Q,title:null,registerEndpoint:Q,streamUrlsEndpoint:Q,resourceId:!1,debug:!1,asyncFetch:!0,useSinglePlayer:!0,protocols:[W.HLS,W.RTMP,W.HTTP],extensions:[V.MP3],maxBitrate:1/0,mediaSourceEnabled:!1,mseFirefox:!1,mseSafari:!1,eventLogger:null,logErrors:!0,logPerformance:!0,ajax:null,retryAfterNoConnectionEventTimeout:6e4,fadeOutOnPause:!1,fadeOutAlgo:Z.VolumeAutomator.Algos.EaseInOut},et=6e3,nt=6e3,it=400,rt=6e4,ot=6e3,st=3,at=3e4,ut=[];x=t.exports=function(t,e){if(1===arguments.length?e=t:x.setAudioManager(t),!C)throw new Error("SCAudio: AudioManager instance must be set with `SCAudio.setAudioManager()` or passed via the constructor");this.options=$.extend({},tt,e);var n=Object.keys(this.options).filter(function(t){return this.options[t]===Q},this);if(n.length)throw new Error("SCAudio: pass into constructor the following options: "+n.join(", "));K.prioritizeAndFilter(this.options),this.controller=null,this.streamInfo=null,this._userInitiatedPlay=this._registerPlays=!0,this._registerCounts=this._errorRecoveryCounts=0,this._isPlayActionQueued=this._onlineEventsRegistered=this._usedPrefetchUrls=this._isPlaying=this._isBuffering=this._hasNoConnection=!1,this._initAudioDefer=this._expirationTimeout=this._bufferingTimeout=this._errorRecoveryTime=this._errorRecoveryFlagsResetTimeout=this._storedPosition=this._prevPosition=this._noConnectionSince=null,this.options.debug&&(this._loggedTime=!1),this._modelListeners={},this._hooksPause=[],this.audioPerfMonitor=new H(this,this.logAudioPerformance.bind(this)),this.audioLogger=new B(this),this.volumeAutomator=new Z.VolumeAutomator(this),F=F||j(e.debug,"scaudio")},$.extend(x.prototype,z,{constructor:x,initAudio:function(){return this._initAudioDefer||(this._initAudioDefer=G(),p.call(this).done(function(t){var e=!0;this.streamInfo&&(e=!1),this.streamInfo=t,e&&this.trigger(Y.STREAMS),this.controller=a.call(this,t),u.call(this,this.controller,!0),L.call(this,this.controller.getState())}.bind(this)).fail(function(){this.trigger(Y.NO_STREAMS)}.bind(this)),this._initAudioDefer.done(function(){this.trigger(Y.CREATED)}.bind(this))),this._initAudioDefer.promise()},registerPlay:function(){var t=this.options.soundId,e=!1;return-1===ut.indexOf(t)&&(ut.push(t),window.setTimeout(function(){var e=ut.indexOf(t);e>-1&&ut.splice(e,1)},rt),this.ajax({type:"POST",url:$.result(this.options.registerEndpoint),dataType:"json"}),this._registerCounts++,this._registerPlays=!1,this.trigger(Y.REGISTERED),e=!0),e},toggle:function(){
this[this.isPaused()?"play":"pause"]()},play:function(t){var e;if(t&&null!=t.seek)e=t.seek;else{if(this.isPlaying())return;e=this.currentTime()}t=$.extend({},t,{position:e}),this.trigger(Y.PLAY,t),v.call(this,e)||(f.call(this),this._isPlayActionQueued=!0),this.initAudio().done(function(){this._isPlayActionQueued&&(this._storedPosition=null,this.trigger(Y.PLAY_START,t),this.controller&&this.controller.play(e))}.bind(this)),E.call(this,!0)},pause:function(t){this.isPaused()||(t=$.extend({},t,{position:this.currentTime()}),i.call(this)&&(this.trigger(Y.PAUSE,t),this.controller&&this.controller.pause()))},registerHook:function(t,e){switch(t){case"pause":this._hooksPause.push(e);break;default:throw new Error("can`t register hook for "+t)}},getListenTime:function(){return this.audioLogger?this.audioLogger.getListenTime():0},dispose:function(){this.audioLogger=null,this.audioPerfMonitor=null,$.without(ut,this.options.soundId),window.clearTimeout(this._bufferingTimeout),l.call(this),this.controller&&(this.controller.kill(),this.controller=null),delete this.controller,this.trigger(Y.DESTROYED),this.off()},seek:function(t){return this.controller?t>=$.result(this.options.duration)?void d.call(this):(this.seekTimeEventHandler&&this.off(Y.TIME,this.seekTimeEventHandler),this.seekTimeEventHandler=$.after(2,function(){S.call(this)}.bind(this)),this.on(Y.TIME,this.seekTimeEventHandler),this.trigger(Y.SEEK,{from:this.currentTime(),to:t}),this.isPlaying()&&!v.call(this,t)?(f.call(this),void this.play({seek:t})):void this.controller.seek(t)):void 0},seekRelative:function(t){this.controller&&this.seek(this.currentTime()+t)},currentTime:function(){return this._storedPosition?this._storedPosition:this.controller?this.controller.getCurrentPosition():0},loadProgress:function(){var t=0;return this.controller&&(t=this.controller.getLoadedPosition()/this.controller.getDuration(),t=t>=.99?1:t),t},buffered:function(){return this.controller&&this.controller.getDuration()||0},isPaused:function(){return!this.isPlaying()},isBuffering:function(){return this._isBuffering},isPlaying:function(){return this._isPlayActionQueued||this._isPlaying},isLoading:function(){return!(!this.controller||this.controller.getState()!==C.States.LOADING)},hasNoConnection:function(){return!!this._hasNoConnection},hasStreamInfo:function(){return!!this.streamInfo},toggleMute:function(t){x.toggleMute(t)},isMuted:function(){return x.isMuted()},setVolume:function(t){x.setVolume(t)},getVolume:function(){return x.getVolume()},logAudioPerformance:function(t){this.getEventLogger()&&this.options.logPerformance&&this.getEventLogger().audioPerformance(t)},logAudioError:function(t){this.getEventLogger()&&this.options.logErrors&&this.getEventLogger().audioError(t)},getAudioManagerStates:function(){return C.States},getId:function(){return this.options.resourceId||this.options.soundId},getEventLogger:function(){return this.options.eventLogger},registerModelEventListener:function(t,e){var n=r(t);if(this._modelListeners[n])throw new Error("Data model is already registered (forgot to unregister it or registering twice?)");this._modelListeners[n]=e=e.bind(this,t),this.on("all",e)},unregisterModelEventListener:function(t){var e=r(t);this._modelListeners[e]&&(this.off("all",this._modelListeners[e]),delete this._modelListeners[e])},ajax:function(t){return this.options.ajax?this.options.ajax(t):U(t)},trigger:function(t,e){I.call(this,t,e),z.trigger.call(this,t,e)}}),$.extend(x,{getSettings:function(){return J},setSettings:function(t){$.extend(J,t)},setAudioManager:o,setAudioManagerOnce:$.once(o),toggleMute:function(t){J.muted=void 0===t?!J.muted:!!t,C&&C.setVolume(J.muted?0:1)},isMuted:function(){return J.muted},setVolume:function(t){J.volume=void 0===t?1:t,C&&C.setVolume(J.volume)},getVolume:function(){return J.volume},Extensions:V,Protocols:W,Events:Y,BUFFER_DELAY:it,PLAY_REGISTRATION_TIMEOUT:rt})},function(t,e,n){var i=n(2).Deferred,r=4;t.exports=function(t){var e,n,o,s,a,u,h,c;t&&(o=t.data||null,n=t.url||"",e=t.type||"GET",s=t.dataType||"text",a=t.async,u=t.timeout,h=t.beforeSend||null);var l=i();a=a!==!1;var f=new XMLHttpRequest;return f.open(e,n,a),a&&(f.responseType="text"),h&&h(f),f.onreadystatechange=function(){if(f.readyState===r)if(clearTimeout(c),0!==f.status&&f.status<400){var t=f.responseText;if("json"===s)try{t=JSON.parse(t)}catch(e){return void l.reject(f)}l.resolve(t)}else l.reject(f)},null!=u&&(c=setTimeout(function(){f.readyState!==r&&(f.abort(),l.reject(f))},u)),f.send(o),l.promise()}},function(t,e,n){t.exports=n(3)},function(t,e,n){/*!
		* jquery-deferred
		* Copyright(c) 2011 Hidden <zzdhidden@gmail.com>
		* MIT Licensed
		*/
var i=t.exports=n(4),r=Array.prototype.slice;i.extend({Deferred:function(t){var e=[["resolve","done",i.Callbacks("once memory"),"resolved"],["reject","fail",i.Callbacks("once memory"),"rejected"],["notify","progress",i.Callbacks("memory")]],n="pending",r={state:function(){return n},always:function(){return o.done(arguments).fail(arguments),this},then:function(){var t=arguments;return i.Deferred(function(n){i.each(e,function(e,r){var s=r[0],a=t[e];o[r[1]](i.isFunction(a)?function(){var t=a.apply(this,arguments);t&&i.isFunction(t.promise)?t.promise().done(n.resolve).fail(n.reject).progress(n.notify):n[s+"With"](this===o?n:this,[t])}:n[s])}),t=null}).promise()},promise:function(t){return null!=t?i.extend(t,r):r}},o={};return r.pipe=r.then,i.each(e,function(t,i){var s=i[2],a=i[3];r[i[1]]=s.add,a&&s.add(function(){n=a},e[1^t][2].disable,e[2][2].lock),o[i[0]]=s.fire,o[i[0]+"With"]=s.fireWith}),r.promise(o),t&&t.call(o,o),o},when:function(t){var e,n,o,s=0,a=r.call(arguments),u=a.length,h=1!==u||t&&i.isFunction(t.promise)?u:0,c=1===h?t:i.Deferred(),l=function(t,n,i){return function(o){n[t]=this,i[t]=arguments.length>1?r.call(arguments):o,i===e?c.notifyWith(n,i):--h||c.resolveWith(n,i)}};if(u>1)for(e=new Array(u),n=new Array(u),o=new Array(u);u>s;s++)a[s]&&i.isFunction(a[s].promise)?a[s].promise().done(l(s,o,a)).fail(c.reject).progress(l(s,n,e)):--h;return h||c.resolveWith(o,a),c.promise()}})},function(t,e,n){function i(t){var e=s[t]={};return r.each(t.split(o),function(t,n){e[n]=!0}),e}var r=t.exports=n(5),o=/\s+/,s={};r.Callbacks=function(t){t="string"==typeof t?s[t]||i(t):r.extend({},t);var e,n,o,a,u,h,c=[],l=!t.once&&[],f=function(i){for(e=t.memory&&i,n=!0,h=a||0,a=0,u=c.length,o=!0;c&&u>h;h++)if(c[h].apply(i[0],i[1])===!1&&t.stopOnFalse){e=!1;break}o=!1,c&&(l?l.length&&f(l.shift()):e?c=[]:d.disable())},d={add:function(){if(c){var n=c.length;!function i(e){r.each(e,function(e,n){var o=r.type(n);"function"===o?t.unique&&d.has(n)||c.push(n):n&&n.length&&"string"!==o&&i(n)})}(arguments),o?u=c.length:e&&(a=n,f(e))}return this},remove:function(){return c&&r.each(arguments,function(t,e){for(var n;(n=r.inArray(e,c,n))>-1;)c.splice(n,1),o&&(u>=n&&u--,h>=n&&h--)}),this},has:function(t){return r.inArray(t,c)>-1},empty:function(){return c=[],this},disable:function(){return c=l=e=void 0,this},disabled:function(){return!c},lock:function(){return l=void 0,e||d.disable(),this},locked:function(){return!l},fireWith:function(t,e){return e=e||[],e=[t,e.slice?e.slice():e],!c||n&&!l||(o?l.push(e):f(e)),this},fire:function(){return d.fireWith(this,arguments),this},fired:function(){return!!n}};return d}},function(t,e){function n(t){return null==t?String(t):c[h.call(t)]||"object"}function i(t){return"function"===u.type(t)}function r(t){return"array"===u.type(t)}function o(t,e,n){var r,o=0,s=t.length,a=void 0===s||i(t);if(n)if(a){for(r in t)if(e.apply(t[r],n)===!1)break}else for(;s>o&&e.apply(t[o++],n)!==!1;);else if(a){for(r in t)if(e.call(t[r],r,t[r])===!1)break}else for(;s>o&&e.call(t[o],o,t[o++])!==!1;);return t}function s(t){return!(!t||"object"!==u.type(t))}function a(){var t,e,n,i,r,o,s=arguments[0]||{},a=1,h=arguments.length,c=!1;for("boolean"==typeof s&&(c=s,s=arguments[1]||{},a=2),"object"==typeof s||u.isFunction(s)||(s={}),h===a&&(s=this,--a);h>a;a++)if(null!=(t=arguments[a]))for(e in t)n=s[e],i=t[e],s!==i&&(c&&i&&(u.isPlainObject(i)||(r=u.isArray(i)))?(r?(r=!1,o=n&&u.isArray(n)?n:[]):o=n&&u.isPlainObject(n)?n:{},s[e]=u.extend(c,o,i)):void 0!==i&&(s[e]=i));return s}var u=t.exports={type:n,isArray:r,isFunction:i,isPlainObject:s,each:o,extend:a,noop:function(){}},h=Object.prototype.toString,c={};"Boolean Number String Function Array Date RegExp Object".split(" ").forEach(function(t){c["[object "+t+"]"]=t.toLowerCase()})},function(t,e,n){function i(t){this.listenTime+=t.from-this.currentTime,this.currentTime=t.to}function r(t){this.listenTime+=t.position-this.currentTime,this.currentTime=t.position}function o(t){this.currentTime=t.position}var s,a=n(7);s=t.exports=function(t){this.scAudio=t,this.listenTime=0,this.currentTime=0,this.scAudio.on(a.SEEK,i,this).on(a.PLAY_START,o,this).on(a.PAUSE,r,this)},s.prototype={constructor:s,getListenTime:function(){return this.listenTime+this.scAudio.currentTime()-this.currentTime}}},function(t,e){var n={CREATED:"created",STATE_CHANGE:"state-change",DESTROYED:"destroyed",PLAY:"play",PLAY_START:"play-start",PLAY_RESUME:"play-resume",METADATA:"metadata",PAUSE:"pause",FINISH:"finish",RESET:"reset",SEEK:"seek",SEEKED:"seeked",GEO_BLOCKED:"geo_blocked",BUFFERRING_START:"buffering_start",BUFFERRING_END:"buffering_end",FLASH_NOT_LOADED:"flash_not_loaded",FLASH_BLOCK:"flash_blocked",FLASH_UNBLOCK:"flash_unblocked",AUDIO_ERROR:"audio_error",TIME:"time",NO_STREAMS:"no_streams",STREAMS:"streams",NO_PROTOCOL:"no_protocol",NO_CONNECTION:"no_connection",REGISTERED:"registered",ONLINE:"online",OFFLINE:"offline"};t.exports=n},function(t,e,n){function i(){return this.scAudio.controller?this.controller?void m.warn("(%s) Setup was called while it was already initialized (returned with a no-op)",this.scAudio.getId()):(m("(%s) Initialized",this.scAudio.getId()),this.controller=this.scAudio.controller,this.protocol=this.scAudio.streamInfo.protocol,void(this.host=S.getUrlHost(this.scAudio.streamInfo.url))):void m.warn("Can´t initialize when controller is null")}function r(){this.controller&&(m("(%s) Reset",this.scAudio.getId()),this.controller=this.protocol=this.host=null,this.timeToPlayMeasured=!1)}function o(t){var e=this.scAudio.getAudioManagerStates();t===e.LOADING?this.timeToPlayMeasured&&f.call(this):A.isNull(this.bufferingStartTime)||d.call(this)}function s(){this.metadataLoadStartTime=Date.now()}function a(){return A.isNull(this.metadataLoadStartTime)?void m.warn("(%s) onMetadataEnd was called without onMetadataStart being called before.",this.scAudio.getId()):(this.log({type:"metadata",latency:Date.now()-this.metadataLoadStartTime}),void(this.metadataLoadStartTime=null))}function u(){this.playClickTime=Date.now()}function h(){if(!this.timeToPlayMeasured){if(A.isNull(this.playClickTime))return void m.warn("(%s) onPlayResume was called without onPlayStart being called before.",this.scAudio.getId());this.log({type:"play",latency:Date.now()-this.playClickTime}),this.playClickTime=null,this.timeToPlayMeasured=!0}}function c(){this.scAudio.isPaused()||(this.seekStartTime=Date.now())}function l(){if(!this.scAudio.isPaused()){if(A.isNull(this.seekStartTime))return void m.warn("(%s) onSeekEnd was called without onSeekStart being called before.",this.scAudio.getId());this.log({type:"seek",latency:Date.now()-this.seekStartTime}),this.seekStartTime=null}}function f(){this.bufferingStartTime||(this.bufferingStartTime=Date.now())}function d(){return A.isNull(this.bufferingStartTime)?void m.warn("(%s) onBufferingEnd was called without onBufferingStart being called before.",this.scAudio.getId()):(p.call(this),void(this.bufferingStartTime=null))}function p(){A.isNull(this.bufferingStartTime)||(A.isNull(this.bufferingTimeAccumulated)&&(this.bufferingTimeAccumulated=0),this.bufferingTimeAccumulated+=Date.now()-this.bufferingStartTime)}function g(){p.call(this),A.isNull(this.bufferingTimeAccumulated)||(this.log({type:"buffer",latency:this.bufferingTimeAccumulated}),this.bufferingStartTime=this.bufferingTimeAccumulated=null)}var _,m,y=n(9),v=n(7),E=n(10),S=n(12),A=n(13);_=t.exports=function(t,e){this.scAudio=t,this.logFn=e,this.controller=null,this.reset(),m=m||y(t.options.debug,"audioperf"),t.on(v.CREATED,i,this).on(v.RESET,r,this).on(v.DESTROYED,r,this).on(v.SEEK,c,this).on(v.SEEKED,l,this).on(v.PLAY,u,this).on(v.PLAY_START,s,this).on(v.PLAY_RESUME,h,this).on(v.PAUSE,g,this).on(v.FINISH,g,this).on(v.STATE_CHANGE,o,this).on(v.METADATA,a,this)},A.extend(_.prototype,E,{constructor:_,log:function(t){return this.controller?(A.extend(t,{protocol:this.protocol,host:this.host,playertype:this.controller.getType()}),m("(%s) %s latency: %d protocol: %s host: %s playertype: %s",this.scAudio.getId(),t.type,t.latency,t.protocol,t.host,t.playertype),void this.logFn(t)):void m.warn("(%s) Monitor log was called while controller is null (returned with a no-op)",this.scAudio.getId())},reset:function(){this.bufferingStartTime=this.bufferingTimeAccumulated=this.playClickTime=this.seekStartTime=this.metadataLoadStartTime=null,this.timeToPlayMeasured=!1}})},function(t,e){function n(){function t(t,n){for(var i,r=arguments.length,o=Array(r>2?r-2:0),s=2;r>s;s++)o[s-2]=arguments[s];"string"==typeof n?n=" "+n:(o.unshift(n),n=""),(i=window.console)[t].apply(i,[e()+" |"+c+"%c"+n].concat(l,o))}function e(){var t=new Date,e=null===h?0:t-h;return h=+t,"%c"+r(t.getHours())+":"+r(t.getMinutes())+":"+r(t.getSeconds())+"."+i(t.getMilliseconds(),"0",3)+"%c (%c"+i("+"+e+"ms"," ",8)+"%c)"}var n=arguments.length<=0||void 0===arguments[0]?!0:arguments[0],o=arguments.length<=1||void 0===arguments[1]?"":arguments[1];if(!n)return s;var h=null,c=a(o),l=["color: green","color: grey","color: blue","color: grey",u(o),""],f=t.bind(null,"log");return f.log=f,["info","warn","error"].forEach(function(e){f[e]=t.bind(null,e)}),f}function i(t,e,n){return o(e,n-(""+t).length)+t}function r(t){return i(t,"0",2)}function o(t,e){return e>0?new Array(e+1).join(t):""}function s(){}function a(t){return t?"%c"+t:"%c"}t.exports=n,s.log=s.info=s.warn=s.error=s;var u=function(){var t=["#51613C","#447848","#486E5F","#787444","#6E664E"],e=0;return function(n){return n?"background-color:"+t[e++%t.length]+";color:#fff;border-radius:3px;padding:2px 4px;font-family:sans-serif;text-transform:uppercase;font-size:9px;margin:0 4px":""}}()},function(t,e,n){t.exports=n(11)},function(t,e,n){!function(){function n(){return{keys:Object.keys||function(t){if("object"!=typeof t&&"function"!=typeof t||null===t)throw new TypeError("keys() called on a non-object");var e,n=[];for(e in t)t.hasOwnProperty(e)&&(n[n.length]=e);return n},uniqueId:function(t){var e=++a+"";return t?t+e:e},has:function(t,e){return o.call(t,e)},each:function(t,e,n){if(null!=t)if(r&&t.forEach===r)t.forEach(e,n);else if(t.length===+t.length)for(var i=0,o=t.length;o>i;i++)e.call(n,t[i],i,t);else for(var s in t)this.has(t,s)&&e.call(n,t[s],s,t)},once:function(t){var e,n=!1;return function(){return n?e:(n=!0,e=t.apply(this,arguments),t=null,e)}}}}var i,r=Array.prototype.forEach,o=Object.prototype.hasOwnProperty,s=Array.prototype.slice,a=0,u=n();i={on:function(t,e,n){if(!c(this,"on",t,[e,n])||!e)return this;this._events||(this._events={});var i=this._events[t]||(this._events[t]=[]);return i.push({callback:e,context:n,ctx:n||this}),this},once:function(t,e,n){if(!c(this,"once",t,[e,n])||!e)return this;var i=this,r=u.once(function(){i.off(t,r),e.apply(this,arguments)});return r._callback=e,this.on(t,r,n)},off:function(t,e,n){var i,r,o,s,a,h,l,f;if(!this._events||!c(this,"off",t,[e,n]))return this;if(!t&&!e&&!n)return this._events={},this;for(s=t?[t]:u.keys(this._events),a=0,h=s.length;h>a;a++)if(t=s[a],o=this._events[t]){if(this._events[t]=i=[],e||n)for(l=0,f=o.length;f>l;l++)r=o[l],(e&&e!==r.callback&&e!==r.callback._callback||n&&n!==r.context)&&i.push(r);i.length||delete this._events[t]}return this},trigger:function(t){if(!this._events)return this;var e=s.call(arguments,1);if(!c(this,"trigger",t,e))return this;var n=this._events[t],i=this._events.all;return n&&l(n,e),i&&l(i,arguments),this},stopListening:function(t,e,n){var i=this._listeners;if(!i)return this;var r=!e&&!n;"object"==typeof e&&(n=this),t&&((i={})[t._listenerId]=t);for(var o in i)i[o].off(e,n,this),r&&delete this._listeners[o];return this}};var h=/\s+/,c=function(t,e,n,i){if(!n)return!0;if("object"==typeof n){for(var r in n)t[e].apply(t,[r,n[r]].concat(i));return!1}if(h.test(n)){for(var o=n.split(h),s=0,a=o.length;a>s;s++)t[e].apply(t,[o[s]].concat(i));return!1}return!0},l=function(t,e){var n,i=-1,r=t.length,o=e[0],s=e[1],a=e[2];switch(e.length){case 0:for(;++i<r;)(n=t[i]).callback.call(n.ctx);return;case 1:for(;++i<r;)(n=t[i]).callback.call(n.ctx,o);return;case 2:for(;++i<r;)(n=t[i]).callback.call(n.ctx,o,s);return;case 3:for(;++i<r;)(n=t[i]).callback.call(n.ctx,o,s,a);return;default:for(;++i<r;)(n=t[i]).callback.apply(n.ctx,e)}},f={listenTo:"on",listenToOnce:"once"};u.each(f,function(t,e){i[e]=function(e,n,i){var r=this._listeners||(this._listeners={}),o=e._listenerId||(e._listenerId=u.uniqueId("l"));return r[o]=e,"object"==typeof n&&(i=this),e[t](n,i,this),this}}),i.bind=i.on,i.unbind=i.off,i.mixin=function(t){var e=["on","once","off","trigger","stopListening","listenTo","listenToOnce","bind","unbind"];return u.each(e,function(e){t[e]=this[e]},this),t},"undefined"!=typeof t&&t.exports&&(e=t.exports=i),e.BackboneEvents=i}(this)},function(t,e){var n={getUrlParams:function(t){var e={},n=t.indexOf("?");return n>-1&&t.substr(n+1).split("&").forEach(function(t){var n=t.split("=");e[n[0]]=n[1]}),e},getUrlHost:function(t){var e,n=t.split("//");return e=n[0]===t?n[0].split("/")[0]:n[1]?n[1].split("/")[0]:""}};t.exports=n},function(t,e){var n={extend:function(t){var e=Array.prototype.slice.call(arguments,1);return e.forEach(function(e){if(e)for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])}),t},each:function(t,e,n){Object.keys(t).forEach(function(i){e.call(n||null,t[i],i)})},without:function(t,e){var n=t.indexOf(e);n>-1&&t.splice(n,1)},result:function(t){var e=t;return n.isFunction(e)&&(e=t()),e},isFunction:function(t){return"function"==typeof t},after:function(t,e){return function(){return--t<1?e.apply(this,arguments):void 0}},isNull:function(t){return null===t},once:function(t){var e,n=!1;return function(){return n?e:(n=!0,void(e=t.apply(this,arguments)))}}};t.exports=n},function(t,e){var n={AAC:"aac",MP3:"mp3",OGG:"ogg",OPUS:"opus",WAV:"wav"};t.exports=n},function(t,e){var n={HTTP:"http",RTMP:"rtmp",HLS:"hls"};t.exports=n},function(t,e,n){function i(t){return h.supportsMediaSourceExtensions()&&t.mediaSourceEnabled&&(h.isChrome()&&h.getChromeVersion()>=35||h.isFirefox()&&t.mseFirefox||h.isSafari()&&t.mseSafari)}function r(t){return function(e){var n=!1;switch(e){case u.RTMP:n=h.supportsFlash();break;case u.HTTP:n=h.supportsHTML5Audio()||h.supportsFlash();break;case u.HLS:n=i(t)}return n}}function o(t){return h.isSafari()||h.isFirefox()?[u.HLS,u.HTTP,u.RTMP]:t}function s(t){t.protocols=o(t.protocols).filter(r(t))}var a,u=n(15),h=n(17);a={prioritizeAndFilter:s},t.exports=a},function(t,e){function n(t){return t.test(window.navigator.userAgent.toLowerCase())}function i(t,e){try{return window.navigator.userAgent.toLowerCase().match(t)[e]}catch(n){return null}}function r(){try{return parseInt(i(/chrom(e|ium)\/([0-9]+)\./,2),10)}catch(t){return NaN}}function o(){return!h()&&n(/safari/)}function s(){return o()&&n(/version\/7\.1/)}function a(){return o()&&n(/version\/8/)&&!n(/version\/80/)}function u(){return o()&&n(/version\/9\./)}function h(){return n(/chrom(e|ium)/)}function c(){return n(/firefox/)}function l(){return!!window.MediaSource&&(window.MediaSource.isTypeSupported("audio/mpeg")||window.MediaSource.isTypeSupported("audio/mp4"))}function f(){try{return window.hasOwnProperty("Audio")&&!!(new window.Audio).canPlayType("audio/mpeg")}catch(t){return!1}}function d(){try{var t=o()&&n(/version\/5\.0/),e=window.hasOwnProperty("Audio")&&(!!(new window.Audio).canPlayType('audio/x-mpegURL; codecs="mp3"')||!!(new window.Audio).canPlayType('vnd.apple.mpegURL; codecs="mp3"'));return!t&&e}catch(i){return!1}}function p(){return _(g())>=y}function g(){var t,e,n,i;if("undefined"!=typeof window.ActiveXObject)try{i=new window.ActiveXObject("ShockwaveFlash.ShockwaveFlash"),i&&(t=i.GetVariable("$version"))}catch(r){t=null}else window.navigator&&window.navigator.plugins&&window.navigator.plugins.length>0&&(n="application/x-shockwave-flash",e=window.navigator.mimeTypes,e&&e[n]&&e[n].enabledPlugin&&e[n].enabledPlugin.description&&(t=e[n].enabledPlugin.description));return t}function _(t){if(!t)return 0;var e=t.match(/\d\S+/)[0].replace(/,/g,".").split(".");return parseFloat([e[0],e[1]].join("."))||0}var m,y=9;m={flashPlugin:g,isSafari:o,isSafari71:s,isSafari8:a,isSafari9:u,isChrome:h,getChromeVersion:r,isFirefox:c,supportsNativeHLSAudio:d,supportsHTML5Audio:f,supportsFlash:p,supportsMediaSourceExtensions:l},t.exports=m},function(t,e,n){function i(t){var e=f.getUrlHost(t);return p.every(function(t){return 0!==e.indexOf(t)})}function r(t,e){return!(t===c.HLS&&!i(e))}function o(t,e){if(!t)return!1;var n=t.issuedAt+s(t.protocol,t.duration);return a(t.protocol)?Date.now()+t.duration-(e||0)<n:Date.now()<n}function s(t,e){var n=a(t);return g+(n?l.result(e):0)}function a(t){return t===c.HTTP||t===c.HLS}function u(t,e){function n(t){return-1*t}function i(t,e){return Math.abs(e-m)-Math.abs(t-m)}var o,s,a,u,h,c,f,d,p,g,_={},m=e.maxBitrate,y=e.protocols,v=e.extensions;for(l.each(t,function(t,e){var n=e.split("_"),i=n[0],r=n[1],o=n[2];_[i]=_[i]||{},_[i][r]=_[i][r]||{},_[i][r][o]=t}),h=0,c=y.length;c>h;++h)for(u=y[h],d=0,p=v.length;p>d;++d)if(f=v[d],_[u]&&_[u][f]){if(o=Object.keys(_[u][f]).map(Number).sort(n),s=m===1/0,a=m===-(1/0),m=s||a?o[s?"pop":"shift"]():o.sort(i).pop(),g=_[u][f][m],!r(u,g))continue;return{url:g,bitrate:m,protocol:u,extension:f,issuedAt:Date.now(),duration:l.result(e.duration)}}return null}var h,c=n(15),l=n(13),f=n(12),d=.9,p=[],g=Math.floor(12e4*d);h={choosePreferredStream:u,streamValidForPlayingFrom:o},t.exports=h},function(t,e,n){var i,r,o=n(7),s=n(13),a={Linear:0,EaseOut:1,EaseInOut:2},u=600,h=25;t.exports=i={},i.VolumeAutomator=r=function(t){this.scAudio=t,this.fadeOutAlgo=this.scAudio.options.fadeOutAlgo,this.fadeOutTimer=null,this.initialVolume=void 0,this.scAudio.options.fadeOutOnPause&&r.isSupported()&&(this.scAudio.on(o.PLAY,this.onPlay,this),this.scAudio.registerHook("pause",this.hookPause.bind(this)))},i.VolumeAutomator.isSupported=function(){var t=new window.Audio,e=t.volume,n=0===e?1:e/2;return t.volume=n,t.volume===n},i.VolumeAutomator.Algos=a,s.extend(r.prototype,{fadeOutAndPause:function(){var t=Date.now(),e=function(){var n,i=(Date.now()-t)/u,r=this.initialVolume;if(i>=1)this.scAudio.controller&&this.scAudio.controller.pause(),this.cancelFadeout();else{switch(this.fadeOutAlgo){case a.Linear:n=r*(1-i);break;case a.EaseOut:n=r*(1/(10*(i+.1))-.05);break;case a.EaseInOut:default:n=r*(Math.cos(i*Math.PI)/2+.5)}this.scAudio.setVolume(n),window.clearTimeout(this.fadeOutTimer),this.fadeOutTimer=window.setTimeout(e,h)}}.bind(this);this.initialVolume=this.scAudio.getVolume(),e()},cancelFadeout:function(){this.fadeOutTimer&&(window.clearTimeout(this.fadeOutTimer),this.fadeOutTimer=null,this.scAudio.setVolume(this.initialVolume),this.initialVolume=void 0)},hookPause:function(t){return this.fadeOutAndPause(),!1},onPlay:function(){this.cancelFadeout()}})}])},function(t,e){}])});
//# sourceMappingURL=sdk.js.map

/***/ }),
/* 1 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__controls_toast__ = __webpack_require__(5);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__settings__ = __webpack_require__(2);



class Utils {

     /**
     * Simple function to convert milliseconds to a string with minutes and seconds
     * @param {*int} millis - time in milliseconds
     */
    static convertMillisecondsToDigitalClock(ms) {
        let hours = Math.floor(ms / 3600000), // 1 Hour = 36000 Milliseconds
        minutes = Math.floor((ms % 3600000) / 60000), // 1 Minutes = 60000 Milliseconds
        seconds = Math.floor(((ms % 360000) % 60000) / 1000) // 1 Second = 1000 Milliseconds
        return {
            hours : hours,
            minutes : minutes,
            seconds : seconds,
            clock : ((hours === 0) ? '' : hours + ':') + (minutes < 10 && hours > 0 ? '0' : '') + minutes + ':' + (seconds < 10 ? '0' : '') + seconds,
            clock_long: ((hours === 0) ? '' : hours + ' hr ') + (minutes < 10 && hours > 0 ? '0' : '') + minutes + ' min'
        };
    }

    /**
     * Grab a random image when a song does not have cover art.
     */
    static fetchRandomImage() {
        let i = Math.floor(Math.random() * 4050) + 1;
        return `http://img.infinitynewtab.com/wallpaper/${i}.jpg`;
    }

    static showToast(message) {
        this.toastContainer = document.getElementById('toastContainer');
        this.toastContainer.innerHTML = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__controls_toast__["a" /* default */])(message, '');
        setTimeout(function() { 
            $('#toast').addClass('shown');
        }, 500);
        setTimeout(function() { // Hide toast
            $('#toast').removeClass('shown');
            $('#toast').html(''); // Empty out the toast
        }, 3000);
    }

    static log(message) {
        if (__WEBPACK_IMPORTED_MODULE_1__settings__["a" /* default */].getPref('debug') == 'true')
            console.log(message);
    }
}

/* harmony default export */ __webpack_exports__["a"] = (Utils);

/***/ }),
/* 2 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
class Settings {

    static loadPrefs() {
        this.disableAnimationsCSS = "<style id='disableAnimations'>* {transition: none !important; -webkit-transition: none; !important}</style>";
        this.disableBlurCSS = "<style id='disableBlur'>#histItemBg {-webkit-filter: brightness(.5) !important;filter: brightness(.5) !important; } #background {-webkit-filter: brightness(.8) !important;filter: brightness(.8) !important; }</style>"
        
        // Default settings object
        this._settings = {
            disableAnimations: false,
            disableBlur: false,
            playerVolume: 100,
            debug: false,
            shuffleMode: 'random'
        }

        this.updateSettings();
        
    }

    static storePref(name, value) {
        localStorage.setItem(name, value);
        this.updateSettings(); // Refresh values in _settings object
    }

    static getPref(name) {
        switch (name) {
            case 'disableAnimations':
                return this._settings.disableAnimations;
            case 'disableBlur':
                return this._settings.disableBlur;
            case 'playerVolume':
                return this._settings.playerVolume;
            case 'debug':
                return this._settings.debug;
            case 'shuffleMode':
                return this._settings.shuffleMode;
        }
    }

    static updateSettings() {
        this._settings.disableAnimations = localStorage.getItem('disableAnimations') || false;
        this._settings.disableBlur = localStorage.getItem('disableBlur') || (/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent) ? true : false); // Disable blur for mobile devices
        this._settings.playerVolume = localStorage.getItem('playerVolume') || 100;
        this._settings.debug = localStorage.getItem('debug') || false;
        this._settings.shuffleMode = localStorage.getItem('shuffleMode') || 'random';
    }

}

/* harmony default export */ __webpack_exports__["a"] = (Settings);

/***/ }),
/* 3 */
/***/ (function(module, exports) {

module.exports = {
	"client_id": "2t9loNQH90kzJcsFCODdigxfp325aq4z",
	"client_secret": "a05kSM418xnhpSvPVPXzQBRjmO1s8GWW"
};

/***/ }),
/* 4 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__consts_sec_json__ = __webpack_require__(3);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__consts_sec_json___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0__consts_sec_json__);


let SC = __webpack_require__(0);

class ChartItem {
    constructor(player, title, artist, kind, genre, limit, art) {
        this._player = player;
        this._title = title;
        this._artist = artist;
        this._kind = kind;
        this._genre = genre;
        this._limit = limit;
        this._art = art;

        this.chartItem = document.createElement('div');
        this.chartItem.className = 'col-4';
        // this.chartItem.setAttribute('data-genre', this._genre);
        // this.chartItem.setAttribute('data-limit', this._limit);
        this.bindEvents();
        let tempInner = document.createElement('div');
        tempInner.innerHTML = `
                <div class="chart-item card">
                    <div class="card-container">
                        <div class="card-image" style="background-image: url(${art});"></div>

                        <div class="title-container">
                            <p class="title">${this._title}</p><span class="subtitle">By SoundCloud</span>
                        </div>
                    </div>
                </div>
            </div>
        `;
        this.chartItem.appendChild(tempInner); // Must use this method to preserve listeners
    }

    render() {
        return this.chartItem;
    }

    bindEvents() {
        this.chartItem.addEventListener('click', (e) => {
            this._player.getTracksFromCharts(this._kind, this._genre, this._limit);
            this._player.searchDialog.hideSearchDialog();
            this._player.chartsDialog.hideCharts();
        }, false);
    }
}

/* harmony default export */ __webpack_exports__["a"] = (ChartItem);

/***/ }),
/* 5 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
const Toast = (text, shown) => (
    `
        <div class="toast ${shown}" id="toast">
            <p class="text-center">${text}</p>
        </div>
    `
);
/* harmony default export */ __webpack_exports__["a"] = (Toast);

/***/ }),
/* 6 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__consts_sec_json__ = __webpack_require__(3);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__consts_sec_json___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0__consts_sec_json__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__controls_HistItem__ = __webpack_require__(7);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__controls_songinfo__ = __webpack_require__(12);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__controls_waveform__ = __webpack_require__(13);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__request__ = __webpack_require__(15);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__controls_search__ = __webpack_require__(11);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__controls_toast__ = __webpack_require__(5);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__controls_dashboard__ = __webpack_require__(9);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__utils__ = __webpack_require__(1);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9__settings__ = __webpack_require__(2);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_10__controls_charts__ = __webpack_require__(8);












const SC = __webpack_require__(0); // Import node module

// Soundcloud Properties 

// Oldest range (around 2007 onward)
const RAND_COUNT = 90000;
const OFFSET = 0;

// Going from 2010
const RAND_COUNT_1 = 7000000;
const OFFSET_1 = 3000000;

// More Recent
const RAND_COUNT_2 = 90000000;
const OFFSET_2 = 10000000;

// The fresh stuff
const RAND_COUNT_3 = 300000000;
const OFFSET_3 = 100000000;

// Widget Parameters
//const WIDGET_PARAMS = '&liking=false&show_artwork=false&show_comments=false&show_playcount=false&visual=false';
const WIDGET_PARAMS = '';

class Player {

    /**
     * Sets up the the application variables and hooking events to controls.
     */
    constructor() {
        // Initialize variables
        this.history = [];
        this.queue = []; // For tracks playing next
        this.isPlaying = false;
        this.curPlayer = null;
        this.curPosition = 0;
        this.curTrack = null; // Store track data. Updated in loadWidgetSong()
        this.waveform = null;
        this.isRepeating = false; // For repeating songs
        this.hasBeenFetched = false; // Used to stop duplicates during recursion
        this.timerUpdate = 0;
        this.isPlaylist = false; // Check if we are playing a playlist.
        this.setCurIndex = 0; // The current index of the song in the playlist
        this.setTrackCount = 0; // This holds the number of tracks in the playlist so we can tell when we have reached the end.
        this.shuffleQueue = false; // Should the queue be shuffled when we get a list of tracks;
        this.queueNum = 120; // How many results to add to the queue

        this.seekingForward = false; // Work around for the bug in PROGRESS event

        // Experimental API v2 Endpoint
        this.SOUNDCLOUD_API_V2 = 'https://api-v2.soundcloud.com/';

        // Widget Props
        this.widgetTrack = {
            cover: '',
            title: '',
            id: 0,
            artist: '',
            permalink_url: '',
            description: '',
            created_at: '',
            duration: 0,
            currentPosition: 0
        };

        // Bind page elements 
        this.bindControlElements();
        this.bindControlEvents();

        // Initialize Search dialog
        this.searchDialog = new __WEBPACK_IMPORTED_MODULE_5__controls_search__["a" /* default */](this);
        
        // Initialize the dashboard, also initializes settings
        this.dashboard = new __WEBPACK_IMPORTED_MODULE_7__controls_dashboard__["a" /* default */](this);

        // Initialize the charts
        this.chartsDialog = new __WEBPACK_IMPORTED_MODULE_10__controls_charts__["a" /* default */](this);

        // Settings already Initialized
        if (JSON.parse(__WEBPACK_IMPORTED_MODULE_9__settings__["a" /* default */].getPref('disableAnimations'))) {
            $(__WEBPACK_IMPORTED_MODULE_9__settings__["a" /* default */].disableAnimationsCSS).appendTo("head");
        }
        if (JSON.parse(__WEBPACK_IMPORTED_MODULE_9__settings__["a" /* default */].getPref('disableBlur'))) {
            $(__WEBPACK_IMPORTED_MODULE_9__settings__["a" /* default */].disableBlurCSS).appendTo("head");
        }

        // Load a track when the app is loaded (take url param into account).
        document.getElementById('widgettest').setAttribute('src', 'https://w.soundcloud.com/player/?url=https%3A//api.soundcloud.com/tracks/170202151' + WIDGET_PARAMS);
        let iframeID = document.getElementById('widgettest');
        this.curPlayer = SC.Widget(iframeID);
        // Update the player
        this.bindWidgetEvents(this.curPlayer); // Bind event handlers for widget.
        
        // Check for params and then decide what to play
        this.checkParamsAndFetch();

        __WEBPACK_IMPORTED_MODULE_8__utils__["a" /* default */].log('construct done');
    }

    /**
     * Binds the page elements to JS objects so we can access them in other functions.
     */
    bindControlElements() {
        this.mainPlayer = document.getElementById('songContainer');
        this.playBtn = document.getElementById('play-btn');
        this.histContainer = document.getElementById('histContainer');
        this.btnFf = document.getElementById('seek-fw-btn');
        this.btnBk = document.getElementById('seek-bk-btn');
        this.btnSearch = document.getElementById('custom-btn');
        this.btnRepeat = document.getElementById('repeat-btn');
        this.btnDashboard = document.getElementById('dashboard-btn');
    }

    /**
     * Binds components on the page to commands on action.
     */
    bindControlEvents() {
        this.playBtn.onclick = (e) => {
            // if (this.curPlayer === null && !this.isPlaying)
            //     this.updateStream(this.getRandomTrack());
            this.togglePlay();

            // Check if song title matches title in app
            if ($('#songTitle').value !== this.curPlayer.title) {
                this.curPlayer.getCurrentSound((song) => {
                    this.updateSongInfo(song);
                });
            }
        }

        // Event handler for seeking forward / fetch new song
        this.btnFf.onclick = (e) => {
            if (this.queue.length > 0 || this.isPlaylist) {
                this.seekForward(); // Seek forward in queue
            } else { // Else just load another song
                this.fetchNext();
            }
        }

        // Event handler for seeking back
        this.btnBk.onclick = (e) => {
            if (this.curPosition > 10000) { // If the song is past 10 seconds, reset song back to beginning (like in Spotify)
                this.restartSong();
            } else { // Else, go to the last song
                this.seekBack();
            }
        }

        // Event handler to play custom song
        this.btnSearch.onclick = (e) => {
            this.searchDialog.toggleSearchDialog();
        }
        
        // Event handler for repeats
        this.btnRepeat.onclick = (e) => {
            this.isRepeating = !this.isRepeating; // Toggle the value
            if (this.isRepeating) {
                this.btnRepeat.style.color = '#ff2160';
            } else {
                this.btnRepeat.style.color = 'inherit';
            }
        }

        // Event handler to show dashboard
        this.btnDashboard.onclick = (e) => {
            this.dashboard.toggleDashboard();
        }

        // Bind keyboard shortcuts
        document.onkeydown = (e) => {
            if (e.keyCode == 32) {
                // space key to toggle playback
                var tag = e.target.tagName.toLowerCase();
                if (tag != 'input') // Ignore the search field
                    this.togglePlay();

            } else if (e.shiftKey && e.keyCode == 38) {
                // shift up
                this.volumeUp(10);
            } else if (e.shiftKey && e.keyCode == 40) {
                // shift down
                this.volumeDown(10);

            } else if (e.shiftKey && e.keyCode == 66) {
                let id = prompt("Enter song id.");
                if (id == null)
                    return;

                document.getElementById('widgettest').setAttribute('src', `https://w.soundcloud.com/player/?url=https%3A//api.soundcloud.com/tracks/${id}` + WIDGET_PARAMS);
                let iframeID = document.getElementById('widgettest');
                this.curPlayer = SC.Widget(iframeID);
                this.curPlayer.load(`https%3A//api.soundcloud.com/tracks/${id}` + WIDGET_PARAMS);
                // Update the player
                this.bindWidgetEvents(this.curPlayer); // Bind event handlers for widget.
                this.togglePlay();
                setTimeout(() => this.loadWidgetSong(this.curPlayer), 1000);
            }
        }

    }

    /**
     * Attempts to load information associated to the widget to local vars and displays them
     * @param {SoundCloudWidget} widget - widget loaded by API
     */
    loadWidgetSong(widget) {
        try {
            __WEBPACK_IMPORTED_MODULE_8__utils__["a" /* default */].log('loadwidgetsong called');
            this.waveform = null; // Reset the reference
            widget.getCurrentSound((song) => {
                //Utils.log(song);
                let rndImg = __WEBPACK_IMPORTED_MODULE_8__utils__["a" /* default */].fetchRandomImage();
                this.updateSongInfo(song);

                // Set the volume (player always resets to 100 again)
                this.setVolume(__WEBPACK_IMPORTED_MODULE_9__settings__["a" /* default */].getPref('playerVolume'));

                let found = false; // Boolean to see if the song exists
                if (this.history.length > 0 || this.queue.length > 0) {
                    let songList = this.history.concat(this.queue); // Use this to prevent adding any duplicates
                    for (let i = 0; i < songList.length; i++) {
                        if (songList[i].track.id === song.id) {
                            found = true;
                        }
                    };

                    if (!found) { // Append the song if not found
                        this.history.push({id: song.id, track: song}); // Push the track so it can be replayed from history. 
                        let h = new __WEBPACK_IMPORTED_MODULE_1__controls_HistItem__["a" /* default */]((song.artwork_url === null ? rndImg : song.artwork_url), song, this, "javascript:alert('Download link unavailable');");
                        this.histContainer.appendChild(h.render()); // Append to history

                        $('.action-bar-item').click((e) => { // Stop button clicks from triggering playing the song
                            e.stopPropagation();
                        });
                    }
                } else {
                    this.history.push({id: song.id, track: song}); // Push the track so it can be replayed from history. 
                    let h = new __WEBPACK_IMPORTED_MODULE_1__controls_HistItem__["a" /* default */]((song.artwork_url === null ? rndImg : song.artwork_url), song, this, "javascript:alert('Download link unavailable');");
                    this.histContainer.appendChild(h.render()); // Append to history
                    $('.action-bar-item').click((e) => { // Stop button clicks from triggering playing the song
                        e.stopPropagation();
                    });
                }

                this.hasBeenFetched = false; // Reset

                __WEBPACK_IMPORTED_MODULE_8__utils__["a" /* default */].log('getcurrentsound done');
            }, (err) => {
                __WEBPACK_IMPORTED_MODULE_8__utils__["a" /* default */].log(err.message);
            });

            // Update the play state
            this.togglePlayState(true);
            return;
        } catch (ex) {
            __WEBPACK_IMPORTED_MODULE_8__utils__["a" /* default */].log(ex.message);
        }
    }

    updateSongInfo(song) {
        __WEBPACK_IMPORTED_MODULE_8__utils__["a" /* default */].log('getcurrentsound start');
        //if ( /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)) { // Attempt to fix on mobile devices
            
            // Sorry cannot auto play on mobile =_(
            // https://stackoverflow.com/questions/26066062/autoplay-html5-audio-player-on-mobile-browsers
            // Need to use trick.
            // widget.play();
            // setTimeout(() => {
            //         $('#play-btn').trigger('click'); // Cannot fix autoplay issue, but now users can play the track with 1 tap of the play button instead o several (bug fix)
            //         Utils.log('test play')
            //     }, 2000);
            // this.togglePlayState(true);
            //this.curPlayer.play(); // Extra call for forcing auto playing in mobile

            // Android app workaround https://developer.android.com/reference/android/webkit/WebSettings.html
        //}
        this.curPlayer.play(); // Play normally on non mobile
        this.togglePlayState(true);

        this.curTrack = song;

        this.isPlaying = true;
        let rndImg = __WEBPACK_IMPORTED_MODULE_8__utils__["a" /* default */].fetchRandomImage();
        this.widgetTrack.cover = song.artwork_url;
        this.widgetTrack.title = song.title;
        this.widgetTrack.id = song.id;
        this.widgetTrack.artist = song.user.username || 'N/A'; // Some tracks don't have a usernme associated
        this.widgetTrack.permalink_url = song.permalink_url;
        this.widgetTrack.description = song.description || 'N/A';
        this.widgetTrack.created_at = song.created_at;
        this.widgetTrack.duration = song.duration || 'N/A';
        this.widgetTrack.currentPosition = 0;

        document.title = `\u25B6   Nimbus - ${this.widgetTrack.title}`;

        // Create tag list
        let tagBtns = ``;
        let tagCollection = song.tag_list;
        
        // Get tags that are inside quotes already (treat multiple words as 1 tag)
        let quotedTags = song.tag_list.match(/(["'])(?:(?=(\\?))\2.)*?\1/g);

        // Clean the original list
        tagCollection = tagCollection.replace(/(["'])(?:(?=(\\?))\2.)*?\1/g, ''); // Remove all double quoted entries
        tagCollection = tagCollection.split(' ');
        tagCollection = tagCollection.concat(quotedTags);

        if (song.tag_list !== '') {
            for (let i = 0; i < tagCollection.length; i++) {
                let tagName = tagCollection[i];
                if (tagName !== '' && tagName !== null) {
                    tagName = tagName.replace(/\"/g, '');
                    tagBtns += `<a href="https://soundcloud.com/tags/${tagName}" target="_blank"><button class="btn-transparent">
                        #${tagName}
                    </button></a>
                    `;
                }
            }
        }

        this.mainPlayer.innerHTML = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_2__controls_songinfo__["a" /* default */])((song.artwork_url === null ? song.user.avatar_url : song.artwork_url.replace('large', 't500x500')), song, tagBtns, "javascript:alert('Purchase link unavailable');");
        document.getElementById('background').style.backgroundImage = 'url(' + (song.artwork_url === null ? rndImg : song.artwork_url.replace('large', 't500x500')) + ')';

        // Add listener for flipContainer
        this.flipContainer = document.getElementById('flipContainer');
        this.flipContainer.onclick = (e) => {
            $('#flipContainer').toggleClass('flipped');
        }

        this.volumeSlider = document.getElementById('volumeSlider');

        this.volumeSlider.addEventListener('change', () => {
            this.setVolume(this.volumeSlider.value);
        }, false);

        // Async method to build waveform
        (async function() { // Changed syntax to fix issue on Safari
            let req = new __WEBPACK_IMPORTED_MODULE_4__request__["a" /* default */](); // Construct it
            let data = await req.getJSON(song.waveform_url);
            __WEBPACK_IMPORTED_MODULE_8__utils__["a" /* default */].log(song.waveform_url);

            // Draw the waveform
            const waveFormContainer = document.querySelector('.waveform');
            if (!this.waveform) {
                this.waveform = new __WEBPACK_IMPORTED_MODULE_3__controls_waveform__["a" /* default */]({
                container: waveFormContainer,
                audio: this.curPlayer,
                duration: song.duration,
                data: data.samples,
                peakWidth: 2,
                peakSpace: 1,
                responsive: true,
                mouseOverEvents: true,
                mouseClickEvents: true,
                color: {
                    background: "rgba(140, 140, 140, 0.7)",
                    footer: "rgba(90, 90, 90, 0.6)",
                    footerPlayback: "#5d1835",
                    hoverGradient: {
                        from: "#d91e53",
                        to: "#d91e53"
                    },
                    playbackGradient: {
                        from: "#d91e53",
                        to: "#d91e53"
                    },
                    hoverPlaybackGradient: {
                        from: "#ff2160",
                        to: "#ff2160"
                    }
                }
            });
        } else {
            await waveform.updateWaveformData(data.samples);
        }
        }).bind(this)();

    }

    /**
     * The starting point of the application called by app.js. This initalizes the SoundCloud API.
     */
    start() {
        try {
            SC.initialize({
                client_id: __WEBPACK_IMPORTED_MODULE_0__consts_sec_json___default.a.client_id
            });
        } catch (e) {
            __WEBPACK_IMPORTED_MODULE_8__utils__["a" /* default */].log('Error initializing SoundCloud API. Stack trace: ' + e.toString());
        }
        __WEBPACK_IMPORTED_MODULE_8__utils__["a" /* default */].log('SoundCloud API initalized!');
    }

    /**
     * Bind event handlers to the widget
     * @param {SoundCloudWidget} widget - widget loaded from API
     */
    bindWidgetEvents(widget) {
        this.curPlayer = widget;
        widget.bind(SC.Widget.Events.READY, (e) => {

            // Bind when the song is playing
            widget.bind(SC.Widget.Events.PLAY_PROGRESS, (e) => {
                this.curPosition = e.currentPosition;
                let curTimeStr = __WEBPACK_IMPORTED_MODULE_8__utils__["a" /* default */].convertMillisecondsToDigitalClock(e.currentPosition).clock;
                let totalTimeStr = __WEBPACK_IMPORTED_MODULE_8__utils__["a" /* default */].convertMillisecondsToDigitalClock(this.widgetTrack.duration).clock;
                document.getElementById('curTime').innerText = `${curTimeStr} / ${totalTimeStr}`;
                
                // For some reason FINISH event no longer fires when changing songs in playlist, manual override here
                if (e.currentPosition === 0) {
                    if (this.isPlaylist && !this.isRepeating && !this.seekingForward) {
                        this.loadWidgetSong(this.curPlayer); // Update track info to the next song in the playlist
                    } else if (this.isPlaylist && this.isRepeating && !this.seekingForward) { // Replay set
                        this.curPlayer.pause();
                        setTimeout(() => {
                            this.curPlayer.prev();
                            this.loadWidgetSong(this.curPlayer);
                        }, 500);
                    } else if (this.seekingForward) {
                        this.curPlayer.seekTo(1);
                        setTimeout(() => {this.seekingForward = false, 500}); // Prevent this event from firing more than once.
                    }
                }
            });

            // Bind when the song has finished
            widget.bind(SC.Widget.Events.FINISH, (e) => {
                // When the song finishes, we need to find a new song to play.
                __WEBPACK_IMPORTED_MODULE_8__utils__["a" /* default */].log('finished');
                this.isPlaying = false;

                // Check if user is playing a playlist
                if (this.isPlaylist && !this.isRepeating) {
                    let oldSongID = this.widgetTrack.id;
                    this.togglePlay();
                    this.loadWidgetSong(this.curPlayer); // Update track info to the next song in the playlist
                    this.isPlaying = false;
                    setTimeout(() => {
                        // Check if we have reached the end of the playlist
                        if (oldSongID === this.widgetTrack.id) { // If the last song we played has the same ID as the new one, fetch a new song. (SoundCloud ends up looping the last song again)
                            this.isPlaylist = false;
                            this.setCurIndex = 0;
                            this.setTrackCount = 0;
                            this.fetchNext();
                        } else {
                            this.restartSong();
                            this.togglePlay();
                            this.curPlayer.play();
                        }
                    }, 200);
                    return;
                }

                // Check if repeat is on first. TODO: Make it work with playlists
                if (this.isRepeating) {
                    if (this.isPlaylist) { // If we are repeating in a playlist, we need to go back to previous song since the API preloads the next one
                        this.restartSong();
                        this.curPlayer.pause();
                        this.curPlayer.pause();
                        setTimeout(this.curPlayer.prev(), 200);
                        return;
                    } else {
                        // Else we can just restart the song (API does not preload song)
                        this.restartSong();
                        this.togglePlay();
                        return;
                    }
                }
                
                // Check if the queue is not empty and play whatever song that is next in the queue
                if (this.queue.length > 0) {
                    let nextSong = this.queue.pop(); // Pop the next song

                    if (nextSong) { // If not null
                        this.curPlayer.load(nextSong.track.permalink_url);
                        setTimeout(() => this.loadWidgetSong(this.curPlayer), 2000); // Update player info, song will be added to history here
                    }
                } else if (!this.hasBeenFetched) { // If we have fetched a song already, do not fetch another one.
                    this.fetchNext();
                    this.hasBeenFetched = true;
                }
            });

            // Bind play state event
            widget.bind(SC.Widget.Events.PLAY, (e) => {
                this.togglePlayState(true);
            });

            // Bind pause state event
            widget.bind(SC.Widget.Events.PAUSE, (e) => {
                this.togglePlayState(false);
            });

            // Throw error in case user enters invalid URL
            widget.bind(SC.Widget.Events.ERROR, (e) => {
                alert('Error, unable to load resource.');
            });

        });
    }

    /**
     * This function is designed to get a random track from SoundCloud
     */
    getRandomTrack() {
        try {
            // Choose to use old track ids or new track ids
            let chooseId = (Math.floor(Math.random() * 10));
            let trackId = 0;

            // Generate random song id. Give slight preference to newer tracks 
            if (chooseId > 4) {
                trackId = Math.floor((Math.random() * RAND_COUNT_3) + OFFSET_3);
            } else if (chooseId > 2) {
                trackId = Math.floor((Math.random() * RAND_COUNT_2) + OFFSET_2);
            } else if (chooseId > 1) {
                trackId = Math.floor((Math.random() * RAND_COUNT_1) + OFFSET_1);
            } else {
                trackId = Math.floor((Math.random() * RAND_COUNT) + OFFSET);
            }

            __WEBPACK_IMPORTED_MODULE_8__utils__["a" /* default */].log('in id');

            return trackId;
        } catch (e) {
            __WEBPACK_IMPORTED_MODULE_8__utils__["a" /* default */].log('getRandomTrack() - ' + e.toString());
        }
    }

    /**
     * Extracts address paramters by name and loads the appropriate content.
     * 
     * 
     * @memberof Player
     */
    checkParamsAndFetch() {
        // Fetch param values if present
        let id = this.getURLParamsByName('id', window.location.href);
        let url = this.getURLParamsByName('url', window.location.href);

        // Do not fetch a random song if an id was already provided
        if (id) // id takes takes precedence
            this.streamSong(id);
        else if (url)
            this.curPlayer.load(url); // Load the song by url (Widget API takes care of the rest)
        else
            this.fetchNext();
    }

    /**
     * Update the UI controls for when the song is playing
     * @param {boolean} playing - if the song is playing or not
     */
    togglePlayState(playing) {
        if (playing) {
            this.playBtn.innerHTML = '<i class="fa fa-pause" aria-hidden="true"></i>';
            document.title = `\u25B6   Nimbus - ${this.widgetTrack.title}`;
        } else {
            this.playBtn.innerHTML = '<i class="fa fa-play" aria-hidden="true"></i>';
            document.title = `\u23F8   Nimbus - ${this.widgetTrack.title}`;
        }
    }

    // UTIL functions
    /**
     * Seek to next song in queue
     */
    seekForward() {
        // If we are in playlist mode, play the next song in the playlist and do not fetch a new song
        if (this.isPlaylist) {
            let nextSongID = this.widgetTrack.id;
            this.seekingForward = true;
            this.restartSong();
            this.curPlayer.pause();
            this.curPlayer.pause(); // Widget not really responsive when user goes back and forth quickly
            setTimeout(this.curPlayer.next(), 200);
            this.restartSong(); // Seems weird to call restartSong() so many times, but this is used to reset the songs and avoid the weird bug where the player plays 2 songs simulatenously.
            this.curPlayer.play();
            this.curPlayer.pause(); // Same interrupted Promise issue from API
            this.curPlayer.play();
            setTimeout(() => {
                this.loadWidgetSong(this.curPlayer);
                setTimeout(() => {
                    __WEBPACK_IMPORTED_MODULE_8__utils__["a" /* default */].log(this.widgetTrack.id + ' - ' + nextSongID);
                    if (this.widgetTrack.id === nextSongID) { // If we have reached the end of the playlist
                        this.isPlaylist = false;
                        this.setCurIndex = 0;
                        this.setTrackCount = 0;
                        this.fetchNext();
                    }
                }, 200);

            }, 200);
        } else {
            let nextSong = this.queue.pop(); // Pop the next song

            if (nextSong) { // If not null
                if (nextSong.track.kind === 'playlist')
                    this.isPlaylist = true;
                this.curPlayer.load(nextSong.track.permalink_url);
                setTimeout(() => this.loadWidgetSong(this.curPlayer), 2000); // Update player info, will add song to history
            }
        }
    }

    /**
     * Rewind to previous song
     */
    seekBack() {
        // this.isPlaylist = false; // Exit playlist mode so we don't end up stuck in a loop with songs
        // If we are in a playlist, simply move back to the previous song
        if (this.isPlaylist) {
            let lastSongID = this.widgetTrack.id;
            this.restartSong();
            this.curPlayer.pause();
            this.curPlayer.pause();
            setTimeout(this.curPlayer.prev(), 200); // Player not cooperating with async
            this.restartSong(); // Seems weird to call restartSong() so many times, but this is used to reset the songs and avoid the weird bug where the player plays 2 songs simulatenously.
            setTimeout(() => {
                this.loadWidgetSong(this.curPlayer);
                setTimeout(() => {
                    __WEBPACK_IMPORTED_MODULE_8__utils__["a" /* default */].log(this.widgetTrack.id + ' - ' + lastSongID);
                    if (this.widgetTrack.id === lastSongID) { // If we have reached the beginning of the playlist
                        this.loadPreviousSong();
                    }
                }, 200); // Needed to be done to allow time for async request to complete in loadWidgetSong()
                
            }, 200);
            this.curPlayer.play();
            this.curPlayer.pause(); // Same interrupted Promise issue from API
            this.curPlayer.play();
            return;
        }
        __WEBPACK_IMPORTED_MODULE_8__utils__["a" /* default */].log('not playlist');

        this.loadPreviousSong();
    }

    loadPreviousSong() {
        this.isPlaylist = false;

         // Pop current song and add it to queue so it is our next song
        this.queue.push(this.history.pop());
        let prevSong = this.history[this.history.length - 1].track;

        if (prevSong) { // If not null
            this.curPlayer.load(prevSong.permalink_url);
            __WEBPACK_IMPORTED_MODULE_8__utils__["a" /* default */].log(prevSong.permalink_url);
            setTimeout(() => this.loadWidgetSong(this.curPlayer), 2000); // Update player info
        }
    }

    /**
     * Resets the song back to 0
     */
    restartSong() {
        this.curPlayer.seekTo(0);
    }

    /**
     * Increases the volume with the maximum bound being 100.
     * @param {float} offset - how much to increase the volume by
     */
    volumeUp(offset) {
        this.curPlayer.getVolume((vol) => {
            let newVol = Math.min(100, vol + offset);
            this.setVolume(newVol);
        });
    }

    /**
     * Lowers the volume by offset with the minimum bound being 0.
     * @param {float} offset - how much to lower the volume by
     */
    volumeDown(offset) {
        this.curPlayer.getVolume((vol) => {
            let newVol = Math.max(0, vol - offset);
            this.setVolume(newVol);
        });
    }

    /**
     * Sets the volume of the player while updating UI components and user setting.
     * 
     * @param {Number} vol - volume level
     * 
     * @memberof Player
     * 
     */
    setVolume(vol) {
        this.curPlayer.setVolume(vol);
        this.volumeSlider.value = vol;
        __WEBPACK_IMPORTED_MODULE_9__settings__["a" /* default */].storePref('playerVolume', vol);
    }

    /**
     * Updates controls to show that the song is in progress.
     */
    togglePlay() {
        if (!this.isPlaying) {
            // Nuanced but adds that 'break' in the sound so you know it was pressed just in case isPlaying is the wrong value
            this.curPlayer.play(); 
            __WEBPACK_IMPORTED_MODULE_8__utils__["a" /* default */].log('isPlaying = true');
            this.isPlaying = true;
            // this.mainPlayer.innerHTML = SongInfo((this.curTrack.track.artwork_url === null ? '../img/cd.png' : this.curTrack.track.artwork_url.replace('large', 't500x500')), this.curTrack.track);
            // Update play state
            this.togglePlayState(true);
        } else {
            this.curPlayer.pause();

            // Update play state
            this.togglePlayState(false);
            this.isPlaying = false;
        }
    }

    /**
     * Fetch the next song and verify that the song exists (non 404).
     */
    fetchNext() {
        try {
            __WEBPACK_IMPORTED_MODULE_8__utils__["a" /* default */].log('Queue length - ' + this.queue.length);
            if (this.queue.length > 0) { // First check if the queue is non-empty
                let nextSong = this.queue.pop(); // Pop the next song

                if (nextSong) { // If not null
                    if (nextSong.track.kind === 'playlist')
                        this.isPlaylist = true;
                    this.history.push({id: nextSong.id, track: nextSong}); // Add it to history
                    this.curPlayer.load(nextSong.permalink_url);
                    setTimeout(() => this.loadWidgetSong(this.curPlayer), 2000); // Update player info
                    return;
                }
            } else { // If the queue is empty, fetch a new song
                this.curPlayer.pause();
                this.restartSong();
            }
        } catch (e) {
            __WEBPACK_IMPORTED_MODULE_8__utils__["a" /* default */].log('fetchNext' + e.toString());
        }

        if (__WEBPACK_IMPORTED_MODULE_9__settings__["a" /* default */].getPref('shuffleMode') === 'related' && this.curTrack !== null && this.queue.length <= 0)
            this.getRelatedTracks(this.curTrack.id, 50);
        else  // Make sure length of queue is empty before fetching again
            this.loadRandomTrack();
        
    }

    loadRandomTrack() {
        let id = this.getRandomTrack(); // Works for tracks with 403 errors in other API

        SC.get('/tracks/' + id).then((track) => { // Check if there are results
            // Really just designed to check if the song actually exists
           this.streamSong(id);
        }, (err) => {
            __WEBPACK_IMPORTED_MODULE_8__utils__["a" /* default */].log(err.status);
            // if (err.status === 0) { // Invalid API key
            //     Utils.log('0/401 Unauthorized. Possible Invalid SoundCloud key')
            //     throw '0/401 Unauthorized. Possible Invalid SoundCloud key'
            // }
            if (err.status === 403) { // Play the song anyway even if this API requiest returns a forbidden request (Soundcloud problem)
                this.streamSong(id);
                return;
            }
            // If there is no song with the associated ID, fetch a new one.
            __WEBPACK_IMPORTED_MODULE_8__utils__["a" /* default */].log('track fetch fail' + id);
            this.fetchNext();
            __WEBPACK_IMPORTED_MODULE_8__utils__["a" /* default */].log('track fetch fail post' + id);
        }).catch((err) => {
            __WEBPACK_IMPORTED_MODULE_8__utils__["a" /* default */].log(err.status);
            if (err.status === 0) { // Invalid API key
                __WEBPACK_IMPORTED_MODULE_8__utils__["a" /* default */].log('0/401 Unauthorized. Possible Invalid SoundCloud key');
            }
            if (err.status === 403) { // Play the song anyway even if this API requiest returns a forbidden request (Soundcloud problem)
                this.streamSong(id);
                return;
            }
            // If there is no song with the associated ID, fetch a new one.
            this.fetchNext();
        });
    }

    /**
     * Stream the song when a valid id is found
     * @param {int} id - holds the song id
     */
    streamSong(id) {
        __WEBPACK_IMPORTED_MODULE_8__utils__["a" /* default */].log('track fetch success ' + id);
        this.curPlayer.load(`https%3A//api.soundcloud.com/tracks/${id}` + WIDGET_PARAMS);
        this.togglePlayState(true);
        setTimeout(() => this.loadWidgetSong(this.curPlayer), 2000);
    }

    /**
     * Find the song based on user entered keywords, like 'I'm Feeling Lucky' on Google.
     * 
     * @param {String} query - search terms to find song
     * 
     * @memberof Player
     */
    getTrackByKeyWord(query) {
        // Get a list of songs by the search query and play first choice
        try {
            SC.get('/tracks', {q: query}).then((tracks) => {
                if (tracks.length > 0) {

                    if (this.shuffleQueue) {
                        let randIndex = Math.floor(Math.random() * tracks.length);
                        // Pick a random song to play
                        this.queue.push({ id: tracks[randIndex].id, track: tracks[randIndex]});
                        __WEBPACK_IMPORTED_MODULE_8__utils__["a" /* default */].showToast(`Added ${tracks[randIndex].title} to the queue.`)
                    } else {
                        // Load the first song
                        this.queue.push({ id: tracks[0].id, track: tracks[0]}); // The "I'm feeling lucky part of the search"
                        __WEBPACK_IMPORTED_MODULE_8__utils__["a" /* default */].showToast(`Added ${tracks[0].title} to the queue.`)
                    }
                }
            }).catch((e) => { // Testing
                __WEBPACK_IMPORTED_MODULE_8__utils__["a" /* default */].log('getTrackByKeyWord (promise) Error - ' + e.message);
            });
        } catch (e) {
            __WEBPACK_IMPORTED_MODULE_8__utils__["a" /* default */].log('getTrackByKeyWord Error - ' + e.message);
        }
    }

    /**
     * Fetches tracks by a list of tags from the user separated by commas.
     * 
     * @param {string} tagList - a string with tags separated by commas
     * 
     * @memberof Player
     */
    getTracksByTags(tagList) {
        try {
            // Create options object to hold what we want to search for
            let options = {
                tags: tagList,
                limit: this.queueNum
            } // TODO: Allow to modify limit later

            SC.get('/tracks', options).then((tracks) => {
                if (tracks.length > 0) {
                    __WEBPACK_IMPORTED_MODULE_8__utils__["a" /* default */].log(tracks);

                    let trackCollection = null;
                    if (this.shuffleQueue)
                        trackCollection = this.shuffleTracks(tracks);
                    else
                        trackCollection = tracks.reverse();

                    // Queue all tracks to the queue of the user's playlist. Note that queue is actually acting like a stack since we use push() and pop()
                    for (let i = 0; i < trackCollection.length; i++) { // Skip the first one since we are already playing it at this point (need to subtract upper bound by 1 since we want to exclude the first track from the reversed array)
                        this.queue.push({id: trackCollection[i].id, track: trackCollection[i]});
                        __WEBPACK_IMPORTED_MODULE_8__utils__["a" /* default */].log(tracks[i].title);
                    }

                    // // Load the song
                    // this.curPlayer.load(trackCollection[trackCollection.length - 1].permalink_url);
                
                    // Display toast message when done
                    __WEBPACK_IMPORTED_MODULE_8__utils__["a" /* default */].showToast(`${tracks.length} tracks added to the queue.`);
                } else {
                    __WEBPACK_IMPORTED_MODULE_8__utils__["a" /* default */].showToast('Search returned no results. Please try again.');
                }
            });
        } catch (e) {
            __WEBPACK_IMPORTED_MODULE_8__utils__["a" /* default */].log('getTracksByTags Error - ' + e.message);
        }
    }

    /**
     * Searches for a playlist by keyword.
     * 
     * @param {String} query - name of the playlist
     * 
     * @memberof Player
     */
    getSetByKeyWord(query) {
        try {
            SC.get('/playlists', {q: query}).then((sets) => {
                if (sets.length > 0) {
                    if (this.shuffleQueue) { // If we want to shuffle the results
                        // Load the set
                        let resIndex = Math.floor(Math.random() * (sets.length + 1));
                        this.queue.push({id: sets[resIndex].id, track: sets[resIndex]}); // The "I'm feeling lucky part of the search"
                        this.setTrackCount = sets[resIndex].track_count;
                        __WEBPACK_IMPORTED_MODULE_8__utils__["a" /* default */].showToast(`Now playing ${sets[resIndex].title} (${this.setTrackCount} songs)`)
                    } else {
                        // Load the set
                        this.queue.push({id: sets[0].id, track: sets[0]}); // The "I'm feeling lucky part of the search"
                        this.setTrackCount = sets[0].track_count;
                        __WEBPACK_IMPORTED_MODULE_8__utils__["a" /* default */].log(sets[0]);
                        __WEBPACK_IMPORTED_MODULE_8__utils__["a" /* default */].showToast(`Queued ${sets[0].title} (${this.setTrackCount} songs)`)
                    }
                }
            });
        } catch (e) {
            __WEBPACK_IMPORTED_MODULE_8__utils__["a" /* default */].log('getSetByKeyWord Error - ' + e.message);
        }
    }

    /**
     * Searches for the first queueNum songs by a user.
     * 
     * @param {String} user - username of the user
     * 
     * @memberof Player
     */
    getTracksByUser(user) {
        try {
            SC.resolve(`https://soundcloud.com/${user}`).then((response) => {
                try {
                    // Create options object to hold what we want to search for
                    let options = {
                        limit: this.queueNum
                    }

                    SC.get(`/users/${response.id}/tracks`, options).then((tracks) => {
                        __WEBPACK_IMPORTED_MODULE_8__utils__["a" /* default */].log(tracks);
                        if (tracks.length > 0) {

                            let trackCollection = null;
                            if (this.shuffleQueue)
                                trackCollection = this.shuffleTracks(tracks);
                            else
                                trackCollection = tracks.reverse();

                            // Queue all tracks to the queue of the user's playlist. Note that queue is actually acting like a stack since we use push() and pop()
                            for (let i = 0; i < trackCollection.length; i++) { // Skip the first one since we are already playing it at this point (need to subtract upper bound by 1 since we want to exclude the first track from the reversed array)
                                this.queue.push({id: trackCollection[i].id, track: trackCollection[i]});
                            }
                            
                            // // Load the song
                            // this.curPlayer.load(trackCollection[trackCollection.length - 1].permalink_url); // Top of the result
                        
                            // Display toast message when done
                            __WEBPACK_IMPORTED_MODULE_8__utils__["a" /* default */].showToast(`${tracks.length} tracks added to the queue.`);
                        } else {
                            __WEBPACK_IMPORTED_MODULE_8__utils__["a" /* default */].showToast('Search returned no results. Please try again.');
                        }
                    });
                } catch (e) {
                    __WEBPACK_IMPORTED_MODULE_8__utils__["a" /* default */].log('getSongsByUser Error - ' + e.message);
                }
            });
        } catch (e) {
            __WEBPACK_IMPORTED_MODULE_8__utils__["a" /* default */].log(e);
        }
    }

    /**
     * Searches for songs by genres (string of genres separated by commas)
     * 
     * @param {String} genreList - comma separated list of genres
     * 
     * @memberof Player
     */
    getTracksByGenres(genreList) {
        try {
            // Create options object to hold what we want to search for
            let options = {
                genres: genreList,
                limit: this.queueNum
            } // TODO: Allow to modify limit later

            SC.get('/tracks', options).then((tracks) => {
                if (tracks.length > 0) {

                    let trackCollection = null;
                    if (this.shuffleQueue)
                        trackCollection = this.shuffleTracks(tracks);
                    else
                        trackCollection = tracks.reverse();

                    // Queue all tracks to the queue of the user's playlist. Note that queue is actually acting like a stack since we use push() and pop()
                    for (let i = 0; i < trackCollection.length; i++) { // Skip the first one since we are already playing it at this point (need to subtract upper bound by 1 since we want to exclude the first track from the reversed array)
                        this.queue.push({id: trackCollection[i].id, track: trackCollection[i]});
                    }

                    // // Load the song
                    // this.curPlayer.load(trackCollection[trackCollection.length - 1].permalink_url);
                
                    // Display toast message when done
                    __WEBPACK_IMPORTED_MODULE_8__utils__["a" /* default */].showToast(`${tracks.length} tracks added to the queue.`);
                } else {
                    __WEBPACK_IMPORTED_MODULE_8__utils__["a" /* default */].showToast('Search returned no results. Please try again.');
                }
            });
        } catch (e) {
            __WEBPACK_IMPORTED_MODULE_8__utils__["a" /* default */].log('getSongsByGenres Error - ' + e.message);
        }
    }

    /**
     * Checks if song history contains a song by id.
     * 
     * @param {Number} id - id of the song we are looking for.
     * @returns {Boolean}
     * 
     * @memberof Player
     */
    historyContainsId(id) {
        let found = false;
        for (let i = 0; i < this.history.length; i++) {
            if (this.history[i].id === id) {
                found = true;
            }
        };
        return found;
    }

    /**
     * Extracts the url params to play specific tracks on load.
     * 
     * @param {String} name - name of the param
     * @param {String} url - current address loaded by the user
     * @returns 
     * 
     * @memberof Player
     */
    getURLParamsByName(name, url) {
        if (!url) url = window.location.href;
        name = name.replace(/[\[\]]/g, "\\$&");
        var regex = new RegExp("[?&]" + name + "(=([^&#]*)|&|#|$)"),
            results = regex.exec(url);
        if (!results) return null;
        if (!results[2]) return '';
        return decodeURIComponent(results[2].replace(/\+/g, " "));
    }

    shuffleTracks(tracks) {
        let temp = null;
        __WEBPACK_IMPORTED_MODULE_8__utils__["a" /* default */].log('shuffling tracks');
        // Using in place Durstenfeld shuffle
        for (let i = tracks.length - 1; i > 0; i --) {
            let j = Math.floor(Math.random() * (i+1)); // Generate a random index [0...i]
            temp = tracks[i]; // Start swapping
            tracks[i] = tracks[j];
            tracks[j] = temp;
        }

        return tracks;
    }

    getTracksFromCharts(_kind, _genres, _limit, $_partition = 1) {
        // kind=top&genre=soundcloud%3Agenres%3Aall-music&limit=50
        try {

            $.ajax({
                url: 'http://polarity.x10.mx/nimbus/charts.php', //This is the current doc
                type: "GET",
                dataType:'json', // add json datatype to get json
                data: ({
                    kind: _kind,
                    genre: _genres,
                    limit: _limit,
                    linked_partitioning: $_partition,
                    client_id: __WEBPACK_IMPORTED_MODULE_0__consts_sec_json___default.a.client_id
                }),
                success: (data) => {
                    let trackCollection = null;
                    if (this.shuffleQueue)
                        trackCollection = this.shuffleTracks(data.collection);
                    else
                        trackCollection = data.collection.reverse();

                    for (let i = 0; i < trackCollection.length; i++) {
                        this.queue.push({id: trackCollection[i].track.id, track: trackCollection[i].track}); // This needs the track identifier
                    }

                    __WEBPACK_IMPORTED_MODULE_8__utils__["a" /* default */].log(trackCollection);
                    
                    // Display toast message when done
                    __WEBPACK_IMPORTED_MODULE_8__utils__["a" /* default */].showToast(`${trackCollection.length} tracks added to the queue.`);
                }
            });  
        } catch (e) {
            __WEBPACK_IMPORTED_MODULE_8__utils__["a" /* default */].log('getTracksFromCharts Error - ' + e.message); 
        }
    }

    getRelatedTracks(_id, _limit) {
        try {

            $.ajax({
                url: 'http://polarity.x10.mx/nimbus/related.php', //This is the current doc
                type: "GET",
                dataType:'json', // add json datatype to get json
                data: ({
                    id: _id,
                    limit: _limit,
                    client_id: __WEBPACK_IMPORTED_MODULE_0__consts_sec_json___default.a.client_id
                }),
                success: (data) => {
                    let trackCollection = null;
                    if (this.shuffleQueue)
                        trackCollection = this.shuffleTracks(data.collection);
                    else
                        trackCollection = data.collection.reverse();

                    for (let i = 0; i < trackCollection.length; i++) {
                        this.queue.push({id: trackCollection[i].id, track: trackCollection[i]}); // This needs the track identifier
                    }

                    __WEBPACK_IMPORTED_MODULE_8__utils__["a" /* default */].log(trackCollection);
                    
                    // Display toast message when done
                    __WEBPACK_IMPORTED_MODULE_8__utils__["a" /* default */].showToast(`${trackCollection.length} tracks related to ${this.curTrack.title} added to the queue.`);

                    // Stream the song
                    let track = this.queue.pop();
                    __WEBPACK_IMPORTED_MODULE_8__utils__["a" /* default */].log('fetching first track from related ' + track.id);
                    this.curPlayer.load(`https%3A//api.soundcloud.com/tracks/${track.id}` + WIDGET_PARAMS);
                    this.togglePlayState(true);
                    setTimeout(() => this.loadWidgetSong(this.curPlayer), 1000);
                }
            });  
        } catch (e) {
            __WEBPACK_IMPORTED_MODULE_8__utils__["a" /* default */].log('getRelatedTracks Error - ' + e.message); 
        }
    }
}

/* harmony default export */ __webpack_exports__["a"] = (Player);

/***/ }),
/* 7 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__consts_sec_json__ = __webpack_require__(3);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__consts_sec_json___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0__consts_sec_json__);


let SC = __webpack_require__(0);

class HistItem {

    constructor(bg, track, player, errorDownloadCallback) {
        this._bg = bg;
        this._track = track;
        this._errorDownloadCallback = errorDownloadCallback;

        this.histItem = document.createElement('div');
        this.histItem.className = 'card';
        this.histItem.setAttribute('id', 'histItem');
        this.histItem.setAttribute('data-id', track.id);
        this.histItem.addEventListener('click', (e) => {
            player.streamSong(track.id);
        }, false);
        let tempInner = document.createElement('div');
        tempInner.innerHTML = `
            <div class="card" data-id="${this._track.id}">
                <div id="histItemBg" class="bg-image" style="background-image: url('${this._bg}')"></div>
                <div class="player-content overlay">
                    <div class="row level">
                        <div class="level-left" style="position:relative;">
                            <img src="${this._track.artwork_url === null ? this._track.user.avatar_url : this._track.artwork_url}">
                            <span class="hist-play center">
                                <i class="fa fa-play center-alt" aria-hidden="true"></i>
                            </span>
                        </div>
                        <div class="desc">
                            <p class="title">${this._track.title}</p>
                            <p class="subtitle">${this._track.user.username}</p>
                            <p class="subtitle">${this._track.genre || 'N/A'}</p>
                        </div>
                    </div>
                </div>
                <div class="row overlay">
                    <div class="action-bar center no-padding">
                        <div class="action-bar-item">
                            <a href="${this._track.downloadable === false ? this._errorDownloadCallback : `https://api.soundcloud.com/tracks/${this._track.id}/download?client_id=${__WEBPACK_IMPORTED_MODULE_0__consts_sec_json___default.a.client_id}`}" target="_blank"><button class="btn-transparent">Download</button></a>
                        </div>
                        <div class="action-bar-item">
                            <a href="${this._track.permalink_url}" target="_blank"><button class="btn-transparent">View</button></a>
                        </div>
                    </div>
                </div>
            </div>
        `;
        this.histItem.appendChild(tempInner); // Must use this method to preserve listeners
    }

    render() {
         return this.histItem; // Cannot return innerHTML since that removes all listeners
    }
}

/* harmony default export */ __webpack_exports__["a"] = (HistItem);

/***/ }),
/* 8 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__chartitem__ = __webpack_require__(4);


class Charts {

    constructor(player) {
        this._player = player;
        this.isShown = false;
        this.render();
        this.bindEvents();

        // Load the charts
        let c = null;
        this.chartContainer = document.querySelector('#allCharts');
        $.ajax({
            url: 'http://polarity.x10.mx/nimbus/charts.json',
            type: "GET",
            dataType:'json', 
            success: (data) => {
                for (let i = 0; i < data.collection.length; i++) {
                    c = new __WEBPACK_IMPORTED_MODULE_0__chartitem__["a" /* default */](this._player, data.collection[i].chart.title, data.collection[i].chart.author, data.collection[i].chart.kind, data.collection[i].chart.genre_url, data.collection[i].chart.limit, data.collection[i].chart.image_url);
                    this.chartContainer.appendChild(c.render());
                }
            }
        });
    }

    render() {
        document.querySelector('#chartModalContainer').innerHTML += `
            <div class="hero-body">
                <div id="chartsCloseButton" class="dialog-close-btn link-btn">
                    <span class="icon">
                        <i class="fa fa-times" aria-hidden="true"></i>
                    </span>
                </div>
                <div class="content">
                    <div class="row">
                        <h3 class="white">Charts</h3>
                        <div class="row" id="allCharts">

                        </div>
                    </div>
                </div>
            </div>
        `;
    }

    bindEvents() {
        this.chartsCloseButton = document.getElementById('chartsCloseButton');

        // Event handler for close button for search dialog
        this.chartsCloseButton.onclick = (e) => {
            this.hideCharts();
        }
    }

    toggleCharts() {
        // Scroll to top to show the search dialog
        window.scrollTo(0, 0);

        this.isShown = !this.isShown;
        if (this.isShown) {
            $('#chartModalContainer').addClass('shown');
            if ($(window).width() <= 768)
                $('body').css({'overflow-y': 'hidden'});
            //if (window.innerWidth > 768) {
                $('#playerHero').addClass('unfocused');
            //}
        } else {
            // Reset dialog (must place up here to account for invalid input)
            $('#chartModalContainer').removeClass('shown'); // Hide the search modal
            if ($(window).width() <= 768) // For mobile UI
                $('body').css({'overflow-y': 'scroll'});

            //if (window.innerWidth > 768) {
                $('#playerHero').removeClass('unfocused');
            //}
        }
    }


    hideCharts() {
        // Reset dialog (must place up here to account for invalid input)
        $('#chartModalContainer').removeClass('shown'); // Hide the search modal
        if ($(window).width() <= 768) // For mobile UI
            $('body').css({'overflow-y': 'scroll'});
        this.isShown = false;
        //if (window.innerWidth > 768) {
            $('#playerHero').removeClass('unfocused');
        //}
    }

}

/* harmony default export */ __webpack_exports__["a"] = (Charts);

/***/ }),
/* 9 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__queueitem__ = __webpack_require__(10);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__js_utils__ = __webpack_require__(1);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__js_settings__ = __webpack_require__(2);




class Dashboard {

    constructor(player) {
        this._player = player;
        this.isShown = false;
        this.queueItemCount = 0; // Counts number of songs on queue
        this.queuedTime = 0; // Total time of queued songs
        document.querySelector('#dashboardModalContainer').innerHTML += this.render();
        this.bindEvents();
        __WEBPACK_IMPORTED_MODULE_2__js_settings__["a" /* default */].loadPrefs(); // Init settings
        this.updateControls(); // Update settings controls
    }

    render() {
        return `
            <div class="hero-body">
                <div id="dashboardCloseBtn" class="dialog-close-btn link-btn">
                    <span class="icon">
                        <i class="fa fa-times" aria-hidden="true"></i>
                    </span>
                </div>
                <div id="tabs" class="content">
                    <div class="tab-container tabs-center">
                        <ul>
                            <li class="tab-item selected">
                                <a>Settings</a>
                            </li>
                            <li id="queueTab" class="tab-item">
                                <a>Queue</a>
                            </li>
                            <li class="tab-item">
                                <a>About</a>
                            </li>
                        </ul>
                    </div>
                    <space class="large"></space>
                    <div class="tabpage shown">
                        <h3>Settings</h3>
                        <div class="divider"></div>
                        <div class="scrollable-container">
                            <p class="settings-title">Shuffle Mode</p>
                            <div class="row">
                                <li class="settings-rb">
                                    <input type="radio" id="radioRandom" name="selector">
                                    <label for="radioRandom">Random Tracks</label>
                                    <div class="check"></div>
                                </li>

                                <li class="settings-rb">
                                    <input type="radio" id="radioRelated" name="selector">
                                    <label for="radioRelated">Related Tracks</label>
                                    <div class="check"></div>
                                </li>
                            </div>

                            <p class="settings-title">Appearance</p>
                            <div class="row">
                                <div class="toggle-container">
                                    <p>Disable Animations</p>
                                    <div class="toggle-switch"><input type="checkbox" id="chkAnimations"/><label for="chkAnimations"></label></div>
                                </div>
                                <div class="toggle-container">
                                    <p>Disable Blur</p>
                                    <div class="toggle-switch"><input type="checkbox" id="chkBlur"/><label for="chkBlur"></label></div>
                                </div>
                            </div>

                            <p class="settings-title">Advanced</p>
                            <div class="row">
                                <div class="toggle-container">
                                    <p>Debug Mode</p>
                                    <div class="toggle-switch"><input type="checkbox" id="chkDebug"/><label for="chkDebug"></label></div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="tabpage">
                        <h3>Queue</h3>
                        <div class="row level">
                            <p id="totalQueueTime" class="no-margin" style="flex-grow: 1"></p>
                            <button id="btnClearQueue" class="btn-small btn-nimbus">Clear Queue</button>
                        </div>
                        <div class="divider"></div>
                        <space></space>
                        <div id="queueContainer" class="scrollable-container">

                        </div>
                    </div>

                    <div class="tabpage">
                        <h3>About</h3>
                        <div class="divider"></div>
                        <div class="row text-center">
                            <img class="center" src="../img/NimbusLogo.png" style="max-width: 200px; width: 100%;" />
                            <p class="no-margin">An open source SoundCloud client for discovering and streaming tracks. Made with <i class="fa fa-heart animated pulse pad-left pad-right" style="color:#e90606"></i> in New York.<br/>
                            Nimbus is not affiliated with SoundCloud.<br />
                            Shout out to <a href="https://unsplash.com/" target="_blank">Unsplash</a> for the amazing photography. <br /> Copyright &copy; ${new Date().getFullYear()} Stanley Lim</p>
                            <space class="x-large"></space>
                            <div class="row center">
                                <a href="https://github.com/Spiderpig86/Nimbus" target="_blank"><button class="btn-nimbus">Github</button></a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        `;
    }

    bindEvents() {
        this.dashboardCloseBtn = document.getElementById('dashboardCloseBtn');
        this.queueTab = document.getElementById('queueTab');
        this.queueContainer = document.getElementById('queueContainer');
        this.btnClearQueue = document.getElementById('btnClearQueue');

        // Settings
        this.rbRandom = document.getElementById('radioRandom');
        this.rbRelated = document.getElementById('radioRelated');
        this.chkAnimations = document.getElementById('chkAnimations');
        this.chkBlur = document.getElementById('chkBlur');
        this.chkDebug = document.getElementById('chkDebug');

        // Event handler for close button for search dialog
        this.dashboardCloseBtn.onclick = (e) => {
            this.hideDashboard();
        }

        this.queueTab.onclick = (e) => {
            // Update queue items
            this.refreshQueueContainer();
        }

        this.btnClearQueue.onclick = (e) => {
            this.clearQueue();
        }

        this.bindSettingsControls();
    }

    bindSettingsControls() {
        // Settings controls
        this.rbRandom.onclick = (e) => {
            __WEBPACK_IMPORTED_MODULE_2__js_settings__["a" /* default */].storePref('shuffleMode', 'random');
            console.log(__WEBPACK_IMPORTED_MODULE_2__js_settings__["a" /* default */].getPref('shuffleMode'));
        }

        this.rbRelated.onclick = (e) => {
            __WEBPACK_IMPORTED_MODULE_2__js_settings__["a" /* default */].storePref('shuffleMode', 'related');
            console.log(__WEBPACK_IMPORTED_MODULE_2__js_settings__["a" /* default */].getPref('shuffleMode'));
        }

        this.chkAnimations.onclick = (e) => {
            __WEBPACK_IMPORTED_MODULE_2__js_settings__["a" /* default */].storePref('disableAnimations', this.chkAnimations.checked);
            if (this.chkAnimations.checked && !document.getElementById("disableAnimations")) {
                $(__WEBPACK_IMPORTED_MODULE_2__js_settings__["a" /* default */].disableAnimationsCSS).appendTo("head");
            } else {
                $('#disableAnimations').remove(); // Remove the style sheet
            }
        }

        this.chkBlur.onclick = (e) => {
            __WEBPACK_IMPORTED_MODULE_2__js_settings__["a" /* default */].storePref('disableBlur', this.chkBlur.checked);
            if (this.chkBlur.checked && !document.getElementById("disableBlur")) {
                $(__WEBPACK_IMPORTED_MODULE_2__js_settings__["a" /* default */].disableBlurCSS).appendTo("head");
            } else {
                $('#disableBlur').remove(); // Remove the style sheet
            }
        }

        this.chkDebug.onclick = (e) => {
            __WEBPACK_IMPORTED_MODULE_2__js_settings__["a" /* default */].storePref('debug', this.chkDebug.checked);
        }
    }

    updateControls() {

        // Update settings controls
        this.chkAnimations.checked = JSON.parse(__WEBPACK_IMPORTED_MODULE_2__js_settings__["a" /* default */].getPref('disableAnimations'));
        this.chkBlur.checked = JSON.parse(__WEBPACK_IMPORTED_MODULE_2__js_settings__["a" /* default */].getPref('disableBlur'));
        this.chkDebug.checked = JSON.parse(__WEBPACK_IMPORTED_MODULE_2__js_settings__["a" /* default */].getPref('debug'));

        if (__WEBPACK_IMPORTED_MODULE_2__js_settings__["a" /* default */].getPref('shuffleMode') === 'random') // Quotes keep appearing due to JSON storage
            this.rbRandom.checked = true;
        else
            this.rbRelated.checked = true;
    }

    toggleDashboard() {
        // Scroll to top to show the search dialog
        window.scrollTo(0, 0);

        this.isShown = !this.isShown;
        if (this.isShown) {
            $('#dashboardModalContainer').addClass('shown');
            if ($(window).width() <= 768)
                $('body').css({'overflow-y': 'hidden'});
            this.refreshQueueContainer();
            //if (window.innerWidth > 768) {
                $('#playerHero').addClass('unfocused');
            //}
        } else {
            // Reset dialog (must place up here to account for invalid input)
            $('#dashboardModalContainer').removeClass('shown'); // Hide the search modal
            if ($(window).width() <= 768) // For mobile UI
                $('body').css({'overflow-y': 'scroll'});

            //if (window.innerWidth > 768) {
                $('#playerHero').removeClass('unfocused');
            //}
        }
    }


    hideDashboard() {
        // Reset dialog (must place up here to account for invalid input)
        $('#dashboardModalContainer').removeClass('shown'); // Hide the search modal
        if ($(window).width() <= 768) // For mobile UI
            $('body').css({'overflow-y': 'scroll'});
        this.isShown = false;
        //if (window.innerWidth > 768) {
            $('#playerHero').removeClass('unfocused');
        //}
    }
    
    refreshQueueContainer() {
        this.queueContainer.innerHTML = `<div></div>`; // Clear the container
        if (this._player.queue.length > 0 ) {
            this.queueItemCount = 0;
            this.queuedTime = 0;
            let q = null;
            let frag = document.createElement('div');;
            for (let i = this._player.queue.length - 1; i >= 0; i--) {
                q = new __WEBPACK_IMPORTED_MODULE_0__queueitem__["a" /* default */](this._player, this._player.queue[i].track);
                frag.appendChild(q.render());
                this.queuedTime += q._track.duration;
                this.queueItemCount += 1;
            }
            this.queueContainer.appendChild(frag);

            $('.queueDelete').on('click', () => { // Add event handler on all tracks, not the most efficient: https://stackoverflow.com/questions/11248855/how-do-i-use-jquery-get-the-id-of-the-div-which-has-been-clicked-on
                let curIndex = this._player.queue.map((track) => {return String(track.id)}).indexOf(String($(event.currentTarget).attr('data-id'))); // Find the song's id associated with this object in the queue
                // NOTE: Must convert mapped vars to string or same datatype in order to check for equality
                if (curIndex === -1) return; // In case we couldn't find it, which is an error
                this._player.queue.splice(curIndex, 1); // Remove the element
                this.refreshQueueContainer(); // Update the queue container
            });
        } else {
            this.queueItemCount = 0;
            this.queuedTime = 0;
            // Notification that queue is empty
            this.queueContainer.innerHTML = `<div class="text-center">
                <h6 class="light" style="color: #717579;">
                Looks like your queue is empty. Nimbus will continue to fetch music in the background.</h6>
            </div>`;
        }

        document.querySelector('#totalQueueTime').innerText = __WEBPACK_IMPORTED_MODULE_1__js_utils__["a" /* default */].convertMillisecondsToDigitalClock(this.queuedTime).clock_long + ', ' + this._player.queue.length + ' songs';
    }

    clearQueue() {
        this._player.queue = []; // Clear the queue
        this.queueItemCount = 0;
        this.queuedTime = 0;
        document.querySelector('#totalQueueTime').innerText = __WEBPACK_IMPORTED_MODULE_1__js_utils__["a" /* default */].convertMillisecondsToDigitalClock(this.queuedTime).clock_long + ', ' + this._player.queue.length + ' songs';
        this.queueContainer.innerHTML = `<div class="text-center">
                <h6 class="light" style="color: #717579;">
                Looks like your queue is empty. Nimbus will continue to fetch music in the background.</h6>
            </div>`;
    }
}

/* harmony default export */ __webpack_exports__["a"] = (Dashboard);

/***/ }),
/* 10 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__js_utils__ = __webpack_require__(1);


class QueueItem {

    constructor(player, track) {
        this._player = player;
        this._track = track;

        this.queueItem = document.createElement('div');
        this.queueItem.innerHTML = `
            <div class="queue-item">
                <h6 class="title light btn-tooltip" data-tooltip="${this._track.title}"><span>${this._track.title}</span><div class="pull-right">${__WEBPACK_IMPORTED_MODULE_0__js_utils__["a" /* default */].convertMillisecondsToDigitalClock(this._track.duration).clock}</div></h6>
                <p class="subtitle"><span>${this._track.user.username}</span>
                    <span class="queue-item-actions pull-right">
                        <a href="${this._track.permalink_url}" target="_blank"><span class="icon"><i class="fa fa-external-link-square small" aria-hidden="true"></i></span></a>
                        <span class="icon queueDelete" data-id="${this._track.id}"><i class="fa fa-times small" aria-hidden="true"></i></span>
                    </span>
                </p>
            </div>
        `;
    }

    render() {
        return this.queueItem;
    }

    bindEvents() {
        // Event binded in player.js
    }
}

/* harmony default export */ __webpack_exports__["a"] = (QueueItem);

/***/ }),
/* 11 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__chartitem__ = __webpack_require__(4);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__js_utils__ = __webpack_require__(1);



let SC = __webpack_require__(0);

class Search {

    constructor(player) {
        this._player = player;
        this.isShown = false;
        
        this.render();
        this.bindEvents();

        this.loadCharts();
    }

    render() {
        // Create the search dialog html
        document.querySelector('#searchModalContainer').innerHTML += `
            <div class="hero-body">
                <div id="searchCloseBtn" class="dialog-close-btn link-btn">
                    <span class="icon">
                        <i class="fa fa-times" aria-hidden="true"></i>
                    </span>
                </div>
                <div class="content">
                    <space style="height: 20vh;"></space>
                    <h6 class="uppercase">Search for songs, <span class="search-item" id="searchSets">sets</span>, <span class="search-item" id="searchUser">users</span>, <span class="search-item" id="searchTags">tags</span>, and more</h6>
                    <input type="text" placeholder="search" id="searchField"/>
                    <space></space>
                    <div class="overflow-container">
                        <div class="row level" id="optionsContainer">
                            <label class="button-switch btn-tooltip" data-tooltip="Shuffle tracks before adding to queue.">
                                <input type="checkbox" name="shuffle" value="Shuffle" id="chkShuffle"/>
                                <span class="uppercase">Shuffle</span>
                            </label>
                            <label class="button-switch btn-tooltip" data-tooltip="Number of results to queue.">
                                <input type="checkbox" name="results" value="results" id="chkNumber">
                                <span id="chkNumberText" class="uppercase">120 results</span>
                            </label>
                        </div>
                    </div>
                    <space class="x-large"></space>
                    <div class="row">
                        <div class="row level toggle-container">
                            <h3 class="white">Featured</h3>
                            <button id="charts-btn" class="btn-nimbus">View All</button>
                        </div>
                        <div class="row flex expand" id="chartContainer">

                        </div>
                    </div>
                </div>
            </div>
            `;
    }

    bindEvents() {
        this.searchCloseBtn = document.getElementById('searchCloseBtn');
        this.searchField = document.getElementById('searchField');
        this.chkShuffle = document.getElementById('chkShuffle');
        this.chkNumber = document.getElementById('chkNumber');
        this.btnCharts = document.getElementById('charts-btn');

        this.searchSets = document.getElementById('searchSets');
        this.searchUser = document.getElementById('searchUser');
        this.searchTags = document.getElementById('searchTags');

        // Bind search field key combination
        this.searchField.onkeydown = (e) => {
            if (e.keyCode === 13) {
                // EDIT: If the queue is nonempty, preserve the queue elements and just insert the song in between history and queue (no code)

                // Hide the search dialog
                this.hideSearchDialog();
                this.processSearchField();
            }
        }

        document.onkeyup = (e) => {
            if (e.keyCode === 27) { // esc
                this.toggleSearchDialog();
            }
        }

        // Event handler for close button for search dialog
        this.searchCloseBtn.onclick = (e) => {
            this.hideSearchDialog();
        }

        this.chkShuffle.onclick = (e) => {
            this._player.shuffleQueue = this.chkShuffle.checked;
        }

        this.chkNumber.onclick = (e) => {
            this.setResultCount();
        }

        this.searchSets.onclick = (e) => {
            this.searchItemClick(this.searchSets);
            this.searchField.focus();
        }  

        this.searchUser.onclick = (e) => {
            this.searchItemClick(this.searchUser);
            this.searchField.focus();
        }

        this.searchTags.onclick = (e) => {
            this.searchItemClick(this.searchTags);
            this.searchField.focus();
        }

        // Event handler to show the charts
        this.btnCharts.onclick = (e) => {
            this.hideSearchDialog();
            this._player.chartsDialog.toggleCharts();
        }
    }

    async processSearchField() {
        // Check if input is empty
        if (this.searchField.value.length === 0)
            return; // Exit

        let iframeID = document.getElementById('widgettest');
        this._player.curPlayer = SC.Widget(iframeID);

        let searchQuery = this.searchField.value.toLowerCase(); // Assign the search query

        // Determine input type
        if (searchQuery.startsWith('http') && isNaN(searchQuery)) { // Check if this is a url
            this._player.isPlaylist = false; // Reset
            if (searchQuery.includes('sets')) {
                this._player.isPlaylist = true;
            }                    
            //this._player.curPlayer.load(`${searchQuery}`);

            let p = this._player;
            // Resolve song url through API
            SC.resolve(searchQuery).then((response) => {
                try {
                    this._player.queue.push({id: response.id, track: response});
                    __WEBPACK_IMPORTED_MODULE_1__js_utils__["a" /* default */].showToast(`Added ${response.title} to the queue.`);
                } catch (e) {
                    console.log('processSearchField Error - ' + e.message);
                }
            });
        } else if (isNaN(searchQuery)) { // Check if this is a string query
            // Check tags
            if (searchQuery.startsWith('playlist:') || searchQuery.startsWith('set:')) {
                this._player.getSetByKeyWord(searchQuery.split(':')[1].trim());
            } else if (searchQuery.startsWith('tag:') || searchQuery.startsWith('tags:')) {
                this._player.getTracksByTags(searchQuery.split(':')[1].trim());
                this._player.isPlaylist = false;
            } else if (searchQuery.startsWith('user:')){
                this._player.getTracksByUser(searchQuery.split(':')[1].trim());
                this._player.isPlaylist = false;
            } else if (searchQuery.startsWith('genre:') || searchQuery.startsWith('genres:')) {
                this._player.getTracksByGenres(searchQuery.split(':')[1].trim());
                this._player.isPlaylist = false;
            } else {
                this._player.getTrackByKeyWord(searchQuery);
                this._player.isPlaylist = false;
            }
        } else { // Must be a song ID
            this._player.curPlayer.load(`https%3A//api.soundcloud.com/tracks/${searchQuery}`); // For id
            this._player.isPlaylist = false;
            setTimeout(() => this._player.loadWidgetSong(this._player.curPlayer), 2000); // Needs longer delay time so it prevents stalling (track not auto playing)
        }
    }

    toggleSearchDialog() {
        // Scroll to top to show the search dialog
        window.scrollTo(0, 0);

        this.isShown = !this.isShown;
        if (this.isShown) {
            this.searchField.value = "";
            this.searchField.focus();
            $('#searchModalContainer').addClass('shown');
            if ($(window).width() <= 768)
                $('body').css({'overflow-y': 'hidden'});

            //if (window.innerWidth > 768) {
                $('#playerHero').addClass('unfocused');
            //}
        } else {
            // Reset dialog (must place up here to account for invalid input)
            $('#searchModalContainer').removeClass('shown'); // Hide the search modal
            if ($(window).width() <= 768) // For mobile UI
                $('body').css({'overflow-y': 'scroll'});

            //if (window.innerWidth > 768) {
                $('#playerHero').removeClass('unfocused');
            //}
        }
    }


    hideSearchDialog() {
        // Reset dialog (must place up here to account for invalid input)
        $('#searchModalContainer').removeClass('shown'); // Hide the search modal
        if ($(window).width() <= 768) // For mobile UI
            $('body').css({'overflow-y': 'scroll'});

        //if (window.innerWidth > 768) {
            $('#playerHero').removeClass('unfocused');
        //}
        this.isShown = false;
    }

    // Search tag buttons
    searchItemClick(element) {
        switch (element.id) {
            case 'searchSets':
                this.searchField.value = 'set: ';
                break;
            case 'searchUser':
                this.searchField.value = 'user: ';
                break;
            case 'searchTags':
                this.searchField.value = 'tags: ';
        }
    }

    setResultCount() {
        let count = prompt('How many results do you want to queue?');

        if (count === null || !isFinite(count)) {
            __WEBPACK_IMPORTED_MODULE_1__js_utils__["a" /* default */].showToast('Please enter a numerical value and try again.');
            this.chkNumber.checked = false;
            return;
        }
        $('#chkNumberText').text(`${count} results`);
        this._player.queueNum = count;
    }

    loadCharts() {
        let c = null;
        this.chartContainer = document.querySelector('#chartContainer');
        $.ajax({
            url: 'http://polarity.x10.mx/nimbus/featured.json',
            type: "GET",
            dataType:'json', 
            success: (data) => {
                for (let i = 0; i < data.collection.length; i++) {
                    c = new __WEBPACK_IMPORTED_MODULE_0__chartitem__["a" /* default */](this._player, data.collection[i].chart.title, data.collection[i].chart.author, data.collection[i].chart.kind, data.collection[i].chart.genre_url, data.collection[i].chart.limit, data.collection[i].chart.image_url);
                    this.chartContainer.appendChild(c.render());
                }
            }
        });
        
    }

}

/* harmony default export */ __webpack_exports__["a"] = (Search);

/***/ }),
/* 12 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
const SongInfo = (largeArt, track, tags, errorPurchase) => (
    `
        <div class="card level">
            <div class="content-no-padding text-center">
                    <div class="row center" id="artContainer">
                        <div class="col-12 no-margin no-padding">
                            <div class="flipContainer" id="flipContainer">
                                <img id="songArt" src="${largeArt}">
                                <div class="song-desc">
                                    <div class="content-no-padding">
                                        <div class="row text-center" id="descNavBar">
                                            <button class="btn-transparent" id="desc-likes"><i class="fa fa-heart small" aria-hidden="true"></i><span>${track.likes_count}</span></button>
                                            <a href="${track.permalink_url + '/comments'}" target="_blank"><button class="btn-transparent" id="desc-comments"><i class="fa fa-comment small" aria-hidden="true"></i><span>${track.comment_count || 0}</span></button></a>
                                            <button class="btn-transparent" id="desc-reposts"><i class="fa fa-retweet small" aria-hidden="true"></i><span>${track.reposts_count}</span></button>
                                            <a href="${track.user.permalink_url}" target="_blank"><button class="btn-transparent" id="desc-user"><i class="fa fa-user small" aria-hidden="true"></i><span>${track.user.username}</span></button></a>
                                            <a href="${track.user.purchase_url || errorPurchase}" target="_blank"><button class="btn-transparent" id="desc-buy"><i class="fa fa-usd small" aria-hidden="true"></i><span>Purchase</span></button></a>
                                        </div>
                                        <div class="row text-center" id="descStats">
                                            <p>Created: ${track.created_at.split('T')[0].replace(/-/g, ' / ')}</p>
                                        </div>
                                        <div class="row" id="descTags">
                                            ${tags}
                                        </div>
                                    </div>
                                    <space class="large"></space>
                                    <div class="content">
                                        <pre>${track.description || 'No description available.'}</pre>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <h5 id="trackTitle" class="light">${track.title}</h5>
                    <p class="title uppercase" id="trackUser">${track.user.username}</p>
                    <p class="subtitle" id="curTime">0:00 / 4:20</p>
                    <div class="waveform"></div>
                    <space></space>
                    <div class="level" id="volumeContainer">
                        <span class="icon"><i class="fa fa-volume-off" aria-hidden="true"></i></span>
                        <input id="volumeSlider" type="range" min="0" max="100" value="0" class="range"/>
                    </div>
            </div>
        </div>
    `
);

/* harmony default export */ __webpack_exports__["a"] = (SongInfo);

/***/ }),
/* 13 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__js_settings__ = __webpack_require__(2);
/**
 * Draws the waveform component of the player.
 */

let SC = __webpack_require__(0);

class WaveForm {

    /**
     * Constructor for the waveform
     * @param {WaveFormConfig} - {
            container: HTMLElement,
            audio: Audio,
            data: Array,
            peakWidth: number,
            peakSpace: number,
            responsive: boolean,
            mouseOverEvents: boolean,
            color: {
                background: string,
                footer: string,
                footerPlayback: string,
                hoverGradient: {
                    from: string,
                    to: string
                },
                    playbackGradient: {
                    from: string,
                    to: string
                },
                    hoverPlaybackGradient: {
                    from: string,
                    to: string
                }
            }
        }
     */
    constructor(params) {
        this.currentPosition = 0;
        this.duration = 0;
        this.mouseOver = false;
        this.canvas = null;

        this.waveFormFrame = 0;
        this.updateInterval = (__WEBPACK_IMPORTED_MODULE_0__js_settings__["a" /* default */].getPref('batterySaver') ? 100 : 10); // Update every whatever metric SC uses

        // Create the config file for the waveform settings
        this.config = {
            container: null,
            audio: null,
            duration: 0,
            data: null,
            peakWidth: 2, // Pixel width of the vertical lines in the waveform
            peakSpace: 2, // The space between the peaks in pixels
            responsive: true,
            mouseOverEvents: true,
            mouseClickEvents: true,
            // Color config
            color: {
                background: "#8C8C8C",
                footer: "#B2B2B2",
                footerPlayback: "#FFAA80",
                hoverGradient: {
                from: "#FF7200",
                to: "#DA4218"
                },
                playbackGradient: {
                    from: "#FF7200",
                    to: "#DA4218"
                },
                hoverPlaybackGradient: {
                    from: "#AB5D20",
                    to: "#A84024"
                }
            }
        }; // Config object end

        if (params) { // Check if not null
            Object.assign(this.config, params); // Enumerate through fields and assign them to corresponding fields in this.config (Similar to serializing)
        }

        // Update duration
        this.duration = this.config.duration;

        this.buildCanvas();
        this.bindEvents();
        this.drawWaveForm(); // Draw the waveform
    }

    /**
     * Create the canvas
     */
    buildCanvas() {
        this.canvas = document.createElement('canvas'); // Create the canvas element
        this.config.container.appendChild(this.canvas); // Update the container to the canvas object
        this.updateCanvasSize();
        this.ctx = this.canvas.getContext('2d');
        this.ctx.lineWidth = this.config.peakWidth; // Sets the width of each vertical line in the canvas.
    }

    /**
     * Bind waveform events
     */
    bindEvents() {
        if (this.config.responsive) // If waveform is responsive, resize with parent.
            this.onResizeHandler();

        if (this.config.mouseOverEvents) { // Enable mouse over/leave events
            this.onMouseMoveHandler();
            this.onMouseLeaveHandler();
        }

        if (this.config.mouseClickEvents) // Enable mouse click handling
            this.onMouseClickHandler();
        
        if (this.config.audio) { // TODO: Need to figure out how to bind with widget API, not regular API.
            this.onTimeUpdateHandler();
            this.onCanPlayHandler();
        }
    }

    /**
     * EVENT HANDLERS
     */

     /**
      * This fires when the widget is ready and updates the waveform by duration and current time.
      * NOTE: This event might not be fired.
      */
    onCanPlayHandler() {
        // READY signal might not be needed
        this.config.audio.bind(SC.Widget.Events.READY, (e) => {
            this.currentPosition = this.config.audio.currentPosition;
            this.drawWaveForm();
        });
    }

    /**
     * Event fired when time updates in the widget object
     */
    onTimeUpdateHandler() {
        this.config.audio.bind(SC.Widget.Events.PLAY_PROGRESS, (e) => {
            this.currentPosition = e.currentPosition;
            this.waveFormFrame++;
            if (this.waveFormFrame % this.updateInterval === 0) {
                this.drawWaveForm();
            }
        });
    }

    /**
     * Update waveform colors based on mouse location
     */
    onMouseMoveHandler() {
        this.canvas.addEventListener('mousemove', event => {
            this.mouseOver = this.getMousePosition(event); // Assign coords to mouseOver
            this.drawWaveForm(); // Update waveform
        });
    }

    /**
     * Handles when the mouse leaves the waveform area
     */
    onMouseLeaveHandler() {
        this.canvas.addEventListener('mouseleave', () => {
            this.mouseOver = null;
            this.drawWaveForm(); // Update waveform
        });
    }

    /**
     * Handles the mouse click
     */
    onMouseClickHandler() {
        this.canvas.addEventListener('click', event => {
            // Get left click and time > 0
            if (event.button === 0 && this.duration) {
                let x = event.offsetX || event.layerX;

                if (this.config.audio) { // Audio is not null
                    this.config.currentPosition = parseInt(this.duration / 100 * (x / (this.config.container.clientWidth / 100))); // Update the track position
                    this.config.audio.seekTo(Math.floor(this.config.currentPosition));
                } else {
                    this.currentTime = parseInt(this.duration / 100 * (x / (this.config.container.clientWidth / 100)));
                }

                this.drawWaveForm();
            }
        });
    }

    /**
     * Get the mouse position relative to canvas location.
     * @param {MouseEvent} event
     * @return {{x: number, y: number}}
     */
    getMousePosition(e) {
        let rect = this.canvas.getBoundingClientRect();
        return {
            x: event.clientX - rect.left, // Get x position relative to canvas left border
            y: event.clientY - rect.top // Get y position relative to canvas top border
        };
    }

    /**
     * Handles when the window object resizes to redraw the waveform according to the container size. This is only redrawn when sizes are different.
     */
    onResizeHandler() {
        let oldWidth = this.config.container.clientWidth; // Get dimensions of the contaner that holds the canvas
        let oldHeight = this.config.container.clientHeight;

        window.addEventListener('resize', () => {
            if (oldWidth !== this.config.container.clientWidth || oldHeight !== this.config.container.clientHeight) { 

                // Update tracked previous dimensions on resize
                oldWidth = this.config.container.clientWidth;
                oldHeight = this.config.container.clientHeight;
                this.updateCanvasSize(); // Refresh the display
                this.drawWaveForm(); // Draw it
            }
        });
    }

    /**
     * Update the canvas size to match the container. (Probably could be replaced with CSS)
     */
    updateCanvasSize() {
        this.canvas.width = this.config.container.clientWidth;
        this.canvas.height = this.config.container.clientHeight;
    }

    /**
     * WAVEFORM COLORING
     */

     /**
      * Construct a linear gradient over the waveform
      * 
      * @param {number} x1
      * @param {number} y1 
      * @param {number} x2 
      * @param {number} y2 
      * @param {{from: string, to: string}} param - param object that holds the color values as strings.
      * @returns {CanvasGradient}
      *
      * @memberof WaveForm
      */
    getGradient(x1, y1, x2, y2, param) {
        let gradient = this.ctx.createLinearGradient(x1, y1, x2, y2);
        
        // Color sections of the gradient with colors in param.* where indexes indicate start and end positions.
        gradient.addColorStop(0, param.from);
        gradient.addColorStop(1, param.to);

        return gradient;
    }

    /**
     * Construct a linear gradient on mouse hover
     * 
     * @param {number} x1 
     * @param {number} y1 
     * @param {number} x2 
     * @param {number} y2 
     * @returns {CanvasGradient}
     * 
     * @memberof WaveForm
     */
    getHoverGradient(x1, y1, x2, y2) {
        // Return gradient with hovered colors.
        return this.getGradient(x1, y1, x2, y2, {
            from: this.config.color.hoverGradient.from,
            to: this.config.color.hoverGradient.to
        });
    }

    /**
     * Construct a linear gradient for playback peak
     * 
     * @param {number} x1 
     * @param {number} y1 
     * @param {number} x2 
     * @param {number} y2 
     * @returns {CanvasGradient}
     * 
     * @memberof WaveForm
     */
    getPlayBackGradient(x1, y1, x2, y2) {
        // Return gradient with playback colors (in progress colors)
        return this.getGradient(x1, y1, x2, y2, {
            from: this.config.color.playbackGradient.from,
            to: this.config.color.playbackGradient.to
        });
    }

    /**
     * Construct linear gradient for playback colors on mouse hover
     * 
     * @param {number} x1 
     * @param {number} y1 
     * @param {number} x2 
     * @param {number} y2 
     * @returns {CanvasGradient}
     * 
     * @memberof WaveForm
     */
    getHoverPlayBackGradient(x1, y1, x2, y2) {
        return this.getGradient(x1, y1, x2, y2, {
            from: this.config.color.hoverPlaybackGradient.from,
            to: this.config.color.hoverPlaybackGradient.to 
        });
    }

    /**
     * Draw the stroke style according to the mouse position.
     * 
     * @param {number} x 
     * @param {number} y 
     * @param {number} lineBreak 
     * @param {number} playback 
     * @returns {config}
     * 
     * @memberof WaveForm
     */
    getContextStrokeStyle(x, y, lineBreak, playback) {
        if (this.config.mouseOverEvents) { // Used to check if this is enabled in the configs
            if (this.mouseOver && this.mouseOver.x >= x) {
                return this.getHoverGradient(x, y, x, lineBreak); // Color until the line break.
            }
        }
        
        if (playback >= x) { // If the song progress is greater than the x value
            if (this.config.mouseOverEvents) {
                if (this.mouseOver) {
                    return this.getHoverPlayBackGradient(x, y, x, lineBreak);
                }
            }

            return this.getPlayBackGradient(x, y ,x, lineBreak);
        }

        return this.config.color.background;
    }

    /**
     * Draw the waveform canvas object.
     * 
     * @memberof WaveForm
     */
    drawWaveForm() {
        // Parse waveform from url, ex: https://wis.sndcdn.com/ivasij2DQoqz_m.json

        // We need to calculate the offset of how many peaks we can display. If the wavform is at 100% width, we can display all, but if not, we need to select every N peaks to draw.
        // data.length - number of peaks in the waveform
        // config.peakWidth - default set to 2px in constrctor (width if individual peak)
        // conig.peakSpace - default set to 1px in the constructor (space between peak)
        let N = this.config.data.length / this.config.container.clientWidth * (this.config.peakWidth + this.config.peakSpace);

        let count = Math.floor(this.config.data.length / N); // Count how many peaks we will display (total peaks / every Nth peak by the amount of pixels they use)

        let playback = 0;

        // Needs checking
        if (!!this.duration && this.currentPosition >= 0) {
            playback = this.canvas.width / this.duration * this.currentPosition;
        }

        this.ctx.clearRect(0, 0, this.ctx.canvas.width, this.ctx.canvas.height);

        for (let i = 0, x = 0; i < count; i++, x += (this.config.peakWidth + this.config.peakSpace)) { // Iterate over all the peaks in the data and draw them. Increment by the amount of pixels they use (x).
            // Calculate the height of that peak so we can draw the line.
            let peakHeight = this.canvas.height / 140 * this.config.data[Math.round(i * N)];
            let y = (this.canvas.height / 2 - peakHeight / 2) * 1.5;

            // Calculate the line break which is the 2px line you see cutting across the waveform.
            let lineBreak = Math.floor(this.canvas.height / 1.33333) - 1;

            this.ctx.strokeStyle = this.getContextStrokeStyle(x, y, lineBreak, playback); // Get the gradient color to draw the line. Hovered events and other events already handled inside the method.

            this.ctx.beginPath();
            this.ctx.moveTo(x, y);
            this.ctx.lineTo(x, lineBreak); // Draw to break
            this.ctx.stroke();

            // Draw the peaks under the line break.
            if (playback >= x) {
                this.ctx.strokeStyle = this.config.color.footerPlayback; // Colored part of the playback
            } else {
                this.ctx.strokeStyle = this.config.color.footer; // Default color
            }

            this.ctx.beginPath();
            this.ctx.moveTo(x, lineBreak + 1);
            this.ctx.lineTo(x, peakHeight + y);
            this.ctx.stroke();
        }
    }

    /**
     * Set the current track time and redraw the waveform
     * 
     * @param {Number} currentPosition 
     * @param {Number} duration 
     * 
     * @memberof WaveForm
     */
    setPlayBack(currentPosition, duration) {
        this.currentPosition = currentPosition;
        this.duration = duration;
        this.drawWaveForm();
    }

    /**
     * Update the current data object.
     * 
     * @param {Data} data 
     * 
     * @memberof WaveForm
     */
    async updateWaveformData(data) {
        this.config.data = data;
        this.updateInterval = (__WEBPACK_IMPORTED_MODULE_0__js_settings__["a" /* default */].getPref('batterySaver') ? 100 : 10); 
        this.drawWaveForm();
    }

}

/* harmony default export */ __webpack_exports__["a"] = (WaveForm);

/***/ }),
/* 14 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
Object.defineProperty(__webpack_exports__, "__esModule", { value: true });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__player__ = __webpack_require__(6);
// Initialize the SoundCloud Player object


window.onload = () => {
    const sc_player = new __WEBPACK_IMPORTED_MODULE_0__player__["a" /* default */]();
    sc_player.start();

    var myTabs = tabs({
        el: '#tabs',
        tabNavigationLinks: '.tab-item',
        tabContentContainers: '.tabpage'
    });
    myTabs.init();
}


/***/ }),
/* 15 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__utils__ = __webpack_require__(1);

/**
 * Designed to fetch data using XMLHttp.
 */
class Request {

    /**
     * Creates an instance of Request.
     * 
     * @memberof Request
     */
    constructor() {
        __WEBPACK_IMPORTED_MODULE_0__utils__["a" /* default */].log('Init Request service');
    }

    get(url) {
         return new Promise(function (resolve, reject) {
            const xhr = new XMLHttpRequest();
            xhr.addEventListener("load", function() {
                if (this.status >= 200 && this.status < 300) {
                    resolve(this.responseText); // Resolve on valid response
                } else {
                    reject(this);
                }
            });

            xhr.addEventListener("error", function() {
                reject(this); // Reject on error
            });

            xhr.open('GET', url, true);
            xhr.send();
        });
    }

    /**
     * Get the JSON data for the waveform
     * 
     * @param {string} url 
     * @returns - WaveForm JSON object
     */
    async getJSON(url) {
        try {
            return JSON.parse(await this.get(url));
        } catch (e) {
            console.log(e);
            return []; // Return null
        }
    }
}

/* harmony default export */ __webpack_exports__["a"] = (Request);

/***/ })
/******/ ]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAgYTE2MGFmZjExZDdlYzQ0ZGQ0MjAiLCJ3ZWJwYWNrOi8vLy4vfi9zb3VuZGNsb3VkL3Nkay5qcyIsIndlYnBhY2s6Ly8vLi9wdWJsaWMvanMvdXRpbHMuanMiLCJ3ZWJwYWNrOi8vLy4vcHVibGljL2pzL3NldHRpbmdzLmpzIiwid2VicGFjazovLy8uL2NvbnN0cy1zZWMuanNvbiIsIndlYnBhY2s6Ly8vLi9wdWJsaWMvY29udHJvbHMvY2hhcnRpdGVtLmpzIiwid2VicGFjazovLy8uL3B1YmxpYy9jb250cm9scy90b2FzdC5qcyIsIndlYnBhY2s6Ly8vLi9wdWJsaWMvanMvcGxheWVyLmpzIiwid2VicGFjazovLy8uL3B1YmxpYy9jb250cm9scy9IaXN0SXRlbS5qcyIsIndlYnBhY2s6Ly8vLi9wdWJsaWMvY29udHJvbHMvY2hhcnRzLmpzIiwid2VicGFjazovLy8uL3B1YmxpYy9jb250cm9scy9kYXNoYm9hcmQuanMiLCJ3ZWJwYWNrOi8vLy4vcHVibGljL2NvbnRyb2xzL3F1ZXVlaXRlbS5qcyIsIndlYnBhY2s6Ly8vLi9wdWJsaWMvY29udHJvbHMvc2VhcmNoLmpzIiwid2VicGFjazovLy8uL3B1YmxpYy9jb250cm9scy9zb25naW5mby5qcyIsIndlYnBhY2s6Ly8vLi9wdWJsaWMvY29udHJvbHMvd2F2ZWZvcm0uanMiLCJ3ZWJwYWNrOi8vLy4vcHVibGljL2pzL2FwcC5qcyIsIndlYnBhY2s6Ly8vLi9wdWJsaWMvanMvcmVxdWVzdC5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBQUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0EsbURBQTJDLGNBQWM7O0FBRXpEO0FBQ0E7QUFDQTtBQUNBO0FB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LHlGQUF5Rjs7QUFFekY7QUFDQTtBQUNBLDBDQUEwQztBQUMxQzs7QUFFQTtBQUNBO0FBQ0Esd0VBQXdFO0FBQ3hFLGFBQWE7QUFDYixnRUFBZ0U7QUFDaEU7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsT0FBTztBQUN0QixlQUFlLE9BQU87QUFDdEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLEtBQUs7QUFDcEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlJO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQSxpRTs7Ozs7Ozs7QUMzYUE7QUFBQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBOzs7Ozs7Ozs7QUNiQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtDQUErQztBQUMvQyxpQkFBaUI7QUFDakI7QUFDQTtBQUNBLGFBQWE7O0FBRWI7QUFDQSw2QkFBNkI7QUFDN0IsYUFBYTs7QUFFYjtBQUNBO0FBQ0EsU0FBUztBQUNUOztBQUVBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsT0FBTztBQUN0QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0Esc0JBQXNCO0FBQ3RCO0FBQ0E7QUFDQTs7QUFFQSxnRSIsImZpbGUiOiJhcHAubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pXG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG5cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGk6IG1vZHVsZUlkLFxuIFx0XHRcdGw6IGZhbHNlLFxuIFx0XHRcdGV4cG9ydHM6IHt9XG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIGlkZW50aXR5IGZ1bmN0aW9uIGZvciBjYWxsaW5nIGhhcm1vbnkgaW1wb3J0cyB3aXRoIHRoZSBjb3JyZWN0IGNvbnRleHRcbiBcdF9fd2VicGFja19yZXF1aXJlX18uaSA9IGZ1bmN0aW9uKHZhbHVlKSB7IHJldHVybiB2YWx1ZTsgfTtcblxuIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbiBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7XG4gXHRcdFx0XHRjb25maWd1cmFibGU6IGZhbHNlLFxuIFx0XHRcdFx0ZW51bWVyYWJsZTogdHJ1ZSxcbiBcdFx0XHRcdGdldDogZ2V0dGVyXG4gXHRcdFx0fSk7XG4gXHRcdH1cbiBcdH07XG5cbiBcdC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcbiBcdFx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcbiBcdFx0XHRmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7XG4gXHRcdHJldHVybiBnZXR0ZXI7XG4gXHR9O1xuXG4gXHQvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGxcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTtcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gMTQpO1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIHdlYnBhY2svYm9vdHN0cmFwIGExNjBhZmYxMWQ3ZWM0NGRkNDIwIiwiIWZ1bmN0aW9uKHQsZSl7aWYoXCJvYmplY3RcIj09dHlwZW9mIGV4cG9ydHMmJlwib2JqZWN0XCI9PXR5cGVvZiBtb2R1bGUpbW9kdWxlLmV4cG9ydHM9ZSgpO2Vsc2UgaWYoXCJmdW5jdGlvblwiPT10eXBlb2YgZGVmaW5lJiZkZWZpbmUuYW1kKWRlZmluZShbXSxlKTtlbHNle3ZhciBuPWUoKTtmb3IodmFyIGkgaW4gbikoXCJvYmplY3RcIj09dHlwZW9mIGV4cG9ydHM/ZXhwb3J0czp0KVtpXT1uW2ldfX0odGhpcyxmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbih0KXtmdW5jdGlvbiBlKGkpe2lmKG5baV0pcmV0dXJuIG5baV0uZXhwb3J0czt2YXIgcj1uW2ldPXtleHBvcnRzOnt9LGlkOmksbG9hZGVkOiExfTtyZXR1cm4gdFtpXS5jYWxsKHIuZXhwb3J0cyxyLHIuZXhwb3J0cyxlKSxyLmxvYWRlZD0hMCxyLmV4cG9ydHN9dmFyIG49e307cmV0dXJuIGUubT10LGUuYz1uLGUucD1cIlwiLGUoMCl9KFtmdW5jdGlvbih0LGUsbil7KGZ1bmN0aW9uKGUpe1widXNlIHN0cmljdFwiO3ZhciBpPW4oNCkscj1uKDgpLG89bigyKSxzPW4oOSksYT1uKDEpLlByb21pc2UsdT1uKDE1KSxoPW4oMTYpO3QuZXhwb3J0cz1lLlNDPXtpbml0aWFsaXplOmZ1bmN0aW9uKCl7dmFyIHQ9YXJndW1lbnRzLmxlbmd0aDw9MHx8dm9pZCAwPT09YXJndW1lbnRzWzBdP3t9OmFyZ3VtZW50c1swXTtvLnNldChcIm9hdXRoX3Rva2VuXCIsdC5vYXV0aF90b2tlbiksby5zZXQoXCJjbGllbnRfaWRcIix0LmNsaWVudF9pZCksby5zZXQoXCJyZWRpcmVjdF91cmlcIix0LnJlZGlyZWN0X3VyaSksby5zZXQoXCJiYXNlVVJMXCIsdC5iYXNlVVJMKSxvLnNldChcImNvbm5lY3RVUkxcIix0LmNvbm5lY3RVUkwpfSxnZXQ6ZnVuY3Rpb24odCxlKXtyZXR1cm4gaS5yZXF1ZXN0KFwiR0VUXCIsdCxlKX0scG9zdDpmdW5jdGlvbih0LGUpe3JldHVybiBpLnJlcXVlc3QoXCJQT1NUXCIsdCxlKX0scHV0OmZ1bmN0aW9uKHQsZSl7cmV0dXJuIGkucmVxdWVzdChcIlBVVFwiLHQsZSl9LFwiZGVsZXRlXCI6ZnVuY3Rpb24odCl7cmV0dXJuIGkucmVxdWVzdChcIkRFTEVURVwiLHQpfSx1cGxvYWQ6ZnVuY3Rpb24odCl7cmV0dXJuIGkudXBsb2FkKHQpfSxjb25uZWN0OmZ1bmN0aW9uKHQpe3JldHVybiBzKHQpfSxpc0Nvbm5lY3RlZDpmdW5jdGlvbigpe3JldHVybiB2b2lkIDAhPT1vLmdldChcIm9hdXRoX3Rva2VuXCIpfSxvRW1iZWQ6ZnVuY3Rpb24odCxlKXtyZXR1cm4gaS5vRW1iZWQodCxlKX0scmVzb2x2ZTpmdW5jdGlvbih0KXtyZXR1cm4gaS5yZXNvbHZlKHQpfSxSZWNvcmRlcjp1LFByb21pc2U6YSxzdHJlYW06ZnVuY3Rpb24odCxlKXtyZXR1cm4gaCh0LGUpfSxjb25uZWN0Q2FsbGJhY2s6ZnVuY3Rpb24oKXtyLm5vdGlmeURpYWxvZyh0aGlzLmxvY2F0aW9uKX19fSkuY2FsbChlLGZ1bmN0aW9uKCl7cmV0dXJuIHRoaXN9KCkpfSxmdW5jdGlvbih0LGUsbil7dmFyIGk7KGZ1bmN0aW9uKHQscixvLHMpey8qIVxuXHQgKiBAb3ZlcnZpZXcgZXM2LXByb21pc2UgLSBhIHRpbnkgaW1wbGVtZW50YXRpb24gb2YgUHJvbWlzZXMvQSsuXG5cdCAqIEBjb3B5cmlnaHQgQ29weXJpZ2h0IChjKSAyMDE0IFllaHVkYSBLYXR6LCBUb20gRGFsZSwgU3RlZmFuIFBlbm5lciBhbmQgY29udHJpYnV0b3JzIChDb252ZXJzaW9uIHRvIEVTNiBBUEkgYnkgSmFrZSBBcmNoaWJhbGQpXG5cdCAqIEBsaWNlbnNlICAgTGljZW5zZWQgdW5kZXIgTUlUIGxpY2Vuc2Vcblx0ICogICAgICAgICAgICBTZWUgaHR0cHM6Ly9yYXcuZ2l0aHVidXNlcmNvbnRlbnQuY29tL2pha2VhcmNoaWJhbGQvZXM2LXByb21pc2UvbWFzdGVyL0xJQ0VOU0Vcblx0ICogQHZlcnNpb24gICAyLjMuMFxuXHQgKi9cbihmdW5jdGlvbigpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIGEodCl7cmV0dXJuXCJmdW5jdGlvblwiPT10eXBlb2YgdHx8XCJvYmplY3RcIj09dHlwZW9mIHQmJm51bGwhPT10fWZ1bmN0aW9uIHUodCl7cmV0dXJuXCJmdW5jdGlvblwiPT10eXBlb2YgdH1mdW5jdGlvbiBoKHQpe3JldHVyblwib2JqZWN0XCI9PXR5cGVvZiB0JiZudWxsIT09dH1mdW5jdGlvbiBjKHQpe3E9dH1mdW5jdGlvbiBsKHQpe1E9dH1mdW5jdGlvbiBmKCl7dmFyIGU9dC5uZXh0VGljayxuPXQudmVyc2lvbnMubm9kZS5tYXRjaCgvXig/OihcXGQrKVxcLik/KD86KFxcZCspXFwuKT8oXFwqfFxcZCspJC8pO3JldHVybiBBcnJheS5pc0FycmF5KG4pJiZcIjBcIj09PW5bMV0mJlwiMTBcIj09PW5bMl0mJihlPXIpLGZ1bmN0aW9uKCl7ZShtKX19ZnVuY3Rpb24gZCgpe3JldHVybiBmdW5jdGlvbigpe0sobSl9fWZ1bmN0aW9uIHAoKXt2YXIgdD0wLGU9bmV3IGV0KG0pLG49ZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoXCJcIik7cmV0dXJuIGUub2JzZXJ2ZShuLHtjaGFyYWN0ZXJEYXRhOiEwfSksZnVuY3Rpb24oKXtuLmRhdGE9dD0rK3QlMn19ZnVuY3Rpb24gZygpe3ZhciB0PW5ldyBNZXNzYWdlQ2hhbm5lbDtyZXR1cm4gdC5wb3J0MS5vbm1lc3NhZ2U9bSxmdW5jdGlvbigpe3QucG9ydDIucG9zdE1lc3NhZ2UoMCl9fWZ1bmN0aW9uIF8oKXtyZXR1cm4gZnVuY3Rpb24oKXtzZXRUaW1lb3V0KG0sMSl9fWZ1bmN0aW9uIG0oKXtmb3IodmFyIHQ9MDtaPnQ7dCs9Mil7dmFyIGU9cnRbdF0sbj1ydFt0KzFdO2UobikscnRbdF09dm9pZCAwLHJ0W3QrMV09dm9pZCAwfVo9MH1mdW5jdGlvbiB5KCl7dHJ5e3ZhciB0PW4oMjYpO3JldHVybiBLPXQucnVuT25Mb29wfHx0LnJ1bk9uQ29udGV4dCxkKCl9Y2F0Y2goZSl7cmV0dXJuIF8oKX19ZnVuY3Rpb24gdigpe31mdW5jdGlvbiBFKCl7cmV0dXJuIG5ldyBUeXBlRXJyb3IoXCJZb3UgY2Fubm90IHJlc29sdmUgYSBwcm9taXNlIHdpdGggaXRzZWxmXCIpfWZ1bmN0aW9uIFMoKXtyZXR1cm4gbmV3IFR5cGVFcnJvcihcIkEgcHJvbWlzZXMgY2FsbGJhY2sgY2Fubm90IHJldHVybiB0aGF0IHNhbWUgcHJvbWlzZS5cIil9ZnVuY3Rpb24gQSh0KXt0cnl7cmV0dXJuIHQudGhlbn1jYXRjaChlKXtyZXR1cm4gdXQuZXJyb3I9ZSx1dH19ZnVuY3Rpb24gdyh0LGUsbixpKXt0cnl7dC5jYWxsKGUsbixpKX1jYXRjaChyKXtyZXR1cm4gcn19ZnVuY3Rpb24gVCh0LGUsbil7UShmdW5jdGlvbih0KXt2YXIgaT0hMSxyPXcobixlLGZ1bmN0aW9uKG4pe2l8fChpPSEwLGUhPT1uP0kodCxuKTpPKHQsbikpfSxmdW5jdGlvbihlKXtpfHwoaT0hMCxSKHQsZSkpfSxcIlNldHRsZTogXCIrKHQuX2xhYmVsfHxcIiB1bmtub3duIHByb21pc2VcIikpOyFpJiZyJiYoaT0hMCxSKHQscikpfSx0KX1mdW5jdGlvbiBiKHQsZSl7ZS5fc3RhdGU9PT1zdD9PKHQsZS5fcmVzdWx0KTplLl9zdGF0ZT09PWF0P1IodCxlLl9yZXN1bHQpOkQoZSx2b2lkIDAsZnVuY3Rpb24oZSl7SSh0LGUpfSxmdW5jdGlvbihlKXtSKHQsZSl9KX1mdW5jdGlvbiBQKHQsZSl7aWYoZS5jb25zdHJ1Y3Rvcj09PXQuY29uc3RydWN0b3IpYih0LGUpO2Vsc2V7dmFyIG49QShlKTtuPT09dXQ/Uih0LHV0LmVycm9yKTp2b2lkIDA9PT1uP08odCxlKTp1KG4pP1QodCxlLG4pOk8odCxlKX19ZnVuY3Rpb24gSSh0LGUpe3Q9PT1lP1IodCxFKCkpOmEoZSk/UCh0LGUpOk8odCxlKX1mdW5jdGlvbiBMKHQpe3QuX29uZXJyb3ImJnQuX29uZXJyb3IodC5fcmVzdWx0KSxNKHQpfWZ1bmN0aW9uIE8odCxlKXt0Ll9zdGF0ZT09PW90JiYodC5fcmVzdWx0PWUsdC5fc3RhdGU9c3QsMCE9PXQuX3N1YnNjcmliZXJzLmxlbmd0aCYmUShNLHQpKX1mdW5jdGlvbiBSKHQsZSl7dC5fc3RhdGU9PT1vdCYmKHQuX3N0YXRlPWF0LHQuX3Jlc3VsdD1lLFEoTCx0KSl9ZnVuY3Rpb24gRCh0LGUsbixpKXt2YXIgcj10Ll9zdWJzY3JpYmVycyxvPXIubGVuZ3RoO3QuX29uZXJyb3I9bnVsbCxyW29dPWUscltvK3N0XT1uLHJbbythdF09aSwwPT09byYmdC5fc3RhdGUmJlEoTSx0KX1mdW5jdGlvbiBNKHQpe3ZhciBlPXQuX3N1YnNjcmliZXJzLG49dC5fc3RhdGU7aWYoMCE9PWUubGVuZ3RoKXtmb3IodmFyIGkscixvPXQuX3Jlc3VsdCxzPTA7czxlLmxlbmd0aDtzKz0zKWk9ZVtzXSxyPWVbcytuXSxpP3gobixpLHIsbyk6cihvKTt0Ll9zdWJzY3JpYmVycy5sZW5ndGg9MH19ZnVuY3Rpb24gaygpe3RoaXMuZXJyb3I9bnVsbH1mdW5jdGlvbiBOKHQsZSl7dHJ5e3JldHVybiB0KGUpfWNhdGNoKG4pe3JldHVybiBodC5lcnJvcj1uLGh0fX1mdW5jdGlvbiB4KHQsZSxuLGkpe3ZhciByLG8scyxhLGg9dShuKTtpZihoKXtpZihyPU4obixpKSxyPT09aHQ/KGE9ITAsbz1yLmVycm9yLHI9bnVsbCk6cz0hMCxlPT09cilyZXR1cm4gdm9pZCBSKGUsUygpKX1lbHNlIHI9aSxzPSEwO2UuX3N0YXRlIT09b3R8fChoJiZzP0koZSxyKTphP1IoZSxvKTp0PT09c3Q/TyhlLHIpOnQ9PT1hdCYmUihlLHIpKX1mdW5jdGlvbiBDKHQsZSl7dHJ5e2UoZnVuY3Rpb24oZSl7SSh0LGUpfSxmdW5jdGlvbihlKXtSKHQsZSl9KX1jYXRjaChuKXtSKHQsbil9fWZ1bmN0aW9uIEYodCxlKXt2YXIgbj10aGlzO24uX2luc3RhbmNlQ29uc3RydWN0b3I9dCxuLnByb21pc2U9bmV3IHQodiksbi5fdmFsaWRhdGVJbnB1dChlKT8obi5faW5wdXQ9ZSxuLmxlbmd0aD1lLmxlbmd0aCxuLl9yZW1haW5pbmc9ZS5sZW5ndGgsbi5faW5pdCgpLDA9PT1uLmxlbmd0aD9PKG4ucHJvbWlzZSxuLl9yZXN1bHQpOihuLmxlbmd0aD1uLmxlbmd0aHx8MCxuLl9lbnVtZXJhdGUoKSwwPT09bi5fcmVtYWluaW5nJiZPKG4ucHJvbWlzZSxuLl9yZXN1bHQpKSk6UihuLnByb21pc2Usbi5fdmFsaWRhdGlvbkVycm9yKCkpfWZ1bmN0aW9uIFUodCl7cmV0dXJuIG5ldyBjdCh0aGlzLHQpLnByb21pc2V9ZnVuY3Rpb24gQih0KXtmdW5jdGlvbiBlKHQpe0kocix0KX1mdW5jdGlvbiBuKHQpe1Iocix0KX12YXIgaT10aGlzLHI9bmV3IGkodik7aWYoISQodCkpcmV0dXJuIFIocixuZXcgVHlwZUVycm9yKFwiWW91IG11c3QgcGFzcyBhbiBhcnJheSB0byByYWNlLlwiKSkscjtmb3IodmFyIG89dC5sZW5ndGgscz0wO3IuX3N0YXRlPT09b3QmJm8+cztzKyspRChpLnJlc29sdmUodFtzXSksdm9pZCAwLGUsbik7cmV0dXJuIHJ9ZnVuY3Rpb24gSCh0KXt2YXIgZT10aGlzO2lmKHQmJlwib2JqZWN0XCI9PXR5cGVvZiB0JiZ0LmNvbnN0cnVjdG9yPT09ZSlyZXR1cm4gdDt2YXIgbj1uZXcgZSh2KTtyZXR1cm4gSShuLHQpLG59ZnVuY3Rpb24gaih0KXt2YXIgZT10aGlzLG49bmV3IGUodik7cmV0dXJuIFIobix0KSxufWZ1bmN0aW9uIEcoKXt0aHJvdyBuZXcgVHlwZUVycm9yKFwiWW91IG11c3QgcGFzcyBhIHJlc29sdmVyIGZ1bmN0aW9uIGFzIHRoZSBmaXJzdCBhcmd1bWVudCB0byB0aGUgcHJvbWlzZSBjb25zdHJ1Y3RvclwiKX1mdW5jdGlvbiBZKCl7dGhyb3cgbmV3IFR5cGVFcnJvcihcIkZhaWxlZCB0byBjb25zdHJ1Y3QgJ1Byb21pc2UnOiBQbGVhc2UgdXNlIHRoZSAnbmV3JyBvcGVyYXRvciwgdGhpcyBvYmplY3QgY29uc3RydWN0b3IgY2Fubm90IGJlIGNhbGxlZCBhcyBhIGZ1bmN0aW9uLlwiKX1mdW5jdGlvbiBWKHQpe3RoaXMuX2lkPWd0KyssdGhpcy5fc3RhdGU9dm9pZCAwLHRoaXMuX3Jlc3VsdD12b2lkIDAsdGhpcy5fc3Vic2NyaWJlcnM9W10sdiE9PXQmJih1KHQpfHxHKCksdGhpcyBpbnN0YW5jZW9mIFZ8fFkoKSxDKHRoaXMsdCkpfWZ1bmN0aW9uIHooKXt2YXIgdDtpZihcInVuZGVmaW5lZFwiIT10eXBlb2Ygbyl0PW87ZWxzZSBpZihcInVuZGVmaW5lZFwiIT10eXBlb2Ygc2VsZil0PXNlbGY7ZWxzZSB0cnl7dD1GdW5jdGlvbihcInJldHVybiB0aGlzXCIpKCl9Y2F0Y2goZSl7dGhyb3cgbmV3IEVycm9yKFwicG9seWZpbGwgZmFpbGVkIGJlY2F1c2UgZ2xvYmFsIG9iamVjdCBpcyB1bmF2YWlsYWJsZSBpbiB0aGlzIGVudmlyb25tZW50XCIpfXZhciBuPXQuUHJvbWlzZTtuJiZcIltvYmplY3QgUHJvbWlzZV1cIj09PU9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChuLnJlc29sdmUoKSkmJiFuLmNhc3R8fCh0LlByb21pc2U9X3QpfXZhciBXO1c9QXJyYXkuaXNBcnJheT9BcnJheS5pc0FycmF5OmZ1bmN0aW9uKHQpe3JldHVyblwiW29iamVjdCBBcnJheV1cIj09PU9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh0KX07dmFyIEsscSxYLCQ9VyxaPTAsUT0oe30udG9TdHJpbmcsZnVuY3Rpb24odCxlKXtydFtaXT10LHJ0W1orMV09ZSxaKz0yLDI9PT1aJiYocT9xKG0pOlgoKSl9KSxKPVwidW5kZWZpbmVkXCIhPXR5cGVvZiB3aW5kb3c/d2luZG93OnZvaWQgMCx0dD1KfHx7fSxldD10dC5NdXRhdGlvbk9ic2VydmVyfHx0dC5XZWJLaXRNdXRhdGlvbk9ic2VydmVyLG50PVwidW5kZWZpbmVkXCIhPXR5cGVvZiB0JiZcIltvYmplY3QgcHJvY2Vzc11cIj09PXt9LnRvU3RyaW5nLmNhbGwodCksaXQ9XCJ1bmRlZmluZWRcIiE9dHlwZW9mIFVpbnQ4Q2xhbXBlZEFycmF5JiZcInVuZGVmaW5lZFwiIT10eXBlb2YgaW1wb3J0U2NyaXB0cyYmXCJ1bmRlZmluZWRcIiE9dHlwZW9mIE1lc3NhZ2VDaGFubmVsLHJ0PW5ldyBBcnJheSgxZTMpO1g9bnQ/ZigpOmV0P3AoKTppdD9nKCk6dm9pZCAwPT09Sj95KCk6XygpO3ZhciBvdD12b2lkIDAsc3Q9MSxhdD0yLHV0PW5ldyBrLGh0PW5ldyBrO0YucHJvdG90eXBlLl92YWxpZGF0ZUlucHV0PWZ1bmN0aW9uKHQpe3JldHVybiAkKHQpfSxGLnByb3RvdHlwZS5fdmFsaWRhdGlvbkVycm9yPWZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBFcnJvcihcIkFycmF5IE1ldGhvZHMgbXVzdCBiZSBwcm92aWRlZCBhbiBBcnJheVwiKX0sRi5wcm90b3R5cGUuX2luaXQ9ZnVuY3Rpb24oKXt0aGlzLl9yZXN1bHQ9bmV3IEFycmF5KHRoaXMubGVuZ3RoKX07dmFyIGN0PUY7Ri5wcm90b3R5cGUuX2VudW1lcmF0ZT1mdW5jdGlvbigpe2Zvcih2YXIgdD10aGlzLGU9dC5sZW5ndGgsbj10LnByb21pc2UsaT10Ll9pbnB1dCxyPTA7bi5fc3RhdGU9PT1vdCYmZT5yO3IrKyl0Ll9lYWNoRW50cnkoaVtyXSxyKX0sRi5wcm90b3R5cGUuX2VhY2hFbnRyeT1mdW5jdGlvbih0LGUpe3ZhciBuPXRoaXMsaT1uLl9pbnN0YW5jZUNvbnN0cnVjdG9yO2godCk/dC5jb25zdHJ1Y3Rvcj09PWkmJnQuX3N0YXRlIT09b3Q/KHQuX29uZXJyb3I9bnVsbCxuLl9zZXR0bGVkQXQodC5fc3RhdGUsZSx0Ll9yZXN1bHQpKTpuLl93aWxsU2V0dGxlQXQoaS5yZXNvbHZlKHQpLGUpOihuLl9yZW1haW5pbmctLSxuLl9yZXN1bHRbZV09dCl9LEYucHJvdG90eXBlLl9zZXR0bGVkQXQ9ZnVuY3Rpb24odCxlLG4pe3ZhciBpPXRoaXMscj1pLnByb21pc2U7ci5fc3RhdGU9PT1vdCYmKGkuX3JlbWFpbmluZy0tLHQ9PT1hdD9SKHIsbik6aS5fcmVzdWx0W2VdPW4pLDA9PT1pLl9yZW1haW5pbmcmJk8ocixpLl9yZXN1bHQpfSxGLnByb3RvdHlwZS5fd2lsbFNldHRsZUF0PWZ1bmN0aW9uKHQsZSl7dmFyIG49dGhpcztEKHQsdm9pZCAwLGZ1bmN0aW9uKHQpe24uX3NldHRsZWRBdChzdCxlLHQpfSxmdW5jdGlvbih0KXtuLl9zZXR0bGVkQXQoYXQsZSx0KX0pfTt2YXIgbHQ9VSxmdD1CLGR0PUgscHQ9aixndD0wLF90PVY7Vi5hbGw9bHQsVi5yYWNlPWZ0LFYucmVzb2x2ZT1kdCxWLnJlamVjdD1wdCxWLl9zZXRTY2hlZHVsZXI9YyxWLl9zZXRBc2FwPWwsVi5fYXNhcD1RLFYucHJvdG90eXBlPXtjb25zdHJ1Y3RvcjpWLHRoZW46ZnVuY3Rpb24odCxlKXt2YXIgbj10aGlzLGk9bi5fc3RhdGU7aWYoaT09PXN0JiYhdHx8aT09PWF0JiYhZSlyZXR1cm4gdGhpczt2YXIgcj1uZXcgdGhpcy5jb25zdHJ1Y3Rvcih2KSxvPW4uX3Jlc3VsdDtpZihpKXt2YXIgcz1hcmd1bWVudHNbaS0xXTtRKGZ1bmN0aW9uKCl7eChpLHIscyxvKX0pfWVsc2UgRChuLHIsdCxlKTtyZXR1cm4gcn0sXCJjYXRjaFwiOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLnRoZW4obnVsbCx0KX19O3ZhciBtdD16LHl0PXtQcm9taXNlOl90LHBvbHlmaWxsOm10fTtuKDE5KS5hbWQ/KGk9ZnVuY3Rpb24oKXtyZXR1cm4geXR9LmNhbGwoZSxuLGUscyksISh2b2lkIDAhPT1pJiYocy5leHBvcnRzPWkpKSk6XCJ1bmRlZmluZWRcIiE9dHlwZW9mIHMmJnMuZXhwb3J0cz9zLmV4cG9ydHM9eXQ6XCJ1bmRlZmluZWRcIiE9dHlwZW9mIHRoaXMmJih0aGlzLkVTNlByb21pc2U9eXQpLG10KCl9KS5jYWxsKHRoaXMpfSkuY2FsbChlLG4oNiksbigzKS5zZXRJbW1lZGlhdGUsZnVuY3Rpb24oKXtyZXR1cm4gdGhpc30oKSxuKDIwKSh0KSl9LGZ1bmN0aW9uKHQsZSl7XCJ1c2Ugc3RyaWN0XCI7dmFyIG49e29hdXRoX3Rva2VuOnZvaWQgMCxiYXNlVVJMOlwiaHR0cHM6Ly9hcGkuc291bmRjbG91ZC5jb21cIixjb25uZWN0VVJMOlwiLy9jb25uZWN0LnNvdW5kY2xvdWQuY29tXCIsY2xpZW50X2lkOnZvaWQgMCxyZWRpcmVjdF91cmk6dm9pZCAwfTt0LmV4cG9ydHM9e2dldDpmdW5jdGlvbih0KXtyZXR1cm4gblt0XX0sc2V0OmZ1bmN0aW9uKHQsZSl7ZSYmKG5bdF09ZSl9fX0sZnVuY3Rpb24odCxlLG4peyhmdW5jdGlvbih0LGkpe2Z1bmN0aW9uIHIodCxlKXt0aGlzLl9pZD10LHRoaXMuX2NsZWFyRm49ZX12YXIgbz1uKDYpLm5leHRUaWNrLHM9RnVuY3Rpb24ucHJvdG90eXBlLmFwcGx5LGE9QXJyYXkucHJvdG90eXBlLnNsaWNlLHU9e30saD0wO2Uuc2V0VGltZW91dD1mdW5jdGlvbigpe3JldHVybiBuZXcgcihzLmNhbGwoc2V0VGltZW91dCx3aW5kb3csYXJndW1lbnRzKSxjbGVhclRpbWVvdXQpfSxlLnNldEludGVydmFsPWZ1bmN0aW9uKCl7cmV0dXJuIG5ldyByKHMuY2FsbChzZXRJbnRlcnZhbCx3aW5kb3csYXJndW1lbnRzKSxjbGVhckludGVydmFsKX0sZS5jbGVhclRpbWVvdXQ9ZS5jbGVhckludGVydmFsPWZ1bmN0aW9uKHQpe3QuY2xvc2UoKX0sci5wcm90b3R5cGUudW5yZWY9ci5wcm90b3R5cGUucmVmPWZ1bmN0aW9uKCl7fSxyLnByb3RvdHlwZS5jbG9zZT1mdW5jdGlvbigpe3RoaXMuX2NsZWFyRm4uY2FsbCh3aW5kb3csdGhpcy5faWQpfSxlLmVucm9sbD1mdW5jdGlvbih0LGUpe2NsZWFyVGltZW91dCh0Ll9pZGxlVGltZW91dElkKSx0Ll9pZGxlVGltZW91dD1lfSxlLnVuZW5yb2xsPWZ1bmN0aW9uKHQpe2NsZWFyVGltZW91dCh0Ll9pZGxlVGltZW91dElkKSx0Ll9pZGxlVGltZW91dD0tMX0sZS5fdW5yZWZBY3RpdmU9ZS5hY3RpdmU9ZnVuY3Rpb24odCl7Y2xlYXJUaW1lb3V0KHQuX2lkbGVUaW1lb3V0SWQpO3ZhciBlPXQuX2lkbGVUaW1lb3V0O2U+PTAmJih0Ll9pZGxlVGltZW91dElkPXNldFRpbWVvdXQoZnVuY3Rpb24oKXt0Ll9vblRpbWVvdXQmJnQuX29uVGltZW91dCgpfSxlKSl9LGUuc2V0SW1tZWRpYXRlPVwiZnVuY3Rpb25cIj09dHlwZW9mIHQ/dDpmdW5jdGlvbih0KXt2YXIgbj1oKyssaT1hcmd1bWVudHMubGVuZ3RoPDI/ITE6YS5jYWxsKGFyZ3VtZW50cywxKTtyZXR1cm4gdVtuXT0hMCxvKGZ1bmN0aW9uKCl7dVtuXSYmKGk/dC5hcHBseShudWxsLGkpOnQuY2FsbChudWxsKSxlLmNsZWFySW1tZWRpYXRlKG4pKX0pLG59LGUuY2xlYXJJbW1lZGlhdGU9XCJmdW5jdGlvblwiPT10eXBlb2YgaT9pOmZ1bmN0aW9uKHQpe2RlbGV0ZSB1W3RdfX0pLmNhbGwoZSxuKDMpLnNldEltbWVkaWF0ZSxuKDMpLmNsZWFySW1tZWRpYXRlKX0sZnVuY3Rpb24odCxlLG4peyhmdW5jdGlvbihlKXtcInVzZSBzdHJpY3RcIjt2YXIgaT1uKDIpLHI9bigxNyksbz1uKDEpLlByb21pc2Uscz1mdW5jdGlvbih0LG4saSxyKXt2YXIgcz12b2lkIDAsYT1uZXcgbyhmdW5jdGlvbihvKXt2YXIgYT1lLkZvcm1EYXRhJiZpIGluc3RhbmNlb2YgRm9ybURhdGE7cz1uZXcgWE1MSHR0cFJlcXVlc3Qscy51cGxvYWQmJnMudXBsb2FkLmFkZEV2ZW50TGlzdGVuZXIoXCJwcm9ncmVzc1wiLHIpLHMub3Blbih0LG4sITApLGF8fHMuc2V0UmVxdWVzdEhlYWRlcihcIkNvbnRlbnQtVHlwZVwiLFwiYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkXCIpLHMub25yZWFkeXN0YXRlY2hhbmdlPWZ1bmN0aW9uKCl7ND09PXMucmVhZHlTdGF0ZSYmbyh7cmVzcG9uc2VUZXh0OnMucmVzcG9uc2VUZXh0LHJlcXVlc3Q6c30pfSxzLnNlbmQoaSl9KTtyZXR1cm4gYS5yZXF1ZXN0PXMsYX0sYT1mdW5jdGlvbih0KXt2YXIgZT10LnJlc3BvbnNlVGV4dCxuPXQucmVxdWVzdCxpPXZvaWQgMCxyPXZvaWQgMDt0cnl7cj1KU09OLnBhcnNlKGUpfWNhdGNoKG8pe31yZXR1cm4gcj9yLmVycm9ycyYmKGk9e21lc3NhZ2U6XCJcIn0sci5lcnJvcnNbMF0mJnIuZXJyb3JzWzBdLmVycm9yX21lc3NhZ2UmJihpPXttZXNzYWdlOnIuZXJyb3JzWzBdLmVycm9yX21lc3NhZ2V9KSk6aT1uP3ttZXNzYWdlOlwiSFRUUCBFcnJvcjogXCIrbi5zdGF0dXN9OnttZXNzYWdlOlwiVW5rbm93biBlcnJvclwifSxpJiYoaS5zdGF0dXM9bi5zdGF0dXMpLHtqc29uOnIsZXJyb3I6aX19LHU9ZnVuY3Rpb24gYyh0LGUsbixpKXt2YXIgcj1zKHQsZSxuLGkpLG89ci50aGVuKGZ1bmN0aW9uKHQpe3ZhciBlPXQucmVzcG9uc2VUZXh0LG49dC5yZXF1ZXN0LGk9YSh7cmVzcG9uc2VUZXh0OmUscmVxdWVzdDpufSk7aWYoaS5qc29uJiZcIjMwMiAtIEZvdW5kXCI9PT1pLmpzb24uc3RhdHVzKXJldHVybiBjKFwiR0VUXCIsaS5qc29uLmxvY2F0aW9uLG51bGwpO2lmKDIwMCE9PW4uc3RhdHVzJiZpLmVycm9yKXRocm93IGkuZXJyb3I7cmV0dXJuIGkuanNvbn0pO3JldHVybiBvLnJlcXVlc3Q9ci5yZXF1ZXN0LG99LGg9ZnVuY3Rpb24odCxlLG4pe09iamVjdC5rZXlzKGUpLmZvckVhY2goZnVuY3Rpb24oaSl7bj90LmFwcGVuZChpLGVbaV0pOnRbaV09ZVtpXX0pfTt0LmV4cG9ydHM9e3JlcXVlc3Q6ZnVuY3Rpb24odCxuKXt2YXIgbz1hcmd1bWVudHMubGVuZ3RoPD0yfHx2b2lkIDA9PT1hcmd1bWVudHNbMl0/e306YXJndW1lbnRzWzJdLHM9YXJndW1lbnRzLmxlbmd0aDw9M3x8dm9pZCAwPT09YXJndW1lbnRzWzNdP2Z1bmN0aW9uKCl7fTphcmd1bWVudHNbM10sYT1pLmdldChcIm9hdXRoX3Rva2VuXCIpLGM9aS5nZXQoXCJjbGllbnRfaWRcIiksbD17fSxmPWUuRm9ybURhdGEmJm8gaW5zdGFuY2VvZiBGb3JtRGF0YSxkPXZvaWQgMCxwPXZvaWQgMDtyZXR1cm4gbC5mb3JtYXQ9XCJqc29uXCIsYT9sLm9hdXRoX3Rva2VuPWE6bC5jbGllbnRfaWQ9YyxoKG8sbCxmKSxcIkdFVFwiIT09dCYmKGQ9Zj9vOnIuZW5jb2RlKG8pLG89e29hdXRoX3Rva2VuOmF9KSxuPVwiL1wiIT09blswXT9cIi9cIituOm4scD1cIlwiK2kuZ2V0KFwiYmFzZVVSTFwiKStuK1wiP1wiK3IuZW5jb2RlKG8pLHUodCxwLGQscyl9LG9FbWJlZDpmdW5jdGlvbih0KXt2YXIgZT1hcmd1bWVudHMubGVuZ3RoPD0xfHx2b2lkIDA9PT1hcmd1bWVudHNbMV0/e306YXJndW1lbnRzWzFdLG49ZS5lbGVtZW50O2RlbGV0ZSBlLmVsZW1lbnQsZS51cmw9dDt2YXIgaT1cImh0dHBzOi8vc291bmRjbG91ZC5jb20vb2VtYmVkLmpzb24/XCIrci5lbmNvZGUoZSk7cmV0dXJuIHUoXCJHRVRcIixpLG51bGwpLnRoZW4oZnVuY3Rpb24odCl7cmV0dXJuIG4mJnQuaHRtbCYmKG4uaW5uZXJIVE1MPXQuaHRtbCksdH0pfSx1cGxvYWQ6ZnVuY3Rpb24oKXt2YXIgdD1hcmd1bWVudHMubGVuZ3RoPD0wfHx2b2lkIDA9PT1hcmd1bWVudHNbMF0/e306YXJndW1lbnRzWzBdLGU9dC5hc3NldF9kYXRhfHx0LmZpbGUsbj1pLmdldChcIm9hdXRoX3Rva2VuXCIpJiZ0LnRpdGxlJiZlO2lmKCFuKXJldHVybiBuZXcgbyhmdW5jdGlvbih0LGUpe2Uoe3N0YXR1czowLGVycm9yX21lc3NhZ2U6XCJvYXV0aF90b2tlbiBuZWVkcyB0byBiZSBwcmVzZW50IGFuZCB0aXRsZSBhbmQgYXNzZXRfZGF0YSAvIGZpbGUgcGFzc2VkIGFzIHBhcmFtZXRlcnNcIn0pfSk7dmFyIHI9T2JqZWN0LmtleXModCkscz1uZXcgRm9ybURhdGE7cmV0dXJuIHIuZm9yRWFjaChmdW5jdGlvbihlKXt2YXIgbj10W2VdO1wiZmlsZVwiPT09ZSYmKGU9XCJhc3NldF9kYXRhXCIsbj10LmZpbGUpLHMuYXBwZW5kKFwidHJhY2tbXCIrZStcIl1cIixuKX0pLHRoaXMucmVxdWVzdChcIlBPU1RcIixcIi90cmFja3NcIixzLHQucHJvZ3Jlc3MpfSxyZXNvbHZlOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLnJlcXVlc3QoXCJHRVRcIixcIi9yZXNvbHZlXCIse3VybDp0LF9zdGF0dXNfY29kZV9tYXA6ezMwMjoyMDB9fSl9fX0pLmNhbGwoZSxmdW5jdGlvbigpe3JldHVybiB0aGlzfSgpKX0sZnVuY3Rpb24odCxlKXtcInVzZSBzdHJpY3RcIjt2YXIgbj17fTt0LmV4cG9ydHM9e2dldDpmdW5jdGlvbih0KXtyZXR1cm4gblt0XX0sc2V0OmZ1bmN0aW9uKHQsZSl7blt0XT1lfX19LGZ1bmN0aW9uKHQsZSl7ZnVuY3Rpb24gbigpe2gmJnMmJihoPSExLHMubGVuZ3RoP3U9cy5jb25jYXQodSk6Yz0tMSx1Lmxlbmd0aCYmaSgpKX1mdW5jdGlvbiBpKCl7aWYoIWgpe3ZhciB0PXNldFRpbWVvdXQobik7aD0hMDtmb3IodmFyIGU9dS5sZW5ndGg7ZTspe2ZvcihzPXUsdT1bXTsrK2M8ZTspcyYmc1tjXS5ydW4oKTtjPS0xLGU9dS5sZW5ndGh9cz1udWxsLGg9ITEsY2xlYXJUaW1lb3V0KHQpfX1mdW5jdGlvbiByKHQsZSl7dGhpcy5mdW49dCx0aGlzLmFycmF5PWV9ZnVuY3Rpb24gbygpe312YXIgcyxhPXQuZXhwb3J0cz17fSx1PVtdLGg9ITEsYz0tMTthLm5leHRUaWNrPWZ1bmN0aW9uKHQpe3ZhciBlPW5ldyBBcnJheShhcmd1bWVudHMubGVuZ3RoLTEpO2lmKGFyZ3VtZW50cy5sZW5ndGg+MSlmb3IodmFyIG49MTtuPGFyZ3VtZW50cy5sZW5ndGg7bisrKWVbbi0xXT1hcmd1bWVudHNbbl07dS5wdXNoKG5ldyByKHQsZSkpLDEhPT11Lmxlbmd0aHx8aHx8c2V0VGltZW91dChpLDApfSxyLnByb3RvdHlwZS5ydW49ZnVuY3Rpb24oKXt0aGlzLmZ1bi5hcHBseShudWxsLHRoaXMuYXJyYXkpfSxhLnRpdGxlPVwiYnJvd3NlclwiLGEuYnJvd3Nlcj0hMCxhLmVudj17fSxhLmFyZ3Y9W10sYS52ZXJzaW9uPVwiXCIsYS52ZXJzaW9ucz17fSxhLm9uPW8sYS5hZGRMaXN0ZW5lcj1vLGEub25jZT1vLGEub2ZmPW8sYS5yZW1vdmVMaXN0ZW5lcj1vLGEucmVtb3ZlQWxsTGlzdGVuZXJzPW8sYS5lbWl0PW8sYS5iaW5kaW5nPWZ1bmN0aW9uKHQpe3Rocm93IG5ldyBFcnJvcihcInByb2Nlc3MuYmluZGluZyBpcyBub3Qgc3VwcG9ydGVkXCIpfSxhLmN3ZD1mdW5jdGlvbigpe3JldHVyblwiL1wifSxhLmNoZGlyPWZ1bmN0aW9uKHQpe3Rocm93IG5ldyBFcnJvcihcInByb2Nlc3MuY2hkaXIgaXMgbm90IHN1cHBvcnRlZFwiKX0sYS51bWFzaz1mdW5jdGlvbigpe3JldHVybiAwfX0sZnVuY3Rpb24odCxlLG4pe1widXNlIHN0cmljdFwiO3ZhciBpPW4oMTgpO2UuZXh0cmFjdD1mdW5jdGlvbih0KXtyZXR1cm4gdC5zcGxpdChcIj9cIilbMV18fFwiXCJ9LGUucGFyc2U9ZnVuY3Rpb24odCl7cmV0dXJuXCJzdHJpbmdcIiE9dHlwZW9mIHQ/e306KHQ9dC50cmltKCkucmVwbGFjZSgvXihcXD98I3wmKS8sXCJcIiksdD90LnNwbGl0KFwiJlwiKS5yZWR1Y2UoZnVuY3Rpb24odCxlKXt2YXIgbj1lLnJlcGxhY2UoL1xcKy9nLFwiIFwiKS5zcGxpdChcIj1cIiksaT1uLnNoaWZ0KCkscj1uLmxlbmd0aD4wP24uam9pbihcIj1cIik6dm9pZCAwO3JldHVybiBpPWRlY29kZVVSSUNvbXBvbmVudChpKSxyPXZvaWQgMD09PXI/bnVsbDpkZWNvZGVVUklDb21wb25lbnQociksdC5oYXNPd25Qcm9wZXJ0eShpKT9BcnJheS5pc0FycmF5KHRbaV0pP3RbaV0ucHVzaChyKTp0W2ldPVt0W2ldLHJdOnRbaV09cix0fSx7fSk6e30pfSxlLnN0cmluZ2lmeT1mdW5jdGlvbih0KXtyZXR1cm4gdD9PYmplY3Qua2V5cyh0KS5zb3J0KCkubWFwKGZ1bmN0aW9uKGUpe3ZhciBuPXRbZV07cmV0dXJuIEFycmF5LmlzQXJyYXkobik/bi5zb3J0KCkubWFwKGZ1bmN0aW9uKHQpe3JldHVybiBpKGUpK1wiPVwiK2kodCl9KS5qb2luKFwiJlwiKTppKGUpK1wiPVwiK2kobil9KS5maWx0ZXIoZnVuY3Rpb24odCl7cmV0dXJuIHQubGVuZ3RoPjB9KS5qb2luKFwiJlwiKTpcIlwifX0sZnVuY3Rpb24odCxlLG4pe1widXNlIHN0cmljdFwiO3ZhciBpPW4oNykscj1uKDUpO3QuZXhwb3J0cz17bm90aWZ5RGlhbG9nOmZ1bmN0aW9uKHQpe3ZhciBlPWkucGFyc2UodC5zZWFyY2gpLG49aS5wYXJzZSh0Lmhhc2gpLG89e29hdXRoX3Rva2VuOmUuYWNjZXNzX3Rva2VufHxuLmFjY2Vzc190b2tlbixkaWFsb2dfaWQ6ZS5zdGF0ZXx8bi5zdGF0ZSxlcnJvcjplLmVycm9yfHxuLmVycm9yLGVycm9yX2Rlc2NyaXB0aW9uOmUuZXJyb3JfZGVzY3JpcHRpb258fG4uZXJyb3JfZGVzY3JpcHRpb259LHM9ci5nZXQoby5kaWFsb2dfaWQpO3MmJnMuaGFuZGxlQ29ubmVjdFJlc3BvbnNlKG8pfX19LGZ1bmN0aW9uKHQsZSxuKXtcInVzZSBzdHJpY3RcIjt2YXIgaT1uKDIpLHI9bigxMSksbz1uKDEpLlByb21pc2Uscz1mdW5jdGlvbih0KXtyZXR1cm4gaS5zZXQoXCJvYXV0aF90b2tlblwiLHQub2F1dGhfdG9rZW4pLHR9O3QuZXhwb3J0cz1mdW5jdGlvbigpe3ZhciB0PWFyZ3VtZW50cy5sZW5ndGg8PTB8fHZvaWQgMD09PWFyZ3VtZW50c1swXT97fTphcmd1bWVudHNbMF0sZT1pLmdldChcIm9hdXRoX3Rva2VuXCIpO2lmKGUpcmV0dXJuIG5ldyBvKGZ1bmN0aW9uKHQpe3Qoe29hdXRoX3Rva2VuOmV9KX0pO3ZhciBuPXtjbGllbnRfaWQ6dC5jbGllbnRfaWR8fGkuZ2V0KFwiY2xpZW50X2lkXCIpLHJlZGlyZWN0X3VyaTp0LnJlZGlyZWN0X3VyaXx8aS5nZXQoXCJyZWRpcmVjdF91cmlcIikscmVzcG9uc2VfdHlwZTpcImNvZGVfYW5kX3Rva2VuXCIsc2NvcGU6dC5zY29wZXx8XCJub24tZXhwaXJpbmdcIixkaXNwbGF5OlwicG9wdXBcIn07aWYoIW4uY2xpZW50X2lkfHwhbi5yZWRpcmVjdF91cmkpdGhyb3cgbmV3IEVycm9yKFwiT3B0aW9ucyBjbGllbnRfaWQgYW5kIHJlZGlyZWN0X3VyaSBtdXN0IGJlIHBhc3NlZFwiKTt2YXIgYT1uZXcgcihuKTtyZXR1cm4gYS5vcGVuKCkudGhlbihzKX19LGZ1bmN0aW9uKHQsZSxuKXtcInVzZSBzdHJpY3RcIjt2YXIgaT1uKDEpLlByb21pc2U7dC5leHBvcnRzPWZ1bmN0aW9uKCl7dmFyIHQ9e307cmV0dXJuIHQucHJvbWlzZT1uZXcgaShmdW5jdGlvbihlLG4pe3QucmVzb2x2ZT1lLHQucmVqZWN0PW59KSx0fX0sZnVuY3Rpb24odCxlLG4pe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIGkodCxlKXtpZighKHQgaW5zdGFuY2VvZiBlKSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpfXZhciByPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCh0LGUpe2Zvcih2YXIgbj0wO248ZS5sZW5ndGg7bisrKXt2YXIgaT1lW25dO2kuZW51bWVyYWJsZT1pLmVudW1lcmFibGV8fCExLGkuY29uZmlndXJhYmxlPSEwLFwidmFsdWVcImluIGkmJihpLndyaXRhYmxlPSEwKSxPYmplY3QuZGVmaW5lUHJvcGVydHkodCxpLmtleSxpKX19cmV0dXJuIGZ1bmN0aW9uKGUsbixpKXtyZXR1cm4gbiYmdChlLnByb3RvdHlwZSxuKSxpJiZ0KGUsaSksZX19KCksbz1uKDEwKSxzPW4oNSksYT1uKDEyKSx1PW4oNyksaD1cIlNvdW5kQ2xvdWRfRGlhbG9nXCIsYz1mdW5jdGlvbigpe3JldHVybltoLE1hdGguY2VpbCgxZTYqTWF0aC5yYW5kb20oKSkudG9TdHJpbmcoMTYpXS5qb2luKFwiX1wiKX0sbD1mdW5jdGlvbih0KXtyZXR1cm5cImh0dHBzOi8vc291bmRjbG91ZC5jb20vY29ubmVjdD9cIit1LnN0cmluZ2lmeSh0KX0sZj1mdW5jdGlvbigpe2Z1bmN0aW9uIHQoKXt2YXIgZT1hcmd1bWVudHMubGVuZ3RoPD0wfHx2b2lkIDA9PT1hcmd1bWVudHNbMF0/e306YXJndW1lbnRzWzBdO2kodGhpcyx0KSx0aGlzLmlkPWMoKSx0aGlzLm9wdGlvbnM9ZSx0aGlzLm9wdGlvbnMuc3RhdGU9dGhpcy5pZCx0aGlzLndpZHRoPTQ1Nix0aGlzLmhlaWdodD01MTAsdGhpcy5kZWZlcnJlZD1vKCl9cmV0dXJuIHIodCxbe2tleTpcIm9wZW5cIix2YWx1ZTpmdW5jdGlvbigpe3ZhciB0PWwodGhpcy5vcHRpb25zKTtyZXR1cm4gdGhpcy5wb3B1cD1hLm9wZW4odCx0aGlzLndpZHRoLHRoaXMuaGVpZ2h0KSxzLnNldCh0aGlzLmlkLHRoaXMpLHRoaXMuZGVmZXJyZWQucHJvbWlzZX19LHtrZXk6XCJoYW5kbGVDb25uZWN0UmVzcG9uc2VcIix2YWx1ZTpmdW5jdGlvbih0KXt2YXIgZT10LmVycm9yO2U/dGhpcy5kZWZlcnJlZC5yZWplY3QodCk6dGhpcy5kZWZlcnJlZC5yZXNvbHZlKHQpLHRoaXMucG9wdXAuY2xvc2UoKX19XSksdH0oKTt0LmV4cG9ydHM9Zn0sZnVuY3Rpb24odCxlKXtcInVzZSBzdHJpY3RcIjt0LmV4cG9ydHM9e29wZW46ZnVuY3Rpb24odCxlLG4pe3ZhciBpPXt9LHI9dm9pZCAwO3JldHVybiBpLmxvY2F0aW9uPTEsaS53aWR0aD1lLGkuaGVpZ2h0PW4saS5sZWZ0PXdpbmRvdy5zY3JlZW5YKyh3aW5kb3cub3V0ZXJXaWR0aC1lKS8yLGkudG9wPXdpbmRvdy5zY3JlZW5ZKyh3aW5kb3cub3V0ZXJIZWlnaHQtbikvMixpLnRvb2xiYXI9XCJub1wiLGkuc2Nyb2xsYmFycz1cInllc1wiLHI9T2JqZWN0LmtleXMoaSkubWFwKGZ1bmN0aW9uKHQpe3JldHVybiB0K1wiPVwiK2lbdF19KS5qb2luKFwiLCBcIiksd2luZG93Lm9wZW4odCxpLm5hbWUscil9fX0sZnVuY3Rpb24odCxlKXsoZnVuY3Rpb24oZSl7XCJ1c2Ugc3RyaWN0XCI7dmFyIG49ZS5BdWRpb0NvbnRleHR8fGUud2Via2l0QXVkaW9Db250ZXh0LGk9bnVsbDt0LmV4cG9ydHM9ZnVuY3Rpb24oKXtyZXR1cm4gaT9pOmk9bmV3IG59fSkuY2FsbChlLGZ1bmN0aW9uKCl7cmV0dXJuIHRoaXN9KCkpfSxmdW5jdGlvbih0LGUpeyhmdW5jdGlvbihlKXtcInVzZSBzdHJpY3RcIjt2YXIgbj1lLm5hdmlnYXRvci5nZXRVc2VyTWVkaWF8fGUubmF2aWdhdG9yLndlYmtpdEdldFVzZXJNZWRpYXx8ZS5uYXZpZ2F0b3IubW96R2V0VXNlck1lZGlhO3QuZXhwb3J0cz1mdW5jdGlvbih0LGkscil7bi5jYWxsKGUubmF2aWdhdG9yLHQsaSxyKX19KS5jYWxsKGUsZnVuY3Rpb24oKXtyZXR1cm4gdGhpc30oKSl9LGZ1bmN0aW9uKHQsZSxuKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBpKHQsZSl7aWYoISh0IGluc3RhbmNlb2YgZSkpdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKX12YXIgcj1mdW5jdGlvbigpe2Z1bmN0aW9uIHQodCxlKXtmb3IodmFyIG49MDtuPGUubGVuZ3RoO24rKyl7dmFyIGk9ZVtuXTtpLmVudW1lcmFibGU9aS5lbnVtZXJhYmxlfHwhMSxpLmNvbmZpZ3VyYWJsZT0hMCxcInZhbHVlXCJpbiBpJiYoaS53cml0YWJsZT0hMCksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsaS5rZXksaSl9fXJldHVybiBmdW5jdGlvbihlLG4saSl7cmV0dXJuIG4mJnQoZS5wcm90b3R5cGUsbiksaSYmdChlLGkpLGV9fSgpLG89bigxMykscz1uKDE0KSxhPW4oMSkuUHJvbWlzZSx1PW4oMjQpLGg9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLGU9dGhpcy5jb250ZXh0O3JldHVybiBuZXcgYShmdW5jdGlvbihuLGkpe3Quc291cmNlP3Quc291cmNlIGluc3RhbmNlb2YgQXVkaW9Ob2RlP24odC5zb3VyY2UpOmkobmV3IEVycm9yKFwic291cmNlIG5lZWRzIHRvIGJlIGFuIGluc3RhbmNlIG9mIEF1ZGlvTm9kZVwiKSk6cyh7YXVkaW86ITB9LGZ1bmN0aW9uKGkpe3Quc3RyZWFtPWksdC5zb3VyY2U9ZS5jcmVhdGVNZWRpYVN0cmVhbVNvdXJjZShpKSxuKHQuc291cmNlKX0uYmluZCh0KSxpKX0pfSxjPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCgpe3ZhciBlPWFyZ3VtZW50cy5sZW5ndGg8PTB8fHZvaWQgMD09PWFyZ3VtZW50c1swXT97fTphcmd1bWVudHNbMF07aSh0aGlzLHQpLHRoaXMuY29udGV4dD1lLmNvbnRleHR8fG8oKSx0aGlzLl9yZWNvcmRlcj1udWxsLHRoaXMuc291cmNlPWUuc291cmNlLHRoaXMuc3RyZWFtPW51bGx9cmV0dXJuIHIodCxbe2tleTpcInN0YXJ0XCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgdD10aGlzO3JldHVybiBoLmNhbGwodGhpcykudGhlbihmdW5jdGlvbihlKXtyZXR1cm4gdC5fcmVjb3JkZXI9bmV3IHUoZSksdC5fcmVjb3JkZXIucmVjb3JkKCksZX0pfX0se2tleTpcInN0b3BcIix2YWx1ZTpmdW5jdGlvbigpe2lmKHRoaXMuX3JlY29yZGVyJiZ0aGlzLl9yZWNvcmRlci5zdG9wKCksdGhpcy5zdHJlYW0paWYodGhpcy5zdHJlYW0uc3RvcCl0aGlzLnN0cmVhbS5zdG9wKCk7ZWxzZSBpZih0aGlzLnN0cmVhbS5nZXRUcmFja3Mpe3ZhciB0PXRoaXMuc3RyZWFtLmdldFRyYWNrcygpWzBdO3QmJnQuc3RvcCgpfX19LHtrZXk6XCJnZXRCdWZmZXJcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciB0PXRoaXM7cmV0dXJuIG5ldyBhKGZ1bmN0aW9uKGUsbil7dC5fcmVjb3JkZXI/dC5fcmVjb3JkZXIuZ2V0QnVmZmVyKGZ1bmN0aW9uKG4pe3ZhciBpPXQuY29udGV4dC5zYW1wbGVSYXRlLHI9dC5jb250ZXh0LmNyZWF0ZUJ1ZmZlcigyLG5bMF0ubGVuZ3RoLGkpO3IuZ2V0Q2hhbm5lbERhdGEoMCkuc2V0KG5bMF0pLHIuZ2V0Q2hhbm5lbERhdGEoMSkuc2V0KG5bMV0pLGUocil9LmJpbmQodCkpOm4obmV3IEVycm9yKFwiTm90aGluZyBoYXMgYmVlbiByZWNvcmRlZCB5ZXQuXCIpKX0pfX0se2tleTpcImdldFdBVlwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcztyZXR1cm4gbmV3IGEoZnVuY3Rpb24oZSxuKXt0Ll9yZWNvcmRlcj90Ll9yZWNvcmRlci5leHBvcnRXQVYoZnVuY3Rpb24odCl7ZSh0KX0pOm4obmV3IEVycm9yKFwiTm90aGluZyBoYXMgYmVlbiByZWNvcmRlZCB5ZXQuXCIpKX0pfX0se2tleTpcInBsYXlcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciB0PXRoaXM7cmV0dXJuIHRoaXMuZ2V0QnVmZmVyKCkudGhlbihmdW5jdGlvbihlKXt2YXIgbj10LmNvbnRleHQuY3JlYXRlQnVmZmVyU291cmNlKCk7cmV0dXJuIG4uYnVmZmVyPWUsbi5jb25uZWN0KHQuY29udGV4dC5kZXN0aW5hdGlvbiksbi5zdGFydCgwKSxufSl9fSx7a2V5Olwic2F2ZUFzXCIsdmFsdWU6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuZ2V0V0FWKCkudGhlbihmdW5jdGlvbihlKXt1LmZvcmNlRG93bmxvYWQoZSx0KX0pfX0se2tleTpcImRlbGV0ZVwiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5fcmVjb3JkZXImJih0aGlzLl9yZWNvcmRlci5zdG9wKCksdGhpcy5fcmVjb3JkZXIuY2xlYXIoKSx0aGlzLl9yZWNvcmRlcj1udWxsKSx0aGlzLnN0cmVhbSYmdGhpcy5zdHJlYW0uc3RvcCgpfX1dKSx0fSgpO3QuZXhwb3J0cz1jfSxmdW5jdGlvbih0LGUsbil7XCJ1c2Ugc3RyaWN0XCI7dmFyIGk9big0KSxyPW4oMjMpLG89bmV3IHIoe2ZsYXNoQXVkaW9QYXRoOlwiaHR0cHM6Ly9jb25uZWN0LnNvdW5kY2xvdWQuY29tL3Nkay9mbGFzaEF1ZGlvLnN3ZlwifSkscz1uKDIpLGE9bigyNSk7dC5leHBvcnRzPWZ1bmN0aW9uKHQsZSl7dmFyIG49ZT97c2VjcmV0X3Rva2VuOmV9Ont9O3JldHVybiBpLnJlcXVlc3QoXCJHRVRcIix0LG4pLnRoZW4oZnVuY3Rpb24odCl7dmFyIG49cy5nZXQoXCJiYXNlVVJMXCIpLGk9cy5nZXQoXCJjbGllbnRfaWRcIikscj1uK1wiL3RyYWNrcy9cIit0LmlkK1wiL3N0cmVhbXM/Y2xpZW50X2lkPVwiK2ksdT1uK1wiL3RyYWNrcy9cIit0LmlkK1wiL3BsYXlzP2NsaWVudF9pZD1cIitpO3JldHVybiBlJiYocis9XCImc2VjcmV0X3Rva2VuPVwiK2UsdSs9XCImc2VjcmV0X3Rva2VuPVwiK2UpLG5ldyBhKG8se3NvdW5kSWQ6dC5pZCxkdXJhdGlvbjp0LmR1cmF0aW9uLHN0cmVhbVVybHNFbmRwb2ludDpyLHJlZ2lzdGVyRW5kcG9pbnQ6dX0pfSl9fSxmdW5jdGlvbih0LGUpe3QuZXhwb3J0cz17ZW5jb2RlOmZ1bmN0aW9uKHQsZSl7ZnVuY3Rpb24gbih0KXtyZXR1cm4gdC5maWx0ZXIoZnVuY3Rpb24odCl7cmV0dXJuXCJzdHJpbmdcIj09dHlwZW9mIHQmJnQubGVuZ3RofSkuam9pbihcIiZcIil9ZnVuY3Rpb24gaSh0KXt2YXIgZT1PYmplY3Qua2V5cyh0KTtyZXR1cm4gbD9lLnNvcnQoKTplfWZ1bmN0aW9uIHIodCxlKXt2YXIgcj1cIjpuYW1lWzpwcm9wXVwiO3JldHVybiBuKGkoZSkubWFwKGZ1bmN0aW9uKG4pe3JldHVybiBzKHIucmVwbGFjZSgvOm5hbWUvLHQpLnJlcGxhY2UoLzpwcm9wLyxuKSxlW25dKX0pKX1mdW5jdGlvbiBvKHQsZSl7dmFyIGk9XCI6bmFtZVtdXCI7cmV0dXJuIG4oZS5tYXAoZnVuY3Rpb24oZSl7cmV0dXJuIHMoaS5yZXBsYWNlKC86bmFtZS8sdCksZSl9KSl9ZnVuY3Rpb24gcyh0LGUpe3ZhciBuPS8lMjAvZyxpPWVuY29kZVVSSUNvbXBvbmVudCxzPXR5cGVvZiBlLGE9bnVsbDtyZXR1cm4gQXJyYXkuaXNBcnJheShlKT9hPW8odCxlKTpcInN0cmluZ1wiPT09cz9hPWkodCkrXCI9XCIrdShlKTpcIm51bWJlclwiPT09cz9hPWkodCkrXCI9XCIraShlKS5yZXBsYWNlKG4sXCIrXCIpOlwiYm9vbGVhblwiPT09cz9hPWkodCkrXCI9XCIrZTpcIm9iamVjdFwiPT09cyYmKG51bGwhPT1lP2E9cih0LGUpOmN8fChhPWkodCkrXCI9bnVsbFwiKSksYX1mdW5jdGlvbiBhKHQpe3JldHVyblwiJVwiKyhcIjBcIit0LmNoYXJDb2RlQXQoMCkudG9TdHJpbmcoMTYpKS5zbGljZSgtMikudG9VcHBlckNhc2UoKX1mdW5jdGlvbiB1KHQpe3JldHVybiB0LnJlcGxhY2UoL1teICEnKCl+XFwqXSovZyxlbmNvZGVVUklDb21wb25lbnQpLnJlcGxhY2UoLyAvZyxcIitcIikucmVwbGFjZSgvWyEnKCl+XFwqXS9nLGEpfXZhciBoPVwib2JqZWN0XCI9PXR5cGVvZiBlP2U6e30sYz1oLmlnbm9yZW51bGx8fCExLGw9aC5zb3J0ZWR8fCExO3JldHVybiBuKGkodCkubWFwKGZ1bmN0aW9uKGUpe3JldHVybiBzKGUsdFtlXSl9KSl9fX0sZnVuY3Rpb24odCxlKXtcInVzZSBzdHJpY3RcIjt0LmV4cG9ydHM9ZnVuY3Rpb24odCl7cmV0dXJuIGVuY29kZVVSSUNvbXBvbmVudCh0KS5yZXBsYWNlKC9bIScoKSpdL2csZnVuY3Rpb24odCl7cmV0dXJuXCIlXCIrdC5jaGFyQ29kZUF0KDApLnRvU3RyaW5nKDE2KS50b1VwcGVyQ2FzZSgpfSl9fSxmdW5jdGlvbih0LGUpe3QuZXhwb3J0cz1mdW5jdGlvbigpe3Rocm93IG5ldyBFcnJvcihcImRlZmluZSBjYW5ub3QgYmUgdXNlZCBpbmRpcmVjdFwiKX19LGZ1bmN0aW9uKHQsZSl7dC5leHBvcnRzPWZ1bmN0aW9uKHQpe3JldHVybiB0LndlYnBhY2tQb2x5ZmlsbHx8KHQuZGVwcmVjYXRlPWZ1bmN0aW9uKCl7fSx0LnBhdGhzPVtdLHQuY2hpbGRyZW49W10sdC53ZWJwYWNrUG9seWZpbGw9MSksdH19LGZ1bmN0aW9uKHQsZSl7dmFyIG49d2luZG93LlVSTHx8d2luZG93LndlYmtpdFVSTDt0LmV4cG9ydHM9ZnVuY3Rpb24odCxlKXt0cnl7dHJ5e3ZhciBpO3RyeXt2YXIgcj13aW5kb3cuQmxvYkJ1aWxkZXJ8fHdpbmRvdy5XZWJLaXRCbG9iQnVpbGRlcnx8d2luZG93Lk1vekJsb2JCdWlsZGVyfHx3aW5kb3cuTVNCbG9iQnVpbGRlcjtpPW5ldyByLGkuYXBwZW5kKHQpLGk9aS5nZXRCbG9iKCl9Y2F0Y2gobyl7aT1uZXcgQmxvYihbdF0pfXJldHVybiBuZXcgV29ya2VyKG4uY3JlYXRlT2JqZWN0VVJMKGkpKX1jYXRjaChvKXtyZXR1cm4gbmV3IFdvcmtlcihcImRhdGE6YXBwbGljYXRpb24vamF2YXNjcmlwdCxcIitlbmNvZGVVUklDb21wb25lbnQodCkpfX1jYXRjaChvKXtyZXR1cm4gbmV3IFdvcmtlcihlKX19fSxmdW5jdGlvbih0LGUsbil7dC5leHBvcnRzPWZ1bmN0aW9uKCl7cmV0dXJuIG4oMjEpKCchZnVuY3Rpb24odCl7ZnVuY3Rpb24gbihyKXtpZihlW3JdKXJldHVybiBlW3JdLmV4cG9ydHM7dmFyIGE9ZVtyXT17ZXhwb3J0czp7fSxpZDpyLGxvYWRlZDohMX07cmV0dXJuIHRbcl0uY2FsbChhLmV4cG9ydHMsYSxhLmV4cG9ydHMsbiksYS5sb2FkZWQ9ITAsYS5leHBvcnRzfXZhciBlPXt9O3JldHVybiBuLm09dCxuLmM9ZSxuLnA9XCJcIixuKDApfShbZnVuY3Rpb24odCxuKXsoZnVuY3Rpb24odCl7ZnVuY3Rpb24gbih0KXtoPXQuc2FtcGxlUmF0ZSx2PXQubnVtQ2hhbm5lbHMscygpfWZ1bmN0aW9uIGUodCl7Zm9yKHZhciBuPTA7dj5uO24rKylwW25dLnB1c2godFtuXSk7Zys9dFswXS5sZW5ndGh9ZnVuY3Rpb24gcih0KXtmb3IodmFyIG49W10sZT0wO3Y+ZTtlKyspbi5wdXNoKGkocFtlXSxnKSk7aWYoMj09PXYpdmFyIHI9ZihuWzBdLG5bMV0pO2Vsc2UgdmFyIHI9blswXTt2YXIgYT1sKHIpLG89bmV3IEJsb2IoW2FdLHt0eXBlOnR9KTt0aGlzLnBvc3RNZXNzYWdlKG8pfWZ1bmN0aW9uIGEoKXtmb3IodmFyIHQ9W10sbj0wO3Y+bjtuKyspdC5wdXNoKGkocFtuXSxnKSk7dGhpcy5wb3N0TWVzc2FnZSh0KX1mdW5jdGlvbiBvKCl7Zz0wLHA9W10scygpfWZ1bmN0aW9uIHMoKXtmb3IodmFyIHQ9MDt2PnQ7dCsrKXBbdF09W119ZnVuY3Rpb24gaSh0LG4pe2Zvcih2YXIgZT1uZXcgRmxvYXQzMkFycmF5KG4pLHI9MCxhPTA7YTx0Lmxlbmd0aDthKyspZS5zZXQodFthXSxyKSxyKz10W2FdLmxlbmd0aDtyZXR1cm4gZX1mdW5jdGlvbiBmKHQsbil7Zm9yKHZhciBlPXQubGVuZ3RoK24ubGVuZ3RoLHI9bmV3IEZsb2F0MzJBcnJheShlKSxhPTAsbz0wO2U+YTspclthKytdPXRbb10sclthKytdPW5bb10sbysrO3JldHVybiByfWZ1bmN0aW9uIGModCxuLGUpe2Zvcih2YXIgcj0wO3I8ZS5sZW5ndGg7cisrLG4rPTIpe3ZhciBhPU1hdGgubWF4KC0xLE1hdGgubWluKDEsZVtyXSkpO3Quc2V0SW50MTYobiwwPmE/MzI3NjgqYTozMjc2NyphLCEwKX19ZnVuY3Rpb24gdSh0LG4sZSl7Zm9yKHZhciByPTA7cjxlLmxlbmd0aDtyKyspdC5zZXRVaW50OChuK3IsZS5jaGFyQ29kZUF0KHIpKX1mdW5jdGlvbiBsKHQpe3ZhciBuPW5ldyBBcnJheUJ1ZmZlcig0NCsyKnQubGVuZ3RoKSxlPW5ldyBEYXRhVmlldyhuKTtyZXR1cm4gdShlLDAsXCJSSUZGXCIpLGUuc2V0VWludDMyKDQsMzYrMip0Lmxlbmd0aCwhMCksdShlLDgsXCJXQVZFXCIpLHUoZSwxMixcImZtdCBcIiksZS5zZXRVaW50MzIoMTYsMTYsITApLGUuc2V0VWludDE2KDIwLDEsITApLGUuc2V0VWludDE2KDIyLHYsITApLGUuc2V0VWludDMyKDI0LGgsITApLGUuc2V0VWludDMyKDI4LDQqaCwhMCksZS5zZXRVaW50MTYoMzIsMip2LCEwKSxlLnNldFVpbnQxNigzNCwxNiwhMCksdShlLDM2LFwiZGF0YVwiKSxlLnNldFVpbnQzMig0MCwyKnQubGVuZ3RoLCEwKSxjKGUsNDQsdCksZX12YXIgaCx2LGc9MCxwPVtdO3Qub25tZXNzYWdlPWZ1bmN0aW9uKHQpe3N3aXRjaCh0LmRhdGEuY29tbWFuZCl7Y2FzZVwiaW5pdFwiOm4odC5kYXRhLmNvbmZpZyk7YnJlYWs7Y2FzZVwicmVjb3JkXCI6ZSh0LmRhdGEuYnVmZmVyKTticmVhaztjYXNlXCJleHBvcnRXQVZcIjpyKHQuZGF0YS50eXBlKTticmVhaztjYXNlXCJnZXRCdWZmZXJcIjphKCk7YnJlYWs7Y2FzZVwiY2xlYXJcIjpvKCl9fX0pLmNhbGwobixmdW5jdGlvbigpe3JldHVybiB0aGlzfSgpKX1dKTtcXG4vLyMgc291cmNlTWFwcGluZ1VSTD05ZjlhYWMzMmM5YTc0MzJiNTU1NS53b3JrZXIuanMubWFwJyxuLnArXCI5ZjlhYWMzMmM5YTc0MzJiNTU1NS53b3JrZXIuanNcIil9fSxmdW5jdGlvbih0LGUpe3QuZXhwb3J0cz1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKGkpe2lmKG5baV0pcmV0dXJuIG5baV0uZXhwb3J0czt2YXIgcj1uW2ldPXtleHBvcnRzOnt9LGlkOmksbG9hZGVkOiExfTtyZXR1cm4gdFtpXS5jYWxsKHIuZXhwb3J0cyxyLHIuZXhwb3J0cyxlKSxyLmxvYWRlZD0hMCxyLmV4cG9ydHN9dmFyIG49e307cmV0dXJuIGUubT10LGUuYz1uLGUucD1cIlwiLGUoMCl9KGZ1bmN0aW9uKHQpe2Zvcih2YXIgZSBpbiB0KWlmKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbCh0LGUpKXN3aXRjaCh0eXBlb2YgdFtlXSl7Y2FzZVwiZnVuY3Rpb25cIjpicmVhaztjYXNlXCJvYmplY3RcIjp0W2VdPWZ1bmN0aW9uKGUpe3ZhciBuPWUuc2xpY2UoMSksaT10W2VbMF1dO3JldHVybiBmdW5jdGlvbih0LGUscil7aS5hcHBseSh0aGlzLFt0LGUscl0uY29uY2F0KG4pKX19KHRbZV0pO2JyZWFrO2RlZmF1bHQ6dFtlXT10W3RbZV1dfXJldHVybiB0fShbZnVuY3Rpb24odCxlLG4pe3ZhciBpLHI9bigxKSxvPW4oMTIpLHM9bigxNCksYT1uKDM4KSx1PW4oNDMpLGg9bigzOSksYz1uKDE2KSxsPW4oNDIpLGY9bigxMjgpLGQ9bigxMjkpO3QuZXhwb3J0cz1pPWZ1bmN0aW9uKHQpe3Q9dHx8e30sdGhpcy5fcGxheWVycz17fSx0aGlzLl92b2x1bWU9MSx0aGlzLl9tdXRlPSExLHRoaXMuU3RhdGVzPWEsdGhpcy5FcnJvcnM9dSx0aGlzLl9zZXR0aW5ncz1vKHt9LHQsaS5kZWZhdWx0cyl9LGkuTWltZVR5cGVzPWQsaS5Qcm90b2NvbHM9ZixpLkV2ZW50cz1oLGkuU3RhdGVzPWEsaS5FcnJvcnM9dSxpLkJyb3dzZXJVdGlscz1jLGkuZGVmYXVsdHM9e2ZsYXNoQXVkaW9QYXRoOlwiZmxhc2hBdWRpby5zd2ZcIixmbGFzaExvYWRUaW1lb3V0OjJlMyxmbGFzaE9iamVjdElEOlwiZmxhc2hBdWRpb09iamVjdFwiLGF1ZGlvT2JqZWN0SUQ6XCJodG1sNUF1ZGlvT2JqZWN0XCIsdXBkYXRlSW50ZXJ2YWw6MzAwLGJ1ZmZlclRpbWU6OGUzLGJ1ZmZlcmluZ0RlbGF5OjgwMCxzdHJlYW1VcmxQcm92aWRlcjpudWxsLGRlYnVnOiExfSxpLmNhcGFiaWxpdGllcz1sLm5hbWVzLGkuY3JlYXRlRGVmYXVsdE1lZGlhRGVzY3JpcHRvcj1mdW5jdGlvbih0LGUsbil7aWYoIXR8fCFlfHwhZS5sZW5ndGgpdGhyb3cgbmV3IEVycm9yKFwiaW52YWxpZCBpbnB1dCB0byBjcmVhdGUgbWVkaWEgZGVzY3JpcHRvclwiKTtyZXR1cm4gbnx8KG49MCkse2lkOnQsc3JjOmUsZHVyYXRpb246bixmb3JjZVNpbmdsZTohMSxmb3JjZUZsYXNoOiExLGZvcmNlSFRNTDU6ITEsZm9yY2VDdXN0b21ITFM6ITEsbWltZVR5cGU6dm9pZCAwfX0saS5wcm90b3R5cGUuZ2V0QXVkaW9QbGF5ZXI9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuX3BsYXllcnNbdF19LGkucHJvdG90eXBlLmhhc0F1ZGlvUGxheWVyPWZ1bmN0aW9uKHQpe3JldHVybiB2b2lkIDAhPT10aGlzLl9wbGF5ZXJzW3RdfSxpLnByb3RvdHlwZS5yZW1vdmVBdWRpb1BsYXllcj1mdW5jdGlvbih0KXt0aGlzLmhhc0F1ZGlvUGxheWVyKHQpJiZkZWxldGUgdGhpcy5fcGxheWVyc1t0XX0saS5wcm90b3R5cGUuc2V0Vm9sdW1lPWZ1bmN0aW9uKHQpe3Q9TWF0aC5taW4oMSx0KSx0aGlzLl92b2x1bWU9TWF0aC5tYXgoMCx0KTtmb3IodmFyIGUgaW4gdGhpcy5fcGxheWVycyl0aGlzLl9wbGF5ZXJzLmhhc093blByb3BlcnR5KGUpJiZ0aGlzLl9wbGF5ZXJzW2VdLnNldFZvbHVtZSh0aGlzLl92b2x1bWUpfSxpLnByb3RvdHlwZS5nZXRWb2x1bWU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fdm9sdW1lfSxpLnByb3RvdHlwZS5zZXRNdXRlPWZ1bmN0aW9uKHQpe3RoaXMuX211dGVkPXQ7Zm9yKHZhciBlIGluIHRoaXMuX3BsYXllcnMpdGhpcy5fcGxheWVycy5oYXNPd25Qcm9wZXJ0eShlKSYmdGhpcy5fcGxheWVyc1tlXS5zZXRNdXRlKHRoaXMuX211dGVkKX0saS5wcm90b3R5cGUuZ2V0TXV0ZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9tdXRlZH0saS5wcm90b3R5cGUuY3JlYXRlQXVkaW9QbGF5ZXI9ZnVuY3Rpb24odCxlKXt2YXIgbixpPXIoe30sdGhpcy5fc2V0dGluZ3MsZSk7aWYoIXQpdGhyb3dcIkF1ZGlvTWFuYWdlcjogTm8gbWVkaWEgZGVzY3JpcHRvciBvYmplY3QgcGFzc2VkLCBjYW5gdCBidWlsZCBhbnkgcGxheWVyXCI7aWYodC5pZHx8KHQuaWQ9TWF0aC5mbG9vcigxZTEwKk1hdGgucmFuZG9tKCkpLnRvU3RyaW5nKCkrKG5ldyBEYXRlKS5nZXRUaW1lKCkudG9TdHJpbmcoKSksIXQuc3JjKXRocm93IG5ldyBFcnJvcihcIkF1ZGlvTWFuYWdlcjogWW91IG5lZWQgdG8gcGFzcyBhIHZhbGlkIG1lZGlhIHNvdXJjZSBVUkxcIik7aWYoIXRoaXMuX3BsYXllcnNbdC5pZF0pe2lmKG49cy5jcmVhdGVBdWRpb1BsYXllcih0LGkpLCFuKXRocm93IG5ldyBFcnJvcihcIkF1ZGlvTWFuYWdlcjogTm8gcGxheWVyIGNvdWxkIGJlIGNyZWF0ZWQgZnJvbSB0aGUgZ2l2ZW4gZGVzY3JpcHRvclwiKTt0aGlzLl9wbGF5ZXJzW3QuaWRdPW59cmV0dXJuIHRoaXMuX3BsYXllcnNbdC5pZF0uc2V0Vm9sdW1lKHRoaXMuX3ZvbHVtZSksdGhpcy5fcGxheWVyc1t0LmlkXS5zZXRNdXRlKHRoaXMuX211dGVkKSx0aGlzLl9wbGF5ZXJzW3QuaWRdLm9uKGguU1RBVEVfQ0hBTkdFLHRoaXMuX29uU3RhdGVDaGFuZ2UsdGhpcyksdGhpcy5fcGxheWVyc1t0LmlkXX0saS5wcm90b3R5cGUuX29uU3RhdGVDaGFuZ2U9ZnVuY3Rpb24odCxlKXtlLmdldFN0YXRlKCk9PT1hLkRFQUQmJnRoaXMucmVtb3ZlQXVkaW9QbGF5ZXIoZS5nZXRJZCgpKX19LFsxMzAsMiw4LDRdLFsxMzEsMyw0XSxmdW5jdGlvbih0LGUpe2Z1bmN0aW9uIG4odCxlLG4pe258fChuPXt9KTtmb3IodmFyIGk9LTEscj1lLmxlbmd0aDsrK2k8cjspe3ZhciBvPWVbaV07bltvXT10W29dfXJldHVybiBufXQuZXhwb3J0cz1ufSxbMTMyLDUsNiw3XSxmdW5jdGlvbih0LGUpe2Z1bmN0aW9uIG4odCl7cmV0dXJuISF0JiZcIm9iamVjdFwiPT10eXBlb2YgdH1mdW5jdGlvbiBpKHQsZSl7dmFyIG49bnVsbD09dD92b2lkIDA6dFtlXTtyZXR1cm4gcyhuKT9uOnZvaWQgMH1mdW5jdGlvbiByKHQpe3JldHVybiBvKHQpJiZmLmNhbGwodCk9PWF9ZnVuY3Rpb24gbyh0KXt2YXIgZT10eXBlb2YgdDtyZXR1cm4hIXQmJihcIm9iamVjdFwiPT1lfHxcImZ1bmN0aW9uXCI9PWUpfWZ1bmN0aW9uIHModCl7cmV0dXJuIG51bGw9PXQ/ITE6cih0KT9kLnRlc3QoYy5jYWxsKHQpKTpuKHQpJiZ1LnRlc3QodCl9dmFyIGE9XCJbb2JqZWN0IEZ1bmN0aW9uXVwiLHU9L15cXFtvYmplY3QgLis/Q29uc3RydWN0b3JcXF0kLyxoPU9iamVjdC5wcm90b3R5cGUsYz1GdW5jdGlvbi5wcm90b3R5cGUudG9TdHJpbmcsbD1oLmhhc093blByb3BlcnR5LGY9aC50b1N0cmluZyxkPVJlZ0V4cChcIl5cIitjLmNhbGwobCkucmVwbGFjZSgvW1xcXFxeJC4qKz8oKVtcXF17fXxdL2csXCJcXFxcJCZcIikucmVwbGFjZSgvaGFzT3duUHJvcGVydHl8KGZ1bmN0aW9uKS4qPyg/PVxcXFxcXCgpfCBmb3IgLis/KD89XFxcXFxcXSkvZyxcIiQxLio/XCIpK1wiJFwiKTt0LmV4cG9ydHM9aX0sZnVuY3Rpb24odCxlKXtmdW5jdGlvbiBuKHQpe3JldHVybiEhdCYmXCJvYmplY3RcIj09dHlwZW9mIHR9ZnVuY3Rpb24gaSh0KXtyZXR1cm4gZnVuY3Rpb24oZSl7cmV0dXJuIG51bGw9PWU/dm9pZCAwOmVbdF19fWZ1bmN0aW9uIHIodCl7cmV0dXJuIG51bGwhPXQmJm8obCh0KSl9ZnVuY3Rpb24gbyh0KXtyZXR1cm5cIm51bWJlclwiPT10eXBlb2YgdCYmdD4tMSYmdCUxPT0wJiZjPj10fWZ1bmN0aW9uIHModCl7cmV0dXJuIG4odCkmJnIodCkmJnUuY2FsbCh0LFwiY2FsbGVlXCIpJiYhaC5jYWxsKHQsXCJjYWxsZWVcIil9dmFyIGE9T2JqZWN0LnByb3RvdHlwZSx1PWEuaGFzT3duUHJvcGVydHksaD1hLnByb3BlcnR5SXNFbnVtZXJhYmxlLGM9OTAwNzE5OTI1NDc0MDk5MSxsPWkoXCJsZW5ndGhcIik7dC5leHBvcnRzPXN9LGZ1bmN0aW9uKHQsZSl7ZnVuY3Rpb24gbih0KXtyZXR1cm4hIXQmJlwib2JqZWN0XCI9PXR5cGVvZiB0fWZ1bmN0aW9uIGkodCxlKXt2YXIgbj1udWxsPT10P3ZvaWQgMDp0W2VdO3JldHVybiBhKG4pP246dm9pZCAwfWZ1bmN0aW9uIHIodCl7cmV0dXJuXCJudW1iZXJcIj09dHlwZW9mIHQmJnQ+LTEmJnQlMT09MCYmbT49dH1mdW5jdGlvbiBvKHQpe3JldHVybiBzKHQpJiZwLmNhbGwodCk9PWh9ZnVuY3Rpb24gcyh0KXt2YXIgZT10eXBlb2YgdDtyZXR1cm4hIXQmJihcIm9iamVjdFwiPT1lfHxcImZ1bmN0aW9uXCI9PWUpfWZ1bmN0aW9uIGEodCl7cmV0dXJuIG51bGw9PXQ/ITE6byh0KT9nLnRlc3QoZi5jYWxsKHQpKTpuKHQpJiZjLnRlc3QodCl9dmFyIHU9XCJbb2JqZWN0IEFycmF5XVwiLGg9XCJbb2JqZWN0IEZ1bmN0aW9uXVwiLGM9L15cXFtvYmplY3QgLis/Q29uc3RydWN0b3JcXF0kLyxsPU9iamVjdC5wcm90b3R5cGUsZj1GdW5jdGlvbi5wcm90b3R5cGUudG9TdHJpbmcsZD1sLmhhc093blByb3BlcnR5LHA9bC50b1N0cmluZyxnPVJlZ0V4cChcIl5cIitmLmNhbGwoZCkucmVwbGFjZSgvW1xcXFxeJC4qKz8oKVtcXF17fXxdL2csXCJcXFxcJCZcIikucmVwbGFjZSgvaGFzT3duUHJvcGVydHl8KGZ1bmN0aW9uKS4qPyg/PVxcXFxcXCgpfCBmb3IgLis/KD89XFxcXFxcXSkvZyxcIiQxLio/XCIpK1wiJFwiKSxfPWkoQXJyYXksXCJpc0FycmF5XCIpLG09OTAwNzE5OTI1NDc0MDk5MSx5PV98fGZ1bmN0aW9uKHQpe3JldHVybiBuKHQpJiZyKHQubGVuZ3RoKSYmcC5jYWxsKHQpPT11fTt0LmV4cG9ydHM9eX0sWzEzMyw5LDEwLDExXSxmdW5jdGlvbih0LGUpe2Z1bmN0aW9uIG4odCxlLG4pe2lmKFwiZnVuY3Rpb25cIiE9dHlwZW9mIHQpcmV0dXJuIGk7aWYodm9pZCAwPT09ZSlyZXR1cm4gdDtzd2l0Y2gobil7Y2FzZSAxOnJldHVybiBmdW5jdGlvbihuKXtyZXR1cm4gdC5jYWxsKGUsbil9O2Nhc2UgMzpyZXR1cm4gZnVuY3Rpb24obixpLHIpe3JldHVybiB0LmNhbGwoZSxuLGkscil9O2Nhc2UgNDpyZXR1cm4gZnVuY3Rpb24obixpLHIsbyl7cmV0dXJuIHQuY2FsbChlLG4saSxyLG8pfTtjYXNlIDU6cmV0dXJuIGZ1bmN0aW9uKG4saSxyLG8scyl7cmV0dXJuIHQuY2FsbChlLG4saSxyLG8scyl9fXJldHVybiBmdW5jdGlvbigpe3JldHVybiB0LmFwcGx5KGUsYXJndW1lbnRzKX19ZnVuY3Rpb24gaSh0KXtyZXR1cm4gdH10LmV4cG9ydHM9bn0sZnVuY3Rpb24odCxlKXtmdW5jdGlvbiBuKHQpe3JldHVybiBmdW5jdGlvbihlKXtyZXR1cm4gbnVsbD09ZT92b2lkIDA6ZVt0XX19ZnVuY3Rpb24gaSh0KXtyZXR1cm4gbnVsbCE9dCYmcyhjKHQpKX1mdW5jdGlvbiByKHQsZSl7cmV0dXJuIHQ9XCJudW1iZXJcIj09dHlwZW9mIHR8fHUudGVzdCh0KT8rdDotMSxlPW51bGw9PWU/aDplLHQ+LTEmJnQlMT09MCYmZT50fWZ1bmN0aW9uIG8odCxlLG4pe2lmKCFhKG4pKXJldHVybiExO3ZhciBvPXR5cGVvZiBlO2lmKFwibnVtYmVyXCI9PW8/aShuKSYmcihlLG4ubGVuZ3RoKTpcInN0cmluZ1wiPT1vJiZlIGluIG4pe3ZhciBzPW5bZV07cmV0dXJuIHQ9PT10P3Q9PT1zOnMhPT1zfXJldHVybiExfWZ1bmN0aW9uIHModCl7cmV0dXJuXCJudW1iZXJcIj09dHlwZW9mIHQmJnQ+LTEmJnQlMT09MCYmaD49dH1mdW5jdGlvbiBhKHQpe3ZhciBlPXR5cGVvZiB0O3JldHVybiEhdCYmKFwib2JqZWN0XCI9PWV8fFwiZnVuY3Rpb25cIj09ZSl9dmFyIHU9L15cXGQrJC8saD05MDA3MTk5MjU0NzQwOTkxLGM9bihcImxlbmd0aFwiKTt0LmV4cG9ydHM9b30sZnVuY3Rpb24odCxlKXtmdW5jdGlvbiBuKHQsZSl7aWYoXCJmdW5jdGlvblwiIT10eXBlb2YgdCl0aHJvdyBuZXcgVHlwZUVycm9yKGkpO3JldHVybiBlPXIodm9pZCAwPT09ZT90Lmxlbmd0aC0xOitlfHwwLDApLGZ1bmN0aW9uKCl7Zm9yKHZhciBuPWFyZ3VtZW50cyxpPS0xLG89cihuLmxlbmd0aC1lLDApLHM9QXJyYXkobyk7KytpPG87KXNbaV09bltlK2ldO3N3aXRjaChlKXtjYXNlIDA6cmV0dXJuIHQuY2FsbCh0aGlzLHMpO2Nhc2UgMTpyZXR1cm4gdC5jYWxsKHRoaXMsblswXSxzKTtjYXNlIDI6cmV0dXJuIHQuY2FsbCh0aGlzLG5bMF0sblsxXSxzKX12YXIgYT1BcnJheShlKzEpO2ZvcihpPS0xOysraTxlOylhW2ldPW5baV07cmV0dXJuIGFbZV09cyx0LmFwcGx5KHRoaXMsYSl9fXZhciBpPVwiRXhwZWN0ZWQgYSBmdW5jdGlvblwiLHI9TWF0aC5tYXg7dC5leHBvcnRzPW59LGZ1bmN0aW9uKHQsZSxuKXtmdW5jdGlvbiBpKHQsZSl7cmV0dXJuIHZvaWQgMD09PXQ/ZTp0fWZ1bmN0aW9uIHIodCxlKXtyZXR1cm4gcyhmdW5jdGlvbihuKXt2YXIgaT1uWzBdO3JldHVybiBudWxsPT1pP2k6KG4ucHVzaChlKSx0LmFwcGx5KHZvaWQgMCxuKSl9KX12YXIgbz1uKDEpLHM9bigxMyksYT1yKG8saSk7dC5leHBvcnRzPWF9LDExLGZ1bmN0aW9uKHQsZSxuKXt0LmV4cG9ydHM9bigxNSl9LGZ1bmN0aW9uKHQsZSxuKXt2YXIgaSxyPW4oMTYpLG89bigxNykscz1uKDQ1KSxhPW4oNDkpLHU9big0NiksaD1uKDQ4KSxjPW4oNTApLGw9bigxMjkpO3QuZXhwb3J0cz1pPWZ1bmN0aW9uKCl7fSxpLmNyZWF0ZUF1ZGlvUGxheWVyPWZ1bmN0aW9uKHQsZSl7dmFyIG47aWYobj10LnNyYy5zcGxpdChcIjpcIilbMF0sKFwicnRtcFwiPT09bnx8XCJydG1wdFwiPT09bnx8dC5mb3JjZUZsYXNoKSYmIXQuZm9yY2VIVE1MNSlyZXR1cm4gbmV3IG8odCxlKTtpZih0Lm1pbWVUeXBlPWkuZ2V0TWltZVR5cGUodCksdC5taW1lVHlwZT09PWwuTTNVOCl7aWYoci5pc01TRVN1cHBvcnRNUEVHKCl8fHIuaXNNU0VTdXBwb3J0TVA0KCkpcmV0dXJuIG5ldyBjKHQsZSk7aWYoci5pc05hdGl2ZUhsc1N1cHBvcnRlZCgpJiYhdC5mb3JjZUN1c3RvbUhMUylyZXR1cm4gci5pc01vYmlsZSgpfHx0LmZvcmNlU2luZ2xlP25ldyBhKHQsZSk6bmV3IHModCxlKX1lbHNle2lmKHIuc3VwcG9ydEhUTUw1QXVkaW8oKSYmci5jYW5QbGF5VHlwZSh0Lm1pbWVUeXBlKXx8dC5mb3JjZUhUTUw1KXJldHVybiByLmlzTW9iaWxlKCl8fHQuZm9yY2VTaW5nbGU/bmV3IGgodCxlKTpuZXcgdSh0LGUpO2lmKHQubWltZVR5cGU9PT1sLk1QMylyZXR1cm4gbmV3IG8odCxlKX1yZXR1cm4gbnVsbH0saS5nZXRNaW1lVHlwZT1mdW5jdGlvbih0KXtpZih0Lm1pbWVUeXBlKXJldHVybiB0Lm1pbWVUeXBlO3ZhciBlPXQuc3JjLnNwbGl0KFwiP1wiKVswXTtyZXR1cm4gZT1lLnN1YnN0cmluZyhlLmxhc3RJbmRleE9mKFwiLlwiKSsxLGUubGVuZ3RoKSxsLmdldFR5cGVCeUV4dGVuc2lvbihlKX19LGZ1bmN0aW9uKHQsZSl7ZnVuY3Rpb24gbigpe3JldHVybiEoIXdpbmRvdy5NZWRpYVNvdXJjZSYmIXdpbmRvdy5XZWJLaXRNZWRpYVNvdXJjZSl9dC5leHBvcnRzPXtzdXBwb3J0SFRNTDVBdWRpbzpmdW5jdGlvbigpe3ZhciB0O3RyeXtpZih3aW5kb3cuSFRNTEF1ZGlvRWxlbWVudCYmXCJ1bmRlZmluZWRcIiE9dHlwZW9mIEF1ZGlvKXJldHVybiB0PW5ldyBBdWRpbywhMH1jYXRjaChlKXtyZXR1cm4hMX19LGNyZWF0ZUF1ZGlvRWxlbWVudDpmdW5jdGlvbigpe3ZhciB0PWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJhdWRpb1wiKTtyZXR1cm4gdC5zZXRBdHRyaWJ1dGUoXCJtc0F1ZGlvQ2F0ZWdvcnlcIixcIkJhY2tncm91bmRDYXBhYmxlTWVkaWFcIiksdC5tb3pBdWRpb0NoYW5uZWxUeXBlPVwiY29udGVudFwiLHR9LGlzTW9iaWxlOmZ1bmN0aW9uKHQpe3ZhciBlPXdpbmRvdy5uYXZpZ2F0b3IudXNlckFnZW50LG49W1wibW9iaWxlXCIsXCJpUGhvbmVcIixcImlQYWRcIixcImlQb2RcIixcIkFuZHJvaWRcIixcIlNreWZpcmVcIl07cmV0dXJuIG4uc29tZShmdW5jdGlvbih0KXtyZXR1cm4gdD1uZXcgUmVnRXhwKHQsXCJpXCIpLHQudGVzdChlKX0pfSxpc0lFMTBNb2JpbGU6ZnVuY3Rpb24oKXtyZXR1cm4vSUVtb2JpbGVcXC8xMFxcLjAvZ2kudGVzdChuYXZpZ2F0b3IudXNlckFnZW50KX0sY2FuUGxheVR5cGU6ZnVuY3Rpb24odCl7dmFyIGU9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImF1ZGlvXCIpO3JldHVybiEhKGUmJmUuY2FuUGxheVR5cGUmJmUuY2FuUGxheVR5cGUodCkubWF0Y2goL21heWJlfHByb2JhYmx5L2kpKX0saXNOYXRpdmVIbHNTdXBwb3J0ZWQ6ZnVuY3Rpb24oKXt2YXIgdCxlLG4saT1uYXZpZ2F0b3IudXNlckFnZW50LHI9W1wiaVBob25lXCIsXCJpUGFkXCIsXCJpUG9kXCJdO3JldHVybiB0PWZ1bmN0aW9uKHQpe3JldHVybiB0LnRlc3QoaSl9LGU9IXQoL2Nocm9tZS9pKSYmIXQoL29wZXJhL2kpJiZ0KC9zYWZhcmkvaSksbj1yLnNvbWUoZnVuY3Rpb24oZSl7cmV0dXJuIHQobmV3IFJlZ0V4cChlLFwiaVwiKSl9KSxufHxlfSxpc01TRVN1cHBvcnRlZDpuLGlzTVNFU3VwcG9ydE1QRUc6ZnVuY3Rpb24oKXtyZXR1cm4gbigpJiZNZWRpYVNvdXJjZS5pc1R5cGVTdXBwb3J0ZWQoXCJhdWRpby9tcGVnXCIpfSxpc01TRVN1cHBvcnRNUDQ6ZnVuY3Rpb24oKXtyZXR1cm4gbigpJiZNZWRpYVNvdXJjZS5pc1R5cGVTdXBwb3J0ZWQoXCJhdWRpby9tcDRcIil9fX0sZnVuY3Rpb24odCxlLG4pe2Z1bmN0aW9uIGkodCxlKXthLmNhbGwodGhpcyxcIkZsYXNoQXVkaW9Qcm94eVwiLHQsZSksaS5wbGF5ZXJzW3QuaWRdPXRoaXMsdGhpcy5fZXJyb3JNZXNzYWdlPW51bGwsdGhpcy5fZXJyb3JJRD1udWxsLHRoaXMuX3ZvbHVtZT0xLHRoaXMuX211dGVkPSExLGkuY3JlYXRpbmdGbGFzaEF1ZGlvfHwoaS5mbGFzaEF1ZGlvP3RoaXMuX2NyZWF0ZUZsYXNoQXVkaW8oKTppLmNyZWF0ZUZsYXNoT2JqZWN0KGUpKX12YXIgcj1uKDEpLG89bigxOCkscz1uKDI5KSxhPW4oMzUpLHU9bigzOSksaD1uKDQzKSxjPW4oMzgpLGw9big0NCk7dC5leHBvcnRzPWkscihpLnByb3RvdHlwZSxhLnByb3RvdHlwZSksaS5wbGF5ZXJzPXt9LGkuY3JlYXRlRmxhc2hPYmplY3Q9ZnVuY3Rpb24odCl7aS5jcmVhdGluZ0ZsYXNoQXVkaW89ITAsaS5jb250YWluZXJFbGVtZW50PWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiksaS5jb250YWluZXJFbGVtZW50LnNldEF0dHJpYnV0ZShcImlkXCIsdC5mbGFzaE9iamVjdElEK1wiLWNvbnRhaW5lclwiKSxpLmZsYXNoRWxlbWVudFRhcmdldD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpLGkuZmxhc2hFbGVtZW50VGFyZ2V0LnNldEF0dHJpYnV0ZShcImlkXCIsdC5mbGFzaE9iamVjdElEK1wiLXRhcmdldFwiKSxpLmNvbnRhaW5lckVsZW1lbnQuYXBwZW5kQ2hpbGQoaS5mbGFzaEVsZW1lbnRUYXJnZXQpLGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoaS5jb250YWluZXJFbGVtZW50KTt2YXIgZT1mdW5jdGlvbihlKXtpZihlLnN1Y2Nlc3MpaS5mbGFzaEF1ZGlvPWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHQuZmxhc2hPYmplY3RJRCksd2luZG93LnNldFRpbWVvdXQoZnVuY3Rpb24oKXtpZihpLmZsYXNoQXVkaW8mJiEoXCJQZXJjZW50TG9hZGVkXCJpbiBpLmZsYXNoQXVkaW8pKWZvcih2YXIgdCBpbiBpLnBsYXllcnMpaS5wbGF5ZXJzLmhhc093blByb3BlcnR5KHQpJiYoaS5wbGF5ZXJzW3RdLl9lcnJvcklEPWguRkxBU0hfUFJPWFlfRkxBU0hfQkxPQ0tFRCxpLnBsYXllcnNbdF0uX2Vycm9yTWVzc2FnZT1cIkZsYXNoIG9iamVjdCBibG9ja2VkXCIsaS5wbGF5ZXJzW3RdLl9zZXRTdGF0ZShjLkVSUk9SKSxpLnBsYXllcnNbdF0uX2xvZ2dlci50eXBlPWkucGxheWVyc1t0XS5nZXRUeXBlKCksaS5wbGF5ZXJzW3RdLl9sb2dnZXIubG9nKGkucGxheWVyc1t0XS5fZXJyb3JNZXNzYWdlKSl9LHQuZmxhc2hMb2FkVGltZW91dCksaS5mbGFzaEF1ZGlvLnRyaWdnZXJFdmVudD1mdW5jdGlvbih0LGUpe2kucGxheWVyc1t0XS5fdHJpZ2dlckV2ZW50KGUpfSxpLmZsYXNoQXVkaW8ub25Qb3NpdGlvbkNoYW5nZT1mdW5jdGlvbih0LGUsbixyKXtpLnBsYXllcnNbdF0uX29uUG9zaXRpb25DaGFuZ2UoZSxuLHIpfSxpLmZsYXNoQXVkaW8ub25EZWJ1Zz1mdW5jdGlvbih0LGUsbil7aS5wbGF5ZXJzW3RdLl9sb2dnZXIudHlwZT1lLGkucGxheWVyc1t0XS5fbG9nZ2VyLmxvZyhuKX0saS5mbGFzaEF1ZGlvLm9uU3RhdGVDaGFuZ2U9ZnVuY3Rpb24odCxlKXtpLnBsYXllcnNbdF0uX3NldFN0YXRlKGUpLGU9PT1jLkRFQUQmJmRlbGV0ZSBpLnBsYXllcnNbdF19LGkuZmxhc2hBdWRpby5vbkluaXQ9ZnVuY3Rpb24odCl7aS5jcmVhdGluZ0ZsYXNoQXVkaW89ITEsbyhzKGkucGxheWVycyksXCJfY3JlYXRlRmxhc2hBdWRpb1wiKX07ZWxzZSBmb3IodmFyIG4gaW4gaS5wbGF5ZXJzKWkucGxheWVycy5oYXNPd25Qcm9wZXJ0eShuKSYmKGkucGxheWVyc1tuXS5fZXJyb3JJRD1oLkZMQVNIX1BST1hZX0NBTlRfTE9BRF9GTEFTSCxpLnBsYXllcnNbbl0uX2Vycm9yTWVzc2FnZT1cIkNhbm5vdCBjcmVhdGUgZmxhc2ggb2JqZWN0XCIsaS5wbGF5ZXJzW25dLl9zZXRTdGF0ZShjLkVSUk9SKSl9O2RvY3VtZW50LmdldEVsZW1lbnRCeUlkKHQuZmxhc2hPYmplY3RJRCl8fGwuZW1iZWRTV0YodC5mbGFzaEF1ZGlvUGF0aCx0LmZsYXNoT2JqZWN0SUQrXCItdGFyZ2V0XCIsXCIxXCIsXCIxXCIsXCI5LjAuMjRcIixcIlwiLHtqc29uOmVuY29kZVVSSUNvbXBvbmVudChKU09OLnN0cmluZ2lmeSh0KSl9LHthbGxvd3NjcmlwdGFjY2VzczpcImFsd2F5c1wifSx7aWQ6dC5mbGFzaE9iamVjdElELHRhYkluZGV4OlwiLTFcIn0sZSl9LGkuX3JlYWR5PWZ1bmN0aW9uKCl7cmV0dXJuIGkuZmxhc2hBdWRpbyYmIWkuY3JlYXRpbmdGbGFzaEF1ZGlvfSxpLnByb3RvdHlwZS5fY3JlYXRlRmxhc2hBdWRpbz1mdW5jdGlvbigpe2kuZmxhc2hBdWRpby5jcmVhdGVBdWRpbyh0aGlzLmdldERlc2NyaXB0b3IoKSksdGhpcy5fc3RhdGU9aS5mbGFzaEF1ZGlvLmdldFN0YXRlKHRoaXMuZ2V0SWQoKSksdGhpcy5zZXRWb2x1bWUodGhpcy5fdm9sdW1lKSx0aGlzLnNldE11dGUodGhpcy5fbXV0ZWQpfSxpLnByb3RvdHlwZS5fdHJpZ2dlckV2ZW50PWZ1bmN0aW9uKHQpe3RoaXMuX2xvZ2dlci5sb2coXCJGbGFzaCBlbGVtZW50IHRyaWdnZXJlZCBldmVudDogXCIrdCksdGhpcy50cmlnZ2VyKHQsdGhpcyl9LGkucHJvdG90eXBlLl9zZXRTdGF0ZT1mdW5jdGlvbih0KXt0aGlzLl9zdGF0ZSE9PXQmJih0aGlzLl9zdGF0ZT10LHRoaXMudHJpZ2dlcih1LlNUQVRFX0NIQU5HRSx0LHRoaXMpKX0saS5wcm90b3R5cGUuX29uUG9zaXRpb25DaGFuZ2U9ZnVuY3Rpb24odCxlLG4pe3RoaXMudHJpZ2dlcih1LlBPU0lUSU9OX0NIQU5HRSx0LGUsbix0aGlzKX0saS5wcm90b3R5cGUuZ2V0VHlwZT1mdW5jdGlvbigpe3JldHVybiBpLl9yZWFkeSgpP2kuZmxhc2hBdWRpby5nZXRUeXBlKHRoaXMuZ2V0SWQoKSk6dGhpcy5fdHlwZX0saS5wcm90b3R5cGUuZ2V0Q29udGFpbmVyRWxlbWVudD1mdW5jdGlvbigpe1xucmV0dXJuIGkuY29udGFpbmVyRWxlbWVudH0saS5wcm90b3R5cGUucGxheT1mdW5jdGlvbih0KXtpZihpLl9yZWFkeSgpKXtpZih0aGlzLmdldFN0YXRlKCk9PT1jLlBBVVNFRClyZXR1cm4gdm9pZCB0aGlzLnJlc3VtZSgpO3Q9dm9pZCAwPT09dD8wOnQsaS5mbGFzaEF1ZGlvLnBsYXlBdWRpbyh0aGlzLmdldElkKCksdCl9fSxpLnByb3RvdHlwZS5wYXVzZT1mdW5jdGlvbigpe2kuX3JlYWR5KCkmJmkuZmxhc2hBdWRpby5wYXVzZUF1ZGlvKHRoaXMuZ2V0SWQoKSl9LGkucHJvdG90eXBlLnNlZWs9ZnVuY3Rpb24odCl7aS5fcmVhZHkoKSYmaS5mbGFzaEF1ZGlvLnNlZWtBdWRpbyh0aGlzLmdldElkKCksdCl9LGkucHJvdG90eXBlLnJlc3VtZT1mdW5jdGlvbigpe2kuX3JlYWR5KCkmJmkuZmxhc2hBdWRpby5yZXN1bWVBdWRpbyh0aGlzLmdldElkKCkpfSxpLnByb3RvdHlwZS5zZXRWb2x1bWU9ZnVuY3Rpb24odCl7dGhpcy5fdm9sdW1lPXQsaS5fcmVhZHkoKSYmaS5mbGFzaEF1ZGlvLnNldFZvbHVtZSh0aGlzLmdldElkKCksdCl9LGkucHJvdG90eXBlLmdldFZvbHVtZT1mdW5jdGlvbigpe3JldHVybiBpLl9yZWFkeSgpP2kuZmxhc2hBdWRpby5nZXRWb2x1bWUodGhpcy5nZXRJZCgpKTp0aGlzLl92b2x1bWV9LGkucHJvdG90eXBlLnNldE11dGU9ZnVuY3Rpb24odCl7dGhpcy5fbXV0ZWQ9dCxpLl9yZWFkeSgpJiZpLmZsYXNoQXVkaW8uc2V0TXV0ZSh0aGlzLmdldElkKCksdCl9LGkucHJvdG90eXBlLmdldE11dGU9ZnVuY3Rpb24oKXtyZXR1cm4gaS5fcmVhZHkoKT9pLmZsYXNoQXVkaW8uZ2V0TXV0ZSh0aGlzLmdldElkKCkpOnRoaXMuX211dGVkfSxpLnByb3RvdHlwZS5nZXRTdGF0ZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9zdGF0ZX0saS5wcm90b3R5cGUuZ2V0Q3VycmVudFBvc2l0aW9uPWZ1bmN0aW9uKCl7cmV0dXJuIGkuX3JlYWR5KCk/aS5mbGFzaEF1ZGlvLmdldEN1cnJlbnRQb3NpdGlvbih0aGlzLmdldElkKCkpOjB9LGkucHJvdG90eXBlLmdldExvYWRlZFBvc2l0aW9uPWZ1bmN0aW9uKCl7cmV0dXJuIGkuX3JlYWR5KCk/aS5mbGFzaEF1ZGlvLmdldExvYWRlZFBvc2l0aW9uKHRoaXMuZ2V0SWQoKSk6MH0saS5wcm90b3R5cGUuZ2V0RHVyYXRpb249ZnVuY3Rpb24oKXtyZXR1cm4gaS5fcmVhZHkoKT9pLmZsYXNoQXVkaW8uZ2V0RHVyYXRpb24odGhpcy5nZXRJZCgpKTowfSxpLnByb3RvdHlwZS5raWxsPWZ1bmN0aW9uKCl7cmV0dXJuIGkuX3JlYWR5KCk/dm9pZCBpLmZsYXNoQXVkaW8ua2lsbEF1ZGlvKHRoaXMuZ2V0SWQoKSk6MH0saS5wcm90b3R5cGUuZ2V0RXJyb3JNZXNzYWdlPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2Vycm9yTWVzc2FnZT90aGlzLl9lcnJvck1lc3NhZ2U6aS5mbGFzaEF1ZGlvLmdldEVycm9yTWVzc2FnZSh0aGlzLmdldElkKCkpfSxpLnByb3RvdHlwZS5nZXRFcnJvcklEPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2Vycm9ySUQ/dGhpcy5fZXJyb3JJRDppLmZsYXNoQXVkaW8uZ2V0RXJyb3JJRCh0aGlzLmdldElkKCkpfSxpLnByb3RvdHlwZS5nZXRMZXZlbE51bT1mdW5jdGlvbigpe3JldHVybiBpLl9yZWFkeSgpP2kuZmxhc2hBdWRpby5nZXRMZXZlbE51bSh0aGlzLmdldElkKCkpOjB9LGkucHJvdG90eXBlLmdldExldmVsPWZ1bmN0aW9uKCl7cmV0dXJuIGkuX3JlYWR5KCk/aS5mbGFzaEF1ZGlvLmdldExldmVsKHRoaXMuZ2V0SWQoKSk6MH0saS5wcm90b3R5cGUuc2V0TGV2ZWw9ZnVuY3Rpb24odCl7cmV0dXJuIGkuX3JlYWR5KCk/aS5mbGFzaEF1ZGlvLnNldExldmVsKHRoaXMuZ2V0SWQoKSx0KTowfX0sZnVuY3Rpb24odCxlLG4pe2Z1bmN0aW9uIGkodCl7cmV0dXJuIGZ1bmN0aW9uKGUpe3JldHVybiBudWxsPT1lP3ZvaWQgMDplW3RdfX1mdW5jdGlvbiByKHQpe3JldHVybiBudWxsIT10JiZzKF8odCkpfWZ1bmN0aW9uIG8odCxlKXt2YXIgbj10eXBlb2YgdDtpZihcInN0cmluZ1wiPT1uJiZwLnRlc3QodCl8fFwibnVtYmVyXCI9PW4pcmV0dXJuITA7aWYobCh0KSlyZXR1cm4hMTt2YXIgaT0hZC50ZXN0KHQpO3JldHVybiBpfHxudWxsIT1lJiZ0IGluIGEoZSl9ZnVuY3Rpb24gcyh0KXtyZXR1cm5cIm51bWJlclwiPT10eXBlb2YgdCYmdD4tMSYmdCUxPT0wJiZnPj10fWZ1bmN0aW9uIGEodCl7cmV0dXJuIHUodCk/dDpPYmplY3QodCl9ZnVuY3Rpb24gdSh0KXt2YXIgZT10eXBlb2YgdDtyZXR1cm4hIXQmJihcIm9iamVjdFwiPT1lfHxcImZ1bmN0aW9uXCI9PWUpfXZhciBoPW4oMTkpLGM9bigyNCksbD1uKDIzKSxmPW4oMjgpLGQ9L1xcLnxcXFsoPzpbXltcXF1dKnwoW1wiJ10pKD86KD8hXFwxKVteXFxuXFxcXF18XFxcXC4pKj9cXDEpXFxdLyxwPS9eXFx3KiQvLGc9OTAwNzE5OTI1NDc0MDk5MSxfPWkoXCJsZW5ndGhcIiksbT1mKGZ1bmN0aW9uKHQsZSxuKXt2YXIgaT0tMSxzPVwiZnVuY3Rpb25cIj09dHlwZW9mIGUsYT1vKGUpLHU9cih0KT9BcnJheSh0Lmxlbmd0aCk6W107cmV0dXJuIGgodCxmdW5jdGlvbih0KXt2YXIgcj1zP2U6YSYmbnVsbCE9dD90W2VdOnZvaWQgMDt1WysraV09cj9yLmFwcGx5KHQsbik6Yyh0LGUsbil9KSx1fSk7dC5leHBvcnRzPW19LFsxMzQsMjBdLFsxMzIsMjEsMjIsMjNdLDUsNiw3LGZ1bmN0aW9uKHQsZSxuKXtmdW5jdGlvbiBpKHQsZSxuKXtudWxsPT10fHxyKGUsdCl8fChlPWMoZSksdD0xPT1lLmxlbmd0aD90OnUodCxoKGUsMCwtMSkpLGU9cyhlKSk7dmFyIGk9bnVsbD09dD90OnRbZV07cmV0dXJuIG51bGw9PWk/dm9pZCAwOmkuYXBwbHkodCxuKX1mdW5jdGlvbiByKHQsZSl7dmFyIG49dHlwZW9mIHQ7aWYoXCJzdHJpbmdcIj09biYmZC50ZXN0KHQpfHxcIm51bWJlclwiPT1uKXJldHVybiEwO2lmKGwodCkpcmV0dXJuITE7dmFyIGk9IWYudGVzdCh0KTtyZXR1cm4gaXx8bnVsbCE9ZSYmdCBpbiBvKGUpfWZ1bmN0aW9uIG8odCl7cmV0dXJuIGEodCk/dDpPYmplY3QodCl9ZnVuY3Rpb24gcyh0KXt2YXIgZT10P3QubGVuZ3RoOjA7cmV0dXJuIGU/dFtlLTFdOnZvaWQgMH1mdW5jdGlvbiBhKHQpe3ZhciBlPXR5cGVvZiB0O3JldHVybiEhdCYmKFwib2JqZWN0XCI9PWV8fFwiZnVuY3Rpb25cIj09ZSl9dmFyIHU9bigyNSksaD1uKDI2KSxjPW4oMjcpLGw9bigyMyksZj0vXFwufFxcWyg/OlteW1xcXV0qfChbXCInXSkoPzooPyFcXDEpW15cXG5cXFxcXXxcXFxcLikqP1xcMSlcXF0vLGQ9L15cXHcqJC87dC5leHBvcnRzPWl9LGZ1bmN0aW9uKHQsZSl7ZnVuY3Rpb24gbih0LGUsbil7aWYobnVsbCE9dCl7dm9pZCAwIT09biYmbiBpbiBpKHQpJiYoZT1bbl0pO2Zvcih2YXIgcj0wLG89ZS5sZW5ndGg7bnVsbCE9dCYmbz5yOyl0PXRbZVtyKytdXTtyZXR1cm4gciYmcj09bz90OnZvaWQgMH19ZnVuY3Rpb24gaSh0KXtyZXR1cm4gcih0KT90Ok9iamVjdCh0KX1mdW5jdGlvbiByKHQpe3ZhciBlPXR5cGVvZiB0O3JldHVybiEhdCYmKFwib2JqZWN0XCI9PWV8fFwiZnVuY3Rpb25cIj09ZSl9dC5leHBvcnRzPW59LGZ1bmN0aW9uKHQsZSl7ZnVuY3Rpb24gbih0LGUsbil7dmFyIGk9LTEscj10Lmxlbmd0aDtlPW51bGw9PWU/MDorZXx8MCwwPmUmJihlPS1lPnI/MDpyK2UpLG49dm9pZCAwPT09bnx8bj5yP3I6K258fDAsMD5uJiYobis9cikscj1lPm4/MDpuLWU+Pj4wLGU+Pj49MDtmb3IodmFyIG89QXJyYXkocik7KytpPHI7KW9baV09dFtpK2VdO3JldHVybiBvfXQuZXhwb3J0cz1ufSxmdW5jdGlvbih0LGUsbil7ZnVuY3Rpb24gaSh0KXtyZXR1cm4gbnVsbD09dD9cIlwiOnQrXCJcIn1mdW5jdGlvbiByKHQpe2lmKG8odCkpcmV0dXJuIHQ7dmFyIGU9W107cmV0dXJuIGkodCkucmVwbGFjZShzLGZ1bmN0aW9uKHQsbixpLHIpe2UucHVzaChpP3IucmVwbGFjZShhLFwiJDFcIik6bnx8dCl9KSxlfXZhciBvPW4oMjMpLHM9L1teLltcXF1dK3xcXFsoPzooLT9cXGQrKD86XFwuXFxkKyk/KXwoW1wiJ10pKCg/Oig/IVxcMilbXlxcblxcXFxdfFxcXFwuKSo/KVxcMilcXF0vZyxhPS9cXFxcKFxcXFwpPy9nO3QuZXhwb3J0cz1yfSwxMSxmdW5jdGlvbih0LGUsbil7ZnVuY3Rpb24gaSh0KXtyZXR1cm4gcih0LG8odCkpfXZhciByPW4oMzApLG89bigzMSk7dC5leHBvcnRzPWl9LGZ1bmN0aW9uKHQsZSl7ZnVuY3Rpb24gbih0LGUpe2Zvcih2YXIgbj0tMSxpPWUubGVuZ3RoLHI9QXJyYXkoaSk7KytuPGk7KXJbbl09dFtlW25dXTtyZXR1cm4gcn10LmV4cG9ydHM9bn0sWzEzMiwzMiwzMywzNF0sNSw2LDcsZnVuY3Rpb24odCxlLG4pe2Z1bmN0aW9uIGkodCxlLG4saSl7dGhpcy5fdHlwZT10LHRoaXMuX2lkPWUuaWQsdGhpcy5fZGVzY3JpcHRvcj1lLHRoaXMuX3NldHRpbmdzPW4sdGhpcy5fY3VycmVudFBvc2l0aW9uPXRoaXMuX2xvYWRlZFBvc2l0aW9uPXRoaXMuX2R1cmF0aW9uPTAsdGhpcy5fY2FwYWJpbGl0aWVzPXIoe30saC5jcmVhdGVEZWZhdWx0cygpLGkpLHRoaXMuX2xvZ2dlcj1uZXcgdSh0aGlzLmdldFR5cGUoKSx0aGlzLmdldElkKCksZS50aXRsZSxuKTt0cnl7aC52YWxpZGF0ZSh0aGlzLmdldENhcGFiaWxpdGllcygpKX1jYXRjaChvKXtyZXR1cm4gdGhpcy5nZXRMb2dnZXIoKS5sb2coXCJCYWQgY2FwczogXCIrbyksdm9pZCB0aGlzLnVwZGF0ZVN0YXRlKHMuRVJST1IpfXRoaXMudXBkYXRlU3RhdGUocy5JTklUSUFMSVpFKX12YXIgcj1uKDEpLG89bigzNikscz1uKDM4KSxhPW4oMzkpLHU9big0MCksaD1uKDQyKTt0LmV4cG9ydHM9aSxyKGkucHJvdG90eXBlLG8pLGkucHJvdG90eXBlLmNhblBsYXk9ZnVuY3Rpb24oKXtyZXR1cm4hMX0saS5wcm90b3R5cGUuZ2V0Q2FwYWJpbGl0aWVzPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2NhcGFiaWxpdGllc30saS5wcm90b3R5cGUuZ2V0TG9nZ2VyPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2xvZ2dlcn0saS5wcm90b3R5cGUuZ2V0U2V0dGluZ3M9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fc2V0dGluZ3N9LGkucHJvdG90eXBlLmdldERlc2NyaXB0b3I9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZGVzY3JpcHRvcn0saS5wcm90b3R5cGUuZ2V0VHlwZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLl90eXBlfSxpLnByb3RvdHlwZS5nZXRJZD1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9pZCtcIlwifSxpLnByb3RvdHlwZS5iZWZvcmVTdGF0ZUNoYW5nZT1mdW5jdGlvbih0LGUpe3JldHVybiEwfSxpLnByb3RvdHlwZS5ub3RpZnlTdGF0ZUNoYW5nZT1mdW5jdGlvbih0LGUpe3JldHVybiEwfSxpLnByb3RvdHlwZS5hZnRlclN0YXRlQ2hhbmdlPWZ1bmN0aW9uKHQsZSl7fSxpLnByb3RvdHlwZS51cGRhdGVTdGF0ZT1mdW5jdGlvbih0KXt2YXIgZT10aGlzLl9zdGF0ZTtlIT09dCYmZSE9PXMuREVBRCYmdGhpcy5iZWZvcmVTdGF0ZUNoYW5nZShlLHQpJiYodGhpcy5fc3RhdGU9dCx0aGlzLl9sb2dnZXIubG9nKCdzdGF0ZSBjaGFuZ2VkIFwiJyt0aGlzLmdldFN0YXRlKCkrJ1wiLCBwb3NpdGlvbjogJyt0aGlzLmdldEN1cnJlbnRQb3NpdGlvbigpK1wiLCBkdXJhdGlvbjogXCIrdGhpcy5nZXREdXJhdGlvbigpKSx0aGlzLm5vdGlmeVN0YXRlQ2hhbmdlKGUsdCkmJnRoaXMudHJpZ2dlcihhLlNUQVRFX0NIQU5HRSx0LHRoaXMpLHRoaXMuYWZ0ZXJTdGF0ZUNoYW5nZShlLHQpKX0saS5wcm90b3R5cGUuZ2V0U3RhdGU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fc3RhdGV9LGkucHJvdG90eXBlLl9pc0luT25lT2ZTdGF0ZXM9ZnVuY3Rpb24oKXtmb3IodmFyIHQgaW4gYXJndW1lbnRzKWlmKGFyZ3VtZW50c1t0XT09PXRoaXMuZ2V0U3RhdGUoKSlyZXR1cm4hMDtyZXR1cm4hMX0saS5wcm90b3R5cGUuZ2V0Q3VycmVudFBvc2l0aW9uPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2N1cnJlbnRQb3NpdGlvbn0saS5wcm90b3R5cGUuZ2V0TG9hZGVkUG9zaXRpb249ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbG9hZGVkUG9zaXRpb259LGkucHJvdG90eXBlLmdldER1cmF0aW9uPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2R1cmF0aW9ufX0sZnVuY3Rpb24odCxlLG4pe3QuZXhwb3J0cz1uKDM3KX0sZnVuY3Rpb24odCxlLG4peyFmdW5jdGlvbigpe2Z1bmN0aW9uIG4oKXtyZXR1cm57a2V5czpPYmplY3Qua2V5c3x8ZnVuY3Rpb24odCl7aWYoXCJvYmplY3RcIiE9dHlwZW9mIHQmJlwiZnVuY3Rpb25cIiE9dHlwZW9mIHR8fG51bGw9PT10KXRocm93IG5ldyBUeXBlRXJyb3IoXCJrZXlzKCkgY2FsbGVkIG9uIGEgbm9uLW9iamVjdFwiKTt2YXIgZSxuPVtdO2ZvcihlIGluIHQpdC5oYXNPd25Qcm9wZXJ0eShlKSYmKG5bbi5sZW5ndGhdPWUpO3JldHVybiBufSx1bmlxdWVJZDpmdW5jdGlvbih0KXt2YXIgZT0rK2ErXCJcIjtyZXR1cm4gdD90K2U6ZX0saGFzOmZ1bmN0aW9uKHQsZSl7cmV0dXJuIG8uY2FsbCh0LGUpfSxlYWNoOmZ1bmN0aW9uKHQsZSxuKXtpZihudWxsIT10KWlmKHImJnQuZm9yRWFjaD09PXIpdC5mb3JFYWNoKGUsbik7ZWxzZSBpZih0Lmxlbmd0aD09PSt0Lmxlbmd0aClmb3IodmFyIGk9MCxvPXQubGVuZ3RoO28+aTtpKyspZS5jYWxsKG4sdFtpXSxpLHQpO2Vsc2UgZm9yKHZhciBzIGluIHQpdGhpcy5oYXModCxzKSYmZS5jYWxsKG4sdFtzXSxzLHQpfSxvbmNlOmZ1bmN0aW9uKHQpe3ZhciBlLG49ITE7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIG4/ZToobj0hMCxlPXQuYXBwbHkodGhpcyxhcmd1bWVudHMpLHQ9bnVsbCxlKX19fX12YXIgaSxyPUFycmF5LnByb3RvdHlwZS5mb3JFYWNoLG89T2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eSxzPUFycmF5LnByb3RvdHlwZS5zbGljZSxhPTAsdT1uKCk7aT17b246ZnVuY3Rpb24odCxlLG4pe2lmKCFjKHRoaXMsXCJvblwiLHQsW2Usbl0pfHwhZSlyZXR1cm4gdGhpczt0aGlzLl9ldmVudHN8fCh0aGlzLl9ldmVudHM9e30pO3ZhciBpPXRoaXMuX2V2ZW50c1t0XXx8KHRoaXMuX2V2ZW50c1t0XT1bXSk7cmV0dXJuIGkucHVzaCh7Y2FsbGJhY2s6ZSxjb250ZXh0Om4sY3R4Om58fHRoaXN9KSx0aGlzfSxvbmNlOmZ1bmN0aW9uKHQsZSxuKXtpZighYyh0aGlzLFwib25jZVwiLHQsW2Usbl0pfHwhZSlyZXR1cm4gdGhpczt2YXIgaT10aGlzLHI9dS5vbmNlKGZ1bmN0aW9uKCl7aS5vZmYodCxyKSxlLmFwcGx5KHRoaXMsYXJndW1lbnRzKX0pO3JldHVybiByLl9jYWxsYmFjaz1lLHRoaXMub24odCxyLG4pfSxvZmY6ZnVuY3Rpb24odCxlLG4pe3ZhciBpLHIsbyxzLGEsaCxsLGY7aWYoIXRoaXMuX2V2ZW50c3x8IWModGhpcyxcIm9mZlwiLHQsW2Usbl0pKXJldHVybiB0aGlzO2lmKCF0JiYhZSYmIW4pcmV0dXJuIHRoaXMuX2V2ZW50cz17fSx0aGlzO2ZvcihzPXQ/W3RdOnUua2V5cyh0aGlzLl9ldmVudHMpLGE9MCxoPXMubGVuZ3RoO2g+YTthKyspaWYodD1zW2FdLG89dGhpcy5fZXZlbnRzW3RdKXtpZih0aGlzLl9ldmVudHNbdF09aT1bXSxlfHxuKWZvcihsPTAsZj1vLmxlbmd0aDtmPmw7bCsrKXI9b1tsXSwoZSYmZSE9PXIuY2FsbGJhY2smJmUhPT1yLmNhbGxiYWNrLl9jYWxsYmFja3x8biYmbiE9PXIuY29udGV4dCkmJmkucHVzaChyKTtpLmxlbmd0aHx8ZGVsZXRlIHRoaXMuX2V2ZW50c1t0XX1yZXR1cm4gdGhpc30sdHJpZ2dlcjpmdW5jdGlvbih0KXtpZighdGhpcy5fZXZlbnRzKXJldHVybiB0aGlzO3ZhciBlPXMuY2FsbChhcmd1bWVudHMsMSk7aWYoIWModGhpcyxcInRyaWdnZXJcIix0LGUpKXJldHVybiB0aGlzO3ZhciBuPXRoaXMuX2V2ZW50c1t0XSxpPXRoaXMuX2V2ZW50cy5hbGw7cmV0dXJuIG4mJmwobixlKSxpJiZsKGksYXJndW1lbnRzKSx0aGlzfSxzdG9wTGlzdGVuaW5nOmZ1bmN0aW9uKHQsZSxuKXt2YXIgaT10aGlzLl9saXN0ZW5lcnM7aWYoIWkpcmV0dXJuIHRoaXM7dmFyIHI9IWUmJiFuO1wib2JqZWN0XCI9PXR5cGVvZiBlJiYobj10aGlzKSx0JiYoKGk9e30pW3QuX2xpc3RlbmVySWRdPXQpO2Zvcih2YXIgbyBpbiBpKWlbb10ub2ZmKGUsbix0aGlzKSxyJiZkZWxldGUgdGhpcy5fbGlzdGVuZXJzW29dO3JldHVybiB0aGlzfX07dmFyIGg9L1xccysvLGM9ZnVuY3Rpb24odCxlLG4saSl7aWYoIW4pcmV0dXJuITA7aWYoXCJvYmplY3RcIj09dHlwZW9mIG4pe2Zvcih2YXIgciBpbiBuKXRbZV0uYXBwbHkodCxbcixuW3JdXS5jb25jYXQoaSkpO3JldHVybiExfWlmKGgudGVzdChuKSl7Zm9yKHZhciBvPW4uc3BsaXQoaCkscz0wLGE9by5sZW5ndGg7YT5zO3MrKyl0W2VdLmFwcGx5KHQsW29bc11dLmNvbmNhdChpKSk7cmV0dXJuITF9cmV0dXJuITB9LGw9ZnVuY3Rpb24odCxlKXt2YXIgbixpPS0xLHI9dC5sZW5ndGgsbz1lWzBdLHM9ZVsxXSxhPWVbMl07c3dpdGNoKGUubGVuZ3RoKXtjYXNlIDA6Zm9yKDsrK2k8cjspKG49dFtpXSkuY2FsbGJhY2suY2FsbChuLmN0eCk7cmV0dXJuO2Nhc2UgMTpmb3IoOysraTxyOykobj10W2ldKS5jYWxsYmFjay5jYWxsKG4uY3R4LG8pO3JldHVybjtjYXNlIDI6Zm9yKDsrK2k8cjspKG49dFtpXSkuY2FsbGJhY2suY2FsbChuLmN0eCxvLHMpO3JldHVybjtjYXNlIDM6Zm9yKDsrK2k8cjspKG49dFtpXSkuY2FsbGJhY2suY2FsbChuLmN0eCxvLHMsYSk7cmV0dXJuO2RlZmF1bHQ6Zm9yKDsrK2k8cjspKG49dFtpXSkuY2FsbGJhY2suYXBwbHkobi5jdHgsZSl9fSxmPXtsaXN0ZW5UbzpcIm9uXCIsbGlzdGVuVG9PbmNlOlwib25jZVwifTt1LmVhY2goZixmdW5jdGlvbih0LGUpe2lbZV09ZnVuY3Rpb24oZSxuLGkpe3ZhciByPXRoaXMuX2xpc3RlbmVyc3x8KHRoaXMuX2xpc3RlbmVycz17fSksbz1lLl9saXN0ZW5lcklkfHwoZS5fbGlzdGVuZXJJZD11LnVuaXF1ZUlkKFwibFwiKSk7cmV0dXJuIHJbb109ZSxcIm9iamVjdFwiPT10eXBlb2YgbiYmKGk9dGhpcyksZVt0XShuLGksdGhpcyksdGhpc319KSxpLmJpbmQ9aS5vbixpLnVuYmluZD1pLm9mZixpLm1peGluPWZ1bmN0aW9uKHQpe3ZhciBlPVtcIm9uXCIsXCJvbmNlXCIsXCJvZmZcIixcInRyaWdnZXJcIixcInN0b3BMaXN0ZW5pbmdcIixcImxpc3RlblRvXCIsXCJsaXN0ZW5Ub09uY2VcIixcImJpbmRcIixcInVuYmluZFwiXTtyZXR1cm4gdS5lYWNoKGUsZnVuY3Rpb24oZSl7dFtlXT10aGlzW2VdfSx0aGlzKSx0fSxcInVuZGVmaW5lZFwiIT10eXBlb2YgdCYmdC5leHBvcnRzJiYoZT10LmV4cG9ydHM9aSksZS5CYWNrYm9uZUV2ZW50cz1pfSh0aGlzKX0sZnVuY3Rpb24odCxlKXt0LmV4cG9ydHM9e1BMQVlJTkc6XCJwbGF5aW5nXCIsTE9BRElORzpcImxvYWRpbmdcIixTRUVLSU5HOlwic2Vla2luZ1wiLFBBVVNFRDpcInBhdXNlZFwiLEVSUk9SOlwiZXJyb3JcIixJRExFOlwiaWRsZVwiLElOSVRJQUxJWkU6XCJpbml0aWFsaXplXCIsRU5ERUQ6XCJlbmRlZFwiLERFQUQ6XCJkZWFkXCJ9fSxmdW5jdGlvbih0LGUpe3QuZXhwb3J0cz17UE9TSVRJT05fQ0hBTkdFOlwicG9zaXRpb24tY2hhbmdlXCIsU1RBVEVfQ0hBTkdFOlwic3RhdGUtY2hhbmdlXCIsREFUQTpcImRhdGFcIixORVRXT1JLX1RJTUVPVVQ6XCJuZXR3b3JrLXRpbWVvdXRcIixNRVRBREFUQTpcIm1ldGFkYXRhXCJ9fSxmdW5jdGlvbih0LGUsbil7dmFyIGkscj1uKDQxKSxvPW51bGw7dC5leHBvcnRzPWZ1bmN0aW9uKHQsZSxuLHMpe2lmKCFpJiYoaT1yKCEhcy5kZWJ1ZyxcImF1ZGlvbWFuYWdlclwiKSxvKSl7dmFyIGE9aTtpPWZ1bmN0aW9uKCl7YShvKGFyZ3VtZW50c1swXStcIiVzXCIsQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLDEpKSl9fXJldHVybiBuPW4mJm4ubGVuZ3RoP1wiIFtcIituLnJlcGxhY2UoL1xccy9nLFwiXCIpLnN1YnN0cigwLDYpK1wiXVwiOlwiXCIse2xvZzppLmJpbmQobnVsbCxcIiVzICglcyklc1wiLHQsZSxuKX19fSxmdW5jdGlvbih0LGUpe2Z1bmN0aW9uIG4oKXtmdW5jdGlvbiB0KHQsbil7Zm9yKHZhciBpLHI9YXJndW1lbnRzLmxlbmd0aCxvPUFycmF5KHI+Mj9yLTI6MCkscz0yO3I+cztzKyspb1tzLTJdPWFyZ3VtZW50c1tzXTtcInN0cmluZ1wiPT10eXBlb2Ygbj9uPVwiIFwiK246KG8udW5zaGlmdChuKSxuPVwiXCIpLChpPXdpbmRvdy5jb25zb2xlKVt0XS5hcHBseShpLFtlKCkrXCIgfFwiK2MrXCIlY1wiK25dLmNvbmNhdChsLG8pKX1mdW5jdGlvbiBlKCl7dmFyIHQ9bmV3IERhdGUsZT1udWxsPT09aD8wOnQtaDtyZXR1cm4gaD0rdCxcIiVjXCIrcih0LmdldEhvdXJzKCkpK1wiOlwiK3IodC5nZXRNaW51dGVzKCkpK1wiOlwiK3IodC5nZXRTZWNvbmRzKCkpK1wiLlwiK2kodC5nZXRNaWxsaXNlY29uZHMoKSxcIjBcIiwzKStcIiVjICglY1wiK2koXCIrXCIrZStcIm1zXCIsXCIgXCIsOCkrXCIlYylcIn12YXIgbj1hcmd1bWVudHMubGVuZ3RoPD0wfHx2b2lkIDA9PT1hcmd1bWVudHNbMF0/ITA6YXJndW1lbnRzWzBdLG89YXJndW1lbnRzLmxlbmd0aDw9MXx8dm9pZCAwPT09YXJndW1lbnRzWzFdP1wiXCI6YXJndW1lbnRzWzFdO2lmKCFuKXJldHVybiBzO3ZhciBoPW51bGwsYz1hKG8pLGw9W1wiY29sb3I6IGdyZWVuXCIsXCJjb2xvcjogZ3JleVwiLFwiY29sb3I6IGJsdWVcIixcImNvbG9yOiBncmV5XCIsdShvKSxcIlwiXSxmPXQuYmluZChudWxsLFwibG9nXCIpO3JldHVybiBmLmxvZz1mLFtcImluZm9cIixcIndhcm5cIixcImVycm9yXCJdLmZvckVhY2goZnVuY3Rpb24oZSl7ZltlXT10LmJpbmQobnVsbCxlKX0pLGZ9ZnVuY3Rpb24gaSh0LGUsbil7cmV0dXJuIG8oZSxuLShcIlwiK3QpLmxlbmd0aCkrdH1mdW5jdGlvbiByKHQpe3JldHVybiBpKHQsXCIwXCIsMil9ZnVuY3Rpb24gbyh0LGUpe3JldHVybiBlPjA/bmV3IEFycmF5KGUrMSkuam9pbih0KTpcIlwifWZ1bmN0aW9uIHMoKXt9ZnVuY3Rpb24gYSh0KXtyZXR1cm4gdD9cIiVjXCIrdDpcIiVjXCJ9dC5leHBvcnRzPW4scy5sb2c9cy5pbmZvPXMud2Fybj1zLmVycm9yPXM7dmFyIHU9ZnVuY3Rpb24oKXt2YXIgdD1bXCIjNTE2MTNDXCIsXCIjNDQ3ODQ4XCIsXCIjNDg2RTVGXCIsXCIjNzg3NDQ0XCIsXCIjNkU2NjRFXCJdLGU9MDtyZXR1cm4gZnVuY3Rpb24obil7cmV0dXJuIG4/XCJiYWNrZ3JvdW5kLWNvbG9yOlwiK3RbZSsrJXQubGVuZ3RoXStcIjtjb2xvcjojZmZmO2JvcmRlci1yYWRpdXM6M3B4O3BhZGRpbmc6MnB4IDRweDtmb250LWZhbWlseTpzYW5zLXNlcmlmO3RleHQtdHJhbnNmb3JtOnVwcGVyY2FzZTtmb250LXNpemU6OXB4O21hcmdpbjowIDRweFwiOlwiXCJ9fSgpfSxmdW5jdGlvbih0LGUpe2Z1bmN0aW9uIG4odCl7Zm9yKHZhciBlIGluIHIpaWYoci5oYXNPd25Qcm9wZXJ0eShlKSYmdm9pZCAwPT09dFtyW2VdXSl0aHJvdyBuZXcgRXJyb3IoXCJDYXBzIGxhY2sgcmVxdWlyZWQgZmllbGQ6IFwiK2UpO2lmKCEodFtyLlBST1RPQ09MU11pbnN0YW5jZW9mIEFycmF5KSl0aHJvdyBuZXcgRXJyb3IoXCJDYXBzIHByb3RvY29scyBtdXN0IGJlIGFuIGFycmF5XCIpO2lmKCEodFtyLk1JTUVUWVBFU11pbnN0YW5jZW9mIEFycmF5KSl0aHJvdyBuZXcgRXJyb3IoXCJDYXBzIG1pbWV0eXBlcyBtdXN0IGJlIGFuIGFycmF5XCIpO3JldHVybiEwfWZ1bmN0aW9uIGkoKXt2YXIgdD17fTtyZXR1cm4gdFtyLk1JTUVUWVBFU109W10sdFtyLlBST1RPQ09MU109W10sdFtyLkFVRElPX09OTFldPSEwLHRbci5DQU5fU0VFS19BTFdBWVNdPSEwLHRbci5ORUVEU19VUkxfUkVGUkVTSF09ITAsdH12YXIgcj17TUlNRVRZUEVTOlwibWltZXR5cGVzXCIsUFJPVE9DT0xTOlwicHJvdG9jb2xzXCIsQVVESU9fT05MWTpcImF1ZGlvT25seVwiLENBTl9TRUVLX0FMV0FZUzpcImNhblNlZWtBbHdheXNcIixORUVEU19VUkxfUkVGUkVTSDpcIm5lZWRzVXJsUmVmcmVzaFwifSxvPXtjcmVhdGVEZWZhdWx0czppLG5hbWVzOnIsdmFsaWRhdGU6bn07dC5leHBvcnRzPW99LGZ1bmN0aW9uKHQsZSl7dC5leHBvcnRzPXtGTEFTSF9ITFNfUExBWUxJU1RfTk9UX0ZPVU5EOlwiSExTX1BMQVlMSVNUX05PVF9GT1VORFwiLEZMQVNIX0hMU19QTEFZTElTVF9TRUNVUklUWV9FUlJPUjpcIkhMU19TRUNVUklUWV9FUlJPUlwiLEZMQVNIX0hMU19OT1RfVkFMSURfUExBWUxJU1Q6XCJITFNfTk9UX1ZBTElEX1BMQVlMSVNUXCIsRkxBU0hfSExTX05PX1RTX0lOX1BMQVlMSVNUOlwiSExTX05PX1RTX0lOX1BMQVlMSVNUXCIsRkxBU0hfSExTX05PX1BMQVlMSVNUX0lOX01BTklGRVNUOlwiSExTX05PX1BMQVlMSVNUX0lOX01BTklGRVNUXCIsRkxBU0hfSExTX1RTX0lTX0NPUlJVUFQ6XCJITFNfVFNfSVNfQ09SUlVQVFwiLEZMQVNIX0hMU19GTFZfVEFHX0NPUlJVUFQ6XCJITFNfRkxWX1RBR19DT1JSVVBUXCIsRkxBU0hfSFRUUF9GSUxFX05PVF9GT1VORDpcIkhUVFBfRklMRV9OT1RfRk9VTkRcIixGTEFTSF9SVE1QX0NPTk5FQ1RfRkFJTEVEOlwiUlRNUF9DT05ORUNUX0ZBSUxFRFwiLEZMQVNIX1JUTVBfQ09OTkVDVF9DTE9TRUQ6XCJSVE1QX0NPTk5FQ1RfQ0xPU0VEXCIsRkxBU0hfUlRNUF9DQU5OT1RfUExBWV9TVFJFQU06XCJSVE1QX0NBTk5PVF9QTEFZX1NUUkVBTVwiLEZMQVNIX1BST1hZX0NBTlRfTE9BRF9GTEFTSDpcIkNBTlRfTE9BRF9GTEFTSFwiLEZMQVNIX1BST1hZX0ZMQVNIX0JMT0NLRUQ6XCJGTEFTSF9QUk9YWV9GTEFTSF9CTE9DS0VEXCIsR0VORVJJQ19BVURJT19FTkRFRF9FQVJMWTpcIkdFTkVSSUNfQVVESU9fRU5ERURfRUFSTFlcIixHRU5FUklDX0FVRElPX09WRVJSVU46XCJHRU5FUklDX0FVRElPX09WRVJSVU5cIixIVE1MNV9BVURJT19BQk9SVEVEOlwiSFRNTDVfQVVESU9fQUJPUlRFRFwiLEhUTUw1X0FVRElPX05FVFdPUks6XCJIVE1MNV9BVURJT19ORVRXT1JLXCIsSFRNTDVfQVVESU9fREVDT0RFOlwiSFRNTDVfQVVESU9fREVDT0RFXCIsSFRNTDVfQVVESU9fU1JDX05PVF9TVVBQT1JURUQ6XCJIVE1MNV9BVURJT19TUkNfTk9UX1NVUFBPUlRFRFwiLE1TRV9CQURfT0JKRUNUX1NUQVRFOlwiTVNFX0JBRF9PQkpFQ1RfU1RBVEVcIixNU0VfTk9UX1NVUFBPUlRFRDpcIk1TRV9OT1RfU1VQUE9SVEVEXCIsTVNFX01QM19OT1RfU1VQUE9SVEVEOlwiTVNFX01QM19OT1RfU1VQUE9SVEVEXCIsTVNFX0hMU19OT1RfVkFMSURfUExBWUxJU1Q6XCJNU0VfSExTX05PVF9WQUxJRF9QTEFZTElTVFwiLE1TRV9ITFNfUExBWUxJU1RfTk9UX0ZPVU5EOlwiTVNFX0hMU19QTEFZTElTVF9OT1RfRk9VTkRcIixNU0VfSExTX1NFR01FTlRfTk9UX0ZPVU5EOlwiTVNFX0hMU19TRUdNRU5UX05PVF9GT1VORFwifX0sZnVuY3Rpb24odCxlKXtmdW5jdGlvbiBuKCl7aWYoIXEmJmRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiYm9keVwiKVswXSl7dHJ5e3ZhciB0LGU9dihcInNwYW5cIik7ZS5zdHlsZS5kaXNwbGF5PVwibm9uZVwiLHQ9ai5nZXRFbGVtZW50c0J5VGFnTmFtZShcImJvZHlcIilbMF0uYXBwZW5kQ2hpbGQoZSksdC5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHQpLHQ9bnVsbCxlPW51bGx9Y2F0Y2gobil7cmV0dXJufXE9ITA7Zm9yKHZhciBpPVYubGVuZ3RoLHI9MDtpPnI7cisrKVZbcl0oKX19ZnVuY3Rpb24gaSh0KXtxP3QoKTpWW1YubGVuZ3RoXT10fWZ1bmN0aW9uIHIodCl7aWYodHlwZW9mIEguYWRkRXZlbnRMaXN0ZW5lciE9aylILmFkZEV2ZW50TGlzdGVuZXIoXCJsb2FkXCIsdCwhMSk7ZWxzZSBpZih0eXBlb2Ygai5hZGRFdmVudExpc3RlbmVyIT1rKWouYWRkRXZlbnRMaXN0ZW5lcihcImxvYWRcIix0LCExKTtlbHNlIGlmKHR5cGVvZiBILmF0dGFjaEV2ZW50IT1rKVMoSCxcIm9ubG9hZFwiLHQpO2Vsc2UgaWYoXCJmdW5jdGlvblwiPT10eXBlb2YgSC5vbmxvYWQpe3ZhciBlPUgub25sb2FkO0gub25sb2FkPWZ1bmN0aW9uKCl7ZSgpLHQoKX19ZWxzZSBILm9ubG9hZD10fWZ1bmN0aW9uIG8oKXt2YXIgdD1qLmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiYm9keVwiKVswXSxlPXYoTik7ZS5zZXRBdHRyaWJ1dGUoXCJzdHlsZVwiLFwidmlzaWJpbGl0eTogaGlkZGVuO1wiKSxlLnNldEF0dHJpYnV0ZShcInR5cGVcIixGKTt2YXIgbj10LmFwcGVuZENoaWxkKGUpO2lmKG4pe3ZhciBpPTA7IWZ1bmN0aW9uIHIoKXtpZih0eXBlb2Ygbi5HZXRWYXJpYWJsZSE9ayl0cnl7dmFyIG89bi5HZXRWYXJpYWJsZShcIiR2ZXJzaW9uXCIpO28mJihvPW8uc3BsaXQoXCIgXCIpWzFdLnNwbGl0KFwiLFwiKSxRLnB2PVtFKG9bMF0pLEUob1sxXSksRShvWzJdKV0pfWNhdGNoKGEpe1EucHY9WzgsMCwwXX1lbHNlIGlmKDEwPmkpcmV0dXJuIGkrKyx2b2lkIHdpbmRvdy5zZXRUaW1lb3V0KHIsMTApO3QucmVtb3ZlQ2hpbGQoZSksbj1udWxsLHMoKX0oKX1lbHNlIHMoKX1mdW5jdGlvbiBzKCl7dmFyIHQ9ei5sZW5ndGg7aWYodD4wKWZvcih2YXIgZT0wO3Q+ZTtlKyspe3ZhciBuPXpbZV0uaWQsaT16W2VdLmNhbGxiYWNrRm4scj17c3VjY2VzczohMSxpZDpufTtpZihRLnB2WzBdPjApe3ZhciBvPXkobik7aWYobylpZighQSh6W2VdLnN3ZlZlcnNpb24pfHxRLndrJiZRLndrPDMxMilpZih6W2VdLmV4cHJlc3NJbnN0YWxsJiZ1KCkpe3ZhciBzPXt9O3MuZGF0YT16W2VdLmV4cHJlc3NJbnN0YWxsLHMud2lkdGg9by5nZXRBdHRyaWJ1dGUoXCJ3aWR0aFwiKXx8XCIwXCIscy5oZWlnaHQ9by5nZXRBdHRyaWJ1dGUoXCJoZWlnaHRcIil8fFwiMFwiLG8uZ2V0QXR0cmlidXRlKFwiY2xhc3NcIikmJihzLnN0eWxlY2xhc3M9by5nZXRBdHRyaWJ1dGUoXCJjbGFzc1wiKSksby5nZXRBdHRyaWJ1dGUoXCJhbGlnblwiKSYmKHMuYWxpZ249by5nZXRBdHRyaWJ1dGUoXCJhbGlnblwiKSk7Zm9yKHZhciBsPXt9LGY9by5nZXRFbGVtZW50c0J5VGFnTmFtZShcInBhcmFtXCIpLGQ9Zi5sZW5ndGgscD0wO2Q+cDtwKyspXCJtb3ZpZVwiIT09ZltwXS5nZXRBdHRyaWJ1dGUoXCJuYW1lXCIpLnRvTG93ZXJDYXNlKCkmJihsW2ZbcF0uZ2V0QXR0cmlidXRlKFwibmFtZVwiKV09ZltwXS5nZXRBdHRyaWJ1dGUoXCJ2YWx1ZVwiKSk7aChzLGwsbixpKX1lbHNlIGMobyksaSYmaShyKTtlbHNlIFQobiwhMCksaSYmKHIuc3VjY2Vzcz0hMCxyLnJlZj1hKG4pLHIuaWQ9bixpKHIpKX1lbHNlIGlmKFQobiwhMCksaSl7dmFyIGc9YShuKTtnJiZ0eXBlb2YgZy5TZXRWYXJpYWJsZSE9ayYmKHIuc3VjY2Vzcz0hMCxyLnJlZj1nLHIuaWQ9Zy5pZCksaShyKX19fWZ1bmN0aW9uIGEodCl7dmFyIGU9bnVsbCxuPXkodCk7cmV0dXJuIG4mJlwiT0JKRUNUXCI9PT1uLm5vZGVOYW1lLnRvVXBwZXJDYXNlKCkmJihlPXR5cGVvZiBuLlNldFZhcmlhYmxlIT09az9uOm4uZ2V0RWxlbWVudHNCeVRhZ05hbWUoTilbMF18fG4pLGV9ZnVuY3Rpb24gdSgpe3JldHVybiFYJiZBKFwiNi4wLjY1XCIpJiYoUS53aW58fFEubWFjKSYmIShRLndrJiZRLndrPDMxMil9ZnVuY3Rpb24gaCh0LGUsbixpKXt2YXIgcj15KG4pO2lmKG49bShuKSxYPSEwLE89aXx8bnVsbCxSPXtzdWNjZXNzOiExLGlkOm59LHIpe1wiT0JKRUNUXCI9PT1yLm5vZGVOYW1lLnRvVXBwZXJDYXNlKCk/KEk9bChyKSxMPW51bGwpOihJPXIsTD1uKSx0LmlkPVUsKHR5cGVvZiB0LndpZHRoPT1rfHwhLyUkLy50ZXN0KHQud2lkdGgpJiZFKHQud2lkdGgpPDMxMCkmJih0LndpZHRoPVwiMzEwXCIpLCh0eXBlb2YgdC5oZWlnaHQ9PWt8fCEvJSQvLnRlc3QodC5oZWlnaHQpJiZFKHQuaGVpZ2h0KTwxMzcpJiYodC5oZWlnaHQ9XCIxMzdcIik7dmFyIG89US5pZT9cIkFjdGl2ZVhcIjpcIlBsdWdJblwiLHM9XCJNTXJlZGlyZWN0VVJMPVwiK2VuY29kZVVSSUNvbXBvbmVudChILmxvY2F0aW9uLnRvU3RyaW5nKCkucmVwbGFjZSgvJi9nLFwiJTI2XCIpKStcIiZNTXBsYXllclR5cGU9XCIrbytcIiZNTWRvY3RpdGxlPVwiK2VuY29kZVVSSUNvbXBvbmVudChqLnRpdGxlLnNsaWNlKDAsNDcpK1wiIC0gRmxhc2ggUGxheWVyIEluc3RhbGxhdGlvblwiKTtpZih0eXBlb2YgZS5mbGFzaHZhcnMhPWs/ZS5mbGFzaHZhcnMrPVwiJlwiK3M6ZS5mbGFzaHZhcnM9cyxRLmllJiY0IT09ci5yZWFkeVN0YXRlKXt2YXIgYT12KFwiZGl2XCIpO24rPVwiU1dGT2JqZWN0TmV3XCIsYS5zZXRBdHRyaWJ1dGUoXCJpZFwiLG4pLHIucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoYSxyKSxyLnN0eWxlLmRpc3BsYXk9XCJub25lXCIsZyhyKX1kKHQsZSxuKX19ZnVuY3Rpb24gYyh0KXtpZihRLmllJiY0IT09dC5yZWFkeVN0YXRlKXt0LnN0eWxlLmRpc3BsYXk9XCJub25lXCI7dmFyIGU9dihcImRpdlwiKTt0LnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKGUsdCksZS5wYXJlbnROb2RlLnJlcGxhY2VDaGlsZChsKHQpLGUpLGcodCl9ZWxzZSB0LnBhcmVudE5vZGUucmVwbGFjZUNoaWxkKGwodCksdCl9ZnVuY3Rpb24gbCh0KXt2YXIgZT12KFwiZGl2XCIpO2lmKFEud2luJiZRLmllKWUuaW5uZXJIVE1MPXQuaW5uZXJIVE1MO2Vsc2V7dmFyIG49dC5nZXRFbGVtZW50c0J5VGFnTmFtZShOKVswXTtpZihuKXt2YXIgaT1uLmNoaWxkTm9kZXM7aWYoaSlmb3IodmFyIHI9aS5sZW5ndGgsbz0wO3I+bztvKyspMT09PWlbb10ubm9kZVR5cGUmJlwiUEFSQU1cIj09PWlbb10ubm9kZU5hbWV8fDg9PT1pW29dLm5vZGVUeXBlfHxlLmFwcGVuZENoaWxkKGlbb10uY2xvbmVOb2RlKCEwKSl9fXJldHVybiBlfWZ1bmN0aW9uIGYodCxlKXt2YXIgbj12KFwiZGl2XCIpO3JldHVybiBuLmlubmVySFRNTD1cIjxvYmplY3QgY2xhc3NpZD0nY2xzaWQ6RDI3Q0RCNkUtQUU2RC0xMWNmLTk2QjgtNDQ0NTUzNTQwMDAwJz48cGFyYW0gbmFtZT0nbW92aWUnIHZhbHVlPSdcIit0K1wiJz5cIitlK1wiPC9vYmplY3Q+XCIsbi5maXJzdENoaWxkfWZ1bmN0aW9uIGQodCxlLG4pe3ZhciBpLHI9eShuKTtpZihuPW0obiksUS53ayYmUS53azwzMTIpcmV0dXJuIGk7aWYocil7dmFyIG8scyxhLHU9dihRLmllP1wiZGl2XCI6Tik7dHlwZW9mIHQuaWQ9PWsmJih0LmlkPW4pO2ZvcihhIGluIGUpZS5oYXNPd25Qcm9wZXJ0eShhKSYmXCJtb3ZpZVwiIT09YS50b0xvd2VyQ2FzZSgpJiZwKHUsYSxlW2FdKTtRLmllJiYodT1mKHQuZGF0YSx1LmlubmVySFRNTCkpO2ZvcihvIGluIHQpdC5oYXNPd25Qcm9wZXJ0eShvKSYmKHM9by50b0xvd2VyQ2FzZSgpLFwic3R5bGVjbGFzc1wiPT09cz91LnNldEF0dHJpYnV0ZShcImNsYXNzXCIsdFtvXSk6XCJjbGFzc2lkXCIhPT1zJiZcImRhdGFcIiE9PXMmJnUuc2V0QXR0cmlidXRlKG8sdFtvXSkpO1EuaWU/V1tXLmxlbmd0aF09dC5pZDoodS5zZXRBdHRyaWJ1dGUoXCJ0eXBlXCIsRiksdS5zZXRBdHRyaWJ1dGUoXCJkYXRhXCIsdC5kYXRhKSksci5wYXJlbnROb2RlLnJlcGxhY2VDaGlsZCh1LHIpLGk9dX1yZXR1cm4gaX1mdW5jdGlvbiBwKHQsZSxuKXt2YXIgaT12KFwicGFyYW1cIik7aS5zZXRBdHRyaWJ1dGUoXCJuYW1lXCIsZSksaS5zZXRBdHRyaWJ1dGUoXCJ2YWx1ZVwiLG4pLHQuYXBwZW5kQ2hpbGQoaSl9ZnVuY3Rpb24gZyh0KXt2YXIgZT15KHQpO2UmJlwiT0JKRUNUXCI9PT1lLm5vZGVOYW1lLnRvVXBwZXJDYXNlKCkmJihRLmllPyhlLnN0eWxlLmRpc3BsYXk9XCJub25lXCIsZnVuY3Rpb24gbigpe2lmKDQ9PT1lLnJlYWR5U3RhdGUpe2Zvcih2YXIgdCBpbiBlKVwiZnVuY3Rpb25cIj09dHlwZW9mIGVbdF0mJihlW3RdPW51bGwpO2UucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChlKX1lbHNlIHdpbmRvdy5zZXRUaW1lb3V0KG4sMTApfSgpKTplLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoZSkpfWZ1bmN0aW9uIF8odCl7cmV0dXJuIHQmJnQubm9kZVR5cGUmJjE9PT10Lm5vZGVUeXBlfWZ1bmN0aW9uIG0odCl7cmV0dXJuIF8odCk/dC5pZDp0fWZ1bmN0aW9uIHkodCl7aWYoXyh0KSlyZXR1cm4gdDt2YXIgZT1udWxsO3RyeXtlPWouZ2V0RWxlbWVudEJ5SWQodCl9Y2F0Y2gobil7fXJldHVybiBlfWZ1bmN0aW9uIHYodCl7cmV0dXJuIGouY3JlYXRlRWxlbWVudCh0KX1mdW5jdGlvbiBFKHQpe3JldHVybiBwYXJzZUludCh0LDEwKX1mdW5jdGlvbiBTKHQsZSxuKXt0LmF0dGFjaEV2ZW50KGUsbiksS1tLLmxlbmd0aF09W3QsZSxuXX1mdW5jdGlvbiBBKHQpe3QrPVwiXCI7dmFyIGU9US5wdixuPXQuc3BsaXQoXCIuXCIpO3JldHVybiBuWzBdPUUoblswXSksblsxXT1FKG5bMV0pfHwwLG5bMl09RShuWzJdKXx8MCxlWzBdPm5bMF18fGVbMF09PT1uWzBdJiZlWzFdPm5bMV18fGVbMF09PT1uWzBdJiZlWzFdPT09blsxXSYmZVsyXT49blsyXX1mdW5jdGlvbiB3KHQsZSxuLGkpe3ZhciByPWouZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJoZWFkXCIpWzBdO2lmKHIpe3ZhciBvPVwic3RyaW5nXCI9PXR5cGVvZiBuP246XCJzY3JlZW5cIjtpZihpJiYoRD1udWxsLE09bnVsbCksIUR8fE0hPT1vKXt2YXIgcz12KFwic3R5bGVcIik7cy5zZXRBdHRyaWJ1dGUoXCJ0eXBlXCIsXCJ0ZXh0L2Nzc1wiKSxzLnNldEF0dHJpYnV0ZShcIm1lZGlhXCIsbyksRD1yLmFwcGVuZENoaWxkKHMpLFEuaWUmJnR5cGVvZiBqLnN0eWxlU2hlZXRzIT1rJiZqLnN0eWxlU2hlZXRzLmxlbmd0aD4wJiYoRD1qLnN0eWxlU2hlZXRzW2ouc3R5bGVTaGVldHMubGVuZ3RoLTFdKSxNPW99RCYmKHR5cGVvZiBELmFkZFJ1bGUhPWs/RC5hZGRSdWxlKHQsZSk6dHlwZW9mIGouY3JlYXRlVGV4dE5vZGUhPWsmJkQuYXBwZW5kQ2hpbGQoai5jcmVhdGVUZXh0Tm9kZSh0K1wiIHtcIitlK1wifVwiKSkpfX1mdW5jdGlvbiBUKHQsZSl7aWYoJCl7dmFyIG49ZT9cInZpc2libGVcIjpcImhpZGRlblwiLGk9eSh0KTtxJiZpP2kuc3R5bGUudmlzaWJpbGl0eT1uOlwic3RyaW5nXCI9PXR5cGVvZiB0JiZ3KFwiI1wiK3QsXCJ2aXNpYmlsaXR5OlwiK24pfX1mdW5jdGlvbiBiKHQpe3ZhciBlPS9bXFxcXFxcXCI8PlxcLjtdLyxuPW51bGwhPWUuZXhlYyh0KTtyZXR1cm4gbiYmdHlwZW9mIGVuY29kZVVSSUNvbXBvbmVudCE9az9lbmNvZGVVUklDb21wb25lbnQodCk6dH0vKiEgICAgU1dGT2JqZWN0IHYyLjMuMjAxMzA1MjEgPGh0dHA6Ly9naXRodWIuY29tL3N3Zm9iamVjdC9zd2ZvYmplY3Q+XG5cdFx0ICAgIGlzIHJlbGVhc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZSA8aHR0cDovL3d3dy5vcGVuc291cmNlLm9yZy9saWNlbnNlcy9taXQtbGljZW5zZS5waHA+XG5cdFx0Ki9cbnZhciBQLEksTCxPLFIsRCxNLGs9XCJ1bmRlZmluZWRcIixOPVwib2JqZWN0XCIseD1cIlNob2Nrd2F2ZSBGbGFzaFwiLEM9XCJTaG9ja3dhdmVGbGFzaC5TaG9ja3dhdmVGbGFzaFwiLEY9XCJhcHBsaWNhdGlvbi94LXNob2Nrd2F2ZS1mbGFzaFwiLFU9XCJTV0ZPYmplY3RFeHBySW5zdFwiLEI9XCJvbnJlYWR5c3RhdGVjaGFuZ2VcIixIPXdpbmRvdyxqPWRvY3VtZW50LEc9bmF2aWdhdG9yLFk9ITEsVj1bXSx6PVtdLFc9W10sSz1bXSxxPSExLFg9ITEsJD0hMCxaPSExLFE9ZnVuY3Rpb24oKXt2YXIgdD10eXBlb2Ygai5nZXRFbGVtZW50QnlJZCE9ayYmdHlwZW9mIGouZ2V0RWxlbWVudHNCeVRhZ05hbWUhPWsmJnR5cGVvZiBqLmNyZWF0ZUVsZW1lbnQhPWssZT1HLnVzZXJBZ2VudC50b0xvd2VyQ2FzZSgpLG49Ry5wbGF0Zm9ybS50b0xvd2VyQ2FzZSgpLGk9bj8vd2luLy50ZXN0KG4pOi93aW4vLnRlc3QoZSkscj1uPy9tYWMvLnRlc3Qobik6L21hYy8udGVzdChlKSxvPS93ZWJraXQvLnRlc3QoZSk/cGFyc2VGbG9hdChlLnJlcGxhY2UoL14uKndlYmtpdFxcLyhcXGQrKFxcLlxcZCspPykuKiQvLFwiJDFcIikpOiExLHM9XCJNaWNyb3NvZnQgSW50ZXJuZXQgRXhwbG9yZXJcIj09PUcuYXBwTmFtZSxhPVswLDAsMF0sdT1udWxsO2lmKHR5cGVvZiBHLnBsdWdpbnMhPWsmJnR5cGVvZiBHLnBsdWdpbnNbeF09PU4pdT1HLnBsdWdpbnNbeF0uZGVzY3JpcHRpb24sdSYmdHlwZW9mIEcubWltZVR5cGVzIT1rJiZHLm1pbWVUeXBlc1tGXSYmRy5taW1lVHlwZXNbRl0uZW5hYmxlZFBsdWdpbiYmKFk9ITAscz0hMSx1PXUucmVwbGFjZSgvXi4qXFxzKyhcXFMrXFxzK1xcUyskKS8sXCIkMVwiKSxhWzBdPUUodS5yZXBsYWNlKC9eKC4qKVxcLi4qJC8sXCIkMVwiKSksYVsxXT1FKHUucmVwbGFjZSgvXi4qXFwuKC4qKVxccy4qJC8sXCIkMVwiKSksYVsyXT0vW2EtekEtWl0vLnRlc3QodSk/RSh1LnJlcGxhY2UoL14uKlthLXpBLVpdKyguKikkLyxcIiQxXCIpKTowKTtlbHNlIGlmKHR5cGVvZiBILkFjdGl2ZVhPYmplY3QhPWspdHJ5e3ZhciBoPW5ldyBBY3RpdmVYT2JqZWN0KEMpO2gmJih1PWguR2V0VmFyaWFibGUoXCIkdmVyc2lvblwiKSx1JiYocz0hMCx1PXUuc3BsaXQoXCIgXCIpWzFdLnNwbGl0KFwiLFwiKSxhPVtFKHVbMF0pLEUodVsxXSksRSh1WzJdKV0pKX1jYXRjaChjKXt9cmV0dXJue3czOnQscHY6YSx3azpvLGllOnMsd2luOmksbWFjOnJ9fSgpOyFmdW5jdGlvbigpe1EudzMmJigodHlwZW9mIGoucmVhZHlTdGF0ZSE9ayYmKFwiY29tcGxldGVcIj09PWoucmVhZHlTdGF0ZXx8XCJpbnRlcmFjdGl2ZVwiPT09ai5yZWFkeVN0YXRlKXx8dHlwZW9mIGoucmVhZHlTdGF0ZT09ayYmKGouZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJib2R5XCIpWzBdfHxqLmJvZHkpKSYmbigpLHF8fCh0eXBlb2Ygai5hZGRFdmVudExpc3RlbmVyIT1rJiZqLmFkZEV2ZW50TGlzdGVuZXIoXCJET01Db250ZW50TG9hZGVkXCIsbiwhMSksUS5pZSYmKGouYXR0YWNoRXZlbnQoQixmdW5jdGlvbiB0KCl7XCJjb21wbGV0ZVwiPT09ai5yZWFkeVN0YXRlJiYoai5kZXRhY2hFdmVudChCLHQpLG4oKSl9KSxIPT09dG9wJiYhZnVuY3Rpb24gZSgpe2lmKCFxKXt0cnl7ai5kb2N1bWVudEVsZW1lbnQuZG9TY3JvbGwoXCJsZWZ0XCIpfWNhdGNoKHQpe3JldHVybiB2b2lkIHdpbmRvdy5zZXRUaW1lb3V0KGUsMCl9bigpfX0oKSksUS53ayYmIWZ1bmN0aW9uIGkoKXtyZXR1cm4gcT92b2lkIDA6L2xvYWRlZHxjb21wbGV0ZS8udGVzdChqLnJlYWR5U3RhdGUpP3ZvaWQgbigpOnZvaWQgd2luZG93LnNldFRpbWVvdXQoaSwwKX0oKSkpfSgpLFZbMF09ZnVuY3Rpb24oKXtZP28oKTpzKCl9LGZ1bmN0aW9uKCl7US5pZSYmd2luZG93LmF0dGFjaEV2ZW50KFwib251bmxvYWRcIixmdW5jdGlvbigpe2Zvcih2YXIgdD1LLmxlbmd0aCxlPTA7dD5lO2UrKylLW2VdWzBdLmRldGFjaEV2ZW50KEtbZV1bMV0sS1tlXVsyXSk7Zm9yKHZhciBuPVcubGVuZ3RoLGk9MDtuPmk7aSsrKWcoV1tpXSk7Zm9yKHZhciByIGluIFEpUVtyXT1udWxsO1E9bnVsbDtmb3IodmFyIG8gaW4gUClQW29dPW51bGw7UD1udWxsfSl9KCksdC5leHBvcnRzPVA9e3JlZ2lzdGVyT2JqZWN0OmZ1bmN0aW9uKHQsZSxuLGkpe2lmKFEudzMmJnQmJmUpe3ZhciByPXt9O3IuaWQ9dCxyLnN3ZlZlcnNpb249ZSxyLmV4cHJlc3NJbnN0YWxsPW4sci5jYWxsYmFja0ZuPWkselt6Lmxlbmd0aF09cixUKHQsITEpfWVsc2UgaSYmaSh7c3VjY2VzczohMSxpZDp0fSl9LGdldE9iamVjdEJ5SWQ6ZnVuY3Rpb24odCl7cmV0dXJuIFEudzM/YSh0KTp2b2lkIDB9LGVtYmVkU1dGOmZ1bmN0aW9uKHQsZSxuLHIsbyxzLGEsYyxsLGYpe3ZhciBwPW0oZSksZz17c3VjY2VzczohMSxpZDpwfTtRLnczJiYhKFEud2smJlEud2s8MzEyKSYmdCYmZSYmbiYmciYmbz8oVChwLCExKSxpKGZ1bmN0aW9uKCl7bis9XCJcIixyKz1cIlwiO3ZhciBpPXt9O2lmKGwmJnR5cGVvZiBsPT09Tilmb3IodmFyIF8gaW4gbClpW19dPWxbX107aS5kYXRhPXQsaS53aWR0aD1uLGkuaGVpZ2h0PXI7dmFyIG09e307aWYoYyYmdHlwZW9mIGM9PT1OKWZvcih2YXIgeSBpbiBjKW1beV09Y1t5XTtpZihhJiZ0eXBlb2YgYT09PU4pZm9yKHZhciB2IGluIGEpaWYoYS5oYXNPd25Qcm9wZXJ0eSh2KSl7dmFyIEU9Wj9lbmNvZGVVUklDb21wb25lbnQodik6dixTPVo/ZW5jb2RlVVJJQ29tcG9uZW50KGFbdl0pOmFbdl07dHlwZW9mIG0uZmxhc2h2YXJzIT1rP20uZmxhc2h2YXJzKz1cIiZcIitFK1wiPVwiK1M6bS5mbGFzaHZhcnM9RStcIj1cIitTfWlmKEEobykpe3ZhciB3PWQoaSxtLGUpO2kuaWQ9PT1wJiZUKHAsITApLGcuc3VjY2Vzcz0hMCxnLnJlZj13LGcuaWQ9dy5pZH1lbHNle2lmKHMmJnUoKSlyZXR1cm4gaS5kYXRhPXMsdm9pZCBoKGksbSxlLGYpO1QocCwhMCl9ZiYmZihnKX0pKTpmJiZmKGcpfSxzd2l0Y2hPZmZBdXRvSGlkZVNob3c6ZnVuY3Rpb24oKXskPSExfSxlbmFibGVVcmlFbmNvZGluZzpmdW5jdGlvbih0KXtaPXR5cGVvZiB0PT09az8hMDp0fSx1YTpRLGdldEZsYXNoUGxheWVyVmVyc2lvbjpmdW5jdGlvbigpe3JldHVybnttYWpvcjpRLnB2WzBdLG1pbm9yOlEucHZbMV0scmVsZWFzZTpRLnB2WzJdfX0saGFzRmxhc2hQbGF5ZXJWZXJzaW9uOkEsY3JlYXRlU1dGOmZ1bmN0aW9uKHQsZSxuKXtyZXR1cm4gUS53Mz9kKHQsZSxuKTp2b2lkIDB9LHNob3dFeHByZXNzSW5zdGFsbDpmdW5jdGlvbih0LGUsbixpKXtRLnczJiZ1KCkmJmgodCxlLG4saSl9LHJlbW92ZVNXRjpmdW5jdGlvbih0KXtRLnczJiZnKHQpfSxjcmVhdGVDU1M6ZnVuY3Rpb24odCxlLG4saSl7US53MyYmdyh0LGUsbixpKX0sYWRkRG9tTG9hZEV2ZW50OmksYWRkTG9hZEV2ZW50OnIsZ2V0UXVlcnlQYXJhbVZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBlPWoubG9jYXRpb24uc2VhcmNofHxqLmxvY2F0aW9uLmhhc2g7aWYoZSl7aWYoL1xcPy8udGVzdChlKSYmKGU9ZS5zcGxpdChcIj9cIilbMV0pLG51bGw9PXQpcmV0dXJuIGIoZSk7Zm9yKHZhciBuPWUuc3BsaXQoXCImXCIpLGk9MDtpPG4ubGVuZ3RoO2krKylpZihuW2ldLnN1YnN0cmluZygwLG5baV0uaW5kZXhPZihcIj1cIikpPT09dClyZXR1cm4gYihuW2ldLnN1YnN0cmluZyhuW2ldLmluZGV4T2YoXCI9XCIpKzEpKX1yZXR1cm5cIlwifSxleHByZXNzSW5zdGFsbENhbGxiYWNrOmZ1bmN0aW9uKCl7aWYoWCl7dmFyIHQ9eShVKTt0JiZJJiYodC5wYXJlbnROb2RlLnJlcGxhY2VDaGlsZChJLHQpLEwmJihUKEwsITApLFEuaWUmJihJLnN0eWxlLmRpc3BsYXk9XCJibG9ja1wiKSksTyYmTyhSKSksWD0hMX19LHZlcnNpb246XCIyLjNcIn19LGZ1bmN0aW9uKHQsZSxuKXtmdW5jdGlvbiBpKHQsZSxuLGkpe2lmKG4hPT1zJiZuIT09byYmdm9pZCAwIT09bil0aHJvdyBuZXcgRXJyb3IoXCJDYW4gbm90IHVzZSB0aGUgcHJvdmlkZWQgYmFzZSBjbGFzc1wiKTt0aGlzLl9iYXNlY2xhc3M9bnx8byx0aGlzLl9iYXNlY2xhc3MuY2FsbCh0aGlzLHQsZSxpfHxcIkhMU0F1ZGlvUGxheWVyXCIpLHRoaXMuX3NlZWtQb3NpdGlvbj0wfXZhciByPW4oMSksbz1uKDQ2KSxzPW4oNDgpLGE9bigzOCk7dC5leHBvcnRzPWkscihpLnByb3RvdHlwZSxvLnByb3RvdHlwZSksaS5wcm90b3R5cGUuc2Vlaz1mdW5jdGlvbih0KXt0aGlzLl9iYXNlY2xhc3MucHJvdG90eXBlLnNlZWsuYXBwbHkodGhpcyxhcmd1bWVudHMpLHRoaXMuX2lzSW5PbmVPZlN0YXRlcyhhLkxPQURJTkcsYS5TRUVLSU5HKSYmKHRoaXMuX3NlZWtQb3NpdGlvbj10KX0saS5wcm90b3R5cGUuZ2V0Q3VycmVudFBvc2l0aW9uPWZ1bmN0aW9uKCl7aWYodGhpcy5faXNJbk9uZU9mU3RhdGVzKGEuTE9BRElORykmJnRoaXMuX3NlZWtQb3NpdGlvbj4wKXJldHVybiB0aGlzLl9zZWVrUG9zaXRpb247aWYodGhpcy5faXNJbk9uZU9mU3RhdGVzKGEuUExBWUlORyxhLlNFRUtJTkcpKXtpZih0aGlzLl9zZWVrUG9zaXRpb24+PXRoaXMuX2N1cnJlbnRQb3NpdGlvbilyZXR1cm4gdGhpcy5fc2Vla1Bvc2l0aW9uO3RoaXMuX3NlZWtQb3NpdGlvbj0wfXJldHVybiB0aGlzLl9iYXNlY2xhc3MucHJvdG90eXBlLmdldEN1cnJlbnRQb3NpdGlvbi5hcHBseSh0aGlzLGFyZ3VtZW50cyl9fSxmdW5jdGlvbih0LGUsbil7ZnVuY3Rpb24gaSh0LGUsbil7dGhpcy5fZHVyYXRpb249MCx0aGlzLl9jdXJyZW50UG9zaXRpb249MCx0aGlzLl9sb2FkZWRQb3NpdGlvbj0wLGgucHJvdG90eXBlLmNvbnN0cnVjdG9yLmNhbGwodGhpcyxufHxcIkhUTUw1QXVkaW9QbGF5ZXJcIix0LGUpLHRoaXMuX2lzTG9hZGVkPSExLHRoaXMuX3ByZXZDdXJyZW50UG9zaXRpb249MCx0aGlzLl9wcmV2Q2hlY2tUaW1lPTAsdGhpcy5fcG9zaXRpb25VcGRhdGVUaW1lcj0wLHRoaXMuX3BsYXlSZXF1ZXN0ZWQ9ITEsdGhpcy5fc3RhcnRGcm9tUG9zaXRpb249MCx0aGlzLmdldERlc2NyaXB0b3IoKS5kdXJhdGlvbiYmKHRoaXMuX2R1cmF0aW9uPXRoaXMuZ2V0RGVzY3JpcHRvcigpLmR1cmF0aW9uKSx0aGlzLl9iaW5kSGFuZGxlcnMoKSx0aGlzLl9pbml0TWVkaWFFbGVtZW50KCksdGhpcy51cGRhdGVTdGF0ZShzLklETEUpfXZhciByPW4oMSksbz1uKDQ3KS5iaW5kQWxsLHM9bigzOCksYT1uKDM5KSx1PW4oNDMpLGg9bigzNSksYz1uKDE2KTt0LmV4cG9ydHM9aSxyKGkucHJvdG90eXBlLGgucHJvdG90eXBlKSxpLk1lZGlhQVBJRXZlbnRzPVtcImVuZGVkXCIsXCJwbGF5XCIsXCJwbGF5aW5nXCIsXCJwYXVzZVwiLFwic2Vla2luZ1wiLFwid2FpdGluZ1wiLFwic2Vla2VkXCIsXCJlcnJvclwiLFwibG9hZGVkZGF0YVwiLFwibG9hZGVkbWV0YWRhdGFcIl0saS5wcm90b3R5cGUucGxheT1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5faXNJbk9uZU9mU3RhdGVzKHMuRVJST1Iscy5ERUFEKT92b2lkIHRoaXMuX2xvZ2dlci5sb2coXCJwbGF5IGNhbGxlZCBidXQgc3RhdGUgaXMgRVJST1Igb3IgREVBRFwiKToodGhpcy5fbG9nZ2VyLmxvZyhcInBsYXkgZnJvbSBcIit0KSx0aGlzLl9zdGFydEZyb21Qb3NpdGlvbj10fHwwLHRoaXMuX3BsYXlSZXF1ZXN0ZWQ9ITAsdGhpcy5faXNJbk9uZU9mU3RhdGVzKHMuUEFVU0VELHMuRU5ERUQpP3ZvaWQgdGhpcy5yZXN1bWUoKToodGhpcy51cGRhdGVTdGF0ZShzLkxPQURJTkcpLHRoaXMuX2h0bWw1QXVkaW8ucmVhZHlTdGF0ZT4wJiZ0aGlzLl9vbkxvYWRlZE1ldGFkYXRhKCksdGhpcy5faHRtbDVBdWRpby5yZWFkeVN0YXRlPjEmJnRoaXMuX29uTG9hZGVkKCksdm9pZCh0aGlzLl9pc0xvYWRlZD90aGlzLl9wbGF5QWZ0ZXJMb2FkZWQoKTp0aGlzLm9uY2UoYS5EQVRBLHRoaXMuX3BsYXlBZnRlckxvYWRlZCkpKSl9LGkucHJvdG90eXBlLnBhdXNlPWZ1bmN0aW9uKCl7dGhpcy5faXNJbk9uZU9mU3RhdGVzKHMuRVJST1Iscy5ERUFEKXx8KHRoaXMuX2xvZ2dlci5sb2coXCJwYXVzZVwiKSx0aGlzLl9wbGF5UmVxdWVzdGVkPSExLHRoaXMuX2h0bWw1QXVkaW8mJnRoaXMuX2h0bWw1QXVkaW8ucGF1c2UoKSl9LGkucHJvdG90eXBlLnNlZWs9ZnVuY3Rpb24odCl7dmFyIGUsbj0hMSxpPXQvMWUzLHI9dGhpcy5faHRtbDVBdWRpby5zZWVrYWJsZTtpZighdGhpcy5faXNJbk9uZU9mU3RhdGVzKHMuRVJST1Iscy5ERUFEKSl7aWYoIXRoaXMuX2lzTG9hZGVkKXJldHVybiB0aGlzLm9uY2UoYS5EQVRBLGZ1bmN0aW9uKCl7dGhpcy5zZWVrKHQpfSksdm9pZCB0aGlzLl9sb2dnZXIubG9nKFwicG9zdHBvbmluZyBzZWVrIGZvciB3aGVuIGxvYWRlZFwiKTtpZihjLmlzSUUxME1vYmlsZSluPSEwO2Vsc2UgZm9yKGU9MDtlPHIubGVuZ3RoO2UrKylpZihpPD1yLmVuZChlKSYmaT49ci5zdGFydChlKSl7bj0hMDticmVha31pZighbilyZXR1cm4gdm9pZCB0aGlzLl9sb2dnZXIubG9nKFwiY2FuIG5vdCBzZWVrXCIpO3RoaXMuX2xvZ2dlci5sb2coXCJzZWVrXCIpLHRoaXMudXBkYXRlU3RhdGUocy5TRUVLSU5HKSx0aGlzLl9odG1sNUF1ZGlvLmN1cnJlbnRUaW1lPWksdGhpcy5fY3VycmVudFBvc2l0aW9uPXQsdGhpcy5fbGFzdE1lZGlhQ2xvY2tDaGVjaz1udWxsfX0saS5wcm90b3R5cGUucmVzdW1lPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2lzSW5PbmVPZlN0YXRlcyhzLkVSUk9SLHMuREVBRCk/dm9pZCB0aGlzLl9sb2dnZXIubG9nKFwicmVzdW1lIGNhbGxlZCBidXQgc3RhdGUgaXMgRVJST1Igb3IgREVBRFwiKToodGhpcy5fbG9nZ2VyLmxvZyhcInJlc3VtZVwiKSx2b2lkKHRoaXMuZ2V0U3RhdGUoKT09PXMuUEFVU0VEPyh0aGlzLnVwZGF0ZVN0YXRlKHMuUExBWUlORyksdGhpcy5faHRtbDVBdWRpby5wbGF5KHRoaXMuX2h0bWw1QXVkaW8uY3VycmVudFRpbWUpKTp0aGlzLmdldFN0YXRlKCk9PT1zLkVOREVEJiZ0aGlzLl9odG1sNUF1ZGlvLnBsYXkoMCkpKX0saS5wcm90b3R5cGUuc2V0Vm9sdW1lPWZ1bmN0aW9uKHQpe3RoaXMuX2h0bWw1QXVkaW8mJih0aGlzLl9odG1sNUF1ZGlvLnZvbHVtZT10KX0saS5wcm90b3R5cGUuZ2V0Vm9sdW1lPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2h0bWw1QXVkaW8/dGhpcy5faHRtbDVBdWRpby52b2x1bWU6MX0saS5wcm90b3R5cGUuc2V0TXV0ZT1mdW5jdGlvbih0KXt0aGlzLl9odG1sNUF1ZGlvJiYodGhpcy5faHRtbDVBdWRpby5tdXRlZD10KX0saS5wcm90b3R5cGUuZ2V0TXV0ZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9odG1sNUF1ZGlvP3RoaXMuX2h0bWw1QXVkaW8ubXV0ZWQ6ITF9LGkucHJvdG90eXBlLmtpbGw9ZnVuY3Rpb24oKXt0aGlzLl9zdGF0ZSE9PXMuREVBRCYmKHRoaXMuX2xvZ2dlci5sb2coXCJraWxsaW5nIC4uLlwiKSx0aGlzLl9yZXNldFBvc2l0aW9uSW50ZXJ2YWwoITEpLHRoaXMuX3BsYXlSZXF1ZXN0ZWQ9ITEsdGhpcy5fdG9nZ2xlRXZlbnRMaXN0ZW5lcnMoITEpLHRoaXMucGF1c2UoKSxkZWxldGUgdGhpcy5faHRtbDVBdWRpbyx0aGlzLnVwZGF0ZVN0YXRlKHMuREVBRCksdGhpcy5fbG9nZ2VyLmxvZyhcImRlYWRcIikpfSxpLnByb3RvdHlwZS5nZXRFcnJvck1lc3NhZ2U9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZXJyb3JNZXNzYWdlfSxpLnByb3RvdHlwZS5nZXRFcnJvcklEPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2Vycm9ySUR9LGkucHJvdG90eXBlLl9iaW5kSGFuZGxlcnM9ZnVuY3Rpb24oKXtvKHRoaXMsW1wiX29uUG9zaXRpb25DaGFuZ2VcIixcIl9vbkh0bWw1TWVkaWFFdmVudFwiLFwiX29uTG9hZGVkXCIsXCJfb25Mb2FkZWRNZXRhZGF0YVwiXSl9LGkucHJvdG90eXBlLl9pbml0TWVkaWFFbGVtZW50PWZ1bmN0aW9uKCl7dGhpcy5faHRtbDVBdWRpbz1jLmNyZWF0ZUF1ZGlvRWxlbWVudCgpLHRoaXMuX2h0bWw1QXVkaW8uaWQ9dGhpcy5nZXRTZXR0aW5ncygpLmF1ZGlvT2JqZWN0SUQrXCJfXCIrdGhpcy5nZXRJZCgpLHRoaXMuX2h0bWw1QXVkaW8ucHJlbG9hZD1cImF1dG9cIix0aGlzLl9odG1sNUF1ZGlvLnR5cGU9dGhpcy5nZXREZXNjcmlwdG9yKCkubWltZVR5cGUsdGhpcy5faHRtbDVBdWRpby5zcmM9dGhpcy5nZXREZXNjcmlwdG9yKCkuc3JjLHRoaXMuX2h0bWw1QXVkaW8ubG9hZCgpLHRoaXMuX3RvZ2dsZUV2ZW50TGlzdGVuZXJzKCEwKX0saS5wcm90b3R5cGUuX3BsYXlBZnRlckxvYWRlZD1mdW5jdGlvbigpe3RoaXMuX3BsYXlSZXF1ZXN0ZWQmJih0aGlzLl90cnlTZWVrVG9TdGFydFBvc2l0aW9uKCksdGhpcy5faHRtbDVBdWRpby5wbGF5KCkpfSxpLnByb3RvdHlwZS5faXNJbk9uZU9mU3RhdGVzPWZ1bmN0aW9uKCl7Zm9yKHZhciB0IGluIGFyZ3VtZW50cylpZihhcmd1bWVudHNbdF09PT10aGlzLl9zdGF0ZSlyZXR1cm4hMDtyZXR1cm4hMX0saS5wcm90b3R5cGUuX3RvZ2dsZUV2ZW50TGlzdGVuZXJzPWZ1bmN0aW9uKHQpe2lmKHRoaXMuX2h0bWw1QXVkaW8pe3ZhciBlPXQ/XCJhZGRFdmVudExpc3RlbmVyXCI6XCJyZW1vdmVFdmVudExpc3RlbmVyXCI7aS5NZWRpYUFQSUV2ZW50cy5mb3JFYWNoKGZ1bmN0aW9uKHQpe3N3aXRjaCh0KXtjYXNlXCJsb2FkZWRkYXRhXCI6dGhpcy5faHRtbDVBdWRpb1tlXShcImxvYWRlZGRhdGFcIix0aGlzLl9vbkxvYWRlZCk7YnJlYWs7Y2FzZVwibG9hZGVkbWV0YWRhdGFcIjp0aGlzLl9odG1sNUF1ZGlvW2VdKFwibG9hZGVkbWV0YWRhdGFcIix0aGlzLl9vbkxvYWRlZE1ldGFkYXRhKTticmVhaztkZWZhdWx0OnRoaXMuX2h0bWw1QXVkaW9bZV0odCx0aGlzLl9vbkh0bWw1TWVkaWFFdmVudCl9fSx0aGlzKX19LGkucHJvdG90eXBlLl90cnlTZWVrVG9TdGFydFBvc2l0aW9uPWZ1bmN0aW9uKCl7dmFyIHQ7cmV0dXJuIHRoaXMuX3N0YXJ0RnJvbVBvc2l0aW9uPjAmJih0aGlzLl9sb2dnZXIubG9nKFwic2VlayB0byBzdGFydCBwb3NpdGlvbjogXCIrdGhpcy5fc3RhcnRGcm9tUG9zaXRpb24pLHQ9dGhpcy5fc3RhcnRGcm9tUG9zaXRpb24vMWUzLHRoaXMuX2h0bWw1QXVkaW8uY3VycmVudFRpbWU9dCx0aGlzLl9odG1sNUF1ZGlvLmN1cnJlbnRUaW1lPT09dCk/KHRoaXMuX2xhc3RNZWRpYUNsb2NrQ2hlY2s9bnVsbCx0aGlzLl9jdXJyZW50UG9zaXRpb249dGhpcy5fc3RhcnRGcm9tUG9zaXRpb24sdGhpcy5fc3RhcnRGcm9tUG9zaXRpb249MCwhMCk6ITF9LGkucHJvdG90eXBlLl9vbkxvYWRlZD1mdW5jdGlvbigpe3RoaXMuX2xvZ2dlci5sb2coXCJIVE1MNSBtZWRpYSBsb2FkZWRkYXRhIGV2ZW50XCIpLHRoaXMudHJpZ2dlcihhLkRBVEEsdGhpcyl9LGkucHJvdG90eXBlLl9vbkxvYWRlZE1ldGFkYXRhPWZ1bmN0aW9uKCl7dGhpcy5fbG9nZ2VyLmxvZyhcIkhUTUw1IG1lZGlhIGxvYWRlZG1ldGFkYXRhIGV2ZW50XCIpLCh2b2lkIDA9PT10aGlzLl9kdXJhdGlvbnx8MD09PXRoaXMuX2R1cmF0aW9uKSYmKHRoaXMuX2R1cmF0aW9uPTFlMyp0aGlzLl9odG1sNUF1ZGlvLmR1cmF0aW9uKSx0aGlzLl9sb2FkZWRQb3NpdGlvbj10aGlzLl9kdXJhdGlvbix0aGlzLl9pc0xvYWRlZD0hMCx0aGlzLnRyaWdnZXIoYS5NRVRBREFUQSx0aGlzKX0saS5wcm90b3R5cGUuX3Jlc2V0UG9zaXRpb25JbnRlcnZhbD1mdW5jdGlvbih0KXt3aW5kb3cuY2xlYXJJbnRlcnZhbCh0aGlzLl9wb3NpdGlvblVwZGF0ZVRpbWVyKSx0JiYodGhpcy5fcG9zaXRpb25VcGRhdGVUaW1lcj13aW5kb3cuc2V0SW50ZXJ2YWwodGhpcy5fb25Qb3NpdGlvbkNoYW5nZSx0aGlzLmdldFNldHRpbmdzKCkudXBkYXRlSW50ZXJ2YWwpKX0saS5wcm90b3R5cGUuX29uUG9zaXRpb25DaGFuZ2U9ZnVuY3Rpb24oKXtpZighdGhpcy5faXNJbk9uZU9mU3RhdGVzKHMuREVBRCkpe3ZhciB0O3JldHVybiBEYXRlLm5vdygpLHRoaXMuX2N1cnJlbnRQb3NpdGlvbj0xZTMqdGhpcy5faHRtbDVBdWRpby5jdXJyZW50VGltZSx0aGlzLnRyaWdnZXIoYS5QT1NJVElPTl9DSEFOR0UsdGhpcy5nZXRDdXJyZW50UG9zaXRpb24oKSx0aGlzLl9sb2FkZWRQb3NpdGlvbix0aGlzLl9kdXJhdGlvbix0aGlzKSx0aGlzLl9pc0luT25lT2ZTdGF0ZXMocy5QTEFZSU5HLHMuTE9BRElORyk/MCE9PXRoaXMuX2R1cmF0aW9uJiYodGhpcy5fY3VycmVudFBvc2l0aW9uPnRoaXMuX2R1cmF0aW9ufHx0aGlzLl9jdXJyZW50UG9zaXRpb24+dGhpcy5fbG9hZGVkUG9zaXRpb24mJiFjLmlzSUUxME1vYmlsZSk/dm9pZCB0aGlzLl9vbkh0bWw1TWVkaWFFdmVudCh7dHlwZTpcImVuZGVkXCJ9KTp0aGlzLmdldFN0YXRlKCkhPT1zLlBMQVlJTkd8fHRoaXMuX21lZGlhc0hhc1Byb2dyZXNzZWQoKT92b2lkKHRoaXMuZ2V0U3RhdGUoKSE9PXMuUExBWUlORyYmdGhpcy5fbWVkaWFzSGFzUHJvZ3Jlc3NlZCgpJiZ0aGlzLnVwZGF0ZVN0YXRlKHMuUExBWUlORykpOih0aGlzLl9sb2dnZXIubG9nKFwibWVkaWEgY2xvY2sgY2hlY2sgZmFpbGVkLCBwbGF5aGVhZCBpcyBub3QgYWR2YW5jaW5nIGFueW1vcmVcIiksdm9pZCB0aGlzLnVwZGF0ZVN0YXRlKHMuTE9BRElORykpOnZvaWQodGhpcy5fc3RhdGU9PT1zLlNFRUtJTkcmJnQ+MCYmdGhpcy51cGRhdGVTdGF0ZShzLlBMQVlJTkcpKX19LGkucHJvdG90eXBlLl9tZWRpYXNIYXNQcm9ncmVzc2VkPWZ1bmN0aW9uKCl7dmFyIHQ9ITEsZT1EYXRlLm5vdygpO2lmKHRoaXMuX2xhc3RNZWRpYUNsb2NrQ2hlY2spe3ZhciBuPWUtdGhpcy5fbGFzdE1lZGlhQ2xvY2tDaGVjayxpPXRoaXMuX2N1cnJlbnRQb3NpdGlvbi10aGlzLl9sYXN0TWVkaWFDbG9ja1ZhbHVlO2lmKC4xKm4+aSl7aWYoMD09PWkmJjUwPm4pcmV0dXJuITA7dD0hMH19cmV0dXJuIHRoaXMuX2xhc3RNZWRpYUNsb2NrVmFsdWU9dGhpcy5fY3VycmVudFBvc2l0aW9uLHRoaXMuX2xhc3RNZWRpYUNsb2NrQ2hlY2s9ZSwhdH0saS5wcm90b3R5cGUuX29uSHRtbDVNZWRpYUV2ZW50PWZ1bmN0aW9uKHQpe3N3aXRjaCh0aGlzLl9sb2dnZXIubG9nKFwiSFRNTDUgbWVkaWEgZXZlbnQ6IFwiK3QudHlwZSksdC50eXBlKXtjYXNlXCJwbGF5aW5nXCI6aWYodGhpcy5fdHJ5U2Vla1RvU3RhcnRQb3NpdGlvbigpKWJyZWFrO3RoaXMuX29uUG9zaXRpb25DaGFuZ2UoKSx0aGlzLl9yZXNldFBvc2l0aW9uSW50ZXJ2YWwoITApLHRoaXMudXBkYXRlU3RhdGUocy5QTEFZSU5HKTticmVhaztjYXNlXCJwYXVzZVwiOnRoaXMuX29uUG9zaXRpb25DaGFuZ2UoKSx0aGlzLl9yZXNldFBvc2l0aW9uSW50ZXJ2YWwoITEpLHRoaXMudXBkYXRlU3RhdGUocy5QQVVTRUQpO2JyZWFrO2Nhc2VcImVuZGVkXCI6dGhpcy5fY3VycmVudFBvc2l0aW9uPXRoaXMuX2xvYWRlZFBvc2l0aW9uPXRoaXMuX2R1cmF0aW9uLHRoaXMuX3Jlc2V0UG9zaXRpb25JbnRlcnZhbCghMSksdGhpcy51cGRhdGVTdGF0ZShzLkVOREVEKTticmVhaztjYXNlXCJ3YWl0aW5nXCI6aWYodGhpcy5nZXRTdGF0ZSgpPT09cy5TRUVLSU5HKWJyZWFrO3RoaXMudXBkYXRlU3RhdGUocy5MT0FESU5HKTticmVhaztjYXNlXCJzZWVraW5nXCI6dGhpcy51cGRhdGVTdGF0ZShzLlNFRUtJTkcpO2JyZWFrO2Nhc2VcInNlZWtlZFwiOnRoaXMuX2h0bWw1QXVkaW8ucGF1c2VkP3RoaXMudXBkYXRlU3RhdGUocy5QQVVTRUQpOnRoaXMudXBkYXRlU3RhdGUocy5QTEFZSU5HKSx0aGlzLl9vblBvc2l0aW9uQ2hhbmdlKHQpO2JyZWFrO2Nhc2VcImVycm9yXCI6dGhpcy5fZXJyb3IodGhpcy5faHRtbDVBdWRpb0Vycm9yQ29kZVRvRXJyb3JJZCgpLCEwKX19LGkucHJvdG90eXBlLl9odG1sNUF1ZGlvRXJyb3JDb2RlVG9FcnJvcklkPWZ1bmN0aW9uKCl7cmV0dXJuezE6dS5IVE1MNV9BVURJT19BQk9SVEVELDI6dS5IVE1MNV9BVURJT19ORVRXT1JLLDM6dS5IVE1MNV9BVURJT19ERUNPREUsNDp1LkhUTUw1X0FVRElPX1NSQ19OT1RfU1VQUE9SVEVEfVt0aGlzLl9odG1sNUF1ZGlvLmVycm9yLmNvZGVdfSxpLnByb3RvdHlwZS5fZXJyb3I9ZnVuY3Rpb24odCxlKXt2YXIgbj1cImVycm9yOiBcIjtlJiYobj1cImVycm9yIChuYXRpdmUpOiBcIiksdGhpcy5fZXJyb3JJRD10LHRoaXMuX2Vycm9yTWVzc2FnZT10aGlzLl9nZXRFcnJvck1lc3NhZ2UodGhpcy5fZXJyb3JJRCksdGhpcy5fbG9nZ2VyLmxvZyhuK3RoaXMuX2Vycm9ySUQrXCIgXCIrdGhpcy5fZXJyb3JNZXNzYWdlKSx0aGlzLnVwZGF0ZVN0YXRlKHMuRVJST1IpLHRoaXMuX3RvZ2dsZUV2ZW50TGlzdGVuZXJzKCExKX0saS5wcm90b3R5cGUuX2dldEVycm9yTWVzc2FnZT1mdW5jdGlvbih0KXt2YXIgZT17fTtyZXR1cm4gZVt1LkhUTUw1X0FVRElPX0FCT1JURURdPVwiVGhlIGZldGNoaW5nIHByb2Nlc3MgZm9yIHRoZSBtZWRpYSByZXNvdXJjZSB3YXMgYWJvcnRlZCBieSB0aGUgdXNlciBhZ2VudCBhdCB0aGUgdXNlcidzIHJlcXVlc3QuXCIsZVt1LkhUTUw1X0FVRElPX05FVFdPUktdPVwiQSBuZXR3b3JrIGVycm9yIG9mIHNvbWUgZGVzY3JpcHRpb24gY2F1c2VkIHRoZSB1c2VyIGFnZW50IHRvIHN0b3AgZmV0Y2hpbmcgdGhlIG1lZGlhIHJlc291cmNlLCBhZnRlciB0aGUgcmVzb3VyY2Ugd2FzIGVzdGFibGlzaGVkIHRvIGJlIHVzYWJsZS5cIixlW3UuSFRNTDVfQVVESU9fREVDT0RFXT1cIkFuIGVycm9yIG9mIHNvbWUgZGVzY3JpcHRpb24gb2NjdXJyZWQgd2hpbGUgZGVjb2RpbmcgdGhlIG1lZGlhIHJlc291cmNlLCBhZnRlciB0aGUgcmVzb3VyY2Ugd2FzIGVzdGFibGlzaGVkIHRvIGJlIHVzYWJsZS5cIixlW3UuSFRNTDVfQVVESU9fU1JDX05PVF9TVVBQT1JURURdPVwiVGhlIG1lZGlhIHJlc291cmNlIGluZGljYXRlZCBieSB0aGUgc3JjIGF0dHJpYnV0ZSB3YXMgbm90IHN1aXRhYmxlLlwiLGVbdF19fSxmdW5jdGlvbih0LGUpe2Z1bmN0aW9uIG4odCxlKXt2YXIgbj1uZXcgVWludDhBcnJheSh0LmJ5dGVMZW5ndGgrZS5ieXRlTGVuZ3RoKTtyZXR1cm4gbi5zZXQobmV3IFVpbnQ4QXJyYXkodCksMCksbi5zZXQobmV3IFVpbnQ4QXJyYXkoZSksdC5ieXRlTGVuZ3RoKSxufXQuZXhwb3J0cz17YmluZEFsbDpmdW5jdGlvbih0LGUpe2UuZm9yRWFjaChmdW5jdGlvbihlKXt0W2VdPXRbZV0uYmluZCh0KX0pfSxjb25jYXRCdWZmZXJzVG9VaW50OEFycmF5Om59fSxmdW5jdGlvbih0LGUsbil7ZnVuY3Rpb24gaSh0LGUsbil7dS5wcm90b3R5cGUuY29uc3RydWN0b3IuY2FsbCh0aGlzLHQsZSxufHxcIkhUTUw1U2luZ2xlQXVkaW9QbGF5ZXJcIil9dmFyIHIsbz1uKDEpLHM9bigxNiksYT1uKDM5KSx1PW4oNDYpLGg9bigzOCksYz17fTt0LmV4cG9ydHM9aSxvKGkucHJvdG90eXBlLHUucHJvdG90eXBlKSxpLl9vbkxvYWRlZD1mdW5jdGlvbih0KXtpLl9wYXVzZU90aGVyc0FuZEZvcndhcmRFdmVudChcIl9vbkxvYWRlZFwiLHQpfSxpLl9vbkxvYWRlZE1ldGFkYXRhPWZ1bmN0aW9uKHQpe2kuX3BhdXNlT3RoZXJzQW5kRm9yd2FyZEV2ZW50KFwiX29uTG9hZGVkTWV0YWRhdGFcIix0KX0saS5fb25IdG1sNU1lZGlhRXZlbnQ9ZnVuY3Rpb24odCl7aS5fcGF1c2VPdGhlcnNBbmRGb3J3YXJkRXZlbnQoXCJfb25IdG1sNU1lZGlhRXZlbnRcIix0KX0saS5fcGF1c2VPdGhlcnNBbmRGb3J3YXJkRXZlbnQ9ZnVuY3Rpb24odCxlKXtPYmplY3Qua2V5cyhjKS5mb3JFYWNoKGZ1bmN0aW9uKG4pe3ZhciBpPWNbbl07bj09PXI/aVt0XShlKTppLnBhdXNlKCl9KX0saS5wcm90b3R5cGUuX2luaXRNZWRpYUVsZW1lbnQ9ZnVuY3Rpb24oKXtpLl9odG1sNUF1ZGlvfHwoaS5faHRtbDVBdWRpbz1zLmNyZWF0ZUF1ZGlvRWxlbWVudCgpLGkuX2h0bWw1QXVkaW8uaWQ9dGhpcy5nZXRTZXR0aW5ncygpLmF1ZGlvT2JqZWN0SUQrXCJfU2luZ2xlXCIsdS5wcm90b3R5cGUuX3RvZ2dsZUV2ZW50TGlzdGVuZXJzLmNhbGwoaSwhMCkpLHRoaXMuX3RvZ2dsZUV2ZW50TGlzdGVuZXJzKCEwKSx0aGlzLl9odG1sNUF1ZGlvPWkuX2h0bWw1QXVkaW8sdGhpcy5fbG9nZ2VyLmxvZyhcImluaXRpYWxpemVkIHBsYXllciBmb3IgdXNlIHdpdGg6IFwiK3RoaXMuZ2V0RGVzY3JpcHRvcigpLnNyYyl9LGkucHJvdG90eXBlLl90b2dnbGVFdmVudExpc3RlbmVycz1mdW5jdGlvbih0KXt0P2NbdGhpcy5nZXRJZCgpXT10aGlzOmRlbGV0ZSBjW3RoaXMuZ2V0SWQoKV19LGkucHJvdG90eXBlLnBsYXk9ZnVuY3Rpb24odCl7dGhpcy5fbG9nZ2VyLmxvZyhcInNpbmdsZXRvbiBwbGF5IGF0OiBcIit0KSwoMD09PXRoaXMuX2h0bWw1QXVkaW8ucmVhZHlTdGF0ZXx8dGhpcy5nZXREZXNjcmlwdG9yKCkuc3JjIT09dGhpcy5faHRtbDVBdWRpby5zcmMpJiYodGhpcy5fbG9nZ2VyLmxvZyhcInNldHRpbmcgdXAgYXVkaW8gZWxlbWVudCBmb3IgdXNlIHdpdGg6IFwiK3RoaXMuZ2V0RGVzY3JpcHRvcigpLnNyYykscj10aGlzLmdldElkKCksdGhpcy5faXNJbk9uZU9mU3RhdGVzKGguUEFVU0VEKSYmKHRoaXMuX2xvZ2dlci5sb2coXCJzdGF0ZSB3YXMgcGF1c2VkXCIpLHQ9dGhpcy5fY3VycmVudFBvc2l0aW9ufHwwKSx0aGlzLl90b2dnbGVFdmVudExpc3RlbmVycyghMCksdGhpcy5faHRtbDVBdWRpby5wcmVsb2FkPVwiYXV0b1wiLHRoaXMuX2h0bWw1QXVkaW8udHlwZT10aGlzLmdldERlc2NyaXB0b3IoKS5taW1lVHlwZSx0aGlzLl9odG1sNUF1ZGlvLnNyYz10aGlzLmdldERlc2NyaXB0b3IoKS5zcmMsdGhpcy5faHRtbDVBdWRpby5sb2FkKCkpLHUucHJvdG90eXBlLnBsYXkuY2FsbCh0aGlzLHQpfSxpLnByb3RvdHlwZS5yZXN1bWU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5faXNJbk9uZU9mU3RhdGVzKGguRVJST1IsaC5ERUFEKT92b2lkIDA6ciE9PXRoaXMuZ2V0SWQoKT92b2lkIHRoaXMucGxheSh0aGlzLl9jdXJyZW50UG9zaXRpb24pOnZvaWQgdS5wcm90b3R5cGUucmVzdW1lLmFwcGx5KHRoaXMsYXJndW1lbnRzKX0saS5wcm90b3R5cGUucGF1c2U9ZnVuY3Rpb24oKXt0aGlzLl9pc0luT25lT2ZTdGF0ZXMoaC5FUlJPUixoLkRFQUQpfHwodGhpcy5fbG9nZ2VyLmxvZyhcInNpbmdsZXRvbiBwYXVzZVwiKSxyPT09dGhpcy5nZXRJZCgpP3UucHJvdG90eXBlLnBhdXNlLmFwcGx5KHRoaXMsYXJndW1lbnRzKToodGhpcy5fdG9nZ2xlRXZlbnRMaXN0ZW5lcnMoITEpLHRoaXMuX2lzSW5PbmVPZlN0YXRlcyhoLlBBVVNFRCl8fHRoaXMudXBkYXRlU3RhdGUoaC5QQVVTRUQpLHRoaXMuX3Jlc2V0UG9zaXRpb25JbnRlcnZhbCghMSkpKX0saS5wcm90b3R5cGUuc2Vlaz1mdW5jdGlvbih0KXtyZXR1cm4gciE9PXRoaXMuZ2V0SWQoKT8odGhpcy5fY3VycmVudFBvc2l0aW9uPXQsdm9pZCB0aGlzLnRyaWdnZXIoYS5QT1NJVElPTl9DSEFOR0UsdGhpcy5fY3VycmVudFBvc2l0aW9uLHRoaXMuX2xvYWRlZFBvc2l0aW9uLHRoaXMuX2R1cmF0aW9uLHRoaXMpKTp2b2lkIHUucHJvdG90eXBlLnNlZWsuYXBwbHkodGhpcyxhcmd1bWVudHMpfX0sZnVuY3Rpb24odCxlLG4pe2Z1bmN0aW9uIGkodCxlKXtvLmNhbGwodGhpcyx0LGUscyxcIkhMU1NpbmdsZUF1ZGlvUGxheWVyXCIpfXZhciByPW4oMSksbz1uKDQ1KSxzPW4oNDgpO3QuZXhwb3J0cz1pLHIoaS5wcm90b3R5cGUscy5wcm90b3R5cGUsby5wcm90b3R5cGUpfSxmdW5jdGlvbih0LGUsbil7ZnVuY3Rpb24gaSh0LGUpe3JldHVybiB1LnByb3RvdHlwZS5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMsXCJITFNNU0VQbGF5ZXJcIix0LGUsdygpKSxvKHRoaXMsW1wiX29uUG9zaXRpb25DaGFuZ2VcIixcIl9vblBsYXlsaXN0TG9hZGVkXCIsXCJfb25QbGF5bGlzdEZhaWxlZFwiLFwiX29uU2VnbWVudExvYWRlZFwiLFwiX29uU2VnbWVudFByb2dyZXNzXCIsXCJfb25TZWdtZW50RmFpbGVkXCIsXCJfb25IdG1sNU1lZGlhRXZlbnRcIixcIl9vbkxvYWRlZERhdGFcIixcIl9vbkxvYWRlZE1ldGFkYXRhXCIsXCJfb25NZWRpYVNvdXJjZUFwcGVuZFwiLFwiX29uTWVkaWFTb3VyY2VSZWFkeVwiLFwiX29uTWVkaWFTb3VyY2VEZXN0cm95XCIsXCJfb25NZWRpYVNvdXJjZUVycm9yXCJdKSx0aGlzLl9zdHJlYW1VcmxQcm92aWRlcj10aGlzLmdldFNldHRpbmdzKCkuc3RyZWFtVXJsUHJvdmlkZXJ8fG51bGwsdGhpcy5fbWluUHJlQnVmZmVyTGVuZ3RoRm9yUGxheWJhY2s9NWUzLHRoaXMuX21heEJ1ZmZlckxlbmd0aD0zZTQsdGhpcy5fc3RyZWFtVXJsUmV0cnlUaW1lcj1udWxsLHRoaXMuX3N0cmVhbVVybFRpbWVzRmFpbGVkPTAsdGhpcy5fcGxheWxpc3RSZXRyeVRpbWVyPW51bGwsdGhpcy5fcGxheWxpc3RUaW1lc0ZhaWxlZD0wLHRoaXMuX3BsYXlsaXN0UmVmcmVzaEluUHJvZ3Jlc3M9ITEsdGhpcy5faXNQbGF5bGlzdExvYWRlZD0hMSx0aGlzLl9sb2FkT25Jbml0PSExLHRoaXMuX3NjaGVkdWxpbmdTZWdtZW50SW5kZXg9LTEsdGhpcy5fc2VnbWVudHNEb3dubG9hZGluZz1bXSx0aGlzLl9uZXh0U2NoZWR1bGluZ1RpbWVvdXQ9bnVsbCx0aGlzLl9taW1lVHlwZT1UKCksdGhpcy5fbWltZVR5cGU/KHRoaXMuX21zZVRvb2xraXQ9bmV3IGwodGhpcy5fbG9nZ2VyLHRoaXMuX21pbWVUeXBlKSx0aGlzLl9tc2VUb29sa2l0Lm9uKGwuRXZlbnRzLlNFR01FTlRfQVBQRU5ERUQsdGhpcy5fb25NZWRpYVNvdXJjZUFwcGVuZCksdGhpcy5fbXNlVG9vbGtpdC5vbihsLkV2ZW50cy5TT1VSQ0VfUkVBRFksdGhpcy5fb25NZWRpYVNvdXJjZVJlYWR5KSx0aGlzLl9tc2VUb29sa2l0Lm9uKGwuRXZlbnRzLlNPVVJDRV9ERVNUUk9ZLHRoaXMuX29uTWVkaWFTb3VyY2VEZXN0cm95KSx0aGlzLl9tc2VUb29sa2l0Lm9uKGwuRXZlbnRzLlNPVVJDRV9FUlJPUix0aGlzLl9vbk1lZGlhU291cmNlRXJyb3IpLHRoaXMuX2hsc1Rvb2xraXQ9bmV3IGModGhpcy5fbG9nZ2VyLHRoaXMuZ2V0RGVzY3JpcHRvcigpLnNyYyksdGhpcy5faGxzVG9vbGtpdC5vbihjLkV2ZW50cy5TRUdNRU5UX0xPQURFRCx0aGlzLl9vblNlZ21lbnRMb2FkZWQpLHRoaXMuX2hsc1Rvb2xraXQub24oYy5FdmVudHMuU0VHTUVOVF9QUk9HUkVTUyx0aGlzLl9vblNlZ21lbnRQcm9ncmVzcyksdGhpcy5faGxzVG9vbGtpdC5vbihjLkV2ZW50cy5TRUdNRU5UX0ZBSUxFRCx0aGlzLl9vblNlZ21lbnRGYWlsZWQpLHRoaXMuX2hsc1Rvb2xraXQub24oYy5FdmVudHMuUExBWUxJU1RfTE9BREVELHRoaXMuX29uUGxheWxpc3RMb2FkZWQpLHRoaXMuX2hsc1Rvb2xraXQub24oYy5FdmVudHMuUExBWUxJU1RfRkFJTEVELHRoaXMuX29uUGxheWxpc3RGYWlsZWQpLHRoaXMuX2hsc1Rvb2xraXQub24oYy5FdmVudHMuUExBWUxJU1RfUEFSU0VfRVJST1IsdGhpcy5fb25QbGF5bGlzdEZhaWxlZCksdGhpcy5faHRtbDVBdWRpbz10aGlzLl9tc2VUb29sa2l0Lm1lZGlhKCksdm9pZCB0aGlzLl90b2dnbGVFdmVudExpc3RlbmVycyghMCkpOnZvaWQgdGhpcy5fZXJyb3IoYS5NU0VfTk9UX1NVUFBPUlRFRCl9dmFyIHI9bigxKSxvPW4oNDcpLmJpbmRBbGwscz1uKDM5KSxhPW4oNDMpLHU9bigzNSksaD1uKDQ2KSxjPW4oNTEpLGw9big2NiksZj1uKDY3KSxkPW4oMzgpLHA9big0MiksZz1uKDEyOCksXz1uKDEyOSksbT1uKDE2KSx5PTIwMCx2PTUwMCxFPTMsUz0xZTQsQT1mdW5jdGlvbih0KXt2YXIgZT10L0Usbj12KihNYXRoLnBvdyhNYXRoLkUsZSkvTWF0aC5FKTtyZXR1cm4gbis9TWF0aC5yYW5kb20oKSp5LG4+UyYmKG49Uyksbn0sdz1mdW5jdGlvbigpe3ZhciB0PXt9O3JldHVybiB0W3AubmFtZXMuUFJPVE9DT0xTXT1bZy5ITFNdLHRbcC5uYW1lcy5NSU1FVFlQRVNdPVtfLkhMUyxfLk0zVTgsXy5NUDNdLHRbcC5uYW1lcy5ORUVEU19VUkxfUkVGUkVTSF09ITEsdH0sVD1mdW5jdGlvbigpe3JldHVybiBtLmlzTVNFU3VwcG9ydE1QRUcoKSYmIW0uaXNOYXRpdmVIbHNTdXBwb3J0ZWQoKT9cImF1ZGlvL21wZWdcIjptLmlzTVNFU3VwcG9ydE1QNCgpP1wiYXVkaW8vbXA0XCI6bnVsbH07dC5leHBvcnRzPWkscihpLnByb3RvdHlwZSx1LnByb3RvdHlwZSksaS5wcm90b3R5cGUuX29uTG9hZGVkRGF0YT1mdW5jdGlvbigpe3RoaXMuX2xvZ2dlci5sb2coXCJsb2FkZWRkYXRhIGV2ZW50IGhhbmRsZXJcIiksdGhpcy50cmlnZ2VyKHMuREFUQSl9LGkucHJvdG90eXBlLl9vbkxvYWRlZE1ldGFkYXRhPWZ1bmN0aW9uKCl7dGhpcy5fbG9nZ2VyLmxvZyhcImxvYWRlZG1ldGFkYXRhIGV2ZW50IGhhbmRsZXJcIil9LGkucHJvdG90eXBlLl9tZWRpYXNIYXNQcm9ncmVzc2VkPWZ1bmN0aW9uKCl7dmFyIHQ9ITEsZT1EYXRlLm5vdygpO2lmKHRoaXMuX2xhc3RNZWRpYUNsb2NrQ2hlY2spe3ZhciBuPWUtdGhpcy5fbGFzdE1lZGlhQ2xvY2tDaGVjayxpPXRoaXMuX2N1cnJlbnRQb3NpdGlvbi10aGlzLl9sYXN0TWVkaWFDbG9ja1ZhbHVlO2lmKC4xKm4+aSl7aWYoMD09PWkmJjUwPm4pcmV0dXJuITA7dD0hMH19cmV0dXJuIHRoaXMuX2xhc3RNZWRpYUNsb2NrVmFsdWU9dGhpcy5fY3VycmVudFBvc2l0aW9uLHRoaXMuX2xhc3RNZWRpYUNsb2NrQ2hlY2s9ZSwhdH0saS5wcm90b3R5cGUuX29uUG9zaXRpb25DaGFuZ2U9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5faHRtbDVBdWRpbyYmdGhpcy5nZXRTdGF0ZSgpIT09ZC5TRUVLSU5HPyh0aGlzLl9jdXJyZW50UG9zaXRpb249MWUzKnRoaXMuX2h0bWw1QXVkaW8uY3VycmVudFRpbWUsdGhpcy5nZXRTdGF0ZSgpIT09ZC5QTEFZSU5HfHx0aGlzLl9tZWRpYXNIYXNQcm9ncmVzc2VkKCk/KHRoaXMuZ2V0U3RhdGUoKSE9PWQuUExBWUlORyYmdGhpcy5fbWVkaWFzSGFzUHJvZ3Jlc3NlZCgpJiZ0aGlzLnVwZGF0ZVN0YXRlKGQuUExBWUlORyksdGhpcy5fdHJpZ2dlclBvc2l0aW9uRXZlbnQoKSx0aGlzLl9jdXJyZW50UG9zaXRpb24+PXRoaXMuX2R1cmF0aW9uP3ZvaWQgdGhpcy51cGRhdGVTdGF0ZShkLkVOREVEKTp2b2lkIDApOih0aGlzLl9sb2dnZXIubG9nKFwibWVkaWEgY2xvY2sgY2hlY2sgZmFpbGVkLCBwbGF5aGVhZCBpcyBub3QgYWR2YW5jaW5nIGFueW1vcmVcIiksdm9pZCB0aGlzLnVwZGF0ZVN0YXRlKGQuTE9BRElORykpKTp2b2lkIDB9LGkucHJvdG90eXBlLl9vbk1lZGlhU291cmNlUmVhZHk9ZnVuY3Rpb24oKXt0aGlzLmdldERlc2NyaXB0b3IoKS5kdXJhdGlvbiYmKHRoaXMuX3NldER1cmF0aW9uKHRoaXMuZ2V0RGVzY3JpcHRvcigpLmR1cmF0aW9uKSx0aGlzLl9sb2dnZXIubG9nKFwiZHVyYXRpb24gc2V0IGZyb20gZGVzY3JpcHRvciB0byBcIit0aGlzLl9kdXJhdGlvbikpLHRoaXMudXBkYXRlU3RhdGUoZC5JRExFKSx0aGlzLl9sb2FkT25Jbml0JiZ0aGlzLl9sb2FkSW5pdGlhbFBsYXlsaXN0KCl9LGkucHJvdG90eXBlLl9vbk1lZGlhU291cmNlRGVzdHJveT1mdW5jdGlvbigpe3RoaXMua2lsbCgpfSxpLnByb3RvdHlwZS5fb25NZWRpYVNvdXJjZUVycm9yPWZ1bmN0aW9uKHQpe3RoaXMuX2xvZ2dlci5sb2coXCJNZWRpYVNvdXJjZSBBUEkgZXJyb3I6IFwiK3QubWVzc2FnZSksdGhpcy5fZXJyb3IoYS5NU0VfQkFEX09CSkVDVF9TVEFURSksdGhpcy5raWxsKCl9LGkucHJvdG90eXBlLl9vbk1lZGlhU291cmNlQXBwZW5kPWZ1bmN0aW9uKHQpe3RoaXMuX2xvZ2dlci5sb2coXCJzZWdtZW50IGFwcGVuZGVkOiBcIit0LmluZGV4KSx0aGlzLnRyaWdnZXIocy5EQVRBLHQpLHRoaXMuX2xvYWRlZFBvc2l0aW9uPXQuZW5kUG9zaXRpb24sdGhpcy5fcGxheVJlcXVlc3RlZCYmKHRoaXMuX2xvZ2dlci5sb2coXCJ0cmlnZ2VyaW5nIHBsYXliYWNrIGFmdGVyIGFwcGVuZGluZyBlbm91Z2ggc2VnbWVudHNcIiksdGhpcy5faHRtbDVBdWRpby5wbGF5KHRoaXMuX2N1cnJlbnRQb3NpdGlvbikpfSxpLnByb3RvdHlwZS5fb25TZWdtZW50UHJvZ3Jlc3M9ZnVuY3Rpb24odCl7dmFyIGU9TWF0aC5yb3VuZCh0LmxvYWRlZC90LnRvdGFsKjEwMCk7dGhpcy5fbG9nZ2VyLmxvZyhcInNlZ21lbnQgXCIrdC5pbmRleCtcIiBsb2FkZWQgXCIrdC5sb2FkZWQrXCIgb2YgXCIrdC50b3RhbCtcIiBieXRlcyAoXCIrZStcIiUpXCIpLHRoaXMuX2xvYWRlZFBvc2l0aW9uPXQuZW5kUG9zaXRpb24tdC5kdXJhdGlvbioodC5sb2FkZWQvdC50b3RhbCl9LGkucHJvdG90eXBlLl9vblNlZ21lbnRMb2FkZWQ9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuX21zZVRvb2xraXQuc291cmNlSXNSZWFkeSgpP3ZvaWQgdGhpcy5fYXBwZW5kU2VnbWVudHMoKTp2b2lkIHRoaXMuX2xvZ2dlci5sb2coXCJ3ZSBoYXZlIGJlZW4gZGlzcG9zZWQgd2hpbGUgbG9hZGluZyBhIHNlZ21lbnQsIG5vb3BcIil9LGkucHJvdG90eXBlLl9vblNlZ21lbnRGYWlsZWQ9ZnVuY3Rpb24odCl7c3dpdGNoKHRoaXMuX2xvZ2dlci5sb2coXCJzZWdtZW50IGxvYWRpbmcgZmFpbGVkIGhhbmRsZXI6IFwiK3Quc3RhdHVzKSx0LnN0YXR1cyl7Y2FzZSBjLlN0YXR1cy5OT1RfRk9VTkQ6Y2FzZSBjLlN0YXR1cy5GT1JCSURERU46dGhpcy5fY2FuY2VsTmV4dFNjaGVkdWxpbmcoKSx0aGlzLl9jYW5jZWxBbGxJbkZsaWdodFJlcXVlc3RzKCksdGhpcy5fcmVmcmVzaFBsYXlsaXN0KCk7YnJlYWs7Y2FzZSBjLlN0YXR1cy5USU1FT1VUOnRoaXMudHJpZ2dlcihzLk5FVFdPUktfVElNRU9VVCk7Y2FzZSBjLlN0YXR1cy5TRVJWRVJfRVJST1I6aWYodC5hYm9ydGVkKXt0aGlzLl9sb2dnZXIubG9nKFwiYWJvcnRlZCBzZWdtZW50IGhhcyBiZWVuIHByZXZlbnRlZCBmcm9tIGJlaW5nIHJldHJpZWRcIik7YnJlYWt9dC5zY2hlZHVsZVJldHJ5KEEodC50aW1lc0ZhaWxlZCksdGhpcy5faGxzVG9vbGtpdC5sb2FkU2VnbWVudCx0aGlzLl9obHNUb29sa2l0KTticmVhaztjYXNlIGMuU3RhdHVzLkZBSUxFRDp0aGlzLl9sb2dnZXIubG9nKFwiV0FSTklORzogc2VnbWVudCBsb2FkaW5nIGZhaWxlZCBmb3IgdW5rbm93biByZWFzb24hXCIpO2JyZWFrO2RlZmF1bHQ6dGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBzdGF0dXMgb24gZmFpbGVkIHNlZ21lbnQ6IFwiK3Quc3RhdHVzKX19LGkucHJvdG90eXBlLl9vblBsYXlsaXN0TG9hZGVkPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2xvZ2dlci5sb2coXCJwbGF5bGlzdCBsb2FkZWQgaGFuZGxlclwiKSx0aGlzLl9tc2VUb29sa2l0LnNvdXJjZUlzUmVhZHkoKT8odGhpcy5fcGxheWxpc3RSZWZyZXNoSW5Qcm9ncmVzcyYmKHRoaXMuX2NhbmNlbE5leHRTY2hlZHVsaW5nKCksdGhpcy5fcnVuU2NoZWR1bGluZygpKSx0aGlzLl9wbGF5bGlzdFJlZnJlc2hJblByb2dyZXNzPSExLHRoaXMuX3BsYXlsaXN0VGltZXNGYWlsZWQ9MCx0aGlzLl9pc1BsYXlsaXN0TG9hZGVkPSEwLHRoaXMuX2luc3BlY3RFbmNyeXB0aW9uRGF0YSgpLHRoaXMuX3NldER1cmF0aW9uKHRoaXMuX2hsc1Rvb2xraXQuZ2V0RHVyYXRpb24oKSksdGhpcy5fbG9nZ2VyLmxvZyhcImR1cmF0aW9uIHNldCBmcm9tIHBsYXlsaXN0IGluZm8gdG8gXCIrdGhpcy5fZHVyYXRpb24pLHZvaWQgdGhpcy50cmlnZ2VyKHMuTUVUQURBVEEpKTp2b2lkIHRoaXMuX2xvZ2dlci5sb2coXCJ3ZSBoYXZlIGJlZW4gZGlzcG9zZWQgd2hpbGUgbG9hZGluZyB0aGUgcGxheWxpc3QsIG5vb3BcIil9LGkucHJvdG90eXBlLl9vblBsYXlsaXN0RmFpbGVkPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLl9sb2dnZXIubG9nKFwicGxheWxpc3QgbG9hZGluZyBmYWlsZWQgaGFuZGxlci4gSFRUUCBzdGF0dXMgY29kZSBpcyBcIit0KSx0aGlzLl9tc2VUb29sa2l0LnNvdXJjZUlzUmVhZHkoKT8odGhpcy5fbG9nZ2VyLmxvZyhcIlBsYXlsaXN0IGxvYWRpbmcgZmFpbGVkICBcIit0aGlzLl9wbGF5bGlzdFRpbWVzRmFpbGVkK1wiIHRpbWVzIGJlZm9yZVwiKSx0aGlzLl9wbGF5bGlzdFRpbWVzRmFpbGVkKyssdGhpcy5fcGxheWxpc3RSZXRyeVRpbWVyPXdpbmRvdy5zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7dGhpcy5oYXNTdHJlYW1VcmxQcm92aWRlcigpP3RoaXMuX3JlZnJlc2hQbGF5bGlzdCgpOnRoaXMuX2hsc1Rvb2xraXQudXBkYXRlUGxheWxpc3QoKX0uYmluZCh0aGlzKSxBKHRoaXMuX3BsYXlsaXN0VGltZXNGYWlsZWQpKSx2b2lkKDA9PT10JiZ0aGlzLnRyaWdnZXIocy5ORVRXT1JLX1RJTUVPVVQpKSk6dm9pZCB0aGlzLl9sb2dnZXIubG9nKFwid2UgaGF2ZSBiZWVuIGRpc3Bvc2VkIHdoaWxlIGxvYWRpbmcgdGhlIHBsYXlsaXN0LCBub29wXCIpfSxpLnByb3RvdHlwZS5hZnRlclN0YXRlQ2hhbmdlPWZ1bmN0aW9uKHQsZSl7c3dpdGNoKGUpe2Nhc2UgZC5QTEFZSU5HOnRoaXMuX3J1blNjaGVkdWxpbmcoKTticmVhaztjYXNlIGQuUEFVU0VEOnRoaXMuX2NhbmNlbE5leHRTY2hlZHVsaW5nKCl9fSxpLnByb3RvdHlwZS5fb25IdG1sNU1lZGlhRXZlbnQ9ZnVuY3Rpb24odCl7c3dpdGNoKHRoaXMuX2xvZ2dlci5sb2coJ0hUTUw1IG1lZGlhIGV2ZW50IFwiJyt0LnR5cGUrJ1wiJyksdGhpcy5fd2FpdGluZ1RvUGF1c2U9ITEsdC50eXBlKXtjYXNlXCJwbGF5aW5nXCI6dGhpcy5fcGxheVJlcXVlc3RlZD0hMSx0aGlzLl90cmlnZ2VyUG9zaXRpb25FdmVudCgpLHRoaXMuX3Jlc2V0UG9zaXRpb25UaW1lcighMCksdGhpcy51cGRhdGVTdGF0ZShkLlBMQVlJTkcpO2JyZWFrO2Nhc2VcInBhdXNlXCI6dGhpcy5fdHJpZ2dlclBvc2l0aW9uRXZlbnQoKSx0aGlzLl9yZXNldFBvc2l0aW9uVGltZXIoITEpLHRoaXMudXBkYXRlU3RhdGUoZC5QQVVTRUQpO2JyZWFrO2Nhc2VcImVuZGVkXCI6dGhpcy5fY3VycmVudFBvc2l0aW9uPXRoaXMuX2xvYWRlZFBvc2l0aW9uPXRoaXMuX2R1cmF0aW9uLHRoaXMuX3RyaWdnZXJQb3NpdGlvbkV2ZW50KCksdGhpcy5fcmVzZXRQb3NpdGlvblRpbWVyKCExKSx0aGlzLnVwZGF0ZVN0YXRlKGQuRU5ERUQpO2JyZWFrO2Nhc2VcIndhaXRpbmdcIjppZih0aGlzLmdldFN0YXRlKCk9PT1kLlNFRUtJTkcpYnJlYWs7dGhpcy51cGRhdGVTdGF0ZShkLkxPQURJTkcpO2JyZWFrO2Nhc2VcInNlZWtpbmdcIjp0aGlzLl90cmlnZ2VyUG9zaXRpb25FdmVudCgpLHRoaXMudXBkYXRlU3RhdGUoZC5TRUVLSU5HKTticmVhaztjYXNlXCJzZWVrZWRcIjp0aGlzLl9odG1sNUF1ZGlvLnBhdXNlZD90aGlzLnVwZGF0ZVN0YXRlKGQuUEFVU0VEKTp0aGlzLnVwZGF0ZVN0YXRlKGQuUExBWUlORyksdGhpcy5fb25Qb3NpdGlvbkNoYW5nZSgpO2JyZWFrO2Nhc2VcImVycm9yXCI6dGhpcy5fZXJyb3IodGhpcy5faHRtbDVBdWRpb0Vycm9yQ29kZVRvRXJyb3JJZCgpLCEwKX19LGkucHJvdG90eXBlLl90b2dnbGVFdmVudExpc3RlbmVycz1mdW5jdGlvbih0KXtpZih0aGlzLl9odG1sNUF1ZGlvKXt2YXIgZT10P1wiYWRkRXZlbnRMaXN0ZW5lclwiOlwicmVtb3ZlRXZlbnRMaXN0ZW5lclwiO2guTWVkaWFBUElFdmVudHMuZm9yRWFjaChmdW5jdGlvbih0KXtzd2l0Y2godCl7Y2FzZVwibG9hZGVkZGF0YVwiOnRoaXMuX2h0bWw1QXVkaW9bZV0oXCJsb2FkZWRkYXRhXCIsdGhpcy5fb25Mb2FkZWREYXRhKTticmVhaztjYXNlXCJsb2FkZWRtZXRhZGF0YVwiOnRoaXMuX2h0bWw1QXVkaW9bZV0oXCJsb2FkZWRtZXRhZGF0YVwiLHRoaXMuX29uTG9hZGVkTWV0YWRhdGEpO2JyZWFrO2Nhc2VcInRpbWV1cGRhdGVcIjpkZWZhdWx0OnRoaXMuX2h0bWw1QXVkaW9bZV0odCx0aGlzLl9vbkh0bWw1TWVkaWFFdmVudCl9fSx0aGlzKX19LGkucHJvdG90eXBlLl9sb2FkSW5pdGlhbFBsYXlsaXN0PWZ1bmN0aW9uKCl7dGhpcy51cGRhdGVTdGF0ZShkLkxPQURJTkcpLHRoaXMuX2hsc1Rvb2xraXQudXBkYXRlUGxheWxpc3QoKX0saS5wcm90b3R5cGUuX3JlZnJlc2hQbGF5bGlzdD1mdW5jdGlvbigpe3RoaXMuaGFzU3RyZWFtVXJsUHJvdmlkZXIoKSYmKHRoaXMuX3BsYXlsaXN0UmVmcmVzaGZJblByb2dyZXNzfHwodGhpcy5fcGxheWxpc3RSZWZyZXNoSW5Qcm9ncmVzcz0hMCx0aGlzLl9zdHJlYW1VcmxQcm92aWRlcigpLmRvbmUoZnVuY3Rpb24odCl7dGhpcy5fbG9nZ2VyLmxvZyhcImdvdCBuZXcgTTN1OCBVUkw6IFwiK3QpLHRoaXMuX3N0cmVhbVVybFRpbWVzRmFpbGVkPTAsdGhpcy5faGxzVG9vbGtpdC5zZXRVcmkodCksdGhpcy5faGxzVG9vbGtpdC51cGRhdGVQbGF5bGlzdCgpfS5iaW5kKHRoaXMpKS5mYWlsKGZ1bmN0aW9uKCl7dGhpcy5fbG9nZ2VyLmxvZyhcImZhaWxlZCB0byByZXRyaWV2ZSBzdHJlYW0gVVJMIDooXCIpLHRoaXMuX3N0cmVhbVVybFJldHJ5VGltZXI9d2luZG93LnNldFRpbWVvdXQoZnVuY3Rpb24oKXt0aGlzLl9wbGF5bGlzdFJlZnJlc2hJblByb2dyZXNzPSExLHRoaXMuX3JlZnJlc2hQbGF5bGlzdCgpfS5iaW5kKHRoaXMpLEEoKyt0aGlzLl9zdHJlYW1VcmxUaW1lc0ZhaWxlZCkpfS5iaW5kKHRoaXMpKSkpfSxpLnByb3RvdHlwZS5fc2V0RHVyYXRpb249ZnVuY3Rpb24odCl7dGhpcy5fZHVyYXRpb249dDt0cnl7dGhpcy5fbXNlVG9vbGtpdC5kdXJhdGlvbih0aGlzLl9kdXJhdGlvbil9Y2F0Y2goZSl7dGhpcy5fb25NZWRpYVNvdXJjZUVycm9yKGUpfX0saS5wcm90b3R5cGUuX3Jlc2V0UG9zaXRpb25UaW1lcj1mdW5jdGlvbih0KXt3aW5kb3cuY2xlYXJJbnRlcnZhbCh0aGlzLl9wb3NpdGlvblVwZGF0ZVRpbWVyKSx0JiYodGhpcy5fcG9zaXRpb25VcGRhdGVUaW1lcj13aW5kb3cuc2V0SW50ZXJ2YWwodGhpcy5fb25Qb3NpdGlvbkNoYW5nZSx0aGlzLmdldFNldHRpbmdzKCkudXBkYXRlSW50ZXJ2YWwpKX0saS5wcm90b3R5cGUuX3RyaWdnZXJQb3NpdGlvbkV2ZW50PWZ1bmN0aW9uKCl7dGhpcy50cmlnZ2VyKHMuUE9TSVRJT05fQ0hBTkdFLHRoaXMuX2N1cnJlbnRQb3NpdGlvbix0aGlzLl9sb2FkZWRQb3NpdGlvbix0aGlzLl9kdXJhdGlvbix0aGlzKX0saS5wcm90b3R5cGUuX2luaXRUcmFuc211eGVyT25jZT1mdW5jdGlvbih0LGUpe2lmKCF0aGlzLl90cmFuc211eGVyKXt2YXIgbj10aGlzLl9taW1lVHlwZSE9PXQubWltZVR5cGU/Zi5Db25maWdzLk1QM19UT19GTVA0OmYuQ29uZmlncy5WT0lEO3RoaXMuX3RyYW5zbXV4ZXI9bmV3IGYobiksdGhpcy5fdHJhbnNtdXhlci5vbihcInNlZ21lbnRcIixmdW5jdGlvbih0KXt0aGlzLl9sb2dnZXIubG9nKFwidHJhbnNtdXhlZCBkYXRhIHJlYWR5LCBcIit0LmRhdGEubGVuZ3RoK1wiIGJ5dGVzIGZvciBzZWdtZW50IFwiK3QuaW5kZXgpLGUodCl9LmJpbmQodGhpcykpfX0saS5wcm90b3R5cGUuX3RyYW5zbXV4U2VnbWVudD1mdW5jdGlvbih0LGUpe3RoaXMuX2xvZ2dlci5sb2coXCJ0cmFuc211eGluZyBzZWdtZW50IFwiK3QuaW5kZXgpLHRoaXMuX2luaXRUcmFuc211eGVyT25jZSh0LGUpLHRoaXMuX3RyYW5zbXV4ZXIucHJvY2Vzcyh0KX0saS5wcm90b3R5cGUuX2FwcGVuZFNlZ21lbnRzPWZ1bmN0aW9uKCl7dmFyIHQ9ITA7dGhpcy5fc2VnbWVudHNEb3dubG9hZGluZy5zbGljZSgpLmZvckVhY2goZnVuY3Rpb24oZSl7ZS5pc0NvbXBsZXRlKCkmJnQ/KHRoaXMuX2RlY3J5cHRTZWdtZW50KGUpLHRoaXMuX3RyYW5zbXV4U2VnbWVudChlLGZ1bmN0aW9uKHQpe3RoaXMuX21zZVRvb2xraXQuYXBwZW5kKHQpfS5iaW5kKHRoaXMpKSx0aGlzLl9zZWdtZW50c0Rvd25sb2FkaW5nLnNoaWZ0KCkpOnQ9ITF9LHRoaXMpfSxpLnByb3RvdHlwZS5fY2FuY2VsTmV4dFNjaGVkdWxpbmc9ZnVuY3Rpb24oKXt0aGlzLl9sb2dnZXIubG9nKFwiY2FuY2VsbGluZyBuZXh0IHNjaGVkdWxpbmdcIiksd2luZG93LmNsZWFyVGltZW91dCh0aGlzLl9uZXh0U2NoZWR1bGluZ1RpbWVvdXQpLHRoaXMuX25leHRTY2hlZHVsaW5nVGltZW91dD1udWxsfSxpLnByb3RvdHlwZS5fZ2V0QnVmZmVyVW50aWxUaW1lPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2N1cnJlbnRQb3NpdGlvbit0aGlzLl9tYXhCdWZmZXJMZW5ndGh9LGkucHJvdG90eXBlLl9nZXRDdXJyZW50U2VnbWVudD1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9zY2hlZHVsaW5nU2VnbWVudEluZGV4PjA/dGhpcy5faGxzVG9vbGtpdC5nZXRTZWdtZW50KHRoaXMuX3NjaGVkdWxpbmdTZWdtZW50SW5kZXgpOnRoaXMuX2hsc1Rvb2xraXQuZ2V0U2VnbWVudEZvclRpbWUodGhpcy5fY3VycmVudFBvc2l0aW9uKX0saS5wcm90b3R5cGUuX3J1blNjaGVkdWxpbmc9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KCl7dmFyIGU9ITEsbj10aGlzLl9nZXRCdWZmZXJVbnRpbFRpbWUoKSxpPXRoaXMuX2dldEN1cnJlbnRTZWdtZW50KCkscj1pP2kuZHVyYXRpb246TWF0aC5JbmZpbml0eTtpZih0aGlzLl9sb2dnZXIubG9nKFwic2NoZWR1bGluZyBuZXh0IHJlcXVlc3RzLCBjdXJyZW50IGJ1ZmZlci11bnRpbCB0aW1lOiBcIituK1wiIG1zXCIpLCFpKXJldHVybiB2b2lkIHRoaXMuX2xvZ2dlci5sb2coXCJubyBzZWdtZW50IHRvIHNjaGVkdWxlLCBjbG9zaW5nIGxvb3BcIik7Zm9yKHRoaXMuX2xvZ2dlci5sb2coXCJjdXJyZW50IHNlZ21lbnQgaW5kZXg6IFwiK2kuaW5kZXgpO2kuZW5kUG9zaXRpb248PW47KXtpZih0aGlzLl9sb2dnZXIubG9nKFwic2NoZWR1bGluZyBsb29wIGF0IFwiK3RoaXMuX2N1cnJlbnRQb3NpdGlvbitcIiBtcywgY3VycmVudCBzZWdtZW50IFwiK2kuaW5kZXgpLHRoaXMuX3JlcXVlc3RTZWdtZW50KGkpLGkuaXNMYXN0KXtlPSEwLHRoaXMuX2xvZ2dlci5sb2coXCJlbmQgb2YgcGxheWxpc3QgcmVhY2hlZFwiKTticmVha310aGlzLl9zY2hlZHVsaW5nU2VnbWVudEluZGV4PWkuaW5kZXgrMSxpPXRoaXMuX2hsc1Rvb2xraXQuZ2V0U2VnbWVudCh0aGlzLl9zY2hlZHVsaW5nU2VnbWVudEluZGV4KX10aGlzLl9pc0luT25lT2ZTdGF0ZXMoZC5ERUFELGQuUEFVU0VEKXx8ZT8odGhpcy5fbG9nZ2VyLmxvZyhcIm5vdCByZS1zY2hlZHVsaW5nXCIpLHRoaXMuX25leHRTY2hlZHVsaW5nVGltZW91dD1udWxsKToodGhpcy5fbG9nZ2VyLmxvZyhcInRpbWluZyBuZXh0IGNoZWNrIGZvciBtb3JlIGRhdGEgaW4gXCIrcitcIiBtc1wiKSx0aGlzLl9uZXh0U2NoZWR1bGluZ1RpbWVvdXQ9d2luZG93LnNldFRpbWVvdXQodC5iaW5kKHRoaXMpLHIpKX10aGlzLl9uZXh0U2NoZWR1bGluZ1RpbWVvdXR8fHQuY2FsbCh0aGlzKX0saS5wcm90b3R5cGUuX2NhbmNlbEFsbEluRmxpZ2h0UmVxdWVzdHM9ZnVuY3Rpb24oKXt0aGlzLl9zY2hlZHVsaW5nU2VnbWVudEluZGV4PS0xLHRoaXMuX3NlZ21lbnRzRG93bmxvYWRpbmcuZm9yRWFjaChmdW5jdGlvbih0KXt0LmlzQ29tcGxldGUoKXx8dC5jYW5jZWwoKX0pLHRoaXMuX3NlZ21lbnRzRG93bmxvYWRpbmc9W119LGkucHJvdG90eXBlLl9yZXF1ZXN0U2VnbWVudD1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5fc2VnbWVudHNEb3dubG9hZGluZy5wdXNoKHQpLHQuaXNDb21wbGV0ZSgpPyh0aGlzLl9sb2dnZXIubG9nKFwicmVxdWVzdGVkIGRhdGEgaXMgYWxyZWFkeSBsb2FkZWQgZnJvbSBzZWdtZW50IFwiK3QuaW5kZXgpLHZvaWQgdGhpcy5fb25TZWdtZW50TG9hZGVkKHQpKTp0Lmhhc0JlZW5SZXF1ZXN0ZWQoKXx8dC5oYXNGYWlsZWQoKT92b2lkIHRoaXMuX2xvZ2dlci5sb2coXCJzZWdtZW50IGFscmVhZHkgaW4gZmxpZ2h0IG9yIGZhaWxlZCAod2lsbCByZXRyeSk6IFwiK3QudGltZXNGYWlsZWQrXCIgdGltZXNcIik6dm9pZCB0aGlzLl9obHNUb29sa2l0LmxvYWRTZWdtZW50KHQpfSxpLnByb3RvdHlwZS5fZGVjcnlwdFNlZ21lbnQ9ZnVuY3Rpb24odCl7dGhpcy5faGxzVG9vbGtpdC5pc0FFUzEyOEVuY3J5cHRlZCgpJiZ0aGlzLl9obHNUb29sa2l0LmRlY3J5cHRTZWdtZW50QUVTMTI4KHQpfSxpLnByb3RvdHlwZS5faW5zcGVjdEVuY3J5cHRpb25EYXRhPWZ1bmN0aW9uKCl7dGhpcy5faGxzVG9vbGtpdC5pc0FFUzEyOEVuY3J5cHRlZCgpJiYodGhpcy5fbG9nZ2VyLmxvZyhcImdvdCBrZXkgb2YgYnl0ZSBsZW5ndGggXCIrdGhpcy5faGxzVG9vbGtpdC5nZXRFbmNyeXB0aW9uS2V5KCkuYnl0ZUxlbmd0aCksdGhpcy5faGxzVG9vbGtpdC5nZXRFbmNyeXB0aW9uSXYoKT90aGlzLl9sb2dnZXIubG9nKFwiZ290IElWIG9mIGJ5dGUgbGVuZ3RoIFwiK3RoaXMuX2hsc1Rvb2xraXQuZ2V0RW5jcnlwdGlvbkl2KCkuYnl0ZUxlbmd0aCk6dGhpcy5fbG9nZ2VyLmxvZyhcIm5vIElWIGZvdW5kIGluIGhlYWRlciwgd2lsbCB1c2UgcGVyLXNlZ21lbnQtaW5kZXggSVZcIikpfSxpLnByb3RvdHlwZS5faHRtbDVBdWRpb0Vycm9yQ29kZVRvRXJyb3JJZD1mdW5jdGlvbigpe3JldHVybnsxOmEuSFRNTDVfQVVESU9fQUJPUlRFRCwyOmEuSFRNTDVfQVVESU9fTkVUV09SSywzOmEuSFRNTDVfQVVESU9fREVDT0RFLDQ6YS5IVE1MNV9BVURJT19TUkNfTk9UX1NVUFBPUlRFRH1bdGhpcy5faHRtbDVBdWRpby5lcnJvci5jb2RlXX0saS5wcm90b3R5cGUuX2Vycm9yPWZ1bmN0aW9uKHQsZSl7dGhpcy5fZXJyb3JJRD10LHRoaXMuX2Vycm9yTWVzc2FnZT10aGlzLl9nZXRFcnJvck1lc3NhZ2UodGhpcy5fZXJyb3JJRCksZSYmdGhpcy5faHRtbDVBdWRpby5lcnJvciYmKHRoaXMuX2Vycm9yTWVzc2FnZSs9XCIgKG5hdGl2ZSBtZXNzYWdlOiBcIit0aGlzLl9odG1sNUF1ZGlvLmVycm9yLm1lc3NhZ2UrXCIpXCIpLHRoaXMuX2xvZ2dlci5sb2codGhpcy5fZXJyb3JJRCtcIiBcIit0aGlzLl9lcnJvck1lc3NhZ2UpLHRoaXMudXBkYXRlU3RhdGUoZC5FUlJPUiksdGhpcy5fdG9nZ2xlRXZlbnRMaXN0ZW5lcnMoITEpfSxpLnByb3RvdHlwZS5fZ2V0RXJyb3JNZXNzYWdlPWZ1bmN0aW9uKHQpe3ZhciBlPXt9O3JldHVybiBlW2EuTVNFX05PVF9TVVBQT1JURURdPVwiVGhlIGJyb3dzZXIgZG9lcyBub3Qgc3VwcG9ydCBNZWRpYVNvdXJjZSBBUElcIixlW2EuTVNFX0JBRF9PQkpFQ1RfU1RBVEVdPVwiTWVkaWFTb3VyY2UgQVBJIGhhcyB0aHJvd24gYW4gZXhjZXB0aW9uXCIsZVt0XT9cIkVycm9yOiBcIit0K1wiIChcIitlW3RdK1wiKVwiOlwiRXJyb3I6IFwiK3R9LGkucHJvdG90eXBlLnNldFZvbHVtZT1mdW5jdGlvbih0KXt0aGlzLl9odG1sNUF1ZGlvJiYodGhpcy5faHRtbDVBdWRpby52b2x1bWU9dCl9LGkucHJvdG90eXBlLmdldFZvbHVtZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9odG1sNUF1ZGlvP3RoaXMuX2h0bWw1QXVkaW8udm9sdW1lOjF9LGkucHJvdG90eXBlLnNldE11dGU9ZnVuY3Rpb24odCl7dGhpcy5faHRtbDVBdWRpbyYmKHRoaXMuX2h0bWw1QXVkaW8ubXV0ZWQ9dCl9LGkucHJvdG90eXBlLmdldE11dGU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5faHRtbDVBdWRpbz90aGlzLl9odG1sNUF1ZGlvLm11dGVkOiExfSxpLnByb3RvdHlwZS5nZXRFcnJvcklEPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2Vycm9ySUR9LGkucHJvdG90eXBlLnBsYXk9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuX2lzSW5PbmVPZlN0YXRlcyhkLkVSUk9SLGQuREVBRCk/dm9pZCB0aGlzLl9sb2dnZXIubG9nKFwicGxheSBjYWxsZWQgYnV0IHN0YXRlIGlzIEVSUk9SIG9yIERFQURcIik6dGhpcy5faXNJbk9uZU9mU3RhdGVzKGQuSURMRSxkLklOSVRJQUxJWkUpPyh0PXR8fDAsdGhpcy5fbG9nZ2VyLmxvZyhcInBsYXkgZnJvbSBcIit0KSx0aGlzLl9wbGF5UmVxdWVzdGVkPSEwLHRoaXMuc2Vlayh0KSx0aGlzLmdldFN0YXRlKCk9PT1kLklOSVRJQUxJWkU/dm9pZCh0aGlzLl9sb2FkT25Jbml0PSEwKTp2b2lkIHRoaXMuX2xvYWRJbml0aWFsUGxheWxpc3QoKSk6dm9pZCB0aGlzLnJlc3VtZSgpfSxpLnByb3RvdHlwZS5wYXVzZT1mdW5jdGlvbigpe3RoaXMuX2h0bWw1QXVkaW8mJih0aGlzLl9wbGF5UmVxdWVzdGVkPSExLHRoaXMuX2h0bWw1QXVkaW8ucGF1c2UoKSl9LGkucHJvdG90eXBlLnNlZWs9ZnVuY3Rpb24odCl7aWYoIXRoaXMuX2lzSW5PbmVPZlN0YXRlcyhkLkVSUk9SLGQuREVBRCkpe2lmKCF0aGlzLl9pc1BsYXlsaXN0TG9hZGVkKXJldHVybiB2b2lkIHRoaXMub25jZShzLk1FVEFEQVRBLGZ1bmN0aW9uKCl7dGhpcy5zZWVrKHQpfS5iaW5kKHRoaXMpKTtpZih0PnRoaXMuX2R1cmF0aW9uKXJldHVybiB2b2lkIHRoaXMuX2xvZ2dlci5sb2coXCJjYW4gbm90IHNlZWsgdG8gcG9zaXRpb24gb3ZlciBkdXJhdGlvblwiKTt0aGlzLl9sb2dnZXIubG9nKFwic2VlayB0byBcIit0K1wiIG1zXCIpLHRoaXMudXBkYXRlU3RhdGUoZC5TRUVLSU5HKSx0aGlzLl9sYXN0TWVkaWFDbG9ja0NoZWNrPW51bGwsdGhpcy5fY3VycmVudFBvc2l0aW9uPXQ7dHJ5e3RoaXMuX2h0bWw1QXVkaW8uY3VycmVudFRpbWU9dC8xZTN9Y2F0Y2goZSl7dGhpcy5fbG9nZ2VyLmxvZyhcImVycm9yIHNlZWtpbmc6IFwiK2UubWVzc2FnZSl9dGhpcy5fY2FuY2VsQWxsSW5GbGlnaHRSZXF1ZXN0cygpLHRoaXMuX2NhbmNlbE5leHRTY2hlZHVsaW5nKCksdGhpcy5fcnVuU2NoZWR1bGluZygpfX0saS5wcm90b3R5cGUucmVzdW1lPWZ1bmN0aW9uKCl7dGhpcy5faHRtbDVBdWRpbyYmKHRoaXMuX2xvZ2dlci5sb2coXCJyZXN1bWUgZnJvbSBcIit0aGlzLl9jdXJyZW50UG9zaXRpb24pLHRoaXMuX2h0bWw1QXVkaW8ucGxheSgxZTMqdGhpcy5fY3VycmVudFBvc2l0aW9uKSl9LGkucHJvdG90eXBlLmtpbGw9ZnVuY3Rpb24oKXt0aGlzLmdldFN0YXRlKCkhPT1kLkRFQUQmJih0aGlzLl9sb2dnZXIubG9nKFwia2lsbFwiKSx0aGlzLl9yZXNldFBvc2l0aW9uVGltZXIoITEpLHRoaXMuX2NhbmNlbE5leHRTY2hlZHVsaW5nKCksdGhpcy5fY2FuY2VsQWxsSW5GbGlnaHRSZXF1ZXN0cygpLHdpbmRvdy5jbGVhclRpbWVvdXQodGhpcy5fcGxheWxpc3RSZXRyeVRpbWVyKSx3aW5kb3cuY2xlYXJUaW1lb3V0KHRoaXMuX3N0cmVhbVVybFJldHJ5VGltZXIpLHRoaXMuX3BsYXlSZXF1ZXN0ZWQ9ITEsdGhpcy5fdG9nZ2xlRXZlbnRMaXN0ZW5lcnMoITEpLHRoaXMuX2h0bWw1QXVkaW8ucGF1c2UoKSx0aGlzLnVwZGF0ZVN0YXRlKGQuREVBRCkpfSxpLnByb3RvdHlwZS5nZXRFcnJvck1lc3NhZ2U9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZXJyb3JNZXNzYWdlfSxpLnByb3RvdHlwZS5oYXNTdHJlYW1VcmxQcm92aWRlcj1mdW5jdGlvbigpe3JldHVybiEhdGhpcy5fc3RyZWFtVXJsUHJvdmlkZXJ9fSxmdW5jdGlvbih0LGUsbil7dmFyIGkscj1uKDEpLG89big1Mikscz1uKDU4KSxhPW51bGwsdT1uKDM2KSxoPXtORVc6XCJuZXdcIixSRVFVRVNURUQ6XCJyZXF1ZXN0ZWRcIixDT01QTEVURTpcImNvbXBsZXRlXCIsVElNRU9VVDpcInRpbWVvdXRcIixGT1JCSURERU46XCJmb3JiaWRkZW5cIixOT1RfRk9VTkQ6XCJub3QtZm91bmRcIixTRVJWRVJfRVJST1I6XCJzZXJ2ZXItZXJyb3JcIixGQUlMRUQ6XCJmYWlsZWRcIn0sYz17RklSU1Q6XCIjRVhUTTNVXCIsUExBWUxJU1Q6XCIjRVhULVgtU1RSRUFNLUlORjpcIixTRUdNRU5UOlwiI0VYVElORjpcIixFTkRfVEFHOlwiI0VYVC1YLUVORExJU1RcIixFTkNSWVBUSU9OOlwiI0VYVC1YLUtFWTpcIn07dC5leHBvcnRzPWk9ZnVuY3Rpb24odCxlKXt0aGlzLl9sb2dnZXI9dCx0aGlzLl9kdXJhdGlvbj0wLHRoaXMuc2V0VXJpKGUpfSxpLkV2ZW50cz17UExBWUxJU1RfTE9BREVEOlwicGxheWxpc3QtbG9hZGVkXCIsUExBWUxJU1RfUEFSU0VfRVJST1I6XCJwbGF5bGlzdC1wYXJzZS1lcnJvclwiLFBMQVlMSVNUX0ZBSUxFRDpcInBsYXlsaXN0LWZhaWxlZFwiLFNFR01FTlRfTE9BREVEOlwic2VnbWVudC1sb2FkZWRcIixTRUdNRU5UX1BST0dSRVNTOlwic2VnbWVudC1wcm9ncmVzc1wiLFNFR01FTlRfRkFJTEVEOlwic2VnbWVudC1mYWlsZWRcIixTRUdNRU5UX0NBTkNFTEVEOlwic2VnbWVudC1jYW5jZWxlZFwifSxpLlN0YXR1cz1oLHIoaS5wcm90b3R5cGUsdSksaS5TZWdtZW50PWZ1bmN0aW9uKHQsZSxuLGksbyl7cih0aGlzLHt0b29sa2l0OnQsdXJpOmUsc3RhcnRQb3NpdGlvbjpuLGVuZFBvc2l0aW9uOm4raSxkdXJhdGlvbjppLGluZGV4Om8sZGF0YTpudWxsLHN0YXR1czpoLk5FVyxpc0xhc3Q6ITEsdGltZXNGYWlsZWQ6MCxsb2FkZWQ6MCx0b3RhbDotMSxhYm9ydGVkOiExLHhocjpudWxsLG1pbWVUeXBlOlwiYXVkaW8vbXBlZ1wifSksdGhpcy5fbG9nZ2VyPXQuX2xvZ2dlcn0saS5TZWdtZW50LnByb3RvdHlwZS5jb250YWluc1RpbWU9ZnVuY3Rpb24odCl7cmV0dXJuIHQ+PXRoaXMuc3RhcnRQb3NpdGlvbiYmdDw9dGhpcy5lbmRQb3NpdGlvbn0saS5TZWdtZW50LnByb3RvdHlwZS5pc0NvbXBsZXRlPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc3RhdHVzPT09aC5DT01QTEVURX0saS5TZWdtZW50LnByb3RvdHlwZS5oYXNGYWlsZWQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zdGF0dXM9PT1oLlRJTUVPVVR8fHRoaXMuc3RhdHVzPT09aC5GT1JCSURERU58fHRoaXMuc3RhdHVzPT09aC5OT1RfRk9VTkR8fHRoaXMuc3RhdHVzPT09aC5TRVJWRVJfRVJST1J8fHRoaXMuc3RhdHVzPT09aC5GQUlMRUR9LGkuU2VnbWVudC5wcm90b3R5cGUuaXNOZXc9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zdGF0dXM9PT1oLk5FV30saS5TZWdtZW50LnByb3RvdHlwZS5oYXNCZWVuUmVxdWVzdGVkPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc3RhdHVzPT09aC5SRVFVRVNURUR9LGkuU2VnbWVudC5wcm90b3R5cGUuc2NoZWR1bGVSZXRyeT1mdW5jdGlvbih0LGUsbil7dmFyIGk9dGhpczt0aGlzLl9yZXRyeVRpbWVyPXdpbmRvdy5zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7ZS5jYWxsKG4saSl9LHQpfSxpLlNlZ21lbnQucHJvdG90eXBlLmNhbmNlbD1mdW5jdGlvbigpe3RoaXMuX2xvZ2dlci5sb2coXCJzZWdtZW50IGNhbmNlbGxlZCwgY2xlYXJpbmcgdGltZW91dDogXCIrdGhpcy5pbmRleCksd2luZG93LmNsZWFyVGltZW91dCh0aGlzLl9yZXRyeVRpbWVyKSx0aGlzLnhociYmKHRoaXMuX2xvZ2dlci5sb2coXCJ3aWxsIGFib3J0ICYgcmVzZXQgc2VnbWVudDogXCIrdGhpcy5pbmRleCksdGhpcy5zdGF0dXM9aC5ORVcsdGhpcy5hYm9ydGVkPSEwLHRoaXMuZGF0YT1udWxsLHRoaXMudGltZXNGYWlsZWQ9MCx0aGlzLnhoci5hYm9ydCgpLHRoaXMueGhyPW51bGwsdGhpcy50b29sa2l0LnRyaWdnZXIoaS5FdmVudHMuU0VHTUVOVF9DQU5DRUxFRCx0aGlzKSk7XG59LGkucHJvdG90eXBlLnNldFVyaT1mdW5jdGlvbih0KXt2YXIgZT10aGlzLl91cmk9dDtlLmluZGV4T2YoXCI/XCIpPi0xJiYoZT1lLnN1YnN0cigwLGUuaW5kZXhPZihcIj9cIikpKSx0aGlzLl9iYXNlVVJJPWUuc3Vic3RyKDAsZS5sYXN0SW5kZXhPZihcIi9cIikrMSl9LGkucHJvdG90eXBlLnVwZGF0ZVBsYXlsaXN0PWZ1bmN0aW9uKCl7dmFyIHQ9ITEsZT1uZXcgWE1MSHR0cFJlcXVlc3Q7ZS5vcGVuKFwiR0VUXCIsdGhpcy5fdXJpLCEwKSxlLnJlc3BvbnNlVHlwZT1cInRleHRcIix0aGlzLl9sb2dnZXIubG9nKFwiZG93bmxvYWRpbmcgcGxheWxpc3RcIik7dmFyIG49ZnVuY3Rpb24obil7dHx8KHQ9ITAsdGhpcy50cmlnZ2VyKGkuRXZlbnRzLlBMQVlMSVNUX0ZBSUxFRCxlLnN0YXR1cykpfS5iaW5kKHRoaXMpO2Uub25sb2FkPWZ1bmN0aW9uKHQpe3JldHVybiAyMDAhPT1lLnN0YXR1cz92b2lkIG4oKToodGhpcy5fc2VnbWVudHM9W10sdGhpcy5fZHVyYXRpb249MCx0aGlzLl9wYXJzZVBsYXlsaXN0KGUucmVzcG9uc2VUZXh0KT8odGhpcy5nZXRMYXN0U2VnbWVudCgpLmlzTGFzdD0hMCx0aGlzLl9sb2dnZXIubG9nKFwicGxheWxpc3QgZG93bmxvYWQgY29tcGxldGVcIiksdm9pZCB0aGlzLl9yZXRyaWV2ZUVuY3J5cHRpb25LZXkoZnVuY3Rpb24oKXt0aGlzLnRyaWdnZXIoaS5FdmVudHMuUExBWUxJU1RfTE9BREVEKX0pKToodGhpcy5fbG9nZ2VyLmxvZyhcImVycm9yIHBhcnNpbmcgcGxheWxpc3RcIiksdm9pZCB0aGlzLnRyaWdnZXIoaS5FdmVudHMuUExBWUxJU1RfUEFSU0VfRVJST1IpKSl9LmJpbmQodGhpcyksZS5vbmVycm9yPWZ1bmN0aW9uKHQpe24odCl9LmJpbmQodGhpcyksZS5zZW5kKCl9LGkucHJvdG90eXBlLl9wYXJzZVBsYXlsaXN0PWZ1bmN0aW9uKHQpe2Zvcih2YXIgZSxuLHIsbz10LnNwbGl0KFwiXFxuXCIpLHM9ITEsYT0wLHU9MDthPG8ubGVuZ3RoOyllPW9bYSsrXSwwPT09ZS5pbmRleE9mKGMuU0VHTUVOVCk/KHI9MWUzKk51bWJlcihlLnN1YnN0cig4LGUuaW5kZXhPZihcIixcIiktOCkpLG49dGhpcy5fY3JlYXRlU2VnbWVudFVSTChvW2FdKSx0aGlzLl9hZGRTZWdtZW50KG5ldyBpLlNlZ21lbnQodGhpcyxuLHRoaXMuX2R1cmF0aW9uLHIsdSsrKSksYSsrKTowPT09ZS5pbmRleE9mKGMuRU5DUllQVElPTik/dGhpcy5fcGFyc2VQbGF5bGlzdEVuY3J5cHRpb25IZWFkZXIoZSk6MD09PWUuaW5kZXhPZihjLkVORF9UQUcpJiYocz0hMCk7cmV0dXJuISgwPT09dGhpcy5nZXROdW1TZWdtZW50cygpfHwhcyl9LGkucHJvdG90eXBlLl9hZGRTZWdtZW50PWZ1bmN0aW9uKHQpe3RoaXMuX3NlZ21lbnRzLnB1c2godCksdGhpcy5fZHVyYXRpb24rPXQuZHVyYXRpb259LGkucHJvdG90eXBlLl9wYXJzZVBsYXlsaXN0RW5jcnlwdGlvbkhlYWRlcj1mdW5jdGlvbih0KXt2YXIgZSxuLGkscj10LnN1YnN0cihjLkVOQ1JZUFRJT04ubGVuZ3RoKS5zcGxpdChcIixcIik7aWYocyhyLGZ1bmN0aW9uKHQpe3QuaW5kZXhPZihcIk1FVEhPRFwiKT49MD9uPXQuc3BsaXQoXCI9XCIpWzFdOnQuaW5kZXhPZihcIlVSSVwiKT49MD9lPXQuc3BsaXQoXCI9XCIpWzFdOnQuaW5kZXhPZihcIklWXCIpPj0wJiYoaT10LnNwbGl0KFwiPVwiKVsxXSl9KSwhKG4mJmUmJm4ubGVuZ3RoJiZlLmxlbmd0aCkpdGhyb3cgbmV3IEVycm9yKFwiRmFpbGVkIHRvIHBhcnNlIE0zVTggZW5jcnlwdGlvbiBoZWFkZXJcIik7bj1uLnRyaW0oKSxlPWUudHJpbSgpLnJlcGxhY2UoL1wiL2csXCJcIiksdGhpcy5fZW5jcnlwdGlvbk1ldGhvZD1uLHRoaXMuX2VuY3J5cHRpb25LZXlVcmk9ZSxpJiZpLmxlbmd0aD8odGhpcy5fZW5jcnlwdGlvbkl2SGV4U3RyaW5nPWkudHJpbSgpLHRoaXMuX3BhcnNlRW5jcnlwdGlvbkl2SGV4U3RyaW5nKCkpOnRoaXMuX2VuY3J5cHRpb25Jdj1udWxsfSxpLnByb3RvdHlwZS5fcGFyc2VFbmNyeXB0aW9uSXZIZXhTdHJpbmc9ZnVuY3Rpb24oKXt2YXIgdCxlPXRoaXMuX2VuY3J5cHRpb25JdkhleFN0cmluZy5yZXBsYWNlKFwiMHhcIixcIlwiKSxuPW5ldyBVaW50MTZBcnJheSg4KSxpPTA7aWYoZS5sZW5ndGglNCE9PTApdGhyb3cgbmV3IEVycm9yKFwiRmFpbGVkIHRvIHBhcnNlIE0zVTggZW5jcnlwdGlvbiBJViAobGVuZ3RoIGlzIG5vdCBtdWx0aXBsZSBvZiA0KVwiKTtmb3IoO2k8ZS5sZW5ndGg7aSs9NCl7aWYodD1wYXJzZUludChlLnN1YnN0cihpLDQpLDE2KSxpc05hTih0KSl0aHJvdyBuZXcgRXJyb3IoXCJGYWlsZWQgdG8gcGFyc2UgaGV4IG51bWJlciBpbiBJViBzdHJpbmdcIik7bltpLzRdPXR9dGhpcy5fZW5jcnlwdGlvbkl2PW59LGkucHJvdG90eXBlLl9lbmNyeXB0aW9uSXZGb3JTZWdtZW50PWZ1bmN0aW9uKHQpe3ZhciBlPW5ldyBEYXRhVmlldyhuZXcgQXJyYXlCdWZmZXIoMTYpKTtyZXR1cm4gZS5zZXRVaW50MzIoMCx0LmluZGV4LCEwKSxlLmJ1ZmZlcn0saS5wcm90b3R5cGUuX3JldHJpZXZlRW5jcnlwdGlvbktleT1mdW5jdGlvbih0KXtpZih0KXtpZighdGhpcy5fZW5jcnlwdGlvbktleVVyaSlyZXR1cm4gdm9pZCB0LmNhbGwodGhpcyk7dmFyIGU9dGhpcy5fZW5jcnlwdGlvbktleVVyaSxuPW5ldyBYTUxIdHRwUmVxdWVzdDtuLm9wZW4oXCJHRVRcIixlLCEwKSxuLnJlc3BvbnNlVHlwZT1cImFycmF5YnVmZmVyXCIsbi5vbmxvYWQ9byhmdW5jdGlvbihpKXsyMDA9PT1uLnN0YXR1cz90aGlzLl9lbmNyeXB0aW9uS2V5PW5ldyBVaW50OEFycmF5KG4ucmVzcG9uc2UpOnRoaXMuX2xvZ2dlci5sb2coXCJGYWlsZWQgdG8gcmV0cmlldmUgZW5jcnlwdGlvbiBrZXkgZnJvbSBcIitlK1wiLCByZXR1cm5lZCBzdGF0dXMgXCIrbi5zdGF0dXMpLHQuY2FsbCh0aGlzKX0sdGhpcyksbi5zZW5kKCksdGhpcy5fbG9nZ2VyLmxvZyhcIkRvd25sb2FkaW5nIGVuY3J5cHRpb24ga2V5IGZyb20gXCIrZSl9fSxpLnByb3RvdHlwZS5fcmVtb3ZlRW5jcnlwdGlvblBhZGRpbmdCeXRlcz1mdW5jdGlvbih0KXt2YXIgZT10LmRhdGFbdC5kYXRhLmJ5dGVMZW5ndGgtMV07ZT8odGhpcy5fbG9nZ2VyLmxvZyhcIkRldGVjdGVkIFBLQ1M3IHBhZGRpbmcgbGVuZ3RoIG9mIFwiK2UrXCIgYnl0ZXMsIHNsaWNpbmcgc2VnbWVudC5cIiksdC5kYXRhPXQuZGF0YS5zdWJhcnJheSgwLHQuZGF0YS5ieXRlTGVuZ3RoLWUpKTp0aGlzLl9sb2dnZXIubG9nKFwiTm8gcGFkZGluZyBkZXRlY3RlZCAobGFzdCBieXRlIGlzIHplcm8pXCIpfSxpLnByb3RvdHlwZS5kZWNyeXB0U2VnbWVudEFFUzEyOD1mdW5jdGlvbih0KXtpZih0aGlzLl9sb2dnZXIubG9nKFwiRGVjcnlwdGluZyBBRVMtMTI4IGN5cGhlcmVkIHNlZ21lbnQgLi4uXCIpLCFhKXRocm93IG5ldyBFcnJvcihcIkFFUyBkZWNyeXB0aW9uIG5vdCBidWlsdC1pblwiKTt2YXIgZT1hLmNpcGhlci5jcmVhdGVEZWNpcGhlcihcIkFFUy1DQkNcIixhLnV0aWwuY3JlYXRlQnVmZmVyKHRoaXMuX2VuY3J5cHRpb25LZXkpKSxuPTAsaT10LmRhdGEuYnl0ZUxlbmd0aCxyPXRoaXMuX2VuY3J5cHRpb25Jdnx8dGhpcy5fZW5jcnlwdGlvbkl2Rm9yU2VnbWVudCh0KTtmb3IodGhpcy5fbG9nZ2VyLmxvZyhcIlVzaW5nIElWIC0+XCIpLGUuc3RhcnQoe2l2OmEudXRpbC5jcmVhdGVCdWZmZXIocil9KSxlLnVwZGF0ZShhLnV0aWwuY3JlYXRlQnVmZmVyKHQuZGF0YSkpLGUuZmluaXNoKCksdC5kYXRhPW5ldyBVaW50OEFycmF5KGkpO2k+bjtuKyspdC5kYXRhW25dPWUub3V0cHV0LmdldEJ5dGUoKTt0aGlzLl9yZW1vdmVFbmNyeXB0aW9uUGFkZGluZ0J5dGVzKHQpfSxpLnByb3RvdHlwZS5pc0FFUzEyOEVuY3J5cHRlZD1mdW5jdGlvbigpe3JldHVyblwiQUVTLTEyOFwiPT09dGhpcy5fZW5jcnlwdGlvbk1ldGhvZH0saS5wcm90b3R5cGUuZ2V0RW5jcnlwdGlvbktleVVyaT1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9lbmNyeXB0aW9uS2V5VXJpfSxpLnByb3RvdHlwZS5nZXRFbmNyeXB0aW9uSXY9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZW5jcnlwdGlvbkl2fSxpLnByb3RvdHlwZS5nZXRFbmNyeXB0aW9uS2V5PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2VuY3J5cHRpb25LZXl9LGkucHJvdG90eXBlLl9jcmVhdGVTZWdtZW50VVJMPWZ1bmN0aW9uKHQpe3JldHVyblwiaHR0cDovL1wiPT09dC5zdWJzdHIoMCw3KXx8XCJodHRwczovL1wiPT09dC5zdWJzdHIoMCw4KXx8XCIvXCI9PT10LnN1YnN0cigwLDEpP3Q6dGhpcy5fYmFzZVVSSSt0fSxpLnByb3RvdHlwZS5faGFuZGxlTG9hZFNlZ21lbnRGYWlsdXJlPWZ1bmN0aW9uKHQsZSxuKXt0LmFib3J0ZWR8fCh0aGlzLl9sb2dnZXIubG9nKFwic2VnbWVudCBhYm9ydGVkOiBcIit0LmFib3J0ZWQpLHRoaXMuX2xvZ2dlci5sb2coXCJzZWdtZW50IGxvYWRpbmcgZmFpbHVyZTogSFRUUCByZXNwb25zZSBzdGF0dXM6IFwiK2Uuc3RhdHVzKSwwPT09ZS5zdGF0dXM/dC5zdGF0dXM9aC5USU1FT1VUOjQwMz09PWUuc3RhdHVzP3Quc3RhdHVzPWguRk9SQklEREVOOjQwND09PWUuc3RhdHVzP3Quc3RhdHVzPWguTk9UX0ZPVU5EOmUuc3RhdHVzPj01MDA/dC5zdGF0dXM9aC5TRVJWRVJfRVJST1I6dC5zdGF0dXM9aC5GQUlMRUQsdC50aW1lc0ZhaWxlZCsrLHRoaXMudHJpZ2dlcihpLkV2ZW50cy5TRUdNRU5UX0ZBSUxFRCx0KSl9LGkucHJvdG90eXBlLmxvYWRTZWdtZW50PWZ1bmN0aW9uKHQpe3ZhciBlPSExLG49bmV3IFhNTEh0dHBSZXF1ZXN0LHI9dC51cmksbz1mdW5jdGlvbihpKXtlfHwoZT0hMCx0aGlzLl9oYW5kbGVMb2FkU2VnbWVudEZhaWx1cmUodCxuLGkpKX0uYmluZCh0aGlzKTsodC5oYXNCZWVuUmVxdWVzdGVkKCl8fHQuaXNDb21wbGV0ZSgpKSYmdGhpcy5fbG9nZ2VyLmxvZyhcInNlZ21lbnQgY2FudCBiZSBsb2FkZWQsIHJlcXVlc3RlZDogXCIsISF0Lmhhc0JlZW5SZXF1ZXN0ZWQoKSxcIiBjb21wbGV0ZTogXCIsdC5pc0NvbXBsZXRlKCkpLG4ub3BlbihcIkdFVFwiLHIsITApLG4ucmVzcG9uc2VUeXBlPVwiYXJyYXlidWZmZXJcIixuLm9ubG9hZD1mdW5jdGlvbigpe2lmKCF0LmFib3J0ZWQpe2lmKDIwMCE9PW4uc3RhdHVzKXJldHVybiB2b2lkIG8oKTt0aGlzLl9sb2dnZXIubG9nKFwiZG93bmxvYWQgb2Ygc2VnbWVudCBcIit0LmluZGV4K1wiIGNvbXBsZXRlXCIpLHQuc3RhdHVzPWguQ09NUExFVEUsdC5kYXRhPW5ldyBVaW50OEFycmF5KG4ucmVzcG9uc2UpLHQuZG93bmxvYWRUaW1lPURhdGUubm93KCktdC5kb3dubG9hZFN0YXJ0VGltZSx0aGlzLnRyaWdnZXIoaS5FdmVudHMuU0VHTUVOVF9MT0FERUQsdCl9fS5iaW5kKHRoaXMpLG4ub25wcm9ncmVzcz1mdW5jdGlvbihlKXt0LmFib3J0ZWR8fGUubG9hZGVkJiZlLnRvdGFsJiYodC5sb2FkZWQ9ZS5sb2FkZWQsdC50b3RhbD1lLnRvdGFsLHRoaXMudHJpZ2dlcihpLkV2ZW50cy5TRUdNRU5UX1BST0dSRVNTLHQpKX0uYmluZCh0aGlzKSxuLm9uZXJyb3I9ZnVuY3Rpb24odCl7byh0KX0uYmluZCh0aGlzKSx0aGlzLl9sb2dnZXIubG9nKFwicmVxdWVzdGluZyBzZWdtZW50IFwiK3QuaW5kZXgrXCIgZnJvbSBcIityKSx0Lnhocj1uLHQuYWJvcnRlZD0hMSx0LmRvd25sb2FkU3RhcnRUaW1lPURhdGUubm93KCksdC5zdGF0dXM9aC5SRVFVRVNURUQsbi5zZW5kKCl9LGkucHJvdG90eXBlLmdldFNlZ21lbnQ9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuX3NlZ21lbnRzJiZ0aGlzLl9zZWdtZW50c1t0XT90aGlzLl9zZWdtZW50c1t0XTpudWxsfSxpLnByb3RvdHlwZS5nZXRTZWdtZW50SW5kZXhGb3JUaW1lPWZ1bmN0aW9uKHQpe3ZhciBlLG47aWYodD50aGlzLl9kdXJhdGlvbnx8MD50fHwhdGhpcy5fc2VnbWVudHN8fDA9PT10aGlzLl9zZWdtZW50cy5sZW5ndGgpcmV0dXJuLTE7Zm9yKGU9TWF0aC5mbG9vcih0aGlzLl9zZWdtZW50cy5sZW5ndGgqKHQvdGhpcy5fZHVyYXRpb24pKSxuPXRoaXMuX3NlZ21lbnRzW2VdOyEobi5zdGFydFBvc2l0aW9uPD10JiZuLnN0YXJ0UG9zaXRpb24rbi5kdXJhdGlvbj50KTspbi5zdGFydFBvc2l0aW9uK24uZHVyYXRpb24+PXQ/ZS0tOmUrKyxuPXRoaXMuX3NlZ21lbnRzW2VdO3JldHVybiBlfSxpLnByb3RvdHlwZS5nZXRTZWdtZW50Rm9yVGltZT1mdW5jdGlvbih0KXt2YXIgZT10aGlzLmdldFNlZ21lbnRJbmRleEZvclRpbWUodCk7cmV0dXJuIGU+PTA/dGhpcy5fc2VnbWVudHNbZV06bnVsbH0saS5wcm90b3R5cGUuZ2V0RHVyYXRpb249ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZHVyYXRpb259LGkucHJvdG90eXBlLmdldE51bVNlZ21lbnRzPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3NlZ21lbnRzLmxlbmd0aH0saS5wcm90b3R5cGUuZ2V0TGFzdFNlZ21lbnQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fc2VnbWVudHMubGVuZ3RoP3RoaXMuX3NlZ21lbnRzW3RoaXMuX3NlZ21lbnRzLmxlbmd0aC0xXTpudWxsfX0sZnVuY3Rpb24odCxlLG4pe3ZhciBpPW4oNTMpLHI9big1Niksbz1uKDU3KSxzPTEsYT0zMix1PW8oZnVuY3Rpb24odCxlLG4pe3ZhciBvPXM7aWYobi5sZW5ndGgpe3ZhciBoPXIobix1LnBsYWNlaG9sZGVyKTtvfD1hfXJldHVybiBpKHQsbyxlLG4saCl9KTt1LnBsYWNlaG9sZGVyPXt9LHQuZXhwb3J0cz11fSxmdW5jdGlvbih0LGUsbil7KGZ1bmN0aW9uKGUpe2Z1bmN0aW9uIGkodCxlLG4pe2Zvcih2YXIgaT1uLmxlbmd0aCxyPS0xLG89UCh0Lmxlbmd0aC1pLDApLHM9LTEsYT1lLmxlbmd0aCx1PUFycmF5KGErbyk7KytzPGE7KXVbc109ZVtzXTtmb3IoOysrcjxpOyl1W25bcl1dPXRbcl07Zm9yKDtvLS07KXVbcysrXT10W3IrK107cmV0dXJuIHV9ZnVuY3Rpb24gcih0LGUsbil7Zm9yKHZhciBpPS0xLHI9bi5sZW5ndGgsbz0tMSxzPVAodC5sZW5ndGgtciwwKSxhPS0xLHU9ZS5sZW5ndGgsaD1BcnJheShzK3UpOysrbzxzOyloW29dPXRbb107Zm9yKHZhciBjPW87KythPHU7KWhbYythXT1lW2FdO2Zvcig7KytpPHI7KWhbYytuW2ldXT10W28rK107cmV0dXJuIGh9ZnVuY3Rpb24gbyh0LG4pe2Z1bmN0aW9uIGkoKXt2YXIgbz10aGlzJiZ0aGlzIT09ZSYmdGhpcyBpbnN0YW5jZW9mIGk/cjp0O3JldHVybiBvLmFwcGx5KG4sYXJndW1lbnRzKX12YXIgcj1zKHQpO3JldHVybiBpfWZ1bmN0aW9uIHModCl7cmV0dXJuIGZ1bmN0aW9uKCl7dmFyIGU9YXJndW1lbnRzO3N3aXRjaChlLmxlbmd0aCl7Y2FzZSAwOnJldHVybiBuZXcgdDtjYXNlIDE6cmV0dXJuIG5ldyB0KGVbMF0pO2Nhc2UgMjpyZXR1cm4gbmV3IHQoZVswXSxlWzFdKTtjYXNlIDM6cmV0dXJuIG5ldyB0KGVbMF0sZVsxXSxlWzJdKTtjYXNlIDQ6cmV0dXJuIG5ldyB0KGVbMF0sZVsxXSxlWzJdLGVbM10pO2Nhc2UgNTpyZXR1cm4gbmV3IHQoZVswXSxlWzFdLGVbMl0sZVszXSxlWzRdKTtjYXNlIDY6cmV0dXJuIG5ldyB0KGVbMF0sZVsxXSxlWzJdLGVbM10sZVs0XSxlWzVdKTtjYXNlIDc6cmV0dXJuIG5ldyB0KGVbMF0sZVsxXSxlWzJdLGVbM10sZVs0XSxlWzVdLGVbNl0pfXZhciBuPXAodC5wcm90b3R5cGUpLGk9dC5hcHBseShuLGUpO3JldHVybiBmKGkpP2k6bn19ZnVuY3Rpb24gYSh0LG4sbyx1LGgsYyxmLHAsVCxiKXtmdW5jdGlvbiBJKCl7Zm9yKHZhciB5PWFyZ3VtZW50cy5sZW5ndGgsdj15LEU9QXJyYXkoeSk7di0tOylFW3ZdPWFyZ3VtZW50c1t2XTtpZih1JiYoRT1pKEUsdSxoKSksYyYmKEU9cihFLGMsZikpLER8fGspe3ZhciB3PUkucGxhY2Vob2xkZXIseD1nKEUsdyk7aWYoeS09eC5sZW5ndGgsYj55KXt2YXIgQz1wP2QocCk6dm9pZCAwLEY9UChiLXksMCksVT1EP3g6dm9pZCAwLEI9RD92b2lkIDA6eCxIPUQ/RTp2b2lkIDAsaj1EP3ZvaWQgMDpFO258PUQ/UzpBLG4mPX4oRD9BOlMpLE18fChuJj1+KF98bSkpO3ZhciBHPWEodCxuLG8sSCxVLGosQixDLFQsRik7cmV0dXJuIEcucGxhY2Vob2xkZXI9dyxHfX12YXIgWT1PP286dGhpcyxWPVI/WVt0XTp0O3JldHVybiBwJiYoRT1sKEUscCkpLEwmJlQ8RS5sZW5ndGgmJihFLmxlbmd0aD1UKSx0aGlzJiZ0aGlzIT09ZSYmdGhpcyBpbnN0YW5jZW9mIEkmJihWPU58fHModCkpLFYuYXBwbHkoWSxFKX12YXIgTD1uJncsTz1uJl8sUj1uJm0sRD1uJnYsTT1uJnksaz1uJkUsTj1SP3ZvaWQgMDpzKHQpO3JldHVybiBJfWZ1bmN0aW9uIHUodCxuLGkscil7ZnVuY3Rpb24gbygpe2Zvcih2YXIgbj0tMSxzPWFyZ3VtZW50cy5sZW5ndGgsaD0tMSxjPXIubGVuZ3RoLGw9QXJyYXkoYytzKTsrK2g8YzspbFtoXT1yW2hdO2Zvcig7cy0tOylsW2grK109YXJndW1lbnRzWysrbl07dmFyIGY9dGhpcyYmdGhpcyE9PWUmJnRoaXMgaW5zdGFuY2VvZiBvP3U6dDtyZXR1cm4gZi5hcHBseShhP2k6dGhpcyxsKX12YXIgYT1uJl8sdT1zKHQpO3JldHVybiBvfWZ1bmN0aW9uIGgodCxlLG4saSxyLHMsaCxjKXt2YXIgbD1lJm07aWYoIWwmJlwiZnVuY3Rpb25cIiE9dHlwZW9mIHQpdGhyb3cgbmV3IFR5cGVFcnJvcihUKTt2YXIgZj1pP2kubGVuZ3RoOjA7aWYoZnx8KGUmPX4oU3xBKSxpPXI9dm9pZCAwKSxmLT1yP3IubGVuZ3RoOjAsZSZBKXt2YXIgZD1pLHA9cjtpPXI9dm9pZCAwfXZhciBnPVt0LGUsbixpLHIsZCxwLHMsaCxjXTtpZihnWzldPW51bGw9PWM/bD8wOnQubGVuZ3RoOlAoYy1mLDApfHwwLGU9PV8pdmFyIHk9byhnWzBdLGdbMl0pO2Vsc2UgeT1lIT1TJiZlIT0oX3xTKXx8Z1s0XS5sZW5ndGg/YS5hcHBseSh2b2lkIDAsZyk6dS5hcHBseSh2b2lkIDAsZyk7cmV0dXJuIHl9ZnVuY3Rpb24gYyh0LGUpe3JldHVybiB0PVwibnVtYmVyXCI9PXR5cGVvZiB0fHxiLnRlc3QodCk/K3Q6LTEsZT1udWxsPT1lP0w6ZSx0Pi0xJiZ0JTE9PTAmJmU+dH1mdW5jdGlvbiBsKHQsZSl7Zm9yKHZhciBuPXQubGVuZ3RoLGk9SShlLmxlbmd0aCxuKSxyPWQodCk7aS0tOyl7dmFyIG89ZVtpXTt0W2ldPWMobyxuKT9yW29dOnZvaWQgMH1yZXR1cm4gdH1mdW5jdGlvbiBmKHQpe3ZhciBlPXR5cGVvZiB0O3JldHVybiEhdCYmKFwib2JqZWN0XCI9PWV8fFwiZnVuY3Rpb25cIj09ZSl9dmFyIGQ9big1NCkscD1uKDU1KSxnPW4oNTYpLF89MSxtPTIseT00LHY9OCxFPTE2LFM9MzIsQT02NCx3PTEyOCxUPVwiRXhwZWN0ZWQgYSBmdW5jdGlvblwiLGI9L15cXGQrJC8sUD1NYXRoLm1heCxJPU1hdGgubWluLEw9OTAwNzE5OTI1NDc0MDk5MTt0LmV4cG9ydHM9aH0pLmNhbGwoZSxmdW5jdGlvbigpe3JldHVybiB0aGlzfSgpKX0sZnVuY3Rpb24odCxlKXtmdW5jdGlvbiBuKHQsZSl7dmFyIG49LTEsaT10Lmxlbmd0aDtmb3IoZXx8KGU9QXJyYXkoaSkpOysrbjxpOyllW25dPXRbbl07cmV0dXJuIGV9dC5leHBvcnRzPW59LGZ1bmN0aW9uKHQsZSl7ZnVuY3Rpb24gbih0KXt2YXIgZT10eXBlb2YgdDtyZXR1cm4hIXQmJihcIm9iamVjdFwiPT1lfHxcImZ1bmN0aW9uXCI9PWUpfXZhciBpPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCgpe31yZXR1cm4gZnVuY3Rpb24oZSl7aWYobihlKSl7dC5wcm90b3R5cGU9ZTt2YXIgaT1uZXcgdDt0LnByb3RvdHlwZT12b2lkIDB9cmV0dXJuIGl8fHt9fX0oKTt0LmV4cG9ydHM9aX0sZnVuY3Rpb24odCxlKXtmdW5jdGlvbiBuKHQsZSl7Zm9yKHZhciBuPS0xLHI9dC5sZW5ndGgsbz0tMSxzPVtdOysrbjxyOyl0W25dPT09ZSYmKHRbbl09aSxzWysrb109bik7cmV0dXJuIHN9dmFyIGk9XCJfX2xvZGFzaF9wbGFjZWhvbGRlcl9fXCI7dC5leHBvcnRzPW59LDExLGZ1bmN0aW9uKHQsZSxuKXtmdW5jdGlvbiBpKHQsZSl7cmV0dXJuIGZ1bmN0aW9uKG4saSxyKXtyZXR1cm5cImZ1bmN0aW9uXCI9PXR5cGVvZiBpJiZ2b2lkIDA9PT1yJiZhKG4pP3QobixpKTplKG4scyhpLHIsMykpfX12YXIgcj1uKDU5KSxvPW4oNjApLHM9big2NSksYT1uKDY0KSx1PWkocixvKTt0LmV4cG9ydHM9dX0sZnVuY3Rpb24odCxlKXtmdW5jdGlvbiBuKHQsZSl7Zm9yKHZhciBuPS0xLGk9dC5sZW5ndGg7KytuPGkmJmUodFtuXSxuLHQpIT09ITE7KTtyZXR1cm4gdH10LmV4cG9ydHM9bn0sWzEzNCw2MV0sWzEzMiw2Miw2Myw2NF0sNSw2LDcsOSxmdW5jdGlvbih0LGUsbil7dmFyIGkscj1uKDM2KSxvPW4oMTYpLHM9big0NykuYmluZEFsbCxhPW4oMSk7dC5leHBvcnRzPWk9ZnVuY3Rpb24odCxlKXtzKHRoaXMsW1wiX29uTVNFSW5pdFwiLFwiX29uTVNFRGlzcG9zZVwiLFwiX29uU291cmNlQnVmZmVyVXBkYXRlXCJdKSx0aGlzLm1pbWVUeXBlPWUsdGhpcy5fbG9nZ2VyPXQsdGhpcy5faXNCdWZmZXJQcmVwYXJlZD0hMSx0aGlzLl9zb3VyY2VCdWZmZXJQdHNPZmZzZXQ9MCx0aGlzLl9zZWdtZW50c0F3YWl0aW5nQXBwZW5kYW5jZT1bXSx0aGlzLl9pc05vdFJlYWR5PSEwLHRoaXMuX3NvdXJjZUJ1ZmZlcj1udWxsLHRoaXMuX21lZGlhU291cmNlPW5ldyBNZWRpYVNvdXJjZSx0aGlzLl9tZWRpYVNvdXJjZS5hZGRFdmVudExpc3RlbmVyKFwic291cmNlb3BlblwiLHRoaXMuX29uTVNFSW5pdCwhMSksdGhpcy5fbWVkaWFTb3VyY2UuYWRkRXZlbnRMaXN0ZW5lcihcInNvdXJjZWNsb3NlXCIsdGhpcy5fb25NU0VEaXNwb3NlLCExKSx0aGlzLl9tZWRpYUVsZW09by5jcmVhdGVBdWRpb0VsZW1lbnQoKSx0aGlzLl9tZWRpYUVsZW0uc3JjPXdpbmRvdy5VUkwuY3JlYXRlT2JqZWN0VVJMKHRoaXMuX21lZGlhU291cmNlKX0saS5FdmVudHM9e1NPVVJDRV9SRUFEWTpcInNvdXJjZS1yZWFkeVwiLFNPVVJDRV9ERVNUUk9ZRUQ6XCJzb3VyY2UtZGVzdHJveVwiLFNPVVJDRV9FUlJPUjpcInNvdXJjZS1lcnJvclwiLFNFR01FTlRfQVBQRU5ERUQ6XCJzZWdtZW50LWFwcGVuZGVkXCJ9LGEoaS5wcm90b3R5cGUsciksYShpLnByb3RvdHlwZSx7X29uTVNFSW5pdDpmdW5jdGlvbigpe3RoaXMuX2xvZ2dlci5sb2coXCJzb3VyY2Ugb3BlbiBoYW5kbGVyXCIpLHRoaXMuX2lzTm90UmVhZHk9ITEsdGhpcy5fbWVkaWFTb3VyY2UucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInNvdXJjZW9wZW5cIix0aGlzLl9vbk1TRUluaXQsITEpLHRoaXMuX3NvdXJjZUJ1ZmZlcj10aGlzLl9tZWRpYVNvdXJjZS5hZGRTb3VyY2VCdWZmZXIodGhpcy5taW1lVHlwZSksdGhpcy5fc291cmNlQnVmZmVyLmFkZEV2ZW50TGlzdGVuZXIoXCJ1cGRhdGVcIix0aGlzLl9vblNvdXJjZUJ1ZmZlclVwZGF0ZSksdGhpcy50cmlnZ2VyKGkuRXZlbnRzLlNPVVJDRV9SRUFEWSl9LF9vbk1TRURpc3Bvc2U6ZnVuY3Rpb24oKXt0aGlzLl9pc05vdFJlYWR5PSEwLHRoaXMuX2xvZ2dlci5sb2coXCJzb3VyY2UgZGlzcG9zZSBoYW5kbGVyXCIpLHRoaXMuX21lZGlhU291cmNlLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJzb3VyY2VjbG9zZVwiLHRoaXMuX29uTVNFRGlzcG9zZSwhMSl9LF9hcHBlbmROZXh0U2VnbWVudDpmdW5jdGlvbih0KXt0cnl7aWYodGhpcy5fc291cmNlQnVmZmVyLnVwZGF0aW5nKXJldHVybiB0aGlzLl9sb2dnZXIubG9nKFwic291cmNlIGJ1ZmZlciBpcyBidXN5IHVwZGF0aW5nIGFscmVhZHksIGVucXVldWluZyBkYXRhIGZvciBsYXRlciBhcHBlbmRpbmdcIiksdm9pZCB0aGlzLl9zZWdtZW50c0F3YWl0aW5nQXBwZW5kYW5jZS51bnNoaWZ0KHQpO3QuaXNMYXN0JiZ0aGlzLl9sb2dnZXIubG9nKFwiYWJvdXQgdG8gYXBwZW5kIGxhc3Qgc2VnbWVudFwiKSx0aGlzLl9jdXJyZW50U2VnbWVudEFwcGVuZGluZz10LHRoaXMuX3NvdXJjZUJ1ZmZlci50aW1lc3RhbXBPZmZzZXQ9dC5zdGFydFBvc2l0aW9uLzFlMyx0aGlzLl9zb3VyY2VCdWZmZXIuYXBwZW5kQnVmZmVyKHQuZGF0YSksdGhpcy5fbG9nZ2VyLmxvZyhcImFwcGVuZGluZyBzZWdtZW50IFwiK3QuaW5kZXgpfWNhdGNoKGUpe3RoaXMuX2xvZ2dlci5sb2coXCJlcnJvciB3aGlsZSBhcHBlbmRpbmcgdG8gU291cmNlQnVmZmVyOiBcIitlLm1lc3NhZ2UrXCIpXCIpLHRoaXMudHJpZ2dlcihpLkV2ZW50cy5TT1VSQ0VfRVJST1IsZSl9fSxfdHJ5QXBwZW5kRW9zOmZ1bmN0aW9uKCl7dGhpcy5fbG9nZ2VyLmxvZyhcImF0dGVtcHRpbmcgdG8gZmluYWxpemUgc3RyZWFtXCIpO3RyeXtcIm9wZW5cIiE9PXRoaXMuX21lZGlhU291cmNlLnJlYWR5U3RhdGV8fHRoaXMuX3NvdXJjZUJ1ZmZlci51cGRhdGluZz90aGlzLl9sb2dnZXIubG9nKFwiY291bGRuJ3QgY2FsbCBlbmRPZlN0cmVhbSBiZWNhdXNlIFNvdXJjZUJ1ZmZlciBpcyBzdGlsbCB1cGRhdGluZywgd2UnbGwgY2FsbCBpdCBvbmNlIGl0cyBkb25lXCIpOih0aGlzLl9tZWRpYVNvdXJjZS5lbmRPZlN0cmVhbSgpLHRoaXMuX2xvZ2dlci5sb2coXCJjYWxsZWQgZW5kT2ZTdHJlYW1cIikpfWNhdGNoKHQpe3RoaXMuX2xvZ2dlci5sb2coXCJTb3VyY2VCdWZmZXIgZW5kT2ZTdHJlYW0oKSBjYWxsIGZhaWxlZCB3aXRoIGVycm9yOiBcIit0Lm1lc3NhZ2UpLHRoaXMudHJpZ2dlcihpLkV2ZW50cy5TT1VSQ0VfRVJST1IsdCl9fSxfb25Tb3VyY2VCdWZmZXJVcGRhdGU6ZnVuY3Rpb24oKXsodGhpcy5fY3VycmVudFNlZ21lbnRBcHBlbmRpbmd8fHRoaXMuX3NvdXJjZUJ1ZmZlci51cGRhdGluZykmJih0aGlzLl9sb2dnZXIubG9nKFwiZG9uZSB1cGRhdGluZyBTb3VyY2VCdWZmZXIgd2l0aCBzZWdtZW50IFwiK3RoaXMuX2N1cnJlbnRTZWdtZW50QXBwZW5kaW5nLmluZGV4KSx0aGlzLnRyaWdnZXIoaS5FdmVudHMuU0VHTUVOVF9BUFBFTkRFRCx0aGlzLl9jdXJyZW50U2VnbWVudEFwcGVuZGluZyksdGhpcy5fY3VycmVudFNlZ21lbnRBcHBlbmRpbmcuaXNMYXN0JiYodGhpcy5fbG9nZ2VyLmxvZyhcIndhcyBsYXN0IHNlZ21lbnQsIHNldHRpbmcgb24gRU9TIG9uIFNvdXJjZUJ1ZmZlclwiKSx0aGlzLl90cnlBcHBlbmRFb3MoKSksdGhpcy5fc2VnbWVudHNBd2FpdGluZ0FwcGVuZGFuY2UubGVuZ3RoJiYhdGhpcy5fc291cmNlQnVmZmVyLnVwZGF0aW5nJiZ0aGlzLl9hcHBlbmROZXh0U2VnbWVudCh0aGlzLl9zZWdtZW50c0F3YWl0aW5nQXBwZW5kYW5jZS5wb3AoKSkpfSxhcHBlbmQ6ZnVuY3Rpb24odCl7aWYoIXRoaXMuc291cmNlSXNSZWFkeSgpKXRocm93IG5ldyBFcnJvcihcIk1lZGlhU291cmNlIGlzIG5vdCByZWFkeSB5ZXRcIik7dGhpcy5fYXBwZW5kTmV4dFNlZ21lbnQodCl9LG1lZGlhOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX21lZGlhRWxlbX0sc291cmNlSXNSZWFkeTpmdW5jdGlvbigpe3JldHVybiF0aGlzLl9pc05vdFJlYWR5fSxkdXJhdGlvbjpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5fbWVkaWFTb3VyY2UuZHVyYXRpb249dC8xZTMsMWUzKnRoaXMuX21lZGlhU291cmNlLmR1cmF0aW9ufX0pfSxmdW5jdGlvbih0LGUsbil7dmFyIGkscj1uKDQ3KS5jb25jYXRCdWZmZXJzVG9VaW50OEFycmF5LG89bigxKSxzPW4oMzYpLGE9big2OCk7dC5leHBvcnRzPWk9ZnVuY3Rpb24odCl7dGhpcy5jb25maWc9dCx0aGlzLnJlc2V0KCksdGhpcy5zZWdtZW50cz1bXSx0aGlzLnB1c2hlZEluaXREYXRhPSExfSxvKGkucHJvdG90eXBlLHMpLGkucHJvdG90eXBlLnByb2Nlc3M9ZnVuY3Rpb24odCl7c3dpdGNoKHRoaXMuc2VnbWVudHMucHVzaCh0KSx0aGlzLmNvbmZpZyl7Y2FzZSBpLkNvbmZpZ3MuVk9JRDp0aGlzLnRyaWdnZXIoXCJzZWdtZW50XCIsdCk7YnJlYWs7Y2FzZSBpLkNvbmZpZ3MuTVAzX1RPX0ZNUDQ6dGhpcy5zcmMuZW5xdWV1ZShuZXcgYS5Vbml0LlRyYW5zZmVyKHQuZGF0YSxcImJpbmFyeVwiKSksdGhpcy5zcmMuZW5xdWV1ZShhLlVuaXQuVHJhbnNmZXIuRmx1c2goKSk7YnJlYWs7ZGVmYXVsdDp0aHJvdyBuZXcgRXJyb3IoXCJDb25maWcgXCIrdGhpcy5jb25maWcrXCIgbm90IHN1cHBvcnRlZFwiKX19LGkucHJvdG90eXBlLmRlcXVldWU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zZWdtZW50cy5zaGlmdCgpfSxpLnByb3RvdHlwZS5yZXNldD1mdW5jdGlvbigpe3N3aXRjaCh0aGlzLmNvbmZpZyl7Y2FzZSBpLkNvbmZpZ3MuVk9JRDpicmVhaztjYXNlIGkuQ29uZmlncy5NUDNfVE9fRk1QNDp0aGlzLmdvdEluaXREYXRhPSExLHRoaXMuc3JjPW5ldyBhLlVuaXQuQmFzZVB1c2hTcmMsdGhpcy5wYXJzZXI9bmV3IGEuVW5pdHMuTVAzUGFyc2VyLHRoaXMubXV4ZXI9bmV3IGEuVW5pdHMuTVA0TXV4KGEuVW5pdHMuTVA0TXV4LlByb2ZpbGVzLk1QM19BVURJT19PTkxZKSx0aGlzLnNpbms9bmV3IGEuVW5pdC5CYXNlU2luayx0aGlzLnNpbmsuX29uRGF0YT1mdW5jdGlvbigpe3ZhciB0LGU9dGhpcy5zaW5rLmRlcXVldWUoKS5kYXRhO3JldHVybiB0aGlzLmdvdEluaXREYXRhPyh0PXRoaXMuZGVxdWV1ZSgpLHQubWltZVR5cGU9XCJhdWRpby9tcDRcIix0aGlzLmdvdEluaXREYXRhJiYhdGhpcy5wdXNoZWRJbml0RGF0YT8odC5kYXRhPXIodGhpcy5pbml0RGF0YSxlKSx0aGlzLnB1c2hlZEluaXREYXRhPSEwKTp0LmRhdGE9ZSx0aGlzLnRyaWdnZXIoXCJzZWdtZW50XCIsdCksdm9pZCB0aGlzLnJlc2V0KCkpOih0aGlzLmdvdEluaXREYXRhPSEwLHZvaWQodGhpcy5pbml0RGF0YT1lKSl9LmJpbmQodGhpcyksYS5Vbml0LmxpbmsodGhpcy5zcmMsdGhpcy5wYXJzZXIsdGhpcy5tdXhlcix0aGlzLnNpbmspO2JyZWFrO2RlZmF1bHQ6dGhyb3cgbmV3IEVycm9yKFwiQ29uZmlnIFwiK3RoaXMuY29uZmlnK1wiIG5vdCBzdXBwb3J0ZWRcIil9fSxpLkNvbmZpZ3M9e1ZPSUQ6XCJWT0lEXCIsTVAzX1RPX0ZNUDQ6XCJNUDNfVE9fRk1QNFwifX0sZnVuY3Rpb24odCxlLG4pe3ZhciBpLHI9big2OSksbz1uKDExNSkscz1uKDExOCksYT1uKDEyMSksdT1uKDEyNCksaD1uKDEyNSk7dC5leHBvcnRzPWk9e1VuaXQ6cixVbml0czp7RmlsZTpoLE1QNE11eDpvLE1QM1BhcnNlcjpzLE1TRVNpbms6YSxYSFI6dX19fSxmdW5jdGlvbih0LGUsbil7KGZ1bmN0aW9uKGUpe3ZhciBpLHIsbyxzLGEsdSxoLGMsbCxmLGQ9big3NCkscD1uKDc2KSxnPW4oODUpLF89big5NiksbT1uKDk3KTt0LmV4cG9ydHM9aT1mdW5jdGlvbigpe18uY2FsbCh0aGlzKSx0aGlzLmlucHV0c3x8KHRoaXMuaW5wdXRzPVtdKSx0aGlzLm91dHB1dHN8fCh0aGlzLm91dHB1dHM9W10pfSxpLmNyZWF0ZT1mdW5jdGlvbih0KXtyZXR1cm4gcChpLnByb3RvdHlwZSx0KX0saS5jcmVhdGVCYXNlU3JjPWZ1bmN0aW9uKHQpe3JldHVybiBwKHUucHJvdG90eXBlLHQpfSxpLmNyZWF0ZUJhc2VQdXNoU3JjPWZ1bmN0aW9uKHQpe3JldHVybiBwKGgucHJvdG90eXBlLHQpfSxpLmNyZWF0ZUJhc2VTaW5rPWZ1bmN0aW9uKHQpe3JldHVybiBwKGMucHJvdG90eXBlLHQpfSxpLmNyZWF0ZUJhc2VUcmFuc2Zvcm09ZnVuY3Rpb24odCl7cmV0dXJuIHAoYS5wcm90b3R5cGUsdCl9LGkuY3JlYXRlQmFzZVBhcnNlcj1mdW5jdGlvbih0KXtyZXR1cm4gcChsLnByb3RvdHlwZSx0KX0saS5saW5rPWZ1bmN0aW9uKHQsZSl7aWYoYXJndW1lbnRzLmxlbmd0aD4yKXJldHVybiBpLmxpbmtBcnJheShhcmd1bWVudHMpO2Zvcih2YXIgbj0wO248TWF0aC5taW4odC5udW1iZXJPZk91dHMoKSxlLm51bWJlck9mSW5zKCkpO24rKyl0Lm91dChuKS5waXBlKGVbXCJpblwiXShuKSk7cmV0dXJuIGV9LGkubGlua0FycmF5PWZ1bmN0aW9uKHQpe3ZhciBlLG4scjtmb3Iocj0wO3I8dC5sZW5ndGg7cisrKWU9dFtyXSx0Lmxlbmd0aD5yKzEmJihuPXRbcisxXSxpLmxpbmsoZSxuKSk7cmV0dXJuIG59O3ZhciB5PWkuRXZlbnQ9e0NIQUlOOlwiY2hhaW5cIixORUVEX0RBVEE6XCJuZWVkLWRhdGFcIixGSU5JU0g6XCJmaW5pc2hcIixQSVBFOlwicGlwZVwiLFVOUElQRTpcInVucGlwZVwiLEVSUk9SOlwiZXJyb3JcIixFTkQ6XCJlbmRcIixPUEVOOlwib3BlblwiLENMT1NFOlwiY2xvc2VcIn07aS5wcm90b3R5cGU9cChfLnByb3RvdHlwZSx7Y29uc3RydWN0b3I6aSxcImluXCI6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuaW5wdXRzW3RdfSxvdXQ6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMub3V0cHV0c1t0XX0sbnVtYmVyT2ZJbnM6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pbnB1dHMubGVuZ3RofSxudW1iZXJPZk91dHM6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5vdXRwdXRzLmxlbmd0aH0sYWRkOmZ1bmN0aW9uKHQpe3JldHVybiB0IGluc3RhbmNlb2Ygcj90aGlzLmFkZElucHV0KHQpOnQgaW5zdGFuY2VvZiBvJiZ0aGlzLmFkZE91dHB1dCh0KSx0aGlzfSxyZW1vdmU6ZnVuY3Rpb24odCl7dCBpbnN0YW5jZW9mIHI/dGhpcy5yZW1vdmVJbnB1dCh0KTp0IGluc3RhbmNlb2YgbyYmdGhpcy5yZW1vdmVPdXRwdXQodCl9LGFkZElucHV0OmZ1bmN0aW9uKHQpe3RoaXMuX2luc3RhbGxFdmVudEZvcndhcmRlcih0LHkuRklOSVNIKSx0aGlzLl9pbnN0YWxsRXZlbnRGb3J3YXJkZXIodCx5Lk9QRU4pLHRoaXMuX2luc3RhbGxFdmVudEZvcndhcmRlcih0LHkuUElQRSksdGhpcy5faW5zdGFsbEV2ZW50Rm9yd2FyZGVyKHQseS5VTlBJUEUpLHRoaXMuX2luc3RhbGxFdmVudEZvcndhcmRlcih0LHkuRVJST1IpLHRoaXMuX2luc3RhbGxFdmVudEZvcndhcmRlcih0LHkuQ0hBSU4pLHRoaXMuaW5wdXRzLnB1c2godCl9LGFkZE91dHB1dDpmdW5jdGlvbih0KXt0aGlzLl9pbnN0YWxsRXZlbnRGb3J3YXJkZXIodCx5LkVORCksdGhpcy5faW5zdGFsbEV2ZW50Rm9yd2FyZGVyKHQseS5PUEVOKSx0aGlzLl9pbnN0YWxsRXZlbnRGb3J3YXJkZXIodCx5LkNMT1NFKSx0aGlzLl9pbnN0YWxsRXZlbnRGb3J3YXJkZXIodCx5LkVSUk9SKSx0aGlzLl9pbnN0YWxsRXZlbnRGb3J3YXJkZXIodCx5Lk5FRURfREFUQSksdGhpcy5vdXRwdXRzLnB1c2godCl9LHJlbW92ZUlucHV0OmZ1bmN0aW9uKHQpe3JlbW92ZVB1dCh0aGlzLmlucHV0cyx0KX0scmVtb3ZlT3V0cHV0OmZ1bmN0aW9uKHQpe3JlbW92ZVB1dCh0aGlzLm91dHB1dHMsdCl9LHJlbW92ZVB1dDpmdW5jdGlvbih0LGUpe3Quc2xpY2UoKS5mb3JFYWNoKGZ1bmN0aW9uKG4saSl7bj09ZSYmdC5zcGxpY2UoaSwxKX0pfSxfaW5zdGFsbEV2ZW50Rm9yd2FyZGVyOmZ1bmN0aW9uKHQsZSl7dC5vbihlLGZ1bmN0aW9uKG4pe3RoaXMuZW1pdChlLHQsbil9LmJpbmQodGhpcykpfX0pLGkuVHJhbnNmZXI9cz1mdW5jdGlvbih0LG4saSl7bnx8KG49dCBpbnN0YW5jZW9mIGU/XCJidWZmZXJcIjp0IGluc3RhbmNlb2YgU3RyaW5nP1widXRmOFwiOlwib2JqZWN0XCIpLHRoaXMucmVzb2x2ZWQ9ITEsdGhpcy5kYXRhPXQsdGhpcy5lbmNvZGluZz1uLHRoaXMuZG9uZUNhbGxiYWNrPWl9LHMucHJvdG90eXBlPXAoT2JqZWN0LnByb3RvdHlwZSx7Y29uc3RydWN0b3I6cyxyZXNvbHZlOmZ1bmN0aW9uKCl7dGhpcy5kb25lQ2FsbGJhY2smJiF0aGlzLnJlc29sdmVkJiYodGhpcy5kb25lQ2FsbGJhY2soKSx0aGlzLnJlc29sdmVkPSEwKX0sc2V0Rmx1c2hpbmc6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuZGF0YS5mbHVzaD10LHRoaXN9LHNldEVtcHR5OmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmRhdGEuZW1wdHk9dCx0aGlzfX0pLHMuRmx1c2g9ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IHMoe30sXCJiaW5hcnlcIikuc2V0Rmx1c2hpbmcoITApLnNldEVtcHR5KCEwKX0scy5FT1M9ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IHMobnVsbCxcImJpbmFyeVwiKX0saS5JbnB1dD1yPWZ1bmN0aW9uKHQsZSl7bS5Xcml0YWJsZS5wcm90b3R5cGUuY29uc3RydWN0b3IuY2FsbCh0aGlzLHtvYmplY3RNb2RlOiEwLGRlY29kZVN0cmluZ3M6ITF9KX0sci5wcm90b3R5cGU9cChtLldyaXRhYmxlLnByb3RvdHlwZSx7Y29uc3RydWN0b3I6cixfd3JpdGU6ZnVuY3Rpb24odCxlLG4pe2QoXCJfd3JpdGU6IFwiK2UpLHRoaXMuZW1pdChpLkV2ZW50LkNIQUlOLG5ldyBzKHQsZSxuKSl9fSksaS5PdXRwdXQ9bz1mdW5jdGlvbih0KXttLlJlYWRhYmxlLnByb3RvdHlwZS5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMse29iamVjdE1vZGU6ITB9KSx0aGlzLl9kYXRhUmVxdWVzdGVkPTAsdGhpcy5fc2hvdWxkUHVzaE1vcmU9ITB9LG8uZW9zPWZ1bmN0aW9uKHQpe3QucHVzaChudWxsLFwibnVsbFwiKX0sby5wcm90b3R5cGU9cChtLlJlYWRhYmxlLnByb3RvdHlwZSx7Y29uc3RydWN0b3I6byxfcmVhZDpmdW5jdGlvbih0KXt0aGlzLl9kYXRhUmVxdWVzdGVkKyssdGhpcy5lbWl0KHkuTkVFRF9EQVRBLHRoaXMpfSxwdXNoOmZ1bmN0aW9uKHQsZSl7cmV0dXJuIHRoaXMuX2RhdGFSZXF1ZXN0ZWQtLSx0aGlzLl9zaG91bGRQdXNoTW9yZT1tLlJlYWRhYmxlLnByb3RvdHlwZS5wdXNoLmNhbGwodGhpcyx0LGUpLHRoaXMuX3Nob3VsZFB1c2hNb3JlfSxpc1B1bGxpbmc6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZGF0YVJlcXVlc3RlZD4wfSxlb3M6ZnVuY3Rpb24oKXttLlJlYWRhYmxlLnByb3RvdHlwZS5wdXNoLmNhbGwodGhpcyxudWxsLFwibnVsbFwiKX19KSxpLkJhc2VUcmFuc2Zvcm09YT1mdW5jdGlvbigpe2kucHJvdG90eXBlLmNvbnN0cnVjdG9yLmFwcGx5KHRoaXMsYXJndW1lbnRzKSx0aGlzLmFkZChuZXcgcikuYWRkKG5ldyBvKSx0aGlzLm9uKHkuQ0hBSU4sdGhpcy5fb25DaGFpbi5iaW5kKHRoaXMpKSx0aGlzLm9uKHkuRklOSVNILHRoaXMuX29uRmluaXNoLmJpbmQodGhpcykpfSxhLnByb3RvdHlwZT1wKGkucHJvdG90eXBlLHtjb25zdHJ1Y3RvcjphLF9vbkNoYWluOmZ1bmN0aW9uKHQsZSl7dGhpcy5fdHJhbnNmb3JtKGUpLHRoaXMub3V0KDApLnB1c2goZS5kYXRhLGUuZW5jb2RpbmcpLGUucmVzb2x2ZSgpfSxfb25GaW5pc2g6ZnVuY3Rpb24odCl7by5lb3ModGhpcy5vdXQoMCkpfSxfdHJhbnNmb3JtOmZ1bmN0aW9uKHQpe319KSxpLkJhc2VTcmM9dT1mdW5jdGlvbigpe2kucHJvdG90eXBlLmNvbnN0cnVjdG9yLmFwcGx5KHRoaXMsYXJndW1lbnRzKSx0aGlzLmFkZChuZXcgbyksdGhpcy5vbih5Lk5FRURfREFUQSx0aGlzLnNxdWVlemUuYmluZCh0aGlzKSl9LHUucHJvdG90eXBlPXAoaS5wcm90b3R5cGUse2NvbnN0cnVjdG9yOnUsc3F1ZWV6ZTpmdW5jdGlvbigpe2QoXCJzcXVlZXplXCIpO3ZhciB0PXRoaXMuX3NvdXJjZSgpO3QmJih0aGlzLm91dCgwKS5wdXNoKHQuZGF0YSx0LmVuY29kaW5nKSx0LnJlc29sdmUoKSl9LF9zb3VyY2U6ZnVuY3Rpb24oKXt9fSksaS5CYXNlUHVzaFNyYz1oPWZ1bmN0aW9uKCl7dS5wcm90b3R5cGUuY29uc3RydWN0b3IuYXBwbHkodGhpcyxhcmd1bWVudHMpLHRoaXMuX2J1ZmZlck91dD1bXX0saC5wcm90b3R5cGU9cCh1LnByb3RvdHlwZSx7Y29uc3RydWN0b3I6aCxfc291cmNlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2J1ZmZlck91dC5sZW5ndGg/dGhpcy5fYnVmZmVyT3V0LnNoaWZ0KCk6bnVsbH0sZW5xdWV1ZTpmdW5jdGlvbih0KXt0aGlzLl9idWZmZXJPdXQucHVzaCh0KSx0aGlzLm91dCgwKS5pc1B1bGxpbmcmJnRoaXMub3V0KDApLmlzUHVsbGluZygpJiZ0aGlzLnNxdWVlemUoKX19KSxpLkJhc2VTaW5rPWM9ZnVuY3Rpb24oKXtpLnByb3RvdHlwZS5jb25zdHJ1Y3Rvci5hcHBseSh0aGlzLGFyZ3VtZW50cyksdGhpcy5hZGQobmV3IHIpLHRoaXMub24oeS5DSEFJTix0aGlzLl9vbkNoYWluLmJpbmQodGhpcykpLHRoaXMuX2J1ZmZlckluPVtdfSxjLnByb3RvdHlwZT1wKGkucHJvdG90eXBlLHtjb25zdHJ1Y3RvcjpjLF9vbkNoYWluOmZ1bmN0aW9uKHQsZSl7ZChcIkJhc2VTaW5rLl9vbkNoYWluOiBcIitlLmVuY29kaW5nKSx0aGlzLl9idWZmZXJJbi5wdXNoKGUpLHRoaXMuX29uRGF0YSgpLGUucmVzb2x2ZSgpfSxfb25EYXRhOmZ1bmN0aW9uKCl7fSxkZXF1ZXVlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2J1ZmZlckluLmxlbmd0aD90aGlzLl9idWZmZXJJbi5zaGlmdCgpOm51bGx9fSksaS5CYXNlUGFyc2VyPWw9ZnVuY3Rpb24oKXtoLnByb3RvdHlwZS5jb25zdHJ1Y3Rvci5hcHBseSh0aGlzLGFyZ3VtZW50cyksYy5wcm90b3R5cGUuY29uc3RydWN0b3IuYXBwbHkodGhpcyxhcmd1bWVudHMpLHRoaXMub24oXCJmaW5pc2hcIix0aGlzLl9vbkZpbmlzaC5iaW5kKHRoaXMpKX0sZyhsLnByb3RvdHlwZSxpLnByb3RvdHlwZSxfLnByb3RvdHlwZSx1LnByb3RvdHlwZSxoLnByb3RvdHlwZSxjLnByb3RvdHlwZSx7Y29uc3RydWN0b3I6bCxfb25EYXRhOmZ1bmN0aW9uKCl7dGhpcy5fcGFyc2UodGhpcy5kZXF1ZXVlKCkpfSxfb25GaW5pc2g6ZnVuY3Rpb24oKXtkKFwiQmFzZVBhcnNlci5fb25GaW5pc2hcIiksby5lb3ModGhpcy5vdXQoMCkpfSxfcGFyc2U6ZnVuY3Rpb24odCl7fX0pLGkuSW5wdXRTZWxlY3Rvcj1mPWZ1bmN0aW9uKHQpe2ZvcihhLnByb3RvdHlwZS5jb25zdHJ1Y3Rvci5hcHBseSh0aGlzLGFyZ3VtZW50cyksdD0odHx8MSktMTt0LS0gPjA7KXRoaXMuYWRkKG5ldyByKTt0aGlzLnNlbGVjdGVkSW5wdXRJbmRleD0wfSxnKGYucHJvdG90eXBlLGEucHJvdG90eXBlLHtjb25zdHJ1Y3RvcjpmLF9vbkNoYWluOmZ1bmN0aW9uKHQsZSl7dmFyIG49dGhpc1tcImluXCJdKHRoaXMuc2VsZWN0ZWRJbnB1dEluZGV4KTtyZXR1cm4gdCE9PW4/dm9pZCBlLnJlc29sdmUoKToodGhpcy5fdHJhbnNmb3JtKGUpLHRoaXMub3V0KDApLnB1c2goZS5kYXRhLGUuZW5jb2RpbmcpLHZvaWQgZS5yZXNvbHZlKCkpfSxfb25GaW5pc2g6ZnVuY3Rpb24odCl7dmFyIGU9dGhpc1tcImluXCJdKHRoaXMuc2VsZWN0ZWRJbnB1dEluZGV4KTt0PT09ZSYmby5lb3ModGhpcy5vdXQoMCkpfX0pfSkuY2FsbChlLG4oNzApLkJ1ZmZlcil9LGZ1bmN0aW9uKHQsZSxuKXsoZnVuY3Rpb24odCxpKXtmdW5jdGlvbiByKCl7ZnVuY3Rpb24gdCgpe310cnl7dmFyIGU9bmV3IFVpbnQ4QXJyYXkoMSk7cmV0dXJuIGUuZm9vPWZ1bmN0aW9uKCl7cmV0dXJuIDQyfSxlLmNvbnN0cnVjdG9yPXQsNDI9PT1lLmZvbygpJiZlLmNvbnN0cnVjdG9yPT09dCYmXCJmdW5jdGlvblwiPT10eXBlb2YgZS5zdWJhcnJheSYmMD09PWUuc3ViYXJyYXkoMSwxKS5ieXRlTGVuZ3RofWNhdGNoKG4pe3JldHVybiExfX1mdW5jdGlvbiBvKCl7cmV0dXJuIHQuVFlQRURfQVJSQVlfU1VQUE9SVD8yMTQ3NDgzNjQ3OjEwNzM3NDE4MjN9ZnVuY3Rpb24gdChlKXtyZXR1cm4gdGhpcyBpbnN0YW5jZW9mIHQ/KHRoaXMubGVuZ3RoPTAsdGhpcy5wYXJlbnQ9dm9pZCAwLFwibnVtYmVyXCI9PXR5cGVvZiBlP3ModGhpcyxlKTpcInN0cmluZ1wiPT10eXBlb2YgZT9hKHRoaXMsZSxhcmd1bWVudHMubGVuZ3RoPjE/YXJndW1lbnRzWzFdOlwidXRmOFwiKTp1KHRoaXMsZSkpOmFyZ3VtZW50cy5sZW5ndGg+MT9uZXcgdChlLGFyZ3VtZW50c1sxXSk6bmV3IHQoZSl9ZnVuY3Rpb24gcyhlLG4pe2lmKGU9ZyhlLDA+bj8wOjB8XyhuKSksIXQuVFlQRURfQVJSQVlfU1VQUE9SVClmb3IodmFyIGk9MDtuPmk7aSsrKWVbaV09MDtyZXR1cm4gZX1mdW5jdGlvbiBhKHQsZSxuKXsoXCJzdHJpbmdcIiE9dHlwZW9mIG58fFwiXCI9PT1uKSYmKG49XCJ1dGY4XCIpO3ZhciBpPTB8eShlLG4pO3JldHVybiB0PWcodCxpKSx0LndyaXRlKGUsbiksdH1mdW5jdGlvbiB1KGUsbil7aWYodC5pc0J1ZmZlcihuKSlyZXR1cm4gaChlLG4pO2lmKCQobikpcmV0dXJuIGMoZSxuKTtpZihudWxsPT1uKXRocm93IG5ldyBUeXBlRXJyb3IoXCJtdXN0IHN0YXJ0IHdpdGggbnVtYmVyLCBidWZmZXIsIGFycmF5IG9yIHN0cmluZ1wiKTtpZihcInVuZGVmaW5lZFwiIT10eXBlb2YgQXJyYXlCdWZmZXIpe2lmKG4uYnVmZmVyIGluc3RhbmNlb2YgQXJyYXlCdWZmZXIpcmV0dXJuIGwoZSxuKTtpZihuIGluc3RhbmNlb2YgQXJyYXlCdWZmZXIpcmV0dXJuIGYoZSxuKX1yZXR1cm4gbi5sZW5ndGg/ZChlLG4pOnAoZSxuKX1mdW5jdGlvbiBoKHQsZSl7dmFyIG49MHxfKGUubGVuZ3RoKTtyZXR1cm4gdD1nKHQsbiksZS5jb3B5KHQsMCwwLG4pLHR9ZnVuY3Rpb24gYyh0LGUpe3ZhciBuPTB8XyhlLmxlbmd0aCk7dD1nKHQsbik7Zm9yKHZhciBpPTA7bj5pO2krPTEpdFtpXT0yNTUmZVtpXTtyZXR1cm4gdH1mdW5jdGlvbiBsKHQsZSl7dmFyIG49MHxfKGUubGVuZ3RoKTt0PWcodCxuKTtmb3IodmFyIGk9MDtuPmk7aSs9MSl0W2ldPTI1NSZlW2ldO3JldHVybiB0fWZ1bmN0aW9uIGYoZSxuKXtyZXR1cm4gdC5UWVBFRF9BUlJBWV9TVVBQT1JUPyhuLmJ5dGVMZW5ndGgsZT10Ll9hdWdtZW50KG5ldyBVaW50OEFycmF5KG4pKSk6ZT1sKGUsbmV3IFVpbnQ4QXJyYXkobikpLGV9ZnVuY3Rpb24gZCh0LGUpe3ZhciBuPTB8XyhlLmxlbmd0aCk7dD1nKHQsbik7Zm9yKHZhciBpPTA7bj5pO2krPTEpdFtpXT0yNTUmZVtpXTtyZXR1cm4gdH1mdW5jdGlvbiBwKHQsZSl7dmFyIG4saT0wO1wiQnVmZmVyXCI9PT1lLnR5cGUmJiQoZS5kYXRhKSYmKG49ZS5kYXRhLGk9MHxfKG4ubGVuZ3RoKSksdD1nKHQsaSk7Zm9yKHZhciByPTA7aT5yO3IrPTEpdFtyXT0yNTUmbltyXTtyZXR1cm4gdH1mdW5jdGlvbiBnKGUsbil7dC5UWVBFRF9BUlJBWV9TVVBQT1JUPyhlPXQuX2F1Z21lbnQobmV3IFVpbnQ4QXJyYXkobikpLGUuX19wcm90b19fPXQucHJvdG90eXBlKTooZS5sZW5ndGg9bixlLl9pc0J1ZmZlcj0hMCk7dmFyIGk9MCE9PW4mJm48PXQucG9vbFNpemU+Pj4xO3JldHVybiBpJiYoZS5wYXJlbnQ9WiksZX1mdW5jdGlvbiBfKHQpe2lmKHQ+PW8oKSl0aHJvdyBuZXcgUmFuZ2VFcnJvcihcIkF0dGVtcHQgdG8gYWxsb2NhdGUgQnVmZmVyIGxhcmdlciB0aGFuIG1heGltdW0gc2l6ZTogMHhcIitvKCkudG9TdHJpbmcoMTYpK1wiIGJ5dGVzXCIpO3JldHVybiAwfHR9ZnVuY3Rpb24gbShlLG4pe2lmKCEodGhpcyBpbnN0YW5jZW9mIG0pKXJldHVybiBuZXcgbShlLG4pO3ZhciBpPW5ldyB0KGUsbik7cmV0dXJuIGRlbGV0ZSBpLnBhcmVudCxpfWZ1bmN0aW9uIHkodCxlKXtcInN0cmluZ1wiIT10eXBlb2YgdCYmKHQ9XCJcIit0KTt2YXIgbj10Lmxlbmd0aDtpZigwPT09bilyZXR1cm4gMDtmb3IodmFyIGk9ITE7Oylzd2l0Y2goZSl7Y2FzZVwiYXNjaWlcIjpjYXNlXCJiaW5hcnlcIjpjYXNlXCJyYXdcIjpjYXNlXCJyYXdzXCI6cmV0dXJuIG47Y2FzZVwidXRmOFwiOmNhc2VcInV0Zi04XCI6cmV0dXJuIFkodCkubGVuZ3RoO2Nhc2VcInVjczJcIjpjYXNlXCJ1Y3MtMlwiOmNhc2VcInV0ZjE2bGVcIjpjYXNlXCJ1dGYtMTZsZVwiOnJldHVybiAyKm47Y2FzZVwiaGV4XCI6cmV0dXJuIG4+Pj4xO2Nhc2VcImJhc2U2NFwiOnJldHVybiBXKHQpLmxlbmd0aDtkZWZhdWx0OmlmKGkpcmV0dXJuIFkodCkubGVuZ3RoO2U9KFwiXCIrZSkudG9Mb3dlckNhc2UoKSxpPSEwfX1mdW5jdGlvbiB2KHQsZSxuKXt2YXIgaT0hMTtpZihlPTB8ZSxuPXZvaWQgMD09PW58fG49PT0xLzA/dGhpcy5sZW5ndGg6MHxuLHR8fCh0PVwidXRmOFwiKSwwPmUmJihlPTApLG4+dGhpcy5sZW5ndGgmJihuPXRoaXMubGVuZ3RoKSxlPj1uKXJldHVyblwiXCI7Zm9yKDs7KXN3aXRjaCh0KXtjYXNlXCJoZXhcIjpyZXR1cm4gRCh0aGlzLGUsbik7Y2FzZVwidXRmOFwiOmNhc2VcInV0Zi04XCI6cmV0dXJuIEkodGhpcyxlLG4pO2Nhc2VcImFzY2lpXCI6cmV0dXJuIE8odGhpcyxlLG4pO2Nhc2VcImJpbmFyeVwiOnJldHVybiBSKHRoaXMsZSxuKTtjYXNlXCJiYXNlNjRcIjpyZXR1cm4gUCh0aGlzLGUsbik7Y2FzZVwidWNzMlwiOmNhc2VcInVjcy0yXCI6Y2FzZVwidXRmMTZsZVwiOmNhc2VcInV0Zi0xNmxlXCI6cmV0dXJuIE0odGhpcyxlLG4pO2RlZmF1bHQ6aWYoaSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiVW5rbm93biBlbmNvZGluZzogXCIrdCk7dD0odCtcIlwiKS50b0xvd2VyQ2FzZSgpLGk9ITB9fWZ1bmN0aW9uIEUodCxlLG4saSl7bj1OdW1iZXIobil8fDA7dmFyIHI9dC5sZW5ndGgtbjtpPyhpPU51bWJlcihpKSxpPnImJihpPXIpKTppPXI7dmFyIG89ZS5sZW5ndGg7aWYobyUyIT09MCl0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIGhleCBzdHJpbmdcIik7aT5vLzImJihpPW8vMik7Zm9yKHZhciBzPTA7aT5zO3MrKyl7dmFyIGE9cGFyc2VJbnQoZS5zdWJzdHIoMipzLDIpLDE2KTtpZihpc05hTihhKSl0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIGhleCBzdHJpbmdcIik7dFtuK3NdPWF9cmV0dXJuIHN9ZnVuY3Rpb24gUyh0LGUsbixpKXtyZXR1cm4gSyhZKGUsdC5sZW5ndGgtbiksdCxuLGkpfWZ1bmN0aW9uIEEodCxlLG4saSl7cmV0dXJuIEsoVihlKSx0LG4saSl9ZnVuY3Rpb24gdyh0LGUsbixpKXtyZXR1cm4gQSh0LGUsbixpKX1mdW5jdGlvbiBUKHQsZSxuLGkpe3JldHVybiBLKFcoZSksdCxuLGkpfWZ1bmN0aW9uIGIodCxlLG4saSl7cmV0dXJuIEsoeihlLHQubGVuZ3RoLW4pLHQsbixpKX1mdW5jdGlvbiBQKHQsZSxuKXtyZXR1cm4gMD09PWUmJm49PT10Lmxlbmd0aD9xLmZyb21CeXRlQXJyYXkodCk6cS5mcm9tQnl0ZUFycmF5KHQuc2xpY2UoZSxuKSl9ZnVuY3Rpb24gSSh0LGUsbil7bj1NYXRoLm1pbih0Lmxlbmd0aCxuKTtmb3IodmFyIGk9W10scj1lO24+cjspe3ZhciBvPXRbcl0scz1udWxsLGE9bz4yMzk/NDpvPjIyMz8zOm8+MTkxPzI6MTtpZihuPj1yK2Epe3ZhciB1LGgsYyxsO3N3aXRjaChhKXtjYXNlIDE6MTI4Pm8mJihzPW8pO2JyZWFrO2Nhc2UgMjp1PXRbcisxXSwxMjg9PT0oMTkyJnUpJiYobD0oMzEmbyk8PDZ8NjMmdSxsPjEyNyYmKHM9bCkpO2JyZWFrO2Nhc2UgMzp1PXRbcisxXSxoPXRbcisyXSwxMjg9PT0oMTkyJnUpJiYxMjg9PT0oMTkyJmgpJiYobD0oMTUmbyk8PDEyfCg2MyZ1KTw8Nnw2MyZoLGw+MjA0NyYmKDU1Mjk2Pmx8fGw+NTczNDMpJiYocz1sKSk7YnJlYWs7Y2FzZSA0OnU9dFtyKzFdLGg9dFtyKzJdLGM9dFtyKzNdLDEyOD09PSgxOTImdSkmJjEyOD09PSgxOTImaCkmJjEyOD09PSgxOTImYykmJihsPSgxNSZvKTw8MTh8KDYzJnUpPDwxMnwoNjMmaCk8PDZ8NjMmYyxsPjY1NTM1JiYxMTE0MTEyPmwmJihzPWwpKX19bnVsbD09PXM/KHM9NjU1MzMsYT0xKTpzPjY1NTM1JiYocy09NjU1MzYsaS5wdXNoKHM+Pj4xMCYxMDIzfDU1Mjk2KSxzPTU2MzIwfDEwMjMmcyksaS5wdXNoKHMpLHIrPWF9cmV0dXJuIEwoaSl9ZnVuY3Rpb24gTCh0KXt2YXIgZT10Lmxlbmd0aDtpZihRPj1lKXJldHVybiBTdHJpbmcuZnJvbUNoYXJDb2RlLmFwcGx5KFN0cmluZyx0KTtmb3IodmFyIG49XCJcIixpPTA7ZT5pOyluKz1TdHJpbmcuZnJvbUNoYXJDb2RlLmFwcGx5KFN0cmluZyx0LnNsaWNlKGksaSs9USkpO3JldHVybiBufWZ1bmN0aW9uIE8odCxlLG4pe3ZhciBpPVwiXCI7bj1NYXRoLm1pbih0Lmxlbmd0aCxuKTtmb3IodmFyIHI9ZTtuPnI7cisrKWkrPVN0cmluZy5mcm9tQ2hhckNvZGUoMTI3JnRbcl0pO3JldHVybiBpfWZ1bmN0aW9uIFIodCxlLG4pe3ZhciBpPVwiXCI7bj1NYXRoLm1pbih0Lmxlbmd0aCxuKTtmb3IodmFyIHI9ZTtuPnI7cisrKWkrPVN0cmluZy5mcm9tQ2hhckNvZGUodFtyXSk7cmV0dXJuIGl9ZnVuY3Rpb24gRCh0LGUsbil7dmFyIGk9dC5sZW5ndGg7KCFlfHwwPmUpJiYoZT0wKSwoIW58fDA+bnx8bj5pKSYmKG49aSk7Zm9yKHZhciByPVwiXCIsbz1lO24+bztvKyspcis9Ryh0W29dKTtyZXR1cm4gcn1mdW5jdGlvbiBNKHQsZSxuKXtmb3IodmFyIGk9dC5zbGljZShlLG4pLHI9XCJcIixvPTA7bzxpLmxlbmd0aDtvKz0yKXIrPVN0cmluZy5mcm9tQ2hhckNvZGUoaVtvXSsyNTYqaVtvKzFdKTtyZXR1cm4gcn1mdW5jdGlvbiBrKHQsZSxuKXtpZih0JTEhPT0wfHwwPnQpdGhyb3cgbmV3IFJhbmdlRXJyb3IoXCJvZmZzZXQgaXMgbm90IHVpbnRcIik7aWYodCtlPm4pdGhyb3cgbmV3IFJhbmdlRXJyb3IoXCJUcnlpbmcgdG8gYWNjZXNzIGJleW9uZCBidWZmZXIgbGVuZ3RoXCIpfWZ1bmN0aW9uIE4oZSxuLGkscixvLHMpe2lmKCF0LmlzQnVmZmVyKGUpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJidWZmZXIgbXVzdCBiZSBhIEJ1ZmZlciBpbnN0YW5jZVwiKTtpZihuPm98fHM+bil0aHJvdyBuZXcgUmFuZ2VFcnJvcihcInZhbHVlIGlzIG91dCBvZiBib3VuZHNcIik7aWYoaStyPmUubGVuZ3RoKXRocm93IG5ldyBSYW5nZUVycm9yKFwiaW5kZXggb3V0IG9mIHJhbmdlXCIpfWZ1bmN0aW9uIHgodCxlLG4saSl7MD5lJiYoZT02NTUzNStlKzEpO2Zvcih2YXIgcj0wLG89TWF0aC5taW4odC5sZW5ndGgtbiwyKTtvPnI7cisrKXRbbityXT0oZSYyNTU8PDgqKGk/cjoxLXIpKT4+PjgqKGk/cjoxLXIpfWZ1bmN0aW9uIEModCxlLG4saSl7MD5lJiYoZT00Mjk0OTY3Mjk1K2UrMSk7Zm9yKHZhciByPTAsbz1NYXRoLm1pbih0Lmxlbmd0aC1uLDQpO28+cjtyKyspdFtuK3JdPWU+Pj44KihpP3I6My1yKSYyNTV9ZnVuY3Rpb24gRih0LGUsbixpLHIsbyl7aWYoZT5yfHxvPmUpdGhyb3cgbmV3IFJhbmdlRXJyb3IoXCJ2YWx1ZSBpcyBvdXQgb2YgYm91bmRzXCIpO2lmKG4raT50Lmxlbmd0aCl0aHJvdyBuZXcgUmFuZ2VFcnJvcihcImluZGV4IG91dCBvZiByYW5nZVwiKTtpZigwPm4pdGhyb3cgbmV3IFJhbmdlRXJyb3IoXCJpbmRleCBvdXQgb2YgcmFuZ2VcIil9ZnVuY3Rpb24gVSh0LGUsbixpLHIpe3JldHVybiByfHxGKHQsZSxuLDQsMy40MDI4MjM0NjYzODUyODg2ZTM4LC0zLjQwMjgyMzQ2NjM4NTI4ODZlMzgpLFgud3JpdGUodCxlLG4saSwyMyw0KSxuKzR9ZnVuY3Rpb24gQih0LGUsbixpLHIpe3JldHVybiByfHxGKHQsZSxuLDgsMS43OTc2OTMxMzQ4NjIzMTU3ZTMwOCwtMS43OTc2OTMxMzQ4NjIzMTU3ZTMwOCksWC53cml0ZSh0LGUsbixpLDUyLDgpLG4rOH1mdW5jdGlvbiBIKHQpe2lmKHQ9aih0KS5yZXBsYWNlKHR0LFwiXCIpLHQubGVuZ3RoPDIpcmV0dXJuXCJcIjtmb3IoO3QubGVuZ3RoJTQhPT0wOyl0Kz1cIj1cIjtyZXR1cm4gdH1mdW5jdGlvbiBqKHQpe3JldHVybiB0LnRyaW0/dC50cmltKCk6dC5yZXBsYWNlKC9eXFxzK3xcXHMrJC9nLFwiXCIpfWZ1bmN0aW9uIEcodCl7cmV0dXJuIDE2PnQ/XCIwXCIrdC50b1N0cmluZygxNik6dC50b1N0cmluZygxNil9ZnVuY3Rpb24gWSh0LGUpe2U9ZXx8MS8wO2Zvcih2YXIgbixpPXQubGVuZ3RoLHI9bnVsbCxvPVtdLHM9MDtpPnM7cysrKXtpZihuPXQuY2hhckNvZGVBdChzKSxuPjU1Mjk1JiY1NzM0ND5uKXtpZighcil7aWYobj41NjMxOSl7KGUtPTMpPi0xJiZvLnB1c2goMjM5LDE5MSwxODkpO2NvbnRpbnVlfWlmKHMrMT09PWkpeyhlLT0zKT4tMSYmby5wdXNoKDIzOSwxOTEsMTg5KTtjb250aW51ZX1yPW47Y29udGludWV9aWYoNTYzMjA+bil7KGUtPTMpPi0xJiZvLnB1c2goMjM5LDE5MSwxODkpLHI9bjtjb250aW51ZX1uPShyLTU1Mjk2PDwxMHxuLTU2MzIwKSs2NTUzNn1lbHNlIHImJihlLT0zKT4tMSYmby5wdXNoKDIzOSwxOTEsMTg5KTtpZihyPW51bGwsMTI4Pm4pe2lmKChlLT0xKTwwKWJyZWFrO28ucHVzaChuKX1lbHNlIGlmKDIwNDg+bil7aWYoKGUtPTIpPDApYnJlYWs7by5wdXNoKG4+PjZ8MTkyLDYzJm58MTI4KX1lbHNlIGlmKDY1NTM2Pm4pe2lmKChlLT0zKTwwKWJyZWFrO28ucHVzaChuPj4xMnwyMjQsbj4+NiY2M3wxMjgsNjMmbnwxMjgpfWVsc2V7aWYoISgxMTE0MTEyPm4pKXRocm93IG5ldyBFcnJvcihcIkludmFsaWQgY29kZSBwb2ludFwiKTtpZigoZS09NCk8MClicmVhaztvLnB1c2gobj4+MTh8MjQwLG4+PjEyJjYzfDEyOCxuPj42JjYzfDEyOCw2MyZufDEyOCl9fXJldHVybiBvfWZ1bmN0aW9uIFYodCl7Zm9yKHZhciBlPVtdLG49MDtuPHQubGVuZ3RoO24rKyllLnB1c2goMjU1JnQuY2hhckNvZGVBdChuKSk7cmV0dXJuIGV9ZnVuY3Rpb24geih0LGUpe2Zvcih2YXIgbixpLHIsbz1bXSxzPTA7czx0Lmxlbmd0aCYmISgoZS09Mik8MCk7cysrKW49dC5jaGFyQ29kZUF0KHMpLGk9bj4+OCxyPW4lMjU2LG8ucHVzaChyKSxvLnB1c2goaSk7cmV0dXJuIG99ZnVuY3Rpb24gVyh0KXtyZXR1cm4gcS50b0J5dGVBcnJheShIKHQpKX1mdW5jdGlvbiBLKHQsZSxuLGkpe2Zvcih2YXIgcj0wO2k+ciYmIShyK24+PWUubGVuZ3RofHxyPj10Lmxlbmd0aCk7cisrKWVbcituXT10W3JdO3JldHVybiByfS8qIVxuXHRcdCAqIFRoZSBidWZmZXIgbW9kdWxlIGZyb20gbm9kZS5qcywgZm9yIHRoZSBicm93c2VyLlxuXHRcdCAqXG5cdFx0ICogQGF1dGhvciAgIEZlcm9zcyBBYm91a2hhZGlqZWggPGZlcm9zc0BmZXJvc3Mub3JnPiA8aHR0cDovL2Zlcm9zcy5vcmc+XG5cdFx0ICogQGxpY2Vuc2UgIE1JVFxuXHRcdCAqL1xudmFyIHE9big3MSksWD1uKDcyKSwkPW4oNzMpO2UuQnVmZmVyPXQsZS5TbG93QnVmZmVyPW0sZS5JTlNQRUNUX01BWF9CWVRFUz01MCx0LnBvb2xTaXplPTgxOTI7dmFyIFo9e307dC5UWVBFRF9BUlJBWV9TVVBQT1JUPXZvaWQgMCE9PWkuVFlQRURfQVJSQVlfU1VQUE9SVD9pLlRZUEVEX0FSUkFZX1NVUFBPUlQ6cigpLHQuVFlQRURfQVJSQVlfU1VQUE9SVCYmKHQucHJvdG90eXBlLl9fcHJvdG9fXz1VaW50OEFycmF5LnByb3RvdHlwZSx0Ll9fcHJvdG9fXz1VaW50OEFycmF5KSx0LmlzQnVmZmVyPWZ1bmN0aW9uKHQpe3JldHVybiEobnVsbD09dHx8IXQuX2lzQnVmZmVyKX0sdC5jb21wYXJlPWZ1bmN0aW9uKGUsbil7aWYoIXQuaXNCdWZmZXIoZSl8fCF0LmlzQnVmZmVyKG4pKXRocm93IG5ldyBUeXBlRXJyb3IoXCJBcmd1bWVudHMgbXVzdCBiZSBCdWZmZXJzXCIpO2lmKGU9PT1uKXJldHVybiAwO2Zvcih2YXIgaT1lLmxlbmd0aCxyPW4ubGVuZ3RoLG89MCxzPU1hdGgubWluKGkscik7cz5vJiZlW29dPT09bltvXTspKytvO3JldHVybiBvIT09cyYmKGk9ZVtvXSxyPW5bb10pLHI+aT8tMTppPnI/MTowfSx0LmlzRW5jb2Rpbmc9ZnVuY3Rpb24odCl7c3dpdGNoKFN0cmluZyh0KS50b0xvd2VyQ2FzZSgpKXtjYXNlXCJoZXhcIjpjYXNlXCJ1dGY4XCI6Y2FzZVwidXRmLThcIjpjYXNlXCJhc2NpaVwiOmNhc2VcImJpbmFyeVwiOmNhc2VcImJhc2U2NFwiOmNhc2VcInJhd1wiOmNhc2VcInVjczJcIjpjYXNlXCJ1Y3MtMlwiOmNhc2VcInV0ZjE2bGVcIjpjYXNlXCJ1dGYtMTZsZVwiOnJldHVybiEwO2RlZmF1bHQ6cmV0dXJuITF9fSx0LmNvbmNhdD1mdW5jdGlvbihlLG4pe2lmKCEkKGUpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJsaXN0IGFyZ3VtZW50IG11c3QgYmUgYW4gQXJyYXkgb2YgQnVmZmVycy5cIik7aWYoMD09PWUubGVuZ3RoKXJldHVybiBuZXcgdCgwKTt2YXIgaTtpZih2b2lkIDA9PT1uKWZvcihuPTAsaT0wO2k8ZS5sZW5ndGg7aSsrKW4rPWVbaV0ubGVuZ3RoO3ZhciByPW5ldyB0KG4pLG89MDtmb3IoaT0wO2k8ZS5sZW5ndGg7aSsrKXt2YXIgcz1lW2ldO3MuY29weShyLG8pLG8rPXMubGVuZ3RofXJldHVybiByfSx0LmJ5dGVMZW5ndGg9eSx0LnByb3RvdHlwZS5sZW5ndGg9dm9pZCAwLHQucHJvdG90eXBlLnBhcmVudD12b2lkIDAsdC5wcm90b3R5cGUudG9TdHJpbmc9ZnVuY3Rpb24oKXt2YXIgdD0wfHRoaXMubGVuZ3RoO3JldHVybiAwPT09dD9cIlwiOjA9PT1hcmd1bWVudHMubGVuZ3RoP0kodGhpcywwLHQpOnYuYXBwbHkodGhpcyxhcmd1bWVudHMpfSx0LnByb3RvdHlwZS5lcXVhbHM9ZnVuY3Rpb24oZSl7aWYoIXQuaXNCdWZmZXIoZSkpdGhyb3cgbmV3IFR5cGVFcnJvcihcIkFyZ3VtZW50IG11c3QgYmUgYSBCdWZmZXJcIik7cmV0dXJuIHRoaXM9PT1lPyEwOjA9PT10LmNvbXBhcmUodGhpcyxlKX0sdC5wcm90b3R5cGUuaW5zcGVjdD1mdW5jdGlvbigpe3ZhciB0PVwiXCIsbj1lLklOU1BFQ1RfTUFYX0JZVEVTO3JldHVybiB0aGlzLmxlbmd0aD4wJiYodD10aGlzLnRvU3RyaW5nKFwiaGV4XCIsMCxuKS5tYXRjaCgvLnsyfS9nKS5qb2luKFwiIFwiKSx0aGlzLmxlbmd0aD5uJiYodCs9XCIgLi4uIFwiKSksXCI8QnVmZmVyIFwiK3QrXCI+XCJ9LHQucHJvdG90eXBlLmNvbXBhcmU9ZnVuY3Rpb24oZSl7aWYoIXQuaXNCdWZmZXIoZSkpdGhyb3cgbmV3IFR5cGVFcnJvcihcIkFyZ3VtZW50IG11c3QgYmUgYSBCdWZmZXJcIik7cmV0dXJuIHRoaXM9PT1lPzA6dC5jb21wYXJlKHRoaXMsZSl9LHQucHJvdG90eXBlLmluZGV4T2Y9ZnVuY3Rpb24oZSxuKXtmdW5jdGlvbiBpKHQsZSxuKXtmb3IodmFyIGk9LTEscj0wO24rcjx0Lmxlbmd0aDtyKyspaWYodFtuK3JdPT09ZVstMT09PWk/MDpyLWldKXtpZigtMT09PWkmJihpPXIpLHItaSsxPT09ZS5sZW5ndGgpcmV0dXJuIG4raX1lbHNlIGk9LTE7cmV0dXJuLTF9aWYobj4yMTQ3NDgzNjQ3P249MjE0NzQ4MzY0NzotMjE0NzQ4MzY0OD5uJiYobj0tMjE0NzQ4MzY0OCksbj4+PTAsMD09PXRoaXMubGVuZ3RoKXJldHVybi0xO2lmKG4+PXRoaXMubGVuZ3RoKXJldHVybi0xO2lmKDA+biYmKG49TWF0aC5tYXgodGhpcy5sZW5ndGgrbiwwKSksXCJzdHJpbmdcIj09dHlwZW9mIGUpcmV0dXJuIDA9PT1lLmxlbmd0aD8tMTpTdHJpbmcucHJvdG90eXBlLmluZGV4T2YuY2FsbCh0aGlzLGUsbik7aWYodC5pc0J1ZmZlcihlKSlyZXR1cm4gaSh0aGlzLGUsbik7aWYoXCJudW1iZXJcIj09dHlwZW9mIGUpcmV0dXJuIHQuVFlQRURfQVJSQVlfU1VQUE9SVCYmXCJmdW5jdGlvblwiPT09VWludDhBcnJheS5wcm90b3R5cGUuaW5kZXhPZj9VaW50OEFycmF5LnByb3RvdHlwZS5pbmRleE9mLmNhbGwodGhpcyxlLG4pOmkodGhpcyxbZV0sbik7dGhyb3cgbmV3IFR5cGVFcnJvcihcInZhbCBtdXN0IGJlIHN0cmluZywgbnVtYmVyIG9yIEJ1ZmZlclwiKX0sdC5wcm90b3R5cGUuZ2V0PWZ1bmN0aW9uKHQpe3JldHVybiBjb25zb2xlLmxvZyhcIi5nZXQoKSBpcyBkZXByZWNhdGVkLiBBY2Nlc3MgdXNpbmcgYXJyYXkgaW5kZXhlcyBpbnN0ZWFkLlwiKSx0aGlzLnJlYWRVSW50OCh0KX0sdC5wcm90b3R5cGUuc2V0PWZ1bmN0aW9uKHQsZSl7cmV0dXJuIGNvbnNvbGUubG9nKFwiLnNldCgpIGlzIGRlcHJlY2F0ZWQuIEFjY2VzcyB1c2luZyBhcnJheSBpbmRleGVzIGluc3RlYWQuXCIpLHRoaXMud3JpdGVVSW50OCh0LGUpfSx0LnByb3RvdHlwZS53cml0ZT1mdW5jdGlvbih0LGUsbixpKXtpZih2b2lkIDA9PT1lKWk9XCJ1dGY4XCIsbj10aGlzLmxlbmd0aCxlPTA7ZWxzZSBpZih2b2lkIDA9PT1uJiZcInN0cmluZ1wiPT10eXBlb2YgZSlpPWUsbj10aGlzLmxlbmd0aCxlPTA7ZWxzZSBpZihpc0Zpbml0ZShlKSllPTB8ZSxpc0Zpbml0ZShuKT8obj0wfG4sdm9pZCAwPT09aSYmKGk9XCJ1dGY4XCIpKTooaT1uLG49dm9pZCAwKTtlbHNle3ZhciByPWk7aT1lLGU9MHxuLG49cn12YXIgbz10aGlzLmxlbmd0aC1lO2lmKCh2b2lkIDA9PT1ufHxuPm8pJiYobj1vKSx0Lmxlbmd0aD4wJiYoMD5ufHwwPmUpfHxlPnRoaXMubGVuZ3RoKXRocm93IG5ldyBSYW5nZUVycm9yKFwiYXR0ZW1wdCB0byB3cml0ZSBvdXRzaWRlIGJ1ZmZlciBib3VuZHNcIik7aXx8KGk9XCJ1dGY4XCIpO2Zvcih2YXIgcz0hMTs7KXN3aXRjaChpKXtjYXNlXCJoZXhcIjpyZXR1cm4gRSh0aGlzLHQsZSxuKTtjYXNlXCJ1dGY4XCI6Y2FzZVwidXRmLThcIjpyZXR1cm4gUyh0aGlzLHQsZSxuKTtjYXNlXCJhc2NpaVwiOnJldHVybiBBKHRoaXMsdCxlLG4pO2Nhc2VcImJpbmFyeVwiOnJldHVybiB3KHRoaXMsdCxlLG4pO2Nhc2VcImJhc2U2NFwiOnJldHVybiBUKHRoaXMsdCxlLG4pO2Nhc2VcInVjczJcIjpjYXNlXCJ1Y3MtMlwiOmNhc2VcInV0ZjE2bGVcIjpjYXNlXCJ1dGYtMTZsZVwiOnJldHVybiBiKHRoaXMsdCxlLG4pO2RlZmF1bHQ6aWYocyl0aHJvdyBuZXcgVHlwZUVycm9yKFwiVW5rbm93biBlbmNvZGluZzogXCIraSk7aT0oXCJcIitpKS50b0xvd2VyQ2FzZSgpLHM9ITB9fSx0LnByb3RvdHlwZS50b0pTT049ZnVuY3Rpb24oKXtyZXR1cm57dHlwZTpcIkJ1ZmZlclwiLGRhdGE6QXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwodGhpcy5fYXJyfHx0aGlzLDApfX07dmFyIFE9NDA5Njt0LnByb3RvdHlwZS5zbGljZT1mdW5jdGlvbihlLG4pe3ZhciBpPXRoaXMubGVuZ3RoO2U9fn5lLG49dm9pZCAwPT09bj9pOn5+biwwPmU/KGUrPWksMD5lJiYoZT0wKSk6ZT5pJiYoZT1pKSwwPm4/KG4rPWksMD5uJiYobj0wKSk6bj5pJiYobj1pKSxlPm4mJihuPWUpO3ZhciByO2lmKHQuVFlQRURfQVJSQVlfU1VQUE9SVClyPXQuX2F1Z21lbnQodGhpcy5zdWJhcnJheShlLG4pKTtlbHNle3ZhciBvPW4tZTtyPW5ldyB0KG8sdm9pZCAwKTtmb3IodmFyIHM9MDtvPnM7cysrKXJbc109dGhpc1tzK2VdfXJldHVybiByLmxlbmd0aCYmKHIucGFyZW50PXRoaXMucGFyZW50fHx0aGlzKSxyfSx0LnByb3RvdHlwZS5yZWFkVUludExFPWZ1bmN0aW9uKHQsZSxuKXt0PTB8dCxlPTB8ZSxufHxrKHQsZSx0aGlzLmxlbmd0aCk7Zm9yKHZhciBpPXRoaXNbdF0scj0xLG89MDsrK288ZSYmKHIqPTI1Nik7KWkrPXRoaXNbdCtvXSpyO3JldHVybiBpfSx0LnByb3RvdHlwZS5yZWFkVUludEJFPWZ1bmN0aW9uKHQsZSxuKXt0PTB8dCxlPTB8ZSxufHxrKHQsZSx0aGlzLmxlbmd0aCk7Zm9yKHZhciBpPXRoaXNbdCstLWVdLHI9MTtlPjAmJihyKj0yNTYpOylpKz10aGlzW3QrLS1lXSpyO3JldHVybiBpfSx0LnByb3RvdHlwZS5yZWFkVUludDg9ZnVuY3Rpb24odCxlKXtyZXR1cm4gZXx8ayh0LDEsdGhpcy5sZW5ndGgpLHRoaXNbdF19LHQucHJvdG90eXBlLnJlYWRVSW50MTZMRT1mdW5jdGlvbih0LGUpe3JldHVybiBlfHxrKHQsMix0aGlzLmxlbmd0aCksdGhpc1t0XXx0aGlzW3QrMV08PDh9LHQucHJvdG90eXBlLnJlYWRVSW50MTZCRT1mdW5jdGlvbih0LGUpe3JldHVybiBlfHxrKHQsMix0aGlzLmxlbmd0aCksdGhpc1t0XTw8OHx0aGlzW3QrMV19LHQucHJvdG90eXBlLnJlYWRVSW50MzJMRT1mdW5jdGlvbih0LGUpe3JldHVybiBlfHxrKHQsNCx0aGlzLmxlbmd0aCksKHRoaXNbdF18dGhpc1t0KzFdPDw4fHRoaXNbdCsyXTw8MTYpKzE2Nzc3MjE2KnRoaXNbdCszXX0sdC5wcm90b3R5cGUucmVhZFVJbnQzMkJFPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIGV8fGsodCw0LHRoaXMubGVuZ3RoKSwxNjc3NzIxNip0aGlzW3RdKyh0aGlzW3QrMV08PDE2fHRoaXNbdCsyXTw8OHx0aGlzW3QrM10pfSx0LnByb3RvdHlwZS5yZWFkSW50TEU9ZnVuY3Rpb24odCxlLG4pe3Q9MHx0LGU9MHxlLG58fGsodCxlLHRoaXMubGVuZ3RoKTtmb3IodmFyIGk9dGhpc1t0XSxyPTEsbz0wOysrbzxlJiYocio9MjU2KTspaSs9dGhpc1t0K29dKnI7cmV0dXJuIHIqPTEyOCxpPj1yJiYoaS09TWF0aC5wb3coMiw4KmUpKSxpfSx0LnByb3RvdHlwZS5yZWFkSW50QkU9ZnVuY3Rpb24odCxlLG4pe3Q9MHx0LGU9MHxlLG58fGsodCxlLHRoaXMubGVuZ3RoKTtmb3IodmFyIGk9ZSxyPTEsbz10aGlzW3QrLS1pXTtpPjAmJihyKj0yNTYpOylvKz10aGlzW3QrLS1pXSpyO3JldHVybiByKj0xMjgsbz49ciYmKG8tPU1hdGgucG93KDIsOCplKSksb30sdC5wcm90b3R5cGUucmVhZEludDg9ZnVuY3Rpb24odCxlKXtyZXR1cm4gZXx8ayh0LDEsdGhpcy5sZW5ndGgpLDEyOCZ0aGlzW3RdPy0xKigyNTUtdGhpc1t0XSsxKTp0aGlzW3RdfSx0LnByb3RvdHlwZS5yZWFkSW50MTZMRT1mdW5jdGlvbih0LGUpe2V8fGsodCwyLHRoaXMubGVuZ3RoKTt2YXIgbj10aGlzW3RdfHRoaXNbdCsxXTw8ODtyZXR1cm4gMzI3Njgmbj80Mjk0OTAxNzYwfG46bn0sdC5wcm90b3R5cGUucmVhZEludDE2QkU9ZnVuY3Rpb24odCxlKXtlfHxrKHQsMix0aGlzLmxlbmd0aCk7dmFyIG49dGhpc1t0KzFdfHRoaXNbdF08PDg7cmV0dXJuIDMyNzY4Jm4/NDI5NDkwMTc2MHxuOm59LHQucHJvdG90eXBlLnJlYWRJbnQzMkxFPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIGV8fGsodCw0LHRoaXMubGVuZ3RoKSx0aGlzW3RdfHRoaXNbdCsxXTw8OHx0aGlzW3QrMl08PDE2fHRoaXNbdCszXTw8MjR9LHQucHJvdG90eXBlLnJlYWRJbnQzMkJFPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIGV8fGsodCw0LHRoaXMubGVuZ3RoKSx0aGlzW3RdPDwyNHx0aGlzW3QrMV08PDE2fHRoaXNbdCsyXTw8OHx0aGlzW3QrM119LHQucHJvdG90eXBlLnJlYWRGbG9hdExFPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIGV8fGsodCw0LHRoaXMubGVuZ3RoKSxYLnJlYWQodGhpcyx0LCEwLDIzLDQpfSx0LnByb3RvdHlwZS5yZWFkRmxvYXRCRT1mdW5jdGlvbih0LGUpe3JldHVybiBlfHxrKHQsNCx0aGlzLmxlbmd0aCksWC5yZWFkKHRoaXMsdCwhMSwyMyw0KX0sdC5wcm90b3R5cGUucmVhZERvdWJsZUxFPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIGV8fGsodCw4LHRoaXMubGVuZ3RoKSxYLnJlYWQodGhpcyx0LCEwLDUyLDgpfSx0LnByb3RvdHlwZS5yZWFkRG91YmxlQkU9ZnVuY3Rpb24odCxlKXtyZXR1cm4gZXx8ayh0LDgsdGhpcy5sZW5ndGgpLFgucmVhZCh0aGlzLHQsITEsNTIsOCl9LHQucHJvdG90eXBlLndyaXRlVUludExFPWZ1bmN0aW9uKHQsZSxuLGkpe3Q9K3QsZT0wfGUsbj0wfG4saXx8Tih0aGlzLHQsZSxuLE1hdGgucG93KDIsOCpuKSwwKTt2YXIgcj0xLG89MDtmb3IodGhpc1tlXT0yNTUmdDsrK288biYmKHIqPTI1Nik7KXRoaXNbZStvXT10L3ImMjU1O3JldHVybiBlK259LHQucHJvdG90eXBlLndyaXRlVUludEJFPWZ1bmN0aW9uKHQsZSxuLGkpe3Q9K3QsZT0wfGUsbj0wfG4saXx8Tih0aGlzLHQsZSxuLE1hdGgucG93KDIsOCpuKSwwKTt2YXIgcj1uLTEsbz0xO2Zvcih0aGlzW2Urcl09MjU1JnQ7LS1yPj0wJiYobyo9MjU2KTspdGhpc1tlK3JdPXQvbyYyNTU7cmV0dXJuIGUrbn0sdC5wcm90b3R5cGUud3JpdGVVSW50OD1mdW5jdGlvbihlLG4saSl7cmV0dXJuIGU9K2Usbj0wfG4saXx8Tih0aGlzLGUsbiwxLDI1NSwwKSx0LlRZUEVEX0FSUkFZX1NVUFBPUlR8fChlPU1hdGguZmxvb3IoZSkpLHRoaXNbbl09MjU1JmUsbisxfSx0LnByb3RvdHlwZS53cml0ZVVJbnQxNkxFPWZ1bmN0aW9uKGUsbixpKXtyZXR1cm4gZT0rZSxuPTB8bixpfHxOKHRoaXMsZSxuLDIsNjU1MzUsMCksdC5UWVBFRF9BUlJBWV9TVVBQT1JUPyh0aGlzW25dPTI1NSZlLHRoaXNbbisxXT1lPj4+OCk6eCh0aGlzLGUsbiwhMCksbisyfSx0LnByb3RvdHlwZS53cml0ZVVJbnQxNkJFPWZ1bmN0aW9uKGUsbixpKXtyZXR1cm4gZT0rZSxuPTB8bixpfHxOKHRoaXMsZSxuLDIsNjU1MzUsMCksdC5UWVBFRF9BUlJBWV9TVVBQT1JUPyh0aGlzW25dPWU+Pj44LHRoaXNbbisxXT0yNTUmZSk6eCh0aGlzLGUsbiwhMSksbisyfSx0LnByb3RvdHlwZS53cml0ZVVJbnQzMkxFPWZ1bmN0aW9uKGUsbixpKXtyZXR1cm4gZT0rZSxuPTB8bixpfHxOKHRoaXMsZSxuLDQsNDI5NDk2NzI5NSwwKSx0LlRZUEVEX0FSUkFZX1NVUFBPUlQ/KHRoaXNbbiszXT1lPj4+MjQsdGhpc1tuKzJdPWU+Pj4xNix0aGlzW24rMV09ZT4+PjgsdGhpc1tuXT0yNTUmZSk6Qyh0aGlzLGUsbiwhMCksbis0fSx0LnByb3RvdHlwZS53cml0ZVVJbnQzMkJFPWZ1bmN0aW9uKGUsbixpKXtyZXR1cm4gZT0rZSxuPTB8bixpfHxOKHRoaXMsZSxuLDQsNDI5NDk2NzI5NSwwKSx0LlRZUEVEX0FSUkFZX1NVUFBPUlQ/KHRoaXNbbl09ZT4+PjI0LHRoaXNbbisxXT1lPj4+MTYsdGhpc1tuKzJdPWU+Pj44LHRoaXNbbiszXT0yNTUmZSk6Qyh0aGlzLGUsbiwhMSksbis0fSx0LnByb3RvdHlwZS53cml0ZUludExFPWZ1bmN0aW9uKHQsZSxuLGkpe2lmKHQ9K3QsZT0wfGUsIWkpe3ZhciByPU1hdGgucG93KDIsOCpuLTEpO04odGhpcyx0LGUsbixyLTEsLXIpfXZhciBvPTAscz0xLGE9MD50PzE6MDtmb3IodGhpc1tlXT0yNTUmdDsrK288biYmKHMqPTI1Nik7KXRoaXNbZStvXT0odC9zPj4wKS1hJjI1NTtyZXR1cm4gZStufSx0LnByb3RvdHlwZS53cml0ZUludEJFPWZ1bmN0aW9uKHQsZSxuLGkpe2lmKHQ9K3QsZT0wfGUsIWkpe3ZhciByPU1hdGgucG93KDIsOCpuLTEpO04odGhpcyx0LGUsbixyLTEsLXIpfXZhciBvPW4tMSxzPTEsYT0wPnQ/MTowO2Zvcih0aGlzW2Urb109MjU1JnQ7LS1vPj0wJiYocyo9MjU2KTspdGhpc1tlK29dPSh0L3M+PjApLWEmMjU1O3JldHVybiBlK259LHQucHJvdG90eXBlLndyaXRlSW50OD1mdW5jdGlvbihlLG4saSl7cmV0dXJuIGU9K2Usbj0wfG4saXx8Tih0aGlzLGUsbiwxLDEyNywtMTI4KSx0LlRZUEVEX0FSUkFZX1NVUFBPUlR8fChlPU1hdGguZmxvb3IoZSkpLDA+ZSYmKGU9MjU1K2UrMSksdGhpc1tuXT0yNTUmZSxuKzF9LHQucHJvdG90eXBlLndyaXRlSW50MTZMRT1mdW5jdGlvbihlLG4saSl7cmV0dXJuIGU9K2Usbj0wfG4saXx8Tih0aGlzLGUsbiwyLDMyNzY3LC0zMjc2OCksdC5UWVBFRF9BUlJBWV9TVVBQT1JUPyh0aGlzW25dPTI1NSZlLHRoaXNbbisxXT1lPj4+OCk6eCh0aGlzLGUsbiwhMCksbisyfSx0LnByb3RvdHlwZS53cml0ZUludDE2QkU9ZnVuY3Rpb24oZSxuLGkpe3JldHVybiBlPStlLG49MHxuLGl8fE4odGhpcyxlLG4sMiwzMjc2NywtMzI3NjgpLHQuVFlQRURfQVJSQVlfU1VQUE9SVD8odGhpc1tuXT1lPj4+OCx0aGlzW24rMV09MjU1JmUpOngodGhpcyxlLG4sITEpLG4rMn0sdC5wcm90b3R5cGUud3JpdGVJbnQzMkxFPWZ1bmN0aW9uKGUsbixpKXtyZXR1cm4gZT0rZSxuPTB8bixpfHxOKHRoaXMsZSxuLDQsMjE0NzQ4MzY0NywtMjE0NzQ4MzY0OCksdC5UWVBFRF9BUlJBWV9TVVBQT1JUPyh0aGlzW25dPTI1NSZlLHRoaXNbbisxXT1lPj4+OCx0aGlzW24rMl09ZT4+PjE2LHRoaXNbbiszXT1lPj4+MjQpOkModGhpcyxlLG4sITApLG4rNH0sdC5wcm90b3R5cGUud3JpdGVJbnQzMkJFPWZ1bmN0aW9uKGUsbixpKXtyZXR1cm4gZT0rZSxuPTB8bixpfHxOKHRoaXMsZSxuLDQsMjE0NzQ4MzY0NywtMjE0NzQ4MzY0OCksMD5lJiYoZT00Mjk0OTY3Mjk1K2UrMSksdC5UWVBFRF9BUlJBWV9TVVBQT1JUPyh0aGlzW25dPWU+Pj4yNCx0aGlzW24rMV09ZT4+PjE2LHRoaXNbbisyXT1lPj4+OCx0aGlzW24rM109MjU1JmUpOkModGhpcyxlLG4sITEpLG4rNH0sdC5wcm90b3R5cGUud3JpdGVGbG9hdExFPWZ1bmN0aW9uKHQsZSxuKXtyZXR1cm4gVSh0aGlzLHQsZSwhMCxuKX0sdC5wcm90b3R5cGUud3JpdGVGbG9hdEJFPWZ1bmN0aW9uKHQsZSxuKXtyZXR1cm4gVSh0aGlzLHQsZSwhMSxuKX0sdC5wcm90b3R5cGUud3JpdGVEb3VibGVMRT1mdW5jdGlvbih0LGUsbil7cmV0dXJuIEIodGhpcyx0LGUsITAsbil9LHQucHJvdG90eXBlLndyaXRlRG91YmxlQkU9ZnVuY3Rpb24odCxlLG4pe3JldHVybiBCKHRoaXMsdCxlLCExLG4pfSx0LnByb3RvdHlwZS5jb3B5PWZ1bmN0aW9uKGUsbixpLHIpe2lmKGl8fChpPTApLHJ8fDA9PT1yfHwocj10aGlzLmxlbmd0aCksbj49ZS5sZW5ndGgmJihuPWUubGVuZ3RoKSxufHwobj0wKSxyPjAmJmk+ciYmKHI9aSkscj09PWkpcmV0dXJuIDA7aWYoMD09PWUubGVuZ3RofHwwPT09dGhpcy5sZW5ndGgpcmV0dXJuIDA7aWYoMD5uKXRocm93IG5ldyBSYW5nZUVycm9yKFwidGFyZ2V0U3RhcnQgb3V0IG9mIGJvdW5kc1wiKTtpZigwPml8fGk+PXRoaXMubGVuZ3RoKXRocm93IG5ldyBSYW5nZUVycm9yKFwic291cmNlU3RhcnQgb3V0IG9mIGJvdW5kc1wiKTtpZigwPnIpdGhyb3cgbmV3IFJhbmdlRXJyb3IoXCJzb3VyY2VFbmQgb3V0IG9mIGJvdW5kc1wiKTtyPnRoaXMubGVuZ3RoJiYocj10aGlzLmxlbmd0aCksZS5sZW5ndGgtbjxyLWkmJihyPWUubGVuZ3RoLW4raSk7dmFyIG8scz1yLWk7aWYodGhpcz09PWUmJm4+aSYmcj5uKWZvcihvPXMtMTtvPj0wO28tLSllW28rbl09dGhpc1tvK2ldO2Vsc2UgaWYoMWUzPnN8fCF0LlRZUEVEX0FSUkFZX1NVUFBPUlQpZm9yKG89MDtzPm87bysrKWVbbytuXT10aGlzW28raV07ZWxzZSBlLl9zZXQodGhpcy5zdWJhcnJheShpLGkrcyksbik7cmV0dXJuIHN9LHQucHJvdG90eXBlLmZpbGw9ZnVuY3Rpb24odCxlLG4pe2lmKHR8fCh0PTApLGV8fChlPTApLG58fChuPXRoaXMubGVuZ3RoKSxlPm4pdGhyb3cgbmV3IFJhbmdlRXJyb3IoXCJlbmQgPCBzdGFydFwiKTtpZihuIT09ZSYmMCE9PXRoaXMubGVuZ3RoKXtpZigwPmV8fGU+PXRoaXMubGVuZ3RoKXRocm93IG5ldyBSYW5nZUVycm9yKFwic3RhcnQgb3V0IG9mIGJvdW5kc1wiKTtpZigwPm58fG4+dGhpcy5sZW5ndGgpdGhyb3cgbmV3IFJhbmdlRXJyb3IoXCJlbmQgb3V0IG9mIGJvdW5kc1wiKTt2YXIgaTtpZihcIm51bWJlclwiPT10eXBlb2YgdClmb3IoaT1lO24+aTtpKyspdGhpc1tpXT10O2Vsc2V7dmFyIHI9WSh0LnRvU3RyaW5nKCkpLG89ci5sZW5ndGg7Zm9yKGk9ZTtuPmk7aSsrKXRoaXNbaV09cltpJW9dfXJldHVybiB0aGlzfX0sdC5wcm90b3R5cGUudG9BcnJheUJ1ZmZlcj1mdW5jdGlvbigpe2lmKFwidW5kZWZpbmVkXCIhPXR5cGVvZiBVaW50OEFycmF5KXtpZih0LlRZUEVEX0FSUkFZX1NVUFBPUlQpcmV0dXJuIG5ldyB0KHRoaXMpLmJ1ZmZlcjtmb3IodmFyIGU9bmV3IFVpbnQ4QXJyYXkodGhpcy5sZW5ndGgpLG49MCxpPWUubGVuZ3RoO2k+bjtuKz0xKWVbbl09dGhpc1tuXTtyZXR1cm4gZS5idWZmZXJ9dGhyb3cgbmV3IFR5cGVFcnJvcihcIkJ1ZmZlci50b0FycmF5QnVmZmVyIG5vdCBzdXBwb3J0ZWQgaW4gdGhpcyBicm93c2VyXCIpfTt2YXIgSj10LnByb3RvdHlwZTt0Ll9hdWdtZW50PWZ1bmN0aW9uKGUpe3JldHVybiBlLmNvbnN0cnVjdG9yPXQsZS5faXNCdWZmZXI9ITAsZS5fc2V0PWUuc2V0LGUuZ2V0PUouZ2V0LGUuc2V0PUouc2V0LGUud3JpdGU9Si53cml0ZSxlLnRvU3RyaW5nPUoudG9TdHJpbmcsZS50b0xvY2FsZVN0cmluZz1KLnRvU3RyaW5nLGUudG9KU09OPUoudG9KU09OLGUuZXF1YWxzPUouZXF1YWxzLGUuY29tcGFyZT1KLmNvbXBhcmUsZS5pbmRleE9mPUouaW5kZXhPZixlLmNvcHk9Si5jb3B5LGUuc2xpY2U9Si5zbGljZSxlLnJlYWRVSW50TEU9Si5yZWFkVUludExFLGUucmVhZFVJbnRCRT1KLnJlYWRVSW50QkUsZS5yZWFkVUludDg9Si5yZWFkVUludDgsZS5yZWFkVUludDE2TEU9Si5yZWFkVUludDE2TEUsZS5yZWFkVUludDE2QkU9Si5yZWFkVUludDE2QkUsZS5yZWFkVUludDMyTEU9Si5yZWFkVUludDMyTEUsZS5yZWFkVUludDMyQkU9Si5yZWFkVUludDMyQkUsZS5yZWFkSW50TEU9Si5yZWFkSW50TEUsZS5yZWFkSW50QkU9Si5yZWFkSW50QkUsZS5yZWFkSW50OD1KLnJlYWRJbnQ4LGUucmVhZEludDE2TEU9Si5yZWFkSW50MTZMRSxlLnJlYWRJbnQxNkJFPUoucmVhZEludDE2QkUsZS5yZWFkSW50MzJMRT1KLnJlYWRJbnQzMkxFLGUucmVhZEludDMyQkU9Si5yZWFkSW50MzJCRSxlLnJlYWRGbG9hdExFPUoucmVhZEZsb2F0TEUsZS5yZWFkRmxvYXRCRT1KLnJlYWRGbG9hdEJFLGUucmVhZERvdWJsZUxFPUoucmVhZERvdWJsZUxFLGUucmVhZERvdWJsZUJFPUoucmVhZERvdWJsZUJFLGUud3JpdGVVSW50OD1KLndyaXRlVUludDgsZS53cml0ZVVJbnRMRT1KLndyaXRlVUludExFLGUud3JpdGVVSW50QkU9Si53cml0ZVVJbnRCRSxlLndyaXRlVUludDE2TEU9Si53cml0ZVVJbnQxNkxFLGUud3JpdGVVSW50MTZCRT1KLndyaXRlVUludDE2QkUsZS53cml0ZVVJbnQzMkxFPUoud3JpdGVVSW50MzJMRSxlLndyaXRlVUludDMyQkU9Si53cml0ZVVJbnQzMkJFLGUud3JpdGVJbnRMRT1KLndyaXRlSW50TEUsZS53cml0ZUludEJFPUoud3JpdGVJbnRCRSxlLndyaXRlSW50OD1KLndyaXRlSW50OCxlLndyaXRlSW50MTZMRT1KLndyaXRlSW50MTZMRSxlLndyaXRlSW50MTZCRT1KLndyaXRlSW50MTZCRSxlLndyaXRlSW50MzJMRT1KLndyaXRlSW50MzJMRSxlLndyaXRlSW50MzJCRT1KLndyaXRlSW50MzJCRSxlLndyaXRlRmxvYXRMRT1KLndyaXRlRmxvYXRMRSxlLndyaXRlRmxvYXRCRT1KLndyaXRlRmxvYXRCRSxlLndyaXRlRG91YmxlTEU9Si53cml0ZURvdWJsZUxFLGUud3JpdGVEb3VibGVCRT1KLndyaXRlRG91YmxlQkUsZS5maWxsPUouZmlsbCxlLmluc3BlY3Q9Si5pbnNwZWN0LGUudG9BcnJheUJ1ZmZlcj1KLnRvQXJyYXlCdWZmZXIsZX07dmFyIHR0PS9bXitcXC8wLTlBLVphLXotX10vZ30pLmNhbGwoZSxuKDcwKS5CdWZmZXIsZnVuY3Rpb24oKXtyZXR1cm4gdGhpc30oKSl9LGZ1bmN0aW9uKHQsZSxuKXt2YXIgaT1cIkFCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXowMTIzNDU2Nzg5Ky9cIjshZnVuY3Rpb24odCl7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gZSh0KXt2YXIgZT10LmNoYXJDb2RlQXQoMCk7cmV0dXJuIGU9PT1zfHxlPT09bD82MjplPT09YXx8ZT09PWY/NjM6dT5lPy0xOnUrMTA+ZT9lLXUrMjYrMjY6YysyNj5lP2UtYzpoKzI2PmU/ZS1oKzI2OnZvaWQgMH1mdW5jdGlvbiBuKHQpe2Z1bmN0aW9uIG4odCl7aFtsKytdPXR9dmFyIGkscixzLGEsdSxoO2lmKHQubGVuZ3RoJTQ+MCl0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIHN0cmluZy4gTGVuZ3RoIG11c3QgYmUgYSBtdWx0aXBsZSBvZiA0XCIpO3ZhciBjPXQubGVuZ3RoO3U9XCI9XCI9PT10LmNoYXJBdChjLTIpPzI6XCI9XCI9PT10LmNoYXJBdChjLTEpPzE6MCxoPW5ldyBvKDMqdC5sZW5ndGgvNC11KSxzPXU+MD90Lmxlbmd0aC00OnQubGVuZ3RoO3ZhciBsPTA7Zm9yKGk9MCxyPTA7cz5pO2krPTQscis9MylhPWUodC5jaGFyQXQoaSkpPDwxOHxlKHQuY2hhckF0KGkrMSkpPDwxMnxlKHQuY2hhckF0KGkrMikpPDw2fGUodC5jaGFyQXQoaSszKSksbigoMTY3MTE2ODAmYSk+PjE2KSxuKCg2NTI4MCZhKT4+OCksbigyNTUmYSk7cmV0dXJuIDI9PT11PyhhPWUodC5jaGFyQXQoaSkpPDwyfGUodC5jaGFyQXQoaSsxKSk+PjQsbigyNTUmYSkpOjE9PT11JiYoYT1lKHQuY2hhckF0KGkpKTw8MTB8ZSh0LmNoYXJBdChpKzEpKTw8NHxlKHQuY2hhckF0KGkrMikpPj4yLG4oYT4+OCYyNTUpLG4oMjU1JmEpKSxofWZ1bmN0aW9uIHIodCl7ZnVuY3Rpb24gZSh0KXtyZXR1cm4gaS5jaGFyQXQodCl9ZnVuY3Rpb24gbih0KXtyZXR1cm4gZSh0Pj4xOCY2MykrZSh0Pj4xMiY2MykrZSh0Pj42JjYzKStlKDYzJnQpfXZhciByLG8scyxhPXQubGVuZ3RoJTMsdT1cIlwiO2ZvcihyPTAscz10Lmxlbmd0aC1hO3M+cjtyKz0zKW89KHRbcl08PDE2KSsodFtyKzFdPDw4KSt0W3IrMl0sdSs9bihvKTtzd2l0Y2goYSl7Y2FzZSAxOm89dFt0Lmxlbmd0aC0xXSx1Kz1lKG8+PjIpLHUrPWUobzw8NCY2MyksdSs9XCI9PVwiO2JyZWFrO2Nhc2UgMjpvPSh0W3QubGVuZ3RoLTJdPDw4KSt0W3QubGVuZ3RoLTFdLHUrPWUobz4+MTApLHUrPWUobz4+NCY2MyksdSs9ZShvPDwyJjYzKSx1Kz1cIj1cIn1yZXR1cm4gdX12YXIgbz1cInVuZGVmaW5lZFwiIT10eXBlb2YgVWludDhBcnJheT9VaW50OEFycmF5OkFycmF5LHM9XCIrXCIuY2hhckNvZGVBdCgwKSxhPVwiL1wiLmNoYXJDb2RlQXQoMCksdT1cIjBcIi5jaGFyQ29kZUF0KDApLGg9XCJhXCIuY2hhckNvZGVBdCgwKSxjPVwiQVwiLmNoYXJDb2RlQXQoMCksbD1cIi1cIi5jaGFyQ29kZUF0KDApLGY9XCJfXCIuY2hhckNvZGVBdCgwKTt0LnRvQnl0ZUFycmF5PW4sdC5mcm9tQnl0ZUFycmF5PXJ9KGUpfSxmdW5jdGlvbih0LGUpe2UucmVhZD1mdW5jdGlvbih0LGUsbixpLHIpe3ZhciBvLHMsYT04KnItaS0xLHU9KDE8PGEpLTEsaD11Pj4xLGM9LTcsbD1uP3ItMTowLGY9bj8tMToxLGQ9dFtlK2xdO2ZvcihsKz1mLG89ZCYoMTw8LWMpLTEsZD4+PS1jLGMrPWE7Yz4wO289MjU2Km8rdFtlK2xdLGwrPWYsYy09OCk7Zm9yKHM9byYoMTw8LWMpLTEsbz4+PS1jLGMrPWk7Yz4wO3M9MjU2KnMrdFtlK2xdLGwrPWYsYy09OCk7aWYoMD09PW8pbz0xLWg7ZWxzZXtpZihvPT09dSlyZXR1cm4gcz9OYU46KGQ/LTE6MSkqKDEvMCk7cys9TWF0aC5wb3coMixpKSxvLT1ofXJldHVybihkPy0xOjEpKnMqTWF0aC5wb3coMixvLWkpfSxlLndyaXRlPWZ1bmN0aW9uKHQsZSxuLGkscixvKXt2YXIgcyxhLHUsaD04Km8tci0xLGM9KDE8PGgpLTEsbD1jPj4xLGY9MjM9PT1yP01hdGgucG93KDIsLTI0KS1NYXRoLnBvdygyLC03Nyk6MCxkPWk/MDpvLTEscD1pPzE6LTEsZz0wPmV8fDA9PT1lJiYwPjEvZT8xOjA7Zm9yKGU9TWF0aC5hYnMoZSksaXNOYU4oZSl8fGU9PT0xLzA/KGE9aXNOYU4oZSk/MTowLHM9Yyk6KHM9TWF0aC5mbG9vcihNYXRoLmxvZyhlKS9NYXRoLkxOMiksZSoodT1NYXRoLnBvdygyLC1zKSk8MSYmKHMtLSx1Kj0yKSxlKz1zK2w+PTE/Zi91OmYqTWF0aC5wb3coMiwxLWwpLGUqdT49MiYmKHMrKyx1Lz0yKSxzK2w+PWM/KGE9MCxzPWMpOnMrbD49MT8oYT0oZSp1LTEpKk1hdGgucG93KDIscikscys9bCk6KGE9ZSpNYXRoLnBvdygyLGwtMSkqTWF0aC5wb3coMixyKSxzPTApKTtyPj04O3RbbitkXT0yNTUmYSxkKz1wLGEvPTI1NixyLT04KTtmb3Iocz1zPDxyfGEsaCs9cjtoPjA7dFtuK2RdPTI1NSZzLGQrPXAscy89MjU2LGgtPTgpO3RbbitkLXBdfD0xMjgqZ319LGZ1bmN0aW9uKHQsZSl7dmFyIG49QXJyYXkuaXNBcnJheSxpPU9iamVjdC5wcm90b3R5cGUudG9TdHJpbmc7dC5leHBvcnRzPW58fGZ1bmN0aW9uKHQpe3JldHVybiEhdCYmXCJbb2JqZWN0IEFycmF5XVwiPT1pLmNhbGwodCl9fSxmdW5jdGlvbih0LGUsbil7dmFyIGk9big3NSk7dC5leHBvcnRzPWZ1bmN0aW9uKCl7aS5sb2dnaW5nRW5hYmxlZCgpJiZjb25zb2xlLmxvZy5hcHBseShjb25zb2xlLGFyZ3VtZW50cyl9fSxmdW5jdGlvbih0LGUpe3ZhciBuPSExO3QuZXhwb3J0cz17bG9nZ2luZ0VuYWJsZWQ6ZnVuY3Rpb24odCl7cmV0dXJuIHZvaWQgMCE9PXQmJihuPXQpLG59fX0sZnVuY3Rpb24odCxlLG4pe2Z1bmN0aW9uIGkodCxlLG4pe3ZhciBpPW8odCk7cmV0dXJuIG4mJnModCxlLG4pJiYoZT12b2lkIDApLGU/cihpLGUpOml9dmFyIHI9big3Nyksbz1uKDgzKSxzPW4oODQpO3QuZXhwb3J0cz1pfSxbMTMxLDc4LDc5XSwzLFsxMzIsODAsODEsODJdLDUsNiw3LDU1LDEwLFsxMzAsODYsOTIsODhdLFsxMzEsODcsODhdLDMsWzEzMiw4OSw5MCw5MV0sNSw2LDcsWzEzMyw5Myw5NCw5NV0sOSwxMCwxMSxmdW5jdGlvbih0LGUpe2Z1bmN0aW9uIG4oKXt0aGlzLl9ldmVudHM9dGhpcy5fZXZlbnRzfHx7fSx0aGlzLl9tYXhMaXN0ZW5lcnM9dGhpcy5fbWF4TGlzdGVuZXJzfHx2b2lkIDB9ZnVuY3Rpb24gaSh0KXtyZXR1cm5cImZ1bmN0aW9uXCI9PXR5cGVvZiB0fWZ1bmN0aW9uIHIodCl7cmV0dXJuXCJudW1iZXJcIj09dHlwZW9mIHR9ZnVuY3Rpb24gbyh0KXtyZXR1cm5cIm9iamVjdFwiPT10eXBlb2YgdCYmbnVsbCE9PXR9ZnVuY3Rpb24gcyh0KXtyZXR1cm4gdm9pZCAwPT09dH10LmV4cG9ydHM9bixuLkV2ZW50RW1pdHRlcj1uLG4ucHJvdG90eXBlLl9ldmVudHM9dm9pZCAwLG4ucHJvdG90eXBlLl9tYXhMaXN0ZW5lcnM9dm9pZCAwLG4uZGVmYXVsdE1heExpc3RlbmVycz0xMCxuLnByb3RvdHlwZS5zZXRNYXhMaXN0ZW5lcnM9ZnVuY3Rpb24odCl7aWYoIXIodCl8fDA+dHx8aXNOYU4odCkpdGhyb3cgVHlwZUVycm9yKFwibiBtdXN0IGJlIGEgcG9zaXRpdmUgbnVtYmVyXCIpO3JldHVybiB0aGlzLl9tYXhMaXN0ZW5lcnM9dCx0aGlzfSxuLnByb3RvdHlwZS5lbWl0PWZ1bmN0aW9uKHQpe3ZhciBlLG4scixhLHUsaDtpZih0aGlzLl9ldmVudHN8fCh0aGlzLl9ldmVudHM9e30pLFwiZXJyb3JcIj09PXQmJighdGhpcy5fZXZlbnRzLmVycm9yfHxvKHRoaXMuX2V2ZW50cy5lcnJvcikmJiF0aGlzLl9ldmVudHMuZXJyb3IubGVuZ3RoKSl7aWYoZT1hcmd1bWVudHNbMV0sZSBpbnN0YW5jZW9mIEVycm9yKXRocm93IGU7dGhyb3cgVHlwZUVycm9yKCdVbmNhdWdodCwgdW5zcGVjaWZpZWQgXCJlcnJvclwiIGV2ZW50LicpfWlmKG49dGhpcy5fZXZlbnRzW3RdLHMobikpcmV0dXJuITE7aWYoaShuKSlzd2l0Y2goYXJndW1lbnRzLmxlbmd0aCl7Y2FzZSAxOm4uY2FsbCh0aGlzKTticmVhaztjYXNlIDI6bi5jYWxsKHRoaXMsYXJndW1lbnRzWzFdKTticmVhaztjYXNlIDM6bi5jYWxsKHRoaXMsYXJndW1lbnRzWzFdLGFyZ3VtZW50c1syXSk7YnJlYWs7ZGVmYXVsdDphPUFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywxKSxuLmFwcGx5KHRoaXMsYSl9ZWxzZSBpZihvKG4pKWZvcihhPUFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywxKSxoPW4uc2xpY2UoKSxyPWgubGVuZ3RoLHU9MDtyPnU7dSsrKWhbdV0uYXBwbHkodGhpcyxhKTtyZXR1cm4hMH0sbi5wcm90b3R5cGUuYWRkTGlzdGVuZXI9ZnVuY3Rpb24odCxlKXt2YXIgcjtpZighaShlKSl0aHJvdyBUeXBlRXJyb3IoXCJsaXN0ZW5lciBtdXN0IGJlIGEgZnVuY3Rpb25cIik7cmV0dXJuIHRoaXMuX2V2ZW50c3x8KHRoaXMuX2V2ZW50cz17fSksdGhpcy5fZXZlbnRzLm5ld0xpc3RlbmVyJiZ0aGlzLmVtaXQoXCJuZXdMaXN0ZW5lclwiLHQsaShlLmxpc3RlbmVyKT9lLmxpc3RlbmVyOmUpLHRoaXMuX2V2ZW50c1t0XT9vKHRoaXMuX2V2ZW50c1t0XSk/dGhpcy5fZXZlbnRzW3RdLnB1c2goZSk6dGhpcy5fZXZlbnRzW3RdPVt0aGlzLl9ldmVudHNbdF0sZV06dGhpcy5fZXZlbnRzW3RdPWUsbyh0aGlzLl9ldmVudHNbdF0pJiYhdGhpcy5fZXZlbnRzW3RdLndhcm5lZCYmKHI9cyh0aGlzLl9tYXhMaXN0ZW5lcnMpP24uZGVmYXVsdE1heExpc3RlbmVyczp0aGlzLl9tYXhMaXN0ZW5lcnMsciYmcj4wJiZ0aGlzLl9ldmVudHNbdF0ubGVuZ3RoPnImJih0aGlzLl9ldmVudHNbdF0ud2FybmVkPSEwLGNvbnNvbGUuZXJyb3IoXCIobm9kZSkgd2FybmluZzogcG9zc2libGUgRXZlbnRFbWl0dGVyIG1lbW9yeSBsZWFrIGRldGVjdGVkLiAlZCBsaXN0ZW5lcnMgYWRkZWQuIFVzZSBlbWl0dGVyLnNldE1heExpc3RlbmVycygpIHRvIGluY3JlYXNlIGxpbWl0LlwiLHRoaXMuX2V2ZW50c1t0XS5sZW5ndGgpLFwiZnVuY3Rpb25cIj09dHlwZW9mIGNvbnNvbGUudHJhY2UmJmNvbnNvbGUudHJhY2UoKSkpLHRoaXN9LG4ucHJvdG90eXBlLm9uPW4ucHJvdG90eXBlLmFkZExpc3RlbmVyLG4ucHJvdG90eXBlLm9uY2U9ZnVuY3Rpb24odCxlKXtmdW5jdGlvbiBuKCl7dGhpcy5yZW1vdmVMaXN0ZW5lcih0LG4pLHJ8fChyPSEwLGUuYXBwbHkodGhpcyxhcmd1bWVudHMpKX1pZighaShlKSl0aHJvdyBUeXBlRXJyb3IoXCJsaXN0ZW5lciBtdXN0IGJlIGEgZnVuY3Rpb25cIik7dmFyIHI9ITE7cmV0dXJuIG4ubGlzdGVuZXI9ZSx0aGlzLm9uKHQsbiksdGhpc30sbi5wcm90b3R5cGUucmVtb3ZlTGlzdGVuZXI9ZnVuY3Rpb24odCxlKXt2YXIgbixyLHMsYTtpZighaShlKSl0aHJvdyBUeXBlRXJyb3IoXCJsaXN0ZW5lciBtdXN0IGJlIGEgZnVuY3Rpb25cIik7aWYoIXRoaXMuX2V2ZW50c3x8IXRoaXMuX2V2ZW50c1t0XSlyZXR1cm4gdGhpcztpZihuPXRoaXMuX2V2ZW50c1t0XSxzPW4ubGVuZ3RoLHI9LTEsbj09PWV8fGkobi5saXN0ZW5lcikmJm4ubGlzdGVuZXI9PT1lKWRlbGV0ZSB0aGlzLl9ldmVudHNbdF0sdGhpcy5fZXZlbnRzLnJlbW92ZUxpc3RlbmVyJiZ0aGlzLmVtaXQoXCJyZW1vdmVMaXN0ZW5lclwiLHQsZSk7ZWxzZSBpZihvKG4pKXtmb3IoYT1zO2EtLSA+MDspaWYoblthXT09PWV8fG5bYV0ubGlzdGVuZXImJm5bYV0ubGlzdGVuZXI9PT1lKXtyPWE7YnJlYWt9aWYoMD5yKXJldHVybiB0aGlzOzE9PT1uLmxlbmd0aD8obi5sZW5ndGg9MCxkZWxldGUgdGhpcy5fZXZlbnRzW3RdKTpuLnNwbGljZShyLDEpLHRoaXMuX2V2ZW50cy5yZW1vdmVMaXN0ZW5lciYmdGhpcy5lbWl0KFwicmVtb3ZlTGlzdGVuZXJcIix0LGUpfXJldHVybiB0aGlzfSxuLnByb3RvdHlwZS5yZW1vdmVBbGxMaXN0ZW5lcnM9ZnVuY3Rpb24odCl7dmFyIGUsbjtpZighdGhpcy5fZXZlbnRzKXJldHVybiB0aGlzO2lmKCF0aGlzLl9ldmVudHMucmVtb3ZlTGlzdGVuZXIpcmV0dXJuIDA9PT1hcmd1bWVudHMubGVuZ3RoP3RoaXMuX2V2ZW50cz17fTp0aGlzLl9ldmVudHNbdF0mJmRlbGV0ZSB0aGlzLl9ldmVudHNbdF0sdGhpcztpZigwPT09YXJndW1lbnRzLmxlbmd0aCl7Zm9yKGUgaW4gdGhpcy5fZXZlbnRzKVwicmVtb3ZlTGlzdGVuZXJcIiE9PWUmJnRoaXMucmVtb3ZlQWxsTGlzdGVuZXJzKGUpO3JldHVybiB0aGlzLnJlbW92ZUFsbExpc3RlbmVycyhcInJlbW92ZUxpc3RlbmVyXCIpLHRoaXMuX2V2ZW50cz17fSx0aGlzfWlmKG49dGhpcy5fZXZlbnRzW3RdLGkobikpdGhpcy5yZW1vdmVMaXN0ZW5lcih0LG4pO2Vsc2UgaWYobilmb3IoO24ubGVuZ3RoOyl0aGlzLnJlbW92ZUxpc3RlbmVyKHQsbltuLmxlbmd0aC0xXSk7cmV0dXJuIGRlbGV0ZSB0aGlzLl9ldmVudHNbdF0sdGhpc30sbi5wcm90b3R5cGUubGlzdGVuZXJzPWZ1bmN0aW9uKHQpe3ZhciBlO3JldHVybiBlPXRoaXMuX2V2ZW50cyYmdGhpcy5fZXZlbnRzW3RdP2kodGhpcy5fZXZlbnRzW3RdKT9bdGhpcy5fZXZlbnRzW3RdXTp0aGlzLl9ldmVudHNbdF0uc2xpY2UoKTpbXX0sbi5wcm90b3R5cGUubGlzdGVuZXJDb3VudD1mdW5jdGlvbih0KXtpZih0aGlzLl9ldmVudHMpe3ZhciBlPXRoaXMuX2V2ZW50c1t0XTtpZihpKGUpKXJldHVybiAxO2lmKGUpcmV0dXJuIGUubGVuZ3RofXJldHVybiAwfSxuLmxpc3RlbmVyQ291bnQ9ZnVuY3Rpb24odCxlKXtyZXR1cm4gdC5saXN0ZW5lckNvdW50KGUpfX0sZnVuY3Rpb24odCxlLG4pe2Z1bmN0aW9uIGkoKXtyLmNhbGwodGhpcyl9dC5leHBvcnRzPWk7dmFyIHI9big5NikuRXZlbnRFbWl0dGVyLG89big5OCk7byhpLHIpLGkuUmVhZGFibGU9big5OSksaS5Xcml0YWJsZT1uKDExMSksaS5EdXBsZXg9bigxMTIpLGkuVHJhbnNmb3JtPW4oMTEzKSxpLlBhc3NUaHJvdWdoPW4oMTE0KSxpLlN0cmVhbT1pLGkucHJvdG90eXBlLnBpcGU9ZnVuY3Rpb24odCxlKXtmdW5jdGlvbiBuKGUpe3Qud3JpdGFibGUmJiExPT09dC53cml0ZShlKSYmaC5wYXVzZSYmaC5wYXVzZSgpfWZ1bmN0aW9uIGkoKXtoLnJlYWRhYmxlJiZoLnJlc3VtZSYmaC5yZXN1bWUoKX1mdW5jdGlvbiBvKCl7Y3x8KGM9ITAsdC5lbmQoKSl9ZnVuY3Rpb24gcygpe2N8fChjPSEwLFwiZnVuY3Rpb25cIj09dHlwZW9mIHQuZGVzdHJveSYmdC5kZXN0cm95KCkpfWZ1bmN0aW9uIGEodCl7aWYodSgpLDA9PT1yLmxpc3RlbmVyQ291bnQodGhpcyxcImVycm9yXCIpKXRocm93IHR9ZnVuY3Rpb24gdSgpe2gucmVtb3ZlTGlzdGVuZXIoXCJkYXRhXCIsbiksdC5yZW1vdmVMaXN0ZW5lcihcImRyYWluXCIsaSksaC5yZW1vdmVMaXN0ZW5lcihcImVuZFwiLG8pLGgucmVtb3ZlTGlzdGVuZXIoXCJjbG9zZVwiLHMpLGgucmVtb3ZlTGlzdGVuZXIoXCJlcnJvclwiLGEpLHQucmVtb3ZlTGlzdGVuZXIoXCJlcnJvclwiLGEpLGgucmVtb3ZlTGlzdGVuZXIoXCJlbmRcIix1KSxoLnJlbW92ZUxpc3RlbmVyKFwiY2xvc2VcIix1KSx0LnJlbW92ZUxpc3RlbmVyKFwiY2xvc2VcIix1KX12YXIgaD10aGlzO2gub24oXCJkYXRhXCIsbiksdC5vbihcImRyYWluXCIsaSksdC5faXNTdGRpb3x8ZSYmZS5lbmQ9PT0hMXx8KGgub24oXCJlbmRcIixvKSxoLm9uKFwiY2xvc2VcIixzKSk7dmFyIGM9ITE7cmV0dXJuIGgub24oXCJlcnJvclwiLGEpLHQub24oXCJlcnJvclwiLGEpLGgub24oXCJlbmRcIix1KSxoLm9uKFwiY2xvc2VcIix1KSx0Lm9uKFwiY2xvc2VcIix1KSx0LmVtaXQoXCJwaXBlXCIsaCksdH19LGZ1bmN0aW9uKHQsZSl7XCJmdW5jdGlvblwiPT10eXBlb2YgT2JqZWN0LmNyZWF0ZT90LmV4cG9ydHM9ZnVuY3Rpb24odCxlKXt0LnN1cGVyXz1lLHQucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoZS5wcm90b3R5cGUse2NvbnN0cnVjdG9yOnt2YWx1ZTp0LGVudW1lcmFibGU6ITEsd3JpdGFibGU6ITAsY29uZmlndXJhYmxlOiEwfX0pfTp0LmV4cG9ydHM9ZnVuY3Rpb24odCxlKXt0LnN1cGVyXz1lO3ZhciBuPWZ1bmN0aW9uKCl7fTtuLnByb3RvdHlwZT1lLnByb3RvdHlwZSx0LnByb3RvdHlwZT1uZXcgbix0LnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj10fX0sZnVuY3Rpb24odCxlLG4pe2U9dC5leHBvcnRzPW4oMTAwKSxlLlN0cmVhbT1uKDk3KSxlLlJlYWRhYmxlPWUsZS5Xcml0YWJsZT1uKDEwNyksZS5EdXBsZXg9bigxMDYpLGUuVHJhbnNmb3JtPW4oMTA5KSxlLlBhc3NUaHJvdWdoPW4oMTEwKX0sZnVuY3Rpb24odCxlLG4peyhmdW5jdGlvbihlKXtmdW5jdGlvbiBpKHQsZSl7dmFyIGk9bigxMDYpO3Q9dHx8e307dmFyIHI9dC5oaWdoV2F0ZXJNYXJrLG89dC5vYmplY3RNb2RlPzE2OjE2Mzg0O3RoaXMuaGlnaFdhdGVyTWFyaz1yfHwwPT09cj9yOm8sdGhpcy5oaWdoV2F0ZXJNYXJrPX5+dGhpcy5oaWdoV2F0ZXJNYXJrLHRoaXMuYnVmZmVyPVtdLHRoaXMubGVuZ3RoPTAsdGhpcy5waXBlcz1udWxsLHRoaXMucGlwZXNDb3VudD0wLHRoaXMuZmxvd2luZz1udWxsLHRoaXMuZW5kZWQ9ITEsdGhpcy5lbmRFbWl0dGVkPSExLHRoaXMucmVhZGluZz0hMSx0aGlzLnN5bmM9ITAsdGhpcy5uZWVkUmVhZGFibGU9ITEsdGhpcy5lbWl0dGVkUmVhZGFibGU9ITEsdGhpcy5yZWFkYWJsZUxpc3RlbmluZz0hMSx0aGlzLm9iamVjdE1vZGU9ISF0Lm9iamVjdE1vZGUsZSBpbnN0YW5jZW9mIGkmJih0aGlzLm9iamVjdE1vZGU9dGhpcy5vYmplY3RNb2RlfHwhIXQucmVhZGFibGVPYmplY3RNb2RlKSx0aGlzLmRlZmF1bHRFbmNvZGluZz10LmRlZmF1bHRFbmNvZGluZ3x8XCJ1dGY4XCIsdGhpcy5yYW5PdXQ9ITEsdGhpcy5hd2FpdERyYWluPTAsdGhpcy5yZWFkaW5nTW9yZT0hMSx0aGlzLmRlY29kZXI9bnVsbCx0aGlzLmVuY29kaW5nPW51bGwsdC5lbmNvZGluZyYmKEx8fChMPW4oMTA4KS5TdHJpbmdEZWNvZGVyKSx0aGlzLmRlY29kZXI9bmV3IEwodC5lbmNvZGluZyksdGhpcy5lbmNvZGluZz10LmVuY29kaW5nKX1mdW5jdGlvbiByKHQpe3JldHVybiBuKDEwNiksdGhpcyBpbnN0YW5jZW9mIHI/KHRoaXMuX3JlYWRhYmxlU3RhdGU9bmV3IGkodCx0aGlzKSx0aGlzLnJlYWRhYmxlPSEwLHZvaWQgUC5jYWxsKHRoaXMpKTpuZXcgcih0KX1mdW5jdGlvbiBvKHQsZSxuLGkscil7dmFyIG89aChlLG4pO2lmKG8pdC5lbWl0KFwiZXJyb3JcIixvKTtlbHNlIGlmKEkuaXNOdWxsT3JVbmRlZmluZWQobikpZS5yZWFkaW5nPSExLGUuZW5kZWR8fGModCxlKTtlbHNlIGlmKGUub2JqZWN0TW9kZXx8biYmbi5sZW5ndGg+MClpZihlLmVuZGVkJiYhcil7dmFyIGE9bmV3IEVycm9yKFwic3RyZWFtLnB1c2goKSBhZnRlciBFT0ZcIik7dC5lbWl0KFwiZXJyb3JcIixhKX1lbHNlIGlmKGUuZW5kRW1pdHRlZCYmcil7dmFyIGE9bmV3IEVycm9yKFwic3RyZWFtLnVuc2hpZnQoKSBhZnRlciBlbmQgZXZlbnRcIik7dC5lbWl0KFwiZXJyb3JcIixhKX1lbHNlIWUuZGVjb2Rlcnx8cnx8aXx8KG49ZS5kZWNvZGVyLndyaXRlKG4pKSxyfHwoZS5yZWFkaW5nPSExKSxlLmZsb3dpbmcmJjA9PT1lLmxlbmd0aCYmIWUuc3luYz8odC5lbWl0KFwiZGF0YVwiLG4pLHQucmVhZCgwKSk6KGUubGVuZ3RoKz1lLm9iamVjdE1vZGU/MTpuLmxlbmd0aCxyP2UuYnVmZmVyLnVuc2hpZnQobik6ZS5idWZmZXIucHVzaChuKSxlLm5lZWRSZWFkYWJsZSYmbCh0KSksZCh0LGUpO2Vsc2Ugcnx8KGUucmVhZGluZz0hMSk7cmV0dXJuIHMoZSl9ZnVuY3Rpb24gcyh0KXtyZXR1cm4hdC5lbmRlZCYmKHQubmVlZFJlYWRhYmxlfHx0Lmxlbmd0aDx0LmhpZ2hXYXRlck1hcmt8fDA9PT10Lmxlbmd0aCl9ZnVuY3Rpb24gYSh0KXtpZih0Pj1SKXQ9UjtlbHNle3QtLTtmb3IodmFyIGU9MTszMj5lO2U8PD0xKXR8PXQ+PmU7dCsrfXJldHVybiB0fWZ1bmN0aW9uIHUodCxlKXtyZXR1cm4gMD09PWUubGVuZ3RoJiZlLmVuZGVkPzA6ZS5vYmplY3RNb2RlPzA9PT10PzA6MTppc05hTih0KXx8SS5pc051bGwodCk/ZS5mbG93aW5nJiZlLmJ1ZmZlci5sZW5ndGg/ZS5idWZmZXJbMF0ubGVuZ3RoOmUubGVuZ3RoOjA+PXQ/MDoodD5lLmhpZ2hXYXRlck1hcmsmJihlLmhpZ2hXYXRlck1hcms9YSh0KSksdD5lLmxlbmd0aD9lLmVuZGVkP2UubGVuZ3RoOihlLm5lZWRSZWFkYWJsZT0hMCwwKTp0KX1mdW5jdGlvbiBoKHQsZSl7dmFyIG49bnVsbDtyZXR1cm4gSS5pc0J1ZmZlcihlKXx8SS5pc1N0cmluZyhlKXx8SS5pc051bGxPclVuZGVmaW5lZChlKXx8dC5vYmplY3RNb2RlfHwobj1uZXcgVHlwZUVycm9yKFwiSW52YWxpZCBub24tc3RyaW5nL2J1ZmZlciBjaHVua1wiKSksbn1mdW5jdGlvbiBjKHQsZSl7aWYoZS5kZWNvZGVyJiYhZS5lbmRlZCl7dmFyIG49ZS5kZWNvZGVyLmVuZCgpO24mJm4ubGVuZ3RoJiYoZS5idWZmZXIucHVzaChuKSxlLmxlbmd0aCs9ZS5vYmplY3RNb2RlPzE6bi5sZW5ndGgpfWUuZW5kZWQ9ITAsbCh0KX1mdW5jdGlvbiBsKHQpe3ZhciBuPXQuX3JlYWRhYmxlU3RhdGU7bi5uZWVkUmVhZGFibGU9ITEsbi5lbWl0dGVkUmVhZGFibGV8fChPKFwiZW1pdFJlYWRhYmxlXCIsbi5mbG93aW5nKSxuLmVtaXR0ZWRSZWFkYWJsZT0hMCxuLnN5bmM/ZS5uZXh0VGljayhmdW5jdGlvbigpe2YodCl9KTpmKHQpKX1mdW5jdGlvbiBmKHQpe08oXCJlbWl0IHJlYWRhYmxlXCIpLHQuZW1pdChcInJlYWRhYmxlXCIpLHkodCl9ZnVuY3Rpb24gZCh0LG4pe24ucmVhZGluZ01vcmV8fChuLnJlYWRpbmdNb3JlPSEwLGUubmV4dFRpY2soZnVuY3Rpb24oKXtwKHQsbil9KSl9ZnVuY3Rpb24gcCh0LGUpe2Zvcih2YXIgbj1lLmxlbmd0aDshZS5yZWFkaW5nJiYhZS5mbG93aW5nJiYhZS5lbmRlZCYmZS5sZW5ndGg8ZS5oaWdoV2F0ZXJNYXJrJiYoTyhcIm1heWJlUmVhZE1vcmUgcmVhZCAwXCIpLHQucmVhZCgwKSxuIT09ZS5sZW5ndGgpOyluPWUubGVuZ3RoO2UucmVhZGluZ01vcmU9ITF9ZnVuY3Rpb24gZyh0KXtyZXR1cm4gZnVuY3Rpb24oKXt2YXIgZT10Ll9yZWFkYWJsZVN0YXRlO08oXCJwaXBlT25EcmFpblwiLGUuYXdhaXREcmFpbiksZS5hd2FpdERyYWluJiZlLmF3YWl0RHJhaW4tLSwwPT09ZS5hd2FpdERyYWluJiZiLmxpc3RlbmVyQ291bnQodCxcImRhdGFcIikmJihlLmZsb3dpbmc9ITAseSh0KSl9fWZ1bmN0aW9uIF8odCxuKXtuLnJlc3VtZVNjaGVkdWxlZHx8KG4ucmVzdW1lU2NoZWR1bGVkPSEwLGUubmV4dFRpY2soZnVuY3Rpb24oKXttKHQsbil9KSl9ZnVuY3Rpb24gbSh0LGUpe2UucmVzdW1lU2NoZWR1bGVkPSExLHQuZW1pdChcInJlc3VtZVwiKSx5KHQpLGUuZmxvd2luZyYmIWUucmVhZGluZyYmdC5yZWFkKDApfWZ1bmN0aW9uIHkodCl7dmFyIGU9dC5fcmVhZGFibGVTdGF0ZTtpZihPKFwiZmxvd1wiLGUuZmxvd2luZyksZS5mbG93aW5nKWRvIHZhciBuPXQucmVhZCgpO3doaWxlKG51bGwhPT1uJiZlLmZsb3dpbmcpfWZ1bmN0aW9uIHYodCxlKXt2YXIgbixpPWUuYnVmZmVyLHI9ZS5sZW5ndGgsbz0hIWUuZGVjb2RlcixzPSEhZS5vYmplY3RNb2RlO2lmKDA9PT1pLmxlbmd0aClyZXR1cm4gbnVsbDtpZigwPT09ciluPW51bGw7ZWxzZSBpZihzKW49aS5zaGlmdCgpO2Vsc2UgaWYoIXR8fHQ+PXIpbj1vP2kuam9pbihcIlwiKTpULmNvbmNhdChpLHIpLGkubGVuZ3RoPTA7ZWxzZSBpZih0PGlbMF0ubGVuZ3RoKXt2YXIgYT1pWzBdO249YS5zbGljZSgwLHQpLGlbMF09YS5zbGljZSh0KX1lbHNlIGlmKHQ9PT1pWzBdLmxlbmd0aCluPWkuc2hpZnQoKTtlbHNle249bz9cIlwiOm5ldyBUKHQpO2Zvcih2YXIgdT0wLGg9MCxjPWkubGVuZ3RoO2M+aCYmdD51O2grKyl7dmFyIGE9aVswXSxsPU1hdGgubWluKHQtdSxhLmxlbmd0aCk7bz9uKz1hLnNsaWNlKDAsbCk6YS5jb3B5KG4sdSwwLGwpLGw8YS5sZW5ndGg/aVswXT1hLnNsaWNlKGwpOmkuc2hpZnQoKSx1Kz1sfX1yZXR1cm4gbn1mdW5jdGlvbiBFKHQpe3ZhciBuPXQuX3JlYWRhYmxlU3RhdGU7aWYobi5sZW5ndGg+MCl0aHJvdyBuZXcgRXJyb3IoXCJlbmRSZWFkYWJsZSBjYWxsZWQgb24gbm9uLWVtcHR5IHN0cmVhbVwiKTtuLmVuZEVtaXR0ZWR8fChuLmVuZGVkPSEwLGUubmV4dFRpY2soZnVuY3Rpb24oKXtuLmVuZEVtaXR0ZWR8fDAhPT1uLmxlbmd0aHx8KG4uZW5kRW1pdHRlZD0hMCx0LnJlYWRhYmxlPSExLHQuZW1pdChcImVuZFwiKSl9KSl9ZnVuY3Rpb24gUyh0LGUpe2Zvcih2YXIgbj0wLGk9dC5sZW5ndGg7aT5uO24rKyllKHRbbl0sbil9ZnVuY3Rpb24gQSh0LGUpe2Zvcih2YXIgbj0wLGk9dC5sZW5ndGg7aT5uO24rKylpZih0W25dPT09ZSlyZXR1cm4gbjtyZXR1cm4tMX10LmV4cG9ydHM9cjt2YXIgdz1uKDEwMiksVD1uKDcwKS5CdWZmZXI7ci5SZWFkYWJsZVN0YXRlPWk7dmFyIGI9big5NikuRXZlbnRFbWl0dGVyO2IubGlzdGVuZXJDb3VudHx8KGIubGlzdGVuZXJDb3VudD1mdW5jdGlvbih0LGUpe3JldHVybiB0Lmxpc3RlbmVycyhlKS5sZW5ndGh9KTt2YXIgUD1uKDk3KSxJPW4oMTAzKTtJLmluaGVyaXRzPW4oMTA0KTt2YXIgTCxPPW4oMTA1KTtPPU8mJk8uZGVidWdsb2c/Ty5kZWJ1Z2xvZyhcInN0cmVhbVwiKTpmdW5jdGlvbigpe30sSS5pbmhlcml0cyhyLFApLHIucHJvdG90eXBlLnB1c2g9ZnVuY3Rpb24odCxlKXt2YXIgbj10aGlzLl9yZWFkYWJsZVN0YXRlO3JldHVybiBJLmlzU3RyaW5nKHQpJiYhbi5vYmplY3RNb2RlJiYoZT1lfHxuLmRlZmF1bHRFbmNvZGluZyxlIT09bi5lbmNvZGluZyYmKHQ9bmV3IFQodCxlKSxlPVwiXCIpKSxvKHRoaXMsbix0LGUsITEpfSxyLnByb3RvdHlwZS51bnNoaWZ0PWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuX3JlYWRhYmxlU3RhdGU7cmV0dXJuIG8odGhpcyxlLHQsXCJcIiwhMCl9LHIucHJvdG90eXBlLnNldEVuY29kaW5nPWZ1bmN0aW9uKHQpe3JldHVybiBMfHwoTD1uKDEwOCkuU3RyaW5nRGVjb2RlciksdGhpcy5fcmVhZGFibGVTdGF0ZS5kZWNvZGVyPW5ldyBMKHQpLHRoaXMuX3JlYWRhYmxlU3RhdGUuZW5jb2Rpbmc9dCx0aGlzfTt2YXIgUj04Mzg4NjA4O3IucHJvdG90eXBlLnJlYWQ9ZnVuY3Rpb24odCl7TyhcInJlYWRcIix0KTt2YXIgZT10aGlzLl9yZWFkYWJsZVN0YXRlLG49dDtpZigoIUkuaXNOdW1iZXIodCl8fHQ+MCkmJihlLmVtaXR0ZWRSZWFkYWJsZT0hMSksMD09PXQmJmUubmVlZFJlYWRhYmxlJiYoZS5sZW5ndGg+PWUuaGlnaFdhdGVyTWFya3x8ZS5lbmRlZCkpcmV0dXJuIE8oXCJyZWFkOiBlbWl0UmVhZGFibGVcIixlLmxlbmd0aCxlLmVuZGVkKSwwPT09ZS5sZW5ndGgmJmUuZW5kZWQ/RSh0aGlzKTpsKHRoaXMpLG51bGw7aWYodD11KHQsZSksMD09PXQmJmUuZW5kZWQpcmV0dXJuIDA9PT1lLmxlbmd0aCYmRSh0aGlzKSxudWxsO3ZhciBpPWUubmVlZFJlYWRhYmxlO08oXCJuZWVkIHJlYWRhYmxlXCIsaSksKDA9PT1lLmxlbmd0aHx8ZS5sZW5ndGgtdDxlLmhpZ2hXYXRlck1hcmspJiYoaT0hMCxPKFwibGVuZ3RoIGxlc3MgdGhhbiB3YXRlcm1hcmtcIixpKSksKGUuZW5kZWR8fGUucmVhZGluZykmJihpPSExLE8oXCJyZWFkaW5nIG9yIGVuZGVkXCIsaSkpLGkmJihPKFwiZG8gcmVhZFwiKSxlLnJlYWRpbmc9ITAsZS5zeW5jPSEwLDA9PT1lLmxlbmd0aCYmKGUubmVlZFJlYWRhYmxlPSEwKSx0aGlzLl9yZWFkKGUuaGlnaFdhdGVyTWFyayksZS5zeW5jPSExKSxpJiYhZS5yZWFkaW5nJiYodD11KG4sZSkpO3ZhciByO3JldHVybiByPXQ+MD92KHQsZSk6bnVsbCxJLmlzTnVsbChyKSYmKGUubmVlZFJlYWRhYmxlPSEwLHQ9MCksZS5sZW5ndGgtPXQsMCE9PWUubGVuZ3RofHxlLmVuZGVkfHwoZS5uZWVkUmVhZGFibGU9ITApLG4hPT10JiZlLmVuZGVkJiYwPT09ZS5sZW5ndGgmJkUodGhpcyksSS5pc051bGwocil8fHRoaXMuZW1pdChcImRhdGFcIixyKSxyfSxyLnByb3RvdHlwZS5fcmVhZD1mdW5jdGlvbih0KXt0aGlzLmVtaXQoXCJlcnJvclwiLG5ldyBFcnJvcihcIm5vdCBpbXBsZW1lbnRlZFwiKSl9LHIucHJvdG90eXBlLnBpcGU9ZnVuY3Rpb24odCxuKXtmdW5jdGlvbiBpKHQpe08oXCJvbnVucGlwZVwiKSx0PT09bCYmbygpfWZ1bmN0aW9uIHIoKXtPKFwib25lbmRcIiksdC5lbmQoKX1mdW5jdGlvbiBvKCl7TyhcImNsZWFudXBcIiksdC5yZW1vdmVMaXN0ZW5lcihcImNsb3NlXCIsdSksdC5yZW1vdmVMaXN0ZW5lcihcImZpbmlzaFwiLGgpLHQucmVtb3ZlTGlzdGVuZXIoXCJkcmFpblwiLF8pLHQucmVtb3ZlTGlzdGVuZXIoXCJlcnJvclwiLGEpLHQucmVtb3ZlTGlzdGVuZXIoXCJ1bnBpcGVcIixpKSxsLnJlbW92ZUxpc3RlbmVyKFwiZW5kXCIsciksbC5yZW1vdmVMaXN0ZW5lcihcImVuZFwiLG8pLGwucmVtb3ZlTGlzdGVuZXIoXCJkYXRhXCIscyksIWYuYXdhaXREcmFpbnx8dC5fd3JpdGFibGVTdGF0ZSYmIXQuX3dyaXRhYmxlU3RhdGUubmVlZERyYWlufHxfKCl9ZnVuY3Rpb24gcyhlKXtPKFwib25kYXRhXCIpO3ZhciBuPXQud3JpdGUoZSk7ITE9PT1uJiYoTyhcImZhbHNlIHdyaXRlIHJlc3BvbnNlLCBwYXVzZVwiLGwuX3JlYWRhYmxlU3RhdGUuYXdhaXREcmFpbiksbC5fcmVhZGFibGVTdGF0ZS5hd2FpdERyYWluKyssbC5wYXVzZSgpKX1mdW5jdGlvbiBhKGUpe08oXCJvbmVycm9yXCIsZSksYygpLHQucmVtb3ZlTGlzdGVuZXIoXCJlcnJvclwiLGEpLDA9PT1iLmxpc3RlbmVyQ291bnQodCxcImVycm9yXCIpJiZ0LmVtaXQoXCJlcnJvclwiLGUpfWZ1bmN0aW9uIHUoKXt0LnJlbW92ZUxpc3RlbmVyKFwiZmluaXNoXCIsaCksYygpfWZ1bmN0aW9uIGgoKXtPKFwib25maW5pc2hcIiksdC5yZW1vdmVMaXN0ZW5lcihcImNsb3NlXCIsdSksYygpfWZ1bmN0aW9uIGMoKXtPKFwidW5waXBlXCIpLGwudW5waXBlKHQpfXZhciBsPXRoaXMsZj10aGlzLl9yZWFkYWJsZVN0YXRlO3N3aXRjaChmLnBpcGVzQ291bnQpe2Nhc2UgMDpmLnBpcGVzPXQ7YnJlYWs7Y2FzZSAxOmYucGlwZXM9W2YucGlwZXMsdF07YnJlYWs7ZGVmYXVsdDpmLnBpcGVzLnB1c2godCl9Zi5waXBlc0NvdW50Kz0xLE8oXCJwaXBlIGNvdW50PSVkIG9wdHM9JWpcIixmLnBpcGVzQ291bnQsbik7dmFyIGQ9KCFufHxuLmVuZCE9PSExKSYmdCE9PWUuc3Rkb3V0JiZ0IT09ZS5zdGRlcnIscD1kP3I6bztmLmVuZEVtaXR0ZWQ/ZS5uZXh0VGljayhwKTpsLm9uY2UoXCJlbmRcIixwKSx0Lm9uKFwidW5waXBlXCIsaSk7dmFyIF89ZyhsKTtyZXR1cm4gdC5vbihcImRyYWluXCIsXyksbC5vbihcImRhdGFcIixzKSx0Ll9ldmVudHMmJnQuX2V2ZW50cy5lcnJvcj93KHQuX2V2ZW50cy5lcnJvcik/dC5fZXZlbnRzLmVycm9yLnVuc2hpZnQoYSk6dC5fZXZlbnRzLmVycm9yPVthLHQuX2V2ZW50cy5lcnJvcl06dC5vbihcImVycm9yXCIsYSksdC5vbmNlKFwiY2xvc2VcIix1KSx0Lm9uY2UoXCJmaW5pc2hcIixoKSx0LmVtaXQoXCJwaXBlXCIsbCksZi5mbG93aW5nfHwoTyhcInBpcGUgcmVzdW1lXCIpLGwucmVzdW1lKCkpLHR9LHIucHJvdG90eXBlLnVucGlwZT1mdW5jdGlvbih0KXt2YXIgZT10aGlzLl9yZWFkYWJsZVN0YXRlO2lmKDA9PT1lLnBpcGVzQ291bnQpcmV0dXJuIHRoaXM7aWYoMT09PWUucGlwZXNDb3VudClyZXR1cm4gdCYmdCE9PWUucGlwZXM/dGhpczoodHx8KHQ9ZS5waXBlcyksZS5waXBlcz1udWxsLGUucGlwZXNDb3VudD0wLGUuZmxvd2luZz0hMSx0JiZ0LmVtaXQoXCJ1bnBpcGVcIix0aGlzKSx0aGlzKTtpZighdCl7dmFyIG49ZS5waXBlcyxpPWUucGlwZXNDb3VudDtlLnBpcGVzPW51bGwsZS5waXBlc0NvdW50PTAsZS5mbG93aW5nPSExO2Zvcih2YXIgcj0wO2k+cjtyKyspbltyXS5lbWl0KFwidW5waXBlXCIsdGhpcyk7cmV0dXJuIHRoaXN9dmFyIHI9QShlLnBpcGVzLHQpO3JldHVybi0xPT09cj90aGlzOihlLnBpcGVzLnNwbGljZShyLDEpLGUucGlwZXNDb3VudC09MSwxPT09ZS5waXBlc0NvdW50JiYoZS5waXBlcz1lLnBpcGVzWzBdKSx0LmVtaXQoXCJ1bnBpcGVcIix0aGlzKSx0aGlzKX0sci5wcm90b3R5cGUub249ZnVuY3Rpb24odCxuKXt2YXIgaT1QLnByb3RvdHlwZS5vbi5jYWxsKHRoaXMsdCxuKTtpZihcImRhdGFcIj09PXQmJiExIT09dGhpcy5fcmVhZGFibGVTdGF0ZS5mbG93aW5nJiZ0aGlzLnJlc3VtZSgpLFwicmVhZGFibGVcIj09PXQmJnRoaXMucmVhZGFibGUpe3ZhciByPXRoaXMuX3JlYWRhYmxlU3RhdGU7aWYoIXIucmVhZGFibGVMaXN0ZW5pbmcpaWYoci5yZWFkYWJsZUxpc3RlbmluZz0hMCxyLmVtaXR0ZWRSZWFkYWJsZT0hMSxyLm5lZWRSZWFkYWJsZT0hMCxyLnJlYWRpbmcpci5sZW5ndGgmJmwodGhpcyxyKTtlbHNle3ZhciBvPXRoaXM7ZS5uZXh0VGljayhmdW5jdGlvbigpe08oXCJyZWFkYWJsZSBuZXh0dGljayByZWFkIDBcIiksby5yZWFkKDApfSl9fXJldHVybiBpfSxyLnByb3RvdHlwZS5hZGRMaXN0ZW5lcj1yLnByb3RvdHlwZS5vbixyLnByb3RvdHlwZS5yZXN1bWU9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLl9yZWFkYWJsZVN0YXRlO3JldHVybiB0LmZsb3dpbmd8fChPKFwicmVzdW1lXCIpLHQuZmxvd2luZz0hMCx0LnJlYWRpbmd8fChPKFwicmVzdW1lIHJlYWQgMFwiKSx0aGlzLnJlYWQoMCkpLF8odGhpcyx0KSksdGhpc30sci5wcm90b3R5cGUucGF1c2U9ZnVuY3Rpb24oKXtyZXR1cm4gTyhcImNhbGwgcGF1c2UgZmxvd2luZz0lalwiLHRoaXMuX3JlYWRhYmxlU3RhdGUuZmxvd2luZyksITEhPT10aGlzLl9yZWFkYWJsZVN0YXRlLmZsb3dpbmcmJihPKFwicGF1c2VcIiksdGhpcy5fcmVhZGFibGVTdGF0ZS5mbG93aW5nPSExLHRoaXMuZW1pdChcInBhdXNlXCIpKSx0aGlzfSxyLnByb3RvdHlwZS53cmFwPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuX3JlYWRhYmxlU3RhdGUsbj0hMSxpPXRoaXM7dC5vbihcImVuZFwiLGZ1bmN0aW9uKCl7aWYoTyhcIndyYXBwZWQgZW5kXCIpLGUuZGVjb2RlciYmIWUuZW5kZWQpe3ZhciB0PWUuZGVjb2Rlci5lbmQoKTt0JiZ0Lmxlbmd0aCYmaS5wdXNoKHQpfWkucHVzaChudWxsKX0pLHQub24oXCJkYXRhXCIsZnVuY3Rpb24ocil7aWYoTyhcIndyYXBwZWQgZGF0YVwiKSxlLmRlY29kZXImJihyPWUuZGVjb2Rlci53cml0ZShyKSksciYmKGUub2JqZWN0TW9kZXx8ci5sZW5ndGgpKXt2YXIgbz1pLnB1c2gocik7b3x8KG49ITAsdC5wYXVzZSgpKX19KTtmb3IodmFyIHIgaW4gdClJLmlzRnVuY3Rpb24odFtyXSkmJkkuaXNVbmRlZmluZWQodGhpc1tyXSkmJih0aGlzW3JdPWZ1bmN0aW9uKGUpe3JldHVybiBmdW5jdGlvbigpe3JldHVybiB0W2VdLmFwcGx5KHQsYXJndW1lbnRzKX19KHIpKTt2YXIgbz1bXCJlcnJvclwiLFwiY2xvc2VcIixcImRlc3Ryb3lcIixcInBhdXNlXCIsXCJyZXN1bWVcIl07cmV0dXJuIFMobyxmdW5jdGlvbihlKXt0Lm9uKGUsaS5lbWl0LmJpbmQoaSxlKSl9KSxpLl9yZWFkPWZ1bmN0aW9uKGUpe08oXCJ3cmFwcGVkIF9yZWFkXCIsZSksbiYmKG49ITEsdC5yZXN1bWUoKSl9LGl9LHIuX2Zyb21MaXN0PXZ9KS5jYWxsKGUsbigxMDEpKX0sZnVuY3Rpb24odCxlKXtmdW5jdGlvbiBuKCl7aD0hMSxzLmxlbmd0aD91PXMuY29uY2F0KHUpOmM9LTEsdS5sZW5ndGgmJmkoKX1mdW5jdGlvbiBpKCl7aWYoIWgpe3ZhciB0PXNldFRpbWVvdXQobik7aD0hMDtmb3IodmFyIGU9dS5sZW5ndGg7ZTspe2ZvcihzPXUsdT1bXTsrK2M8ZTspcyYmc1tjXS5ydW4oKTtjPS0xLGU9dS5sZW5ndGh9cz1udWxsLGg9ITEsY2xlYXJUaW1lb3V0KHQpfX1mdW5jdGlvbiByKHQsZSl7dGhpcy5mdW49dCx0aGlzLmFycmF5PWV9ZnVuY3Rpb24gbygpe312YXIgcyxhPXQuZXhwb3J0cz17fSx1PVtdLGg9ITEsYz0tMTthLm5leHRUaWNrPWZ1bmN0aW9uKHQpe3ZhciBlPW5ldyBBcnJheShhcmd1bWVudHMubGVuZ3RoLTEpO2lmKGFyZ3VtZW50cy5sZW5ndGg+MSlmb3IodmFyIG49MTtuPGFyZ3VtZW50cy5sZW5ndGg7bisrKWVbbi0xXT1hcmd1bWVudHNbbl07dS5wdXNoKG5ldyByKHQsZSkpLDEhPT11Lmxlbmd0aHx8aHx8c2V0VGltZW91dChpLDApfSxyLnByb3RvdHlwZS5ydW49ZnVuY3Rpb24oKXt0aGlzLmZ1bi5hcHBseShudWxsLHRoaXMuYXJyYXkpfSxhLnRpdGxlPVwiYnJvd3NlclwiLGEuYnJvd3Nlcj0hMCxhLmVudj17fSxhLmFyZ3Y9W10sYS52ZXJzaW9uPVwiXCIsYS52ZXJzaW9ucz17fSxhLm9uPW8sYS5hZGRMaXN0ZW5lcj1vLGEub25jZT1vLGEub2ZmPW8sYS5yZW1vdmVMaXN0ZW5lcj1vLGEucmVtb3ZlQWxsTGlzdGVuZXJzPW8sYS5lbWl0PW8sYS5iaW5kaW5nPWZ1bmN0aW9uKHQpe3Rocm93IG5ldyBFcnJvcihcInByb2Nlc3MuYmluZGluZyBpcyBub3Qgc3VwcG9ydGVkXCIpfSxhLmN3ZD1mdW5jdGlvbigpe3JldHVyblwiL1wifSxhLmNoZGlyPWZ1bmN0aW9uKHQpe3Rocm93IG5ldyBFcnJvcihcInByb2Nlc3MuY2hkaXIgaXMgbm90IHN1cHBvcnRlZFwiKX0sYS51bWFzaz1mdW5jdGlvbigpe3JldHVybiAwfX0sZnVuY3Rpb24odCxlKXt0LmV4cG9ydHM9QXJyYXkuaXNBcnJheXx8ZnVuY3Rpb24odCl7cmV0dXJuXCJbb2JqZWN0IEFycmF5XVwiPT1PYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwodCl9fSxmdW5jdGlvbih0LGUsbil7KGZ1bmN0aW9uKHQpe2Z1bmN0aW9uIG4odCl7cmV0dXJuIEFycmF5LmlzQXJyYXk/QXJyYXkuaXNBcnJheSh0KTpcIltvYmplY3QgQXJyYXldXCI9PT1fKHQpfWZ1bmN0aW9uIGkodCl7cmV0dXJuXCJib29sZWFuXCI9PXR5cGVvZiB0fWZ1bmN0aW9uIHIodCl7cmV0dXJuIG51bGw9PT10fWZ1bmN0aW9uIG8odCl7cmV0dXJuIG51bGw9PXR9ZnVuY3Rpb24gcyh0KXtyZXR1cm5cIm51bWJlclwiPT10eXBlb2YgdH1mdW5jdGlvbiBhKHQpe3JldHVyblwic3RyaW5nXCI9PXR5cGVvZiB0fWZ1bmN0aW9uIHUodCl7cmV0dXJuXCJzeW1ib2xcIj09dHlwZW9mIHR9ZnVuY3Rpb24gaCh0KXtyZXR1cm4gdm9pZCAwPT09dH1mdW5jdGlvbiBjKHQpe3JldHVyblwiW29iamVjdCBSZWdFeHBdXCI9PT1fKHQpfWZ1bmN0aW9uIGwodCl7cmV0dXJuXCJvYmplY3RcIj09dHlwZW9mIHQmJm51bGwhPT10fWZ1bmN0aW9uIGYodCl7cmV0dXJuXCJbb2JqZWN0IERhdGVdXCI9PT1fKHQpfWZ1bmN0aW9uIGQodCl7cmV0dXJuXCJbb2JqZWN0IEVycm9yXVwiPT09Xyh0KXx8dCBpbnN0YW5jZW9mIEVycm9yfWZ1bmN0aW9uIHAodCl7cmV0dXJuXCJmdW5jdGlvblwiPT10eXBlb2YgdH1mdW5jdGlvbiBnKHQpe3JldHVybiBudWxsPT09dHx8XCJib29sZWFuXCI9PXR5cGVvZiB0fHxcIm51bWJlclwiPT10eXBlb2YgdHx8XCJzdHJpbmdcIj09dHlwZW9mIHR8fFwic3ltYm9sXCI9PXR5cGVvZiB0fHxcInVuZGVmaW5lZFwiPT10eXBlb2YgdH1mdW5jdGlvbiBfKHQpe3JldHVybiBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwodCl9ZS5pc0FycmF5PW4sZS5pc0Jvb2xlYW49aSxlLmlzTnVsbD1yLGUuaXNOdWxsT3JVbmRlZmluZWQ9byxlLmlzTnVtYmVyPXMsZS5pc1N0cmluZz1hLGUuaXNTeW1ib2w9dSxlLmlzVW5kZWZpbmVkPWgsZS5pc1JlZ0V4cD1jLGUuaXNPYmplY3Q9bCxlLmlzRGF0ZT1mLGUuaXNFcnJvcj1kLGUuaXNGdW5jdGlvbj1wLGUuaXNQcmltaXRpdmU9ZyxlLmlzQnVmZmVyPXQuaXNCdWZmZXJ9KS5jYWxsKGUsbig3MCkuQnVmZmVyKX0sOTgsZnVuY3Rpb24odCxlKXt9LGZ1bmN0aW9uKHQsZSxuKXsoZnVuY3Rpb24oZSl7ZnVuY3Rpb24gaSh0KXtyZXR1cm4gdGhpcyBpbnN0YW5jZW9mIGk/KHUuY2FsbCh0aGlzLHQpLGguY2FsbCh0aGlzLHQpLHQmJnQucmVhZGFibGU9PT0hMSYmKHRoaXMucmVhZGFibGU9ITEpLHQmJnQud3JpdGFibGU9PT0hMSYmKHRoaXMud3JpdGFibGU9ITEpLHRoaXMuYWxsb3dIYWxmT3Blbj0hMCx0JiZ0LmFsbG93SGFsZk9wZW49PT0hMSYmKHRoaXMuYWxsb3dIYWxmT3Blbj0hMSksdm9pZCB0aGlzLm9uY2UoXCJlbmRcIixyKSk6bmV3IGkodCl9ZnVuY3Rpb24gcigpe3RoaXMuYWxsb3dIYWxmT3Blbnx8dGhpcy5fd3JpdGFibGVTdGF0ZS5lbmRlZHx8ZS5uZXh0VGljayh0aGlzLmVuZC5iaW5kKHRoaXMpKX1mdW5jdGlvbiBvKHQsZSl7Zm9yKHZhciBuPTAsaT10Lmxlbmd0aDtpPm47bisrKWUodFtuXSxuKX10LmV4cG9ydHM9aTt2YXIgcz1PYmplY3Qua2V5c3x8ZnVuY3Rpb24odCl7dmFyIGU9W107Zm9yKHZhciBuIGluIHQpZS5wdXNoKG4pO3JldHVybiBlfSxhPW4oMTAzKTthLmluaGVyaXRzPW4oMTA0KTt2YXIgdT1uKDEwMCksaD1uKDEwNyk7YS5pbmhlcml0cyhpLHUpLG8ocyhoLnByb3RvdHlwZSksZnVuY3Rpb24odCl7aS5wcm90b3R5cGVbdF18fChpLnByb3RvdHlwZVt0XT1oLnByb3RvdHlwZVt0XSl9KX0pLmNhbGwoZSxuKDEwMSkpfSxmdW5jdGlvbih0LGUsbil7KGZ1bmN0aW9uKGUpe2Z1bmN0aW9uIGkodCxlLG4pe3RoaXMuY2h1bms9dCx0aGlzLmVuY29kaW5nPWUsdGhpcy5jYWxsYmFjaz1ufWZ1bmN0aW9uIHIodCxlKXt2YXIgaT1uKDEwNik7dD10fHx7fTt2YXIgcj10LmhpZ2hXYXRlck1hcmssbz10Lm9iamVjdE1vZGU/MTY6MTYzODQ7dGhpcy5oaWdoV2F0ZXJNYXJrPXJ8fDA9PT1yP3I6byx0aGlzLm9iamVjdE1vZGU9ISF0Lm9iamVjdE1vZGUsZSBpbnN0YW5jZW9mIGkmJih0aGlzLm9iamVjdE1vZGU9dGhpcy5vYmplY3RNb2RlfHwhIXQud3JpdGFibGVPYmplY3RNb2RlKSx0aGlzLmhpZ2hXYXRlck1hcms9fn50aGlzLmhpZ2hXYXRlck1hcmssdGhpcy5uZWVkRHJhaW49ITEsdGhpcy5lbmRpbmc9ITEsdGhpcy5lbmRlZD0hMSx0aGlzLmZpbmlzaGVkPSExO3ZhciBzPXQuZGVjb2RlU3RyaW5ncz09PSExO3RoaXMuZGVjb2RlU3RyaW5ncz0hcyx0aGlzLmRlZmF1bHRFbmNvZGluZz10LmRlZmF1bHRFbmNvZGluZ3x8XCJ1dGY4XCIsdGhpcy5sZW5ndGg9MCx0aGlzLndyaXRpbmc9ITEsdGhpcy5jb3JrZWQ9MCx0aGlzLnN5bmM9ITAsdGhpcy5idWZmZXJQcm9jZXNzaW5nPSExLHRoaXMub253cml0ZT1mdW5jdGlvbih0KXtkKGUsdCl9LHRoaXMud3JpdGVjYj1udWxsLHRoaXMud3JpdGVsZW49MCx0aGlzLmJ1ZmZlcj1bXSx0aGlzLnBlbmRpbmdjYj0wLHRoaXMucHJlZmluaXNoZWQ9ITEsdGhpcy5lcnJvckVtaXR0ZWQ9ITF9ZnVuY3Rpb24gbyh0KXt2YXIgZT1uKDEwNik7cmV0dXJuIHRoaXMgaW5zdGFuY2VvZiBvfHx0aGlzIGluc3RhbmNlb2YgZT8odGhpcy5fd3JpdGFibGVTdGF0ZT1uZXcgcih0LHRoaXMpLHRoaXMud3JpdGFibGU9ITAsdm9pZCB3LmNhbGwodGhpcykpOm5ldyBvKHQpfWZ1bmN0aW9uIHModCxuLGkpe3ZhciByPW5ldyBFcnJvcihcIndyaXRlIGFmdGVyIGVuZFwiKTtcbnQuZW1pdChcImVycm9yXCIsciksZS5uZXh0VGljayhmdW5jdGlvbigpe2kocil9KX1mdW5jdGlvbiBhKHQsbixpLHIpe3ZhciBvPSEwO2lmKCEoQS5pc0J1ZmZlcihpKXx8QS5pc1N0cmluZyhpKXx8QS5pc051bGxPclVuZGVmaW5lZChpKXx8bi5vYmplY3RNb2RlKSl7dmFyIHM9bmV3IFR5cGVFcnJvcihcIkludmFsaWQgbm9uLXN0cmluZy9idWZmZXIgY2h1bmtcIik7dC5lbWl0KFwiZXJyb3JcIixzKSxlLm5leHRUaWNrKGZ1bmN0aW9uKCl7cihzKX0pLG89ITF9cmV0dXJuIG99ZnVuY3Rpb24gdSh0LGUsbil7cmV0dXJuIXQub2JqZWN0TW9kZSYmdC5kZWNvZGVTdHJpbmdzIT09ITEmJkEuaXNTdHJpbmcoZSkmJihlPW5ldyBTKGUsbikpLGV9ZnVuY3Rpb24gaCh0LGUsbixyLG8pe249dShlLG4sciksQS5pc0J1ZmZlcihuKSYmKHI9XCJidWZmZXJcIik7dmFyIHM9ZS5vYmplY3RNb2RlPzE6bi5sZW5ndGg7ZS5sZW5ndGgrPXM7dmFyIGE9ZS5sZW5ndGg8ZS5oaWdoV2F0ZXJNYXJrO3JldHVybiBhfHwoZS5uZWVkRHJhaW49ITApLGUud3JpdGluZ3x8ZS5jb3JrZWQ/ZS5idWZmZXIucHVzaChuZXcgaShuLHIsbykpOmModCxlLCExLHMsbixyLG8pLGF9ZnVuY3Rpb24gYyh0LGUsbixpLHIsbyxzKXtlLndyaXRlbGVuPWksZS53cml0ZWNiPXMsZS53cml0aW5nPSEwLGUuc3luYz0hMCxuP3QuX3dyaXRldihyLGUub253cml0ZSk6dC5fd3JpdGUocixvLGUub253cml0ZSksZS5zeW5jPSExfWZ1bmN0aW9uIGwodCxuLGkscixvKXtpP2UubmV4dFRpY2soZnVuY3Rpb24oKXtuLnBlbmRpbmdjYi0tLG8ocil9KToobi5wZW5kaW5nY2ItLSxvKHIpKSx0Ll93cml0YWJsZVN0YXRlLmVycm9yRW1pdHRlZD0hMCx0LmVtaXQoXCJlcnJvclwiLHIpfWZ1bmN0aW9uIGYodCl7dC53cml0aW5nPSExLHQud3JpdGVjYj1udWxsLHQubGVuZ3RoLT10LndyaXRlbGVuLHQud3JpdGVsZW49MH1mdW5jdGlvbiBkKHQsbil7dmFyIGk9dC5fd3JpdGFibGVTdGF0ZSxyPWkuc3luYyxvPWkud3JpdGVjYjtpZihmKGkpLG4pbCh0LGkscixuLG8pO2Vsc2V7dmFyIHM9bSh0LGkpO3N8fGkuY29ya2VkfHxpLmJ1ZmZlclByb2Nlc3Npbmd8fCFpLmJ1ZmZlci5sZW5ndGh8fF8odCxpKSxyP2UubmV4dFRpY2soZnVuY3Rpb24oKXtwKHQsaSxzLG8pfSk6cCh0LGkscyxvKX19ZnVuY3Rpb24gcCh0LGUsbixpKXtufHxnKHQsZSksZS5wZW5kaW5nY2ItLSxpKCksdih0LGUpfWZ1bmN0aW9uIGcodCxlKXswPT09ZS5sZW5ndGgmJmUubmVlZERyYWluJiYoZS5uZWVkRHJhaW49ITEsdC5lbWl0KFwiZHJhaW5cIikpfWZ1bmN0aW9uIF8odCxlKXtpZihlLmJ1ZmZlclByb2Nlc3Npbmc9ITAsdC5fd3JpdGV2JiZlLmJ1ZmZlci5sZW5ndGg+MSl7Zm9yKHZhciBuPVtdLGk9MDtpPGUuYnVmZmVyLmxlbmd0aDtpKyspbi5wdXNoKGUuYnVmZmVyW2ldLmNhbGxiYWNrKTtlLnBlbmRpbmdjYisrLGModCxlLCEwLGUubGVuZ3RoLGUuYnVmZmVyLFwiXCIsZnVuY3Rpb24odCl7Zm9yKHZhciBpPTA7aTxuLmxlbmd0aDtpKyspZS5wZW5kaW5nY2ItLSxuW2ldKHQpfSksZS5idWZmZXI9W119ZWxzZXtmb3IodmFyIGk9MDtpPGUuYnVmZmVyLmxlbmd0aDtpKyspe3ZhciByPWUuYnVmZmVyW2ldLG89ci5jaHVuayxzPXIuZW5jb2RpbmcsYT1yLmNhbGxiYWNrLHU9ZS5vYmplY3RNb2RlPzE6by5sZW5ndGg7aWYoYyh0LGUsITEsdSxvLHMsYSksZS53cml0aW5nKXtpKys7YnJlYWt9fWk8ZS5idWZmZXIubGVuZ3RoP2UuYnVmZmVyPWUuYnVmZmVyLnNsaWNlKGkpOmUuYnVmZmVyLmxlbmd0aD0wfWUuYnVmZmVyUHJvY2Vzc2luZz0hMX1mdW5jdGlvbiBtKHQsZSl7cmV0dXJuIGUuZW5kaW5nJiYwPT09ZS5sZW5ndGgmJiFlLmZpbmlzaGVkJiYhZS53cml0aW5nfWZ1bmN0aW9uIHkodCxlKXtlLnByZWZpbmlzaGVkfHwoZS5wcmVmaW5pc2hlZD0hMCx0LmVtaXQoXCJwcmVmaW5pc2hcIikpfWZ1bmN0aW9uIHYodCxlKXt2YXIgbj1tKHQsZSk7cmV0dXJuIG4mJigwPT09ZS5wZW5kaW5nY2I/KHkodCxlKSxlLmZpbmlzaGVkPSEwLHQuZW1pdChcImZpbmlzaFwiKSk6eSh0LGUpKSxufWZ1bmN0aW9uIEUodCxuLGkpe24uZW5kaW5nPSEwLHYodCxuKSxpJiYobi5maW5pc2hlZD9lLm5leHRUaWNrKGkpOnQub25jZShcImZpbmlzaFwiLGkpKSxuLmVuZGVkPSEwfXQuZXhwb3J0cz1vO3ZhciBTPW4oNzApLkJ1ZmZlcjtvLldyaXRhYmxlU3RhdGU9cjt2YXIgQT1uKDEwMyk7QS5pbmhlcml0cz1uKDEwNCk7dmFyIHc9big5Nyk7QS5pbmhlcml0cyhvLHcpLG8ucHJvdG90eXBlLnBpcGU9ZnVuY3Rpb24oKXt0aGlzLmVtaXQoXCJlcnJvclwiLG5ldyBFcnJvcihcIkNhbm5vdCBwaXBlLiBOb3QgcmVhZGFibGUuXCIpKX0sby5wcm90b3R5cGUud3JpdGU9ZnVuY3Rpb24odCxlLG4pe3ZhciBpPXRoaXMuX3dyaXRhYmxlU3RhdGUscj0hMTtyZXR1cm4gQS5pc0Z1bmN0aW9uKGUpJiYobj1lLGU9bnVsbCksQS5pc0J1ZmZlcih0KT9lPVwiYnVmZmVyXCI6ZXx8KGU9aS5kZWZhdWx0RW5jb2RpbmcpLEEuaXNGdW5jdGlvbihuKXx8KG49ZnVuY3Rpb24oKXt9KSxpLmVuZGVkP3ModGhpcyxpLG4pOmEodGhpcyxpLHQsbikmJihpLnBlbmRpbmdjYisrLHI9aCh0aGlzLGksdCxlLG4pKSxyfSxvLnByb3RvdHlwZS5jb3JrPWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5fd3JpdGFibGVTdGF0ZTt0LmNvcmtlZCsrfSxvLnByb3RvdHlwZS51bmNvcms9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLl93cml0YWJsZVN0YXRlO3QuY29ya2VkJiYodC5jb3JrZWQtLSx0LndyaXRpbmd8fHQuY29ya2VkfHx0LmZpbmlzaGVkfHx0LmJ1ZmZlclByb2Nlc3Npbmd8fCF0LmJ1ZmZlci5sZW5ndGh8fF8odGhpcyx0KSl9LG8ucHJvdG90eXBlLl93cml0ZT1mdW5jdGlvbih0LGUsbil7bihuZXcgRXJyb3IoXCJub3QgaW1wbGVtZW50ZWRcIikpfSxvLnByb3RvdHlwZS5fd3JpdGV2PW51bGwsby5wcm90b3R5cGUuZW5kPWZ1bmN0aW9uKHQsZSxuKXt2YXIgaT10aGlzLl93cml0YWJsZVN0YXRlO0EuaXNGdW5jdGlvbih0KT8obj10LHQ9bnVsbCxlPW51bGwpOkEuaXNGdW5jdGlvbihlKSYmKG49ZSxlPW51bGwpLEEuaXNOdWxsT3JVbmRlZmluZWQodCl8fHRoaXMud3JpdGUodCxlKSxpLmNvcmtlZCYmKGkuY29ya2VkPTEsdGhpcy51bmNvcmsoKSksaS5lbmRpbmd8fGkuZmluaXNoZWR8fEUodGhpcyxpLG4pfX0pLmNhbGwoZSxuKDEwMSkpfSxmdW5jdGlvbih0LGUsbil7ZnVuY3Rpb24gaSh0KXtpZih0JiYhdSh0KSl0aHJvdyBuZXcgRXJyb3IoXCJVbmtub3duIGVuY29kaW5nOiBcIit0KX1mdW5jdGlvbiByKHQpe3JldHVybiB0LnRvU3RyaW5nKHRoaXMuZW5jb2RpbmcpfWZ1bmN0aW9uIG8odCl7dGhpcy5jaGFyUmVjZWl2ZWQ9dC5sZW5ndGglMix0aGlzLmNoYXJMZW5ndGg9dGhpcy5jaGFyUmVjZWl2ZWQ/MjowfWZ1bmN0aW9uIHModCl7dGhpcy5jaGFyUmVjZWl2ZWQ9dC5sZW5ndGglMyx0aGlzLmNoYXJMZW5ndGg9dGhpcy5jaGFyUmVjZWl2ZWQ/MzowfXZhciBhPW4oNzApLkJ1ZmZlcix1PWEuaXNFbmNvZGluZ3x8ZnVuY3Rpb24odCl7c3dpdGNoKHQmJnQudG9Mb3dlckNhc2UoKSl7Y2FzZVwiaGV4XCI6Y2FzZVwidXRmOFwiOmNhc2VcInV0Zi04XCI6Y2FzZVwiYXNjaWlcIjpjYXNlXCJiaW5hcnlcIjpjYXNlXCJiYXNlNjRcIjpjYXNlXCJ1Y3MyXCI6Y2FzZVwidWNzLTJcIjpjYXNlXCJ1dGYxNmxlXCI6Y2FzZVwidXRmLTE2bGVcIjpjYXNlXCJyYXdcIjpyZXR1cm4hMDtkZWZhdWx0OnJldHVybiExfX0saD1lLlN0cmluZ0RlY29kZXI9ZnVuY3Rpb24odCl7c3dpdGNoKHRoaXMuZW5jb2Rpbmc9KHR8fFwidXRmOFwiKS50b0xvd2VyQ2FzZSgpLnJlcGxhY2UoL1stX10vLFwiXCIpLGkodCksdGhpcy5lbmNvZGluZyl7Y2FzZVwidXRmOFwiOnRoaXMuc3Vycm9nYXRlU2l6ZT0zO2JyZWFrO2Nhc2VcInVjczJcIjpjYXNlXCJ1dGYxNmxlXCI6dGhpcy5zdXJyb2dhdGVTaXplPTIsdGhpcy5kZXRlY3RJbmNvbXBsZXRlQ2hhcj1vO2JyZWFrO2Nhc2VcImJhc2U2NFwiOnRoaXMuc3Vycm9nYXRlU2l6ZT0zLHRoaXMuZGV0ZWN0SW5jb21wbGV0ZUNoYXI9czticmVhaztkZWZhdWx0OnJldHVybiB2b2lkKHRoaXMud3JpdGU9cil9dGhpcy5jaGFyQnVmZmVyPW5ldyBhKDYpLHRoaXMuY2hhclJlY2VpdmVkPTAsdGhpcy5jaGFyTGVuZ3RoPTB9O2gucHJvdG90eXBlLndyaXRlPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT1cIlwiO3RoaXMuY2hhckxlbmd0aDspe3ZhciBuPXQubGVuZ3RoPj10aGlzLmNoYXJMZW5ndGgtdGhpcy5jaGFyUmVjZWl2ZWQ/dGhpcy5jaGFyTGVuZ3RoLXRoaXMuY2hhclJlY2VpdmVkOnQubGVuZ3RoO2lmKHQuY29weSh0aGlzLmNoYXJCdWZmZXIsdGhpcy5jaGFyUmVjZWl2ZWQsMCxuKSx0aGlzLmNoYXJSZWNlaXZlZCs9bix0aGlzLmNoYXJSZWNlaXZlZDx0aGlzLmNoYXJMZW5ndGgpcmV0dXJuXCJcIjt0PXQuc2xpY2Uobix0Lmxlbmd0aCksZT10aGlzLmNoYXJCdWZmZXIuc2xpY2UoMCx0aGlzLmNoYXJMZW5ndGgpLnRvU3RyaW5nKHRoaXMuZW5jb2RpbmcpO3ZhciBpPWUuY2hhckNvZGVBdChlLmxlbmd0aC0xKTtpZighKGk+PTU1Mjk2JiY1NjMxOT49aSkpe2lmKHRoaXMuY2hhclJlY2VpdmVkPXRoaXMuY2hhckxlbmd0aD0wLDA9PT10Lmxlbmd0aClyZXR1cm4gZTticmVha310aGlzLmNoYXJMZW5ndGgrPXRoaXMuc3Vycm9nYXRlU2l6ZSxlPVwiXCJ9dGhpcy5kZXRlY3RJbmNvbXBsZXRlQ2hhcih0KTt2YXIgcj10Lmxlbmd0aDt0aGlzLmNoYXJMZW5ndGgmJih0LmNvcHkodGhpcy5jaGFyQnVmZmVyLDAsdC5sZW5ndGgtdGhpcy5jaGFyUmVjZWl2ZWQsciksci09dGhpcy5jaGFyUmVjZWl2ZWQpLGUrPXQudG9TdHJpbmcodGhpcy5lbmNvZGluZywwLHIpO3ZhciByPWUubGVuZ3RoLTEsaT1lLmNoYXJDb2RlQXQocik7aWYoaT49NTUyOTYmJjU2MzE5Pj1pKXt2YXIgbz10aGlzLnN1cnJvZ2F0ZVNpemU7cmV0dXJuIHRoaXMuY2hhckxlbmd0aCs9byx0aGlzLmNoYXJSZWNlaXZlZCs9byx0aGlzLmNoYXJCdWZmZXIuY29weSh0aGlzLmNoYXJCdWZmZXIsbywwLG8pLHQuY29weSh0aGlzLmNoYXJCdWZmZXIsMCwwLG8pLGUuc3Vic3RyaW5nKDAscil9cmV0dXJuIGV9LGgucHJvdG90eXBlLmRldGVjdEluY29tcGxldGVDaGFyPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT10Lmxlbmd0aD49Mz8zOnQubGVuZ3RoO2U+MDtlLS0pe3ZhciBuPXRbdC5sZW5ndGgtZV07aWYoMT09ZSYmbj4+NT09Nil7dGhpcy5jaGFyTGVuZ3RoPTI7YnJlYWt9aWYoMj49ZSYmbj4+ND09MTQpe3RoaXMuY2hhckxlbmd0aD0zO2JyZWFrfWlmKDM+PWUmJm4+PjM9PTMwKXt0aGlzLmNoYXJMZW5ndGg9NDticmVha319dGhpcy5jaGFyUmVjZWl2ZWQ9ZX0saC5wcm90b3R5cGUuZW5kPWZ1bmN0aW9uKHQpe3ZhciBlPVwiXCI7aWYodCYmdC5sZW5ndGgmJihlPXRoaXMud3JpdGUodCkpLHRoaXMuY2hhclJlY2VpdmVkKXt2YXIgbj10aGlzLmNoYXJSZWNlaXZlZCxpPXRoaXMuY2hhckJ1ZmZlcixyPXRoaXMuZW5jb2Rpbmc7ZSs9aS5zbGljZSgwLG4pLnRvU3RyaW5nKHIpfXJldHVybiBlfX0sZnVuY3Rpb24odCxlLG4pe2Z1bmN0aW9uIGkodCxlKXt0aGlzLmFmdGVyVHJhbnNmb3JtPWZ1bmN0aW9uKHQsbil7cmV0dXJuIHIoZSx0LG4pfSx0aGlzLm5lZWRUcmFuc2Zvcm09ITEsdGhpcy50cmFuc2Zvcm1pbmc9ITEsdGhpcy53cml0ZWNiPW51bGwsdGhpcy53cml0ZWNodW5rPW51bGx9ZnVuY3Rpb24gcih0LGUsbil7dmFyIGk9dC5fdHJhbnNmb3JtU3RhdGU7aS50cmFuc2Zvcm1pbmc9ITE7dmFyIHI9aS53cml0ZWNiO2lmKCFyKXJldHVybiB0LmVtaXQoXCJlcnJvclwiLG5ldyBFcnJvcihcIm5vIHdyaXRlY2IgaW4gVHJhbnNmb3JtIGNsYXNzXCIpKTtpLndyaXRlY2h1bms9bnVsbCxpLndyaXRlY2I9bnVsbCx1LmlzTnVsbE9yVW5kZWZpbmVkKG4pfHx0LnB1c2gobiksciYmcihlKTt2YXIgbz10Ll9yZWFkYWJsZVN0YXRlO28ucmVhZGluZz0hMSwoby5uZWVkUmVhZGFibGV8fG8ubGVuZ3RoPG8uaGlnaFdhdGVyTWFyaykmJnQuX3JlYWQoby5oaWdoV2F0ZXJNYXJrKX1mdW5jdGlvbiBvKHQpe2lmKCEodGhpcyBpbnN0YW5jZW9mIG8pKXJldHVybiBuZXcgbyh0KTthLmNhbGwodGhpcyx0KSx0aGlzLl90cmFuc2Zvcm1TdGF0ZT1uZXcgaSh0LHRoaXMpO3ZhciBlPXRoaXM7dGhpcy5fcmVhZGFibGVTdGF0ZS5uZWVkUmVhZGFibGU9ITAsdGhpcy5fcmVhZGFibGVTdGF0ZS5zeW5jPSExLHRoaXMub25jZShcInByZWZpbmlzaFwiLGZ1bmN0aW9uKCl7dS5pc0Z1bmN0aW9uKHRoaXMuX2ZsdXNoKT90aGlzLl9mbHVzaChmdW5jdGlvbih0KXtzKGUsdCl9KTpzKGUpfSl9ZnVuY3Rpb24gcyh0LGUpe2lmKGUpcmV0dXJuIHQuZW1pdChcImVycm9yXCIsZSk7dmFyIG49dC5fd3JpdGFibGVTdGF0ZSxpPXQuX3RyYW5zZm9ybVN0YXRlO2lmKG4ubGVuZ3RoKXRocm93IG5ldyBFcnJvcihcImNhbGxpbmcgdHJhbnNmb3JtIGRvbmUgd2hlbiB3cy5sZW5ndGggIT0gMFwiKTtpZihpLnRyYW5zZm9ybWluZyl0aHJvdyBuZXcgRXJyb3IoXCJjYWxsaW5nIHRyYW5zZm9ybSBkb25lIHdoZW4gc3RpbGwgdHJhbnNmb3JtaW5nXCIpO3JldHVybiB0LnB1c2gobnVsbCl9dC5leHBvcnRzPW87dmFyIGE9bigxMDYpLHU9bigxMDMpO3UuaW5oZXJpdHM9bigxMDQpLHUuaW5oZXJpdHMobyxhKSxvLnByb3RvdHlwZS5wdXNoPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHRoaXMuX3RyYW5zZm9ybVN0YXRlLm5lZWRUcmFuc2Zvcm09ITEsYS5wcm90b3R5cGUucHVzaC5jYWxsKHRoaXMsdCxlKX0sby5wcm90b3R5cGUuX3RyYW5zZm9ybT1mdW5jdGlvbih0LGUsbil7dGhyb3cgbmV3IEVycm9yKFwibm90IGltcGxlbWVudGVkXCIpfSxvLnByb3RvdHlwZS5fd3JpdGU9ZnVuY3Rpb24odCxlLG4pe3ZhciBpPXRoaXMuX3RyYW5zZm9ybVN0YXRlO2lmKGkud3JpdGVjYj1uLGkud3JpdGVjaHVuaz10LGkud3JpdGVlbmNvZGluZz1lLCFpLnRyYW5zZm9ybWluZyl7dmFyIHI9dGhpcy5fcmVhZGFibGVTdGF0ZTsoaS5uZWVkVHJhbnNmb3JtfHxyLm5lZWRSZWFkYWJsZXx8ci5sZW5ndGg8ci5oaWdoV2F0ZXJNYXJrKSYmdGhpcy5fcmVhZChyLmhpZ2hXYXRlck1hcmspfX0sby5wcm90b3R5cGUuX3JlYWQ9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5fdHJhbnNmb3JtU3RhdGU7dS5pc051bGwoZS53cml0ZWNodW5rKXx8IWUud3JpdGVjYnx8ZS50cmFuc2Zvcm1pbmc/ZS5uZWVkVHJhbnNmb3JtPSEwOihlLnRyYW5zZm9ybWluZz0hMCx0aGlzLl90cmFuc2Zvcm0oZS53cml0ZWNodW5rLGUud3JpdGVlbmNvZGluZyxlLmFmdGVyVHJhbnNmb3JtKSl9fSxmdW5jdGlvbih0LGUsbil7ZnVuY3Rpb24gaSh0KXtyZXR1cm4gdGhpcyBpbnN0YW5jZW9mIGk/dm9pZCByLmNhbGwodGhpcyx0KTpuZXcgaSh0KX10LmV4cG9ydHM9aTt2YXIgcj1uKDEwOSksbz1uKDEwMyk7by5pbmhlcml0cz1uKDEwNCksby5pbmhlcml0cyhpLHIpLGkucHJvdG90eXBlLl90cmFuc2Zvcm09ZnVuY3Rpb24odCxlLG4pe24obnVsbCx0KX19LGZ1bmN0aW9uKHQsZSxuKXt0LmV4cG9ydHM9bigxMDcpfSxmdW5jdGlvbih0LGUsbil7dC5leHBvcnRzPW4oMTA2KX0sZnVuY3Rpb24odCxlLG4pe3QuZXhwb3J0cz1uKDEwOSl9LGZ1bmN0aW9uKHQsZSxuKXt0LmV4cG9ydHM9bigxMTApfSxmdW5jdGlvbih0LGUsbil7KGZ1bmN0aW9uKGUpe3ZhciBpLHI9big3NCksbz1uKDY5KSxzPShvLkJhc2VUcmFuc2Zvcm0sby5CYXNlUGFyc2VyKSxhPW4oMTE2KTt0LmV4cG9ydHM9aT1mdW5jdGlvbih0LGUpe28uQmFzZVBhcnNlci5wcm90b3R5cGUuY29uc3RydWN0b3IuYXBwbHkodGhpcyxhcmd1bWVudHMpLHR8fCh0PXthdWRpb1RyYWNrSWQ6LTEsdmlkZW9UcmFja0lkOi0xLHRyYWNrczpbXX0pLHRoaXMubXV4ZXI9bmV3IGEodCksdGhpcy5tdXhlci5vbmRhdGE9dGhpcy5fb25NcDREYXRhLmJpbmQodGhpcyksdGhpcy5tdXhlci5vbmNvZGVjaW5mbz10aGlzLl9vbkNvZGVjSW5mby5iaW5kKHRoaXMpLHRoaXMuX2NvZGVjSW5mbz1udWxsLHRoaXMuX3RpbWVzdGFtcD0wLGUmJih0aGlzLndvcmtlcj1cInVuZGVmaW5lZFwiIT10eXBlb2YgV29ya2VyP25ldyBXb3JrZXIoXCIvZGlzdC9tcDQtbXV4LXdvcmtlci1idW5kbGUuanNcIik6bnVsbCksdGhpcy53b3JrZXImJih0aGlzLndvcmtlci5vbm1lc3NhZ2U9ZnVuY3Rpb24odCl7dGhpcy5fb25NcDREYXRhKHQuZGF0YSl9LmJpbmQodGhpcyksdGhpcy53b3JrZXIucG9zdE1lc3NhZ2Uoe21wNE11eFByb2ZpbGU6dH0pKX0saS5Qcm9maWxlcz1hLlByb2ZpbGVzLGkucHJvdG90eXBlPW8uY3JlYXRlQmFzZVBhcnNlcih7Y29uc3RydWN0b3I6aSxfb25NcDREYXRhOmZ1bmN0aW9uKHQpe3IoXCJfb25NcDREYXRhXCIpLHRoaXMuZW5xdWV1ZShuZXcgby5UcmFuc2ZlcihuZXcgZSh0KSxcImJ1ZmZlclwiKSl9LF9vbkNvZGVjSW5mbzpmdW5jdGlvbih0KXtyKFwiQ29kZWMgaW5mbzogXCIrdCksdGhpcy5fY29kZWNJbmZvPXR9LF9vbkZpbmlzaDpmdW5jdGlvbih0KXtyKFwiTVA0TXV4Ll9vbkZpbmlzaFwiKSx0aGlzLndvcmtlcj90aGlzLndvcmtlci5wb3N0TWVzc2FnZSh7ZW9zOiEwfSk6dGhpcy5tdXhlciYmdGhpcy5tdXhlci5mbHVzaCgpLHMucHJvdG90eXBlLl9vbkZpbmlzaC5jYWxsKHRoaXMsdCl9LF9wYXJzZTpmdW5jdGlvbih0KXt2YXIgZTt0LmRhdGEmJihlPXRoaXMuX3RpbWVzdGFtcD10LmRhdGEudGltZXN0YW1wKSx0LmRhdGEuZmx1c2gmJih0aGlzLl9uZWVkRmx1c2g9ITApLHIoXCJVbml0TVA0TXV4IFRpbWVzdGFtcDogXCIrdGhpcy5fdGltZXN0YW1wKSxyKFwiVW5pdE1QNE11eC5fcGFyc2U6IFBheWxvYWQgdHlwZTogXCIrdHlwZW9mIHQuZGF0YSksdGhpcy53b3JrZXI/KHQuZGF0YS5lbXB0eXx8dGhpcy53b3JrZXIucG9zdE1lc3NhZ2Uoe2RhdGE6dC5kYXRhLG1ldGE6dC5kYXRhLm1ldGEsdGltZXN0YW1wOmUscGFja2V0VHlwZTphLlRZUEVfQVVESU9fUEFDS0VUfSksdGhpcy5fbmVlZEZsdXNoJiYodGhpcy53b3JrZXIucG9zdE1lc3NhZ2Uoe2VvczohMH0pLHRoaXMuX25lZWRGbHVzaD0hMSkpOnRoaXMubXV4ZXImJih0LmRhdGEuZW1wdHl8fHRoaXMubXV4ZXIucHVzaFBhY2tldChhLlRZUEVfQVVESU9fUEFDS0VULG5ldyBVaW50OEFycmF5KHQuZGF0YSksZSx0LmRhdGEubWV0YSksdGhpcy5fbmVlZEZsdXNoJiYodGhpcy5tdXhlci5mbHVzaCgpLHRoaXMuX25lZWRGbHVzaD0hMSkpfX0pfSkuY2FsbChlLG4oNzApLkJ1ZmZlcil9LGZ1bmN0aW9uKHQsZSxuKXtmdW5jdGlvbiBpKHQpe2Zvcih2YXIgZT10Lmxlbmd0aD4+MSxuPW5ldyBVaW50OEFycmF5KGUpLGk9MDtlPmk7aSsrKW5baV09cGFyc2VJbnQodC5zdWJzdHIoMippLDIpLDE2KTtyZXR1cm4gbn1mdW5jdGlvbiByKHQsZSl7dmFyIG4saT0wLHI9cy5SQVc7c3dpdGNoKGUuY29kZWNJZCl7Y2FzZSBsOnZhciBvPXRbaSsrXTtyPW8sbj0xMDI0O2JyZWFrO2Nhc2UgYzp2YXIgdT10W2krMV0+PjMmMyxmPXRbaSsxXT4+MSYzO249MT09PWY/Mz09PXU/MTE1Mjo1NzY6Mz09PWY/Mzg0OjExNTJ9cmV0dXJuIGluZm89e2NvZGVjRGVzY3JpcHRpb246aFtlLmNvZGVjSWRdLGNvZGVjSWQ6ZS5jb2RlY0lkLGRhdGE6dC5zdWJhcnJheShpKSxyYXRlOmUuc2FtcGxlUmF0ZSxzaXplOmUuc2FtcGxlU2l6ZSxjaGFubmVsczplLmNoYW5uZWxzLHNhbXBsZXM6bixwYWNrZXRUeXBlOnJ9LGEoXCJwYXJzZWQgYXVkaW8gcGFja2V0IHdpdGggJWQgc2FtcGxlc1wiLG4pLGluZm99ZnVuY3Rpb24gbyh0KXt2YXIgZT0wLG49dFtlXT4+NCxpPTE1JnRbZV07ZSsrO3ZhciByPXtmcmFtZVR5cGU6bixjb2RlY0lkOmksY29kZWNEZXNjcmlwdGlvbjpkW2ldfTtzd2l0Y2goaSl7Y2FzZSBnOnZhciBvPXRbZSsrXTtyLnBhY2tldFR5cGU9byxyLmNvbXBvc2l0aW9uVGltZT0odFtlXTw8MjR8dFtlKzFdPDwxNnx0W2UrMl08PDgpPj44LGUrPTM7YnJlYWs7Y2FzZSBwOnIucGFja2V0VHlwZT1fLk5BTFUsci5ob3Jpem9udGFsT2Zmc2V0PXRbZV0+PjQmMTUsci52ZXJ0aWNhbE9mZnNldD0xNSZ0W2VdLHIuY29tcG9zaXRpb25UaW1lPTAsZSsrfXJldHVybiByLmRhdGE9dC5zdWJhcnJheShlKSxyfXZhciBzLGE9big3NCksdT1uKDExNyksaD1bXCJQQ01cIixcIkFEUENNXCIsXCJNUDNcIixcIlBDTSBsZVwiLFwiTmVsbHltb3VzZXIxNlwiLFwiTmVsbHltb3VzZXI4XCIsXCJOZWxseW1vdXNlclwiLFwiRy43MTEgQS1sYXdcIixcIkcuNzExIG11LWxhd1wiLG51bGwsXCJBQUNcIixcIlNwZWV4XCIsXCJNUDMgOGtoelwiXSxjPTIsbD0xMDshZnVuY3Rpb24odCl7dFt0LkhFQURFUj0wXT1cIkhFQURFUlwiLHRbdC5SQVc9MV09XCJSQVdcIn0oc3x8KHM9e30pKTt2YXIgZixkPVtudWxsLFwiSlBFR1wiLFwiU29yZW5zb25cIixcIlNjcmVlblwiLFwiVlA2XCIsXCJWUDYgYWxwaGFcIixcIlNjcmVlbjJcIixcIkFWQ1wiXSxwPTQsZz03OyFmdW5jdGlvbih0KXt0W3QuS0VZPTFdPVwiS0VZXCIsdFt0LklOTkVSPTJdPVwiSU5ORVJcIix0W3QuRElTUE9TQUJMRT0zXT1cIkRJU1BPU0FCTEVcIix0W3QuR0VORVJBVEVEPTRdPVwiR0VORVJBVEVEXCIsdFt0LklORk89NV09XCJJTkZPXCJ9KGZ8fChmPXt9KSk7dmFyIF87IWZ1bmN0aW9uKHQpe3RbdC5IRUFERVI9MF09XCJIRUFERVJcIix0W3QuTkFMVT0xXT1cIk5BTFVcIix0W3QuRU5EPTJdPVwiRU5EXCJ9KF98fChfPXt9KSk7dmFyIG0seT04LHY9OSxFPSEwOyFmdW5jdGlvbih0KXt0W3QuQ0FOX0dFTkVSQVRFX0hFQURFUj0wXT1cIkNBTl9HRU5FUkFURV9IRUFERVJcIix0W3QuTkVFRF9IRUFERVJfREFUQT0xXT1cIk5FRURfSEVBREVSX0RBVEFcIix0W3QuTUFJTl9QQUNLRVRTPTJdPVwiTUFJTl9QQUNLRVRTXCJ9KG18fChtPXt9KSk7dmFyIFM9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KHQpe3ZhciBlPXRoaXM7dGhpcy5vbmNvZGVjaW5mbz1mdW5jdGlvbih0KXt0aHJvdyBuZXcgRXJyb3IoXCJNUDRNdXgub25jb2RlY2luZm8gaXMgbm90IHNldFwiKX0sdGhpcy5vbmRhdGE9ZnVuY3Rpb24odCl7dGhyb3cgbmV3IEVycm9yKFwiTVA0TXV4Lm9uZGF0YSBpcyBub3Qgc2V0XCIpfSx0aGlzLm1ldGFkYXRhPXQsdGhpcy50cmFja1N0YXRlcz10aGlzLm1ldGFkYXRhLnRyYWNrcy5tYXAoZnVuY3Rpb24odCxuKXt2YXIgaT17dHJhY2tJZDpuKzEsdHJhY2tJbmZvOnQsY2FjaGVkRHVyYXRpb246MCxzYW1wbGVzUHJvY2Vzc2VkOjAsaW5pdGlhbGl6YXRpb25EYXRhOltdfTtyZXR1cm4gZS5tZXRhZGF0YS5hdWRpb1RyYWNrSWQ9PT1uJiYoZS5hdWRpb1RyYWNrU3RhdGU9aSksZS5tZXRhZGF0YS52aWRlb1RyYWNrSWQ9PT1uJiYoZS52aWRlb1RyYWNrU3RhdGU9aSksaX0sdGhpcyksdGhpcy5fY2hlY2tJZk5lZWRIZWFkZXJEYXRhKCksdGhpcy5maWxlUG9zPTAsdGhpcy5jYWNoZWRQYWNrZXRzPVtdLHRoaXMuY2h1bmtJbmRleD0wfXJldHVybiB0LnByb3RvdHlwZS5wdXNoUGFja2V0PWZ1bmN0aW9uKHQsZSxuLGkpe3N3aXRjaCh0aGlzLnN0YXRlPT09bS5DQU5fR0VORVJBVEVfSEVBREVSJiZ0aGlzLl90cnlHZW5lcmF0ZUhlYWRlcigpLHQpe2Nhc2UgeTp2YXIgYT10aGlzLmF1ZGlvVHJhY2tTdGF0ZSx1PXIoZSxpKTtpZighYXx8YS50cmFja0luZm8uY29kZWNJZCE9PXUuY29kZWNJZCl0aHJvdyBuZXcgRXJyb3IoXCJVbmV4cGVjdGVkIGF1ZGlvIHBhY2tldCBjb2RlYzogXCIrdS5jb2RlY0Rlc2NyaXB0aW9uKTtzd2l0Y2godS5jb2RlY0lkKXtkZWZhdWx0OnRocm93IG5ldyBFcnJvcihcIlVuc3VwcG9ydGVkIGF1ZGlvIGNvZGVjOiBcIit1LmNvZGVjRGVzY3JpcHRpb24pO2Nhc2UgYzpicmVhaztjYXNlIGw6aWYodS5wYWNrZXRUeXBlPT09cy5IRUFERVIpcmV0dXJuIHZvaWQgYS5pbml0aWFsaXphdGlvbkRhdGEucHVzaCh1LmRhdGEpfXRoaXMuY2FjaGVkUGFja2V0cy5wdXNoKHtwYWNrZXQ6dSx0aW1lc3RhbXA6bix0cmFja0lkOmEudHJhY2tJZH0pO2JyZWFrO2Nhc2Ugdjp2YXIgaD10aGlzLnZpZGVvVHJhY2tTdGF0ZSxmPW8oZSk7aWYoIWh8fGgudHJhY2tJbmZvLmNvZGVjSWQhPT1mLmNvZGVjSWQpdGhyb3cgbmV3IEVycm9yKFwiVW5leHBlY3RlZCB2aWRlbyBwYWNrZXQgY29kZWM6IFwiK2YuY29kZWNEZXNjcmlwdGlvbik7c3dpdGNoKGYuY29kZWNJZCl7ZGVmYXVsdDp0aHJvdyBuZXcgRXJyb3IoXCJ1bnN1cHBvcnRlZCB2aWRlbyBjb2RlYzogXCIrZi5jb2RlY0Rlc2NyaXB0aW9uKTtjYXNlIHA6YnJlYWs7Y2FzZSBnOmlmKGYucGFja2V0VHlwZT09PV8uSEVBREVSKXJldHVybiB2b2lkIGguaW5pdGlhbGl6YXRpb25EYXRhLnB1c2goZi5kYXRhKX10aGlzLmNhY2hlZFBhY2tldHMucHVzaCh7cGFja2V0OmYsdGltZXN0YW1wOm4sdHJhY2tJZDpoLnRyYWNrSWR9KTticmVhaztkZWZhdWx0OnRocm93IG5ldyBFcnJvcihcInVua25vd24gcGFja2V0IHR5cGU6IFwiK3QpfXRoaXMuc3RhdGU9PT1tLk5FRURfSEVBREVSX0RBVEEmJnRoaXMuX3RyeUdlbmVyYXRlSGVhZGVyKCl9LHQucHJvdG90eXBlLmZsdXNoPWZ1bmN0aW9uKCl7dGhpcy5jYWNoZWRQYWNrZXRzLmxlbmd0aD4wJiZ0aGlzLl9jaHVuaygpfSx0LnByb3RvdHlwZS5fY2hlY2tJZk5lZWRIZWFkZXJEYXRhPWZ1bmN0aW9uKCl7dGhpcy50cmFja1N0YXRlcy5zb21lKGZ1bmN0aW9uKHQpe3JldHVybiB0LnRyYWNrSW5mby5jb2RlY0lkPT09bHx8dC50cmFja0luZm8uY29kZWNJZD09PWd9KT90aGlzLnN0YXRlPW0uTkVFRF9IRUFERVJfREFUQTp0aGlzLnN0YXRlPW0uQ0FOX0dFTkVSQVRFX0hFQURFUn0sdC5wcm90b3R5cGUuX3RyeUdlbmVyYXRlSGVhZGVyPWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy50cmFja1N0YXRlcy5ldmVyeShmdW5jdGlvbih0KXtzd2l0Y2godC50cmFja0luZm8uY29kZWNJZCl7Y2FzZSBsOmNhc2UgZzpyZXR1cm4gdC5pbml0aWFsaXphdGlvbkRhdGEubGVuZ3RoPjA7ZGVmYXVsdDpyZXR1cm4hMH19KTtpZih0KXtmb3IodmFyIGU9W1wiaXNvbVwiXSxuPTEscj0xLG89W10scz0wO3M8dGhpcy50cmFja1N0YXRlcy5sZW5ndGg7cysrKXt2YXIgYSxoPXRoaXMudHJhY2tTdGF0ZXNbc10sZj1oLnRyYWNrSW5mbztzd2l0Y2goZi5jb2RlY0lkKXtjYXNlIGw6dmFyIGQ9aC5pbml0aWFsaXphdGlvbkRhdGFbMF07YT1uZXcgdS5BdWRpb1NhbXBsZUVudHJ5KFwibXA0YVwiLG4sZi5jaGFubmVscyxmLnNhbXBsZXNpemUsZi5zYW1wbGVyYXRlKTt2YXIgXz1uZXcgVWludDhBcnJheSg0MStkLmxlbmd0aCk7Xy5zZXQoaShcIjAwMDAwMDAwMDM4MDgwODBcIiksMCksX1s4XT0zMitkLmxlbmd0aCxfLnNldChpKFwiMDAwMjAwMDQ4MDgwODBcIiksOSksX1sxNl09MTgrZC5sZW5ndGgsXy5zZXQoaShcIjQwMTUwMDAwMDAwMDAwRkEwMDAwMDAwMDAwMDU4MDgwODBcIiksMTcpLF9bMzRdPWQubGVuZ3RoLF8uc2V0KGQsMzUpLF8uc2V0KGkoXCIwNjgwODA4MDAxMDJcIiksMzUrZC5sZW5ndGgpLGEub3RoZXJCb3hlcz1bbmV3IHUuUmF3VGFnKFwiZXNkc1wiLF8pXTt2YXIgeT1kWzBdPj4zO2gubWltZVR5cGVDb2RlYz1cIm1wNGEuNDAuXCIreTticmVhaztjYXNlIGM6YT1uZXcgdS5BdWRpb1NhbXBsZUVudHJ5KFwiLm1wM1wiLG4sZi5jaGFubmVscyxmLnNhbXBsZXNpemUsZi5zYW1wbGVyYXRlKSxoLm1pbWVUeXBlQ29kZWM9XCJtcDNcIjticmVhaztjYXNlIGc6dmFyIHY9aC5pbml0aWFsaXphdGlvbkRhdGFbMF07YT1uZXcgdS5WaWRlb1NhbXBsZUVudHJ5KFwiYXZjMVwiLHIsZi53aWR0aCxmLmhlaWdodCksYS5vdGhlckJveGVzPVtuZXcgdS5SYXdUYWcoXCJhdmNDXCIsdildO3ZhciBFPXZbMV08PDE2fHZbMl08PDh8dlszXTtoLm1pbWVUeXBlQ29kZWM9XCJhdmMxLlwiKygxNjc3NzIxNnxFKS50b1N0cmluZygxNikuc3Vic3RyKDEpLGUucHVzaChcImlzbzJcIixcImF2YzFcIixcIm1wNDFcIik7YnJlYWs7Y2FzZSBwOmE9bmV3IHUuVmlkZW9TYW1wbGVFbnRyeShcIlZQNkZcIixyLGYud2lkdGgsZi5oZWlnaHQpLGEub3RoZXJCb3hlcz1bbmV3IHUuUmF3VGFnKFwiZ2xibFwiLGkoXCIwMFwiKSldLGgubWltZVR5cGVDb2RlYz1cImF2YzEuNDIwMDFFXCI7YnJlYWs7ZGVmYXVsdDp0aHJvdyBuZXcgRXJyb3IoXCJub3Qgc3VwcG9ydGVkIHRyYWNrIHR5cGVcIil9dmFyIFMsQT11LlRyYWNrSGVhZGVyRmxhZ3MuVFJBQ0tfRU5BQkxFRHx1LlRyYWNrSGVhZGVyRmxhZ3MuVFJBQ0tfSU5fTU9WSUU7aD09PXRoaXMuYXVkaW9UcmFja1N0YXRlP1M9bmV3IHUuVHJhY2tCb3gobmV3IHUuVHJhY2tIZWFkZXJCb3goQSxoLnRyYWNrSWQsLTEsMCwwLDEscyksbmV3IHUuTWVkaWFCb3gobmV3IHUuTWVkaWFIZWFkZXJCb3goZi50aW1lc2NhbGUsLTEsZi5sYW5ndWFnZSksbmV3IHUuSGFuZGxlckJveChcInNvdW5cIixcIlNvdW5kSGFuZGxlclwiKSxuZXcgdS5NZWRpYUluZm9ybWF0aW9uQm94KG5ldyB1LlNvdW5kTWVkaWFIZWFkZXJCb3gsbmV3IHUuRGF0YUluZm9ybWF0aW9uQm94KG5ldyB1LkRhdGFSZWZlcmVuY2VCb3goW25ldyB1LkRhdGFFbnRyeVVybEJveCh1LlNFTEZfQ09OVEFJTkVEX0RBVEFfUkVGRVJFTkNFX0ZMQUcpXSkpLG5ldyB1LlNhbXBsZVRhYmxlQm94KG5ldyB1LlNhbXBsZURlc2NyaXB0aW9uQm94KFthXSksbmV3IHUuUmF3VGFnKFwic3R0c1wiLGkoXCIwMDAwMDAwMDAwMDAwMDAwXCIpKSxuZXcgdS5SYXdUYWcoXCJzdHNjXCIsaShcIjAwMDAwMDAwMDAwMDAwMDBcIikpLG5ldyB1LlJhd1RhZyhcInN0c3pcIixpKFwiMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwXCIpKSxuZXcgdS5SYXdUYWcoXCJzdGNvXCIsaShcIjAwMDAwMDAwMDAwMDAwMDBcIikpKSkpKTpoPT09dGhpcy52aWRlb1RyYWNrU3RhdGUmJihTPW5ldyB1LlRyYWNrQm94KG5ldyB1LlRyYWNrSGVhZGVyQm94KEEsaC50cmFja0lkLC0xLGYud2lkdGgsZi5oZWlnaHQsMCxzKSxuZXcgdS5NZWRpYUJveChuZXcgdS5NZWRpYUhlYWRlckJveChmLnRpbWVzY2FsZSwtMSxmLmxhbmd1YWdlKSxuZXcgdS5IYW5kbGVyQm94KFwidmlkZVwiLFwiVmlkZW9IYW5kbGVyXCIpLG5ldyB1Lk1lZGlhSW5mb3JtYXRpb25Cb3gobmV3IHUuVmlkZW9NZWRpYUhlYWRlckJveCxuZXcgdS5EYXRhSW5mb3JtYXRpb25Cb3gobmV3IHUuRGF0YVJlZmVyZW5jZUJveChbbmV3IHUuRGF0YUVudHJ5VXJsQm94KHUuU0VMRl9DT05UQUlORURfREFUQV9SRUZFUkVOQ0VfRkxBRyldKSksbmV3IHUuU2FtcGxlVGFibGVCb3gobmV3IHUuU2FtcGxlRGVzY3JpcHRpb25Cb3goW2FdKSxuZXcgdS5SYXdUYWcoXCJzdHRzXCIsaShcIjAwMDAwMDAwMDAwMDAwMDBcIikpLG5ldyB1LlJhd1RhZyhcInN0c2NcIixpKFwiMDAwMDAwMDAwMDAwMDAwMFwiKSksbmV3IHUuUmF3VGFnKFwic3RzelwiLGkoXCIwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDBcIikpLG5ldyB1LlJhd1RhZyhcInN0Y29cIixpKFwiMDAwMDAwMDAwMDAwMDAwMFwiKSkpKSkpKSxvLnB1c2goUyl9dmFyIHc9bmV3IHUuTW92aWVFeHRlbmRzQm94KG51bGwsW25ldyB1LlRyYWNrRXh0ZW5kc0JveCgxLDEsMCwwLDApLG5ldyB1LlRyYWNrRXh0ZW5kc0JveCgyLDEsMCwwLDApXSxudWxsKSxUPW5ldyB1LkJveENvbnRhaW5lckJveChcInVkYXRcIixbbmV3IHUuTWV0YUJveChuZXcgdS5SYXdUYWcoXCJoZGxyXCIsaShcIjAwMDAwMDAwMDAwMDAwMDA2RDY0Njk3MjYxNzA3MDZDMDAwMDAwMDAwMDAwMDAwMDAwXCIpKSxbbmV3IHUuUmF3VGFnKFwiaWxzdFwiLGkoXCIwMDAwMDAyNUE5NzQ2RjZGMDAwMDAwMUQ2NDYxNzQ2MTAwMDAwMDAxMDAwMDAwMDA0QzYxNzY2NjM1MzQyRTM2MzMyRTMxMzAzNFwiKSldKV0pLGI9bmV3IHUuTW92aWVIZWFkZXJCb3goMWUzLDAsdGhpcy50cmFja1N0YXRlcy5sZW5ndGgrMSksUD1uZXcgdS5Nb3ZpZUJveChiLG8sdyxUKSxJPW5ldyB1LkZpbGVUeXBlQm94KFwiaXNvbVwiLDUxMixlKSxMPUkubGF5b3V0KDApLE89UC5sYXlvdXQoTCksUj1uZXcgVWludDhBcnJheShMK08pO0kud3JpdGUoUiksUC53cml0ZShSKSx0aGlzLm9uY29kZWNpbmZvKHRoaXMudHJhY2tTdGF0ZXMubWFwKGZ1bmN0aW9uKHQpe3JldHVybiB0Lm1pbWVUeXBlQ29kZWN9KSksdGhpcy5vbmRhdGEoUiksdGhpcy5maWxlUG9zKz1SLmxlbmd0aCx0aGlzLnN0YXRlPW0uTUFJTl9QQUNLRVRTfX0sdC5wcm90b3R5cGUuX2NodW5rPWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5jYWNoZWRQYWNrZXRzO2lmKEUmJnRoaXMudmlkZW9UcmFja1N0YXRlKXtmb3IodmFyIGU9dC5sZW5ndGgtMSxuPXRoaXMudmlkZW9UcmFja1N0YXRlLnRyYWNrSWQ7ZT4wJiYodFtlXS50cmFja0lkIT09bnx8dFtlXS5wYWNrZXQuZnJhbWVUeXBlIT09Zi5LRVkpOyllLS07ZT4wJiYodD10LnNsaWNlKDAsZSkpfWlmKDAhPT10Lmxlbmd0aCl7Zm9yKHZhciBpPVtdLHI9MCxvPVtdLHM9W10sYT0wO2E8dGhpcy50cmFja1N0YXRlcy5sZW5ndGg7YSsrKXt2YXIgaD10aGlzLnRyYWNrU3RhdGVzW2FdLGQ9aC50cmFja0luZm8sXz1oLnRyYWNrSWQsbT10LmZpbHRlcihmdW5jdGlvbih0KXtyZXR1cm4gdC50cmFja0lkPT09X30pO2lmKDAhPT1tLmxlbmd0aCl7dmFyIHksdixTLEE9bmV3IHUuVHJhY2tGcmFnbWVudEJhc2VNZWRpYURlY29kZVRpbWVCb3goaC5jYWNoZWREdXJhdGlvbik7c3dpdGNoKHMucHVzaChyKSxkLmNvZGVjSWQpe2Nhc2UgbDpjYXNlIGM6Uz1bXTtmb3IodmFyIGU9MDtlPG0ubGVuZ3RoO2UrKyl7dmFyIHc9bVtlXS5wYWNrZXQsVD1NYXRoLnJvdW5kKHcuc2FtcGxlcypkLnRpbWVzY2FsZS9kLnNhbXBsZXJhdGUpO2kucHVzaCh3LmRhdGEpLHIrPXcuZGF0YS5sZW5ndGgsUy5wdXNoKHtkdXJhdGlvbjpULHNpemU6dy5kYXRhLmxlbmd0aH0pLGguc2FtcGxlc1Byb2Nlc3NlZCs9dy5zYW1wbGVzfXZhciBiPXUuVHJhY2tGcmFnbWVudEZsYWdzLkRFRkFVTFRfU0FNUExFX0ZMQUdTX1BSRVNFTlQ7eT1uZXcgdS5UcmFja0ZyYWdtZW50SGVhZGVyQm94KGIsXywwLDAsMCwwLHUuU2FtcGxlRmxhZ3MuU0FNUExFX0RFUEVORFNfT05fTk9fT1RIRVJTKTt2YXIgUD11LlRyYWNrUnVuRmxhZ3MuREFUQV9PRkZTRVRfUFJFU0VOVHx1LlRyYWNrUnVuRmxhZ3MuU0FNUExFX0RVUkFUSU9OX1BSRVNFTlR8dS5UcmFja1J1bkZsYWdzLlNBTVBMRV9TSVpFX1BSRVNFTlQ7dj1uZXcgdS5UcmFja1J1bkJveChQLFMsMCwwKSxoLmNhY2hlZER1cmF0aW9uPU1hdGgucm91bmQoaC5zYW1wbGVzUHJvY2Vzc2VkKmQudGltZXNjYWxlL2Quc2FtcGxlcmF0ZSk7YnJlYWs7Y2FzZSBnOmNhc2UgcDpTPVtdO2Zvcih2YXIgST1oLnNhbXBsZXNQcm9jZXNzZWQsTD1JKmQudGltZXNjYWxlL2QuZnJhbWVyYXRlLE89TWF0aC5yb3VuZChMKSxlPTA7ZTxtLmxlbmd0aDtlKyspe3ZhciBSPW1bZV0ucGFja2V0O0krKzt2YXIgRD1NYXRoLnJvdW5kKEkqZC50aW1lc2NhbGUvZC5mcmFtZXJhdGUpLE09RC1PO089RDt2YXIgaz1NYXRoLnJvdW5kKEkqZC50aW1lc2NhbGUvZC5mcmFtZXJhdGUrUi5jb21wb3NpdGlvblRpbWUqZC50aW1lc2NhbGUvMWUzKTtpLnB1c2goUi5kYXRhKSxyKz1SLmRhdGEubGVuZ3RoO3ZhciBOPVIuZnJhbWVUeXBlPT09Zi5LRVk/dS5TYW1wbGVGbGFncy5TQU1QTEVfREVQRU5EU19PTl9OT19PVEhFUlM6dS5TYW1wbGVGbGFncy5TQU1QTEVfREVQRU5EU19PTl9PVEhFUnx1LlNhbXBsZUZsYWdzLlNBTVBMRV9JU19OT1RfU1lOQztTLnB1c2goe2R1cmF0aW9uOk0sc2l6ZTpSLmRhdGEubGVuZ3RoLGZsYWdzOk4sY29tcG9zaXRpb25UaW1lT2Zmc2V0OmstRH0pfXZhciBiPXUuVHJhY2tGcmFnbWVudEZsYWdzLkRFRkFVTFRfU0FNUExFX0ZMQUdTX1BSRVNFTlQ7eT1uZXcgdS5UcmFja0ZyYWdtZW50SGVhZGVyQm94KGIsXywwLDAsMCwwLHUuU2FtcGxlRmxhZ3MuU0FNUExFX0RFUEVORFNfT05fTk9fT1RIRVJTKTt2YXIgUD11LlRyYWNrUnVuRmxhZ3MuREFUQV9PRkZTRVRfUFJFU0VOVHx1LlRyYWNrUnVuRmxhZ3MuU0FNUExFX0RVUkFUSU9OX1BSRVNFTlR8dS5UcmFja1J1bkZsYWdzLlNBTVBMRV9TSVpFX1BSRVNFTlR8dS5UcmFja1J1bkZsYWdzLlNBTVBMRV9GTEFHU19QUkVTRU5UfHUuVHJhY2tSdW5GbGFncy5TQU1QTEVfQ09NUE9TSVRJT05fVElNRV9PRkZTRVQ7dj1uZXcgdS5UcmFja1J1bkJveChQLFMsMCwwKSxoLmNhY2hlZER1cmF0aW9uPU8saC5zYW1wbGVzUHJvY2Vzc2VkPUk7YnJlYWs7ZGVmYXVsdDp0aHJvdyBuZXcgRXJyb3IoXCJVbiBjb2RlY1wiKX12YXIgeD1uZXcgdS5UcmFja0ZyYWdtZW50Qm94KHksQSx2KTtvLnB1c2goeCl9fXRoaXMuY2FjaGVkUGFja2V0cy5zcGxpY2UoMCx0Lmxlbmd0aCk7Zm9yKHZhciBDPW5ldyB1Lk1vdmllRnJhZ21lbnRIZWFkZXJCb3goKyt0aGlzLmNodW5rSW5kZXgpLEY9bmV3IHUuTW92aWVGcmFnbWVudEJveChDLG8pLFU9Ri5sYXlvdXQoMCksQj1uZXcgdS5NZWRpYURhdGFCb3goaSksSD1CLmxheW91dChVKSxqPVUrOCxhPTA7YTxvLmxlbmd0aDthKyspb1thXS5ydW4uZGF0YU9mZnNldD1qK3NbYV07dmFyIEc9bmV3IFVpbnQ4QXJyYXkoVStIKTtGLndyaXRlKEcpLEIud3JpdGUoRyksdGhpcy5vbmRhdGEoRyksdGhpcy5maWxlUG9zKz1HLmxlbmd0aH19LHR9KCk7dC5leHBvcnRzPVMsUy5NUDNfU09VTkRfQ09ERUNfSUQ9YyxTLkFBQ19TT1VORF9DT0RFQ19JRD1sLFMuVFlQRV9BVURJT19QQUNLRVQ9eSxTLlRZUEVfVklERU9fUEFDS0VUPXYsUy5Qcm9maWxlcz17TVAzX0FVRElPX09OTFk6e2F1ZGlvVHJhY2tJZDowLHZpZGVvVHJhY2tJZDotMSx0cmFja3M6W3tjb2RlY0lkOlMuTVAzX1NPVU5EX0NPREVDX0lELGNoYW5uZWxzOjIsc2FtcGxlcmF0ZTo0NDEwMCxzYW1wbGVzaXplOjE2LHRpbWVzY2FsZTo0NDEwMH1dfX19LGZ1bmN0aW9uKHQsZSl7ZnVuY3Rpb24gbih0KXtmb3IodmFyIGU9bmV3IFVpbnQ4QXJyYXkoNCp0Lmxlbmd0aCksbj0wLGk9MCxyPXQubGVuZ3RoO3I+aTtpKyspe3ZhciBvPXQuY2hhckNvZGVBdChpKTtpZigxMjc+PW8pZVtuKytdPW87ZWxzZXtpZihvPj01NTI5NiYmNTYzMTk+PW8pe3ZhciBzPXQuY2hhckNvZGVBdChpKzEpO3M+PTU2MzIwJiY1NzM0Mz49cyYmKG89KCgxMDIzJm8pPDwxMCkrKDEwMjMmcykrNjU1MzYsKytpKX0wIT09KDQyOTI4NzAxNDQmbyk/KGVbbisrXT0yNDh8bz4+PjI0JjMsZVtuKytdPTEyOHxvPj4+MTgmNjMsZVtuKytdPTEyOHxvPj4+MTImNjMsZVtuKytdPTEyOHxvPj4+NiY2MyxlW24rK109MTI4fDYzJm8pOjAhPT0oNDI5NDkwMTc2MCZvKT8oZVtuKytdPTI0MHxvPj4+MTgmNyxlW24rK109MTI4fG8+Pj4xMiY2MyxlW24rK109MTI4fG8+Pj42JjYzLGVbbisrXT0xMjh8NjMmbyk6MCE9PSg0Mjk0OTY1MjQ4Jm8pPyhlW24rK109MjI0fG8+Pj4xMiYxNSxlW24rK109MTI4fG8+Pj42JjYzLGVbbisrXT0xMjh8NjMmbyk6KGVbbisrXT0xOTJ8bz4+PjYmMzEsZVtuKytdPTEyOHw2MyZvKX19cmV0dXJuIGUuc3ViYXJyYXkoMCxuKX1mdW5jdGlvbiBpKHQpe2Zvcih2YXIgZT1bXSxuPTE7bjxhcmd1bWVudHMubGVuZ3RoO24rKyllW24tMV09YXJndW1lbnRzW25dO3JldHVybiBBcnJheS5wcm90b3R5cGUuY29uY2F0LmFwcGx5KHQsZSl9ZnVuY3Rpb24gcih0LGUsbil7dFtlXT1uPj4yNCYyNTUsdFtlKzFdPW4+PjE2JjI1NSx0W2UrMl09bj4+OCYyNTUsdFtlKzNdPTI1NSZufWZ1bmN0aW9uIG8odCl7cmV0dXJuIHQuY2hhckNvZGVBdCgwKTw8MjR8dC5jaGFyQ29kZUF0KDEpPDwxNnx0LmNoYXJDb2RlQXQoMik8PDh8dC5jaGFyQ29kZUF0KDMpfWZ1bmN0aW9uIHModCl7cmV0dXJuKHQtZCkvMWUzfDB9ZnVuY3Rpb24gYSh0KXtyZXR1cm4gNjU1MzYqdHwwfWZ1bmN0aW9uIHUodCl7cmV0dXJuIDEwNzM3NDE4MjQqdHwwfWZ1bmN0aW9uIGgodCl7cmV0dXJuIDI1Nip0fDB9ZnVuY3Rpb24gYyh0KXtyZXR1cm4oMzEmdC5jaGFyQ29kZUF0KDApKTw8MTB8KDMxJnQuY2hhckNvZGVBdCgxKSk8PDV8MzEmdC5jaGFyQ29kZUF0KDIpfXZhciBsLGY9dGhpcyYmdGhpcy5fX2V4dGVuZHN8fGZ1bmN0aW9uKHQsZSl7ZnVuY3Rpb24gbigpe3RoaXMuY29uc3RydWN0b3I9dH1mb3IodmFyIGkgaW4gZSllLmhhc093blByb3BlcnR5KGkpJiYodFtpXT1lW2ldKTt0LnByb3RvdHlwZT1udWxsPT09ZT9PYmplY3QuY3JlYXRlKGUpOihuLnByb3RvdHlwZT1lLnByb3RvdHlwZSxuZXcgbil9O3QuZXhwb3J0cz1sPXt9O3ZhciBkPS0yMDgyODQ0OGU1LHA9WzEsMCwwLDAsMSwwLDAsMCwxXSxnPVswLDAsMF0sXz1mdW5jdGlvbigpe2Z1bmN0aW9uIHQodCxlKXt0aGlzLmJveHR5cGU9dCxcInV1aWRcIj09PXQmJih0aGlzLnVzZXJUeXBlPWUpfXJldHVybiB0LnByb3RvdHlwZS5sYXlvdXQ9ZnVuY3Rpb24odCl7dGhpcy5vZmZzZXQ9dDt2YXIgZT04O3JldHVybiB0aGlzLnVzZXJUeXBlJiYoZSs9MTYpLHRoaXMuc2l6ZT1lLGV9LHQucHJvdG90eXBlLndyaXRlPWZ1bmN0aW9uKHQpe3JldHVybiByKHQsdGhpcy5vZmZzZXQsdGhpcy5zaXplKSxyKHQsdGhpcy5vZmZzZXQrNCxvKHRoaXMuYm94dHlwZSkpLHRoaXMudXNlclR5cGU/KHQuc2V0KHRoaXMudXNlclR5cGUsdGhpcy5vZmZzZXQrOCksMjQpOjh9LHQucHJvdG90eXBlLnRvVWludDhBcnJheT1mdW5jdGlvbigpe3ZhciB0PXRoaXMubGF5b3V0KDApLGU9bmV3IFVpbnQ4QXJyYXkodCk7cmV0dXJuIHRoaXMud3JpdGUoZSksZX0sdH0oKTtsLkJveD1fO3ZhciBtPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoZSxuLGkpe3ZvaWQgMD09PW4mJihuPTApLHZvaWQgMD09PWkmJihpPTApLHQuY2FsbCh0aGlzLGUpLHRoaXMudmVyc2lvbj1uLHRoaXMuZmxhZ3M9aX1yZXR1cm4gZihlLHQpLGUucHJvdG90eXBlLmxheW91dD1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5zaXplPXQucHJvdG90eXBlLmxheW91dC5jYWxsKHRoaXMsZSkrNCx0aGlzLnNpemV9LGUucHJvdG90eXBlLndyaXRlPWZ1bmN0aW9uKGUpe3ZhciBuPXQucHJvdG90eXBlLndyaXRlLmNhbGwodGhpcyxlKTtyZXR1cm4gcihlLHRoaXMub2Zmc2V0K24sdGhpcy52ZXJzaW9uPDwyNHx0aGlzLmZsYWdzKSxuKzR9LGV9KF8pO2wuRnVsbEJveD1tO3ZhciB5PWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoZSxuLGkpe3QuY2FsbCh0aGlzLFwiZnR5cGVcIiksdGhpcy5tYWpvckJyYW5kPWUsdGhpcy5taW5vclZlcnNpb249bix0aGlzLmNvbXBhdGlibGVCcmFuZHM9aX1yZXR1cm4gZihlLHQpLGUucHJvdG90eXBlLmxheW91dD1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5zaXplPXQucHJvdG90eXBlLmxheW91dC5jYWxsKHRoaXMsZSkrNCooMit0aGlzLmNvbXBhdGlibGVCcmFuZHMubGVuZ3RoKSx0aGlzLnNpemV9LGUucHJvdG90eXBlLndyaXRlPWZ1bmN0aW9uKGUpe3ZhciBuPXRoaXMsaT10LnByb3RvdHlwZS53cml0ZS5jYWxsKHRoaXMsZSk7cmV0dXJuIHIoZSx0aGlzLm9mZnNldCtpLG8odGhpcy5tYWpvckJyYW5kKSkscihlLHRoaXMub2Zmc2V0K2krNCx0aGlzLm1pbm9yVmVyc2lvbiksaSs9OCx0aGlzLmNvbXBhdGlibGVCcmFuZHMuZm9yRWFjaChmdW5jdGlvbih0KXtyKGUsbi5vZmZzZXQraSxvKHQpKSxpKz00fSx0aGlzKSxpfSxlfShfKTtsLkZpbGVUeXBlQm94PXk7dmFyIHY9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZShlLG4pe3QuY2FsbCh0aGlzLGUpLHRoaXMuY2hpbGRyZW49bn1yZXR1cm4gZihlLHQpLGUucHJvdG90eXBlLmxheW91dD1mdW5jdGlvbihlKXt2YXIgbj10LnByb3RvdHlwZS5sYXlvdXQuY2FsbCh0aGlzLGUpO3JldHVybiB0aGlzLmNoaWxkcmVuLmZvckVhY2goZnVuY3Rpb24odCl7dCYmKG4rPXQubGF5b3V0KGUrbikpfSksdGhpcy5zaXplPW59LGUucHJvdG90eXBlLndyaXRlPWZ1bmN0aW9uKGUpe3ZhciBuPXQucHJvdG90eXBlLndyaXRlLmNhbGwodGhpcyxlKTtyZXR1cm4gdGhpcy5jaGlsZHJlbi5mb3JFYWNoKGZ1bmN0aW9uKHQpe3QmJihuKz10LndyaXRlKGUpKX0pLG59LGV9KF8pO2wuQm94Q29udGFpbmVyQm94PXY7dmFyIEU9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZShlLG4scixvKXt0LmNhbGwodGhpcyxcIm1vb3ZcIixpKFtlXSxuLFtyLG9dKSksdGhpcy5oZWFkZXI9ZSx0aGlzLnRyYWNrcz1uLHRoaXMuZXh0ZW5kc0JveD1yLHRoaXMudXNlckRhdGE9b31yZXR1cm4gZihlLHQpLGV9KHYpO2wuTW92aWVCb3g9RTt2YXIgUz1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKGUsbixpLHIsbyxzLGEsdSl7dm9pZCAwPT09ciYmKHI9MSksdm9pZCAwPT09byYmKG89MSksdm9pZCAwPT09cyYmKHM9cCksdm9pZCAwPT09YSYmKGE9ZCksdm9pZCAwPT09dSYmKHU9ZCksdC5jYWxsKHRoaXMsXCJtdmhkXCIsMCwwKSx0aGlzLnRpbWVzY2FsZT1lLHRoaXMuZHVyYXRpb249bix0aGlzLm5leHRUcmFja0lkPWksdGhpcy5yYXRlPXIsdGhpcy52b2x1bWU9byx0aGlzLm1hdHJpeD1zLHRoaXMuY3JlYXRpb25UaW1lPWEsdGhpcy5tb2RpZmljYXRpb25UaW1lPXV9cmV0dXJuIGYoZSx0KSxlLnByb3RvdHlwZS5sYXlvdXQ9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuc2l6ZT10LnByb3RvdHlwZS5sYXlvdXQuY2FsbCh0aGlzLGUpKzE2KzQrMisyKzgrMzYrMjQrNCx0aGlzLnNpemV9LGUucHJvdG90eXBlLndyaXRlPWZ1bmN0aW9uKGUpe3ZhciBuPXQucHJvdG90eXBlLndyaXRlLmNhbGwodGhpcyxlKTtyZXR1cm4gcihlLHRoaXMub2Zmc2V0K24scyh0aGlzLmNyZWF0aW9uVGltZSkpLHIoZSx0aGlzLm9mZnNldCtuKzQscyh0aGlzLm1vZGlmaWNhdGlvblRpbWUpKSxyKGUsdGhpcy5vZmZzZXQrbis4LHRoaXMudGltZXNjYWxlKSxyKGUsdGhpcy5vZmZzZXQrbisxMix0aGlzLmR1cmF0aW9uKSxuKz0xNixyKGUsdGhpcy5vZmZzZXQrbixhKHRoaXMucmF0ZSkpLHIoZSx0aGlzLm9mZnNldCtuKzQsaCh0aGlzLnZvbHVtZSk8PDE2KSxyKGUsdGhpcy5vZmZzZXQrbis4LDApLHIoZSx0aGlzLm9mZnNldCtuKzEyLDApLG4rPTE2LHIoZSx0aGlzLm9mZnNldCtuLGEodGhpcy5tYXRyaXhbMF0pKSxyKGUsdGhpcy5vZmZzZXQrbis0LGEodGhpcy5tYXRyaXhbMV0pKSxyKGUsdGhpcy5vZmZzZXQrbis4LGEodGhpcy5tYXRyaXhbMl0pKSxyKGUsdGhpcy5vZmZzZXQrbisxMixhKHRoaXMubWF0cml4WzNdKSkscihlLHRoaXMub2Zmc2V0K24rMTYsYSh0aGlzLm1hdHJpeFs0XSkpLHIoZSx0aGlzLm9mZnNldCtuKzIwLGEodGhpcy5tYXRyaXhbNV0pKSxyKGUsdGhpcy5vZmZzZXQrbisyNCx1KHRoaXMubWF0cml4WzZdKSkscihlLHRoaXMub2Zmc2V0K24rMjgsdSh0aGlzLm1hdHJpeFs3XSkpLHIoZSx0aGlzLm9mZnNldCtuKzMyLHUodGhpcy5tYXRyaXhbOF0pKSxuKz0zNixyKGUsdGhpcy5vZmZzZXQrbiwwKSxyKGUsdGhpcy5vZmZzZXQrbis0LDApLHIoZSx0aGlzLm9mZnNldCtuKzgsMCkscihlLHRoaXMub2Zmc2V0K24rMTIsMCkscihlLHRoaXMub2Zmc2V0K24rMTYsMCkscihlLHRoaXMub2Zmc2V0K24rMjAsMCksbis9MjQscihlLHRoaXMub2Zmc2V0K24sdGhpcy5uZXh0VHJhY2tJZCksbis9NH0sZX0obSk7bC5Nb3ZpZUhlYWRlckJveD1TLGZ1bmN0aW9uKHQpe3RbdC5UUkFDS19FTkFCTEVEPTFdPVwiVFJBQ0tfRU5BQkxFRFwiLHRbdC5UUkFDS19JTl9NT1ZJRT0yXT1cIlRSQUNLX0lOX01PVklFXCIsdFt0LlRSQUNLX0lOX1BSRVZJRVc9NF09XCJUUkFDS19JTl9QUkVWSUVXXCJ9KGwuVHJhY2tIZWFkZXJGbGFnc3x8KGwuVHJhY2tIZWFkZXJGbGFncz17fSkpO3ZhciBBPShsLlRyYWNrSGVhZGVyRmxhZ3MsZnVuY3Rpb24odCl7ZnVuY3Rpb24gZShlLG4saSxyLG8scyxhLHUsaCxjLGwpe3ZvaWQgMD09PWEmJihhPTApLHZvaWQgMD09PXUmJih1PTApLHZvaWQgMD09PWgmJihoPXApLHZvaWQgMD09PWMmJihjPWQpLHZvaWQgMD09PWwmJihsPWQpLHQuY2FsbCh0aGlzLFwidGtoZFwiLDAsZSksdGhpcy50cmFja0lkPW4sdGhpcy5kdXJhdGlvbj1pLHRoaXMud2lkdGg9cix0aGlzLmhlaWdodD1vLHRoaXMudm9sdW1lPXMsdGhpcy5hbHRlcm5hdGVHcm91cD1hLHRoaXMubGF5ZXI9dSx0aGlzLm1hdHJpeD1oLHRoaXMuY3JlYXRpb25UaW1lPWMsdGhpcy5tb2RpZmljYXRpb25UaW1lPWx9cmV0dXJuIGYoZSx0KSxlLnByb3RvdHlwZS5sYXlvdXQ9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuc2l6ZT10LnByb3RvdHlwZS5sYXlvdXQuY2FsbCh0aGlzLGUpKzIwKzgrNisyKzM2KzgsdGhpcy5zaXplfSxlLnByb3RvdHlwZS53cml0ZT1mdW5jdGlvbihlKXt2YXIgbj10LnByb3RvdHlwZS53cml0ZS5jYWxsKHRoaXMsZSk7cmV0dXJuIHIoZSx0aGlzLm9mZnNldCtuLHModGhpcy5jcmVhdGlvblRpbWUpKSxyKGUsdGhpcy5vZmZzZXQrbis0LHModGhpcy5tb2RpZmljYXRpb25UaW1lKSkscihlLHRoaXMub2Zmc2V0K24rOCx0aGlzLnRyYWNrSWQpLHIoZSx0aGlzLm9mZnNldCtuKzEyLDApLHIoZSx0aGlzLm9mZnNldCtuKzE2LHRoaXMuZHVyYXRpb24pLG4rPTIwLHIoZSx0aGlzLm9mZnNldCtuLDApLHIoZSx0aGlzLm9mZnNldCtuKzQsMCkscihlLHRoaXMub2Zmc2V0K24rOCx0aGlzLmxheWVyPDwxNnx0aGlzLmFsdGVybmF0ZUdyb3VwKSxyKGUsdGhpcy5vZmZzZXQrbisxMixoKHRoaXMudm9sdW1lKTw8MTYpLG4rPTE2LHIoZSx0aGlzLm9mZnNldCtuLGEodGhpcy5tYXRyaXhbMF0pKSxyKGUsdGhpcy5vZmZzZXQrbis0LGEodGhpcy5tYXRyaXhbMV0pKSxyKGUsdGhpcy5vZmZzZXQrbis4LGEodGhpcy5tYXRyaXhbMl0pKSxyKGUsdGhpcy5vZmZzZXQrbisxMixhKHRoaXMubWF0cml4WzNdKSkscihlLHRoaXMub2Zmc2V0K24rMTYsYSh0aGlzLm1hdHJpeFs0XSkpLHIoZSx0aGlzLm9mZnNldCtuKzIwLGEodGhpcy5tYXRyaXhbNV0pKSxyKGUsdGhpcy5vZmZzZXQrbisyNCx1KHRoaXMubWF0cml4WzZdKSkscihlLHRoaXMub2Zmc2V0K24rMjgsdSh0aGlzLm1hdHJpeFs3XSkpLHIoZSx0aGlzLm9mZnNldCtuKzMyLHUodGhpcy5tYXRyaXhbOF0pKSxuKz0zNixyKGUsdGhpcy5vZmZzZXQrbixhKHRoaXMud2lkdGgpKSxyKGUsdGhpcy5vZmZzZXQrbis0LGEodGhpcy5oZWlnaHQpKSxuKz04fSxlfShtKSk7bC5UcmFja0hlYWRlckJveD1BO3ZhciB3PWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoZSxuLGkscixvKXt2b2lkIDA9PT1pJiYoaT1cInVua1wiKSx2b2lkIDA9PT1yJiYocj1kKSx2b2lkIDA9PT1vJiYobz1kKSx0LmNhbGwodGhpcyxcIm1kaGRcIiwwLDApLHRoaXMudGltZXNjYWxlPWUsdGhpcy5kdXJhdGlvbj1uLHRoaXMubGFuZ3VhZ2U9aSx0aGlzLmNyZWF0aW9uVGltZT1yLHRoaXMubW9kaWZpY2F0aW9uVGltZT1vfXJldHVybiBmKGUsdCksZS5wcm90b3R5cGUubGF5b3V0PWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLnNpemU9dC5wcm90b3R5cGUubGF5b3V0LmNhbGwodGhpcyxlKSsxNis0LHRoaXMuc2l6ZX0sZS5wcm90b3R5cGUud3JpdGU9ZnVuY3Rpb24oZSl7dmFyIG49dC5wcm90b3R5cGUud3JpdGUuY2FsbCh0aGlzLGUpO3JldHVybiByKGUsdGhpcy5vZmZzZXQrbixzKHRoaXMuY3JlYXRpb25UaW1lKSkscihlLHRoaXMub2Zmc2V0K24rNCxzKHRoaXMubW9kaWZpY2F0aW9uVGltZSkpLHIoZSx0aGlzLm9mZnNldCtuKzgsdGhpcy50aW1lc2NhbGUpLHIoZSx0aGlzLm9mZnNldCtuKzEyLHRoaXMuZHVyYXRpb24pLHIoZSx0aGlzLm9mZnNldCtuKzE2LGModGhpcy5sYW5ndWFnZSk8PDE2KSxuKzIwfSxlfShtKTtsLk1lZGlhSGVhZGVyQm94PXc7dmFyIFQ9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZShlLGkpe3QuY2FsbCh0aGlzLFwiaGRsclwiLDAsMCksdGhpcy5oYW5kbGVyVHlwZT1lLHRoaXMubmFtZT1pLHRoaXMuX2VuY29kZWROYW1lPW4odGhpcy5uYW1lKX1yZXR1cm4gZihlLHQpLGUucHJvdG90eXBlLmxheW91dD1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5zaXplPXQucHJvdG90eXBlLmxheW91dC5jYWxsKHRoaXMsZSkrOCsxMisodGhpcy5fZW5jb2RlZE5hbWUubGVuZ3RoKzEpLHRoaXMuc2l6ZX0sZS5wcm90b3R5cGUud3JpdGU9ZnVuY3Rpb24oZSl7dmFyIG49dC5wcm90b3R5cGUud3JpdGUuY2FsbCh0aGlzLGUpO3JldHVybiByKGUsdGhpcy5vZmZzZXQrbiwwKSxyKGUsdGhpcy5vZmZzZXQrbis0LG8odGhpcy5oYW5kbGVyVHlwZSkpLHIoZSx0aGlzLm9mZnNldCtuKzgsMCkscihlLHRoaXMub2Zmc2V0K24rMTIsMCkscihlLHRoaXMub2Zmc2V0K24rMTYsMCksbis9MjAsZS5zZXQodGhpcy5fZW5jb2RlZE5hbWUsdGhpcy5vZmZzZXQrbiksZVt0aGlzLm9mZnNldCtuK3RoaXMuX2VuY29kZWROYW1lLmxlbmd0aF09MCxuKz10aGlzLl9lbmNvZGVkTmFtZS5sZW5ndGgrMX0sZX0obSk7bC5IYW5kbGVyQm94PVQ7dmFyIGI9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZShlKXt2b2lkIDA9PT1lJiYoZT0wKSx0LmNhbGwodGhpcyxcInNtaGRcIiwwLDApLHRoaXMuYmFsYW5jZT1lfXJldHVybiBmKGUsdCksZS5wcm90b3R5cGUubGF5b3V0PWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLnNpemU9dC5wcm90b3R5cGUubGF5b3V0LmNhbGwodGhpcyxlKSs0LHRoaXMuc2l6ZX0sZS5wcm90b3R5cGUud3JpdGU9ZnVuY3Rpb24oZSl7dmFyIG49dC5wcm90b3R5cGUud3JpdGUuY2FsbCh0aGlzLGUpO3JldHVybiByKGUsdGhpcy5vZmZzZXQrbixoKHRoaXMuYmFsYW5jZSk8PDE2KSxuKzR9LGV9KG0pO2wuU291bmRNZWRpYUhlYWRlckJveD1iO3ZhciBQPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoZSxuKXt2b2lkIDA9PT1lJiYoZT0wKSx2b2lkIDA9PT1uJiYobj1nKSx0LmNhbGwodGhpcyxcInZtaGRcIiwwLDApLHRoaXMuZ3JhcGhpY3NNb2RlPWUsdGhpcy5vcENvbG9yPW59cmV0dXJuIGYoZSx0KSxlLnByb3RvdHlwZS5sYXlvdXQ9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuc2l6ZT10LnByb3RvdHlwZS5sYXlvdXQuY2FsbCh0aGlzLGUpKzgsdGhpcy5zaXplfSxlLnByb3RvdHlwZS53cml0ZT1mdW5jdGlvbihlKXt2YXIgbj10LnByb3RvdHlwZS53cml0ZS5jYWxsKHRoaXMsZSk7cmV0dXJuIHIoZSx0aGlzLm9mZnNldCtuLHRoaXMuZ3JhcGhpY3NNb2RlPDwxNnx0aGlzLm9wQ29sb3JbMF0pLHIoZSx0aGlzLm9mZnNldCtuKzQsdGhpcy5vcENvbG9yWzFdPDwxNnx0aGlzLm9wQ29sb3JbMl0pLG4rOH0sZX0obSk7bC5WaWRlb01lZGlhSGVhZGVyQm94PVAsbC5TRUxGX0NPTlRBSU5FRF9EQVRBX1JFRkVSRU5DRV9GTEFHPTE7dmFyIEk9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZShlLGkpe3ZvaWQgMD09PWkmJihpPW51bGwpLHQuY2FsbCh0aGlzLFwidXJsIFwiLDAsZSksdGhpcy5sb2NhdGlvbj1pLGUmbC5TRUxGX0NPTlRBSU5FRF9EQVRBX1JFRkVSRU5DRV9GTEFHfHwodGhpcy5fZW5jb2RlZExvY2F0aW9uPW4oaSkpfXJldHVybiBmKGUsdCksZS5wcm90b3R5cGUubGF5b3V0PWZ1bmN0aW9uKGUpe3ZhciBuPXQucHJvdG90eXBlLmxheW91dC5jYWxsKHRoaXMsZSk7cmV0dXJuIHRoaXMuX2VuY29kZWRMb2NhdGlvbiYmKG4rPXRoaXMuX2VuY29kZWRMb2NhdGlvbi5sZW5ndGgrMSksdGhpcy5zaXplPW59LGUucHJvdG90eXBlLndyaXRlPWZ1bmN0aW9uKGUpe3ZhciBuPXQucHJvdG90eXBlLndyaXRlLmNhbGwodGhpcyxlKTtyZXR1cm4gdGhpcy5fZW5jb2RlZExvY2F0aW9uJiYoZS5zZXQodGhpcy5fZW5jb2RlZExvY2F0aW9uLHRoaXMub2Zmc2V0K24pLGVbdGhpcy5vZmZzZXQrbit0aGlzLl9lbmNvZGVkTG9jYXRpb24ubGVuZ3RoXT0wLG4rPXRoaXMuX2VuY29kZWRMb2NhdGlvbi5sZW5ndGgpLG59LGV9KG0pO2wuRGF0YUVudHJ5VXJsQm94PUk7dmFyIEw9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZShlKXt0LmNhbGwodGhpcyxcImRyZWZcIiwwLDApLHRoaXMuZW50cmllcz1lfXJldHVybiBmKGUsdCksZS5wcm90b3R5cGUubGF5b3V0PWZ1bmN0aW9uKGUpe3ZhciBuPXQucHJvdG90eXBlLmxheW91dC5jYWxsKHRoaXMsZSkrNDtyZXR1cm4gdGhpcy5lbnRyaWVzLmZvckVhY2goZnVuY3Rpb24odCl7bis9dC5sYXlvdXQoZStuKX0pLHRoaXMuc2l6ZT1ufSxlLnByb3RvdHlwZS53cml0ZT1mdW5jdGlvbihlKXt2YXIgbj10LnByb3RvdHlwZS53cml0ZS5jYWxsKHRoaXMsZSk7cmV0dXJuIHIoZSx0aGlzLm9mZnNldCtuLHRoaXMuZW50cmllcy5sZW5ndGgpLHRoaXMuZW50cmllcy5mb3JFYWNoKGZ1bmN0aW9uKHQpe24rPXQud3JpdGUoZSl9KSxufSxlfShtKTtsLkRhdGFSZWZlcmVuY2VCb3g9TDt2YXIgTz1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKGUpe3QuY2FsbCh0aGlzLFwiZGluZlwiLFtlXSksdGhpcy5kYXRhUmVmZXJlbmNlPWV9cmV0dXJuIGYoZSx0KSxlfSh2KTtsLkRhdGFJbmZvcm1hdGlvbkJveD1PO3ZhciBSPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoZSl7dC5jYWxsKHRoaXMsXCJzdHNkXCIsMCwwKSx0aGlzLmVudHJpZXM9ZX1yZXR1cm4gZihlLHQpLGUucHJvdG90eXBlLmxheW91dD1mdW5jdGlvbihlKXt2YXIgbj10LnByb3RvdHlwZS5sYXlvdXQuY2FsbCh0aGlzLGUpO3JldHVybiBuKz00LHRoaXMuZW50cmllcy5mb3JFYWNoKGZ1bmN0aW9uKHQpe24rPXQubGF5b3V0KGUrbil9KSx0aGlzLnNpemU9bn0sZS5wcm90b3R5cGUud3JpdGU9ZnVuY3Rpb24oZSl7dmFyIG49dC5wcm90b3R5cGUud3JpdGUuY2FsbCh0aGlzLGUpO3JldHVybiByKGUsdGhpcy5vZmZzZXQrbix0aGlzLmVudHJpZXMubGVuZ3RoKSxuKz00LHRoaXMuZW50cmllcy5mb3JFYWNoKGZ1bmN0aW9uKHQpe24rPXQud3JpdGUoZSl9KSxufSxlfShtKTtsLlNhbXBsZURlc2NyaXB0aW9uQm94PVI7dmFyIEQ9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZShlLG4saSxyLG8pe3QuY2FsbCh0aGlzLFwic3RibFwiLFtlLG4saSxyLG9dKSx0aGlzLnNhbXBsZURlc2NyaXB0aW9ucz1lLHRoaXMudGltZVRvU2FtcGxlPW4sdGhpcy5zYW1wbGVUb0NodW5rPWksdGhpcy5zYW1wbGVTaXplcz1yLHRoaXMuY2h1bmtPZmZzZXQ9b31yZXR1cm4gZihlLHQpLGV9KHYpO2wuU2FtcGxlVGFibGVCb3g9RDt2YXIgTT1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKGUsbixpKXt0LmNhbGwodGhpcyxcIm1pbmZcIixbZSxuLGldKSx0aGlzLmhlYWRlcj1lLHRoaXMuaW5mbz1uLHRoaXMuc2FtcGxlVGFibGU9aX1yZXR1cm4gZihlLHQpLGV9KHYpO2wuTWVkaWFJbmZvcm1hdGlvbkJveD1NO3ZhciBrPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoZSxuLGkpe3QuY2FsbCh0aGlzLFwibWRpYVwiLFtlLG4saV0pLHRoaXMuaGVhZGVyPWUsdGhpcy5oYW5kbGVyPW4sdGhpcy5pbmZvPWl9cmV0dXJuIGYoZSx0KSxlfSh2KTtsLk1lZGlhQm94PWs7dmFyIE49ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZShlLG4pe3QuY2FsbCh0aGlzLFwidHJha1wiLFtlLG5dKSx0aGlzLmhlYWRlcj1lLHRoaXMubWVkaWE9bn1yZXR1cm4gZihlLHQpLGV9KHYpO2wuVHJhY2tCb3g9Tjt2YXIgeD1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKGUsbixpLHIsbyl7dC5jYWxsKHRoaXMsXCJ0cmV4XCIsMCwwKSx0aGlzLnRyYWNrSWQ9ZSx0aGlzLmRlZmF1bHRTYW1wbGVEZXNjcmlwdGlvbkluZGV4PW4sdGhpcy5kZWZhdWx0U2FtcGxlRHVyYXRpb249aSx0aGlzLmRlZmF1bHRTYW1wbGVTaXplPXIsdGhpcy5kZWZhdWx0U2FtcGxlRmxhZ3M9b31yZXR1cm4gZihlLHQpLGUucHJvdG90eXBlLmxheW91dD1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5zaXplPXQucHJvdG90eXBlLmxheW91dC5jYWxsKHRoaXMsZSkrMjAsdGhpcy5zaXplfSxlLnByb3RvdHlwZS53cml0ZT1mdW5jdGlvbihlKXt2YXIgbj10LnByb3RvdHlwZS53cml0ZS5jYWxsKHRoaXMsZSk7cmV0dXJuIHIoZSx0aGlzLm9mZnNldCtuLHRoaXMudHJhY2tJZCkscihlLHRoaXMub2Zmc2V0K24rNCx0aGlzLmRlZmF1bHRTYW1wbGVEZXNjcmlwdGlvbkluZGV4KSxyKGUsdGhpcy5vZmZzZXQrbis4LHRoaXMuZGVmYXVsdFNhbXBsZUR1cmF0aW9uKSxyKGUsdGhpcy5vZmZzZXQrbisxMix0aGlzLmRlZmF1bHRTYW1wbGVTaXplKSxyKGUsdGhpcy5vZmZzZXQrbisxNix0aGlzLmRlZmF1bHRTYW1wbGVGbGFncyksbisyMH0sZX0obSk7bC5UcmFja0V4dGVuZHNCb3g9eDt2YXIgQz1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKGUsbixyKXt0LmNhbGwodGhpcyxcIm12ZXhcIixpKFtlXSxuLFtyXSkpLHRoaXMuaGVhZGVyPWUsdGhpcy50cmFjRGVmYXVsdHM9bix0aGlzLmxldmVscz1yfXJldHVybiBmKGUsdCksZX0odik7bC5Nb3ZpZUV4dGVuZHNCb3g9Qzt2YXIgRj1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKGUsbil7dC5jYWxsKHRoaXMsXCJtZXRhXCIsMCwwKSx0aGlzLmhhbmRsZXI9ZSx0aGlzLm90aGVyQm94ZXM9bn1yZXR1cm4gZihlLHQpLGUucHJvdG90eXBlLmxheW91dD1mdW5jdGlvbihlKXt2YXIgbj10LnByb3RvdHlwZS5sYXlvdXQuY2FsbCh0aGlzLGUpO3JldHVybiBuKz10aGlzLmhhbmRsZXIubGF5b3V0KGUrbiksdGhpcy5vdGhlckJveGVzLmZvckVhY2goZnVuY3Rpb24odCl7bis9dC5sYXlvdXQoZStuKX0pLHRoaXMuc2l6ZT1ufSxlLnByb3RvdHlwZS53cml0ZT1mdW5jdGlvbihlKXt2YXIgbj10LnByb3RvdHlwZS53cml0ZS5jYWxsKHRoaXMsZSk7cmV0dXJuIG4rPXRoaXMuaGFuZGxlci53cml0ZShlKSx0aGlzLm90aGVyQm94ZXMuZm9yRWFjaChmdW5jdGlvbih0KXtuKz10LndyaXRlKGUpfSksbn0sZX0obSk7bC5NZXRhQm94PUY7dmFyIFU9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZShlKXt0LmNhbGwodGhpcyxcIm1maGRcIiwwLDApLHRoaXMuc2VxdWVuY2VOdW1iZXI9ZX1yZXR1cm4gZihlLHQpLGUucHJvdG90eXBlLmxheW91dD1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5zaXplPXQucHJvdG90eXBlLmxheW91dC5jYWxsKHRoaXMsZSkrNCx0aGlzLnNpemV9LGUucHJvdG90eXBlLndyaXRlPWZ1bmN0aW9uKGUpe3ZhciBuPXQucHJvdG90eXBlLndyaXRlLmNhbGwodGhpcyxlKTtyZXR1cm4gcihlLHRoaXMub2Zmc2V0K24sdGhpcy5zZXF1ZW5jZU51bWJlciksbis0fSxlfShtKTtsLk1vdmllRnJhZ21lbnRIZWFkZXJCb3g9VSxmdW5jdGlvbih0KXt0W3QuQkFTRV9EQVRBX09GRlNFVF9QUkVTRU5UPTFdPVwiQkFTRV9EQVRBX09GRlNFVF9QUkVTRU5UXCIsdFt0LlNBTVBMRV9ERVNDUklQVElPTl9JTkRFWF9QUkVTRU5UPTJdPVwiU0FNUExFX0RFU0NSSVBUSU9OX0lOREVYX1BSRVNFTlRcIix0W3QuREVGQVVMVF9TQU1QTEVfRFVSQVRJT05fUFJFU0VOVD04XT1cIkRFRkFVTFRfU0FNUExFX0RVUkFUSU9OX1BSRVNFTlRcIix0W3QuREVGQVVMVF9TQU1QTEVfU0laRV9QUkVTRU5UPTE2XT1cIkRFRkFVTFRfU0FNUExFX1NJWkVfUFJFU0VOVFwiLHRbdC5ERUZBVUxUX1NBTVBMRV9GTEFHU19QUkVTRU5UPTMyXT1cIkRFRkFVTFRfU0FNUExFX0ZMQUdTX1BSRVNFTlRcIn0obC5UcmFja0ZyYWdtZW50RmxhZ3N8fChsLlRyYWNrRnJhZ21lbnRGbGFncz17fSkpO3ZhciBCPWwuVHJhY2tGcmFnbWVudEZsYWdzLEg9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZShlLG4saSxyLG8scyxhKXt0LmNhbGwodGhpcyxcInRmaGRcIiwwLGUpLHRoaXMudHJhY2tJZD1uLHRoaXMuYmFzZURhdGFPZmZzZXQ9aSx0aGlzLnNhbXBsZURlc2NyaXB0aW9uSW5kZXg9cix0aGlzLmRlZmF1bHRTYW1wbGVEdXJhdGlvbj1vLHRoaXMuZGVmYXVsdFNhbXBsZVNpemU9cyx0aGlzLmRlZmF1bHRTYW1wbGVGbGFncz1hfXJldHVybiBmKGUsdCksZS5wcm90b3R5cGUubGF5b3V0PWZ1bmN0aW9uKGUpe3ZhciBuPXQucHJvdG90eXBlLmxheW91dC5jYWxsKHRoaXMsZSkrNCxpPXRoaXMuZmxhZ3M7cmV0dXJuIGkmQi5CQVNFX0RBVEFfT0ZGU0VUX1BSRVNFTlQmJihuKz04KSxpJkIuU0FNUExFX0RFU0NSSVBUSU9OX0lOREVYX1BSRVNFTlQmJihuKz00KSxpJkIuREVGQVVMVF9TQU1QTEVfRFVSQVRJT05fUFJFU0VOVCYmKG4rPTQpLGkmQi5ERUZBVUxUX1NBTVBMRV9TSVpFX1BSRVNFTlQmJihuKz00KSxpJkIuREVGQVVMVF9TQU1QTEVfRkxBR1NfUFJFU0VOVCYmKG4rPTQpLHRoaXMuc2l6ZT1ufSxlLnByb3RvdHlwZS53cml0ZT1mdW5jdGlvbihlKXt2YXIgbj10LnByb3RvdHlwZS53cml0ZS5jYWxsKHRoaXMsZSksaT10aGlzLmZsYWdzO3JldHVybiByKGUsdGhpcy5vZmZzZXQrbix0aGlzLnRyYWNrSWQpLG4rPTQsaSZCLkJBU0VfREFUQV9PRkZTRVRfUFJFU0VOVCYmKHIoZSx0aGlzLm9mZnNldCtuLDApLHIoZSx0aGlzLm9mZnNldCtuKzQsdGhpcy5iYXNlRGF0YU9mZnNldCksbis9OCksaSZCLlNBTVBMRV9ERVNDUklQVElPTl9JTkRFWF9QUkVTRU5UJiYocihlLHRoaXMub2Zmc2V0K24sdGhpcy5zYW1wbGVEZXNjcmlwdGlvbkluZGV4KSxuKz00KSxpJkIuREVGQVVMVF9TQU1QTEVfRFVSQVRJT05fUFJFU0VOVCYmKHIoZSx0aGlzLm9mZnNldCtuLHRoaXMuZGVmYXVsdFNhbXBsZUR1cmF0aW9uKSxuKz00KSxpJkIuREVGQVVMVF9TQU1QTEVfU0laRV9QUkVTRU5UJiYocihlLHRoaXMub2Zmc2V0K24sdGhpcy5kZWZhdWx0U2FtcGxlU2l6ZSksbis9NCksaSZCLkRFRkFVTFRfU0FNUExFX0ZMQUdTX1BSRVNFTlQmJihyKGUsdGhpcy5vZmZzZXQrbix0aGlzLmRlZmF1bHRTYW1wbGVGbGFncyksbis9NCksbn0sZX0obSk7bC5UcmFja0ZyYWdtZW50SGVhZGVyQm94PUg7XG52YXIgaj1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKGUpe3QuY2FsbCh0aGlzLFwidGZkdFwiLDAsMCksdGhpcy5iYXNlTWVkaWFEZWNvZGVUaW1lPWV9cmV0dXJuIGYoZSx0KSxlLnByb3RvdHlwZS5sYXlvdXQ9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuc2l6ZT10LnByb3RvdHlwZS5sYXlvdXQuY2FsbCh0aGlzLGUpKzQsdGhpcy5zaXplfSxlLnByb3RvdHlwZS53cml0ZT1mdW5jdGlvbihlKXt2YXIgbj10LnByb3RvdHlwZS53cml0ZS5jYWxsKHRoaXMsZSk7cmV0dXJuIHIoZSx0aGlzLm9mZnNldCtuLHRoaXMuYmFzZU1lZGlhRGVjb2RlVGltZSksbis0fSxlfShtKTtsLlRyYWNrRnJhZ21lbnRCYXNlTWVkaWFEZWNvZGVUaW1lQm94PWo7dmFyIEc9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZShlLG4saSl7dC5jYWxsKHRoaXMsXCJ0cmFmXCIsW2UsbixpXSksdGhpcy5oZWFkZXI9ZSx0aGlzLmRlY29kZVRpbWU9bix0aGlzLnJ1bj1pfXJldHVybiBmKGUsdCksZX0odik7bC5UcmFja0ZyYWdtZW50Qm94PUcsZnVuY3Rpb24odCl7dFt0LklTX0xFQURJTkdfTUFTSz0yMDEzMjY1OTJdPVwiSVNfTEVBRElOR19NQVNLXCIsdFt0LlNBTVBMRV9ERVBFTkRTX09OX01BU0s9NTAzMzE2NDhdPVwiU0FNUExFX0RFUEVORFNfT05fTUFTS1wiLHRbdC5TQU1QTEVfREVQRU5EU19PTl9PVEhFUj0xNjc3NzIxNl09XCJTQU1QTEVfREVQRU5EU19PTl9PVEhFUlwiLHRbdC5TQU1QTEVfREVQRU5EU19PTl9OT19PVEhFUlM9MzM1NTQ0MzJdPVwiU0FNUExFX0RFUEVORFNfT05fTk9fT1RIRVJTXCIsdFt0LlNBTVBMRV9JU19ERVBFTkRFRF9PTl9NQVNLPTEyNTgyOTEyXT1cIlNBTVBMRV9JU19ERVBFTkRFRF9PTl9NQVNLXCIsdFt0LlNBTVBMRV9IQVNfUkVEVU5EQU5DWV9NQVNLPTMxNDU3MjhdPVwiU0FNUExFX0hBU19SRURVTkRBTkNZX01BU0tcIix0W3QuU0FNUExFX1BBRERJTkdfVkFMVUVfTUFTSz05MTc1MDRdPVwiU0FNUExFX1BBRERJTkdfVkFMVUVfTUFTS1wiLHRbdC5TQU1QTEVfSVNfTk9UX1NZTkM9NjU1MzZdPVwiU0FNUExFX0lTX05PVF9TWU5DXCIsdFt0LlNBTVBMRV9ERUdSQURBVElPTl9QUklPUklUWV9NQVNLPTY1NTM1XT1cIlNBTVBMRV9ERUdSQURBVElPTl9QUklPUklUWV9NQVNLXCJ9KGwuU2FtcGxlRmxhZ3N8fChsLlNhbXBsZUZsYWdzPXt9KSksbC5TYW1wbGVGbGFncywhZnVuY3Rpb24odCl7dFt0LkRBVEFfT0ZGU0VUX1BSRVNFTlQ9MV09XCJEQVRBX09GRlNFVF9QUkVTRU5UXCIsdFt0LkZJUlNUX1NBTVBMRV9GTEFHU19QUkVTRU5UPTRdPVwiRklSU1RfU0FNUExFX0ZMQUdTX1BSRVNFTlRcIix0W3QuU0FNUExFX0RVUkFUSU9OX1BSRVNFTlQ9MjU2XT1cIlNBTVBMRV9EVVJBVElPTl9QUkVTRU5UXCIsdFt0LlNBTVBMRV9TSVpFX1BSRVNFTlQ9NTEyXT1cIlNBTVBMRV9TSVpFX1BSRVNFTlRcIix0W3QuU0FNUExFX0ZMQUdTX1BSRVNFTlQ9MTAyNF09XCJTQU1QTEVfRkxBR1NfUFJFU0VOVFwiLHRbdC5TQU1QTEVfQ09NUE9TSVRJT05fVElNRV9PRkZTRVQ9MjA0OF09XCJTQU1QTEVfQ09NUE9TSVRJT05fVElNRV9PRkZTRVRcIn0obC5UcmFja1J1bkZsYWdzfHwobC5UcmFja1J1bkZsYWdzPXt9KSk7dmFyIFk9bC5UcmFja1J1bkZsYWdzLFY9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZShlLG4saSxyKXt0LmNhbGwodGhpcyxcInRydW5cIiwxLGUpLHRoaXMuc2FtcGxlcz1uLHRoaXMuZGF0YU9mZnNldD1pLHRoaXMuZmlyc3RTYW1wbGVGbGFncz1yfXJldHVybiBmKGUsdCksZS5wcm90b3R5cGUubGF5b3V0PWZ1bmN0aW9uKGUpe3ZhciBuPXQucHJvdG90eXBlLmxheW91dC5jYWxsKHRoaXMsZSkrNCxpPXRoaXMuc2FtcGxlcy5sZW5ndGgscj10aGlzLmZsYWdzO3JldHVybiByJlkuREFUQV9PRkZTRVRfUFJFU0VOVCYmKG4rPTQpLHImWS5GSVJTVF9TQU1QTEVfRkxBR1NfUFJFU0VOVCYmKG4rPTQpLHImWS5TQU1QTEVfRFVSQVRJT05fUFJFU0VOVCYmKG4rPTQqaSksciZZLlNBTVBMRV9TSVpFX1BSRVNFTlQmJihuKz00KmkpLHImWS5TQU1QTEVfRkxBR1NfUFJFU0VOVCYmKG4rPTQqaSksciZZLlNBTVBMRV9DT01QT1NJVElPTl9USU1FX09GRlNFVCYmKG4rPTQqaSksdGhpcy5zaXplPW59LGUucHJvdG90eXBlLndyaXRlPWZ1bmN0aW9uKGUpe3ZhciBuPXQucHJvdG90eXBlLndyaXRlLmNhbGwodGhpcyxlKSxpPXRoaXMuc2FtcGxlcy5sZW5ndGgsbz10aGlzLmZsYWdzO3IoZSx0aGlzLm9mZnNldCtuLGkpLG4rPTQsbyZZLkRBVEFfT0ZGU0VUX1BSRVNFTlQmJihyKGUsdGhpcy5vZmZzZXQrbix0aGlzLmRhdGFPZmZzZXQpLG4rPTQpLG8mWS5GSVJTVF9TQU1QTEVfRkxBR1NfUFJFU0VOVCYmKHIoZSx0aGlzLm9mZnNldCtuLHRoaXMuZmlyc3RTYW1wbGVGbGFncyksbis9NCk7Zm9yKHZhciBzPTA7aT5zO3MrKyl7dmFyIGE9dGhpcy5zYW1wbGVzW3NdO28mWS5TQU1QTEVfRFVSQVRJT05fUFJFU0VOVCYmKHIoZSx0aGlzLm9mZnNldCtuLGEuZHVyYXRpb24pLG4rPTQpLG8mWS5TQU1QTEVfU0laRV9QUkVTRU5UJiYocihlLHRoaXMub2Zmc2V0K24sYS5zaXplKSxuKz00KSxvJlkuU0FNUExFX0ZMQUdTX1BSRVNFTlQmJihyKGUsdGhpcy5vZmZzZXQrbixhLmZsYWdzKSxuKz00KSxvJlkuU0FNUExFX0NPTVBPU0lUSU9OX1RJTUVfT0ZGU0VUJiYocihlLHRoaXMub2Zmc2V0K24sYS5jb21wb3NpdGlvblRpbWVPZmZzZXQpLG4rPTQpfXJldHVybiBufSxlfShtKTtsLlRyYWNrUnVuQm94PVY7dmFyIHo9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZShlLG4pe3QuY2FsbCh0aGlzLFwibW9vZlwiLGkoW2VdLG4pKSx0aGlzLmhlYWRlcj1lLHRoaXMudHJhZnM9bn1yZXR1cm4gZihlLHQpLGV9KHYpO2wuTW92aWVGcmFnbWVudEJveD16O3ZhciBXPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoZSl7dC5jYWxsKHRoaXMsXCJtZGF0XCIpLHRoaXMuY2h1bmtzPWV9cmV0dXJuIGYoZSx0KSxlLnByb3RvdHlwZS5sYXlvdXQ9ZnVuY3Rpb24oZSl7dmFyIG49dC5wcm90b3R5cGUubGF5b3V0LmNhbGwodGhpcyxlKTtyZXR1cm4gdGhpcy5jaHVua3MuZm9yRWFjaChmdW5jdGlvbih0KXtuKz10Lmxlbmd0aH0pLHRoaXMuc2l6ZT1ufSxlLnByb3RvdHlwZS53cml0ZT1mdW5jdGlvbihlKXt2YXIgbj10aGlzLGk9dC5wcm90b3R5cGUud3JpdGUuY2FsbCh0aGlzLGUpO3JldHVybiB0aGlzLmNodW5rcy5mb3JFYWNoKGZ1bmN0aW9uKHQpe2Uuc2V0KHQsbi5vZmZzZXQraSksaSs9dC5sZW5ndGh9LHRoaXMpLGl9LGV9KF8pO2wuTWVkaWFEYXRhQm94PVc7dmFyIEs9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZShlLG4pe3QuY2FsbCh0aGlzLGUpLHRoaXMuZGF0YVJlZmVyZW5jZUluZGV4PW59cmV0dXJuIGYoZSx0KSxlLnByb3RvdHlwZS5sYXlvdXQ9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuc2l6ZT10LnByb3RvdHlwZS5sYXlvdXQuY2FsbCh0aGlzLGUpKzgsdGhpcy5zaXplfSxlLnByb3RvdHlwZS53cml0ZT1mdW5jdGlvbihlKXt2YXIgbj10LnByb3RvdHlwZS53cml0ZS5jYWxsKHRoaXMsZSk7cmV0dXJuIHIoZSx0aGlzLm9mZnNldCtuLDApLHIoZSx0aGlzLm9mZnNldCtuKzQsdGhpcy5kYXRhUmVmZXJlbmNlSW5kZXgpLG4rOH0sZX0oXyk7bC5TYW1wbGVFbnRyeT1LO3ZhciBxPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoZSxuLGkscixvLHMpe3ZvaWQgMD09PWkmJihpPTIpLHZvaWQgMD09PXImJihyPTE2KSx2b2lkIDA9PT1vJiYobz00NDEwMCksdm9pZCAwPT09cyYmKHM9bnVsbCksdC5jYWxsKHRoaXMsZSxuKSx0aGlzLmNoYW5uZWxDb3VudD1pLHRoaXMuc2FtcGxlU2l6ZT1yLHRoaXMuc2FtcGxlUmF0ZT1vLHRoaXMub3RoZXJCb3hlcz1zfXJldHVybiBmKGUsdCksZS5wcm90b3R5cGUubGF5b3V0PWZ1bmN0aW9uKGUpe3ZhciBuPXQucHJvdG90eXBlLmxheW91dC5jYWxsKHRoaXMsZSkrMjA7cmV0dXJuIHRoaXMub3RoZXJCb3hlcyYmdGhpcy5vdGhlckJveGVzLmZvckVhY2goZnVuY3Rpb24odCl7bis9dC5sYXlvdXQoZStuKX0pLHRoaXMuc2l6ZT1ufSxlLnByb3RvdHlwZS53cml0ZT1mdW5jdGlvbihlKXt2YXIgbj10LnByb3RvdHlwZS53cml0ZS5jYWxsKHRoaXMsZSk7cmV0dXJuIHIoZSx0aGlzLm9mZnNldCtuLDApLHIoZSx0aGlzLm9mZnNldCtuKzQsMCkscihlLHRoaXMub2Zmc2V0K24rOCx0aGlzLmNoYW5uZWxDb3VudDw8MTZ8dGhpcy5zYW1wbGVTaXplKSxyKGUsdGhpcy5vZmZzZXQrbisxMiwwKSxyKGUsdGhpcy5vZmZzZXQrbisxNix0aGlzLnNhbXBsZVJhdGU8PDE2KSxuKz0yMCx0aGlzLm90aGVyQm94ZXMmJnRoaXMub3RoZXJCb3hlcy5mb3JFYWNoKGZ1bmN0aW9uKHQpe24rPXQud3JpdGUoZSl9KSxufSxlfShLKTtsLkF1ZGlvU2FtcGxlRW50cnk9cSxsLkNPTE9SX05PX0FMUEhBX1ZJREVPX1NBTVBMRV9ERVBUSD0yNDt2YXIgWD1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKGUsbixpLHIsbyxzLGEsdSxoLGMpe2lmKHZvaWQgMD09PW8mJihvPVwiXCIpLHZvaWQgMD09PXMmJihzPTcyKSx2b2lkIDA9PT1hJiYoYT03Miksdm9pZCAwPT09dSYmKHU9MSksdm9pZCAwPT09aCYmKGg9bC5DT0xPUl9OT19BTFBIQV9WSURFT19TQU1QTEVfREVQVEgpLHZvaWQgMD09PWMmJihjPW51bGwpLHQuY2FsbCh0aGlzLGUsbiksdGhpcy53aWR0aD1pLHRoaXMuaGVpZ2h0PXIsdGhpcy5jb21wcmVzc29yTmFtZT1vLHRoaXMuaG9yaXpSZXNvbHV0aW9uPXMsdGhpcy52ZXJ0UmVzb2x1dGlvbj1hLHRoaXMuZnJhbWVDb3VudD11LHRoaXMuZGVwdGg9aCx0aGlzLm90aGVyQm94ZXM9YyxvLmxlbmd0aD4zMSl0aHJvdyBuZXcgRXJyb3IoXCJpbnZhbGlkIGNvbXByZXNzb3IgbmFtZVwiKX1yZXR1cm4gZihlLHQpLGUucHJvdG90eXBlLmxheW91dD1mdW5jdGlvbihlKXt2YXIgbj10LnByb3RvdHlwZS5sYXlvdXQuY2FsbCh0aGlzLGUpKzE2KzEyKzQrMiszMisyKzI7cmV0dXJuIHRoaXMub3RoZXJCb3hlcyYmdGhpcy5vdGhlckJveGVzLmZvckVhY2goZnVuY3Rpb24odCl7bis9dC5sYXlvdXQoZStuKX0pLHRoaXMuc2l6ZT1ufSxlLnByb3RvdHlwZS53cml0ZT1mdW5jdGlvbihlKXt2YXIgbj10LnByb3RvdHlwZS53cml0ZS5jYWxsKHRoaXMsZSk7cihlLHRoaXMub2Zmc2V0K24sMCkscihlLHRoaXMub2Zmc2V0K24rNCwwKSxyKGUsdGhpcy5vZmZzZXQrbis4LDApLHIoZSx0aGlzLm9mZnNldCtuKzEyLDApLG4rPTE2LHIoZSx0aGlzLm9mZnNldCtuLHRoaXMud2lkdGg8PDE2fHRoaXMuaGVpZ2h0KSxyKGUsdGhpcy5vZmZzZXQrbis0LGEodGhpcy5ob3JpelJlc29sdXRpb24pKSxyKGUsdGhpcy5vZmZzZXQrbis4LGEodGhpcy52ZXJ0UmVzb2x1dGlvbikpLG4rPTEyLHIoZSx0aGlzLm9mZnNldCtuLDApLHIoZSx0aGlzLm9mZnNldCtuKzQsdGhpcy5mcmFtZUNvdW50PDwxNiksbis9NixlW3RoaXMub2Zmc2V0K25dPXRoaXMuY29tcHJlc3Nvck5hbWUubGVuZ3RoO2Zvcih2YXIgaT0wOzMxPmk7aSsrKWVbdGhpcy5vZmZzZXQrbitpKzFdPWk8dGhpcy5jb21wcmVzc29yTmFtZS5sZW5ndGg/MTI3JnRoaXMuY29tcHJlc3Nvck5hbWUuY2hhckNvZGVBdChpKTowO3JldHVybiBuKz0zMixyKGUsdGhpcy5vZmZzZXQrbix0aGlzLmRlcHRoPDwxNnw2NTUzNSksbis9NCx0aGlzLm90aGVyQm94ZXMmJnRoaXMub3RoZXJCb3hlcy5mb3JFYWNoKGZ1bmN0aW9uKHQpe24rPXQud3JpdGUoZSl9KSxufSxlfShLKTtsLlZpZGVvU2FtcGxlRW50cnk9WDt2YXIgJD1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKGUsbil7dC5jYWxsKHRoaXMsZSksdGhpcy5kYXRhPW59cmV0dXJuIGYoZSx0KSxlLnByb3RvdHlwZS5sYXlvdXQ9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuc2l6ZT10LnByb3RvdHlwZS5sYXlvdXQuY2FsbCh0aGlzLGUpK3RoaXMuZGF0YS5sZW5ndGgsdGhpcy5zaXplfSxlLnByb3RvdHlwZS53cml0ZT1mdW5jdGlvbihlKXt2YXIgbj10LnByb3RvdHlwZS53cml0ZS5jYWxsKHRoaXMsZSk7cmV0dXJuIGUuc2V0KHRoaXMuZGF0YSx0aGlzLm9mZnNldCtuKSxuK3RoaXMuZGF0YS5sZW5ndGh9LGV9KF8pO2wuUmF3VGFnPSR9LGZ1bmN0aW9uKHQsZSxuKXsoZnVuY3Rpb24oZSl7dmFyIGkscj1uKDc0KSxvPW4oNjkpLHM9KG8uQmFzZVRyYW5zZm9ybSxuKDExOSkpO24oMTIwKSx0LmV4cG9ydHM9aT1mdW5jdGlvbigpe28uQmFzZVBhcnNlci5wcm90b3R5cGUuY29uc3RydWN0b3IuYXBwbHkodGhpcyxhcmd1bWVudHMpLHRoaXMucGFyc2VyPW5ldyBzLHRoaXMucGFyc2VyLm9uRnJhbWU9dGhpcy5fb25NcDNGcmFtZS5iaW5kKHRoaXMpLHRoaXMucGFyc2VyLm9uTm9pc2U9dGhpcy5fb25Ob2lzZS5iaW5kKHRoaXMpLHRoaXMucGFyc2VyLm9uQ2xvc2U9dGhpcy5fb25DbG9zZS5iaW5kKHRoaXMpLHRoaXMuX3NhbXBsZVJhdGU9MCx0aGlzLl9iaXRSYXRlPTAsdGhpcy5fdGltZXN0YW1wPTB9LGkucHJvdG90eXBlPW8uY3JlYXRlQmFzZVBhcnNlcih7Y29uc3RydWN0b3I6aSxfb25NcDNGcmFtZTpmdW5jdGlvbih0LG4saSl7cihcIkZvdW5kIGZyYW1lIGxlbmd0aCBcIit0Lmxlbmd0aCtcIiBiaXRSYXRlPVwiK24rXCIsIHNhbXBsZVJhdGU9XCIraSk7dmFyIHM9bmV3IGUodCksYT0xMTUyO3MubWV0YT17bWltZVR5cGU6XCJhdWRpby9tcGVnXCIsY29kZWNJZDoyLGNoYW5uZWxzOjIsYml0UmF0ZTpuLHNhbXBsZVJhdGU6aSxzYW1wbGVTaXplOjE2fSxzLmR1cmF0aW9uPWEscy50aW1lc3RhbXA9dGhpcy5fdGltZXN0YW1wLHRoaXMuZW5xdWV1ZShuZXcgby5UcmFuc2ZlcihzLFwiYnVmZmVyXCIpKSx0aGlzLl9iaXRSYXRlPW4sdGhpcy5fdGltZXN0YW1wKz1hfSxfb25Ob2lzZTpmdW5jdGlvbigpe3IoXCJtcDMgaGFzIG5vaXNlXCIpfSxfb25DbG9zZTpmdW5jdGlvbigpe3IoXCJwYXJzZXIgY2xvc2VkXCIpfSxfcGFyc2U6ZnVuY3Rpb24odCl7cmV0dXJuIHIoXCJwYXJzZSBjYWxsZWRcIiksdC5kYXRhLmVtcHR5PyhyKFwiZW1wdHkgdHJhbnNmZXJcIiksdm9pZCB0aGlzLmVucXVldWUodCkpOnZvaWQgdGhpcy5wYXJzZXIucHVzaChuZXcgVWludDhBcnJheSh0LmRhdGEpKX19KX0pLmNhbGwoZSxuKDcwKS5CdWZmZXIpfSxmdW5jdGlvbih0LGUsbil7dmFyIGk9big3NCkscj1bMzIsNjQsOTYsMTI4LDE2MCwxOTIsMjI0LDI1NiwyODgsMzIwLDM1MiwzODQsNDE2LDQ0OCwzMiw0OCw1Niw2NCw4MCw5NiwxMTIsMTI4LDE2MCwxOTIsMjI0LDI1NiwzMjAsMzg0LDMyLDQwLDQ4LDU2LDY0LDgwLDk2LDExMiwxMjgsMTYwLDE5MiwyMjQsMjU2LDMyMCwzMiw0OCw1Niw2NCw4MCw5NiwxMTIsMTI4LDE0NCwxNjAsMTc2LDE5MiwyMjQsMjU2LDgsMTYsMjQsMzIsNDAsNDgsNTYsNjQsODAsOTYsMTEyLDEyOCwxNDQsMTYwXSxvPVs0NDEwMCw0OGUzLDMyZTMsMjIwNTAsMjRlMywxNmUzLDExMDI1LDEyZTMsOGUzXSxzPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCgpe3RoaXMuYnVmZmVyPW51bGwsdGhpcy5idWZmZXJTaXplPTB9cmV0dXJuIHQucHJvdG90eXBlLnB1c2g9ZnVuY3Rpb24odCl7dmFyIGU7aWYodGhpcy5idWZmZXJTaXplPjApe3ZhciBuPXQubGVuZ3RoK3RoaXMuYnVmZmVyU2l6ZTtpZighdGhpcy5idWZmZXJ8fHRoaXMuYnVmZmVyLmxlbmd0aDxuKXt2YXIgcj1uZXcgVWludDhBcnJheShuKTt0aGlzLmJ1ZmZlclNpemU+MCYmci5zZXQodGhpcy5idWZmZXIuc3ViYXJyYXkoMCx0aGlzLmJ1ZmZlclNpemUpKSx0aGlzLmJ1ZmZlcj1yfXRoaXMuYnVmZmVyLnNldCh0LHRoaXMuYnVmZmVyU2l6ZSksdGhpcy5idWZmZXJTaXplPW4sdD10aGlzLmJ1ZmZlcixlPW59ZWxzZSBlPXQubGVuZ3RoO2koXCJwdXNoIFwiK2UpO2Zvcih2YXIgbyxzPTA7ZT5zJiYobz10aGlzLl9wYXJzZSh0LHMsZSkpPjA7KXMrPW87dmFyIGE9ZS1zO2E+MCYmKCF0aGlzLmJ1ZmZlcnx8dGhpcy5idWZmZXIubGVuZ3RoPGE/dGhpcy5idWZmZXI9bmV3IFVpbnQ4QXJyYXkodC5zdWJhcnJheShzLGUpKTp0aGlzLmJ1ZmZlci5zZXQodC5zdWJhcnJheShzLGUpKSksdGhpcy5idWZmZXJTaXplPWF9LHQucHJvdG90eXBlLl9wYXJzZT1mdW5jdGlvbih0LGUsbil7aWYoaShcIl9wYXJzZVwiKSxlKzI+bilyZXR1cm4tMTtpZigyNTU9PT10W2VdfHwyMjQ9PT0oMjI0JnRbZSsxXSkpe2lmKGUrMjQ+bilyZXR1cm4tMTt2YXIgcz10W2UrMV0+PjMmMyxhPXRbZSsxXT4+MSYzLHU9dFtlKzJdPj40JjE1LGg9dFtlKzJdPj4yJjMsYz0hISgyJnRbZSsyXSk7aWYoMSE9PXMmJjAhPT11JiYxNSE9PXUmJjMhPT1oKXt2YXIgbD0zPT09cz8zLWE6Mz09PWE/Mzo0LGY9MWUzKnJbMTQqbCt1LTFdLGQ9Mz09PXM/MDoyPT09cz8xOjIscD1vWzMqZCtoXSxnPWM/MTowLF89Mz09PWE/KDM9PT1zPzEyOjYpKmYvcCtnPDwyOigzPT09cz8xNDQ6NzIpKmYvcCtnfDA7cmV0dXJuIGUrXz5uPy0xOih0aGlzLm9uRnJhbWUmJihpKFwib25GcmFtZVwiKSx0aGlzLm9uRnJhbWUodC5zdWJhcnJheShlLGUrXyksZixwKSksXyl9fWZvcih2YXIgbT1lKzI7bj5tOyl7aWYoMjU1PT09dFttLTFdJiYyMjQ9PT0oMjI0JnRbbV0pKXJldHVybiB0aGlzLm9uTm9pc2UmJnRoaXMub25Ob2lzZSh0LnN1YmFycmF5KGUsbS0xKSksbS1lLTE7bSsrfXJldHVybi0xfSx0LnByb3RvdHlwZS5jbG9zZT1mdW5jdGlvbigpe3RoaXMuYnVmZmVyU2l6ZT4wJiZ0aGlzLm9uTm9pc2UmJnRoaXMub25Ob2lzZSh0aGlzLmJ1ZmZlci5zdWJhcnJheSgwLHRoaXMuYnVmZmVyU2l6ZSkpLHRoaXMuYnVmZmVyPW51bGwsdGhpcy5idWZmZXJTaXplPTAsdGhpcy5vbkNsb3NlJiZ0aGlzLm9uQ2xvc2UoKX0sdH0oKTt0LmV4cG9ydHM9c30sZnVuY3Rpb24odCxlKXt2YXIgbj0xZTk7dC5leHBvcnRzPXtUSU1FU0NBTEVfU0VDT05EUzpufX0sZnVuY3Rpb24odCxlLG4pe3ZhciBpLHI9bigxMjIpLG89big2OSkscz1vLkJhc2VTaW5rLGE9bigxMjMpO3QuZXhwb3J0cz1pPWZ1bmN0aW9uKHQpe2lmKHMucHJvdG90eXBlLmNvbnN0cnVjdG9yLmNhbGwodGhpcyksIXIuaGF2ZU1lZGlhU291cmNlU3VwcG9ydE1pbWVUeXBlKHQpKXRocm93IG5ldyBFcnJvcihcIkxvY2FsIE1lZGlhU291cmNlIGRvZXNuJ3Qgc3VwcG9ydCBwcm92aWRlZCBNSU1FIHR5cGU6IFwiK3QpO3ZhciBlO2U9YXJndW1lbnRzLmxlbmd0aD4xP0FycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cyk6dCBpbnN0YW5jZW9mIEFycmF5P3Q6W3RdLHRoaXMubWltZVR5cGVzPWUsdGhpcy5tZWRpYVNvdXJjZT1uZXcgTWVkaWFTb3VyY2UsdGhpcy5tc2VXcml0ZXI9bmV3IGEodGhpcy5tZWRpYVNvdXJjZSksdGhpcy5kYXRhU291cmNlcz1bXSx0aGlzLnNlbGVjdGVkRGF0YVNvdXJjZUluZGV4PTAsdGhpcy5taW1lVHlwZXMuZm9yRWFjaChmdW5jdGlvbih0KXt2YXIgZT17bWltZVR5cGU6dH07dGhpcy5tc2VXcml0ZXIubGlzdGVuKGUpLHRoaXMuZGF0YVNvdXJjZXMucHVzaChlKX0uYmluZCh0aGlzKSl9LGkucHJvdG90eXBlPW8uY3JlYXRlQmFzZVNpbmsoe2NvbnN0cnVjdG9yOmksX29uRGF0YTpmdW5jdGlvbigpe3ZhciB0PXRoaXMuZGF0YVNvdXJjZXNbdGhpcy5zZWxlY3RlZERhdGFTb3VyY2VJbmRleF07aWYoIXR8fCF0Lm9uRGF0YSl0aHJvdyBuZXcgRXJyb3IoXCJEYXRhU291cmNlIGlzIG5vdCBleGlzdGluZyBvciBoYXMgbm8gb25EYXRhIGZ1bmN0aW9uIGRlZmluZWRcIik7dmFyIGU9dGhpcy5kZXF1ZXVlKCk7ZSYmdC5vbkRhdGEoZS5kYXRhKX0sZ2V0TWVkaWFTb3VyY2VVcmw6ZnVuY3Rpb24oKXtyZXR1cm4gVVJMLmNyZWF0ZU9iamVjdFVSTCh0aGlzLm1lZGlhU291cmNlKX19KX0sZnVuY3Rpb24odCxlKXt2YXIgbjt0LmV4cG9ydHM9bj17aGF2ZUdsb2JhbFdpbmRvdzpmdW5jdGlvbigpe3JldHVyblwidW5kZWZpbmVkXCIhPXR5cGVvZiB3aW5kb3d9LGhhdmVNZWRpYVNvdXJjZUV4dGVuc2lvbnM6ZnVuY3Rpb24oKXtyZXR1cm4gbi5oYXZlR2xvYmFsV2luZG93KCkmJndpbmRvdy5NZWRpYVNvdXJjZX0saGF2ZU1lZGlhU291cmNlU3VwcG9ydE1pbWVUeXBlOmZ1bmN0aW9uKHQpe3JldHVybiBuLmhhdmVNZWRpYVNvdXJjZUV4dGVuc2lvbnMoKSYmd2luZG93Lk1lZGlhU291cmNlLmlzVHlwZVN1cHBvcnRlZCh0KX19fSxmdW5jdGlvbih0LGUpe3ZhciBuPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCh0LGUpe3RoaXMubWVkaWFTb3VyY2U9dCx0aGlzLmRhdGFTb3VyY2U9ZSx0aGlzLmRhdGFTb3VyY2Uub25EYXRhPXRoaXMucHVzaERhdGEuYmluZCh0aGlzKSx0aGlzLnVwZGF0ZUVuYWJsZWQ9ITEsdGhpcy5idWZmZXI9W10sdGhpcy5zb3VyY2VCdWZmZXI9bnVsbCx0aGlzLnNvdXJjZUJ1ZmZlclVwZGF0ZWRCb3VuZD1udWxsfXJldHVybiB0LnByb3RvdHlwZS5hbGxvd1dyaXRpbmc9ZnVuY3Rpb24oKXt0aGlzLnVwZGF0ZUVuYWJsZWQ9ITAsdGhpcy51cGRhdGUoKX0sdC5wcm90b3R5cGUucHVzaERhdGE9ZnVuY3Rpb24odCl7dGhpcy5idWZmZXIucHVzaCh0KSx0aGlzLnVwZGF0ZSgpfSx0LnByb3RvdHlwZS51cGRhdGU9ZnVuY3Rpb24oKXtpZih0aGlzLnVwZGF0ZUVuYWJsZWQmJjAhPT10aGlzLmJ1ZmZlci5sZW5ndGgpe3RoaXMuc291cmNlQnVmZmVyfHwodGhpcy5zb3VyY2VCdWZmZXI9dGhpcy5tZWRpYVNvdXJjZS5hZGRTb3VyY2VCdWZmZXIodGhpcy5kYXRhU291cmNlLm1pbWVUeXBlKSx0aGlzLnNvdXJjZUJ1ZmZlclVwZGF0ZWRCb3VuZD10aGlzLl9zb3VyY2VCdWZmZXJVcGRhdGVkLmJpbmQodGhpcyksdGhpcy5zb3VyY2VCdWZmZXIuYWRkRXZlbnRMaXN0ZW5lcihcInVwZGF0ZVwiLHRoaXMuc291cmNlQnVmZmVyVXBkYXRlZEJvdW5kKSksdGhpcy51cGRhdGVFbmFibGVkPSExO3ZhciB0PXRoaXMuYnVmZmVyLnNoaWZ0KCk7aWYobnVsbD09PXQpcmV0dXJuIHZvaWQgdGhpcy5zb3VyY2VCdWZmZXIucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInVwZGF0ZVwiLHRoaXMuc291cmNlQnVmZmVyVXBkYXRlZEJvdW5kKTt0LnRpbWVzdGFtcCYmKHRoaXMuc291cmNlQnVmZmVyLnRpbWVzdGFtcE9mZnNldD10LnRpbWVzdGFtcC8xZTkpLHRoaXMuc291cmNlQnVmZmVyLmFwcGVuZEJ1ZmZlcih0KX19LHQucHJvdG90eXBlLl9zb3VyY2VCdWZmZXJVcGRhdGVkPWZ1bmN0aW9uKHQpe3RoaXMudXBkYXRlRW5hYmxlZD0hMCx0aGlzLnVwZGF0ZSgpfSx0LnByb3RvdHlwZS5maW5pc2g9ZnVuY3Rpb24oKXt0aGlzLmJ1ZmZlci5wdXNoKG51bGwpLHRoaXMudXBkYXRlKCl9LHR9KCksaT1mdW5jdGlvbigpe2Z1bmN0aW9uIHQodCl7dGhpcy5idWZmZXJXcml0ZXJzPVtdLHRoaXMubWVkaWFTb3VyY2U9dCx0aGlzLm1lZGlhU291cmNlT3BlbmVkPSExLHRoaXMubWVkaWFTb3VyY2UuYWRkRXZlbnRMaXN0ZW5lcihcInNvdXJjZW9wZW5cIixmdW5jdGlvbih0KXt0aGlzLm1lZGlhU291cmNlT3BlbmVkPSEwLHRoaXMuYnVmZmVyV3JpdGVycy5mb3JFYWNoKGZ1bmN0aW9uKHQpe3QuYWxsb3dXcml0aW5nKCl9KX0uYmluZCh0aGlzKSksdGhpcy5tZWRpYVNvdXJjZS5hZGRFdmVudExpc3RlbmVyKFwic291cmNlZW5kXCIsZnVuY3Rpb24odCl7dGhpcy5tZWRpYVNvdXJjZU9wZW5lZD0hMX0uYmluZCh0aGlzKSl9cmV0dXJuIHQucHJvdG90eXBlLmxpc3Rlbj1mdW5jdGlvbih0KXt2YXIgZT1uZXcgbih0aGlzLm1lZGlhU291cmNlLHQpO3RoaXMuYnVmZmVyV3JpdGVycy5wdXNoKGUpLHRoaXMubWVkaWFTb3VyY2VPcGVuZWQmJmUuYWxsb3dXcml0aW5nKCl9LHR9KCk7dC5leHBvcnRzPWl9LGZ1bmN0aW9uKHQsZSxuKXt2YXIgaSxyLG89big2OSk7cj1mdW5jdGlvbih0KXtvLkJhc2VQdXNoU3JjLnByb3RvdHlwZS5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMpO3ZhciBlPXRoaXMucmVxPW5ldyBYTUxIdHRwUmVxdWVzdDtlLm9wZW4oXCJHRVRcIix0LCEwKSxlLnJlc3BvbnNlVHlwZT1cImFycmF5YnVmZmVyXCIsZS5vbmxvYWQ9ZnVuY3Rpb24odCl7dGhpcy5lbnF1ZXVlKG5ldyBvLlRyYW5zZmVyKG5ldyBVaW50OEFycmF5KGUucmVzcG9uc2UpLFwiYmluYXJ5XCIpKSx0aGlzLmVucXVldWUobmV3IG8uVHJhbnNmZXIobnVsbCxcImJpbmFyeVwiKSl9LmJpbmQodGhpcyksZS5zZW5kKCl9LHIucHJvdG90eXBlPW8uY3JlYXRlQmFzZVB1c2hTcmMoe2NvbnN0cnVjdG9yOnJ9KSx0LmV4cG9ydHM9aT17U3JjOnJ9fSxmdW5jdGlvbih0LGUsbil7dmFyIGkscixvLHM9big2OSksYT1uKDEyNik7big3Nikscj1mdW5jdGlvbih0LGUpe3MucHJvdG90eXBlLmNvbnN0cnVjdG9yLmNhbGwodGhpcyk7dmFyIG49YS5jcmVhdGVSZWFkU3RyZWFtKHQsZSk7dGhpcy5vbihcImVuZFwiLGZ1bmN0aW9uKCl7bi5jbG9zZSgpfSksdGhpcy5hZGRPdXRwdXQobil9LHIucHJvdG90eXBlPXMuY3JlYXRlKHtjb25zdHJ1Y3RvcjpyfSksbz1mdW5jdGlvbih0LGUpe3MucHJvdG90eXBlLmNvbnN0cnVjdG9yLmNhbGwodGhpcyk7dmFyIG49YS5jcmVhdGVXcml0ZVN0cmVhbSh0LGUpO3RoaXMub24oXCJmaW5pc2hcIixmdW5jdGlvbigpe24uY2xvc2UoKX0pLHRoaXMuYWRkSW5wdXQobil9LG8ucHJvdG90eXBlPXMuY3JlYXRlKHtjb25zdHJ1Y3RvcjpvfSksdC5leHBvcnRzPWk9e1NyYzpyLFNpbms6b319LGZ1bmN0aW9uKHQsZSxuKXt2YXIgaT1uKDEyMik7dC5leHBvcnRzPWkuaGF2ZUdsb2JhbFdpbmRvdygpP25ldyhuKDEyNykpOm4oIWZ1bmN0aW9uKCl7dmFyIHQ9bmV3IEVycm9yKCdDYW5ub3QgZmluZCBtb2R1bGUgXCJmc1wiJyk7dGhyb3cgdC5jb2RlPVwiTU9EVUxFX05PVF9GT1VORFwiLHR9KCkpfSxmdW5jdGlvbih0LGUsbil7dmFyIGk7aT1mdW5jdGlvbigpe2Z1bmN0aW9uIHQoKXtyZXR1cm4hMX1mdW5jdGlvbiBlKHQpe3JldHVybiEoISh0JiZ0LmRhdGEgaW5zdGFuY2VvZiBPYmplY3QpfHxuKHQpKX1mdW5jdGlvbiBuKHQpe3JldHVybiEhKHQmJnQuZGF0YSBpbnN0YW5jZW9mIEFycmF5QnVmZmVyKX1mdW5jdGlvbiBpKHQsbil7dmFyIGkscj10Lmxlbmd0aCxvPW47Zm9yKGk9MDtyPmk7KytpKXtpZighZShvKSl0aHJvdyBuZXcgRXJyb3IoXCJFTk9FTlRcIik7bz1vLmRhdGFbdFtpXV19cmV0dXJuIG99U3RyaW5nLnByb3RvdHlwZS50cmltfHwhZnVuY3Rpb24oKXt2YXIgdD0vXltcXHNcXHVGRUZGXFx4QTBdK3xbXFxzXFx1RkVGRlxceEEwXSskL2c7U3RyaW5nLnByb3RvdHlwZS50cmltPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucmVwbGFjZSh0LFwiXCIpfX0oKTt2YXIgcj1mdW5jdGlvbigpe3ZhciB0PURhdGUubm93KCk7dGhpcy5yb290PXttdGltZTp0LGN0aW1lOnQsYXRpbWU6dCxkYXRhOnt9fX07cmV0dXJuIHIucHJvdG90eXBlLmpvaW49ZnVuY3Rpb24oKXt2YXIgdD1bXSxlPWFyZ3VtZW50c3x8W107cmV0dXJuIHQ9dGhpcy5wYXJzZShBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChlKS5qb2luKFwiL1wiKSksKFwiL1wiPT09ZVswXVswXT9cIi9cIjpcIlwiKSt0LmpvaW4oXCIvXCIpfSxyLnByb3RvdHlwZS5wYXJzZT1mdW5jdGlvbih0KXt2YXIgZT1bXTtyZXR1cm4gdD10fHxcIi9cIix0LnNwbGl0KC9cXC8rLykuZm9yRWFjaChmdW5jdGlvbih0KXt0PXQudHJpbSgpLHQubGVuZ3RoJiZcIi5cIiE9PXQmJihcIi4uXCI9PT10P2UucG9wKCk6ZS5wdXNoKHQpKX0pLGV9LHIucHJvdG90eXBlLmZpbGVTaXplU0k9ZnVuY3Rpb24odCxlLG4saSxyKXtyZXR1cm4oZT1NYXRoLG49ZS5sb2csaT0xZTMscj1uKHQpL24oaSl8MCx0L2UucG93KGkscikpLnRvRml4ZWQocj8yOjApK1wiIFwiKyhyP1wia01HVFBFWllcIlstLXJdK1wiQlwiOlwiQnl0ZXNcIil9LHIucHJvdG90eXBlLmZpbGVTaXplSUVDPWZ1bmN0aW9uKHQsZSxuLGkscil7cmV0dXJuKGU9TWF0aCxuPWUubG9nLGk9MTAyNCxyPW4odCkvbihpKXwwLHQvZS5wb3coaSxyKSkudG9GaXhlZChyPzI6MCkrXCIgXCIrKHI/XCJLTUdUUEVaWVwiWy0tcl0rXCJpQlwiOlwiQnl0ZXNcIil9LHIucHJvdG90eXBlLnN0YXRTeW5jPWZ1bmN0aW9uKG4pe3ZhciByPXRoaXMucGFyc2Uobiksbz1pKHIsdGhpcy5yb290KSxzPWUobyk7aWYoIW98fCFvLmRhdGEpdGhyb3cgbmV3IEVycm9yKFwiRU5PRU5UXCIpO3JldHVybntzaXplOnM/T2JqZWN0LmtleXMoby5kYXRhKS5sZW5ndGg6by5kYXRhLmJ5dGVMZW5ndGgsY3RpbWU6bmV3IERhdGUoby5jdGltZSksbXRpbWU6bmV3IERhdGUoby5tdGltZSksYXRpbWU6bmV3IERhdGUoby5hdGltZSksaXNGaWxlOmZ1bmN0aW9uKCl7cmV0dXJuIXN9LGlzRGlyZWN0b3J5OmZ1bmN0aW9uKCl7cmV0dXJuIHN9LGlzQmxvY2tEZXZpY2U6dCxpc0NoYXJhY3RlckRldmljZTp0LGlzU3ltYm9saWNMaW5rOnQsaXNGSUZPOnQsaXNTb2NrZXQ6dH19LHIucHJvdG90eXBlLmV4aXN0c1N5bmM9ZnVuY3Rpb24odCl7dmFyIG4saT10aGlzLnBhcnNlKHQpLHI9aS5sZW5ndGgsbz10aGlzLnJvb3Q7Zm9yKG49MDtyPm47KytuKXtpZighZShvKSlyZXR1cm4hMTtvPW8uZGF0YVtpW25dXX1yZXR1cm4hIW99LHIucHJvdG90eXBlLm1rZGlyU3luYz1mdW5jdGlvbih0KXt2YXIgbj10aGlzLnBhcnNlKHQpLHI9aShuLnNsaWNlKDAsbi5sZW5ndGgtMSksdGhpcy5yb290KSxvPURhdGUubm93KCk7aWYoIW4ubGVuZ3RofHwhZShyKSl0aHJvdyBuZXcgRXJyb3IoXCJFTk9ESVJcIik7ci5kYXRhW25bbi5sZW5ndGgtMV1dPXtkYXRhOnt9LGN0aW1lOm8sbXRpbWU6byxhdGltZTpvfSxyLm10aW1lPW99LHIucHJvdG90eXBlLm1rZGlycFN5bmM9ZnVuY3Rpb24odCl7dmFyIHIsbyxzLGE9dGhpcy5wYXJzZSh0KSx1PWEubGVuZ3RoO2lmKCFhLmxlbmd0aCl0aHJvdyBuZXcgRXJyb3IoXCJFTk9ESVJcIik7Zm9yKG89MDt1Pm87KytvKXtpZihyPWEuc2xpY2UoMCxvKzEpLHM9aShyLHRoaXMucm9vdCksbihzKSl0aHJvdyBuZXcgRXJyb3IoXCJFTk9ESVJcIik7ZShzKXx8dGhpcy5ta2RpclN5bmMoci5qb2luKFwiL1wiKSl9fSxyLnByb3RvdHlwZS5yZWFkZGlyU3luYz1mdW5jdGlvbih0KXt2YXIgbj10aGlzLnBhcnNlKHQpLHI9aShuLHRoaXMucm9vdCk7aWYoIWUocikpdGhyb3cgbmV3IEVycm9yKFwiRU5PRElSXCIpO3JldHVybiByLmF0aW1lPURhdGUubm93KCksT2JqZWN0LmtleXMoci5kYXRhKX0sci5wcm90b3R5cGUucm1kaXJTeW5jPWZ1bmN0aW9uKHQpe3ZhciBuPXRoaXMucGFyc2UodCkscj1pKG4sdGhpcy5yb290KTtpZihkaXJuYW1lPW4ucG9wKCkscGFyZW50RGlyPWkobix0aGlzLnJvb3QpLCFlKHIpKXRocm93IG5ldyBFcnJvcihcIkVOT0RJUlwiKTtpZihPYmplY3Qua2V5cyhyLmRhdGEpLmxlbmd0aCl0aHJvdyBuZXcgRXJyb3IoXCJFTk9URU1QVFlcIik7ZGVsZXRlIHBhcmVudERpci5kYXRhW2Rpcm5hbWVdLHBhcmVudERpci5tdGltZT1EYXRlLm5vdygpfSxyLnByb3RvdHlwZS5ybXJmU3luYz1mdW5jdGlvbih0KXt2YXIgbj10aGlzLnBhcnNlKHQpLHI9bi5wb3AoKSxvPWkobix0aGlzLnJvb3QpO2lmKCFlKG8pKXRocm93IG5ldyBFcnJvcihcIkVOT0RJUlwiKTtyP2RlbGV0ZSBvLmRhdGFbcl06by5kYXRhPXt9LG8ubXRpbWU9RGF0ZS5ub3coKX0sci5wcm90b3R5cGUud3JpdGVGaWxlU3luYz1mdW5jdGlvbih0LG4scil7dmFyIG8scyxhPXRoaXMucGFyc2UodCksdT1hLnBvcCgpLGg9dGhpcy5leGlzdHNTeW5jKHQpLGM9aShhLHRoaXMucm9vdCk7aWYoIWUoYykpdGhyb3cgbmV3IEVycm9yKFwiRU5PRElSXCIpO2lmKCF1KXRocm93IG5ldyBFcnJvcihcIkVJTlZBTElEUEFUSFwiKTtpZihyPXJ8fHtlbmNvZGluZzohMH0sXCJzdHJpbmdcIj09dHlwZW9mIG4pe289bmV3IEFycmF5QnVmZmVyKDIqbi5sZW5ndGgpO2Zvcih2YXIgbD1uZXcgVWludDE2QXJyYXkobyksZj0wLGQ9bi5sZW5ndGg7ZD5mOysrZilsW2ZdPW4uY2hhckNvZGVBdChmKX1lbHNlIG89bjtzPURhdGUubm93KCksYy5kYXRhW3VdPXtkYXRhOm8sY3RpbWU6cyxtdGltZTpzLGF0aW1lOnN9LGh8fChjLm10aW1lPXMpLGMuYXRpbWU9c30sci5wcm90b3R5cGUucmVhZEZpbGVTeW5jPWZ1bmN0aW9uKHQsZSl7dmFyIHI9dGhpcy5wYXJzZSh0KSxvPWkocix0aGlzLnJvb3QpLGU9ZXx8e2VuY29kaW5nOiExfTtpZighbihvKSl0aHJvdyBuZXcgRXJyb3IoXCJFTk9FTlRcIik7cmV0dXJuIG8uYXRpbWU9RGF0ZS5ub3coKSxlLmVuY29kaW5nP1N0cmluZy5mcm9tQ2hhckNvZGUuYXBwbHkobnVsbCxuZXcgVWludDE2QXJyYXkoby5kYXRhKSk6by5kYXRhfSxyLnByb3RvdHlwZS5yZW5hbWVTeW5jPWZ1bmN0aW9uKHQsbil7dmFyIHI9dGhpcy5wYXJzZSh0KSxvPWkocix0aGlzLnJvb3QpLHM9aShyLnNsaWNlKDAsci5sZW5ndGgtMSksdGhpcy5yb290KSxhPXJbci5sZW5ndGgtMV0sdT10aGlzLnBhcnNlKG4pLGg9aSh1LHRoaXMucm9vdCksYz1pKHUuc2xpY2UoMCx1Lmxlbmd0aC0xKSx0aGlzLnJvb3QpLGw9dVt1Lmxlbmd0aC0xXSxmPURhdGUubm93KCk7aWYoIXIubGVuZ3RofHwhdS5sZW5ndGgpdGhyb3cgbmV3IEVycm9yKFwiRU5PRU5UXCIpO2lmKCFlKHN8fCFlKGMpKSl0aHJvdyBuZXcgRXJyb3IoXCJFTk9ESVJcIik7aWYoaCl0aHJvdyBuZXcgRXJyb3IoXCJFRVhJU1RTXCIpO2MuZGF0YVtsXT1oPW8saC5jdGltZT1mLGMubXRpbWU9ZixkZWxldGUgcy5kYXRhW2FdLHMubXRpbWU9Zn0sW1wic3RhdFwiLFwiZXhpc3RzXCIsXCJyZWFkZGlyXCIsXCJta2RpcnBcIixcIm1rZGlyXCIsXCJybWRpclwiLFwicm1yZlwiLFwidW5saW5rXCJdLmZvckVhY2goZnVuY3Rpb24odCl7ci5wcm90b3R5cGVbdF09ZnVuY3Rpb24oZSxuKXt0cnl7dmFyIGk9dGhpc1t0K1wiU3luY1wiXShlKX1jYXRjaChyKXtyZXR1cm4gbihyKX1yZXR1cm4gbihudWxsLGkpfX0pLFtcIndyaXRlRmlsZVwiLFwicmVhZEZpbGVcIl0uZm9yRWFjaChmdW5jdGlvbih0KXtyLnByb3RvdHlwZVt0XT1mdW5jdGlvbihlLG4saSl7aXx8KGk9bixuPXZvaWQgMCk7dHJ5e3ZhciByPXRoaXNbdCtcIlN5bmNcIl0oZSxuKX1jYXRjaChvKXtyZXR1cm4gaShvKX1yZXR1cm4gaShudWxsLHIpfX0pLFtcInJlbmFtZVwiXS5mb3JFYWNoKGZ1bmN0aW9uKHQpe3IucHJvdG90eXBlW3RdPWZ1bmN0aW9uKGUsbixpKXt0cnl7dmFyIHI9dGhpc1t0K1wiU3luY1wiXShlLG4pfWNhdGNoKG8pe3JldHVybiBpKG8pfXJldHVybiBpKG51bGwscil9fSkscn0uY2FsbChlLG4sZSx0KSwhKHZvaWQgMCE9PWkmJih0LmV4cG9ydHM9aSkpfSxmdW5jdGlvbih0LGUpe3ZhciBuPXtIVFRQOlwiaHR0cFwiLFJUTVA6XCJydG1wXCIsSExTOlwiaGxzXCJ9O3QuZXhwb3J0cz1ufSxmdW5jdGlvbih0LGUpe3QuZXhwb3J0cz17QUFDOlwiYXVkaW8vYWFjXCIsTTNVODpcImFwcGxpY2F0aW9uL3gtbXBlZ1VSTFwiLEhMUzpcImFwcGxpY2F0aW9uL3ZuZC5hcHBsZS5tcGVndXJsXCIsTVA0QTpcImF1ZGlvL21wNFwiLE1QMzpcImF1ZGlvL21wZWdcIixPR0c6XCJhdWRpby9vZ2dcIixXQVY6XCJhdWRpby93YXZcIixXRUJNQTpcImF1ZGlvL3dlYm1cIixnZXRUeXBlQnlFeHRlbnNpb246ZnVuY3Rpb24odCl7dmFyIGU9e21wMzp0aGlzLk1QMyxhYWM6dGhpcy5BQUMsbXA0OnRoaXMuTVA0QSxtcDRhOnRoaXMuTVA0QSxvZ2c6dGhpcy5PR0csb2dhOnRoaXMuT0dHLG9wdXM6dGhpcy5PR0csd2VibTp0aGlzLldFQk0sd2F2OnRoaXMuV0FWLG0zdTg6dGhpcy5NM1U4fTtyZXR1cm4gZVt0XXx8bnVsbH19fSxmdW5jdGlvbih0LGUsbixpLHIsbyl7ZnVuY3Rpb24gcyh0LGUsbil7Zm9yKHZhciBpPS0xLHI9aChlKSxvPXIubGVuZ3RoOysraTxvOyl7dmFyIHM9cltpXSxhPXRbc10sdT1uKGEsZVtzXSxzLHQsZSk7KHU9PT11P3U9PT1hOmEhPT1hKSYmKHZvaWQgMCE9PWF8fHMgaW4gdCl8fCh0W3NdPXUpfXJldHVybiB0fXZhciBhPW4oaSksdT1uKHIpLGg9bihvKSxjPXUoZnVuY3Rpb24odCxlLG4pe3JldHVybiBuP3ModCxlLG4pOmEodCxlKX0pO3QuZXhwb3J0cz1jfSxmdW5jdGlvbih0LGUsbixpLHIpe2Z1bmN0aW9uIG8odCxlKXtyZXR1cm4gbnVsbD09ZT90OnMoZSxhKGUpLHQpfXZhciBzPW4oaSksYT1uKHIpO3QuZXhwb3J0cz1vfSxmdW5jdGlvbih0LGUsbixpLHIsbyl7ZnVuY3Rpb24gcyh0KXtyZXR1cm4gZnVuY3Rpb24oZSl7cmV0dXJuIG51bGw9PWU/dm9pZCAwOmVbdF19fWZ1bmN0aW9uIGEodCl7cmV0dXJuIG51bGwhPXQmJmgoUyh0KSl9ZnVuY3Rpb24gdSh0LGUpe3JldHVybiB0PVwibnVtYmVyXCI9PXR5cGVvZiB0fHxfLnRlc3QodCk/K3Q6LTEsZT1udWxsPT1lP0U6ZSx0Pi0xJiZ0JTE9PTAmJmU+dH1mdW5jdGlvbiBoKHQpe3JldHVyblwibnVtYmVyXCI9PXR5cGVvZiB0JiZ0Pi0xJiZ0JTE9PTAmJkU+PXR9ZnVuY3Rpb24gYyh0KXtmb3IodmFyIGU9Zih0KSxuPWUubGVuZ3RoLGk9biYmdC5sZW5ndGgscj0hIWkmJmgoaSkmJihnKHQpfHxwKHQpKSxvPS0xLHM9W107KytvPG47KXt2YXIgYT1lW29dOyhyJiZ1KGEsaSl8fHkuY2FsbCh0LGEpKSYmcy5wdXNoKGEpfXJldHVybiBzfWZ1bmN0aW9uIGwodCl7dmFyIGU9dHlwZW9mIHQ7cmV0dXJuISF0JiYoXCJvYmplY3RcIj09ZXx8XCJmdW5jdGlvblwiPT1lKX1mdW5jdGlvbiBmKHQpe2lmKG51bGw9PXQpcmV0dXJuW107bCh0KXx8KHQ9T2JqZWN0KHQpKTt2YXIgZT10Lmxlbmd0aDtlPWUmJmgoZSkmJihnKHQpfHxwKHQpKSYmZXx8MDtmb3IodmFyIG49dC5jb25zdHJ1Y3RvcixpPS0xLHI9XCJmdW5jdGlvblwiPT10eXBlb2YgbiYmbi5wcm90b3R5cGU9PT10LG89QXJyYXkoZSkscz1lPjA7KytpPGU7KW9baV09aStcIlwiO2Zvcih2YXIgYSBpbiB0KXMmJnUoYSxlKXx8XCJjb25zdHJ1Y3RvclwiPT1hJiYocnx8IXkuY2FsbCh0LGEpKXx8by5wdXNoKGEpO3JldHVybiBvfXZhciBkPW4oaSkscD1uKHIpLGc9bihvKSxfPS9eXFxkKyQvLG09T2JqZWN0LnByb3RvdHlwZSx5PW0uaGFzT3duUHJvcGVydHksdj1kKE9iamVjdCxcImtleXNcIiksRT05MDA3MTk5MjU0NzQwOTkxLFM9cyhcImxlbmd0aFwiKSxBPXY/ZnVuY3Rpb24odCl7dmFyIGU9bnVsbD09dD92b2lkIDA6dC5jb25zdHJ1Y3RvcjtyZXR1cm5cImZ1bmN0aW9uXCI9PXR5cGVvZiBlJiZlLnByb3RvdHlwZT09PXR8fFwiZnVuY3Rpb25cIiE9dHlwZW9mIHQmJmEodCk/Yyh0KTpsKHQpP3YodCk6W119OmM7dC5leHBvcnRzPUF9LGZ1bmN0aW9uKHQsZSxuLGkscixvKXtmdW5jdGlvbiBzKHQpe3JldHVybiBoKGZ1bmN0aW9uKGUsbil7dmFyIGk9LTEscj1udWxsPT1lPzA6bi5sZW5ndGgsbz1yPjI/bltyLTJdOnZvaWQgMCxzPXI+Mj9uWzJdOnZvaWQgMCxoPXI+MT9uW3ItMV06dm9pZCAwO2ZvcihcImZ1bmN0aW9uXCI9PXR5cGVvZiBvPyhvPWEobyxoLDUpLHItPTIpOihvPVwiZnVuY3Rpb25cIj09dHlwZW9mIGg/aDp2b2lkIDAsci09bz8xOjApLHMmJnUoblswXSxuWzFdLHMpJiYobz0zPnI/dm9pZCAwOm8scj0xKTsrK2k8cjspe3ZhciBjPW5baV07YyYmdChlLGMsbyl9cmV0dXJuIGV9KX12YXIgYT1uKGkpLHU9bihyKSxoPW4obyk7dC5leHBvcnRzPXN9LGZ1bmN0aW9uKHQsZSxuLGkpe2Z1bmN0aW9uIHIodCxlKXtyZXR1cm4gcCh0LGUsbCl9ZnVuY3Rpb24gbyh0KXtyZXR1cm4gZnVuY3Rpb24oZSl7cmV0dXJuIG51bGw9PWU/dm9pZCAwOmVbdF19fWZ1bmN0aW9uIHModCxlKXtyZXR1cm4gZnVuY3Rpb24obixpKXt2YXIgcj1uP2cobik6MDtpZighdShyKSlyZXR1cm4gdChuLGkpO2Zvcih2YXIgbz1lP3I6LTEscz1oKG4pOyhlP28tLTorK288cikmJmkoc1tvXSxvLHMpIT09ITE7KTtyZXR1cm4gbn19ZnVuY3Rpb24gYSh0KXtyZXR1cm4gZnVuY3Rpb24oZSxuLGkpe2Zvcih2YXIgcj1oKGUpLG89aShlKSxzPW8ubGVuZ3RoLGE9dD9zOi0xO3Q/YS0tOisrYTxzOyl7dmFyIHU9b1thXTtpZihuKHJbdV0sdSxyKT09PSExKWJyZWFrfXJldHVybiBlfX1mdW5jdGlvbiB1KHQpe3JldHVyblwibnVtYmVyXCI9PXR5cGVvZiB0JiZ0Pi0xJiZ0JTE9PTAmJmY+PXR9ZnVuY3Rpb24gaCh0KXtyZXR1cm4gYyh0KT90Ok9iamVjdCh0KX1mdW5jdGlvbiBjKHQpe3ZhciBlPXR5cGVvZiB0O3JldHVybiEhdCYmKFwib2JqZWN0XCI9PWV8fFwiZnVuY3Rpb25cIj09ZSl9dmFyIGw9bihpKSxmPTkwMDcxOTkyNTQ3NDA5OTEsZD1zKHIpLHA9YSgpLGc9byhcImxlbmd0aFwiKTt0LmV4cG9ydHM9ZH1dKSl9LGZ1bmN0aW9uKHQsZSxuKXt2YXIgaT1uKDIyKSxyPWZ1bmN0aW9uKHQsZSl7dmFyIG49ZXx8e30scj1uLmJ1ZmZlckxlbnx8NDA5NixvPW4ubnVtQ2hhbm5lbHN8fDI7dGhpcy5jb250ZXh0PXQuY29udGV4dCx0aGlzLm5vZGU9KHRoaXMuY29udGV4dC5jcmVhdGVTY3JpcHRQcm9jZXNzb3J8fHRoaXMuY29udGV4dC5jcmVhdGVKYXZhU2NyaXB0Tm9kZSkuY2FsbCh0aGlzLmNvbnRleHQscixvLG8pO3ZhciBzPW5ldyBpO3MucG9zdE1lc3NhZ2Uoe2NvbW1hbmQ6XCJpbml0XCIsY29uZmlnOntzYW1wbGVSYXRlOnRoaXMuY29udGV4dC5zYW1wbGVSYXRlLG51bUNoYW5uZWxzOm99fSk7dmFyIGEsdT0hMTt0aGlzLm5vZGUub25hdWRpb3Byb2Nlc3M9ZnVuY3Rpb24odCl7aWYodSl7Zm9yKHZhciBlPVtdLG49MDtvPm47bisrKWUucHVzaCh0LmlucHV0QnVmZmVyLmdldENoYW5uZWxEYXRhKG4pKTtzLnBvc3RNZXNzYWdlKHtjb21tYW5kOlwicmVjb3JkXCIsYnVmZmVyOmV9KX19LHRoaXMuY29uZmlndXJlPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZSBpbiB0KXQuaGFzT3duUHJvcGVydHkoZSkmJihuW2VdPXRbZV0pfSx0aGlzLnJlY29yZD1mdW5jdGlvbigpe3U9ITB9LHRoaXMuc3RvcD1mdW5jdGlvbigpe3U9ITF9LHRoaXMuY2xlYXI9ZnVuY3Rpb24oKXtzLnBvc3RNZXNzYWdlKHtjb21tYW5kOlwiY2xlYXJcIn0pfSx0aGlzLmdldEJ1ZmZlcj1mdW5jdGlvbih0KXthPXR8fG4uY2FsbGJhY2sscy5wb3N0TWVzc2FnZSh7Y29tbWFuZDpcImdldEJ1ZmZlclwifSl9LHRoaXMuZXhwb3J0V0FWPWZ1bmN0aW9uKHQsZSl7aWYoYT10fHxuLmNhbGxiYWNrLGU9ZXx8bi50eXBlfHxcImF1ZGlvL3dhdlwiLCFhKXRocm93IG5ldyBFcnJvcihcIkNhbGxiYWNrIG5vdCBzZXRcIik7cy5wb3N0TWVzc2FnZSh7Y29tbWFuZDpcImV4cG9ydFdBVlwiLHR5cGU6ZX0pfSxzLm9ubWVzc2FnZT1mdW5jdGlvbih0KXt2YXIgZT10LmRhdGE7YShlKX0sdC5jb25uZWN0KHRoaXMubm9kZSksdGhpcy5ub2RlLmNvbm5lY3QodGhpcy5jb250ZXh0LmRlc3RpbmF0aW9uKX07ci5mb3JjZURvd25sb2FkPWZ1bmN0aW9uKHQsZSl7dmFyIG49KHdpbmRvdy5VUkx8fHdpbmRvdy53ZWJraXRVUkwpLmNyZWF0ZU9iamVjdFVSTCh0KSxpPXdpbmRvdy5kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYVwiKTtpLmhyZWY9bixpLmRvd25sb2FkPWV8fFwib3V0cHV0LndhdlwiO3ZhciByPWRvY3VtZW50LmNyZWF0ZUV2ZW50KFwiRXZlbnRcIik7ci5pbml0RXZlbnQoXCJjbGlja1wiLCEwLCEwKSxpLmRpc3BhdGNoRXZlbnQocil9LHQuZXhwb3J0cz1yfSxmdW5jdGlvbih0LGUpe3QuZXhwb3J0cz1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKGkpe2lmKG5baV0pcmV0dXJuIG5baV0uZXhwb3J0czt2YXIgcj1uW2ldPXtleHBvcnRzOnt9LGlkOmksbG9hZGVkOiExfTtyZXR1cm4gdFtpXS5jYWxsKHIuZXhwb3J0cyxyLHIuZXhwb3J0cyxlKSxyLmxvYWRlZD0hMCxyLmV4cG9ydHN9dmFyIG49e307cmV0dXJuIGUubT10LGUuYz1uLGUucD1cIlwiLGUoMCl9KFtmdW5jdGlvbih0LGUsbil7ZnVuY3Rpb24gaSgpe3JldHVybiB0aGlzLl9ob29rc1BhdXNlLmV2ZXJ5KGZ1bmN0aW9uKHQpe3JldHVybiB0LmNhbGwoKX0pfWZ1bmN0aW9uIHIodCl7dmFyIGU9dC5yZXNvdXJjZV9pZHx8dC5pZHx8dC5jaWQ7aWYoIWUpdGhyb3cgbmV3IEVycm9yKFwiWW91ciBtb2RlbCBzaG91bGQgaGF2ZSBhIHVuaXF1ZSBgaWRgLCBgY2lkYCBvciBgcmVzb3VyY2VfaWRgIHByb3BlcnR5XCIpO3JldHVybiBlfWZ1bmN0aW9uIG8odCl7Qz10LHQmJih4LkF1ZGlvTWFuYWdlclN0YXRlcz10LlN0YXRlcyl9ZnVuY3Rpb24gcygpe3ZhciB0PUcoKTtyZXR1cm4gcC5jYWxsKHRoaXMsITApLmRvbmUoZnVuY3Rpb24oZSl7dC5yZXNvbHZlKGUudXJsKX0pLmZhaWwoZnVuY3Rpb24oKXt0LnJlamVjdCgpfSksdC5wcm9taXNlKCl9ZnVuY3Rpb24gYSh0KXt2YXIgZSxuPXRoaXMub3B0aW9ucztyZXR1cm4gZT17aWQ6dGhpcy5nZXRJZCgpLHNyYzp0LnVybCxkdXJhdGlvbjokLnJlc3VsdChuLmR1cmF0aW9uKSx0aXRsZTp0aGlzLm9wdGlvbnMudGl0bGUsbWltZVR5cGU6dC5taW1lVHlwZSxmb3JjZVNpbmdsZTpuLnVzZVNpbmdsZVBsYXllcn0sQy5jcmVhdGVBdWRpb1BsYXllcihlLHtzdHJlYW1VcmxQcm92aWRlcjpzLmJpbmQodGhpcyl9KX1mdW5jdGlvbiB1KHQsZSl7dmFyIG49ZT9cIm9uXCI6XCJvZmZcIjt0W25dKFwic3RhdGUtY2hhbmdlXCIsTCx0aGlzKVtuXShcInBvc2l0aW9uLWNoYW5nZVwiLGMsdGhpcylbbl0oXCJtZXRhZGF0YVwiLGgsdGhpcyl9ZnVuY3Rpb24gaCgpe3RoaXMudHJpZ2dlcihZLk1FVEFEQVRBKX1mdW5jdGlvbiBjKCl7dGhpcy5fcHJldlBvc2l0aW9uIT09dGhpcy5jdXJyZW50VGltZSgpJiYodGhpcy50cmlnZ2VyKFkuVElNRSksdGhpcy5fcHJldlBvc2l0aW9uPXRoaXMuY3VycmVudFRpbWUoKSl9ZnVuY3Rpb24gbCgpe3RoaXMuX2luaXRBdWRpb0RlZmVyJiYodGhpcy5faW5pdEF1ZGlvRGVmZXIucmVqZWN0KCksdGhpcy5faW5pdEF1ZGlvRGVmZXI9bnVsbCx0aGlzLnN0cmVhbUluZm89bnVsbCl9ZnVuY3Rpb24gZigpe2wuY2FsbCh0aGlzKSx0aGlzLmNvbnRyb2xsZXImJih0aGlzLl9zdG9yZWRQb3NpdGlvbj10aGlzLmN1cnJlbnRUaW1lKCksdGhpcy5jb250cm9sbGVyLmtpbGwoKSx0aGlzLmNvbnRyb2xsZXI9bnVsbCx0aGlzLnRyaWdnZXIoWS5SRVNFVCkpfWZ1bmN0aW9uIGQoKXt0aGlzLl9yZWdpc3RlclBsYXlzPSEwLHRoaXMucGF1c2UoKSx0aGlzLnRyaWdnZXIoWS5GSU5JU0gpfWZ1bmN0aW9uIHAodCl7dmFyIGU9RygpLG49dGhpcy5zdHJlYW1JbmZvJiYhdDtyZXR1cm4gbj9lLnJlc29sdmUodGhpcy5zdHJlYW1JbmZvKTpnLmNhbGwodGhpcykuZG9uZShmdW5jdGlvbih0KXt2YXIgbj1xLmNob29zZVByZWZlcnJlZFN0cmVhbSh0LHRoaXMub3B0aW9ucyk7bj9lLnJlc29sdmUobik6KHRoaXMudHJpZ2dlcihZLk5PX1BST1RPQ09MKSxGLndhcm4oXCIoJXMpIENvdWxkIG5vdCBtYXRjaCBhIHByb3RvY29sIG9mIGdpdmVuIG1lZGlhIGRlc2NyaXB0b3IgdG8gb25lIG9mIHRoZSBzdXBwb3J0ZWQgcHJvdG9jb2xzICglcyksIGFib3J0aW5nIGF0dGVtcHQgdG8gcGxheS5cIix0aGlzLmdldElkKCksdGhpcy5vcHRpb25zLnByb3RvY29scyksZS5yZWplY3QoKSl9LmJpbmQodGhpcykpLmZhaWwoZnVuY3Rpb24odCl7Ri53YXJuKFwiKCVzKSBTdHJlYW0gcmVxdWVzdCBmYWlsZWQgd2l0aCBzdGF0dXM6ICVkXCIsdGhpcy5nZXRJZCgpLHQuc3RhdHVzKSxfLmNhbGwodGhpcyx0KSxtLmNhbGwodGhpcyx0KSxlLnJlamVjdCgpfS5iaW5kKHRoaXMpKSxlLnByb21pc2UoKX1mdW5jdGlvbiBnKCl7aWYodGhpcy5vcHRpb25zLnN0cmVhbVVybHMmJiF0aGlzLl91c2VkUHJlZmV0Y2hVcmxzKXt2YXIgdCxlPUcoKTtyZXR1cm4gdGhpcy5fdXNlZFByZWZldGNoVXJscz0hMCx0PSQucmVzdWx0KHRoaXMub3B0aW9ucy5zdHJlYW1VcmxzKSxlLnJlc29sdmUodCksZS5wcm9taXNlKCl9cmV0dXJuIHRoaXMuYWpheCh7dHlwZTpcIkdFVFwiLHVybDokLnJlc3VsdCh0aGlzLm9wdGlvbnMuc3RyZWFtVXJsc0VuZHBvaW50KSxkYXRhVHlwZTpcImpzb25cIixhc3luYzp0aGlzLm9wdGlvbnMuYXN5bmNGZXRjaCx0aW1lb3V0OnRoaXMub3B0aW9ucy5hc3luY0ZldGNoP250OmV0fSl9ZnVuY3Rpb24gXyh0KXt2YXIgZT10LnN0YXR1cz49NDAwJiYtMSE9PSh0LnJlc3BvbnNlVGV4dHx8XCJcIikuaW5kZXhPZihcImdlb19ibG9ja2VkXCIpO2UmJnRoaXMudHJpZ2dlcihZLkdFT19CTE9DS0VEKX1mdW5jdGlvbiBtKHQpezA9PT10LnN0YXR1cyYmdGhpcy50cmlnZ2VyKFkuTk9fQ09OTkVDVElPTil9ZnVuY3Rpb24geSgpe3JldHVybiB0aGlzLmNvbnRyb2xsZXImJnRoaXMuY29udHJvbGxlci5nZXRDYXBhYmlsaXRpZXMmJnRoaXMuY29udHJvbGxlci5nZXRDYXBhYmlsaXRpZXMoKT90aGlzLmNvbnRyb2xsZXIuZ2V0Q2FwYWJpbGl0aWVzKCkubmVlZHNVcmxSZWZyZXNoOiEwfWZ1bmN0aW9uIHYodCl7aWYoIXkuY2FsbCh0aGlzKSlyZXR1cm4hMDt2YXIgZT10aGlzLl9pbml0QXVkaW9EZWZlciYmdGhpcy5faW5pdEF1ZGlvRGVmZXIuc3RhdGUoKSxuPXEuc3RyZWFtVmFsaWRGb3JQbGF5aW5nRnJvbSh0aGlzLnN0cmVhbUluZm8sdCk7cmV0dXJuIHRoaXMuY29udHJvbGxlciYmdGhpcy5jb250cm9sbGVyLmhhc1N0cmVhbVVybFByb3ZpZGVyJiZ0aGlzLmNvbnRyb2xsZXIuaGFzU3RyZWFtVXJsUHJvdmlkZXIoKT8hMDplJiYoXCJwZW5kaW5nXCI9PT1lfHxcInJlc29sdmVkXCI9PT1lJiZuKX1mdW5jdGlvbiBFKHQpe3QmJiF0aGlzLl9idWZmZXJpbmdUaW1lb3V0P3RoaXMuX2J1ZmZlcmluZ1RpbWVvdXQ9d2luZG93LnNldFRpbWVvdXQoZnVuY3Rpb24oKXt0aGlzLl9pc0J1ZmZlcmluZz0hMCx0aGlzLnRyaWdnZXIoWS5CVUZGRVJSSU5HX1NUQVJUKX0uYmluZCh0aGlzKSxpdCk6dHx8KHRoaXMuX2J1ZmZlcmluZ1RpbWVvdXQmJih3aW5kb3cuY2xlYXJUaW1lb3V0KHRoaXMuX2J1ZmZlcmluZ1RpbWVvdXQpLHRoaXMuX2J1ZmZlcmluZ1RpbWVvdXQ9bnVsbCksdGhpcy5faXNCdWZmZXJpbmcmJih0aGlzLl9pc0J1ZmZlcmluZz0hMSx0aGlzLnRyaWdnZXIoWS5CVUZGRVJSSU5HX0VORCkpKX1mdW5jdGlvbiBTKCl7dGhpcy5vZmYoWS5USU1FLHRoaXMuc2Vla1RpbWVFdmVudEhhbmRsZXIpLHRoaXMudHJpZ2dlcihZLlNFRUtFRCksdGhpcy5zZWVrVGltZUV2ZW50SGFuZGxlcj1udWxsfWZ1bmN0aW9uIEEoKXt0aGlzLl9lcnJvclJlY292ZXJ5RmxhZ3NSZXNldFRpbWVvdXQ9d2luZG93LnNldFRpbWVvdXQoZnVuY3Rpb24oKXt0aGlzLl9lcnJvclJlY292ZXJ5VGltZT1udWxsLHRoaXMuX2Vycm9yUmVjb3ZlcnlDb3VudHM9MH0uYmluZCh0aGlzKSxhdCl9ZnVuY3Rpb24gdygpe3RoaXMuX2Vycm9yUmVjb3ZlcnlGbGFnc1Jlc2V0VGltZW91dCYmd2luZG93LmNsZWFyVGltZW91dCh0aGlzLl9lcnJvclJlY292ZXJ5RmxhZ3NSZXNldFRpbWVvdXQpfWZ1bmN0aW9uIFQoKXt2YXIgdD10aGlzLmlzUGxheWluZygpLGU9RGF0ZS5ub3coKTtyZXR1cm4gdy5jYWxsKHRoaXMpLHRoaXMuX2Vycm9yUmVjb3ZlcnlUaW1lJiZ0aGlzLl9lcnJvclJlY292ZXJ5VGltZStvdD5lJiZ0aGlzLl9lcnJvclJlY292ZXJ5Q291bnRzPnN0P3ZvaWQgdGhpcy50cmlnZ2VyKFkuQVVESU9fRVJST1IsdGhpcyk6KHRoaXMuX2Vycm9yUmVjb3ZlcnlUaW1lPURhdGUubm93KCksdGhpcy5fZXJyb3JSZWNvdmVyeUNvdW50cysrLGYuY2FsbCh0aGlzKSx2b2lkKHQmJnRoaXMucGxheSh7c2Vlazp0aGlzLmN1cnJlbnRUaW1lKCksdXNlckluaXRpYXRlZDohMX0pKSl9ZnVuY3Rpb24gYih0KXt0aGlzLmxvZ0F1ZGlvRXJyb3Ioe2Vycm9yX2NvZGU6dCxwcm90b2NvbDp0aGlzLnN0cmVhbUluZm8/dGhpcy5zdHJlYW1JbmZvLnByb3RvY29sOnZvaWQgMCxwbGF5ZXJfdHlwZTp0aGlzLmNvbnRyb2xsZXI/dGhpcy5jb250cm9sbGVyLmdldFR5cGUoKTp2b2lkIDAsaG9zdDp0aGlzLnN0cmVhbUluZm8/WC5nZXRVcmxIb3N0KHRoaXMuc3RyZWFtSW5mby51cmwpOnZvaWQgMCx1cmw6dGhpcy5zdHJlYW1JbmZvP3RoaXMuc3RyZWFtSW5mby51cmw6dm9pZCAwfSl9ZnVuY3Rpb24gUCgpe3ZhciB0LGU9Qy5FcnJvcnM7aWYoIXRoaXMuY29udHJvbGxlcilyZXR1cm4gRi5lcnJvcihcIiglcykgQ29udHJvbGxlciBpcyBudWxsLCBhYm9ydGluZyBlcnJvciBoYW5kbGVyLlwiLHRoaXMuZ2V0SWQoKSx0aGlzKSxiLmNhbGwodGhpcyxudWxsKSx2b2lkIFQuY2FsbCh0aGlzKTtzd2l0Y2godD10aGlzLmNvbnRyb2xsZXImJnRoaXMuY29udHJvbGxlci5nZXRFcnJvcklEKCksRi5lcnJvcihcIiglcykgJXNcIix0aGlzLmdldElkKCksdGhpcy5jb250cm9sbGVyLmdldEVycm9yTWVzc2FnZT90aGlzLmNvbnRyb2xsZXIuZ2V0RXJyb3JNZXNzYWdlKCk6XCJDb250cm9sbGVyIGRvZXMgbm90IHByb3ZpZGUgZ2V0RXJyb3JNZXNzYWdlKClcIiksRCh0LFwiTVNFXCIsXCJHRU5FUklDXCIsXCJIVE1MNV9BVURJT19ERUNPREVcIixcIkhUTUw1X0FVRElPX1NSQ19OT1RfU1VQUE9SVEVEXCIsXCJGTEFTSF9QUk9YWVwiLFwiRkxBU0hfUlRNUF9DT05ORUNUX0ZBSUxFRFwiLFwiRkxBU0hfUlRNUF9DQU5OT1RfUExBWV9TVFJFQU1cIikmJmIuY2FsbCh0aGlzLHQpLHQpe2Nhc2UgZS5GTEFTSF9QUk9YWV9DQU5UX0xPQURfRkxBU0g6dGhpcy50cmlnZ2VyKFkuRkxBU0hfTk9UX0xPQURFRCk7YnJlYWs7Y2FzZSBlLkZMQVNIX1BST1hZX0ZMQVNIX0JMT0NLRUQ6dGhpcy50cmlnZ2VyKFkuRkxBU0hfQkxPQ0spO2JyZWFrO2Nhc2UgZS5GTEFTSF9SVE1QX0NPTk5FQ1RfRkFJTEVEOiQud2l0aG91dCh0aGlzLm9wdGlvbnMucHJvdG9jb2xzLFcuUlRNUCk7Y2FzZSBlLkZMQVNIX1JUTVBfQ0FOTk9UX1BMQVlfU1RSRUFNOmNhc2UgZS5GTEFTSF9SVE1QX0NPTk5FQ1RfQ0xPU0VEOmNhc2UgZS5IVE1MNV9BVURJT19ORVRXT1JLOmNhc2UgZS5IVE1MNV9BVURJT19BQk9SVEVEOmNhc2UgZS5IVE1MNV9BVURJT19ERUNPREU6Y2FzZSBlLkhUTUw1X0FVRElPX1NSQ19OT1RfU1VQUE9SVEVEOmNhc2UgZS5HRU5FUklDX0FVRElPX0VOREVEX0VBUkxZOmNhc2UgZS5NU0VfQkFEX09CSkVDVF9TVEFURTpjYXNlIGUuTVNFX05PVF9TVVBQT1JURUQ6Y2FzZSBlLk1TRV9NUDNfTk9UX1NVUFBPUlRFRDpjYXNlIGUuTVNFX0hMU19OT1RfVkFMSURfUExBWUxJU1Q6Y2FzZSBlLk1TRV9ITFNfUExBWUxJU1RfTk9UX0ZPVU5EOmNhc2UgZS5NU0VfSExTX1NFR01FTlRfTk9UX0ZPVU5EOlQuY2FsbCh0aGlzKTticmVhaztjYXNlIGUuR0VORVJJQ19BVURJT19PVkVSUlVOOmQuY2FsbCh0aGlzKTticmVhaztkZWZhdWx0OkYuZXJyb3IoXCIoJXMpIFVuaGFuZGxlZCBhdWRpbyBlcnJvciBjb2RlOiAlc1wiLHRoaXMuZ2V0SWQoKSx0LHRoaXMpfX1mdW5jdGlvbiBJKHQsZSl7c3dpdGNoKHRoaXMub3B0aW9ucy5kZWJ1ZyYmTy5jYWxsKHRoaXMsdCxlKSx0KXtjYXNlIFkuUEFVU0U6dGhpcy5faXNQbGF5aW5nPSExLHRoaXMuX2lzUGxheUFjdGlvblF1ZXVlZD0hMTticmVhaztjYXNlIFkuUExBWTp2YXIgbj1lO3RoaXMudG9nZ2xlTXV0ZShKLm11dGVkKSx0aGlzLnNldFZvbHVtZShKLnZvbHVtZSksdGhpcy5faXNQbGF5aW5nPSExLHRoaXMuX2lzUGxheUFjdGlvblF1ZXVlZD0hMCx0aGlzLl91c2VySW5pdGlhdGVkUGxheT12b2lkIDAhPT1uLnVzZXJJbml0aWF0ZWQ/ISFuLnVzZXJJbml0aWF0ZWQ6ITAsTS5jYWxsKHRoaXMpO2JyZWFrO2Nhc2UgWS5QTEFZX1NUQVJUOnRoaXMuX2lzUGxheWluZz0hMCx0aGlzLl9pc1BsYXlBY3Rpb25RdWV1ZWQ9ITEsdGhpcy5fcmVnaXN0ZXJQbGF5cyYmdGhpcy5yZWdpc3RlclBsYXkoKTticmVhaztjYXNlIFkuQlVGRkVSUklOR19TVEFSVDpjYXNlIFkuU0VFSzp0aGlzLl9pc1BsYXlpbmcmJih0aGlzLl9pc1BsYXlpbmc9ITEsdGhpcy5faXNQbGF5QWN0aW9uUXVldWVkPSEwKTticmVhaztjYXNlIFkuQlVGRkVSUklOR19FTkQ6Y2FzZSBZLlNFRUtFRDp0aGlzLl9pc1BsYXlBY3Rpb25RdWV1ZWQmJih0aGlzLl9pc1BsYXlpbmc9ITAsdGhpcy5faXNQbGF5QWN0aW9uUXVldWVkPSExKTticmVhaztjYXNlIFkuTk9fQ09OTkVDVElPTjp0aGlzLl9oYXNOb0Nvbm5lY3Rpb249ITAsdGhpcy5fbm9Db25uZWN0aW9uU2luY2U9RGF0ZS5ub3coKTticmVhaztjYXNlIFkuTk9fU1RSRUFNUzp0aGlzLnBhdXNlKCksRS5jYWxsKHRoaXMsITEpLGwuY2FsbCh0aGlzKSxOLmNhbGwodGhpcyk7YnJlYWs7Y2FzZSBZLlNUUkVBTVM6dGhpcy5fbm9Db25uZWN0aW9uU2luY2U9bnVsbCx0aGlzLl9oYXNOb0Nvbm5lY3Rpb249ITE7YnJlYWs7Y2FzZSBZLk9OTElORTprLmNhbGwodGhpcyk7YnJlYWs7Y2FzZSBZLk9GRkxJTkU6fX1mdW5jdGlvbiBMKHQpe3ZhciBlPUMuU3RhdGVzLG49Qy5FcnJvcnM7c3dpdGNoKHQpe2Nhc2UgZS5JRExFOlIuY2FsbCh0aGlzKSx0aGlzLmNvbnRyb2xsZXImJnRoaXMuY29udHJvbGxlci5nZXRFcnJvcklEKCk9PT1uLkZMQVNIX1BST1hZX0ZMQVNIX0JMT0NLRUQmJnRoaXMudHJpZ2dlcihZLkZMQVNIX1VOQkxPQ0spO2JyZWFrO2Nhc2UgZS5QQVVTRUQ6Ui5jYWxsKHRoaXMpLEUuY2FsbCh0aGlzLCExKSx0aGlzLnNlZWtUaW1lRXZlbnRIYW5kbGVyJiZ0aGlzLmlzUGF1c2VkKCkmJlMuY2FsbCh0aGlzKSx0aGlzLmlzUGxheWluZygpJiZ0aGlzLnRyaWdnZXIoWS5QQVVTRSx7cG9zaXRpb246dGhpcy5jdXJyZW50VGltZSgpfSk7YnJlYWs7Y2FzZSBlLlBMQVlJTkc6Ui5jYWxsKHRoaXMpLEUuY2FsbCh0aGlzLCExKSxBLmNhbGwodGhpcyksdGhpcy50cmlnZ2VyKFkuUExBWV9SRVNVTUUpO2JyZWFrO2Nhc2UgZS5MT0FESU5HOmNhc2UgZS5TRUVLSU5HOlIuY2FsbCh0aGlzKSxFLmNhbGwodGhpcywhMCk7YnJlYWs7Y2FzZSBlLkVOREVEOlIuY2FsbCh0aGlzKSxkLmNhbGwodGhpcyk7YnJlYWs7Y2FzZSBlLkVSUk9SOkUuY2FsbCh0aGlzLCExKSxQLmNhbGwodGhpcyl9dGhpcy50cmlnZ2VyKFkuU1RBVEVfQ0hBTkdFLHQpfWZ1bmN0aW9uIE8odCxlKXt2YXIgbj10aGlzLm9wdGlvbnMudGl0bGU7bj1uJiZuLmxlbmd0aD9cIiBbXCIrbi5yZXBsYWNlKC9cXHMvZyxcIlwiKS5zdWJzdHIoMCw2KStcIl1cIjpcIlwiLHQ9PT1ZLlNUQVRFX0NIQU5HRT9GKFwiKCVzKSVzIEV2ZW50OiAlcyAoJXMpXCIsdGhpcy5nZXRJZCgpLG4sdCxlKTp0IT09WS5USU1FfHx0aGlzLl9sb2dnZWRUaW1lP3QhPT1ZLlRJTUUmJkYoXCIoJXMpJXMgRXZlbnQ6ICVzXCIsdGhpcy5nZXRJZCgpLG4sdCk6RihcIiglcyklcyBFdmVudDogJXMgJWRtc1wiLHRoaXMuZ2V0SWQoKSxuLHQsdGhpcy5jdXJyZW50VGltZSgpKSx0aGlzLl9sb2dnZWRUaW1lPXQ9PT1ZLlRJTUV9ZnVuY3Rpb24gUigpe3RoaXMuX2luaXRBdWRpb0RlZmVyJiZ0aGlzLl9pbml0QXVkaW9EZWZlci5yZXNvbHZlKCl9ZnVuY3Rpb24gRCh0KXtyZXR1cm4gdm9pZCAwPT09Qy5FcnJvcnNbdF0/ITE6QXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLDEpLnNvbWUoZnVuY3Rpb24oZSl7cmV0dXJuIDA9PT10LmluZGV4T2YoZSl9KX1mdW5jdGlvbiBNKCl7ZnVuY3Rpb24gdCgpe3ZhciB0PXdpbmRvdy5uYXZpZ2F0b3Iub25MaW5lO0YoXCJOYXZpZ2F0b3IgYG9uTGluZWAgc3RhdHVzIGlzIG5vdzogXCIrdCksd2luZG93LnNldFRpbWVvdXQoZnVuY3Rpb24oKXt3aW5kb3cubmF2aWdhdG9yLm9uTGluZT09PXQmJnRoaXMudHJpZ2dlcih0P1kuT05MSU5FOlkuT0ZGTElORSl9LmJpbmQodGhpcyksNTAwKX10aGlzLl9vbmxpbmVFdmVudHNSZWdpc3RlcmVkfHwodGhpcy5fb25saW5lRXZlbnRzUmVnaXN0ZXJlZD0hMCx3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcIm9ubGluZVwiLHQuYmluZCh0aGlzKSksd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJvZmZsaW5lXCIsdC5iaW5kKHRoaXMpKSl9ZnVuY3Rpb24gaygpe2lmKHRoaXMuaGFzTm9Db25uZWN0aW9uKCkmJnRoaXMuX2lzUGxheVJldHJ5UXVldWVkKXt2YXIgdD1EYXRlLm5vdygpLXRoaXMuX25vQ29ubmVjdGlvblNpbmNlO3RoaXMuX2lzUGxheVJldHJ5UXVldWVkPSEwLHQ8dGhpcy5vcHRpb25zLnJldHJ5QWZ0ZXJOb0Nvbm5lY3Rpb25FdmVudFRpbWVvdXQmJnRoaXMucGxheSh7dXNlckluaXRpYXRlZDohMX0pfX1mdW5jdGlvbiBOKCl7dGhpcy5oYXNOb0Nvbm5lY3Rpb24oKSYmIXRoaXMuX3VzZXJJbml0aWF0ZWRQbGF5JiYodGhpcy5faXNQbGF5UmV0cnlRdWV1ZWQ9ITApfXZhciB4LEMsRixVPW4oMSksQj1uKDYpLEg9big4KSxqPW4oOSksRz1uKDIpLkRlZmVycmVkLFk9big3KSxWPW4oMTQpLHo9bigxMCksVz1uKDE1KSxLPW4oMTYpLHE9bigxOCksWD1uKDEyKSwkPW4oMTMpLFo9bigxOSksUT17fSxKPXttdXRlZDohMSx2b2x1bWU6MX0sdHQ9e3NvdW5kSWQ6USxkdXJhdGlvbjpRLHRpdGxlOm51bGwscmVnaXN0ZXJFbmRwb2ludDpRLHN0cmVhbVVybHNFbmRwb2ludDpRLHJlc291cmNlSWQ6ITEsZGVidWc6ITEsYXN5bmNGZXRjaDohMCx1c2VTaW5nbGVQbGF5ZXI6ITAscHJvdG9jb2xzOltXLkhMUyxXLlJUTVAsVy5IVFRQXSxleHRlbnNpb25zOltWLk1QM10sbWF4Qml0cmF0ZToxLzAsbWVkaWFTb3VyY2VFbmFibGVkOiExLG1zZUZpcmVmb3g6ITEsbXNlU2FmYXJpOiExLGV2ZW50TG9nZ2VyOm51bGwsbG9nRXJyb3JzOiEwLGxvZ1BlcmZvcm1hbmNlOiEwLGFqYXg6bnVsbCxyZXRyeUFmdGVyTm9Db25uZWN0aW9uRXZlbnRUaW1lb3V0OjZlNCxmYWRlT3V0T25QYXVzZTohMSxmYWRlT3V0QWxnbzpaLlZvbHVtZUF1dG9tYXRvci5BbGdvcy5FYXNlSW5PdXR9LGV0PTZlMyxudD02ZTMsaXQ9NDAwLHJ0PTZlNCxvdD02ZTMsc3Q9MyxhdD0zZTQsdXQ9W107eD10LmV4cG9ydHM9ZnVuY3Rpb24odCxlKXtpZigxPT09YXJndW1lbnRzLmxlbmd0aD9lPXQ6eC5zZXRBdWRpb01hbmFnZXIodCksIUMpdGhyb3cgbmV3IEVycm9yKFwiU0NBdWRpbzogQXVkaW9NYW5hZ2VyIGluc3RhbmNlIG11c3QgYmUgc2V0IHdpdGggYFNDQXVkaW8uc2V0QXVkaW9NYW5hZ2VyKClgIG9yIHBhc3NlZCB2aWEgdGhlIGNvbnN0cnVjdG9yXCIpO3RoaXMub3B0aW9ucz0kLmV4dGVuZCh7fSx0dCxlKTt2YXIgbj1PYmplY3Qua2V5cyh0aGlzLm9wdGlvbnMpLmZpbHRlcihmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5vcHRpb25zW3RdPT09UX0sdGhpcyk7aWYobi5sZW5ndGgpdGhyb3cgbmV3IEVycm9yKFwiU0NBdWRpbzogcGFzcyBpbnRvIGNvbnN0cnVjdG9yIHRoZSBmb2xsb3dpbmcgb3B0aW9uczogXCIrbi5qb2luKFwiLCBcIikpO0sucHJpb3JpdGl6ZUFuZEZpbHRlcih0aGlzLm9wdGlvbnMpLHRoaXMuY29udHJvbGxlcj1udWxsLHRoaXMuc3RyZWFtSW5mbz1udWxsLHRoaXMuX3VzZXJJbml0aWF0ZWRQbGF5PXRoaXMuX3JlZ2lzdGVyUGxheXM9ITAsdGhpcy5fcmVnaXN0ZXJDb3VudHM9dGhpcy5fZXJyb3JSZWNvdmVyeUNvdW50cz0wLHRoaXMuX2lzUGxheUFjdGlvblF1ZXVlZD10aGlzLl9vbmxpbmVFdmVudHNSZWdpc3RlcmVkPXRoaXMuX3VzZWRQcmVmZXRjaFVybHM9dGhpcy5faXNQbGF5aW5nPXRoaXMuX2lzQnVmZmVyaW5nPXRoaXMuX2hhc05vQ29ubmVjdGlvbj0hMSx0aGlzLl9pbml0QXVkaW9EZWZlcj10aGlzLl9leHBpcmF0aW9uVGltZW91dD10aGlzLl9idWZmZXJpbmdUaW1lb3V0PXRoaXMuX2Vycm9yUmVjb3ZlcnlUaW1lPXRoaXMuX2Vycm9yUmVjb3ZlcnlGbGFnc1Jlc2V0VGltZW91dD10aGlzLl9zdG9yZWRQb3NpdGlvbj10aGlzLl9wcmV2UG9zaXRpb249dGhpcy5fbm9Db25uZWN0aW9uU2luY2U9bnVsbCx0aGlzLm9wdGlvbnMuZGVidWcmJih0aGlzLl9sb2dnZWRUaW1lPSExKSx0aGlzLl9tb2RlbExpc3RlbmVycz17fSx0aGlzLl9ob29rc1BhdXNlPVtdLHRoaXMuYXVkaW9QZXJmTW9uaXRvcj1uZXcgSCh0aGlzLHRoaXMubG9nQXVkaW9QZXJmb3JtYW5jZS5iaW5kKHRoaXMpKSx0aGlzLmF1ZGlvTG9nZ2VyPW5ldyBCKHRoaXMpLHRoaXMudm9sdW1lQXV0b21hdG9yPW5ldyBaLlZvbHVtZUF1dG9tYXRvcih0aGlzKSxGPUZ8fGooZS5kZWJ1ZyxcInNjYXVkaW9cIil9LCQuZXh0ZW5kKHgucHJvdG90eXBlLHose2NvbnN0cnVjdG9yOngsaW5pdEF1ZGlvOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2luaXRBdWRpb0RlZmVyfHwodGhpcy5faW5pdEF1ZGlvRGVmZXI9RygpLHAuY2FsbCh0aGlzKS5kb25lKGZ1bmN0aW9uKHQpe3ZhciBlPSEwO3RoaXMuc3RyZWFtSW5mbyYmKGU9ITEpLHRoaXMuc3RyZWFtSW5mbz10LGUmJnRoaXMudHJpZ2dlcihZLlNUUkVBTVMpLHRoaXMuY29udHJvbGxlcj1hLmNhbGwodGhpcyx0KSx1LmNhbGwodGhpcyx0aGlzLmNvbnRyb2xsZXIsITApLEwuY2FsbCh0aGlzLHRoaXMuY29udHJvbGxlci5nZXRTdGF0ZSgpKX0uYmluZCh0aGlzKSkuZmFpbChmdW5jdGlvbigpe3RoaXMudHJpZ2dlcihZLk5PX1NUUkVBTVMpfS5iaW5kKHRoaXMpKSx0aGlzLl9pbml0QXVkaW9EZWZlci5kb25lKGZ1bmN0aW9uKCl7dGhpcy50cmlnZ2VyKFkuQ1JFQVRFRCl9LmJpbmQodGhpcykpKSx0aGlzLl9pbml0QXVkaW9EZWZlci5wcm9taXNlKCl9LHJlZ2lzdGVyUGxheTpmdW5jdGlvbigpe3ZhciB0PXRoaXMub3B0aW9ucy5zb3VuZElkLGU9ITE7cmV0dXJuLTE9PT11dC5pbmRleE9mKHQpJiYodXQucHVzaCh0KSx3aW5kb3cuc2V0VGltZW91dChmdW5jdGlvbigpe3ZhciBlPXV0LmluZGV4T2YodCk7ZT4tMSYmdXQuc3BsaWNlKGUsMSl9LHJ0KSx0aGlzLmFqYXgoe3R5cGU6XCJQT1NUXCIsdXJsOiQucmVzdWx0KHRoaXMub3B0aW9ucy5yZWdpc3RlckVuZHBvaW50KSxkYXRhVHlwZTpcImpzb25cIn0pLHRoaXMuX3JlZ2lzdGVyQ291bnRzKyssdGhpcy5fcmVnaXN0ZXJQbGF5cz0hMSx0aGlzLnRyaWdnZXIoWS5SRUdJU1RFUkVEKSxlPSEwKSxlfSx0b2dnbGU6ZnVuY3Rpb24oKXtcbnRoaXNbdGhpcy5pc1BhdXNlZCgpP1wicGxheVwiOlwicGF1c2VcIl0oKX0scGxheTpmdW5jdGlvbih0KXt2YXIgZTtpZih0JiZudWxsIT10LnNlZWspZT10LnNlZWs7ZWxzZXtpZih0aGlzLmlzUGxheWluZygpKXJldHVybjtlPXRoaXMuY3VycmVudFRpbWUoKX10PSQuZXh0ZW5kKHt9LHQse3Bvc2l0aW9uOmV9KSx0aGlzLnRyaWdnZXIoWS5QTEFZLHQpLHYuY2FsbCh0aGlzLGUpfHwoZi5jYWxsKHRoaXMpLHRoaXMuX2lzUGxheUFjdGlvblF1ZXVlZD0hMCksdGhpcy5pbml0QXVkaW8oKS5kb25lKGZ1bmN0aW9uKCl7dGhpcy5faXNQbGF5QWN0aW9uUXVldWVkJiYodGhpcy5fc3RvcmVkUG9zaXRpb249bnVsbCx0aGlzLnRyaWdnZXIoWS5QTEFZX1NUQVJULHQpLHRoaXMuY29udHJvbGxlciYmdGhpcy5jb250cm9sbGVyLnBsYXkoZSkpfS5iaW5kKHRoaXMpKSxFLmNhbGwodGhpcywhMCl9LHBhdXNlOmZ1bmN0aW9uKHQpe3RoaXMuaXNQYXVzZWQoKXx8KHQ9JC5leHRlbmQoe30sdCx7cG9zaXRpb246dGhpcy5jdXJyZW50VGltZSgpfSksaS5jYWxsKHRoaXMpJiYodGhpcy50cmlnZ2VyKFkuUEFVU0UsdCksdGhpcy5jb250cm9sbGVyJiZ0aGlzLmNvbnRyb2xsZXIucGF1c2UoKSkpfSxyZWdpc3Rlckhvb2s6ZnVuY3Rpb24odCxlKXtzd2l0Y2godCl7Y2FzZVwicGF1c2VcIjp0aGlzLl9ob29rc1BhdXNlLnB1c2goZSk7YnJlYWs7ZGVmYXVsdDp0aHJvdyBuZXcgRXJyb3IoXCJjYW5gdCByZWdpc3RlciBob29rIGZvciBcIit0KX19LGdldExpc3RlblRpbWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5hdWRpb0xvZ2dlcj90aGlzLmF1ZGlvTG9nZ2VyLmdldExpc3RlblRpbWUoKTowfSxkaXNwb3NlOmZ1bmN0aW9uKCl7dGhpcy5hdWRpb0xvZ2dlcj1udWxsLHRoaXMuYXVkaW9QZXJmTW9uaXRvcj1udWxsLCQud2l0aG91dCh1dCx0aGlzLm9wdGlvbnMuc291bmRJZCksd2luZG93LmNsZWFyVGltZW91dCh0aGlzLl9idWZmZXJpbmdUaW1lb3V0KSxsLmNhbGwodGhpcyksdGhpcy5jb250cm9sbGVyJiYodGhpcy5jb250cm9sbGVyLmtpbGwoKSx0aGlzLmNvbnRyb2xsZXI9bnVsbCksZGVsZXRlIHRoaXMuY29udHJvbGxlcix0aGlzLnRyaWdnZXIoWS5ERVNUUk9ZRUQpLHRoaXMub2ZmKCl9LHNlZWs6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuY29udHJvbGxlcj90Pj0kLnJlc3VsdCh0aGlzLm9wdGlvbnMuZHVyYXRpb24pP3ZvaWQgZC5jYWxsKHRoaXMpOih0aGlzLnNlZWtUaW1lRXZlbnRIYW5kbGVyJiZ0aGlzLm9mZihZLlRJTUUsdGhpcy5zZWVrVGltZUV2ZW50SGFuZGxlciksdGhpcy5zZWVrVGltZUV2ZW50SGFuZGxlcj0kLmFmdGVyKDIsZnVuY3Rpb24oKXtTLmNhbGwodGhpcyl9LmJpbmQodGhpcykpLHRoaXMub24oWS5USU1FLHRoaXMuc2Vla1RpbWVFdmVudEhhbmRsZXIpLHRoaXMudHJpZ2dlcihZLlNFRUsse2Zyb206dGhpcy5jdXJyZW50VGltZSgpLHRvOnR9KSx0aGlzLmlzUGxheWluZygpJiYhdi5jYWxsKHRoaXMsdCk/KGYuY2FsbCh0aGlzKSx2b2lkIHRoaXMucGxheSh7c2Vlazp0fSkpOnZvaWQgdGhpcy5jb250cm9sbGVyLnNlZWsodCkpOnZvaWQgMH0sc2Vla1JlbGF0aXZlOmZ1bmN0aW9uKHQpe3RoaXMuY29udHJvbGxlciYmdGhpcy5zZWVrKHRoaXMuY3VycmVudFRpbWUoKSt0KX0sY3VycmVudFRpbWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fc3RvcmVkUG9zaXRpb24/dGhpcy5fc3RvcmVkUG9zaXRpb246dGhpcy5jb250cm9sbGVyP3RoaXMuY29udHJvbGxlci5nZXRDdXJyZW50UG9zaXRpb24oKTowfSxsb2FkUHJvZ3Jlc3M6ZnVuY3Rpb24oKXt2YXIgdD0wO3JldHVybiB0aGlzLmNvbnRyb2xsZXImJih0PXRoaXMuY29udHJvbGxlci5nZXRMb2FkZWRQb3NpdGlvbigpL3RoaXMuY29udHJvbGxlci5nZXREdXJhdGlvbigpLHQ9dD49Ljk5PzE6dCksdH0sYnVmZmVyZWQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb250cm9sbGVyJiZ0aGlzLmNvbnRyb2xsZXIuZ2V0RHVyYXRpb24oKXx8MH0saXNQYXVzZWQ6ZnVuY3Rpb24oKXtyZXR1cm4hdGhpcy5pc1BsYXlpbmcoKX0saXNCdWZmZXJpbmc6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5faXNCdWZmZXJpbmd9LGlzUGxheWluZzpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9pc1BsYXlBY3Rpb25RdWV1ZWR8fHRoaXMuX2lzUGxheWluZ30saXNMb2FkaW5nOmZ1bmN0aW9uKCl7cmV0dXJuISghdGhpcy5jb250cm9sbGVyfHx0aGlzLmNvbnRyb2xsZXIuZ2V0U3RhdGUoKSE9PUMuU3RhdGVzLkxPQURJTkcpfSxoYXNOb0Nvbm5lY3Rpb246ZnVuY3Rpb24oKXtyZXR1cm4hIXRoaXMuX2hhc05vQ29ubmVjdGlvbn0saGFzU3RyZWFtSW5mbzpmdW5jdGlvbigpe3JldHVybiEhdGhpcy5zdHJlYW1JbmZvfSx0b2dnbGVNdXRlOmZ1bmN0aW9uKHQpe3gudG9nZ2xlTXV0ZSh0KX0saXNNdXRlZDpmdW5jdGlvbigpe3JldHVybiB4LmlzTXV0ZWQoKX0sc2V0Vm9sdW1lOmZ1bmN0aW9uKHQpe3guc2V0Vm9sdW1lKHQpfSxnZXRWb2x1bWU6ZnVuY3Rpb24oKXtyZXR1cm4geC5nZXRWb2x1bWUoKX0sbG9nQXVkaW9QZXJmb3JtYW5jZTpmdW5jdGlvbih0KXt0aGlzLmdldEV2ZW50TG9nZ2VyKCkmJnRoaXMub3B0aW9ucy5sb2dQZXJmb3JtYW5jZSYmdGhpcy5nZXRFdmVudExvZ2dlcigpLmF1ZGlvUGVyZm9ybWFuY2UodCl9LGxvZ0F1ZGlvRXJyb3I6ZnVuY3Rpb24odCl7dGhpcy5nZXRFdmVudExvZ2dlcigpJiZ0aGlzLm9wdGlvbnMubG9nRXJyb3JzJiZ0aGlzLmdldEV2ZW50TG9nZ2VyKCkuYXVkaW9FcnJvcih0KX0sZ2V0QXVkaW9NYW5hZ2VyU3RhdGVzOmZ1bmN0aW9uKCl7cmV0dXJuIEMuU3RhdGVzfSxnZXRJZDpmdW5jdGlvbigpe3JldHVybiB0aGlzLm9wdGlvbnMucmVzb3VyY2VJZHx8dGhpcy5vcHRpb25zLnNvdW5kSWR9LGdldEV2ZW50TG9nZ2VyOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMub3B0aW9ucy5ldmVudExvZ2dlcn0scmVnaXN0ZXJNb2RlbEV2ZW50TGlzdGVuZXI6ZnVuY3Rpb24odCxlKXt2YXIgbj1yKHQpO2lmKHRoaXMuX21vZGVsTGlzdGVuZXJzW25dKXRocm93IG5ldyBFcnJvcihcIkRhdGEgbW9kZWwgaXMgYWxyZWFkeSByZWdpc3RlcmVkIChmb3Jnb3QgdG8gdW5yZWdpc3RlciBpdCBvciByZWdpc3RlcmluZyB0d2ljZT8pXCIpO3RoaXMuX21vZGVsTGlzdGVuZXJzW25dPWU9ZS5iaW5kKHRoaXMsdCksdGhpcy5vbihcImFsbFwiLGUpfSx1bnJlZ2lzdGVyTW9kZWxFdmVudExpc3RlbmVyOmZ1bmN0aW9uKHQpe3ZhciBlPXIodCk7dGhpcy5fbW9kZWxMaXN0ZW5lcnNbZV0mJih0aGlzLm9mZihcImFsbFwiLHRoaXMuX21vZGVsTGlzdGVuZXJzW2VdKSxkZWxldGUgdGhpcy5fbW9kZWxMaXN0ZW5lcnNbZV0pfSxhamF4OmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLm9wdGlvbnMuYWpheD90aGlzLm9wdGlvbnMuYWpheCh0KTpVKHQpfSx0cmlnZ2VyOmZ1bmN0aW9uKHQsZSl7SS5jYWxsKHRoaXMsdCxlKSx6LnRyaWdnZXIuY2FsbCh0aGlzLHQsZSl9fSksJC5leHRlbmQoeCx7Z2V0U2V0dGluZ3M6ZnVuY3Rpb24oKXtyZXR1cm4gSn0sc2V0U2V0dGluZ3M6ZnVuY3Rpb24odCl7JC5leHRlbmQoSix0KX0sc2V0QXVkaW9NYW5hZ2VyOm8sc2V0QXVkaW9NYW5hZ2VyT25jZTokLm9uY2UobyksdG9nZ2xlTXV0ZTpmdW5jdGlvbih0KXtKLm11dGVkPXZvaWQgMD09PXQ/IUoubXV0ZWQ6ISF0LEMmJkMuc2V0Vm9sdW1lKEoubXV0ZWQ/MDoxKX0saXNNdXRlZDpmdW5jdGlvbigpe3JldHVybiBKLm11dGVkfSxzZXRWb2x1bWU6ZnVuY3Rpb24odCl7Si52b2x1bWU9dm9pZCAwPT09dD8xOnQsQyYmQy5zZXRWb2x1bWUoSi52b2x1bWUpfSxnZXRWb2x1bWU6ZnVuY3Rpb24oKXtyZXR1cm4gSi52b2x1bWV9LEV4dGVuc2lvbnM6VixQcm90b2NvbHM6VyxFdmVudHM6WSxCVUZGRVJfREVMQVk6aXQsUExBWV9SRUdJU1RSQVRJT05fVElNRU9VVDpydH0pfSxmdW5jdGlvbih0LGUsbil7dmFyIGk9bigyKS5EZWZlcnJlZCxyPTQ7dC5leHBvcnRzPWZ1bmN0aW9uKHQpe3ZhciBlLG4sbyxzLGEsdSxoLGM7dCYmKG89dC5kYXRhfHxudWxsLG49dC51cmx8fFwiXCIsZT10LnR5cGV8fFwiR0VUXCIscz10LmRhdGFUeXBlfHxcInRleHRcIixhPXQuYXN5bmMsdT10LnRpbWVvdXQsaD10LmJlZm9yZVNlbmR8fG51bGwpO3ZhciBsPWkoKTthPWEhPT0hMTt2YXIgZj1uZXcgWE1MSHR0cFJlcXVlc3Q7cmV0dXJuIGYub3BlbihlLG4sYSksYSYmKGYucmVzcG9uc2VUeXBlPVwidGV4dFwiKSxoJiZoKGYpLGYub25yZWFkeXN0YXRlY2hhbmdlPWZ1bmN0aW9uKCl7aWYoZi5yZWFkeVN0YXRlPT09cilpZihjbGVhclRpbWVvdXQoYyksMCE9PWYuc3RhdHVzJiZmLnN0YXR1czw0MDApe3ZhciB0PWYucmVzcG9uc2VUZXh0O2lmKFwianNvblwiPT09cyl0cnl7dD1KU09OLnBhcnNlKHQpfWNhdGNoKGUpe3JldHVybiB2b2lkIGwucmVqZWN0KGYpfWwucmVzb2x2ZSh0KX1lbHNlIGwucmVqZWN0KGYpfSxudWxsIT11JiYoYz1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7Zi5yZWFkeVN0YXRlIT09ciYmKGYuYWJvcnQoKSxsLnJlamVjdChmKSl9LHUpKSxmLnNlbmQobyksbC5wcm9taXNlKCl9fSxmdW5jdGlvbih0LGUsbil7dC5leHBvcnRzPW4oMyl9LGZ1bmN0aW9uKHQsZSxuKXsvKiFcblx0XHQqIGpxdWVyeS1kZWZlcnJlZFxuXHRcdCogQ29weXJpZ2h0KGMpIDIwMTEgSGlkZGVuIDx6emRoaWRkZW5AZ21haWwuY29tPlxuXHRcdCogTUlUIExpY2Vuc2VkXG5cdFx0Ki9cbnZhciBpPXQuZXhwb3J0cz1uKDQpLHI9QXJyYXkucHJvdG90eXBlLnNsaWNlO2kuZXh0ZW5kKHtEZWZlcnJlZDpmdW5jdGlvbih0KXt2YXIgZT1bW1wicmVzb2x2ZVwiLFwiZG9uZVwiLGkuQ2FsbGJhY2tzKFwib25jZSBtZW1vcnlcIiksXCJyZXNvbHZlZFwiXSxbXCJyZWplY3RcIixcImZhaWxcIixpLkNhbGxiYWNrcyhcIm9uY2UgbWVtb3J5XCIpLFwicmVqZWN0ZWRcIl0sW1wibm90aWZ5XCIsXCJwcm9ncmVzc1wiLGkuQ2FsbGJhY2tzKFwibWVtb3J5XCIpXV0sbj1cInBlbmRpbmdcIixyPXtzdGF0ZTpmdW5jdGlvbigpe3JldHVybiBufSxhbHdheXM6ZnVuY3Rpb24oKXtyZXR1cm4gby5kb25lKGFyZ3VtZW50cykuZmFpbChhcmd1bWVudHMpLHRoaXN9LHRoZW46ZnVuY3Rpb24oKXt2YXIgdD1hcmd1bWVudHM7cmV0dXJuIGkuRGVmZXJyZWQoZnVuY3Rpb24obil7aS5lYWNoKGUsZnVuY3Rpb24oZSxyKXt2YXIgcz1yWzBdLGE9dFtlXTtvW3JbMV1dKGkuaXNGdW5jdGlvbihhKT9mdW5jdGlvbigpe3ZhciB0PWEuYXBwbHkodGhpcyxhcmd1bWVudHMpO3QmJmkuaXNGdW5jdGlvbih0LnByb21pc2UpP3QucHJvbWlzZSgpLmRvbmUobi5yZXNvbHZlKS5mYWlsKG4ucmVqZWN0KS5wcm9ncmVzcyhuLm5vdGlmeSk6bltzK1wiV2l0aFwiXSh0aGlzPT09bz9uOnRoaXMsW3RdKX06bltzXSl9KSx0PW51bGx9KS5wcm9taXNlKCl9LHByb21pc2U6ZnVuY3Rpb24odCl7cmV0dXJuIG51bGwhPXQ/aS5leHRlbmQodCxyKTpyfX0sbz17fTtyZXR1cm4gci5waXBlPXIudGhlbixpLmVhY2goZSxmdW5jdGlvbih0LGkpe3ZhciBzPWlbMl0sYT1pWzNdO3JbaVsxXV09cy5hZGQsYSYmcy5hZGQoZnVuY3Rpb24oKXtuPWF9LGVbMV50XVsyXS5kaXNhYmxlLGVbMl1bMl0ubG9jayksb1tpWzBdXT1zLmZpcmUsb1tpWzBdK1wiV2l0aFwiXT1zLmZpcmVXaXRofSksci5wcm9taXNlKG8pLHQmJnQuY2FsbChvLG8pLG99LHdoZW46ZnVuY3Rpb24odCl7dmFyIGUsbixvLHM9MCxhPXIuY2FsbChhcmd1bWVudHMpLHU9YS5sZW5ndGgsaD0xIT09dXx8dCYmaS5pc0Z1bmN0aW9uKHQucHJvbWlzZSk/dTowLGM9MT09PWg/dDppLkRlZmVycmVkKCksbD1mdW5jdGlvbih0LG4saSl7cmV0dXJuIGZ1bmN0aW9uKG8pe25bdF09dGhpcyxpW3RdPWFyZ3VtZW50cy5sZW5ndGg+MT9yLmNhbGwoYXJndW1lbnRzKTpvLGk9PT1lP2Mubm90aWZ5V2l0aChuLGkpOi0taHx8Yy5yZXNvbHZlV2l0aChuLGkpfX07aWYodT4xKWZvcihlPW5ldyBBcnJheSh1KSxuPW5ldyBBcnJheSh1KSxvPW5ldyBBcnJheSh1KTt1PnM7cysrKWFbc10mJmkuaXNGdW5jdGlvbihhW3NdLnByb21pc2UpP2Fbc10ucHJvbWlzZSgpLmRvbmUobChzLG8sYSkpLmZhaWwoYy5yZWplY3QpLnByb2dyZXNzKGwocyxuLGUpKTotLWg7cmV0dXJuIGh8fGMucmVzb2x2ZVdpdGgobyxhKSxjLnByb21pc2UoKX19KX0sZnVuY3Rpb24odCxlLG4pe2Z1bmN0aW9uIGkodCl7dmFyIGU9c1t0XT17fTtyZXR1cm4gci5lYWNoKHQuc3BsaXQobyksZnVuY3Rpb24odCxuKXtlW25dPSEwfSksZX12YXIgcj10LmV4cG9ydHM9big1KSxvPS9cXHMrLyxzPXt9O3IuQ2FsbGJhY2tzPWZ1bmN0aW9uKHQpe3Q9XCJzdHJpbmdcIj09dHlwZW9mIHQ/c1t0XXx8aSh0KTpyLmV4dGVuZCh7fSx0KTt2YXIgZSxuLG8sYSx1LGgsYz1bXSxsPSF0Lm9uY2UmJltdLGY9ZnVuY3Rpb24oaSl7Zm9yKGU9dC5tZW1vcnkmJmksbj0hMCxoPWF8fDAsYT0wLHU9Yy5sZW5ndGgsbz0hMDtjJiZ1Pmg7aCsrKWlmKGNbaF0uYXBwbHkoaVswXSxpWzFdKT09PSExJiZ0LnN0b3BPbkZhbHNlKXtlPSExO2JyZWFrfW89ITEsYyYmKGw/bC5sZW5ndGgmJmYobC5zaGlmdCgpKTplP2M9W106ZC5kaXNhYmxlKCkpfSxkPXthZGQ6ZnVuY3Rpb24oKXtpZihjKXt2YXIgbj1jLmxlbmd0aDshZnVuY3Rpb24gaShlKXtyLmVhY2goZSxmdW5jdGlvbihlLG4pe3ZhciBvPXIudHlwZShuKTtcImZ1bmN0aW9uXCI9PT1vP3QudW5pcXVlJiZkLmhhcyhuKXx8Yy5wdXNoKG4pOm4mJm4ubGVuZ3RoJiZcInN0cmluZ1wiIT09byYmaShuKX0pfShhcmd1bWVudHMpLG8/dT1jLmxlbmd0aDplJiYoYT1uLGYoZSkpfXJldHVybiB0aGlzfSxyZW1vdmU6ZnVuY3Rpb24oKXtyZXR1cm4gYyYmci5lYWNoKGFyZ3VtZW50cyxmdW5jdGlvbih0LGUpe2Zvcih2YXIgbjsobj1yLmluQXJyYXkoZSxjLG4pKT4tMTspYy5zcGxpY2UobiwxKSxvJiYodT49biYmdS0tLGg+PW4mJmgtLSl9KSx0aGlzfSxoYXM6ZnVuY3Rpb24odCl7cmV0dXJuIHIuaW5BcnJheSh0LGMpPi0xfSxlbXB0eTpmdW5jdGlvbigpe3JldHVybiBjPVtdLHRoaXN9LGRpc2FibGU6ZnVuY3Rpb24oKXtyZXR1cm4gYz1sPWU9dm9pZCAwLHRoaXN9LGRpc2FibGVkOmZ1bmN0aW9uKCl7cmV0dXJuIWN9LGxvY2s6ZnVuY3Rpb24oKXtyZXR1cm4gbD12b2lkIDAsZXx8ZC5kaXNhYmxlKCksdGhpc30sbG9ja2VkOmZ1bmN0aW9uKCl7cmV0dXJuIWx9LGZpcmVXaXRoOmZ1bmN0aW9uKHQsZSl7cmV0dXJuIGU9ZXx8W10sZT1bdCxlLnNsaWNlP2Uuc2xpY2UoKTplXSwhY3x8biYmIWx8fChvP2wucHVzaChlKTpmKGUpKSx0aGlzfSxmaXJlOmZ1bmN0aW9uKCl7cmV0dXJuIGQuZmlyZVdpdGgodGhpcyxhcmd1bWVudHMpLHRoaXN9LGZpcmVkOmZ1bmN0aW9uKCl7cmV0dXJuISFufX07cmV0dXJuIGR9fSxmdW5jdGlvbih0LGUpe2Z1bmN0aW9uIG4odCl7cmV0dXJuIG51bGw9PXQ/U3RyaW5nKHQpOmNbaC5jYWxsKHQpXXx8XCJvYmplY3RcIn1mdW5jdGlvbiBpKHQpe3JldHVyblwiZnVuY3Rpb25cIj09PXUudHlwZSh0KX1mdW5jdGlvbiByKHQpe3JldHVyblwiYXJyYXlcIj09PXUudHlwZSh0KX1mdW5jdGlvbiBvKHQsZSxuKXt2YXIgcixvPTAscz10Lmxlbmd0aCxhPXZvaWQgMD09PXN8fGkodCk7aWYobilpZihhKXtmb3IociBpbiB0KWlmKGUuYXBwbHkodFtyXSxuKT09PSExKWJyZWFrfWVsc2UgZm9yKDtzPm8mJmUuYXBwbHkodFtvKytdLG4pIT09ITE7KTtlbHNlIGlmKGEpe2ZvcihyIGluIHQpaWYoZS5jYWxsKHRbcl0scix0W3JdKT09PSExKWJyZWFrfWVsc2UgZm9yKDtzPm8mJmUuY2FsbCh0W29dLG8sdFtvKytdKSE9PSExOyk7cmV0dXJuIHR9ZnVuY3Rpb24gcyh0KXtyZXR1cm4hKCF0fHxcIm9iamVjdFwiIT09dS50eXBlKHQpKX1mdW5jdGlvbiBhKCl7dmFyIHQsZSxuLGkscixvLHM9YXJndW1lbnRzWzBdfHx7fSxhPTEsaD1hcmd1bWVudHMubGVuZ3RoLGM9ITE7Zm9yKFwiYm9vbGVhblwiPT10eXBlb2YgcyYmKGM9cyxzPWFyZ3VtZW50c1sxXXx8e30sYT0yKSxcIm9iamVjdFwiPT10eXBlb2Ygc3x8dS5pc0Z1bmN0aW9uKHMpfHwocz17fSksaD09PWEmJihzPXRoaXMsLS1hKTtoPmE7YSsrKWlmKG51bGwhPSh0PWFyZ3VtZW50c1thXSkpZm9yKGUgaW4gdCluPXNbZV0saT10W2VdLHMhPT1pJiYoYyYmaSYmKHUuaXNQbGFpbk9iamVjdChpKXx8KHI9dS5pc0FycmF5KGkpKSk/KHI/KHI9ITEsbz1uJiZ1LmlzQXJyYXkobik/bjpbXSk6bz1uJiZ1LmlzUGxhaW5PYmplY3Qobik/bjp7fSxzW2VdPXUuZXh0ZW5kKGMsbyxpKSk6dm9pZCAwIT09aSYmKHNbZV09aSkpO3JldHVybiBzfXZhciB1PXQuZXhwb3J0cz17dHlwZTpuLGlzQXJyYXk6cixpc0Z1bmN0aW9uOmksaXNQbGFpbk9iamVjdDpzLGVhY2g6byxleHRlbmQ6YSxub29wOmZ1bmN0aW9uKCl7fX0saD1PYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLGM9e307XCJCb29sZWFuIE51bWJlciBTdHJpbmcgRnVuY3Rpb24gQXJyYXkgRGF0ZSBSZWdFeHAgT2JqZWN0XCIuc3BsaXQoXCIgXCIpLmZvckVhY2goZnVuY3Rpb24odCl7Y1tcIltvYmplY3QgXCIrdCtcIl1cIl09dC50b0xvd2VyQ2FzZSgpfSl9LGZ1bmN0aW9uKHQsZSxuKXtmdW5jdGlvbiBpKHQpe3RoaXMubGlzdGVuVGltZSs9dC5mcm9tLXRoaXMuY3VycmVudFRpbWUsdGhpcy5jdXJyZW50VGltZT10LnRvfWZ1bmN0aW9uIHIodCl7dGhpcy5saXN0ZW5UaW1lKz10LnBvc2l0aW9uLXRoaXMuY3VycmVudFRpbWUsdGhpcy5jdXJyZW50VGltZT10LnBvc2l0aW9ufWZ1bmN0aW9uIG8odCl7dGhpcy5jdXJyZW50VGltZT10LnBvc2l0aW9ufXZhciBzLGE9big3KTtzPXQuZXhwb3J0cz1mdW5jdGlvbih0KXt0aGlzLnNjQXVkaW89dCx0aGlzLmxpc3RlblRpbWU9MCx0aGlzLmN1cnJlbnRUaW1lPTAsdGhpcy5zY0F1ZGlvLm9uKGEuU0VFSyxpLHRoaXMpLm9uKGEuUExBWV9TVEFSVCxvLHRoaXMpLm9uKGEuUEFVU0Uscix0aGlzKX0scy5wcm90b3R5cGU9e2NvbnN0cnVjdG9yOnMsZ2V0TGlzdGVuVGltZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmxpc3RlblRpbWUrdGhpcy5zY0F1ZGlvLmN1cnJlbnRUaW1lKCktdGhpcy5jdXJyZW50VGltZX19fSxmdW5jdGlvbih0LGUpe3ZhciBuPXtDUkVBVEVEOlwiY3JlYXRlZFwiLFNUQVRFX0NIQU5HRTpcInN0YXRlLWNoYW5nZVwiLERFU1RST1lFRDpcImRlc3Ryb3llZFwiLFBMQVk6XCJwbGF5XCIsUExBWV9TVEFSVDpcInBsYXktc3RhcnRcIixQTEFZX1JFU1VNRTpcInBsYXktcmVzdW1lXCIsTUVUQURBVEE6XCJtZXRhZGF0YVwiLFBBVVNFOlwicGF1c2VcIixGSU5JU0g6XCJmaW5pc2hcIixSRVNFVDpcInJlc2V0XCIsU0VFSzpcInNlZWtcIixTRUVLRUQ6XCJzZWVrZWRcIixHRU9fQkxPQ0tFRDpcImdlb19ibG9ja2VkXCIsQlVGRkVSUklOR19TVEFSVDpcImJ1ZmZlcmluZ19zdGFydFwiLEJVRkZFUlJJTkdfRU5EOlwiYnVmZmVyaW5nX2VuZFwiLEZMQVNIX05PVF9MT0FERUQ6XCJmbGFzaF9ub3RfbG9hZGVkXCIsRkxBU0hfQkxPQ0s6XCJmbGFzaF9ibG9ja2VkXCIsRkxBU0hfVU5CTE9DSzpcImZsYXNoX3VuYmxvY2tlZFwiLEFVRElPX0VSUk9SOlwiYXVkaW9fZXJyb3JcIixUSU1FOlwidGltZVwiLE5PX1NUUkVBTVM6XCJub19zdHJlYW1zXCIsU1RSRUFNUzpcInN0cmVhbXNcIixOT19QUk9UT0NPTDpcIm5vX3Byb3RvY29sXCIsTk9fQ09OTkVDVElPTjpcIm5vX2Nvbm5lY3Rpb25cIixSRUdJU1RFUkVEOlwicmVnaXN0ZXJlZFwiLE9OTElORTpcIm9ubGluZVwiLE9GRkxJTkU6XCJvZmZsaW5lXCJ9O3QuZXhwb3J0cz1ufSxmdW5jdGlvbih0LGUsbil7ZnVuY3Rpb24gaSgpe3JldHVybiB0aGlzLnNjQXVkaW8uY29udHJvbGxlcj90aGlzLmNvbnRyb2xsZXI/dm9pZCBtLndhcm4oXCIoJXMpIFNldHVwIHdhcyBjYWxsZWQgd2hpbGUgaXQgd2FzIGFscmVhZHkgaW5pdGlhbGl6ZWQgKHJldHVybmVkIHdpdGggYSBuby1vcClcIix0aGlzLnNjQXVkaW8uZ2V0SWQoKSk6KG0oXCIoJXMpIEluaXRpYWxpemVkXCIsdGhpcy5zY0F1ZGlvLmdldElkKCkpLHRoaXMuY29udHJvbGxlcj10aGlzLnNjQXVkaW8uY29udHJvbGxlcix0aGlzLnByb3RvY29sPXRoaXMuc2NBdWRpby5zdHJlYW1JbmZvLnByb3RvY29sLHZvaWQodGhpcy5ob3N0PVMuZ2V0VXJsSG9zdCh0aGlzLnNjQXVkaW8uc3RyZWFtSW5mby51cmwpKSk6dm9pZCBtLndhcm4oXCJDYW7CtHQgaW5pdGlhbGl6ZSB3aGVuIGNvbnRyb2xsZXIgaXMgbnVsbFwiKX1mdW5jdGlvbiByKCl7dGhpcy5jb250cm9sbGVyJiYobShcIiglcykgUmVzZXRcIix0aGlzLnNjQXVkaW8uZ2V0SWQoKSksdGhpcy5jb250cm9sbGVyPXRoaXMucHJvdG9jb2w9dGhpcy5ob3N0PW51bGwsdGhpcy50aW1lVG9QbGF5TWVhc3VyZWQ9ITEpfWZ1bmN0aW9uIG8odCl7dmFyIGU9dGhpcy5zY0F1ZGlvLmdldEF1ZGlvTWFuYWdlclN0YXRlcygpO3Q9PT1lLkxPQURJTkc/dGhpcy50aW1lVG9QbGF5TWVhc3VyZWQmJmYuY2FsbCh0aGlzKTpBLmlzTnVsbCh0aGlzLmJ1ZmZlcmluZ1N0YXJ0VGltZSl8fGQuY2FsbCh0aGlzKX1mdW5jdGlvbiBzKCl7dGhpcy5tZXRhZGF0YUxvYWRTdGFydFRpbWU9RGF0ZS5ub3coKX1mdW5jdGlvbiBhKCl7cmV0dXJuIEEuaXNOdWxsKHRoaXMubWV0YWRhdGFMb2FkU3RhcnRUaW1lKT92b2lkIG0ud2FybihcIiglcykgb25NZXRhZGF0YUVuZCB3YXMgY2FsbGVkIHdpdGhvdXQgb25NZXRhZGF0YVN0YXJ0IGJlaW5nIGNhbGxlZCBiZWZvcmUuXCIsdGhpcy5zY0F1ZGlvLmdldElkKCkpOih0aGlzLmxvZyh7dHlwZTpcIm1ldGFkYXRhXCIsbGF0ZW5jeTpEYXRlLm5vdygpLXRoaXMubWV0YWRhdGFMb2FkU3RhcnRUaW1lfSksdm9pZCh0aGlzLm1ldGFkYXRhTG9hZFN0YXJ0VGltZT1udWxsKSl9ZnVuY3Rpb24gdSgpe3RoaXMucGxheUNsaWNrVGltZT1EYXRlLm5vdygpfWZ1bmN0aW9uIGgoKXtpZighdGhpcy50aW1lVG9QbGF5TWVhc3VyZWQpe2lmKEEuaXNOdWxsKHRoaXMucGxheUNsaWNrVGltZSkpcmV0dXJuIHZvaWQgbS53YXJuKFwiKCVzKSBvblBsYXlSZXN1bWUgd2FzIGNhbGxlZCB3aXRob3V0IG9uUGxheVN0YXJ0IGJlaW5nIGNhbGxlZCBiZWZvcmUuXCIsdGhpcy5zY0F1ZGlvLmdldElkKCkpO3RoaXMubG9nKHt0eXBlOlwicGxheVwiLGxhdGVuY3k6RGF0ZS5ub3coKS10aGlzLnBsYXlDbGlja1RpbWV9KSx0aGlzLnBsYXlDbGlja1RpbWU9bnVsbCx0aGlzLnRpbWVUb1BsYXlNZWFzdXJlZD0hMH19ZnVuY3Rpb24gYygpe3RoaXMuc2NBdWRpby5pc1BhdXNlZCgpfHwodGhpcy5zZWVrU3RhcnRUaW1lPURhdGUubm93KCkpfWZ1bmN0aW9uIGwoKXtpZighdGhpcy5zY0F1ZGlvLmlzUGF1c2VkKCkpe2lmKEEuaXNOdWxsKHRoaXMuc2Vla1N0YXJ0VGltZSkpcmV0dXJuIHZvaWQgbS53YXJuKFwiKCVzKSBvblNlZWtFbmQgd2FzIGNhbGxlZCB3aXRob3V0IG9uU2Vla1N0YXJ0IGJlaW5nIGNhbGxlZCBiZWZvcmUuXCIsdGhpcy5zY0F1ZGlvLmdldElkKCkpO3RoaXMubG9nKHt0eXBlOlwic2Vla1wiLGxhdGVuY3k6RGF0ZS5ub3coKS10aGlzLnNlZWtTdGFydFRpbWV9KSx0aGlzLnNlZWtTdGFydFRpbWU9bnVsbH19ZnVuY3Rpb24gZigpe3RoaXMuYnVmZmVyaW5nU3RhcnRUaW1lfHwodGhpcy5idWZmZXJpbmdTdGFydFRpbWU9RGF0ZS5ub3coKSl9ZnVuY3Rpb24gZCgpe3JldHVybiBBLmlzTnVsbCh0aGlzLmJ1ZmZlcmluZ1N0YXJ0VGltZSk/dm9pZCBtLndhcm4oXCIoJXMpIG9uQnVmZmVyaW5nRW5kIHdhcyBjYWxsZWQgd2l0aG91dCBvbkJ1ZmZlcmluZ1N0YXJ0IGJlaW5nIGNhbGxlZCBiZWZvcmUuXCIsdGhpcy5zY0F1ZGlvLmdldElkKCkpOihwLmNhbGwodGhpcyksdm9pZCh0aGlzLmJ1ZmZlcmluZ1N0YXJ0VGltZT1udWxsKSl9ZnVuY3Rpb24gcCgpe0EuaXNOdWxsKHRoaXMuYnVmZmVyaW5nU3RhcnRUaW1lKXx8KEEuaXNOdWxsKHRoaXMuYnVmZmVyaW5nVGltZUFjY3VtdWxhdGVkKSYmKHRoaXMuYnVmZmVyaW5nVGltZUFjY3VtdWxhdGVkPTApLHRoaXMuYnVmZmVyaW5nVGltZUFjY3VtdWxhdGVkKz1EYXRlLm5vdygpLXRoaXMuYnVmZmVyaW5nU3RhcnRUaW1lKX1mdW5jdGlvbiBnKCl7cC5jYWxsKHRoaXMpLEEuaXNOdWxsKHRoaXMuYnVmZmVyaW5nVGltZUFjY3VtdWxhdGVkKXx8KHRoaXMubG9nKHt0eXBlOlwiYnVmZmVyXCIsbGF0ZW5jeTp0aGlzLmJ1ZmZlcmluZ1RpbWVBY2N1bXVsYXRlZH0pLHRoaXMuYnVmZmVyaW5nU3RhcnRUaW1lPXRoaXMuYnVmZmVyaW5nVGltZUFjY3VtdWxhdGVkPW51bGwpfXZhciBfLG0seT1uKDkpLHY9big3KSxFPW4oMTApLFM9bigxMiksQT1uKDEzKTtfPXQuZXhwb3J0cz1mdW5jdGlvbih0LGUpe3RoaXMuc2NBdWRpbz10LHRoaXMubG9nRm49ZSx0aGlzLmNvbnRyb2xsZXI9bnVsbCx0aGlzLnJlc2V0KCksbT1tfHx5KHQub3B0aW9ucy5kZWJ1ZyxcImF1ZGlvcGVyZlwiKSx0Lm9uKHYuQ1JFQVRFRCxpLHRoaXMpLm9uKHYuUkVTRVQscix0aGlzKS5vbih2LkRFU1RST1lFRCxyLHRoaXMpLm9uKHYuU0VFSyxjLHRoaXMpLm9uKHYuU0VFS0VELGwsdGhpcykub24odi5QTEFZLHUsdGhpcykub24odi5QTEFZX1NUQVJULHMsdGhpcykub24odi5QTEFZX1JFU1VNRSxoLHRoaXMpLm9uKHYuUEFVU0UsZyx0aGlzKS5vbih2LkZJTklTSCxnLHRoaXMpLm9uKHYuU1RBVEVfQ0hBTkdFLG8sdGhpcykub24odi5NRVRBREFUQSxhLHRoaXMpfSxBLmV4dGVuZChfLnByb3RvdHlwZSxFLHtjb25zdHJ1Y3RvcjpfLGxvZzpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5jb250cm9sbGVyPyhBLmV4dGVuZCh0LHtwcm90b2NvbDp0aGlzLnByb3RvY29sLGhvc3Q6dGhpcy5ob3N0LHBsYXllcnR5cGU6dGhpcy5jb250cm9sbGVyLmdldFR5cGUoKX0pLG0oXCIoJXMpICVzIGxhdGVuY3k6ICVkIHByb3RvY29sOiAlcyBob3N0OiAlcyBwbGF5ZXJ0eXBlOiAlc1wiLHRoaXMuc2NBdWRpby5nZXRJZCgpLHQudHlwZSx0LmxhdGVuY3ksdC5wcm90b2NvbCx0Lmhvc3QsdC5wbGF5ZXJ0eXBlKSx2b2lkIHRoaXMubG9nRm4odCkpOnZvaWQgbS53YXJuKFwiKCVzKSBNb25pdG9yIGxvZyB3YXMgY2FsbGVkIHdoaWxlIGNvbnRyb2xsZXIgaXMgbnVsbCAocmV0dXJuZWQgd2l0aCBhIG5vLW9wKVwiLHRoaXMuc2NBdWRpby5nZXRJZCgpKX0scmVzZXQ6ZnVuY3Rpb24oKXt0aGlzLmJ1ZmZlcmluZ1N0YXJ0VGltZT10aGlzLmJ1ZmZlcmluZ1RpbWVBY2N1bXVsYXRlZD10aGlzLnBsYXlDbGlja1RpbWU9dGhpcy5zZWVrU3RhcnRUaW1lPXRoaXMubWV0YWRhdGFMb2FkU3RhcnRUaW1lPW51bGwsdGhpcy50aW1lVG9QbGF5TWVhc3VyZWQ9ITF9fSl9LGZ1bmN0aW9uKHQsZSl7ZnVuY3Rpb24gbigpe2Z1bmN0aW9uIHQodCxuKXtmb3IodmFyIGkscj1hcmd1bWVudHMubGVuZ3RoLG89QXJyYXkocj4yP3ItMjowKSxzPTI7cj5zO3MrKylvW3MtMl09YXJndW1lbnRzW3NdO1wic3RyaW5nXCI9PXR5cGVvZiBuP249XCIgXCIrbjooby51bnNoaWZ0KG4pLG49XCJcIiksKGk9d2luZG93LmNvbnNvbGUpW3RdLmFwcGx5KGksW2UoKStcIiB8XCIrYytcIiVjXCIrbl0uY29uY2F0KGwsbykpfWZ1bmN0aW9uIGUoKXt2YXIgdD1uZXcgRGF0ZSxlPW51bGw9PT1oPzA6dC1oO3JldHVybiBoPSt0LFwiJWNcIityKHQuZ2V0SG91cnMoKSkrXCI6XCIrcih0LmdldE1pbnV0ZXMoKSkrXCI6XCIrcih0LmdldFNlY29uZHMoKSkrXCIuXCIraSh0LmdldE1pbGxpc2Vjb25kcygpLFwiMFwiLDMpK1wiJWMgKCVjXCIraShcIitcIitlK1wibXNcIixcIiBcIiw4KStcIiVjKVwifXZhciBuPWFyZ3VtZW50cy5sZW5ndGg8PTB8fHZvaWQgMD09PWFyZ3VtZW50c1swXT8hMDphcmd1bWVudHNbMF0sbz1hcmd1bWVudHMubGVuZ3RoPD0xfHx2b2lkIDA9PT1hcmd1bWVudHNbMV0/XCJcIjphcmd1bWVudHNbMV07aWYoIW4pcmV0dXJuIHM7dmFyIGg9bnVsbCxjPWEobyksbD1bXCJjb2xvcjogZ3JlZW5cIixcImNvbG9yOiBncmV5XCIsXCJjb2xvcjogYmx1ZVwiLFwiY29sb3I6IGdyZXlcIix1KG8pLFwiXCJdLGY9dC5iaW5kKG51bGwsXCJsb2dcIik7cmV0dXJuIGYubG9nPWYsW1wiaW5mb1wiLFwid2FyblwiLFwiZXJyb3JcIl0uZm9yRWFjaChmdW5jdGlvbihlKXtmW2VdPXQuYmluZChudWxsLGUpfSksZn1mdW5jdGlvbiBpKHQsZSxuKXtyZXR1cm4gbyhlLG4tKFwiXCIrdCkubGVuZ3RoKSt0fWZ1bmN0aW9uIHIodCl7cmV0dXJuIGkodCxcIjBcIiwyKX1mdW5jdGlvbiBvKHQsZSl7cmV0dXJuIGU+MD9uZXcgQXJyYXkoZSsxKS5qb2luKHQpOlwiXCJ9ZnVuY3Rpb24gcygpe31mdW5jdGlvbiBhKHQpe3JldHVybiB0P1wiJWNcIit0OlwiJWNcIn10LmV4cG9ydHM9bixzLmxvZz1zLmluZm89cy53YXJuPXMuZXJyb3I9czt2YXIgdT1mdW5jdGlvbigpe3ZhciB0PVtcIiM1MTYxM0NcIixcIiM0NDc4NDhcIixcIiM0ODZFNUZcIixcIiM3ODc0NDRcIixcIiM2RTY2NEVcIl0sZT0wO3JldHVybiBmdW5jdGlvbihuKXtyZXR1cm4gbj9cImJhY2tncm91bmQtY29sb3I6XCIrdFtlKysldC5sZW5ndGhdK1wiO2NvbG9yOiNmZmY7Ym9yZGVyLXJhZGl1czozcHg7cGFkZGluZzoycHggNHB4O2ZvbnQtZmFtaWx5OnNhbnMtc2VyaWY7dGV4dC10cmFuc2Zvcm06dXBwZXJjYXNlO2ZvbnQtc2l6ZTo5cHg7bWFyZ2luOjAgNHB4XCI6XCJcIn19KCl9LGZ1bmN0aW9uKHQsZSxuKXt0LmV4cG9ydHM9bigxMSl9LGZ1bmN0aW9uKHQsZSxuKXshZnVuY3Rpb24oKXtmdW5jdGlvbiBuKCl7cmV0dXJue2tleXM6T2JqZWN0LmtleXN8fGZ1bmN0aW9uKHQpe2lmKFwib2JqZWN0XCIhPXR5cGVvZiB0JiZcImZ1bmN0aW9uXCIhPXR5cGVvZiB0fHxudWxsPT09dCl0aHJvdyBuZXcgVHlwZUVycm9yKFwia2V5cygpIGNhbGxlZCBvbiBhIG5vbi1vYmplY3RcIik7dmFyIGUsbj1bXTtmb3IoZSBpbiB0KXQuaGFzT3duUHJvcGVydHkoZSkmJihuW24ubGVuZ3RoXT1lKTtyZXR1cm4gbn0sdW5pcXVlSWQ6ZnVuY3Rpb24odCl7dmFyIGU9KythK1wiXCI7cmV0dXJuIHQ/dCtlOmV9LGhhczpmdW5jdGlvbih0LGUpe3JldHVybiBvLmNhbGwodCxlKX0sZWFjaDpmdW5jdGlvbih0LGUsbil7aWYobnVsbCE9dClpZihyJiZ0LmZvckVhY2g9PT1yKXQuZm9yRWFjaChlLG4pO2Vsc2UgaWYodC5sZW5ndGg9PT0rdC5sZW5ndGgpZm9yKHZhciBpPTAsbz10Lmxlbmd0aDtvPmk7aSsrKWUuY2FsbChuLHRbaV0saSx0KTtlbHNlIGZvcih2YXIgcyBpbiB0KXRoaXMuaGFzKHQscykmJmUuY2FsbChuLHRbc10scyx0KX0sb25jZTpmdW5jdGlvbih0KXt2YXIgZSxuPSExO3JldHVybiBmdW5jdGlvbigpe3JldHVybiBuP2U6KG49ITAsZT10LmFwcGx5KHRoaXMsYXJndW1lbnRzKSx0PW51bGwsZSl9fX19dmFyIGkscj1BcnJheS5wcm90b3R5cGUuZm9yRWFjaCxvPU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkscz1BcnJheS5wcm90b3R5cGUuc2xpY2UsYT0wLHU9bigpO2k9e29uOmZ1bmN0aW9uKHQsZSxuKXtpZighYyh0aGlzLFwib25cIix0LFtlLG5dKXx8IWUpcmV0dXJuIHRoaXM7dGhpcy5fZXZlbnRzfHwodGhpcy5fZXZlbnRzPXt9KTt2YXIgaT10aGlzLl9ldmVudHNbdF18fCh0aGlzLl9ldmVudHNbdF09W10pO3JldHVybiBpLnB1c2goe2NhbGxiYWNrOmUsY29udGV4dDpuLGN0eDpufHx0aGlzfSksdGhpc30sb25jZTpmdW5jdGlvbih0LGUsbil7aWYoIWModGhpcyxcIm9uY2VcIix0LFtlLG5dKXx8IWUpcmV0dXJuIHRoaXM7dmFyIGk9dGhpcyxyPXUub25jZShmdW5jdGlvbigpe2kub2ZmKHQsciksZS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9KTtyZXR1cm4gci5fY2FsbGJhY2s9ZSx0aGlzLm9uKHQscixuKX0sb2ZmOmZ1bmN0aW9uKHQsZSxuKXt2YXIgaSxyLG8scyxhLGgsbCxmO2lmKCF0aGlzLl9ldmVudHN8fCFjKHRoaXMsXCJvZmZcIix0LFtlLG5dKSlyZXR1cm4gdGhpcztpZighdCYmIWUmJiFuKXJldHVybiB0aGlzLl9ldmVudHM9e30sdGhpcztmb3Iocz10P1t0XTp1LmtleXModGhpcy5fZXZlbnRzKSxhPTAsaD1zLmxlbmd0aDtoPmE7YSsrKWlmKHQ9c1thXSxvPXRoaXMuX2V2ZW50c1t0XSl7aWYodGhpcy5fZXZlbnRzW3RdPWk9W10sZXx8bilmb3IobD0wLGY9by5sZW5ndGg7Zj5sO2wrKylyPW9bbF0sKGUmJmUhPT1yLmNhbGxiYWNrJiZlIT09ci5jYWxsYmFjay5fY2FsbGJhY2t8fG4mJm4hPT1yLmNvbnRleHQpJiZpLnB1c2gocik7aS5sZW5ndGh8fGRlbGV0ZSB0aGlzLl9ldmVudHNbdF19cmV0dXJuIHRoaXN9LHRyaWdnZXI6ZnVuY3Rpb24odCl7aWYoIXRoaXMuX2V2ZW50cylyZXR1cm4gdGhpczt2YXIgZT1zLmNhbGwoYXJndW1lbnRzLDEpO2lmKCFjKHRoaXMsXCJ0cmlnZ2VyXCIsdCxlKSlyZXR1cm4gdGhpczt2YXIgbj10aGlzLl9ldmVudHNbdF0saT10aGlzLl9ldmVudHMuYWxsO3JldHVybiBuJiZsKG4sZSksaSYmbChpLGFyZ3VtZW50cyksdGhpc30sc3RvcExpc3RlbmluZzpmdW5jdGlvbih0LGUsbil7dmFyIGk9dGhpcy5fbGlzdGVuZXJzO2lmKCFpKXJldHVybiB0aGlzO3ZhciByPSFlJiYhbjtcIm9iamVjdFwiPT10eXBlb2YgZSYmKG49dGhpcyksdCYmKChpPXt9KVt0Ll9saXN0ZW5lcklkXT10KTtmb3IodmFyIG8gaW4gaSlpW29dLm9mZihlLG4sdGhpcyksciYmZGVsZXRlIHRoaXMuX2xpc3RlbmVyc1tvXTtyZXR1cm4gdGhpc319O3ZhciBoPS9cXHMrLyxjPWZ1bmN0aW9uKHQsZSxuLGkpe2lmKCFuKXJldHVybiEwO2lmKFwib2JqZWN0XCI9PXR5cGVvZiBuKXtmb3IodmFyIHIgaW4gbil0W2VdLmFwcGx5KHQsW3IsbltyXV0uY29uY2F0KGkpKTtyZXR1cm4hMX1pZihoLnRlc3Qobikpe2Zvcih2YXIgbz1uLnNwbGl0KGgpLHM9MCxhPW8ubGVuZ3RoO2E+cztzKyspdFtlXS5hcHBseSh0LFtvW3NdXS5jb25jYXQoaSkpO3JldHVybiExfXJldHVybiEwfSxsPWZ1bmN0aW9uKHQsZSl7dmFyIG4saT0tMSxyPXQubGVuZ3RoLG89ZVswXSxzPWVbMV0sYT1lWzJdO3N3aXRjaChlLmxlbmd0aCl7Y2FzZSAwOmZvcig7KytpPHI7KShuPXRbaV0pLmNhbGxiYWNrLmNhbGwobi5jdHgpO3JldHVybjtjYXNlIDE6Zm9yKDsrK2k8cjspKG49dFtpXSkuY2FsbGJhY2suY2FsbChuLmN0eCxvKTtyZXR1cm47Y2FzZSAyOmZvcig7KytpPHI7KShuPXRbaV0pLmNhbGxiYWNrLmNhbGwobi5jdHgsbyxzKTtyZXR1cm47Y2FzZSAzOmZvcig7KytpPHI7KShuPXRbaV0pLmNhbGxiYWNrLmNhbGwobi5jdHgsbyxzLGEpO3JldHVybjtkZWZhdWx0OmZvcig7KytpPHI7KShuPXRbaV0pLmNhbGxiYWNrLmFwcGx5KG4uY3R4LGUpfX0sZj17bGlzdGVuVG86XCJvblwiLGxpc3RlblRvT25jZTpcIm9uY2VcIn07dS5lYWNoKGYsZnVuY3Rpb24odCxlKXtpW2VdPWZ1bmN0aW9uKGUsbixpKXt2YXIgcj10aGlzLl9saXN0ZW5lcnN8fCh0aGlzLl9saXN0ZW5lcnM9e30pLG89ZS5fbGlzdGVuZXJJZHx8KGUuX2xpc3RlbmVySWQ9dS51bmlxdWVJZChcImxcIikpO3JldHVybiByW29dPWUsXCJvYmplY3RcIj09dHlwZW9mIG4mJihpPXRoaXMpLGVbdF0obixpLHRoaXMpLHRoaXN9fSksaS5iaW5kPWkub24saS51bmJpbmQ9aS5vZmYsaS5taXhpbj1mdW5jdGlvbih0KXt2YXIgZT1bXCJvblwiLFwib25jZVwiLFwib2ZmXCIsXCJ0cmlnZ2VyXCIsXCJzdG9wTGlzdGVuaW5nXCIsXCJsaXN0ZW5Ub1wiLFwibGlzdGVuVG9PbmNlXCIsXCJiaW5kXCIsXCJ1bmJpbmRcIl07cmV0dXJuIHUuZWFjaChlLGZ1bmN0aW9uKGUpe3RbZV09dGhpc1tlXX0sdGhpcyksdH0sXCJ1bmRlZmluZWRcIiE9dHlwZW9mIHQmJnQuZXhwb3J0cyYmKGU9dC5leHBvcnRzPWkpLGUuQmFja2JvbmVFdmVudHM9aX0odGhpcyl9LGZ1bmN0aW9uKHQsZSl7dmFyIG49e2dldFVybFBhcmFtczpmdW5jdGlvbih0KXt2YXIgZT17fSxuPXQuaW5kZXhPZihcIj9cIik7cmV0dXJuIG4+LTEmJnQuc3Vic3RyKG4rMSkuc3BsaXQoXCImXCIpLmZvckVhY2goZnVuY3Rpb24odCl7dmFyIG49dC5zcGxpdChcIj1cIik7ZVtuWzBdXT1uWzFdfSksZX0sZ2V0VXJsSG9zdDpmdW5jdGlvbih0KXt2YXIgZSxuPXQuc3BsaXQoXCIvL1wiKTtyZXR1cm4gZT1uWzBdPT09dD9uWzBdLnNwbGl0KFwiL1wiKVswXTpuWzFdP25bMV0uc3BsaXQoXCIvXCIpWzBdOlwiXCJ9fTt0LmV4cG9ydHM9bn0sZnVuY3Rpb24odCxlKXt2YXIgbj17ZXh0ZW5kOmZ1bmN0aW9uKHQpe3ZhciBlPUFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywxKTtyZXR1cm4gZS5mb3JFYWNoKGZ1bmN0aW9uKGUpe2lmKGUpZm9yKHZhciBuIGluIGUpZS5oYXNPd25Qcm9wZXJ0eShuKSYmKHRbbl09ZVtuXSl9KSx0fSxlYWNoOmZ1bmN0aW9uKHQsZSxuKXtPYmplY3Qua2V5cyh0KS5mb3JFYWNoKGZ1bmN0aW9uKGkpe2UuY2FsbChufHxudWxsLHRbaV0saSl9KX0sd2l0aG91dDpmdW5jdGlvbih0LGUpe3ZhciBuPXQuaW5kZXhPZihlKTtuPi0xJiZ0LnNwbGljZShuLDEpfSxyZXN1bHQ6ZnVuY3Rpb24odCl7dmFyIGU9dDtyZXR1cm4gbi5pc0Z1bmN0aW9uKGUpJiYoZT10KCkpLGV9LGlzRnVuY3Rpb246ZnVuY3Rpb24odCl7cmV0dXJuXCJmdW5jdGlvblwiPT10eXBlb2YgdH0sYWZ0ZXI6ZnVuY3Rpb24odCxlKXtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4tLXQ8MT9lLmFwcGx5KHRoaXMsYXJndW1lbnRzKTp2b2lkIDB9fSxpc051bGw6ZnVuY3Rpb24odCl7cmV0dXJuIG51bGw9PT10fSxvbmNlOmZ1bmN0aW9uKHQpe3ZhciBlLG49ITE7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIG4/ZToobj0hMCx2b2lkKGU9dC5hcHBseSh0aGlzLGFyZ3VtZW50cykpKX19fTt0LmV4cG9ydHM9bn0sZnVuY3Rpb24odCxlKXt2YXIgbj17QUFDOlwiYWFjXCIsTVAzOlwibXAzXCIsT0dHOlwib2dnXCIsT1BVUzpcIm9wdXNcIixXQVY6XCJ3YXZcIn07dC5leHBvcnRzPW59LGZ1bmN0aW9uKHQsZSl7dmFyIG49e0hUVFA6XCJodHRwXCIsUlRNUDpcInJ0bXBcIixITFM6XCJobHNcIn07dC5leHBvcnRzPW59LGZ1bmN0aW9uKHQsZSxuKXtmdW5jdGlvbiBpKHQpe3JldHVybiBoLnN1cHBvcnRzTWVkaWFTb3VyY2VFeHRlbnNpb25zKCkmJnQubWVkaWFTb3VyY2VFbmFibGVkJiYoaC5pc0Nocm9tZSgpJiZoLmdldENocm9tZVZlcnNpb24oKT49MzV8fGguaXNGaXJlZm94KCkmJnQubXNlRmlyZWZveHx8aC5pc1NhZmFyaSgpJiZ0Lm1zZVNhZmFyaSl9ZnVuY3Rpb24gcih0KXtyZXR1cm4gZnVuY3Rpb24oZSl7dmFyIG49ITE7c3dpdGNoKGUpe2Nhc2UgdS5SVE1QOm49aC5zdXBwb3J0c0ZsYXNoKCk7YnJlYWs7Y2FzZSB1LkhUVFA6bj1oLnN1cHBvcnRzSFRNTDVBdWRpbygpfHxoLnN1cHBvcnRzRmxhc2goKTticmVhaztjYXNlIHUuSExTOm49aSh0KX1yZXR1cm4gbn19ZnVuY3Rpb24gbyh0KXtyZXR1cm4gaC5pc1NhZmFyaSgpfHxoLmlzRmlyZWZveCgpP1t1LkhMUyx1LkhUVFAsdS5SVE1QXTp0fWZ1bmN0aW9uIHModCl7dC5wcm90b2NvbHM9byh0LnByb3RvY29scykuZmlsdGVyKHIodCkpfXZhciBhLHU9bigxNSksaD1uKDE3KTthPXtwcmlvcml0aXplQW5kRmlsdGVyOnN9LHQuZXhwb3J0cz1hfSxmdW5jdGlvbih0LGUpe2Z1bmN0aW9uIG4odCl7cmV0dXJuIHQudGVzdCh3aW5kb3cubmF2aWdhdG9yLnVzZXJBZ2VudC50b0xvd2VyQ2FzZSgpKX1mdW5jdGlvbiBpKHQsZSl7dHJ5e3JldHVybiB3aW5kb3cubmF2aWdhdG9yLnVzZXJBZ2VudC50b0xvd2VyQ2FzZSgpLm1hdGNoKHQpW2VdfWNhdGNoKG4pe3JldHVybiBudWxsfX1mdW5jdGlvbiByKCl7dHJ5e3JldHVybiBwYXJzZUludChpKC9jaHJvbShlfGl1bSlcXC8oWzAtOV0rKVxcLi8sMiksMTApfWNhdGNoKHQpe3JldHVybiBOYU59fWZ1bmN0aW9uIG8oKXtyZXR1cm4haCgpJiZuKC9zYWZhcmkvKX1mdW5jdGlvbiBzKCl7cmV0dXJuIG8oKSYmbigvdmVyc2lvblxcLzdcXC4xLyl9ZnVuY3Rpb24gYSgpe3JldHVybiBvKCkmJm4oL3ZlcnNpb25cXC84LykmJiFuKC92ZXJzaW9uXFwvODAvKX1mdW5jdGlvbiB1KCl7cmV0dXJuIG8oKSYmbigvdmVyc2lvblxcLzlcXC4vKX1mdW5jdGlvbiBoKCl7cmV0dXJuIG4oL2Nocm9tKGV8aXVtKS8pfWZ1bmN0aW9uIGMoKXtyZXR1cm4gbigvZmlyZWZveC8pfWZ1bmN0aW9uIGwoKXtyZXR1cm4hIXdpbmRvdy5NZWRpYVNvdXJjZSYmKHdpbmRvdy5NZWRpYVNvdXJjZS5pc1R5cGVTdXBwb3J0ZWQoXCJhdWRpby9tcGVnXCIpfHx3aW5kb3cuTWVkaWFTb3VyY2UuaXNUeXBlU3VwcG9ydGVkKFwiYXVkaW8vbXA0XCIpKX1mdW5jdGlvbiBmKCl7dHJ5e3JldHVybiB3aW5kb3cuaGFzT3duUHJvcGVydHkoXCJBdWRpb1wiKSYmISEobmV3IHdpbmRvdy5BdWRpbykuY2FuUGxheVR5cGUoXCJhdWRpby9tcGVnXCIpfWNhdGNoKHQpe3JldHVybiExfX1mdW5jdGlvbiBkKCl7dHJ5e3ZhciB0PW8oKSYmbigvdmVyc2lvblxcLzVcXC4wLyksZT13aW5kb3cuaGFzT3duUHJvcGVydHkoXCJBdWRpb1wiKSYmKCEhKG5ldyB3aW5kb3cuQXVkaW8pLmNhblBsYXlUeXBlKCdhdWRpby94LW1wZWdVUkw7IGNvZGVjcz1cIm1wM1wiJyl8fCEhKG5ldyB3aW5kb3cuQXVkaW8pLmNhblBsYXlUeXBlKCd2bmQuYXBwbGUubXBlZ1VSTDsgY29kZWNzPVwibXAzXCInKSk7cmV0dXJuIXQmJmV9Y2F0Y2goaSl7cmV0dXJuITF9fWZ1bmN0aW9uIHAoKXtyZXR1cm4gXyhnKCkpPj15fWZ1bmN0aW9uIGcoKXt2YXIgdCxlLG4saTtpZihcInVuZGVmaW5lZFwiIT10eXBlb2Ygd2luZG93LkFjdGl2ZVhPYmplY3QpdHJ5e2k9bmV3IHdpbmRvdy5BY3RpdmVYT2JqZWN0KFwiU2hvY2t3YXZlRmxhc2guU2hvY2t3YXZlRmxhc2hcIiksaSYmKHQ9aS5HZXRWYXJpYWJsZShcIiR2ZXJzaW9uXCIpKX1jYXRjaChyKXt0PW51bGx9ZWxzZSB3aW5kb3cubmF2aWdhdG9yJiZ3aW5kb3cubmF2aWdhdG9yLnBsdWdpbnMmJndpbmRvdy5uYXZpZ2F0b3IucGx1Z2lucy5sZW5ndGg+MCYmKG49XCJhcHBsaWNhdGlvbi94LXNob2Nrd2F2ZS1mbGFzaFwiLGU9d2luZG93Lm5hdmlnYXRvci5taW1lVHlwZXMsZSYmZVtuXSYmZVtuXS5lbmFibGVkUGx1Z2luJiZlW25dLmVuYWJsZWRQbHVnaW4uZGVzY3JpcHRpb24mJih0PWVbbl0uZW5hYmxlZFBsdWdpbi5kZXNjcmlwdGlvbikpO3JldHVybiB0fWZ1bmN0aW9uIF8odCl7aWYoIXQpcmV0dXJuIDA7dmFyIGU9dC5tYXRjaCgvXFxkXFxTKy8pWzBdLnJlcGxhY2UoLywvZyxcIi5cIikuc3BsaXQoXCIuXCIpO3JldHVybiBwYXJzZUZsb2F0KFtlWzBdLGVbMV1dLmpvaW4oXCIuXCIpKXx8MH12YXIgbSx5PTk7bT17Zmxhc2hQbHVnaW46Zyxpc1NhZmFyaTpvLGlzU2FmYXJpNzE6cyxpc1NhZmFyaTg6YSxpc1NhZmFyaTk6dSxpc0Nocm9tZTpoLGdldENocm9tZVZlcnNpb246cixpc0ZpcmVmb3g6YyxzdXBwb3J0c05hdGl2ZUhMU0F1ZGlvOmQsc3VwcG9ydHNIVE1MNUF1ZGlvOmYsc3VwcG9ydHNGbGFzaDpwLHN1cHBvcnRzTWVkaWFTb3VyY2VFeHRlbnNpb25zOmx9LHQuZXhwb3J0cz1tfSxmdW5jdGlvbih0LGUsbil7ZnVuY3Rpb24gaSh0KXt2YXIgZT1mLmdldFVybEhvc3QodCk7cmV0dXJuIHAuZXZlcnkoZnVuY3Rpb24odCl7cmV0dXJuIDAhPT1lLmluZGV4T2YodCl9KX1mdW5jdGlvbiByKHQsZSl7cmV0dXJuISh0PT09Yy5ITFMmJiFpKGUpKX1mdW5jdGlvbiBvKHQsZSl7aWYoIXQpcmV0dXJuITE7dmFyIG49dC5pc3N1ZWRBdCtzKHQucHJvdG9jb2wsdC5kdXJhdGlvbik7cmV0dXJuIGEodC5wcm90b2NvbCk/RGF0ZS5ub3coKSt0LmR1cmF0aW9uLShlfHwwKTxuOkRhdGUubm93KCk8bn1mdW5jdGlvbiBzKHQsZSl7dmFyIG49YSh0KTtyZXR1cm4gZysobj9sLnJlc3VsdChlKTowKX1mdW5jdGlvbiBhKHQpe3JldHVybiB0PT09Yy5IVFRQfHx0PT09Yy5ITFN9ZnVuY3Rpb24gdSh0LGUpe2Z1bmN0aW9uIG4odCl7cmV0dXJuLTEqdH1mdW5jdGlvbiBpKHQsZSl7cmV0dXJuIE1hdGguYWJzKGUtbSktTWF0aC5hYnModC1tKX12YXIgbyxzLGEsdSxoLGMsZixkLHAsZyxfPXt9LG09ZS5tYXhCaXRyYXRlLHk9ZS5wcm90b2NvbHMsdj1lLmV4dGVuc2lvbnM7Zm9yKGwuZWFjaCh0LGZ1bmN0aW9uKHQsZSl7dmFyIG49ZS5zcGxpdChcIl9cIiksaT1uWzBdLHI9blsxXSxvPW5bMl07X1tpXT1fW2ldfHx7fSxfW2ldW3JdPV9baV1bcl18fHt9LF9baV1bcl1bb109dH0pLGg9MCxjPXkubGVuZ3RoO2M+aDsrK2gpZm9yKHU9eVtoXSxkPTAscD12Lmxlbmd0aDtwPmQ7KytkKWlmKGY9dltkXSxfW3VdJiZfW3VdW2ZdKXtpZihvPU9iamVjdC5rZXlzKF9bdV1bZl0pLm1hcChOdW1iZXIpLnNvcnQobikscz1tPT09MS8wLGE9bT09PS0oMS8wKSxtPXN8fGE/b1tzP1wicG9wXCI6XCJzaGlmdFwiXSgpOm8uc29ydChpKS5wb3AoKSxnPV9bdV1bZl1bbV0sIXIodSxnKSljb250aW51ZTtyZXR1cm57dXJsOmcsYml0cmF0ZTptLHByb3RvY29sOnUsZXh0ZW5zaW9uOmYsaXNzdWVkQXQ6RGF0ZS5ub3coKSxkdXJhdGlvbjpsLnJlc3VsdChlLmR1cmF0aW9uKX19cmV0dXJuIG51bGx9dmFyIGgsYz1uKDE1KSxsPW4oMTMpLGY9bigxMiksZD0uOSxwPVtdLGc9TWF0aC5mbG9vcigxMmU0KmQpO2g9e2Nob29zZVByZWZlcnJlZFN0cmVhbTp1LHN0cmVhbVZhbGlkRm9yUGxheWluZ0Zyb206b30sdC5leHBvcnRzPWh9LGZ1bmN0aW9uKHQsZSxuKXt2YXIgaSxyLG89big3KSxzPW4oMTMpLGE9e0xpbmVhcjowLEVhc2VPdXQ6MSxFYXNlSW5PdXQ6Mn0sdT02MDAsaD0yNTt0LmV4cG9ydHM9aT17fSxpLlZvbHVtZUF1dG9tYXRvcj1yPWZ1bmN0aW9uKHQpe3RoaXMuc2NBdWRpbz10LHRoaXMuZmFkZU91dEFsZ289dGhpcy5zY0F1ZGlvLm9wdGlvbnMuZmFkZU91dEFsZ28sdGhpcy5mYWRlT3V0VGltZXI9bnVsbCx0aGlzLmluaXRpYWxWb2x1bWU9dm9pZCAwLHRoaXMuc2NBdWRpby5vcHRpb25zLmZhZGVPdXRPblBhdXNlJiZyLmlzU3VwcG9ydGVkKCkmJih0aGlzLnNjQXVkaW8ub24oby5QTEFZLHRoaXMub25QbGF5LHRoaXMpLHRoaXMuc2NBdWRpby5yZWdpc3Rlckhvb2soXCJwYXVzZVwiLHRoaXMuaG9va1BhdXNlLmJpbmQodGhpcykpKX0saS5Wb2x1bWVBdXRvbWF0b3IuaXNTdXBwb3J0ZWQ9ZnVuY3Rpb24oKXt2YXIgdD1uZXcgd2luZG93LkF1ZGlvLGU9dC52b2x1bWUsbj0wPT09ZT8xOmUvMjtyZXR1cm4gdC52b2x1bWU9bix0LnZvbHVtZT09PW59LGkuVm9sdW1lQXV0b21hdG9yLkFsZ29zPWEscy5leHRlbmQoci5wcm90b3R5cGUse2ZhZGVPdXRBbmRQYXVzZTpmdW5jdGlvbigpe3ZhciB0PURhdGUubm93KCksZT1mdW5jdGlvbigpe3ZhciBuLGk9KERhdGUubm93KCktdCkvdSxyPXRoaXMuaW5pdGlhbFZvbHVtZTtpZihpPj0xKXRoaXMuc2NBdWRpby5jb250cm9sbGVyJiZ0aGlzLnNjQXVkaW8uY29udHJvbGxlci5wYXVzZSgpLHRoaXMuY2FuY2VsRmFkZW91dCgpO2Vsc2V7c3dpdGNoKHRoaXMuZmFkZU91dEFsZ28pe2Nhc2UgYS5MaW5lYXI6bj1yKigxLWkpO2JyZWFrO2Nhc2UgYS5FYXNlT3V0Om49ciooMS8oMTAqKGkrLjEpKS0uMDUpO2JyZWFrO2Nhc2UgYS5FYXNlSW5PdXQ6ZGVmYXVsdDpuPXIqKE1hdGguY29zKGkqTWF0aC5QSSkvMisuNSl9dGhpcy5zY0F1ZGlvLnNldFZvbHVtZShuKSx3aW5kb3cuY2xlYXJUaW1lb3V0KHRoaXMuZmFkZU91dFRpbWVyKSx0aGlzLmZhZGVPdXRUaW1lcj13aW5kb3cuc2V0VGltZW91dChlLGgpfX0uYmluZCh0aGlzKTt0aGlzLmluaXRpYWxWb2x1bWU9dGhpcy5zY0F1ZGlvLmdldFZvbHVtZSgpLGUoKX0sY2FuY2VsRmFkZW91dDpmdW5jdGlvbigpe3RoaXMuZmFkZU91dFRpbWVyJiYod2luZG93LmNsZWFyVGltZW91dCh0aGlzLmZhZGVPdXRUaW1lciksdGhpcy5mYWRlT3V0VGltZXI9bnVsbCx0aGlzLnNjQXVkaW8uc2V0Vm9sdW1lKHRoaXMuaW5pdGlhbFZvbHVtZSksdGhpcy5pbml0aWFsVm9sdW1lPXZvaWQgMCl9LGhvb2tQYXVzZTpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5mYWRlT3V0QW5kUGF1c2UoKSwhMX0sb25QbGF5OmZ1bmN0aW9uKCl7dGhpcy5jYW5jZWxGYWRlb3V0KCl9fSl9XSl9LGZ1bmN0aW9uKHQsZSl7fV0pfSk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1zZGsuanMubWFwXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L3NvdW5kY2xvdWQvc2RrLmpzXG4vLyBtb2R1bGUgaWQgPSAwXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsImltcG9ydCBUb2FzdCBmcm9tICcuLi9jb250cm9scy90b2FzdCc7XHJcbmltcG9ydCBTZXR0aW5ncyBmcm9tICcuL3NldHRpbmdzJztcclxuXHJcbmNsYXNzIFV0aWxzIHtcclxuXHJcbiAgICAgLyoqXHJcbiAgICAgKiBTaW1wbGUgZnVuY3Rpb24gdG8gY29udmVydCBtaWxsaXNlY29uZHMgdG8gYSBzdHJpbmcgd2l0aCBtaW51dGVzIGFuZCBzZWNvbmRzXHJcbiAgICAgKiBAcGFyYW0geyppbnR9IG1pbGxpcyAtIHRpbWUgaW4gbWlsbGlzZWNvbmRzXHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBjb252ZXJ0TWlsbGlzZWNvbmRzVG9EaWdpdGFsQ2xvY2sobXMpIHtcclxuICAgICAgICBsZXQgaG91cnMgPSBNYXRoLmZsb29yKG1zIC8gMzYwMDAwMCksIC8vIDEgSG91ciA9IDM2MDAwIE1pbGxpc2Vjb25kc1xyXG4gICAgICAgIG1pbnV0ZXMgPSBNYXRoLmZsb29yKChtcyAlIDM2MDAwMDApIC8gNjAwMDApLCAvLyAxIE1pbnV0ZXMgPSA2MDAwMCBNaWxsaXNlY29uZHNcclxuICAgICAgICBzZWNvbmRzID0gTWF0aC5mbG9vcigoKG1zICUgMzYwMDAwKSAlIDYwMDAwKSAvIDEwMDApIC8vIDEgU2Vjb25kID0gMTAwMCBNaWxsaXNlY29uZHNcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBob3VycyA6IGhvdXJzLFxyXG4gICAgICAgICAgICBtaW51dGVzIDogbWludXRlcyxcclxuICAgICAgICAgICAgc2Vjb25kcyA6IHNlY29uZHMsXHJcbiAgICAgICAgICAgIGNsb2NrIDogKChob3VycyA9PT0gMCkgPyAnJyA6IGhvdXJzICsgJzonKSArIChtaW51dGVzIDwgMTAgJiYgaG91cnMgPiAwID8gJzAnIDogJycpICsgbWludXRlcyArICc6JyArIChzZWNvbmRzIDwgMTAgPyAnMCcgOiAnJykgKyBzZWNvbmRzLFxyXG4gICAgICAgICAgICBjbG9ja19sb25nOiAoKGhvdXJzID09PSAwKSA/ICcnIDogaG91cnMgKyAnIGhyICcpICsgKG1pbnV0ZXMgPCAxMCAmJiBob3VycyA+IDAgPyAnMCcgOiAnJykgKyBtaW51dGVzICsgJyBtaW4nXHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEdyYWIgYSByYW5kb20gaW1hZ2Ugd2hlbiBhIHNvbmcgZG9lcyBub3QgaGF2ZSBjb3ZlciBhcnQuXHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBmZXRjaFJhbmRvbUltYWdlKCkge1xyXG4gICAgICAgIGxldCBpID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogNDA1MCkgKyAxO1xyXG4gICAgICAgIHJldHVybiBgaHR0cDovL2ltZy5pbmZpbml0eW5ld3RhYi5jb20vd2FsbHBhcGVyLyR7aX0uanBnYDtcclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgc2hvd1RvYXN0KG1lc3NhZ2UpIHtcclxuICAgICAgICB0aGlzLnRvYXN0Q29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3RvYXN0Q29udGFpbmVyJyk7XHJcbiAgICAgICAgdGhpcy50b2FzdENvbnRhaW5lci5pbm5lckhUTUwgPSBUb2FzdChtZXNzYWdlLCAnJyk7XHJcbiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHsgXHJcbiAgICAgICAgICAgICQoJyN0b2FzdCcpLmFkZENsYXNzKCdzaG93bicpO1xyXG4gICAgICAgIH0sIDUwMCk7XHJcbiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHsgLy8gSGlkZSB0b2FzdFxyXG4gICAgICAgICAgICAkKCcjdG9hc3QnKS5yZW1vdmVDbGFzcygnc2hvd24nKTtcclxuICAgICAgICAgICAgJCgnI3RvYXN0JykuaHRtbCgnJyk7IC8vIEVtcHR5IG91dCB0aGUgdG9hc3RcclxuICAgICAgICB9LCAzMDAwKTtcclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgbG9nKG1lc3NhZ2UpIHtcclxuICAgICAgICBpZiAoU2V0dGluZ3MuZ2V0UHJlZignZGVidWcnKSA9PSAndHJ1ZScpXHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKG1lc3NhZ2UpO1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBVdGlscztcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3B1YmxpYy9qcy91dGlscy5qc1xuLy8gbW9kdWxlIGlkID0gMVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJjbGFzcyBTZXR0aW5ncyB7XHJcblxyXG4gICAgc3RhdGljIGxvYWRQcmVmcygpIHtcclxuICAgICAgICB0aGlzLmRpc2FibGVBbmltYXRpb25zQ1NTID0gXCI8c3R5bGUgaWQ9J2Rpc2FibGVBbmltYXRpb25zJz4qIHt0cmFuc2l0aW9uOiBub25lICFpbXBvcnRhbnQ7IC13ZWJraXQtdHJhbnNpdGlvbjogbm9uZTsgIWltcG9ydGFudH08L3N0eWxlPlwiO1xyXG4gICAgICAgIHRoaXMuZGlzYWJsZUJsdXJDU1MgPSBcIjxzdHlsZSBpZD0nZGlzYWJsZUJsdXInPiNoaXN0SXRlbUJnIHstd2Via2l0LWZpbHRlcjogYnJpZ2h0bmVzcyguNSkgIWltcG9ydGFudDtmaWx0ZXI6IGJyaWdodG5lc3MoLjUpICFpbXBvcnRhbnQ7IH0gI2JhY2tncm91bmQgey13ZWJraXQtZmlsdGVyOiBicmlnaHRuZXNzKC44KSAhaW1wb3J0YW50O2ZpbHRlcjogYnJpZ2h0bmVzcyguOCkgIWltcG9ydGFudDsgfTwvc3R5bGU+XCJcclxuICAgICAgICBcclxuICAgICAgICAvLyBEZWZhdWx0IHNldHRpbmdzIG9iamVjdFxyXG4gICAgICAgIHRoaXMuX3NldHRpbmdzID0ge1xyXG4gICAgICAgICAgICBkaXNhYmxlQW5pbWF0aW9uczogZmFsc2UsXHJcbiAgICAgICAgICAgIGRpc2FibGVCbHVyOiBmYWxzZSxcclxuICAgICAgICAgICAgcGxheWVyVm9sdW1lOiAxMDAsXHJcbiAgICAgICAgICAgIGRlYnVnOiBmYWxzZSxcclxuICAgICAgICAgICAgc2h1ZmZsZU1vZGU6ICdyYW5kb20nXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLnVwZGF0ZVNldHRpbmdzKCk7XHJcbiAgICAgICAgXHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIHN0b3JlUHJlZihuYW1lLCB2YWx1ZSkge1xyXG4gICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKG5hbWUsIHZhbHVlKTtcclxuICAgICAgICB0aGlzLnVwZGF0ZVNldHRpbmdzKCk7IC8vIFJlZnJlc2ggdmFsdWVzIGluIF9zZXR0aW5ncyBvYmplY3RcclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgZ2V0UHJlZihuYW1lKSB7XHJcbiAgICAgICAgc3dpdGNoIChuYW1lKSB7XHJcbiAgICAgICAgICAgIGNhc2UgJ2Rpc2FibGVBbmltYXRpb25zJzpcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9zZXR0aW5ncy5kaXNhYmxlQW5pbWF0aW9ucztcclxuICAgICAgICAgICAgY2FzZSAnZGlzYWJsZUJsdXInOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3NldHRpbmdzLmRpc2FibGVCbHVyO1xyXG4gICAgICAgICAgICBjYXNlICdwbGF5ZXJWb2x1bWUnOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3NldHRpbmdzLnBsYXllclZvbHVtZTtcclxuICAgICAgICAgICAgY2FzZSAnZGVidWcnOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3NldHRpbmdzLmRlYnVnO1xyXG4gICAgICAgICAgICBjYXNlICdzaHVmZmxlTW9kZSc6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fc2V0dGluZ3Muc2h1ZmZsZU1vZGU7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyB1cGRhdGVTZXR0aW5ncygpIHtcclxuICAgICAgICB0aGlzLl9zZXR0aW5ncy5kaXNhYmxlQW5pbWF0aW9ucyA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdkaXNhYmxlQW5pbWF0aW9ucycpIHx8IGZhbHNlO1xyXG4gICAgICAgIHRoaXMuX3NldHRpbmdzLmRpc2FibGVCbHVyID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2Rpc2FibGVCbHVyJykgfHwgKC9BbmRyb2lkfHdlYk9TfGlQaG9uZXxpUGFkfGlQb2R8QmxhY2tCZXJyeXxJRU1vYmlsZXxPcGVyYSBNaW5pL2kudGVzdChuYXZpZ2F0b3IudXNlckFnZW50KSA/IHRydWUgOiBmYWxzZSk7IC8vIERpc2FibGUgYmx1ciBmb3IgbW9iaWxlIGRldmljZXNcclxuICAgICAgICB0aGlzLl9zZXR0aW5ncy5wbGF5ZXJWb2x1bWUgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgncGxheWVyVm9sdW1lJykgfHwgMTAwO1xyXG4gICAgICAgIHRoaXMuX3NldHRpbmdzLmRlYnVnID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2RlYnVnJykgfHwgZmFsc2U7XHJcbiAgICAgICAgdGhpcy5fc2V0dGluZ3Muc2h1ZmZsZU1vZGUgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnc2h1ZmZsZU1vZGUnKSB8fCAncmFuZG9tJztcclxuICAgIH1cclxuXHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IFNldHRpbmdzO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vcHVibGljL2pzL3NldHRpbmdzLmpzXG4vLyBtb2R1bGUgaWQgPSAyXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIm1vZHVsZS5leHBvcnRzID0ge1xuXHRcImNsaWVudF9pZFwiOiBcIjJ0OWxvTlFIOTBrekpjc0ZDT0RkaWd4ZnAzMjVhcTR6XCIsXG5cdFwiY2xpZW50X3NlY3JldFwiOiBcImEwNWtTTTQxOHhuaHBTdlBWUFh6UUJSam1PMXM4R1dXXCJcbn07XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9jb25zdHMtc2VjLmpzb25cbi8vIG1vZHVsZSBpZCA9IDNcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiaW1wb3J0IGNvbnN0cyBmcm9tICcuLi8uLi9jb25zdHMtc2VjLmpzb24nO1xyXG5cclxubGV0IFNDID0gcmVxdWlyZSgnc291bmRjbG91ZCcpO1xyXG5cclxuY2xhc3MgQ2hhcnRJdGVtIHtcclxuICAgIGNvbnN0cnVjdG9yKHBsYXllciwgdGl0bGUsIGFydGlzdCwga2luZCwgZ2VucmUsIGxpbWl0LCBhcnQpIHtcclxuICAgICAgICB0aGlzLl9wbGF5ZXIgPSBwbGF5ZXI7XHJcbiAgICAgICAgdGhpcy5fdGl0bGUgPSB0aXRsZTtcclxuICAgICAgICB0aGlzLl9hcnRpc3QgPSBhcnRpc3Q7XHJcbiAgICAgICAgdGhpcy5fa2luZCA9IGtpbmQ7XHJcbiAgICAgICAgdGhpcy5fZ2VucmUgPSBnZW5yZTtcclxuICAgICAgICB0aGlzLl9saW1pdCA9IGxpbWl0O1xyXG4gICAgICAgIHRoaXMuX2FydCA9IGFydDtcclxuXHJcbiAgICAgICAgdGhpcy5jaGFydEl0ZW0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICB0aGlzLmNoYXJ0SXRlbS5jbGFzc05hbWUgPSAnY29sLTQnO1xyXG4gICAgICAgIC8vIHRoaXMuY2hhcnRJdGVtLnNldEF0dHJpYnV0ZSgnZGF0YS1nZW5yZScsIHRoaXMuX2dlbnJlKTtcclxuICAgICAgICAvLyB0aGlzLmNoYXJ0SXRlbS5zZXRBdHRyaWJ1dGUoJ2RhdGEtbGltaXQnLCB0aGlzLl9saW1pdCk7XHJcbiAgICAgICAgdGhpcy5iaW5kRXZlbnRzKCk7XHJcbiAgICAgICAgbGV0IHRlbXBJbm5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICAgIHRlbXBJbm5lci5pbm5lckhUTUwgPSBgXHJcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY2hhcnQtaXRlbSBjYXJkXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNhcmQtY29udGFpbmVyXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjYXJkLWltYWdlXCIgc3R5bGU9XCJiYWNrZ3JvdW5kLWltYWdlOiB1cmwoJHthcnR9KTtcIj48L2Rpdj5cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJ0aXRsZS1jb250YWluZXJcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzPVwidGl0bGVcIj4ke3RoaXMuX3RpdGxlfTwvcD48c3BhbiBjbGFzcz1cInN1YnRpdGxlXCI+QnkgU291bmRDbG91ZDwvc3Bhbj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgYDtcclxuICAgICAgICB0aGlzLmNoYXJ0SXRlbS5hcHBlbmRDaGlsZCh0ZW1wSW5uZXIpOyAvLyBNdXN0IHVzZSB0aGlzIG1ldGhvZCB0byBwcmVzZXJ2ZSBsaXN0ZW5lcnNcclxuICAgIH1cclxuXHJcbiAgICByZW5kZXIoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuY2hhcnRJdGVtO1xyXG4gICAgfVxyXG5cclxuICAgIGJpbmRFdmVudHMoKSB7XHJcbiAgICAgICAgdGhpcy5jaGFydEl0ZW0uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLl9wbGF5ZXIuZ2V0VHJhY2tzRnJvbUNoYXJ0cyh0aGlzLl9raW5kLCB0aGlzLl9nZW5yZSwgdGhpcy5fbGltaXQpO1xyXG4gICAgICAgICAgICB0aGlzLl9wbGF5ZXIuc2VhcmNoRGlhbG9nLmhpZGVTZWFyY2hEaWFsb2coKTtcclxuICAgICAgICAgICAgdGhpcy5fcGxheWVyLmNoYXJ0c0RpYWxvZy5oaWRlQ2hhcnRzKCk7XHJcbiAgICAgICAgfSwgZmFsc2UpO1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBDaGFydEl0ZW07XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9wdWJsaWMvY29udHJvbHMvY2hhcnRpdGVtLmpzXG4vLyBtb2R1bGUgaWQgPSA0XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsImNvbnN0IFRvYXN0ID0gKHRleHQsIHNob3duKSA9PiAoXHJcbiAgICBgXHJcbiAgICAgICAgPGRpdiBjbGFzcz1cInRvYXN0ICR7c2hvd259XCIgaWQ9XCJ0b2FzdFwiPlxyXG4gICAgICAgICAgICA8cCBjbGFzcz1cInRleHQtY2VudGVyXCI+JHt0ZXh0fTwvcD5cclxuICAgICAgICA8L2Rpdj5cclxuICAgIGBcclxuKTtcclxuZXhwb3J0IGRlZmF1bHQgVG9hc3RcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3B1YmxpYy9jb250cm9scy90b2FzdC5qc1xuLy8gbW9kdWxlIGlkID0gNVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJpbXBvcnQgY29uc3RzIGZyb20gJy4uLy4uL2NvbnN0cy1zZWMuanNvbic7XHJcbmltcG9ydCBIaXN0SXRlbSBmcm9tICcuLi9jb250cm9scy9IaXN0SXRlbSc7XHJcbmltcG9ydCBTb25nSW5mbyBmcm9tICcuLi9jb250cm9scy9zb25naW5mbyc7XHJcbmltcG9ydCBXYXZlRm9ybSBmcm9tICcuLi9jb250cm9scy93YXZlZm9ybSc7XHJcbmltcG9ydCBSZXF1ZXN0IGZyb20gJy4vcmVxdWVzdCc7XHJcbmltcG9ydCBTZWFyY2hEaWFsb2cgZnJvbSAnLi4vY29udHJvbHMvc2VhcmNoJztcclxuaW1wb3J0IFRvYXN0IGZyb20gJy4uL2NvbnRyb2xzL3RvYXN0JztcclxuaW1wb3J0IERhc2hib2FyZCBmcm9tICcuLi9jb250cm9scy9kYXNoYm9hcmQnO1xyXG5pbXBvcnQgVXRpbHMgZnJvbSAnLi91dGlscyc7XHJcbmltcG9ydCBTZXR0aW5ncyBmcm9tICcuL3NldHRpbmdzJztcclxuaW1wb3J0IENoYXJ0cyBmcm9tICcuLi9jb250cm9scy9jaGFydHMnXHJcblxyXG5jb25zdCBTQyA9IHJlcXVpcmUoJ3NvdW5kY2xvdWQnKTsgLy8gSW1wb3J0IG5vZGUgbW9kdWxlXHJcblxyXG4vLyBTb3VuZGNsb3VkIFByb3BlcnRpZXMgXHJcblxyXG4vLyBPbGRlc3QgcmFuZ2UgKGFyb3VuZCAyMDA3IG9ud2FyZClcclxuY29uc3QgUkFORF9DT1VOVCA9IDkwMDAwO1xyXG5jb25zdCBPRkZTRVQgPSAwO1xyXG5cclxuLy8gR29pbmcgZnJvbSAyMDEwXHJcbmNvbnN0IFJBTkRfQ09VTlRfMSA9IDcwMDAwMDA7XHJcbmNvbnN0IE9GRlNFVF8xID0gMzAwMDAwMDtcclxuXHJcbi8vIE1vcmUgUmVjZW50XHJcbmNvbnN0IFJBTkRfQ09VTlRfMiA9IDkwMDAwMDAwO1xyXG5jb25zdCBPRkZTRVRfMiA9IDEwMDAwMDAwO1xyXG5cclxuLy8gVGhlIGZyZXNoIHN0dWZmXHJcbmNvbnN0IFJBTkRfQ09VTlRfMyA9IDMwMDAwMDAwMDtcclxuY29uc3QgT0ZGU0VUXzMgPSAxMDAwMDAwMDA7XHJcblxyXG4vLyBXaWRnZXQgUGFyYW1ldGVyc1xyXG4vL2NvbnN0IFdJREdFVF9QQVJBTVMgPSAnJmxpa2luZz1mYWxzZSZzaG93X2FydHdvcms9ZmFsc2Umc2hvd19jb21tZW50cz1mYWxzZSZzaG93X3BsYXljb3VudD1mYWxzZSZ2aXN1YWw9ZmFsc2UnO1xyXG5jb25zdCBXSURHRVRfUEFSQU1TID0gJyc7XHJcblxyXG5jbGFzcyBQbGF5ZXIge1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogU2V0cyB1cCB0aGUgdGhlIGFwcGxpY2F0aW9uIHZhcmlhYmxlcyBhbmQgaG9va2luZyBldmVudHMgdG8gY29udHJvbHMuXHJcbiAgICAgKi9cclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIC8vIEluaXRpYWxpemUgdmFyaWFibGVzXHJcbiAgICAgICAgdGhpcy5oaXN0b3J5ID0gW107XHJcbiAgICAgICAgdGhpcy5xdWV1ZSA9IFtdOyAvLyBGb3IgdHJhY2tzIHBsYXlpbmcgbmV4dFxyXG4gICAgICAgIHRoaXMuaXNQbGF5aW5nID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5jdXJQbGF5ZXIgPSBudWxsO1xyXG4gICAgICAgIHRoaXMuY3VyUG9zaXRpb24gPSAwO1xyXG4gICAgICAgIHRoaXMuY3VyVHJhY2sgPSBudWxsOyAvLyBTdG9yZSB0cmFjayBkYXRhLiBVcGRhdGVkIGluIGxvYWRXaWRnZXRTb25nKClcclxuICAgICAgICB0aGlzLndhdmVmb3JtID0gbnVsbDtcclxuICAgICAgICB0aGlzLmlzUmVwZWF0aW5nID0gZmFsc2U7IC8vIEZvciByZXBlYXRpbmcgc29uZ3NcclxuICAgICAgICB0aGlzLmhhc0JlZW5GZXRjaGVkID0gZmFsc2U7IC8vIFVzZWQgdG8gc3RvcCBkdXBsaWNhdGVzIGR1cmluZyByZWN1cnNpb25cclxuICAgICAgICB0aGlzLnRpbWVyVXBkYXRlID0gMDtcclxuICAgICAgICB0aGlzLmlzUGxheWxpc3QgPSBmYWxzZTsgLy8gQ2hlY2sgaWYgd2UgYXJlIHBsYXlpbmcgYSBwbGF5bGlzdC5cclxuICAgICAgICB0aGlzLnNldEN1ckluZGV4ID0gMDsgLy8gVGhlIGN1cnJlbnQgaW5kZXggb2YgdGhlIHNvbmcgaW4gdGhlIHBsYXlsaXN0XHJcbiAgICAgICAgdGhpcy5zZXRUcmFja0NvdW50ID0gMDsgLy8gVGhpcyBob2xkcyB0aGUgbnVtYmVyIG9mIHRyYWNrcyBpbiB0aGUgcGxheWxpc3Qgc28gd2UgY2FuIHRlbGwgd2hlbiB3ZSBoYXZlIHJlYWNoZWQgdGhlIGVuZC5cclxuICAgICAgICB0aGlzLnNodWZmbGVRdWV1ZSA9IGZhbHNlOyAvLyBTaG91bGQgdGhlIHF1ZXVlIGJlIHNodWZmbGVkIHdoZW4gd2UgZ2V0IGEgbGlzdCBvZiB0cmFja3M7XHJcbiAgICAgICAgdGhpcy5xdWV1ZU51bSA9IDEyMDsgLy8gSG93IG1hbnkgcmVzdWx0cyB0byBhZGQgdG8gdGhlIHF1ZXVlXHJcblxyXG4gICAgICAgIHRoaXMuc2Vla2luZ0ZvcndhcmQgPSBmYWxzZTsgLy8gV29yayBhcm91bmQgZm9yIHRoZSBidWcgaW4gUFJPR1JFU1MgZXZlbnRcclxuXHJcbiAgICAgICAgLy8gRXhwZXJpbWVudGFsIEFQSSB2MiBFbmRwb2ludFxyXG4gICAgICAgIHRoaXMuU09VTkRDTE9VRF9BUElfVjIgPSAnaHR0cHM6Ly9hcGktdjIuc291bmRjbG91ZC5jb20vJztcclxuXHJcbiAgICAgICAgLy8gV2lkZ2V0IFByb3BzXHJcbiAgICAgICAgdGhpcy53aWRnZXRUcmFjayA9IHtcclxuICAgICAgICAgICAgY292ZXI6ICcnLFxyXG4gICAgICAgICAgICB0aXRsZTogJycsXHJcbiAgICAgICAgICAgIGlkOiAwLFxyXG4gICAgICAgICAgICBhcnRpc3Q6ICcnLFxyXG4gICAgICAgICAgICBwZXJtYWxpbmtfdXJsOiAnJyxcclxuICAgICAgICAgICAgZGVzY3JpcHRpb246ICcnLFxyXG4gICAgICAgICAgICBjcmVhdGVkX2F0OiAnJyxcclxuICAgICAgICAgICAgZHVyYXRpb246IDAsXHJcbiAgICAgICAgICAgIGN1cnJlbnRQb3NpdGlvbjogMFxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIC8vIEJpbmQgcGFnZSBlbGVtZW50cyBcclxuICAgICAgICB0aGlzLmJpbmRDb250cm9sRWxlbWVudHMoKTtcclxuICAgICAgICB0aGlzLmJpbmRDb250cm9sRXZlbnRzKCk7XHJcblxyXG4gICAgICAgIC8vIEluaXRpYWxpemUgU2VhcmNoIGRpYWxvZ1xyXG4gICAgICAgIHRoaXMuc2VhcmNoRGlhbG9nID0gbmV3IFNlYXJjaERpYWxvZyh0aGlzKTtcclxuICAgICAgICBcclxuICAgICAgICAvLyBJbml0aWFsaXplIHRoZSBkYXNoYm9hcmQsIGFsc28gaW5pdGlhbGl6ZXMgc2V0dGluZ3NcclxuICAgICAgICB0aGlzLmRhc2hib2FyZCA9IG5ldyBEYXNoYm9hcmQodGhpcyk7XHJcblxyXG4gICAgICAgIC8vIEluaXRpYWxpemUgdGhlIGNoYXJ0c1xyXG4gICAgICAgIHRoaXMuY2hhcnRzRGlhbG9nID0gbmV3IENoYXJ0cyh0aGlzKTtcclxuXHJcbiAgICAgICAgLy8gU2V0dGluZ3MgYWxyZWFkeSBJbml0aWFsaXplZFxyXG4gICAgICAgIGlmIChKU09OLnBhcnNlKFNldHRpbmdzLmdldFByZWYoJ2Rpc2FibGVBbmltYXRpb25zJykpKSB7XHJcbiAgICAgICAgICAgICQoU2V0dGluZ3MuZGlzYWJsZUFuaW1hdGlvbnNDU1MpLmFwcGVuZFRvKFwiaGVhZFwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKEpTT04ucGFyc2UoU2V0dGluZ3MuZ2V0UHJlZignZGlzYWJsZUJsdXInKSkpIHtcclxuICAgICAgICAgICAgJChTZXR0aW5ncy5kaXNhYmxlQmx1ckNTUykuYXBwZW5kVG8oXCJoZWFkXCIpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gTG9hZCBhIHRyYWNrIHdoZW4gdGhlIGFwcCBpcyBsb2FkZWQgKHRha2UgdXJsIHBhcmFtIGludG8gYWNjb3VudCkuXHJcbiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3dpZGdldHRlc3QnKS5zZXRBdHRyaWJ1dGUoJ3NyYycsICdodHRwczovL3cuc291bmRjbG91ZC5jb20vcGxheWVyLz91cmw9aHR0cHMlM0EvL2FwaS5zb3VuZGNsb3VkLmNvbS90cmFja3MvMTcwMjAyMTUxJyArIFdJREdFVF9QQVJBTVMpO1xyXG4gICAgICAgIGxldCBpZnJhbWVJRCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd3aWRnZXR0ZXN0Jyk7XHJcbiAgICAgICAgdGhpcy5jdXJQbGF5ZXIgPSBTQy5XaWRnZXQoaWZyYW1lSUQpO1xyXG4gICAgICAgIC8vIFVwZGF0ZSB0aGUgcGxheWVyXHJcbiAgICAgICAgdGhpcy5iaW5kV2lkZ2V0RXZlbnRzKHRoaXMuY3VyUGxheWVyKTsgLy8gQmluZCBldmVudCBoYW5kbGVycyBmb3Igd2lkZ2V0LlxyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIENoZWNrIGZvciBwYXJhbXMgYW5kIHRoZW4gZGVjaWRlIHdoYXQgdG8gcGxheVxyXG4gICAgICAgIHRoaXMuY2hlY2tQYXJhbXNBbmRGZXRjaCgpO1xyXG5cclxuICAgICAgICBVdGlscy5sb2coJ2NvbnN0cnVjdCBkb25lJyk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBCaW5kcyB0aGUgcGFnZSBlbGVtZW50cyB0byBKUyBvYmplY3RzIHNvIHdlIGNhbiBhY2Nlc3MgdGhlbSBpbiBvdGhlciBmdW5jdGlvbnMuXHJcbiAgICAgKi9cclxuICAgIGJpbmRDb250cm9sRWxlbWVudHMoKSB7XHJcbiAgICAgICAgdGhpcy5tYWluUGxheWVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NvbmdDb250YWluZXInKTtcclxuICAgICAgICB0aGlzLnBsYXlCdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncGxheS1idG4nKTtcclxuICAgICAgICB0aGlzLmhpc3RDb250YWluZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaGlzdENvbnRhaW5lcicpO1xyXG4gICAgICAgIHRoaXMuYnRuRmYgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2Vlay1mdy1idG4nKTtcclxuICAgICAgICB0aGlzLmJ0bkJrID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NlZWstYmstYnRuJyk7XHJcbiAgICAgICAgdGhpcy5idG5TZWFyY2ggPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY3VzdG9tLWJ0bicpO1xyXG4gICAgICAgIHRoaXMuYnRuUmVwZWF0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3JlcGVhdC1idG4nKTtcclxuICAgICAgICB0aGlzLmJ0bkRhc2hib2FyZCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkYXNoYm9hcmQtYnRuJyk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBCaW5kcyBjb21wb25lbnRzIG9uIHRoZSBwYWdlIHRvIGNvbW1hbmRzIG9uIGFjdGlvbi5cclxuICAgICAqL1xyXG4gICAgYmluZENvbnRyb2xFdmVudHMoKSB7XHJcbiAgICAgICAgdGhpcy5wbGF5QnRuLm9uY2xpY2sgPSAoZSkgPT4ge1xyXG4gICAgICAgICAgICAvLyBpZiAodGhpcy5jdXJQbGF5ZXIgPT09IG51bGwgJiYgIXRoaXMuaXNQbGF5aW5nKVxyXG4gICAgICAgICAgICAvLyAgICAgdGhpcy51cGRhdGVTdHJlYW0odGhpcy5nZXRSYW5kb21UcmFjaygpKTtcclxuICAgICAgICAgICAgdGhpcy50b2dnbGVQbGF5KCk7XHJcblxyXG4gICAgICAgICAgICAvLyBDaGVjayBpZiBzb25nIHRpdGxlIG1hdGNoZXMgdGl0bGUgaW4gYXBwXHJcbiAgICAgICAgICAgIGlmICgkKCcjc29uZ1RpdGxlJykudmFsdWUgIT09IHRoaXMuY3VyUGxheWVyLnRpdGxlKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmN1clBsYXllci5nZXRDdXJyZW50U291bmQoKHNvbmcpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZVNvbmdJbmZvKHNvbmcpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIEV2ZW50IGhhbmRsZXIgZm9yIHNlZWtpbmcgZm9yd2FyZCAvIGZldGNoIG5ldyBzb25nXHJcbiAgICAgICAgdGhpcy5idG5GZi5vbmNsaWNrID0gKGUpID0+IHtcclxuICAgICAgICAgICAgaWYgKHRoaXMucXVldWUubGVuZ3RoID4gMCB8fCB0aGlzLmlzUGxheWxpc3QpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2Vla0ZvcndhcmQoKTsgLy8gU2VlayBmb3J3YXJkIGluIHF1ZXVlXHJcbiAgICAgICAgICAgIH0gZWxzZSB7IC8vIEVsc2UganVzdCBsb2FkIGFub3RoZXIgc29uZ1xyXG4gICAgICAgICAgICAgICAgdGhpcy5mZXRjaE5leHQoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gRXZlbnQgaGFuZGxlciBmb3Igc2Vla2luZyBiYWNrXHJcbiAgICAgICAgdGhpcy5idG5Cay5vbmNsaWNrID0gKGUpID0+IHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuY3VyUG9zaXRpb24gPiAxMDAwMCkgeyAvLyBJZiB0aGUgc29uZyBpcyBwYXN0IDEwIHNlY29uZHMsIHJlc2V0IHNvbmcgYmFjayB0byBiZWdpbm5pbmcgKGxpa2UgaW4gU3BvdGlmeSlcclxuICAgICAgICAgICAgICAgIHRoaXMucmVzdGFydFNvbmcoKTtcclxuICAgICAgICAgICAgfSBlbHNlIHsgLy8gRWxzZSwgZ28gdG8gdGhlIGxhc3Qgc29uZ1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zZWVrQmFjaygpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBFdmVudCBoYW5kbGVyIHRvIHBsYXkgY3VzdG9tIHNvbmdcclxuICAgICAgICB0aGlzLmJ0blNlYXJjaC5vbmNsaWNrID0gKGUpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5zZWFyY2hEaWFsb2cudG9nZ2xlU2VhcmNoRGlhbG9nKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIEV2ZW50IGhhbmRsZXIgZm9yIHJlcGVhdHNcclxuICAgICAgICB0aGlzLmJ0blJlcGVhdC5vbmNsaWNrID0gKGUpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5pc1JlcGVhdGluZyA9ICF0aGlzLmlzUmVwZWF0aW5nOyAvLyBUb2dnbGUgdGhlIHZhbHVlXHJcbiAgICAgICAgICAgIGlmICh0aGlzLmlzUmVwZWF0aW5nKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmJ0blJlcGVhdC5zdHlsZS5jb2xvciA9ICcjZmYyMTYwJztcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuYnRuUmVwZWF0LnN0eWxlLmNvbG9yID0gJ2luaGVyaXQnO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBFdmVudCBoYW5kbGVyIHRvIHNob3cgZGFzaGJvYXJkXHJcbiAgICAgICAgdGhpcy5idG5EYXNoYm9hcmQub25jbGljayA9IChlKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuZGFzaGJvYXJkLnRvZ2dsZURhc2hib2FyZCgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gQmluZCBrZXlib2FyZCBzaG9ydGN1dHNcclxuICAgICAgICBkb2N1bWVudC5vbmtleWRvd24gPSAoZSkgPT4ge1xyXG4gICAgICAgICAgICBpZiAoZS5rZXlDb2RlID09IDMyKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBzcGFjZSBrZXkgdG8gdG9nZ2xlIHBsYXliYWNrXHJcbiAgICAgICAgICAgICAgICB2YXIgdGFnID0gZS50YXJnZXQudGFnTmFtZS50b0xvd2VyQ2FzZSgpO1xyXG4gICAgICAgICAgICAgICAgaWYgKHRhZyAhPSAnaW5wdXQnKSAvLyBJZ25vcmUgdGhlIHNlYXJjaCBmaWVsZFxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMudG9nZ2xlUGxheSgpO1xyXG5cclxuICAgICAgICAgICAgfSBlbHNlIGlmIChlLnNoaWZ0S2V5ICYmIGUua2V5Q29kZSA9PSAzOCkge1xyXG4gICAgICAgICAgICAgICAgLy8gc2hpZnQgdXBcclxuICAgICAgICAgICAgICAgIHRoaXMudm9sdW1lVXAoMTApO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGUuc2hpZnRLZXkgJiYgZS5rZXlDb2RlID09IDQwKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBzaGlmdCBkb3duXHJcbiAgICAgICAgICAgICAgICB0aGlzLnZvbHVtZURvd24oMTApO1xyXG5cclxuICAgICAgICAgICAgfSBlbHNlIGlmIChlLnNoaWZ0S2V5ICYmIGUua2V5Q29kZSA9PSA2Nikge1xyXG4gICAgICAgICAgICAgICAgbGV0IGlkID0gcHJvbXB0KFwiRW50ZXIgc29uZyBpZC5cIik7XHJcbiAgICAgICAgICAgICAgICBpZiAoaWQgPT0gbnVsbClcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcblxyXG4gICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3dpZGdldHRlc3QnKS5zZXRBdHRyaWJ1dGUoJ3NyYycsIGBodHRwczovL3cuc291bmRjbG91ZC5jb20vcGxheWVyLz91cmw9aHR0cHMlM0EvL2FwaS5zb3VuZGNsb3VkLmNvbS90cmFja3MvJHtpZH1gICsgV0lER0VUX1BBUkFNUyk7XHJcbiAgICAgICAgICAgICAgICBsZXQgaWZyYW1lSUQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnd2lkZ2V0dGVzdCcpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jdXJQbGF5ZXIgPSBTQy5XaWRnZXQoaWZyYW1lSUQpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jdXJQbGF5ZXIubG9hZChgaHR0cHMlM0EvL2FwaS5zb3VuZGNsb3VkLmNvbS90cmFja3MvJHtpZH1gICsgV0lER0VUX1BBUkFNUyk7XHJcbiAgICAgICAgICAgICAgICAvLyBVcGRhdGUgdGhlIHBsYXllclxyXG4gICAgICAgICAgICAgICAgdGhpcy5iaW5kV2lkZ2V0RXZlbnRzKHRoaXMuY3VyUGxheWVyKTsgLy8gQmluZCBldmVudCBoYW5kbGVycyBmb3Igd2lkZ2V0LlxyXG4gICAgICAgICAgICAgICAgdGhpcy50b2dnbGVQbGF5KCk7XHJcbiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHRoaXMubG9hZFdpZGdldFNvbmcodGhpcy5jdXJQbGF5ZXIpLCAxMDAwKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBBdHRlbXB0cyB0byBsb2FkIGluZm9ybWF0aW9uIGFzc29jaWF0ZWQgdG8gdGhlIHdpZGdldCB0byBsb2NhbCB2YXJzIGFuZCBkaXNwbGF5cyB0aGVtXHJcbiAgICAgKiBAcGFyYW0ge1NvdW5kQ2xvdWRXaWRnZXR9IHdpZGdldCAtIHdpZGdldCBsb2FkZWQgYnkgQVBJXHJcbiAgICAgKi9cclxuICAgIGxvYWRXaWRnZXRTb25nKHdpZGdldCkge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIFV0aWxzLmxvZygnbG9hZHdpZGdldHNvbmcgY2FsbGVkJyk7XHJcbiAgICAgICAgICAgIHRoaXMud2F2ZWZvcm0gPSBudWxsOyAvLyBSZXNldCB0aGUgcmVmZXJlbmNlXHJcbiAgICAgICAgICAgIHdpZGdldC5nZXRDdXJyZW50U291bmQoKHNvbmcpID0+IHtcclxuICAgICAgICAgICAgICAgIC8vVXRpbHMubG9nKHNvbmcpO1xyXG4gICAgICAgICAgICAgICAgbGV0IHJuZEltZyA9IFV0aWxzLmZldGNoUmFuZG9tSW1hZ2UoKTtcclxuICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlU29uZ0luZm8oc29uZyk7XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gU2V0IHRoZSB2b2x1bWUgKHBsYXllciBhbHdheXMgcmVzZXRzIHRvIDEwMCBhZ2FpbilcclxuICAgICAgICAgICAgICAgIHRoaXMuc2V0Vm9sdW1lKFNldHRpbmdzLmdldFByZWYoJ3BsYXllclZvbHVtZScpKTtcclxuXHJcbiAgICAgICAgICAgICAgICBsZXQgZm91bmQgPSBmYWxzZTsgLy8gQm9vbGVhbiB0byBzZWUgaWYgdGhlIHNvbmcgZXhpc3RzXHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5oaXN0b3J5Lmxlbmd0aCA+IDAgfHwgdGhpcy5xdWV1ZS5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IHNvbmdMaXN0ID0gdGhpcy5oaXN0b3J5LmNvbmNhdCh0aGlzLnF1ZXVlKTsgLy8gVXNlIHRoaXMgdG8gcHJldmVudCBhZGRpbmcgYW55IGR1cGxpY2F0ZXNcclxuICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNvbmdMaXN0Lmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzb25nTGlzdFtpXS50cmFjay5pZCA9PT0gc29uZy5pZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm91bmQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFmb3VuZCkgeyAvLyBBcHBlbmQgdGhlIHNvbmcgaWYgbm90IGZvdW5kXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaGlzdG9yeS5wdXNoKHtpZDogc29uZy5pZCwgdHJhY2s6IHNvbmd9KTsgLy8gUHVzaCB0aGUgdHJhY2sgc28gaXQgY2FuIGJlIHJlcGxheWVkIGZyb20gaGlzdG9yeS4gXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBoID0gbmV3IEhpc3RJdGVtKChzb25nLmFydHdvcmtfdXJsID09PSBudWxsID8gcm5kSW1nIDogc29uZy5hcnR3b3JrX3VybCksIHNvbmcsIHRoaXMsIFwiamF2YXNjcmlwdDphbGVydCgnRG93bmxvYWQgbGluayB1bmF2YWlsYWJsZScpO1wiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5oaXN0Q29udGFpbmVyLmFwcGVuZENoaWxkKGgucmVuZGVyKCkpOyAvLyBBcHBlbmQgdG8gaGlzdG9yeVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgJCgnLmFjdGlvbi1iYXItaXRlbScpLmNsaWNrKChlKSA9PiB7IC8vIFN0b3AgYnV0dG9uIGNsaWNrcyBmcm9tIHRyaWdnZXJpbmcgcGxheWluZyB0aGUgc29uZ1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmhpc3RvcnkucHVzaCh7aWQ6IHNvbmcuaWQsIHRyYWNrOiBzb25nfSk7IC8vIFB1c2ggdGhlIHRyYWNrIHNvIGl0IGNhbiBiZSByZXBsYXllZCBmcm9tIGhpc3RvcnkuIFxyXG4gICAgICAgICAgICAgICAgICAgIGxldCBoID0gbmV3IEhpc3RJdGVtKChzb25nLmFydHdvcmtfdXJsID09PSBudWxsID8gcm5kSW1nIDogc29uZy5hcnR3b3JrX3VybCksIHNvbmcsIHRoaXMsIFwiamF2YXNjcmlwdDphbGVydCgnRG93bmxvYWQgbGluayB1bmF2YWlsYWJsZScpO1wiKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmhpc3RDb250YWluZXIuYXBwZW5kQ2hpbGQoaC5yZW5kZXIoKSk7IC8vIEFwcGVuZCB0byBoaXN0b3J5XHJcbiAgICAgICAgICAgICAgICAgICAgJCgnLmFjdGlvbi1iYXItaXRlbScpLmNsaWNrKChlKSA9PiB7IC8vIFN0b3AgYnV0dG9uIGNsaWNrcyBmcm9tIHRyaWdnZXJpbmcgcGxheWluZyB0aGUgc29uZ1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHRoaXMuaGFzQmVlbkZldGNoZWQgPSBmYWxzZTsgLy8gUmVzZXRcclxuXHJcbiAgICAgICAgICAgICAgICBVdGlscy5sb2coJ2dldGN1cnJlbnRzb3VuZCBkb25lJyk7XHJcbiAgICAgICAgICAgIH0sIChlcnIpID0+IHtcclxuICAgICAgICAgICAgICAgIFV0aWxzLmxvZyhlcnIubWVzc2FnZSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgLy8gVXBkYXRlIHRoZSBwbGF5IHN0YXRlXHJcbiAgICAgICAgICAgIHRoaXMudG9nZ2xlUGxheVN0YXRlKHRydWUpO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfSBjYXRjaCAoZXgpIHtcclxuICAgICAgICAgICAgVXRpbHMubG9nKGV4Lm1lc3NhZ2UpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICB1cGRhdGVTb25nSW5mbyhzb25nKSB7XHJcbiAgICAgICAgVXRpbHMubG9nKCdnZXRjdXJyZW50c291bmQgc3RhcnQnKTtcclxuICAgICAgICAvL2lmICggL0FuZHJvaWR8d2ViT1N8aVBob25lfGlQYWR8aVBvZHxCbGFja0JlcnJ5fElFTW9iaWxlfE9wZXJhIE1pbmkvaS50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpKSB7IC8vIEF0dGVtcHQgdG8gZml4IG9uIG1vYmlsZSBkZXZpY2VzXHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBTb3JyeSBjYW5ub3QgYXV0byBwbGF5IG9uIG1vYmlsZSA9XyhcclxuICAgICAgICAgICAgLy8gaHR0cHM6Ly9zdGFja292ZXJmbG93LmNvbS9xdWVzdGlvbnMvMjYwNjYwNjIvYXV0b3BsYXktaHRtbDUtYXVkaW8tcGxheWVyLW9uLW1vYmlsZS1icm93c2Vyc1xyXG4gICAgICAgICAgICAvLyBOZWVkIHRvIHVzZSB0cmljay5cclxuICAgICAgICAgICAgLy8gd2lkZ2V0LnBsYXkoKTtcclxuICAgICAgICAgICAgLy8gc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICAgIC8vICAgICAgICAgJCgnI3BsYXktYnRuJykudHJpZ2dlcignY2xpY2snKTsgLy8gQ2Fubm90IGZpeCBhdXRvcGxheSBpc3N1ZSwgYnV0IG5vdyB1c2VycyBjYW4gcGxheSB0aGUgdHJhY2sgd2l0aCAxIHRhcCBvZiB0aGUgcGxheSBidXR0b24gaW5zdGVhZCBvIHNldmVyYWwgKGJ1ZyBmaXgpXHJcbiAgICAgICAgICAgIC8vICAgICAgICAgVXRpbHMubG9nKCd0ZXN0IHBsYXknKVxyXG4gICAgICAgICAgICAvLyAgICAgfSwgMjAwMCk7XHJcbiAgICAgICAgICAgIC8vIHRoaXMudG9nZ2xlUGxheVN0YXRlKHRydWUpO1xyXG4gICAgICAgICAgICAvL3RoaXMuY3VyUGxheWVyLnBsYXkoKTsgLy8gRXh0cmEgY2FsbCBmb3IgZm9yY2luZyBhdXRvIHBsYXlpbmcgaW4gbW9iaWxlXHJcblxyXG4gICAgICAgICAgICAvLyBBbmRyb2lkIGFwcCB3b3JrYXJvdW5kIGh0dHBzOi8vZGV2ZWxvcGVyLmFuZHJvaWQuY29tL3JlZmVyZW5jZS9hbmRyb2lkL3dlYmtpdC9XZWJTZXR0aW5ncy5odG1sXHJcbiAgICAgICAgLy99XHJcbiAgICAgICAgdGhpcy5jdXJQbGF5ZXIucGxheSgpOyAvLyBQbGF5IG5vcm1hbGx5IG9uIG5vbiBtb2JpbGVcclxuICAgICAgICB0aGlzLnRvZ2dsZVBsYXlTdGF0ZSh0cnVlKTtcclxuXHJcbiAgICAgICAgdGhpcy5jdXJUcmFjayA9IHNvbmc7XHJcblxyXG4gICAgICAgIHRoaXMuaXNQbGF5aW5nID0gdHJ1ZTtcclxuICAgICAgICBsZXQgcm5kSW1nID0gVXRpbHMuZmV0Y2hSYW5kb21JbWFnZSgpO1xyXG4gICAgICAgIHRoaXMud2lkZ2V0VHJhY2suY292ZXIgPSBzb25nLmFydHdvcmtfdXJsO1xyXG4gICAgICAgIHRoaXMud2lkZ2V0VHJhY2sudGl0bGUgPSBzb25nLnRpdGxlO1xyXG4gICAgICAgIHRoaXMud2lkZ2V0VHJhY2suaWQgPSBzb25nLmlkO1xyXG4gICAgICAgIHRoaXMud2lkZ2V0VHJhY2suYXJ0aXN0ID0gc29uZy51c2VyLnVzZXJuYW1lIHx8ICdOL0EnOyAvLyBTb21lIHRyYWNrcyBkb24ndCBoYXZlIGEgdXNlcm5tZSBhc3NvY2lhdGVkXHJcbiAgICAgICAgdGhpcy53aWRnZXRUcmFjay5wZXJtYWxpbmtfdXJsID0gc29uZy5wZXJtYWxpbmtfdXJsO1xyXG4gICAgICAgIHRoaXMud2lkZ2V0VHJhY2suZGVzY3JpcHRpb24gPSBzb25nLmRlc2NyaXB0aW9uIHx8ICdOL0EnO1xyXG4gICAgICAgIHRoaXMud2lkZ2V0VHJhY2suY3JlYXRlZF9hdCA9IHNvbmcuY3JlYXRlZF9hdDtcclxuICAgICAgICB0aGlzLndpZGdldFRyYWNrLmR1cmF0aW9uID0gc29uZy5kdXJhdGlvbiB8fCAnTi9BJztcclxuICAgICAgICB0aGlzLndpZGdldFRyYWNrLmN1cnJlbnRQb3NpdGlvbiA9IDA7XHJcblxyXG4gICAgICAgIGRvY3VtZW50LnRpdGxlID0gYFxcdTI1QjYgICBOaW1idXMgLSAke3RoaXMud2lkZ2V0VHJhY2sudGl0bGV9YDtcclxuXHJcbiAgICAgICAgLy8gQ3JlYXRlIHRhZyBsaXN0XHJcbiAgICAgICAgbGV0IHRhZ0J0bnMgPSBgYDtcclxuICAgICAgICBsZXQgdGFnQ29sbGVjdGlvbiA9IHNvbmcudGFnX2xpc3Q7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gR2V0IHRhZ3MgdGhhdCBhcmUgaW5zaWRlIHF1b3RlcyBhbHJlYWR5ICh0cmVhdCBtdWx0aXBsZSB3b3JkcyBhcyAxIHRhZylcclxuICAgICAgICBsZXQgcXVvdGVkVGFncyA9IHNvbmcudGFnX2xpc3QubWF0Y2goLyhbXCInXSkoPzooPz0oXFxcXD8pKVxcMi4pKj9cXDEvZyk7XHJcblxyXG4gICAgICAgIC8vIENsZWFuIHRoZSBvcmlnaW5hbCBsaXN0XHJcbiAgICAgICAgdGFnQ29sbGVjdGlvbiA9IHRhZ0NvbGxlY3Rpb24ucmVwbGFjZSgvKFtcIiddKSg/Oig/PShcXFxcPykpXFwyLikqP1xcMS9nLCAnJyk7IC8vIFJlbW92ZSBhbGwgZG91YmxlIHF1b3RlZCBlbnRyaWVzXHJcbiAgICAgICAgdGFnQ29sbGVjdGlvbiA9IHRhZ0NvbGxlY3Rpb24uc3BsaXQoJyAnKTtcclxuICAgICAgICB0YWdDb2xsZWN0aW9uID0gdGFnQ29sbGVjdGlvbi5jb25jYXQocXVvdGVkVGFncyk7XHJcblxyXG4gICAgICAgIGlmIChzb25nLnRhZ19saXN0ICE9PSAnJykge1xyXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRhZ0NvbGxlY3Rpb24ubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIGxldCB0YWdOYW1lID0gdGFnQ29sbGVjdGlvbltpXTtcclxuICAgICAgICAgICAgICAgIGlmICh0YWdOYW1lICE9PSAnJyAmJiB0YWdOYW1lICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGFnTmFtZSA9IHRhZ05hbWUucmVwbGFjZSgvXFxcIi9nLCAnJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGFnQnRucyArPSBgPGEgaHJlZj1cImh0dHBzOi8vc291bmRjbG91ZC5jb20vdGFncy8ke3RhZ05hbWV9XCIgdGFyZ2V0PVwiX2JsYW5rXCI+PGJ1dHRvbiBjbGFzcz1cImJ0bi10cmFuc3BhcmVudFwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAjJHt0YWdOYW1lfVxyXG4gICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPjwvYT5cclxuICAgICAgICAgICAgICAgICAgICBgO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLm1haW5QbGF5ZXIuaW5uZXJIVE1MID0gU29uZ0luZm8oKHNvbmcuYXJ0d29ya191cmwgPT09IG51bGwgPyBzb25nLnVzZXIuYXZhdGFyX3VybCA6IHNvbmcuYXJ0d29ya191cmwucmVwbGFjZSgnbGFyZ2UnLCAndDUwMHg1MDAnKSksIHNvbmcsIHRhZ0J0bnMsIFwiamF2YXNjcmlwdDphbGVydCgnUHVyY2hhc2UgbGluayB1bmF2YWlsYWJsZScpO1wiKTtcclxuICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYmFja2dyb3VuZCcpLnN0eWxlLmJhY2tncm91bmRJbWFnZSA9ICd1cmwoJyArIChzb25nLmFydHdvcmtfdXJsID09PSBudWxsID8gcm5kSW1nIDogc29uZy5hcnR3b3JrX3VybC5yZXBsYWNlKCdsYXJnZScsICd0NTAweDUwMCcpKSArICcpJztcclxuXHJcbiAgICAgICAgLy8gQWRkIGxpc3RlbmVyIGZvciBmbGlwQ29udGFpbmVyXHJcbiAgICAgICAgdGhpcy5mbGlwQ29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZsaXBDb250YWluZXInKTtcclxuICAgICAgICB0aGlzLmZsaXBDb250YWluZXIub25jbGljayA9IChlKSA9PiB7XHJcbiAgICAgICAgICAgICQoJyNmbGlwQ29udGFpbmVyJykudG9nZ2xlQ2xhc3MoJ2ZsaXBwZWQnKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMudm9sdW1lU2xpZGVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3ZvbHVtZVNsaWRlcicpO1xyXG5cclxuICAgICAgICB0aGlzLnZvbHVtZVNsaWRlci5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0Vm9sdW1lKHRoaXMudm9sdW1lU2xpZGVyLnZhbHVlKTtcclxuICAgICAgICB9LCBmYWxzZSk7XHJcblxyXG4gICAgICAgIC8vIEFzeW5jIG1ldGhvZCB0byBidWlsZCB3YXZlZm9ybVxyXG4gICAgICAgIChhc3luYyBmdW5jdGlvbigpIHsgLy8gQ2hhbmdlZCBzeW50YXggdG8gZml4IGlzc3VlIG9uIFNhZmFyaVxyXG4gICAgICAgICAgICBsZXQgcmVxID0gbmV3IFJlcXVlc3QoKTsgLy8gQ29uc3RydWN0IGl0XHJcbiAgICAgICAgICAgIGxldCBkYXRhID0gYXdhaXQgcmVxLmdldEpTT04oc29uZy53YXZlZm9ybV91cmwpO1xyXG4gICAgICAgICAgICBVdGlscy5sb2coc29uZy53YXZlZm9ybV91cmwpO1xyXG5cclxuICAgICAgICAgICAgLy8gRHJhdyB0aGUgd2F2ZWZvcm1cclxuICAgICAgICAgICAgY29uc3Qgd2F2ZUZvcm1Db250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcud2F2ZWZvcm0nKTtcclxuICAgICAgICAgICAgaWYgKCF0aGlzLndhdmVmb3JtKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLndhdmVmb3JtID0gbmV3IFdhdmVGb3JtKHtcclxuICAgICAgICAgICAgICAgIGNvbnRhaW5lcjogd2F2ZUZvcm1Db250YWluZXIsXHJcbiAgICAgICAgICAgICAgICBhdWRpbzogdGhpcy5jdXJQbGF5ZXIsXHJcbiAgICAgICAgICAgICAgICBkdXJhdGlvbjogc29uZy5kdXJhdGlvbixcclxuICAgICAgICAgICAgICAgIGRhdGE6IGRhdGEuc2FtcGxlcyxcclxuICAgICAgICAgICAgICAgIHBlYWtXaWR0aDogMixcclxuICAgICAgICAgICAgICAgIHBlYWtTcGFjZTogMSxcclxuICAgICAgICAgICAgICAgIHJlc3BvbnNpdmU6IHRydWUsXHJcbiAgICAgICAgICAgICAgICBtb3VzZU92ZXJFdmVudHM6IHRydWUsXHJcbiAgICAgICAgICAgICAgICBtb3VzZUNsaWNrRXZlbnRzOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgY29sb3I6IHtcclxuICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kOiBcInJnYmEoMTQwLCAxNDAsIDE0MCwgMC43KVwiLFxyXG4gICAgICAgICAgICAgICAgICAgIGZvb3RlcjogXCJyZ2JhKDkwLCA5MCwgOTAsIDAuNilcIixcclxuICAgICAgICAgICAgICAgICAgICBmb290ZXJQbGF5YmFjazogXCIjNWQxODM1XCIsXHJcbiAgICAgICAgICAgICAgICAgICAgaG92ZXJHcmFkaWVudDoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmcm9tOiBcIiNkOTFlNTNcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgdG86IFwiI2Q5MWU1M1wiXHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICBwbGF5YmFja0dyYWRpZW50OiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZyb206IFwiI2Q5MWU1M1wiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0bzogXCIjZDkxZTUzXCJcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIGhvdmVyUGxheWJhY2tHcmFkaWVudDoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmcm9tOiBcIiNmZjIxNjBcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgdG86IFwiI2ZmMjE2MFwiXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBhd2FpdCB3YXZlZm9ybS51cGRhdGVXYXZlZm9ybURhdGEoZGF0YS5zYW1wbGVzKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgfSkuYmluZCh0aGlzKSgpO1xyXG5cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFRoZSBzdGFydGluZyBwb2ludCBvZiB0aGUgYXBwbGljYXRpb24gY2FsbGVkIGJ5IGFwcC5qcy4gVGhpcyBpbml0YWxpemVzIHRoZSBTb3VuZENsb3VkIEFQSS5cclxuICAgICAqL1xyXG4gICAgc3RhcnQoKSB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgU0MuaW5pdGlhbGl6ZSh7XHJcbiAgICAgICAgICAgICAgICBjbGllbnRfaWQ6IGNvbnN0cy5jbGllbnRfaWRcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICBVdGlscy5sb2coJ0Vycm9yIGluaXRpYWxpemluZyBTb3VuZENsb3VkIEFQSS4gU3RhY2sgdHJhY2U6ICcgKyBlLnRvU3RyaW5nKCkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBVdGlscy5sb2coJ1NvdW5kQ2xvdWQgQVBJIGluaXRhbGl6ZWQhJyk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBCaW5kIGV2ZW50IGhhbmRsZXJzIHRvIHRoZSB3aWRnZXRcclxuICAgICAqIEBwYXJhbSB7U291bmRDbG91ZFdpZGdldH0gd2lkZ2V0IC0gd2lkZ2V0IGxvYWRlZCBmcm9tIEFQSVxyXG4gICAgICovXHJcbiAgICBiaW5kV2lkZ2V0RXZlbnRzKHdpZGdldCkge1xyXG4gICAgICAgIHRoaXMuY3VyUGxheWVyID0gd2lkZ2V0O1xyXG4gICAgICAgIHdpZGdldC5iaW5kKFNDLldpZGdldC5FdmVudHMuUkVBRFksIChlKSA9PiB7XHJcblxyXG4gICAgICAgICAgICAvLyBCaW5kIHdoZW4gdGhlIHNvbmcgaXMgcGxheWluZ1xyXG4gICAgICAgICAgICB3aWRnZXQuYmluZChTQy5XaWRnZXQuRXZlbnRzLlBMQVlfUFJPR1JFU1MsIChlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmN1clBvc2l0aW9uID0gZS5jdXJyZW50UG9zaXRpb247XHJcbiAgICAgICAgICAgICAgICBsZXQgY3VyVGltZVN0ciA9IFV0aWxzLmNvbnZlcnRNaWxsaXNlY29uZHNUb0RpZ2l0YWxDbG9jayhlLmN1cnJlbnRQb3NpdGlvbikuY2xvY2s7XHJcbiAgICAgICAgICAgICAgICBsZXQgdG90YWxUaW1lU3RyID0gVXRpbHMuY29udmVydE1pbGxpc2Vjb25kc1RvRGlnaXRhbENsb2NrKHRoaXMud2lkZ2V0VHJhY2suZHVyYXRpb24pLmNsb2NrO1xyXG4gICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2N1clRpbWUnKS5pbm5lclRleHQgPSBgJHtjdXJUaW1lU3RyfSAvICR7dG90YWxUaW1lU3RyfWA7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIC8vIEZvciBzb21lIHJlYXNvbiBGSU5JU0ggZXZlbnQgbm8gbG9uZ2VyIGZpcmVzIHdoZW4gY2hhbmdpbmcgc29uZ3MgaW4gcGxheWxpc3QsIG1hbnVhbCBvdmVycmlkZSBoZXJlXHJcbiAgICAgICAgICAgICAgICBpZiAoZS5jdXJyZW50UG9zaXRpb24gPT09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5pc1BsYXlsaXN0ICYmICF0aGlzLmlzUmVwZWF0aW5nICYmICF0aGlzLnNlZWtpbmdGb3J3YXJkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubG9hZFdpZGdldFNvbmcodGhpcy5jdXJQbGF5ZXIpOyAvLyBVcGRhdGUgdHJhY2sgaW5mbyB0byB0aGUgbmV4dCBzb25nIGluIHRoZSBwbGF5bGlzdFxyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5pc1BsYXlsaXN0ICYmIHRoaXMuaXNSZXBlYXRpbmcgJiYgIXRoaXMuc2Vla2luZ0ZvcndhcmQpIHsgLy8gUmVwbGF5IHNldFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmN1clBsYXllci5wYXVzZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY3VyUGxheWVyLnByZXYoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubG9hZFdpZGdldFNvbmcodGhpcy5jdXJQbGF5ZXIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9LCA1MDApO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5zZWVraW5nRm9yd2FyZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmN1clBsYXllci5zZWVrVG8oMSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge3RoaXMuc2Vla2luZ0ZvcndhcmQgPSBmYWxzZSwgNTAwfSk7IC8vIFByZXZlbnQgdGhpcyBldmVudCBmcm9tIGZpcmluZyBtb3JlIHRoYW4gb25jZS5cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgLy8gQmluZCB3aGVuIHRoZSBzb25nIGhhcyBmaW5pc2hlZFxyXG4gICAgICAgICAgICB3aWRnZXQuYmluZChTQy5XaWRnZXQuRXZlbnRzLkZJTklTSCwgKGUpID0+IHtcclxuICAgICAgICAgICAgICAgIC8vIFdoZW4gdGhlIHNvbmcgZmluaXNoZXMsIHdlIG5lZWQgdG8gZmluZCBhIG5ldyBzb25nIHRvIHBsYXkuXHJcbiAgICAgICAgICAgICAgICBVdGlscy5sb2coJ2ZpbmlzaGVkJyk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmlzUGxheWluZyA9IGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgICAgIC8vIENoZWNrIGlmIHVzZXIgaXMgcGxheWluZyBhIHBsYXlsaXN0XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5pc1BsYXlsaXN0ICYmICF0aGlzLmlzUmVwZWF0aW5nKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IG9sZFNvbmdJRCA9IHRoaXMud2lkZ2V0VHJhY2suaWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50b2dnbGVQbGF5KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5sb2FkV2lkZ2V0U29uZyh0aGlzLmN1clBsYXllcik7IC8vIFVwZGF0ZSB0cmFjayBpbmZvIHRvIHRoZSBuZXh0IHNvbmcgaW4gdGhlIHBsYXlsaXN0XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5pc1BsYXlpbmcgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ2hlY2sgaWYgd2UgaGF2ZSByZWFjaGVkIHRoZSBlbmQgb2YgdGhlIHBsYXlsaXN0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvbGRTb25nSUQgPT09IHRoaXMud2lkZ2V0VHJhY2suaWQpIHsgLy8gSWYgdGhlIGxhc3Qgc29uZyB3ZSBwbGF5ZWQgaGFzIHRoZSBzYW1lIElEIGFzIHRoZSBuZXcgb25lLCBmZXRjaCBhIG5ldyBzb25nLiAoU291bmRDbG91ZCBlbmRzIHVwIGxvb3BpbmcgdGhlIGxhc3Qgc29uZyBhZ2FpbilcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaXNQbGF5bGlzdCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRDdXJJbmRleCA9IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNldFRyYWNrQ291bnQgPSAwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5mZXRjaE5leHQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVzdGFydFNvbmcoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudG9nZ2xlUGxheSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jdXJQbGF5ZXIucGxheSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSwgMjAwKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gQ2hlY2sgaWYgcmVwZWF0IGlzIG9uIGZpcnN0LiBUT0RPOiBNYWtlIGl0IHdvcmsgd2l0aCBwbGF5bGlzdHNcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmlzUmVwZWF0aW5nKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuaXNQbGF5bGlzdCkgeyAvLyBJZiB3ZSBhcmUgcmVwZWF0aW5nIGluIGEgcGxheWxpc3QsIHdlIG5lZWQgdG8gZ28gYmFjayB0byBwcmV2aW91cyBzb25nIHNpbmNlIHRoZSBBUEkgcHJlbG9hZHMgdGhlIG5leHQgb25lXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVzdGFydFNvbmcoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jdXJQbGF5ZXIucGF1c2UoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jdXJQbGF5ZXIucGF1c2UoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dCh0aGlzLmN1clBsYXllci5wcmV2KCksIDIwMCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBFbHNlIHdlIGNhbiBqdXN0IHJlc3RhcnQgdGhlIHNvbmcgKEFQSSBkb2VzIG5vdCBwcmVsb2FkIHNvbmcpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVzdGFydFNvbmcoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy50b2dnbGVQbGF5KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIC8vIENoZWNrIGlmIHRoZSBxdWV1ZSBpcyBub3QgZW1wdHkgYW5kIHBsYXkgd2hhdGV2ZXIgc29uZyB0aGF0IGlzIG5leHQgaW4gdGhlIHF1ZXVlXHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5xdWV1ZS5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IG5leHRTb25nID0gdGhpcy5xdWV1ZS5wb3AoKTsgLy8gUG9wIHRoZSBuZXh0IHNvbmdcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG5leHRTb25nKSB7IC8vIElmIG5vdCBudWxsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY3VyUGxheWVyLmxvYWQobmV4dFNvbmcudHJhY2sucGVybWFsaW5rX3VybCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gdGhpcy5sb2FkV2lkZ2V0U29uZyh0aGlzLmN1clBsYXllciksIDIwMDApOyAvLyBVcGRhdGUgcGxheWVyIGluZm8sIHNvbmcgd2lsbCBiZSBhZGRlZCB0byBoaXN0b3J5IGhlcmVcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKCF0aGlzLmhhc0JlZW5GZXRjaGVkKSB7IC8vIElmIHdlIGhhdmUgZmV0Y2hlZCBhIHNvbmcgYWxyZWFkeSwgZG8gbm90IGZldGNoIGFub3RoZXIgb25lLlxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZmV0Y2hOZXh0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5oYXNCZWVuRmV0Y2hlZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgLy8gQmluZCBwbGF5IHN0YXRlIGV2ZW50XHJcbiAgICAgICAgICAgIHdpZGdldC5iaW5kKFNDLldpZGdldC5FdmVudHMuUExBWSwgKGUpID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMudG9nZ2xlUGxheVN0YXRlKHRydWUpO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIC8vIEJpbmQgcGF1c2Ugc3RhdGUgZXZlbnRcclxuICAgICAgICAgICAgd2lkZ2V0LmJpbmQoU0MuV2lkZ2V0LkV2ZW50cy5QQVVTRSwgKGUpID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMudG9nZ2xlUGxheVN0YXRlKGZhbHNlKTtcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAvLyBUaHJvdyBlcnJvciBpbiBjYXNlIHVzZXIgZW50ZXJzIGludmFsaWQgVVJMXHJcbiAgICAgICAgICAgIHdpZGdldC5iaW5kKFNDLldpZGdldC5FdmVudHMuRVJST1IsIChlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBhbGVydCgnRXJyb3IsIHVuYWJsZSB0byBsb2FkIHJlc291cmNlLicpO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBUaGlzIGZ1bmN0aW9uIGlzIGRlc2lnbmVkIHRvIGdldCBhIHJhbmRvbSB0cmFjayBmcm9tIFNvdW5kQ2xvdWRcclxuICAgICAqL1xyXG4gICAgZ2V0UmFuZG9tVHJhY2soKSB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgLy8gQ2hvb3NlIHRvIHVzZSBvbGQgdHJhY2sgaWRzIG9yIG5ldyB0cmFjayBpZHNcclxuICAgICAgICAgICAgbGV0IGNob29zZUlkID0gKE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDEwKSk7XHJcbiAgICAgICAgICAgIGxldCB0cmFja0lkID0gMDtcclxuXHJcbiAgICAgICAgICAgIC8vIEdlbmVyYXRlIHJhbmRvbSBzb25nIGlkLiBHaXZlIHNsaWdodCBwcmVmZXJlbmNlIHRvIG5ld2VyIHRyYWNrcyBcclxuICAgICAgICAgICAgaWYgKGNob29zZUlkID4gNCkge1xyXG4gICAgICAgICAgICAgICAgdHJhY2tJZCA9IE1hdGguZmxvb3IoKE1hdGgucmFuZG9tKCkgKiBSQU5EX0NPVU5UXzMpICsgT0ZGU0VUXzMpO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGNob29zZUlkID4gMikge1xyXG4gICAgICAgICAgICAgICAgdHJhY2tJZCA9IE1hdGguZmxvb3IoKE1hdGgucmFuZG9tKCkgKiBSQU5EX0NPVU5UXzIpICsgT0ZGU0VUXzIpO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGNob29zZUlkID4gMSkge1xyXG4gICAgICAgICAgICAgICAgdHJhY2tJZCA9IE1hdGguZmxvb3IoKE1hdGgucmFuZG9tKCkgKiBSQU5EX0NPVU5UXzEpICsgT0ZGU0VUXzEpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdHJhY2tJZCA9IE1hdGguZmxvb3IoKE1hdGgucmFuZG9tKCkgKiBSQU5EX0NPVU5UKSArIE9GRlNFVCk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIFV0aWxzLmxvZygnaW4gaWQnKTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiB0cmFja0lkO1xyXG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgVXRpbHMubG9nKCdnZXRSYW5kb21UcmFjaygpIC0gJyArIGUudG9TdHJpbmcoKSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogRXh0cmFjdHMgYWRkcmVzcyBwYXJhbXRlcnMgYnkgbmFtZSBhbmQgbG9hZHMgdGhlIGFwcHJvcHJpYXRlIGNvbnRlbnQuXHJcbiAgICAgKiBcclxuICAgICAqIFxyXG4gICAgICogQG1lbWJlcm9mIFBsYXllclxyXG4gICAgICovXHJcbiAgICBjaGVja1BhcmFtc0FuZEZldGNoKCkge1xyXG4gICAgICAgIC8vIEZldGNoIHBhcmFtIHZhbHVlcyBpZiBwcmVzZW50XHJcbiAgICAgICAgbGV0IGlkID0gdGhpcy5nZXRVUkxQYXJhbXNCeU5hbWUoJ2lkJywgd2luZG93LmxvY2F0aW9uLmhyZWYpO1xyXG4gICAgICAgIGxldCB1cmwgPSB0aGlzLmdldFVSTFBhcmFtc0J5TmFtZSgndXJsJywgd2luZG93LmxvY2F0aW9uLmhyZWYpO1xyXG5cclxuICAgICAgICAvLyBEbyBub3QgZmV0Y2ggYSByYW5kb20gc29uZyBpZiBhbiBpZCB3YXMgYWxyZWFkeSBwcm92aWRlZFxyXG4gICAgICAgIGlmIChpZCkgLy8gaWQgdGFrZXMgdGFrZXMgcHJlY2VkZW5jZVxyXG4gICAgICAgICAgICB0aGlzLnN0cmVhbVNvbmcoaWQpO1xyXG4gICAgICAgIGVsc2UgaWYgKHVybClcclxuICAgICAgICAgICAgdGhpcy5jdXJQbGF5ZXIubG9hZCh1cmwpOyAvLyBMb2FkIHRoZSBzb25nIGJ5IHVybCAoV2lkZ2V0IEFQSSB0YWtlcyBjYXJlIG9mIHRoZSByZXN0KVxyXG4gICAgICAgIGVsc2VcclxuICAgICAgICAgICAgdGhpcy5mZXRjaE5leHQoKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFVwZGF0ZSB0aGUgVUkgY29udHJvbHMgZm9yIHdoZW4gdGhlIHNvbmcgaXMgcGxheWluZ1xyXG4gICAgICogQHBhcmFtIHtib29sZWFufSBwbGF5aW5nIC0gaWYgdGhlIHNvbmcgaXMgcGxheWluZyBvciBub3RcclxuICAgICAqL1xyXG4gICAgdG9nZ2xlUGxheVN0YXRlKHBsYXlpbmcpIHtcclxuICAgICAgICBpZiAocGxheWluZykge1xyXG4gICAgICAgICAgICB0aGlzLnBsYXlCdG4uaW5uZXJIVE1MID0gJzxpIGNsYXNzPVwiZmEgZmEtcGF1c2VcIiBhcmlhLWhpZGRlbj1cInRydWVcIj48L2k+JztcclxuICAgICAgICAgICAgZG9jdW1lbnQudGl0bGUgPSBgXFx1MjVCNiAgIE5pbWJ1cyAtICR7dGhpcy53aWRnZXRUcmFjay50aXRsZX1gO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMucGxheUJ0bi5pbm5lckhUTUwgPSAnPGkgY2xhc3M9XCJmYSBmYS1wbGF5XCIgYXJpYS1oaWRkZW49XCJ0cnVlXCI+PC9pPic7XHJcbiAgICAgICAgICAgIGRvY3VtZW50LnRpdGxlID0gYFxcdTIzRjggICBOaW1idXMgLSAke3RoaXMud2lkZ2V0VHJhY2sudGl0bGV9YDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8gVVRJTCBmdW5jdGlvbnNcclxuICAgIC8qKlxyXG4gICAgICogU2VlayB0byBuZXh0IHNvbmcgaW4gcXVldWVcclxuICAgICAqL1xyXG4gICAgc2Vla0ZvcndhcmQoKSB7XHJcbiAgICAgICAgLy8gSWYgd2UgYXJlIGluIHBsYXlsaXN0IG1vZGUsIHBsYXkgdGhlIG5leHQgc29uZyBpbiB0aGUgcGxheWxpc3QgYW5kIGRvIG5vdCBmZXRjaCBhIG5ldyBzb25nXHJcbiAgICAgICAgaWYgKHRoaXMuaXNQbGF5bGlzdCkge1xyXG4gICAgICAgICAgICBsZXQgbmV4dFNvbmdJRCA9IHRoaXMud2lkZ2V0VHJhY2suaWQ7XHJcbiAgICAgICAgICAgIHRoaXMuc2Vla2luZ0ZvcndhcmQgPSB0cnVlO1xyXG4gICAgICAgICAgICB0aGlzLnJlc3RhcnRTb25nKCk7XHJcbiAgICAgICAgICAgIHRoaXMuY3VyUGxheWVyLnBhdXNlKCk7XHJcbiAgICAgICAgICAgIHRoaXMuY3VyUGxheWVyLnBhdXNlKCk7IC8vIFdpZGdldCBub3QgcmVhbGx5IHJlc3BvbnNpdmUgd2hlbiB1c2VyIGdvZXMgYmFjayBhbmQgZm9ydGggcXVpY2tseVxyXG4gICAgICAgICAgICBzZXRUaW1lb3V0KHRoaXMuY3VyUGxheWVyLm5leHQoKSwgMjAwKTtcclxuICAgICAgICAgICAgdGhpcy5yZXN0YXJ0U29uZygpOyAvLyBTZWVtcyB3ZWlyZCB0byBjYWxsIHJlc3RhcnRTb25nKCkgc28gbWFueSB0aW1lcywgYnV0IHRoaXMgaXMgdXNlZCB0byByZXNldCB0aGUgc29uZ3MgYW5kIGF2b2lkIHRoZSB3ZWlyZCBidWcgd2hlcmUgdGhlIHBsYXllciBwbGF5cyAyIHNvbmdzIHNpbXVsYXRlbm91c2x5LlxyXG4gICAgICAgICAgICB0aGlzLmN1clBsYXllci5wbGF5KCk7XHJcbiAgICAgICAgICAgIHRoaXMuY3VyUGxheWVyLnBhdXNlKCk7IC8vIFNhbWUgaW50ZXJydXB0ZWQgUHJvbWlzZSBpc3N1ZSBmcm9tIEFQSVxyXG4gICAgICAgICAgICB0aGlzLmN1clBsYXllci5wbGF5KCk7XHJcbiAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5sb2FkV2lkZ2V0U29uZyh0aGlzLmN1clBsYXllcik7XHJcbiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBVdGlscy5sb2codGhpcy53aWRnZXRUcmFjay5pZCArICcgLSAnICsgbmV4dFNvbmdJRCk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMud2lkZ2V0VHJhY2suaWQgPT09IG5leHRTb25nSUQpIHsgLy8gSWYgd2UgaGF2ZSByZWFjaGVkIHRoZSBlbmQgb2YgdGhlIHBsYXlsaXN0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaXNQbGF5bGlzdCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNldEN1ckluZGV4ID0gMDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRUcmFja0NvdW50ID0gMDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5mZXRjaE5leHQoKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9LCAyMDApO1xyXG5cclxuICAgICAgICAgICAgfSwgMjAwKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBsZXQgbmV4dFNvbmcgPSB0aGlzLnF1ZXVlLnBvcCgpOyAvLyBQb3AgdGhlIG5leHQgc29uZ1xyXG5cclxuICAgICAgICAgICAgaWYgKG5leHRTb25nKSB7IC8vIElmIG5vdCBudWxsXHJcbiAgICAgICAgICAgICAgICBpZiAobmV4dFNvbmcudHJhY2sua2luZCA9PT0gJ3BsYXlsaXN0JylcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmlzUGxheWxpc3QgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jdXJQbGF5ZXIubG9hZChuZXh0U29uZy50cmFjay5wZXJtYWxpbmtfdXJsKTtcclxuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gdGhpcy5sb2FkV2lkZ2V0U29uZyh0aGlzLmN1clBsYXllciksIDIwMDApOyAvLyBVcGRhdGUgcGxheWVyIGluZm8sIHdpbGwgYWRkIHNvbmcgdG8gaGlzdG9yeVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmV3aW5kIHRvIHByZXZpb3VzIHNvbmdcclxuICAgICAqL1xyXG4gICAgc2Vla0JhY2soKSB7XHJcbiAgICAgICAgLy8gdGhpcy5pc1BsYXlsaXN0ID0gZmFsc2U7IC8vIEV4aXQgcGxheWxpc3QgbW9kZSBzbyB3ZSBkb24ndCBlbmQgdXAgc3R1Y2sgaW4gYSBsb29wIHdpdGggc29uZ3NcclxuICAgICAgICAvLyBJZiB3ZSBhcmUgaW4gYSBwbGF5bGlzdCwgc2ltcGx5IG1vdmUgYmFjayB0byB0aGUgcHJldmlvdXMgc29uZ1xyXG4gICAgICAgIGlmICh0aGlzLmlzUGxheWxpc3QpIHtcclxuICAgICAgICAgICAgbGV0IGxhc3RTb25nSUQgPSB0aGlzLndpZGdldFRyYWNrLmlkO1xyXG4gICAgICAgICAgICB0aGlzLnJlc3RhcnRTb25nKCk7XHJcbiAgICAgICAgICAgIHRoaXMuY3VyUGxheWVyLnBhdXNlKCk7XHJcbiAgICAgICAgICAgIHRoaXMuY3VyUGxheWVyLnBhdXNlKCk7XHJcbiAgICAgICAgICAgIHNldFRpbWVvdXQodGhpcy5jdXJQbGF5ZXIucHJldigpLCAyMDApOyAvLyBQbGF5ZXIgbm90IGNvb3BlcmF0aW5nIHdpdGggYXN5bmNcclxuICAgICAgICAgICAgdGhpcy5yZXN0YXJ0U29uZygpOyAvLyBTZWVtcyB3ZWlyZCB0byBjYWxsIHJlc3RhcnRTb25nKCkgc28gbWFueSB0aW1lcywgYnV0IHRoaXMgaXMgdXNlZCB0byByZXNldCB0aGUgc29uZ3MgYW5kIGF2b2lkIHRoZSB3ZWlyZCBidWcgd2hlcmUgdGhlIHBsYXllciBwbGF5cyAyIHNvbmdzIHNpbXVsYXRlbm91c2x5LlxyXG4gICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMubG9hZFdpZGdldFNvbmcodGhpcy5jdXJQbGF5ZXIpO1xyXG4gICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgVXRpbHMubG9nKHRoaXMud2lkZ2V0VHJhY2suaWQgKyAnIC0gJyArIGxhc3RTb25nSUQpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLndpZGdldFRyYWNrLmlkID09PSBsYXN0U29uZ0lEKSB7IC8vIElmIHdlIGhhdmUgcmVhY2hlZCB0aGUgYmVnaW5uaW5nIG9mIHRoZSBwbGF5bGlzdFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmxvYWRQcmV2aW91c1NvbmcoKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9LCAyMDApOyAvLyBOZWVkZWQgdG8gYmUgZG9uZSB0byBhbGxvdyB0aW1lIGZvciBhc3luYyByZXF1ZXN0IHRvIGNvbXBsZXRlIGluIGxvYWRXaWRnZXRTb25nKClcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICB9LCAyMDApO1xyXG4gICAgICAgICAgICB0aGlzLmN1clBsYXllci5wbGF5KCk7XHJcbiAgICAgICAgICAgIHRoaXMuY3VyUGxheWVyLnBhdXNlKCk7IC8vIFNhbWUgaW50ZXJydXB0ZWQgUHJvbWlzZSBpc3N1ZSBmcm9tIEFQSVxyXG4gICAgICAgICAgICB0aGlzLmN1clBsYXllci5wbGF5KCk7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgVXRpbHMubG9nKCdub3QgcGxheWxpc3QnKTtcclxuXHJcbiAgICAgICAgdGhpcy5sb2FkUHJldmlvdXNTb25nKCk7XHJcbiAgICB9XHJcblxyXG4gICAgbG9hZFByZXZpb3VzU29uZygpIHtcclxuICAgICAgICB0aGlzLmlzUGxheWxpc3QgPSBmYWxzZTtcclxuXHJcbiAgICAgICAgIC8vIFBvcCBjdXJyZW50IHNvbmcgYW5kIGFkZCBpdCB0byBxdWV1ZSBzbyBpdCBpcyBvdXIgbmV4dCBzb25nXHJcbiAgICAgICAgdGhpcy5xdWV1ZS5wdXNoKHRoaXMuaGlzdG9yeS5wb3AoKSk7XHJcbiAgICAgICAgbGV0IHByZXZTb25nID0gdGhpcy5oaXN0b3J5W3RoaXMuaGlzdG9yeS5sZW5ndGggLSAxXS50cmFjaztcclxuXHJcbiAgICAgICAgaWYgKHByZXZTb25nKSB7IC8vIElmIG5vdCBudWxsXHJcbiAgICAgICAgICAgIHRoaXMuY3VyUGxheWVyLmxvYWQocHJldlNvbmcucGVybWFsaW5rX3VybCk7XHJcbiAgICAgICAgICAgIFV0aWxzLmxvZyhwcmV2U29uZy5wZXJtYWxpbmtfdXJsKTtcclxuICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB0aGlzLmxvYWRXaWRnZXRTb25nKHRoaXMuY3VyUGxheWVyKSwgMjAwMCk7IC8vIFVwZGF0ZSBwbGF5ZXIgaW5mb1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFJlc2V0cyB0aGUgc29uZyBiYWNrIHRvIDBcclxuICAgICAqL1xyXG4gICAgcmVzdGFydFNvbmcoKSB7XHJcbiAgICAgICAgdGhpcy5jdXJQbGF5ZXIuc2Vla1RvKDApO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogSW5jcmVhc2VzIHRoZSB2b2x1bWUgd2l0aCB0aGUgbWF4aW11bSBib3VuZCBiZWluZyAxMDAuXHJcbiAgICAgKiBAcGFyYW0ge2Zsb2F0fSBvZmZzZXQgLSBob3cgbXVjaCB0byBpbmNyZWFzZSB0aGUgdm9sdW1lIGJ5XHJcbiAgICAgKi9cclxuICAgIHZvbHVtZVVwKG9mZnNldCkge1xyXG4gICAgICAgIHRoaXMuY3VyUGxheWVyLmdldFZvbHVtZSgodm9sKSA9PiB7XHJcbiAgICAgICAgICAgIGxldCBuZXdWb2wgPSBNYXRoLm1pbigxMDAsIHZvbCArIG9mZnNldCk7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0Vm9sdW1lKG5ld1ZvbCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBMb3dlcnMgdGhlIHZvbHVtZSBieSBvZmZzZXQgd2l0aCB0aGUgbWluaW11bSBib3VuZCBiZWluZyAwLlxyXG4gICAgICogQHBhcmFtIHtmbG9hdH0gb2Zmc2V0IC0gaG93IG11Y2ggdG8gbG93ZXIgdGhlIHZvbHVtZSBieVxyXG4gICAgICovXHJcbiAgICB2b2x1bWVEb3duKG9mZnNldCkge1xyXG4gICAgICAgIHRoaXMuY3VyUGxheWVyLmdldFZvbHVtZSgodm9sKSA9PiB7XHJcbiAgICAgICAgICAgIGxldCBuZXdWb2wgPSBNYXRoLm1heCgwLCB2b2wgLSBvZmZzZXQpO1xyXG4gICAgICAgICAgICB0aGlzLnNldFZvbHVtZShuZXdWb2wpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogU2V0cyB0aGUgdm9sdW1lIG9mIHRoZSBwbGF5ZXIgd2hpbGUgdXBkYXRpbmcgVUkgY29tcG9uZW50cyBhbmQgdXNlciBzZXR0aW5nLlxyXG4gICAgICogXHJcbiAgICAgKiBAcGFyYW0ge051bWJlcn0gdm9sIC0gdm9sdW1lIGxldmVsXHJcbiAgICAgKiBcclxuICAgICAqIEBtZW1iZXJvZiBQbGF5ZXJcclxuICAgICAqIFxyXG4gICAgICovXHJcbiAgICBzZXRWb2x1bWUodm9sKSB7XHJcbiAgICAgICAgdGhpcy5jdXJQbGF5ZXIuc2V0Vm9sdW1lKHZvbCk7XHJcbiAgICAgICAgdGhpcy52b2x1bWVTbGlkZXIudmFsdWUgPSB2b2w7XHJcbiAgICAgICAgU2V0dGluZ3Muc3RvcmVQcmVmKCdwbGF5ZXJWb2x1bWUnLCB2b2wpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogVXBkYXRlcyBjb250cm9scyB0byBzaG93IHRoYXQgdGhlIHNvbmcgaXMgaW4gcHJvZ3Jlc3MuXHJcbiAgICAgKi9cclxuICAgIHRvZ2dsZVBsYXkoKSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLmlzUGxheWluZykge1xyXG4gICAgICAgICAgICAvLyBOdWFuY2VkIGJ1dCBhZGRzIHRoYXQgJ2JyZWFrJyBpbiB0aGUgc291bmQgc28geW91IGtub3cgaXQgd2FzIHByZXNzZWQganVzdCBpbiBjYXNlIGlzUGxheWluZyBpcyB0aGUgd3JvbmcgdmFsdWVcclxuICAgICAgICAgICAgdGhpcy5jdXJQbGF5ZXIucGxheSgpOyBcclxuICAgICAgICAgICAgVXRpbHMubG9nKCdpc1BsYXlpbmcgPSB0cnVlJyk7XHJcbiAgICAgICAgICAgIHRoaXMuaXNQbGF5aW5nID0gdHJ1ZTtcclxuICAgICAgICAgICAgLy8gdGhpcy5tYWluUGxheWVyLmlubmVySFRNTCA9IFNvbmdJbmZvKCh0aGlzLmN1clRyYWNrLnRyYWNrLmFydHdvcmtfdXJsID09PSBudWxsID8gJy4uL2ltZy9jZC5wbmcnIDogdGhpcy5jdXJUcmFjay50cmFjay5hcnR3b3JrX3VybC5yZXBsYWNlKCdsYXJnZScsICd0NTAweDUwMCcpKSwgdGhpcy5jdXJUcmFjay50cmFjayk7XHJcbiAgICAgICAgICAgIC8vIFVwZGF0ZSBwbGF5IHN0YXRlXHJcbiAgICAgICAgICAgIHRoaXMudG9nZ2xlUGxheVN0YXRlKHRydWUpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuY3VyUGxheWVyLnBhdXNlKCk7XHJcblxyXG4gICAgICAgICAgICAvLyBVcGRhdGUgcGxheSBzdGF0ZVxyXG4gICAgICAgICAgICB0aGlzLnRvZ2dsZVBsYXlTdGF0ZShmYWxzZSk7XHJcbiAgICAgICAgICAgIHRoaXMuaXNQbGF5aW5nID0gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogRmV0Y2ggdGhlIG5leHQgc29uZyBhbmQgdmVyaWZ5IHRoYXQgdGhlIHNvbmcgZXhpc3RzIChub24gNDA0KS5cclxuICAgICAqL1xyXG4gICAgZmV0Y2hOZXh0KCkge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIFV0aWxzLmxvZygnUXVldWUgbGVuZ3RoIC0gJyArIHRoaXMucXVldWUubGVuZ3RoKTtcclxuICAgICAgICAgICAgaWYgKHRoaXMucXVldWUubGVuZ3RoID4gMCkgeyAvLyBGaXJzdCBjaGVjayBpZiB0aGUgcXVldWUgaXMgbm9uLWVtcHR5XHJcbiAgICAgICAgICAgICAgICBsZXQgbmV4dFNvbmcgPSB0aGlzLnF1ZXVlLnBvcCgpOyAvLyBQb3AgdGhlIG5leHQgc29uZ1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChuZXh0U29uZykgeyAvLyBJZiBub3QgbnVsbFxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChuZXh0U29uZy50cmFjay5raW5kID09PSAncGxheWxpc3QnKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmlzUGxheWxpc3QgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaGlzdG9yeS5wdXNoKHtpZDogbmV4dFNvbmcuaWQsIHRyYWNrOiBuZXh0U29uZ30pOyAvLyBBZGQgaXQgdG8gaGlzdG9yeVxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY3VyUGxheWVyLmxvYWQobmV4dFNvbmcucGVybWFsaW5rX3VybCk7XHJcbiAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB0aGlzLmxvYWRXaWRnZXRTb25nKHRoaXMuY3VyUGxheWVyKSwgMjAwMCk7IC8vIFVwZGF0ZSBwbGF5ZXIgaW5mb1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIHsgLy8gSWYgdGhlIHF1ZXVlIGlzIGVtcHR5LCBmZXRjaCBhIG5ldyBzb25nXHJcbiAgICAgICAgICAgICAgICB0aGlzLmN1clBsYXllci5wYXVzZSgpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yZXN0YXJ0U29uZygpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICBVdGlscy5sb2coJ2ZldGNoTmV4dCcgKyBlLnRvU3RyaW5nKCkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKFNldHRpbmdzLmdldFByZWYoJ3NodWZmbGVNb2RlJykgPT09ICdyZWxhdGVkJyAmJiB0aGlzLmN1clRyYWNrICE9PSBudWxsICYmIHRoaXMucXVldWUubGVuZ3RoIDw9IDApXHJcbiAgICAgICAgICAgIHRoaXMuZ2V0UmVsYXRlZFRyYWNrcyh0aGlzLmN1clRyYWNrLmlkLCA1MCk7XHJcbiAgICAgICAgZWxzZSAgLy8gTWFrZSBzdXJlIGxlbmd0aCBvZiBxdWV1ZSBpcyBlbXB0eSBiZWZvcmUgZmV0Y2hpbmcgYWdhaW5cclxuICAgICAgICAgICAgdGhpcy5sb2FkUmFuZG9tVHJhY2soKTtcclxuICAgICAgICBcclxuICAgIH1cclxuXHJcbiAgICBsb2FkUmFuZG9tVHJhY2soKSB7XHJcbiAgICAgICAgbGV0IGlkID0gdGhpcy5nZXRSYW5kb21UcmFjaygpOyAvLyBXb3JrcyBmb3IgdHJhY2tzIHdpdGggNDAzIGVycm9ycyBpbiBvdGhlciBBUElcclxuXHJcbiAgICAgICAgU0MuZ2V0KCcvdHJhY2tzLycgKyBpZCkudGhlbigodHJhY2spID0+IHsgLy8gQ2hlY2sgaWYgdGhlcmUgYXJlIHJlc3VsdHNcclxuICAgICAgICAgICAgLy8gUmVhbGx5IGp1c3QgZGVzaWduZWQgdG8gY2hlY2sgaWYgdGhlIHNvbmcgYWN0dWFsbHkgZXhpc3RzXHJcbiAgICAgICAgICAgdGhpcy5zdHJlYW1Tb25nKGlkKTtcclxuICAgICAgICB9LCAoZXJyKSA9PiB7XHJcbiAgICAgICAgICAgIFV0aWxzLmxvZyhlcnIuc3RhdHVzKTtcclxuICAgICAgICAgICAgLy8gaWYgKGVyci5zdGF0dXMgPT09IDApIHsgLy8gSW52YWxpZCBBUEkga2V5XHJcbiAgICAgICAgICAgIC8vICAgICBVdGlscy5sb2coJzAvNDAxIFVuYXV0aG9yaXplZC4gUG9zc2libGUgSW52YWxpZCBTb3VuZENsb3VkIGtleScpXHJcbiAgICAgICAgICAgIC8vICAgICB0aHJvdyAnMC80MDEgVW5hdXRob3JpemVkLiBQb3NzaWJsZSBJbnZhbGlkIFNvdW5kQ2xvdWQga2V5J1xyXG4gICAgICAgICAgICAvLyB9XHJcbiAgICAgICAgICAgIGlmIChlcnIuc3RhdHVzID09PSA0MDMpIHsgLy8gUGxheSB0aGUgc29uZyBhbnl3YXkgZXZlbiBpZiB0aGlzIEFQSSByZXF1aWVzdCByZXR1cm5zIGEgZm9yYmlkZGVuIHJlcXVlc3QgKFNvdW5kY2xvdWQgcHJvYmxlbSlcclxuICAgICAgICAgICAgICAgIHRoaXMuc3RyZWFtU29uZyhpZCk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy8gSWYgdGhlcmUgaXMgbm8gc29uZyB3aXRoIHRoZSBhc3NvY2lhdGVkIElELCBmZXRjaCBhIG5ldyBvbmUuXHJcbiAgICAgICAgICAgIFV0aWxzLmxvZygndHJhY2sgZmV0Y2ggZmFpbCcgKyBpZCk7XHJcbiAgICAgICAgICAgIHRoaXMuZmV0Y2hOZXh0KCk7XHJcbiAgICAgICAgICAgIFV0aWxzLmxvZygndHJhY2sgZmV0Y2ggZmFpbCBwb3N0JyArIGlkKTtcclxuICAgICAgICB9KS5jYXRjaCgoZXJyKSA9PiB7XHJcbiAgICAgICAgICAgIFV0aWxzLmxvZyhlcnIuc3RhdHVzKTtcclxuICAgICAgICAgICAgaWYgKGVyci5zdGF0dXMgPT09IDApIHsgLy8gSW52YWxpZCBBUEkga2V5XHJcbiAgICAgICAgICAgICAgICBVdGlscy5sb2coJzAvNDAxIFVuYXV0aG9yaXplZC4gUG9zc2libGUgSW52YWxpZCBTb3VuZENsb3VkIGtleScpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChlcnIuc3RhdHVzID09PSA0MDMpIHsgLy8gUGxheSB0aGUgc29uZyBhbnl3YXkgZXZlbiBpZiB0aGlzIEFQSSByZXF1aWVzdCByZXR1cm5zIGEgZm9yYmlkZGVuIHJlcXVlc3QgKFNvdW5kY2xvdWQgcHJvYmxlbSlcclxuICAgICAgICAgICAgICAgIHRoaXMuc3RyZWFtU29uZyhpZCk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy8gSWYgdGhlcmUgaXMgbm8gc29uZyB3aXRoIHRoZSBhc3NvY2lhdGVkIElELCBmZXRjaCBhIG5ldyBvbmUuXHJcbiAgICAgICAgICAgIHRoaXMuZmV0Y2hOZXh0KCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBTdHJlYW0gdGhlIHNvbmcgd2hlbiBhIHZhbGlkIGlkIGlzIGZvdW5kXHJcbiAgICAgKiBAcGFyYW0ge2ludH0gaWQgLSBob2xkcyB0aGUgc29uZyBpZFxyXG4gICAgICovXHJcbiAgICBzdHJlYW1Tb25nKGlkKSB7XHJcbiAgICAgICAgVXRpbHMubG9nKCd0cmFjayBmZXRjaCBzdWNjZXNzICcgKyBpZCk7XHJcbiAgICAgICAgdGhpcy5jdXJQbGF5ZXIubG9hZChgaHR0cHMlM0EvL2FwaS5zb3VuZGNsb3VkLmNvbS90cmFja3MvJHtpZH1gICsgV0lER0VUX1BBUkFNUyk7XHJcbiAgICAgICAgdGhpcy50b2dnbGVQbGF5U3RhdGUodHJ1ZSk7XHJcbiAgICAgICAgc2V0VGltZW91dCgoKSA9PiB0aGlzLmxvYWRXaWRnZXRTb25nKHRoaXMuY3VyUGxheWVyKSwgMjAwMCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBGaW5kIHRoZSBzb25nIGJhc2VkIG9uIHVzZXIgZW50ZXJlZCBrZXl3b3JkcywgbGlrZSAnSSdtIEZlZWxpbmcgTHVja3knIG9uIEdvb2dsZS5cclxuICAgICAqIFxyXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IHF1ZXJ5IC0gc2VhcmNoIHRlcm1zIHRvIGZpbmQgc29uZ1xyXG4gICAgICogXHJcbiAgICAgKiBAbWVtYmVyb2YgUGxheWVyXHJcbiAgICAgKi9cclxuICAgIGdldFRyYWNrQnlLZXlXb3JkKHF1ZXJ5KSB7XHJcbiAgICAgICAgLy8gR2V0IGEgbGlzdCBvZiBzb25ncyBieSB0aGUgc2VhcmNoIHF1ZXJ5IGFuZCBwbGF5IGZpcnN0IGNob2ljZVxyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIFNDLmdldCgnL3RyYWNrcycsIHtxOiBxdWVyeX0pLnRoZW4oKHRyYWNrcykgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKHRyYWNrcy5sZW5ndGggPiAwKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnNodWZmbGVRdWV1ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgcmFuZEluZGV4ID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogdHJhY2tzLmxlbmd0aCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFBpY2sgYSByYW5kb20gc29uZyB0byBwbGF5XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucXVldWUucHVzaCh7IGlkOiB0cmFja3NbcmFuZEluZGV4XS5pZCwgdHJhY2s6IHRyYWNrc1tyYW5kSW5kZXhdfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFV0aWxzLnNob3dUb2FzdChgQWRkZWQgJHt0cmFja3NbcmFuZEluZGV4XS50aXRsZX0gdG8gdGhlIHF1ZXVlLmApXHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gTG9hZCB0aGUgZmlyc3Qgc29uZ1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnF1ZXVlLnB1c2goeyBpZDogdHJhY2tzWzBdLmlkLCB0cmFjazogdHJhY2tzWzBdfSk7IC8vIFRoZSBcIkknbSBmZWVsaW5nIGx1Y2t5IHBhcnQgb2YgdGhlIHNlYXJjaFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFV0aWxzLnNob3dUb2FzdChgQWRkZWQgJHt0cmFja3NbMF0udGl0bGV9IHRvIHRoZSBxdWV1ZS5gKVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSkuY2F0Y2goKGUpID0+IHsgLy8gVGVzdGluZ1xyXG4gICAgICAgICAgICAgICAgVXRpbHMubG9nKCdnZXRUcmFja0J5S2V5V29yZCAocHJvbWlzZSkgRXJyb3IgLSAnICsgZS5tZXNzYWdlKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICBVdGlscy5sb2coJ2dldFRyYWNrQnlLZXlXb3JkIEVycm9yIC0gJyArIGUubWVzc2FnZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogRmV0Y2hlcyB0cmFja3MgYnkgYSBsaXN0IG9mIHRhZ3MgZnJvbSB0aGUgdXNlciBzZXBhcmF0ZWQgYnkgY29tbWFzLlxyXG4gICAgICogXHJcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gdGFnTGlzdCAtIGEgc3RyaW5nIHdpdGggdGFncyBzZXBhcmF0ZWQgYnkgY29tbWFzXHJcbiAgICAgKiBcclxuICAgICAqIEBtZW1iZXJvZiBQbGF5ZXJcclxuICAgICAqL1xyXG4gICAgZ2V0VHJhY2tzQnlUYWdzKHRhZ0xpc3QpIHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAvLyBDcmVhdGUgb3B0aW9ucyBvYmplY3QgdG8gaG9sZCB3aGF0IHdlIHdhbnQgdG8gc2VhcmNoIGZvclxyXG4gICAgICAgICAgICBsZXQgb3B0aW9ucyA9IHtcclxuICAgICAgICAgICAgICAgIHRhZ3M6IHRhZ0xpc3QsXHJcbiAgICAgICAgICAgICAgICBsaW1pdDogdGhpcy5xdWV1ZU51bVxyXG4gICAgICAgICAgICB9IC8vIFRPRE86IEFsbG93IHRvIG1vZGlmeSBsaW1pdCBsYXRlclxyXG5cclxuICAgICAgICAgICAgU0MuZ2V0KCcvdHJhY2tzJywgb3B0aW9ucykudGhlbigodHJhY2tzKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAodHJhY2tzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICBVdGlscy5sb2codHJhY2tzKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IHRyYWNrQ29sbGVjdGlvbiA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuc2h1ZmZsZVF1ZXVlKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0cmFja0NvbGxlY3Rpb24gPSB0aGlzLnNodWZmbGVUcmFja3ModHJhY2tzKTtcclxuICAgICAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyYWNrQ29sbGVjdGlvbiA9IHRyYWNrcy5yZXZlcnNlKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8vIFF1ZXVlIGFsbCB0cmFja3MgdG8gdGhlIHF1ZXVlIG9mIHRoZSB1c2VyJ3MgcGxheWxpc3QuIE5vdGUgdGhhdCBxdWV1ZSBpcyBhY3R1YWxseSBhY3RpbmcgbGlrZSBhIHN0YWNrIHNpbmNlIHdlIHVzZSBwdXNoKCkgYW5kIHBvcCgpXHJcbiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0cmFja0NvbGxlY3Rpb24ubGVuZ3RoOyBpKyspIHsgLy8gU2tpcCB0aGUgZmlyc3Qgb25lIHNpbmNlIHdlIGFyZSBhbHJlYWR5IHBsYXlpbmcgaXQgYXQgdGhpcyBwb2ludCAobmVlZCB0byBzdWJ0cmFjdCB1cHBlciBib3VuZCBieSAxIHNpbmNlIHdlIHdhbnQgdG8gZXhjbHVkZSB0aGUgZmlyc3QgdHJhY2sgZnJvbSB0aGUgcmV2ZXJzZWQgYXJyYXkpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucXVldWUucHVzaCh7aWQ6IHRyYWNrQ29sbGVjdGlvbltpXS5pZCwgdHJhY2s6IHRyYWNrQ29sbGVjdGlvbltpXX0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBVdGlscy5sb2codHJhY2tzW2ldLnRpdGxlKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8vIC8vIExvYWQgdGhlIHNvbmdcclxuICAgICAgICAgICAgICAgICAgICAvLyB0aGlzLmN1clBsYXllci5sb2FkKHRyYWNrQ29sbGVjdGlvblt0cmFja0NvbGxlY3Rpb24ubGVuZ3RoIC0gMV0ucGVybWFsaW5rX3VybCk7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAvLyBEaXNwbGF5IHRvYXN0IG1lc3NhZ2Ugd2hlbiBkb25lXHJcbiAgICAgICAgICAgICAgICAgICAgVXRpbHMuc2hvd1RvYXN0KGAke3RyYWNrcy5sZW5ndGh9IHRyYWNrcyBhZGRlZCB0byB0aGUgcXVldWUuYCk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIFV0aWxzLnNob3dUb2FzdCgnU2VhcmNoIHJldHVybmVkIG5vIHJlc3VsdHMuIFBsZWFzZSB0cnkgYWdhaW4uJyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgVXRpbHMubG9nKCdnZXRUcmFja3NCeVRhZ3MgRXJyb3IgLSAnICsgZS5tZXNzYWdlKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBTZWFyY2hlcyBmb3IgYSBwbGF5bGlzdCBieSBrZXl3b3JkLlxyXG4gICAgICogXHJcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gcXVlcnkgLSBuYW1lIG9mIHRoZSBwbGF5bGlzdFxyXG4gICAgICogXHJcbiAgICAgKiBAbWVtYmVyb2YgUGxheWVyXHJcbiAgICAgKi9cclxuICAgIGdldFNldEJ5S2V5V29yZChxdWVyeSkge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIFNDLmdldCgnL3BsYXlsaXN0cycsIHtxOiBxdWVyeX0pLnRoZW4oKHNldHMpID0+IHtcclxuICAgICAgICAgICAgICAgIGlmIChzZXRzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5zaHVmZmxlUXVldWUpIHsgLy8gSWYgd2Ugd2FudCB0byBzaHVmZmxlIHRoZSByZXN1bHRzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIExvYWQgdGhlIHNldFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgcmVzSW5kZXggPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAoc2V0cy5sZW5ndGggKyAxKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucXVldWUucHVzaCh7aWQ6IHNldHNbcmVzSW5kZXhdLmlkLCB0cmFjazogc2V0c1tyZXNJbmRleF19KTsgLy8gVGhlIFwiSSdtIGZlZWxpbmcgbHVja3kgcGFydCBvZiB0aGUgc2VhcmNoXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRUcmFja0NvdW50ID0gc2V0c1tyZXNJbmRleF0udHJhY2tfY291bnQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFV0aWxzLnNob3dUb2FzdChgTm93IHBsYXlpbmcgJHtzZXRzW3Jlc0luZGV4XS50aXRsZX0gKCR7dGhpcy5zZXRUcmFja0NvdW50fSBzb25ncylgKVxyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIExvYWQgdGhlIHNldFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnF1ZXVlLnB1c2goe2lkOiBzZXRzWzBdLmlkLCB0cmFjazogc2V0c1swXX0pOyAvLyBUaGUgXCJJJ20gZmVlbGluZyBsdWNreSBwYXJ0IG9mIHRoZSBzZWFyY2hcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNldFRyYWNrQ291bnQgPSBzZXRzWzBdLnRyYWNrX2NvdW50O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBVdGlscy5sb2coc2V0c1swXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFV0aWxzLnNob3dUb2FzdChgUXVldWVkICR7c2V0c1swXS50aXRsZX0gKCR7dGhpcy5zZXRUcmFja0NvdW50fSBzb25ncylgKVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICBVdGlscy5sb2coJ2dldFNldEJ5S2V5V29yZCBFcnJvciAtICcgKyBlLm1lc3NhZ2UpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFNlYXJjaGVzIGZvciB0aGUgZmlyc3QgcXVldWVOdW0gc29uZ3MgYnkgYSB1c2VyLlxyXG4gICAgICogXHJcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gdXNlciAtIHVzZXJuYW1lIG9mIHRoZSB1c2VyXHJcbiAgICAgKiBcclxuICAgICAqIEBtZW1iZXJvZiBQbGF5ZXJcclxuICAgICAqL1xyXG4gICAgZ2V0VHJhY2tzQnlVc2VyKHVzZXIpIHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBTQy5yZXNvbHZlKGBodHRwczovL3NvdW5kY2xvdWQuY29tLyR7dXNlcn1gKS50aGVuKChyZXNwb25zZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBDcmVhdGUgb3B0aW9ucyBvYmplY3QgdG8gaG9sZCB3aGF0IHdlIHdhbnQgdG8gc2VhcmNoIGZvclxyXG4gICAgICAgICAgICAgICAgICAgIGxldCBvcHRpb25zID0ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsaW1pdDogdGhpcy5xdWV1ZU51bVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgU0MuZ2V0KGAvdXNlcnMvJHtyZXNwb25zZS5pZH0vdHJhY2tzYCwgb3B0aW9ucykudGhlbigodHJhY2tzKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFV0aWxzLmxvZyh0cmFja3MpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodHJhY2tzLmxlbmd0aCA+IDApIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgdHJhY2tDb2xsZWN0aW9uID0gbnVsbDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnNodWZmbGVRdWV1ZSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cmFja0NvbGxlY3Rpb24gPSB0aGlzLnNodWZmbGVUcmFja3ModHJhY2tzKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cmFja0NvbGxlY3Rpb24gPSB0cmFja3MucmV2ZXJzZSgpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFF1ZXVlIGFsbCB0cmFja3MgdG8gdGhlIHF1ZXVlIG9mIHRoZSB1c2VyJ3MgcGxheWxpc3QuIE5vdGUgdGhhdCBxdWV1ZSBpcyBhY3R1YWxseSBhY3RpbmcgbGlrZSBhIHN0YWNrIHNpbmNlIHdlIHVzZSBwdXNoKCkgYW5kIHBvcCgpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRyYWNrQ29sbGVjdGlvbi5sZW5ndGg7IGkrKykgeyAvLyBTa2lwIHRoZSBmaXJzdCBvbmUgc2luY2Ugd2UgYXJlIGFscmVhZHkgcGxheWluZyBpdCBhdCB0aGlzIHBvaW50IChuZWVkIHRvIHN1YnRyYWN0IHVwcGVyIGJvdW5kIGJ5IDEgc2luY2Ugd2Ugd2FudCB0byBleGNsdWRlIHRoZSBmaXJzdCB0cmFjayBmcm9tIHRoZSByZXZlcnNlZCBhcnJheSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnF1ZXVlLnB1c2goe2lkOiB0cmFja0NvbGxlY3Rpb25baV0uaWQsIHRyYWNrOiB0cmFja0NvbGxlY3Rpb25baV19KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gLy8gTG9hZCB0aGUgc29uZ1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gdGhpcy5jdXJQbGF5ZXIubG9hZCh0cmFja0NvbGxlY3Rpb25bdHJhY2tDb2xsZWN0aW9uLmxlbmd0aCAtIDFdLnBlcm1hbGlua191cmwpOyAvLyBUb3Agb2YgdGhlIHJlc3VsdFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIERpc3BsYXkgdG9hc3QgbWVzc2FnZSB3aGVuIGRvbmVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFV0aWxzLnNob3dUb2FzdChgJHt0cmFja3MubGVuZ3RofSB0cmFja3MgYWRkZWQgdG8gdGhlIHF1ZXVlLmApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgVXRpbHMuc2hvd1RvYXN0KCdTZWFyY2ggcmV0dXJuZWQgbm8gcmVzdWx0cy4gUGxlYXNlIHRyeSBhZ2Fpbi4nKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIFV0aWxzLmxvZygnZ2V0U29uZ3NCeVVzZXIgRXJyb3IgLSAnICsgZS5tZXNzYWdlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICBVdGlscy5sb2coZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogU2VhcmNoZXMgZm9yIHNvbmdzIGJ5IGdlbnJlcyAoc3RyaW5nIG9mIGdlbnJlcyBzZXBhcmF0ZWQgYnkgY29tbWFzKVxyXG4gICAgICogXHJcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gZ2VucmVMaXN0IC0gY29tbWEgc2VwYXJhdGVkIGxpc3Qgb2YgZ2VucmVzXHJcbiAgICAgKiBcclxuICAgICAqIEBtZW1iZXJvZiBQbGF5ZXJcclxuICAgICAqL1xyXG4gICAgZ2V0VHJhY2tzQnlHZW5yZXMoZ2VucmVMaXN0KSB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgLy8gQ3JlYXRlIG9wdGlvbnMgb2JqZWN0IHRvIGhvbGQgd2hhdCB3ZSB3YW50IHRvIHNlYXJjaCBmb3JcclxuICAgICAgICAgICAgbGV0IG9wdGlvbnMgPSB7XHJcbiAgICAgICAgICAgICAgICBnZW5yZXM6IGdlbnJlTGlzdCxcclxuICAgICAgICAgICAgICAgIGxpbWl0OiB0aGlzLnF1ZXVlTnVtXHJcbiAgICAgICAgICAgIH0gLy8gVE9ETzogQWxsb3cgdG8gbW9kaWZ5IGxpbWl0IGxhdGVyXHJcblxyXG4gICAgICAgICAgICBTQy5nZXQoJy90cmFja3MnLCBvcHRpb25zKS50aGVuKCh0cmFja3MpID0+IHtcclxuICAgICAgICAgICAgICAgIGlmICh0cmFja3MubGVuZ3RoID4gMCkge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBsZXQgdHJhY2tDb2xsZWN0aW9uID0gbnVsbDtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5zaHVmZmxlUXVldWUpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyYWNrQ29sbGVjdGlvbiA9IHRoaXMuc2h1ZmZsZVRyYWNrcyh0cmFja3MpO1xyXG4gICAgICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgICAgICAgICAgdHJhY2tDb2xsZWN0aW9uID0gdHJhY2tzLnJldmVyc2UoKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gUXVldWUgYWxsIHRyYWNrcyB0byB0aGUgcXVldWUgb2YgdGhlIHVzZXIncyBwbGF5bGlzdC4gTm90ZSB0aGF0IHF1ZXVlIGlzIGFjdHVhbGx5IGFjdGluZyBsaWtlIGEgc3RhY2sgc2luY2Ugd2UgdXNlIHB1c2goKSBhbmQgcG9wKClcclxuICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRyYWNrQ29sbGVjdGlvbi5sZW5ndGg7IGkrKykgeyAvLyBTa2lwIHRoZSBmaXJzdCBvbmUgc2luY2Ugd2UgYXJlIGFscmVhZHkgcGxheWluZyBpdCBhdCB0aGlzIHBvaW50IChuZWVkIHRvIHN1YnRyYWN0IHVwcGVyIGJvdW5kIGJ5IDEgc2luY2Ugd2Ugd2FudCB0byBleGNsdWRlIHRoZSBmaXJzdCB0cmFjayBmcm9tIHRoZSByZXZlcnNlZCBhcnJheSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5xdWV1ZS5wdXNoKHtpZDogdHJhY2tDb2xsZWN0aW9uW2ldLmlkLCB0cmFjazogdHJhY2tDb2xsZWN0aW9uW2ldfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAvLyAvLyBMb2FkIHRoZSBzb25nXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gdGhpcy5jdXJQbGF5ZXIubG9hZCh0cmFja0NvbGxlY3Rpb25bdHJhY2tDb2xsZWN0aW9uLmxlbmd0aCAtIDFdLnBlcm1hbGlua191cmwpO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gRGlzcGxheSB0b2FzdCBtZXNzYWdlIHdoZW4gZG9uZVxyXG4gICAgICAgICAgICAgICAgICAgIFV0aWxzLnNob3dUb2FzdChgJHt0cmFja3MubGVuZ3RofSB0cmFja3MgYWRkZWQgdG8gdGhlIHF1ZXVlLmApO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBVdGlscy5zaG93VG9hc3QoJ1NlYXJjaCByZXR1cm5lZCBubyByZXN1bHRzLiBQbGVhc2UgdHJ5IGFnYWluLicpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgIFV0aWxzLmxvZygnZ2V0U29uZ3NCeUdlbnJlcyBFcnJvciAtICcgKyBlLm1lc3NhZ2UpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIENoZWNrcyBpZiBzb25nIGhpc3RvcnkgY29udGFpbnMgYSBzb25nIGJ5IGlkLlxyXG4gICAgICogXHJcbiAgICAgKiBAcGFyYW0ge051bWJlcn0gaWQgLSBpZCBvZiB0aGUgc29uZyB3ZSBhcmUgbG9va2luZyBmb3IuXHJcbiAgICAgKiBAcmV0dXJucyB7Qm9vbGVhbn1cclxuICAgICAqIFxyXG4gICAgICogQG1lbWJlcm9mIFBsYXllclxyXG4gICAgICovXHJcbiAgICBoaXN0b3J5Q29udGFpbnNJZChpZCkge1xyXG4gICAgICAgIGxldCBmb3VuZCA9IGZhbHNlO1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5oaXN0b3J5Lmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmhpc3RvcnlbaV0uaWQgPT09IGlkKSB7XHJcbiAgICAgICAgICAgICAgICBmb3VuZCA9IHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgICAgIHJldHVybiBmb3VuZDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEV4dHJhY3RzIHRoZSB1cmwgcGFyYW1zIHRvIHBsYXkgc3BlY2lmaWMgdHJhY2tzIG9uIGxvYWQuXHJcbiAgICAgKiBcclxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBuYW1lIC0gbmFtZSBvZiB0aGUgcGFyYW1cclxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSB1cmwgLSBjdXJyZW50IGFkZHJlc3MgbG9hZGVkIGJ5IHRoZSB1c2VyXHJcbiAgICAgKiBAcmV0dXJucyBcclxuICAgICAqIFxyXG4gICAgICogQG1lbWJlcm9mIFBsYXllclxyXG4gICAgICovXHJcbiAgICBnZXRVUkxQYXJhbXNCeU5hbWUobmFtZSwgdXJsKSB7XHJcbiAgICAgICAgaWYgKCF1cmwpIHVybCA9IHdpbmRvdy5sb2NhdGlvbi5ocmVmO1xyXG4gICAgICAgIG5hbWUgPSBuYW1lLnJlcGxhY2UoL1tcXFtcXF1dL2csIFwiXFxcXCQmXCIpO1xyXG4gICAgICAgIHZhciByZWdleCA9IG5ldyBSZWdFeHAoXCJbPyZdXCIgKyBuYW1lICsgXCIoPShbXiYjXSopfCZ8I3wkKVwiKSxcclxuICAgICAgICAgICAgcmVzdWx0cyA9IHJlZ2V4LmV4ZWModXJsKTtcclxuICAgICAgICBpZiAoIXJlc3VsdHMpIHJldHVybiBudWxsO1xyXG4gICAgICAgIGlmICghcmVzdWx0c1syXSkgcmV0dXJuICcnO1xyXG4gICAgICAgIHJldHVybiBkZWNvZGVVUklDb21wb25lbnQocmVzdWx0c1syXS5yZXBsYWNlKC9cXCsvZywgXCIgXCIpKTtcclxuICAgIH1cclxuXHJcbiAgICBzaHVmZmxlVHJhY2tzKHRyYWNrcykge1xyXG4gICAgICAgIGxldCB0ZW1wID0gbnVsbDtcclxuICAgICAgICBVdGlscy5sb2coJ3NodWZmbGluZyB0cmFja3MnKTtcclxuICAgICAgICAvLyBVc2luZyBpbiBwbGFjZSBEdXJzdGVuZmVsZCBzaHVmZmxlXHJcbiAgICAgICAgZm9yIChsZXQgaSA9IHRyYWNrcy5sZW5ndGggLSAxOyBpID4gMDsgaSAtLSkge1xyXG4gICAgICAgICAgICBsZXQgaiA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIChpKzEpKTsgLy8gR2VuZXJhdGUgYSByYW5kb20gaW5kZXggWzAuLi5pXVxyXG4gICAgICAgICAgICB0ZW1wID0gdHJhY2tzW2ldOyAvLyBTdGFydCBzd2FwcGluZ1xyXG4gICAgICAgICAgICB0cmFja3NbaV0gPSB0cmFja3Nbal07XHJcbiAgICAgICAgICAgIHRyYWNrc1tqXSA9IHRlbXA7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gdHJhY2tzO1xyXG4gICAgfVxyXG5cclxuICAgIGdldFRyYWNrc0Zyb21DaGFydHMoX2tpbmQsIF9nZW5yZXMsIF9saW1pdCwgJF9wYXJ0aXRpb24gPSAxKSB7XHJcbiAgICAgICAgLy8ga2luZD10b3AmZ2VucmU9c291bmRjbG91ZCUzQWdlbnJlcyUzQWFsbC1tdXNpYyZsaW1pdD01MFxyXG4gICAgICAgIHRyeSB7XHJcblxyXG4gICAgICAgICAgICAkLmFqYXgoe1xyXG4gICAgICAgICAgICAgICAgdXJsOiAnaHR0cDovL3BvbGFyaXR5LngxMC5teC9uaW1idXMvY2hhcnRzLnBocCcsIC8vVGhpcyBpcyB0aGUgY3VycmVudCBkb2NcclxuICAgICAgICAgICAgICAgIHR5cGU6IFwiR0VUXCIsXHJcbiAgICAgICAgICAgICAgICBkYXRhVHlwZTonanNvbicsIC8vIGFkZCBqc29uIGRhdGF0eXBlIHRvIGdldCBqc29uXHJcbiAgICAgICAgICAgICAgICBkYXRhOiAoe1xyXG4gICAgICAgICAgICAgICAgICAgIGtpbmQ6IF9raW5kLFxyXG4gICAgICAgICAgICAgICAgICAgIGdlbnJlOiBfZ2VucmVzLFxyXG4gICAgICAgICAgICAgICAgICAgIGxpbWl0OiBfbGltaXQsXHJcbiAgICAgICAgICAgICAgICAgICAgbGlua2VkX3BhcnRpdGlvbmluZzogJF9wYXJ0aXRpb24sXHJcbiAgICAgICAgICAgICAgICAgICAgY2xpZW50X2lkOiBjb25zdHMuY2xpZW50X2lkXHJcbiAgICAgICAgICAgICAgICB9KSxcclxuICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IChkYXRhKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IHRyYWNrQ29sbGVjdGlvbiA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuc2h1ZmZsZVF1ZXVlKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0cmFja0NvbGxlY3Rpb24gPSB0aGlzLnNodWZmbGVUcmFja3MoZGF0YS5jb2xsZWN0aW9uKTtcclxuICAgICAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyYWNrQ29sbGVjdGlvbiA9IGRhdGEuY29sbGVjdGlvbi5yZXZlcnNlKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdHJhY2tDb2xsZWN0aW9uLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucXVldWUucHVzaCh7aWQ6IHRyYWNrQ29sbGVjdGlvbltpXS50cmFjay5pZCwgdHJhY2s6IHRyYWNrQ29sbGVjdGlvbltpXS50cmFja30pOyAvLyBUaGlzIG5lZWRzIHRoZSB0cmFjayBpZGVudGlmaWVyXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBVdGlscy5sb2codHJhY2tDb2xsZWN0aW9uKTtcclxuICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAvLyBEaXNwbGF5IHRvYXN0IG1lc3NhZ2Ugd2hlbiBkb25lXHJcbiAgICAgICAgICAgICAgICAgICAgVXRpbHMuc2hvd1RvYXN0KGAke3RyYWNrQ29sbGVjdGlvbi5sZW5ndGh9IHRyYWNrcyBhZGRlZCB0byB0aGUgcXVldWUuYCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pOyAgXHJcbiAgICAgICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICBVdGlscy5sb2coJ2dldFRyYWNrc0Zyb21DaGFydHMgRXJyb3IgLSAnICsgZS5tZXNzYWdlKTsgXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGdldFJlbGF0ZWRUcmFja3MoX2lkLCBfbGltaXQpIHtcclxuICAgICAgICB0cnkge1xyXG5cclxuICAgICAgICAgICAgJC5hamF4KHtcclxuICAgICAgICAgICAgICAgIHVybDogJ2h0dHA6Ly9wb2xhcml0eS54MTAubXgvbmltYnVzL3JlbGF0ZWQucGhwJywgLy9UaGlzIGlzIHRoZSBjdXJyZW50IGRvY1xyXG4gICAgICAgICAgICAgICAgdHlwZTogXCJHRVRcIixcclxuICAgICAgICAgICAgICAgIGRhdGFUeXBlOidqc29uJywgLy8gYWRkIGpzb24gZGF0YXR5cGUgdG8gZ2V0IGpzb25cclxuICAgICAgICAgICAgICAgIGRhdGE6ICh7XHJcbiAgICAgICAgICAgICAgICAgICAgaWQ6IF9pZCxcclxuICAgICAgICAgICAgICAgICAgICBsaW1pdDogX2xpbWl0LFxyXG4gICAgICAgICAgICAgICAgICAgIGNsaWVudF9pZDogY29uc3RzLmNsaWVudF9pZFxyXG4gICAgICAgICAgICAgICAgfSksXHJcbiAgICAgICAgICAgICAgICBzdWNjZXNzOiAoZGF0YSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCB0cmFja0NvbGxlY3Rpb24gPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnNodWZmbGVRdWV1ZSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgdHJhY2tDb2xsZWN0aW9uID0gdGhpcy5zaHVmZmxlVHJhY2tzKGRhdGEuY29sbGVjdGlvbik7XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0cmFja0NvbGxlY3Rpb24gPSBkYXRhLmNvbGxlY3Rpb24ucmV2ZXJzZSgpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRyYWNrQ29sbGVjdGlvbi5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnF1ZXVlLnB1c2goe2lkOiB0cmFja0NvbGxlY3Rpb25baV0uaWQsIHRyYWNrOiB0cmFja0NvbGxlY3Rpb25baV19KTsgLy8gVGhpcyBuZWVkcyB0aGUgdHJhY2sgaWRlbnRpZmllclxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgVXRpbHMubG9nKHRyYWNrQ29sbGVjdGlvbik7XHJcbiAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gRGlzcGxheSB0b2FzdCBtZXNzYWdlIHdoZW4gZG9uZVxyXG4gICAgICAgICAgICAgICAgICAgIFV0aWxzLnNob3dUb2FzdChgJHt0cmFja0NvbGxlY3Rpb24ubGVuZ3RofSB0cmFja3MgcmVsYXRlZCB0byAke3RoaXMuY3VyVHJhY2sudGl0bGV9IGFkZGVkIHRvIHRoZSBxdWV1ZS5gKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gU3RyZWFtIHRoZSBzb25nXHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IHRyYWNrID0gdGhpcy5xdWV1ZS5wb3AoKTtcclxuICAgICAgICAgICAgICAgICAgICBVdGlscy5sb2coJ2ZldGNoaW5nIGZpcnN0IHRyYWNrIGZyb20gcmVsYXRlZCAnICsgdHJhY2suaWQpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY3VyUGxheWVyLmxvYWQoYGh0dHBzJTNBLy9hcGkuc291bmRjbG91ZC5jb20vdHJhY2tzLyR7dHJhY2suaWR9YCArIFdJREdFVF9QQVJBTVMpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMudG9nZ2xlUGxheVN0YXRlKHRydWUpO1xyXG4gICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gdGhpcy5sb2FkV2lkZ2V0U29uZyh0aGlzLmN1clBsYXllciksIDEwMDApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTsgIFxyXG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgVXRpbHMubG9nKCdnZXRSZWxhdGVkVHJhY2tzIEVycm9yIC0gJyArIGUubWVzc2FnZSk7IFxyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgUGxheWVyO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vcHVibGljL2pzL3BsYXllci5qc1xuLy8gbW9kdWxlIGlkID0gNlxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJpbXBvcnQgY29uc3RzIGZyb20gJy4uLy4uL2NvbnN0cy1zZWMuanNvbic7XHJcblxyXG5sZXQgU0MgPSByZXF1aXJlKCdzb3VuZGNsb3VkJyk7XHJcblxyXG5jbGFzcyBIaXN0SXRlbSB7XHJcblxyXG4gICAgY29uc3RydWN0b3IoYmcsIHRyYWNrLCBwbGF5ZXIsIGVycm9yRG93bmxvYWRDYWxsYmFjaykge1xyXG4gICAgICAgIHRoaXMuX2JnID0gYmc7XHJcbiAgICAgICAgdGhpcy5fdHJhY2sgPSB0cmFjaztcclxuICAgICAgICB0aGlzLl9lcnJvckRvd25sb2FkQ2FsbGJhY2sgPSBlcnJvckRvd25sb2FkQ2FsbGJhY2s7XHJcblxyXG4gICAgICAgIHRoaXMuaGlzdEl0ZW0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICB0aGlzLmhpc3RJdGVtLmNsYXNzTmFtZSA9ICdjYXJkJztcclxuICAgICAgICB0aGlzLmhpc3RJdGVtLnNldEF0dHJpYnV0ZSgnaWQnLCAnaGlzdEl0ZW0nKTtcclxuICAgICAgICB0aGlzLmhpc3RJdGVtLnNldEF0dHJpYnV0ZSgnZGF0YS1pZCcsIHRyYWNrLmlkKTtcclxuICAgICAgICB0aGlzLmhpc3RJdGVtLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcclxuICAgICAgICAgICAgcGxheWVyLnN0cmVhbVNvbmcodHJhY2suaWQpO1xyXG4gICAgICAgIH0sIGZhbHNlKTtcclxuICAgICAgICBsZXQgdGVtcElubmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICAgICAgdGVtcElubmVyLmlubmVySFRNTCA9IGBcclxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNhcmRcIiBkYXRhLWlkPVwiJHt0aGlzLl90cmFjay5pZH1cIj5cclxuICAgICAgICAgICAgICAgIDxkaXYgaWQ9XCJoaXN0SXRlbUJnXCIgY2xhc3M9XCJiZy1pbWFnZVwiIHN0eWxlPVwiYmFja2dyb3VuZC1pbWFnZTogdXJsKCcke3RoaXMuX2JnfScpXCI+PC9kaXY+XHJcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwicGxheWVyLWNvbnRlbnQgb3ZlcmxheVwiPlxyXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJyb3cgbGV2ZWxcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImxldmVsLWxlZnRcIiBzdHlsZT1cInBvc2l0aW9uOnJlbGF0aXZlO1wiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGltZyBzcmM9XCIke3RoaXMuX3RyYWNrLmFydHdvcmtfdXJsID09PSBudWxsID8gdGhpcy5fdHJhY2sudXNlci5hdmF0YXJfdXJsIDogdGhpcy5fdHJhY2suYXJ0d29ya191cmx9XCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cImhpc3QtcGxheSBjZW50ZXJcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aSBjbGFzcz1cImZhIGZhLXBsYXkgY2VudGVyLWFsdFwiIGFyaWEtaGlkZGVuPVwidHJ1ZVwiPjwvaT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvc3Bhbj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJkZXNjXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzcz1cInRpdGxlXCI+JHt0aGlzLl90cmFjay50aXRsZX08L3A+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzcz1cInN1YnRpdGxlXCI+JHt0aGlzLl90cmFjay51c2VyLnVzZXJuYW1lfTwvcD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzPVwic3VidGl0bGVcIj4ke3RoaXMuX3RyYWNrLmdlbnJlIHx8ICdOL0EnfTwvcD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJyb3cgb3ZlcmxheVwiPlxyXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJhY3Rpb24tYmFyIGNlbnRlciBuby1wYWRkaW5nXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJhY3Rpb24tYmFyLWl0ZW1cIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxhIGhyZWY9XCIke3RoaXMuX3RyYWNrLmRvd25sb2FkYWJsZSA9PT0gZmFsc2UgPyB0aGlzLl9lcnJvckRvd25sb2FkQ2FsbGJhY2sgOiBgaHR0cHM6Ly9hcGkuc291bmRjbG91ZC5jb20vdHJhY2tzLyR7dGhpcy5fdHJhY2suaWR9L2Rvd25sb2FkP2NsaWVudF9pZD0ke2NvbnN0cy5jbGllbnRfaWR9YH1cIiB0YXJnZXQ9XCJfYmxhbmtcIj48YnV0dG9uIGNsYXNzPVwiYnRuLXRyYW5zcGFyZW50XCI+RG93bmxvYWQ8L2J1dHRvbj48L2E+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiYWN0aW9uLWJhci1pdGVtXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YSBocmVmPVwiJHt0aGlzLl90cmFjay5wZXJtYWxpbmtfdXJsfVwiIHRhcmdldD1cIl9ibGFua1wiPjxidXR0b24gY2xhc3M9XCJidG4tdHJhbnNwYXJlbnRcIj5WaWV3PC9idXR0b24+PC9hPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICBgO1xyXG4gICAgICAgIHRoaXMuaGlzdEl0ZW0uYXBwZW5kQ2hpbGQodGVtcElubmVyKTsgLy8gTXVzdCB1c2UgdGhpcyBtZXRob2QgdG8gcHJlc2VydmUgbGlzdGVuZXJzXHJcbiAgICB9XHJcblxyXG4gICAgcmVuZGVyKCkge1xyXG4gICAgICAgICByZXR1cm4gdGhpcy5oaXN0SXRlbTsgLy8gQ2Fubm90IHJldHVybiBpbm5lckhUTUwgc2luY2UgdGhhdCByZW1vdmVzIGFsbCBsaXN0ZW5lcnNcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgSGlzdEl0ZW1cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3B1YmxpYy9jb250cm9scy9IaXN0SXRlbS5qc1xuLy8gbW9kdWxlIGlkID0gN1xuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJpbXBvcnQgQ2hhcnRJdGVtIGZyb20gJy4vY2hhcnRpdGVtJztcclxuXHJcbmNsYXNzIENoYXJ0cyB7XHJcblxyXG4gICAgY29uc3RydWN0b3IocGxheWVyKSB7XHJcbiAgICAgICAgdGhpcy5fcGxheWVyID0gcGxheWVyO1xyXG4gICAgICAgIHRoaXMuaXNTaG93biA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMucmVuZGVyKCk7XHJcbiAgICAgICAgdGhpcy5iaW5kRXZlbnRzKCk7XHJcblxyXG4gICAgICAgIC8vIExvYWQgdGhlIGNoYXJ0c1xyXG4gICAgICAgIGxldCBjID0gbnVsbDtcclxuICAgICAgICB0aGlzLmNoYXJ0Q29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2FsbENoYXJ0cycpO1xyXG4gICAgICAgICQuYWpheCh7XHJcbiAgICAgICAgICAgIHVybDogJ2h0dHA6Ly9wb2xhcml0eS54MTAubXgvbmltYnVzL2NoYXJ0cy5qc29uJyxcclxuICAgICAgICAgICAgdHlwZTogXCJHRVRcIixcclxuICAgICAgICAgICAgZGF0YVR5cGU6J2pzb24nLCBcclxuICAgICAgICAgICAgc3VjY2VzczogKGRhdGEpID0+IHtcclxuICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZGF0YS5jb2xsZWN0aW9uLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYyA9IG5ldyBDaGFydEl0ZW0odGhpcy5fcGxheWVyLCBkYXRhLmNvbGxlY3Rpb25baV0uY2hhcnQudGl0bGUsIGRhdGEuY29sbGVjdGlvbltpXS5jaGFydC5hdXRob3IsIGRhdGEuY29sbGVjdGlvbltpXS5jaGFydC5raW5kLCBkYXRhLmNvbGxlY3Rpb25baV0uY2hhcnQuZ2VucmVfdXJsLCBkYXRhLmNvbGxlY3Rpb25baV0uY2hhcnQubGltaXQsIGRhdGEuY29sbGVjdGlvbltpXS5jaGFydC5pbWFnZV91cmwpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2hhcnRDb250YWluZXIuYXBwZW5kQ2hpbGQoYy5yZW5kZXIoKSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICByZW5kZXIoKSB7XHJcbiAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2NoYXJ0TW9kYWxDb250YWluZXInKS5pbm5lckhUTUwgKz0gYFxyXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwiaGVyby1ib2R5XCI+XHJcbiAgICAgICAgICAgICAgICA8ZGl2IGlkPVwiY2hhcnRzQ2xvc2VCdXR0b25cIiBjbGFzcz1cImRpYWxvZy1jbG9zZS1idG4gbGluay1idG5cIj5cclxuICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cImljb25cIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPGkgY2xhc3M9XCJmYSBmYS10aW1lc1wiIGFyaWEtaGlkZGVuPVwidHJ1ZVwiPjwvaT5cclxuICAgICAgICAgICAgICAgICAgICA8L3NwYW4+XHJcbiAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjb250ZW50XCI+XHJcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInJvd1wiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8aDMgY2xhc3M9XCJ3aGl0ZVwiPkNoYXJ0czwvaDM+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJyb3dcIiBpZD1cImFsbENoYXJ0c1wiPlxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgYDtcclxuICAgIH1cclxuXHJcbiAgICBiaW5kRXZlbnRzKCkge1xyXG4gICAgICAgIHRoaXMuY2hhcnRzQ2xvc2VCdXR0b24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY2hhcnRzQ2xvc2VCdXR0b24nKTtcclxuXHJcbiAgICAgICAgLy8gRXZlbnQgaGFuZGxlciBmb3IgY2xvc2UgYnV0dG9uIGZvciBzZWFyY2ggZGlhbG9nXHJcbiAgICAgICAgdGhpcy5jaGFydHNDbG9zZUJ1dHRvbi5vbmNsaWNrID0gKGUpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5oaWRlQ2hhcnRzKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHRvZ2dsZUNoYXJ0cygpIHtcclxuICAgICAgICAvLyBTY3JvbGwgdG8gdG9wIHRvIHNob3cgdGhlIHNlYXJjaCBkaWFsb2dcclxuICAgICAgICB3aW5kb3cuc2Nyb2xsVG8oMCwgMCk7XHJcblxyXG4gICAgICAgIHRoaXMuaXNTaG93biA9ICF0aGlzLmlzU2hvd247XHJcbiAgICAgICAgaWYgKHRoaXMuaXNTaG93bikge1xyXG4gICAgICAgICAgICAkKCcjY2hhcnRNb2RhbENvbnRhaW5lcicpLmFkZENsYXNzKCdzaG93bicpO1xyXG4gICAgICAgICAgICBpZiAoJCh3aW5kb3cpLndpZHRoKCkgPD0gNzY4KVxyXG4gICAgICAgICAgICAgICAgJCgnYm9keScpLmNzcyh7J292ZXJmbG93LXknOiAnaGlkZGVuJ30pO1xyXG4gICAgICAgICAgICAvL2lmICh3aW5kb3cuaW5uZXJXaWR0aCA+IDc2OCkge1xyXG4gICAgICAgICAgICAgICAgJCgnI3BsYXllckhlcm8nKS5hZGRDbGFzcygndW5mb2N1c2VkJyk7XHJcbiAgICAgICAgICAgIC8vfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIC8vIFJlc2V0IGRpYWxvZyAobXVzdCBwbGFjZSB1cCBoZXJlIHRvIGFjY291bnQgZm9yIGludmFsaWQgaW5wdXQpXHJcbiAgICAgICAgICAgICQoJyNjaGFydE1vZGFsQ29udGFpbmVyJykucmVtb3ZlQ2xhc3MoJ3Nob3duJyk7IC8vIEhpZGUgdGhlIHNlYXJjaCBtb2RhbFxyXG4gICAgICAgICAgICBpZiAoJCh3aW5kb3cpLndpZHRoKCkgPD0gNzY4KSAvLyBGb3IgbW9iaWxlIFVJXHJcbiAgICAgICAgICAgICAgICAkKCdib2R5JykuY3NzKHsnb3ZlcmZsb3cteSc6ICdzY3JvbGwnfSk7XHJcblxyXG4gICAgICAgICAgICAvL2lmICh3aW5kb3cuaW5uZXJXaWR0aCA+IDc2OCkge1xyXG4gICAgICAgICAgICAgICAgJCgnI3BsYXllckhlcm8nKS5yZW1vdmVDbGFzcygndW5mb2N1c2VkJyk7XHJcbiAgICAgICAgICAgIC8vfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcblxyXG4gICAgaGlkZUNoYXJ0cygpIHtcclxuICAgICAgICAvLyBSZXNldCBkaWFsb2cgKG11c3QgcGxhY2UgdXAgaGVyZSB0byBhY2NvdW50IGZvciBpbnZhbGlkIGlucHV0KVxyXG4gICAgICAgICQoJyNjaGFydE1vZGFsQ29udGFpbmVyJykucmVtb3ZlQ2xhc3MoJ3Nob3duJyk7IC8vIEhpZGUgdGhlIHNlYXJjaCBtb2RhbFxyXG4gICAgICAgIGlmICgkKHdpbmRvdykud2lkdGgoKSA8PSA3NjgpIC8vIEZvciBtb2JpbGUgVUlcclxuICAgICAgICAgICAgJCgnYm9keScpLmNzcyh7J292ZXJmbG93LXknOiAnc2Nyb2xsJ30pO1xyXG4gICAgICAgIHRoaXMuaXNTaG93biA9IGZhbHNlO1xyXG4gICAgICAgIC8vaWYgKHdpbmRvdy5pbm5lcldpZHRoID4gNzY4KSB7XHJcbiAgICAgICAgICAgICQoJyNwbGF5ZXJIZXJvJykucmVtb3ZlQ2xhc3MoJ3VuZm9jdXNlZCcpO1xyXG4gICAgICAgIC8vfVxyXG4gICAgfVxyXG5cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgQ2hhcnRzXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9wdWJsaWMvY29udHJvbHMvY2hhcnRzLmpzXG4vLyBtb2R1bGUgaWQgPSA4XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsImltcG9ydCBRdWV1ZUl0ZW0gZnJvbSAnLi9xdWV1ZWl0ZW0nO1xyXG5pbXBvcnQgVXRpbHMgZnJvbSAnLi4vanMvdXRpbHMnO1xyXG5pbXBvcnQgU2V0dGluZ3MgZnJvbSAnLi4vanMvc2V0dGluZ3MnO1xyXG5cclxuY2xhc3MgRGFzaGJvYXJkIHtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihwbGF5ZXIpIHtcclxuICAgICAgICB0aGlzLl9wbGF5ZXIgPSBwbGF5ZXI7XHJcbiAgICAgICAgdGhpcy5pc1Nob3duID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5xdWV1ZUl0ZW1Db3VudCA9IDA7IC8vIENvdW50cyBudW1iZXIgb2Ygc29uZ3Mgb24gcXVldWVcclxuICAgICAgICB0aGlzLnF1ZXVlZFRpbWUgPSAwOyAvLyBUb3RhbCB0aW1lIG9mIHF1ZXVlZCBzb25nc1xyXG4gICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNkYXNoYm9hcmRNb2RhbENvbnRhaW5lcicpLmlubmVySFRNTCArPSB0aGlzLnJlbmRlcigpO1xyXG4gICAgICAgIHRoaXMuYmluZEV2ZW50cygpO1xyXG4gICAgICAgIFNldHRpbmdzLmxvYWRQcmVmcygpOyAvLyBJbml0IHNldHRpbmdzXHJcbiAgICAgICAgdGhpcy51cGRhdGVDb250cm9scygpOyAvLyBVcGRhdGUgc2V0dGluZ3MgY29udHJvbHNcclxuICAgIH1cclxuXHJcbiAgICByZW5kZXIoKSB7XHJcbiAgICAgICAgcmV0dXJuIGBcclxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cImhlcm8tYm9keVwiPlxyXG4gICAgICAgICAgICAgICAgPGRpdiBpZD1cImRhc2hib2FyZENsb3NlQnRuXCIgY2xhc3M9XCJkaWFsb2ctY2xvc2UtYnRuIGxpbmstYnRuXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJpY29uXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxpIGNsYXNzPVwiZmEgZmEtdGltZXNcIiBhcmlhLWhpZGRlbj1cInRydWVcIj48L2k+XHJcbiAgICAgICAgICAgICAgICAgICAgPC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICA8ZGl2IGlkPVwidGFic1wiIGNsYXNzPVwiY29udGVudFwiPlxyXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJ0YWItY29udGFpbmVyIHRhYnMtY2VudGVyXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDx1bD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsaSBjbGFzcz1cInRhYi1pdGVtIHNlbGVjdGVkXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGE+U2V0dGluZ3M8L2E+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2xpPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxpIGlkPVwicXVldWVUYWJcIiBjbGFzcz1cInRhYi1pdGVtXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGE+UXVldWU8L2E+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2xpPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxpIGNsYXNzPVwidGFiLWl0ZW1cIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YT5BYm91dDwvYT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvbGk+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvdWw+XHJcbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgPHNwYWNlIGNsYXNzPVwibGFyZ2VcIj48L3NwYWNlPlxyXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJ0YWJwYWdlIHNob3duXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxoMz5TZXR0aW5nczwvaDM+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJkaXZpZGVyXCI+PC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJzY3JvbGxhYmxlLWNvbnRhaW5lclwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3M9XCJzZXR0aW5ncy10aXRsZVwiPlNodWZmbGUgTW9kZTwvcD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJyb3dcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGkgY2xhc3M9XCJzZXR0aW5ncy1yYlwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT1cInJhZGlvXCIgaWQ9XCJyYWRpb1JhbmRvbVwiIG5hbWU9XCJzZWxlY3RvclwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgZm9yPVwicmFkaW9SYW5kb21cIj5SYW5kb20gVHJhY2tzPC9sYWJlbD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNoZWNrXCI+PC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9saT5cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxpIGNsYXNzPVwic2V0dGluZ3MtcmJcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9XCJyYWRpb1wiIGlkPVwicmFkaW9SZWxhdGVkXCIgbmFtZT1cInNlbGVjdG9yXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBmb3I9XCJyYWRpb1JlbGF0ZWRcIj5SZWxhdGVkIFRyYWNrczwvbGFiZWw+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjaGVja1wiPjwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvbGk+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzcz1cInNldHRpbmdzLXRpdGxlXCI+QXBwZWFyYW5jZTwvcD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJyb3dcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwidG9nZ2xlLWNvbnRhaW5lclwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cD5EaXNhYmxlIEFuaW1hdGlvbnM8L3A+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJ0b2dnbGUtc3dpdGNoXCI+PGlucHV0IHR5cGU9XCJjaGVja2JveFwiIGlkPVwiY2hrQW5pbWF0aW9uc1wiLz48bGFiZWwgZm9yPVwiY2hrQW5pbWF0aW9uc1wiPjwvbGFiZWw+PC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInRvZ2dsZS1jb250YWluZXJcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHA+RGlzYWJsZSBCbHVyPC9wPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwidG9nZ2xlLXN3aXRjaFwiPjxpbnB1dCB0eXBlPVwiY2hlY2tib3hcIiBpZD1cImNoa0JsdXJcIi8+PGxhYmVsIGZvcj1cImNoa0JsdXJcIj48L2xhYmVsPjwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3M9XCJzZXR0aW5ncy10aXRsZVwiPkFkdmFuY2VkPC9wPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInJvd1wiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJ0b2dnbGUtY29udGFpbmVyXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwPkRlYnVnIE1vZGU8L3A+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJ0b2dnbGUtc3dpdGNoXCI+PGlucHV0IHR5cGU9XCJjaGVja2JveFwiIGlkPVwiY2hrRGVidWdcIi8+PGxhYmVsIGZvcj1cImNoa0RlYnVnXCI+PC9sYWJlbD48L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwidGFicGFnZVwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8aDM+UXVldWU8L2gzPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwicm93IGxldmVsXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBpZD1cInRvdGFsUXVldWVUaW1lXCIgY2xhc3M9XCJuby1tYXJnaW5cIiBzdHlsZT1cImZsZXgtZ3JvdzogMVwiPjwvcD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gaWQ9XCJidG5DbGVhclF1ZXVlXCIgY2xhc3M9XCJidG4tc21hbGwgYnRuLW5pbWJ1c1wiPkNsZWFyIFF1ZXVlPC9idXR0b24+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZGl2aWRlclwiPjwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8c3BhY2U+PC9zcGFjZT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBpZD1cInF1ZXVlQ29udGFpbmVyXCIgY2xhc3M9XCJzY3JvbGxhYmxlLWNvbnRhaW5lclwiPlxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJ0YWJwYWdlXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxoMz5BYm91dDwvaDM+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJkaXZpZGVyXCI+PC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJyb3cgdGV4dC1jZW50ZXJcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbWcgY2xhc3M9XCJjZW50ZXJcIiBzcmM9XCIuLi9pbWcvTmltYnVzTG9nby5wbmdcIiBzdHlsZT1cIm1heC13aWR0aDogMjAwcHg7IHdpZHRoOiAxMDAlO1wiIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzcz1cIm5vLW1hcmdpblwiPkFuIG9wZW4gc291cmNlIFNvdW5kQ2xvdWQgY2xpZW50IGZvciBkaXNjb3ZlcmluZyBhbmQgc3RyZWFtaW5nIHRyYWNrcy4gTWFkZSB3aXRoIDxpIGNsYXNzPVwiZmEgZmEtaGVhcnQgYW5pbWF0ZWQgcHVsc2UgcGFkLWxlZnQgcGFkLXJpZ2h0XCIgc3R5bGU9XCJjb2xvcjojZTkwNjA2XCI+PC9pPiBpbiBOZXcgWW9yay48YnIvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgTmltYnVzIGlzIG5vdCBhZmZpbGlhdGVkIHdpdGggU291bmRDbG91ZC48YnIgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFNob3V0IG91dCB0byA8YSBocmVmPVwiaHR0cHM6Ly91bnNwbGFzaC5jb20vXCIgdGFyZ2V0PVwiX2JsYW5rXCI+VW5zcGxhc2g8L2E+IGZvciB0aGUgYW1hemluZyBwaG90b2dyYXBoeS4gPGJyIC8+IENvcHlyaWdodCAmY29weTsgJHtuZXcgRGF0ZSgpLmdldEZ1bGxZZWFyKCl9IFN0YW5sZXkgTGltPC9wPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYWNlIGNsYXNzPVwieC1sYXJnZVwiPjwvc3BhY2U+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwicm93IGNlbnRlclwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxhIGhyZWY9XCJodHRwczovL2dpdGh1Yi5jb20vU3BpZGVycGlnODYvTmltYnVzXCIgdGFyZ2V0PVwiX2JsYW5rXCI+PGJ1dHRvbiBjbGFzcz1cImJ0bi1uaW1idXNcIj5HaXRodWI8L2J1dHRvbj48L2E+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgYDtcclxuICAgIH1cclxuXHJcbiAgICBiaW5kRXZlbnRzKCkge1xyXG4gICAgICAgIHRoaXMuZGFzaGJvYXJkQ2xvc2VCdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZGFzaGJvYXJkQ2xvc2VCdG4nKTtcclxuICAgICAgICB0aGlzLnF1ZXVlVGFiID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3F1ZXVlVGFiJyk7XHJcbiAgICAgICAgdGhpcy5xdWV1ZUNvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdxdWV1ZUNvbnRhaW5lcicpO1xyXG4gICAgICAgIHRoaXMuYnRuQ2xlYXJRdWV1ZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdidG5DbGVhclF1ZXVlJyk7XHJcblxyXG4gICAgICAgIC8vIFNldHRpbmdzXHJcbiAgICAgICAgdGhpcy5yYlJhbmRvbSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyYWRpb1JhbmRvbScpO1xyXG4gICAgICAgIHRoaXMucmJSZWxhdGVkID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3JhZGlvUmVsYXRlZCcpO1xyXG4gICAgICAgIHRoaXMuY2hrQW5pbWF0aW9ucyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjaGtBbmltYXRpb25zJyk7XHJcbiAgICAgICAgdGhpcy5jaGtCbHVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Noa0JsdXInKTtcclxuICAgICAgICB0aGlzLmNoa0RlYnVnID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Noa0RlYnVnJyk7XHJcblxyXG4gICAgICAgIC8vIEV2ZW50IGhhbmRsZXIgZm9yIGNsb3NlIGJ1dHRvbiBmb3Igc2VhcmNoIGRpYWxvZ1xyXG4gICAgICAgIHRoaXMuZGFzaGJvYXJkQ2xvc2VCdG4ub25jbGljayA9IChlKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuaGlkZURhc2hib2FyZCgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5xdWV1ZVRhYi5vbmNsaWNrID0gKGUpID0+IHtcclxuICAgICAgICAgICAgLy8gVXBkYXRlIHF1ZXVlIGl0ZW1zXHJcbiAgICAgICAgICAgIHRoaXMucmVmcmVzaFF1ZXVlQ29udGFpbmVyKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLmJ0bkNsZWFyUXVldWUub25jbGljayA9IChlKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuY2xlYXJRdWV1ZSgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5iaW5kU2V0dGluZ3NDb250cm9scygpO1xyXG4gICAgfVxyXG5cclxuICAgIGJpbmRTZXR0aW5nc0NvbnRyb2xzKCkge1xyXG4gICAgICAgIC8vIFNldHRpbmdzIGNvbnRyb2xzXHJcbiAgICAgICAgdGhpcy5yYlJhbmRvbS5vbmNsaWNrID0gKGUpID0+IHtcclxuICAgICAgICAgICAgU2V0dGluZ3Muc3RvcmVQcmVmKCdzaHVmZmxlTW9kZScsICdyYW5kb20nKTtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coU2V0dGluZ3MuZ2V0UHJlZignc2h1ZmZsZU1vZGUnKSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLnJiUmVsYXRlZC5vbmNsaWNrID0gKGUpID0+IHtcclxuICAgICAgICAgICAgU2V0dGluZ3Muc3RvcmVQcmVmKCdzaHVmZmxlTW9kZScsICdyZWxhdGVkJyk7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFNldHRpbmdzLmdldFByZWYoJ3NodWZmbGVNb2RlJykpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5jaGtBbmltYXRpb25zLm9uY2xpY2sgPSAoZSkgPT4ge1xyXG4gICAgICAgICAgICBTZXR0aW5ncy5zdG9yZVByZWYoJ2Rpc2FibGVBbmltYXRpb25zJywgdGhpcy5jaGtBbmltYXRpb25zLmNoZWNrZWQpO1xyXG4gICAgICAgICAgICBpZiAodGhpcy5jaGtBbmltYXRpb25zLmNoZWNrZWQgJiYgIWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZGlzYWJsZUFuaW1hdGlvbnNcIikpIHtcclxuICAgICAgICAgICAgICAgICQoU2V0dGluZ3MuZGlzYWJsZUFuaW1hdGlvbnNDU1MpLmFwcGVuZFRvKFwiaGVhZFwiKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICQoJyNkaXNhYmxlQW5pbWF0aW9ucycpLnJlbW92ZSgpOyAvLyBSZW1vdmUgdGhlIHN0eWxlIHNoZWV0XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuY2hrQmx1ci5vbmNsaWNrID0gKGUpID0+IHtcclxuICAgICAgICAgICAgU2V0dGluZ3Muc3RvcmVQcmVmKCdkaXNhYmxlQmx1cicsIHRoaXMuY2hrQmx1ci5jaGVja2VkKTtcclxuICAgICAgICAgICAgaWYgKHRoaXMuY2hrQmx1ci5jaGVja2VkICYmICFkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImRpc2FibGVCbHVyXCIpKSB7XHJcbiAgICAgICAgICAgICAgICAkKFNldHRpbmdzLmRpc2FibGVCbHVyQ1NTKS5hcHBlbmRUbyhcImhlYWRcIik7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAkKCcjZGlzYWJsZUJsdXInKS5yZW1vdmUoKTsgLy8gUmVtb3ZlIHRoZSBzdHlsZSBzaGVldFxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLmNoa0RlYnVnLm9uY2xpY2sgPSAoZSkgPT4ge1xyXG4gICAgICAgICAgICBTZXR0aW5ncy5zdG9yZVByZWYoJ2RlYnVnJywgdGhpcy5jaGtEZWJ1Zy5jaGVja2VkKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgdXBkYXRlQ29udHJvbHMoKSB7XHJcblxyXG4gICAgICAgIC8vIFVwZGF0ZSBzZXR0aW5ncyBjb250cm9sc1xyXG4gICAgICAgIHRoaXMuY2hrQW5pbWF0aW9ucy5jaGVja2VkID0gSlNPTi5wYXJzZShTZXR0aW5ncy5nZXRQcmVmKCdkaXNhYmxlQW5pbWF0aW9ucycpKTtcclxuICAgICAgICB0aGlzLmNoa0JsdXIuY2hlY2tlZCA9IEpTT04ucGFyc2UoU2V0dGluZ3MuZ2V0UHJlZignZGlzYWJsZUJsdXInKSk7XHJcbiAgICAgICAgdGhpcy5jaGtEZWJ1Zy5jaGVja2VkID0gSlNPTi5wYXJzZShTZXR0aW5ncy5nZXRQcmVmKCdkZWJ1ZycpKTtcclxuXHJcbiAgICAgICAgaWYgKFNldHRpbmdzLmdldFByZWYoJ3NodWZmbGVNb2RlJykgPT09ICdyYW5kb20nKSAvLyBRdW90ZXMga2VlcCBhcHBlYXJpbmcgZHVlIHRvIEpTT04gc3RvcmFnZVxyXG4gICAgICAgICAgICB0aGlzLnJiUmFuZG9tLmNoZWNrZWQgPSB0cnVlO1xyXG4gICAgICAgIGVsc2VcclxuICAgICAgICAgICAgdGhpcy5yYlJlbGF0ZWQuY2hlY2tlZCA9IHRydWU7XHJcbiAgICB9XHJcblxyXG4gICAgdG9nZ2xlRGFzaGJvYXJkKCkge1xyXG4gICAgICAgIC8vIFNjcm9sbCB0byB0b3AgdG8gc2hvdyB0aGUgc2VhcmNoIGRpYWxvZ1xyXG4gICAgICAgIHdpbmRvdy5zY3JvbGxUbygwLCAwKTtcclxuXHJcbiAgICAgICAgdGhpcy5pc1Nob3duID0gIXRoaXMuaXNTaG93bjtcclxuICAgICAgICBpZiAodGhpcy5pc1Nob3duKSB7XHJcbiAgICAgICAgICAgICQoJyNkYXNoYm9hcmRNb2RhbENvbnRhaW5lcicpLmFkZENsYXNzKCdzaG93bicpO1xyXG4gICAgICAgICAgICBpZiAoJCh3aW5kb3cpLndpZHRoKCkgPD0gNzY4KVxyXG4gICAgICAgICAgICAgICAgJCgnYm9keScpLmNzcyh7J292ZXJmbG93LXknOiAnaGlkZGVuJ30pO1xyXG4gICAgICAgICAgICB0aGlzLnJlZnJlc2hRdWV1ZUNvbnRhaW5lcigpO1xyXG4gICAgICAgICAgICAvL2lmICh3aW5kb3cuaW5uZXJXaWR0aCA+IDc2OCkge1xyXG4gICAgICAgICAgICAgICAgJCgnI3BsYXllckhlcm8nKS5hZGRDbGFzcygndW5mb2N1c2VkJyk7XHJcbiAgICAgICAgICAgIC8vfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIC8vIFJlc2V0IGRpYWxvZyAobXVzdCBwbGFjZSB1cCBoZXJlIHRvIGFjY291bnQgZm9yIGludmFsaWQgaW5wdXQpXHJcbiAgICAgICAgICAgICQoJyNkYXNoYm9hcmRNb2RhbENvbnRhaW5lcicpLnJlbW92ZUNsYXNzKCdzaG93bicpOyAvLyBIaWRlIHRoZSBzZWFyY2ggbW9kYWxcclxuICAgICAgICAgICAgaWYgKCQod2luZG93KS53aWR0aCgpIDw9IDc2OCkgLy8gRm9yIG1vYmlsZSBVSVxyXG4gICAgICAgICAgICAgICAgJCgnYm9keScpLmNzcyh7J292ZXJmbG93LXknOiAnc2Nyb2xsJ30pO1xyXG5cclxuICAgICAgICAgICAgLy9pZiAod2luZG93LmlubmVyV2lkdGggPiA3NjgpIHtcclxuICAgICAgICAgICAgICAgICQoJyNwbGF5ZXJIZXJvJykucmVtb3ZlQ2xhc3MoJ3VuZm9jdXNlZCcpO1xyXG4gICAgICAgICAgICAvL31cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG5cclxuICAgIGhpZGVEYXNoYm9hcmQoKSB7XHJcbiAgICAgICAgLy8gUmVzZXQgZGlhbG9nIChtdXN0IHBsYWNlIHVwIGhlcmUgdG8gYWNjb3VudCBmb3IgaW52YWxpZCBpbnB1dClcclxuICAgICAgICAkKCcjZGFzaGJvYXJkTW9kYWxDb250YWluZXInKS5yZW1vdmVDbGFzcygnc2hvd24nKTsgLy8gSGlkZSB0aGUgc2VhcmNoIG1vZGFsXHJcbiAgICAgICAgaWYgKCQod2luZG93KS53aWR0aCgpIDw9IDc2OCkgLy8gRm9yIG1vYmlsZSBVSVxyXG4gICAgICAgICAgICAkKCdib2R5JykuY3NzKHsnb3ZlcmZsb3cteSc6ICdzY3JvbGwnfSk7XHJcbiAgICAgICAgdGhpcy5pc1Nob3duID0gZmFsc2U7XHJcbiAgICAgICAgLy9pZiAod2luZG93LmlubmVyV2lkdGggPiA3NjgpIHtcclxuICAgICAgICAgICAgJCgnI3BsYXllckhlcm8nKS5yZW1vdmVDbGFzcygndW5mb2N1c2VkJyk7XHJcbiAgICAgICAgLy99XHJcbiAgICB9XHJcbiAgICBcclxuICAgIHJlZnJlc2hRdWV1ZUNvbnRhaW5lcigpIHtcclxuICAgICAgICB0aGlzLnF1ZXVlQ29udGFpbmVyLmlubmVySFRNTCA9IGA8ZGl2PjwvZGl2PmA7IC8vIENsZWFyIHRoZSBjb250YWluZXJcclxuICAgICAgICBpZiAodGhpcy5fcGxheWVyLnF1ZXVlLmxlbmd0aCA+IDAgKSB7XHJcbiAgICAgICAgICAgIHRoaXMucXVldWVJdGVtQ291bnQgPSAwO1xyXG4gICAgICAgICAgICB0aGlzLnF1ZXVlZFRpbWUgPSAwO1xyXG4gICAgICAgICAgICBsZXQgcSA9IG51bGw7XHJcbiAgICAgICAgICAgIGxldCBmcmFnID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7O1xyXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gdGhpcy5fcGxheWVyLnF1ZXVlLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XHJcbiAgICAgICAgICAgICAgICBxID0gbmV3IFF1ZXVlSXRlbSh0aGlzLl9wbGF5ZXIsIHRoaXMuX3BsYXllci5xdWV1ZVtpXS50cmFjayk7XHJcbiAgICAgICAgICAgICAgICBmcmFnLmFwcGVuZENoaWxkKHEucmVuZGVyKCkpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5xdWV1ZWRUaW1lICs9IHEuX3RyYWNrLmR1cmF0aW9uO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5xdWV1ZUl0ZW1Db3VudCArPSAxO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMucXVldWVDb250YWluZXIuYXBwZW5kQ2hpbGQoZnJhZyk7XHJcblxyXG4gICAgICAgICAgICAkKCcucXVldWVEZWxldGUnKS5vbignY2xpY2snLCAoKSA9PiB7IC8vIEFkZCBldmVudCBoYW5kbGVyIG9uIGFsbCB0cmFja3MsIG5vdCB0aGUgbW9zdCBlZmZpY2llbnQ6IGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vcXVlc3Rpb25zLzExMjQ4ODU1L2hvdy1kby1pLXVzZS1qcXVlcnktZ2V0LXRoZS1pZC1vZi10aGUtZGl2LXdoaWNoLWhhcy1iZWVuLWNsaWNrZWQtb25cclxuICAgICAgICAgICAgICAgIGxldCBjdXJJbmRleCA9IHRoaXMuX3BsYXllci5xdWV1ZS5tYXAoKHRyYWNrKSA9PiB7cmV0dXJuIFN0cmluZyh0cmFjay5pZCl9KS5pbmRleE9mKFN0cmluZygkKGV2ZW50LmN1cnJlbnRUYXJnZXQpLmF0dHIoJ2RhdGEtaWQnKSkpOyAvLyBGaW5kIHRoZSBzb25nJ3MgaWQgYXNzb2NpYXRlZCB3aXRoIHRoaXMgb2JqZWN0IGluIHRoZSBxdWV1ZVxyXG4gICAgICAgICAgICAgICAgLy8gTk9URTogTXVzdCBjb252ZXJ0IG1hcHBlZCB2YXJzIHRvIHN0cmluZyBvciBzYW1lIGRhdGF0eXBlIGluIG9yZGVyIHRvIGNoZWNrIGZvciBlcXVhbGl0eVxyXG4gICAgICAgICAgICAgICAgaWYgKGN1ckluZGV4ID09PSAtMSkgcmV0dXJuOyAvLyBJbiBjYXNlIHdlIGNvdWxkbid0IGZpbmQgaXQsIHdoaWNoIGlzIGFuIGVycm9yXHJcbiAgICAgICAgICAgICAgICB0aGlzLl9wbGF5ZXIucXVldWUuc3BsaWNlKGN1ckluZGV4LCAxKTsgLy8gUmVtb3ZlIHRoZSBlbGVtZW50XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlZnJlc2hRdWV1ZUNvbnRhaW5lcigpOyAvLyBVcGRhdGUgdGhlIHF1ZXVlIGNvbnRhaW5lclxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLnF1ZXVlSXRlbUNvdW50ID0gMDtcclxuICAgICAgICAgICAgdGhpcy5xdWV1ZWRUaW1lID0gMDtcclxuICAgICAgICAgICAgLy8gTm90aWZpY2F0aW9uIHRoYXQgcXVldWUgaXMgZW1wdHlcclxuICAgICAgICAgICAgdGhpcy5xdWV1ZUNvbnRhaW5lci5pbm5lckhUTUwgPSBgPGRpdiBjbGFzcz1cInRleHQtY2VudGVyXCI+XHJcbiAgICAgICAgICAgICAgICA8aDYgY2xhc3M9XCJsaWdodFwiIHN0eWxlPVwiY29sb3I6ICM3MTc1Nzk7XCI+XHJcbiAgICAgICAgICAgICAgICBMb29rcyBsaWtlIHlvdXIgcXVldWUgaXMgZW1wdHkuIE5pbWJ1cyB3aWxsIGNvbnRpbnVlIHRvIGZldGNoIG11c2ljIGluIHRoZSBiYWNrZ3JvdW5kLjwvaDY+XHJcbiAgICAgICAgICAgIDwvZGl2PmA7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjdG90YWxRdWV1ZVRpbWUnKS5pbm5lclRleHQgPSBVdGlscy5jb252ZXJ0TWlsbGlzZWNvbmRzVG9EaWdpdGFsQ2xvY2sodGhpcy5xdWV1ZWRUaW1lKS5jbG9ja19sb25nICsgJywgJyArIHRoaXMuX3BsYXllci5xdWV1ZS5sZW5ndGggKyAnIHNvbmdzJztcclxuICAgIH1cclxuXHJcbiAgICBjbGVhclF1ZXVlKCkge1xyXG4gICAgICAgIHRoaXMuX3BsYXllci5xdWV1ZSA9IFtdOyAvLyBDbGVhciB0aGUgcXVldWVcclxuICAgICAgICB0aGlzLnF1ZXVlSXRlbUNvdW50ID0gMDtcclxuICAgICAgICB0aGlzLnF1ZXVlZFRpbWUgPSAwO1xyXG4gICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyN0b3RhbFF1ZXVlVGltZScpLmlubmVyVGV4dCA9IFV0aWxzLmNvbnZlcnRNaWxsaXNlY29uZHNUb0RpZ2l0YWxDbG9jayh0aGlzLnF1ZXVlZFRpbWUpLmNsb2NrX2xvbmcgKyAnLCAnICsgdGhpcy5fcGxheWVyLnF1ZXVlLmxlbmd0aCArICcgc29uZ3MnO1xyXG4gICAgICAgIHRoaXMucXVldWVDb250YWluZXIuaW5uZXJIVE1MID0gYDxkaXYgY2xhc3M9XCJ0ZXh0LWNlbnRlclwiPlxyXG4gICAgICAgICAgICAgICAgPGg2IGNsYXNzPVwibGlnaHRcIiBzdHlsZT1cImNvbG9yOiAjNzE3NTc5O1wiPlxyXG4gICAgICAgICAgICAgICAgTG9va3MgbGlrZSB5b3VyIHF1ZXVlIGlzIGVtcHR5LiBOaW1idXMgd2lsbCBjb250aW51ZSB0byBmZXRjaCBtdXNpYyBpbiB0aGUgYmFja2dyb3VuZC48L2g2PlxyXG4gICAgICAgICAgICA8L2Rpdj5gO1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBEYXNoYm9hcmQ7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9wdWJsaWMvY29udHJvbHMvZGFzaGJvYXJkLmpzXG4vLyBtb2R1bGUgaWQgPSA5XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsImltcG9ydCBVdGlscyBmcm9tICcuLi9qcy91dGlscyc7XHJcblxyXG5jbGFzcyBRdWV1ZUl0ZW0ge1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKHBsYXllciwgdHJhY2spIHtcclxuICAgICAgICB0aGlzLl9wbGF5ZXIgPSBwbGF5ZXI7XHJcbiAgICAgICAgdGhpcy5fdHJhY2sgPSB0cmFjaztcclxuXHJcbiAgICAgICAgdGhpcy5xdWV1ZUl0ZW0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICB0aGlzLnF1ZXVlSXRlbS5pbm5lckhUTUwgPSBgXHJcbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJxdWV1ZS1pdGVtXCI+XHJcbiAgICAgICAgICAgICAgICA8aDYgY2xhc3M9XCJ0aXRsZSBsaWdodCBidG4tdG9vbHRpcFwiIGRhdGEtdG9vbHRpcD1cIiR7dGhpcy5fdHJhY2sudGl0bGV9XCI+PHNwYW4+JHt0aGlzLl90cmFjay50aXRsZX08L3NwYW4+PGRpdiBjbGFzcz1cInB1bGwtcmlnaHRcIj4ke1V0aWxzLmNvbnZlcnRNaWxsaXNlY29uZHNUb0RpZ2l0YWxDbG9jayh0aGlzLl90cmFjay5kdXJhdGlvbikuY2xvY2t9PC9kaXY+PC9oNj5cclxuICAgICAgICAgICAgICAgIDxwIGNsYXNzPVwic3VidGl0bGVcIj48c3Bhbj4ke3RoaXMuX3RyYWNrLnVzZXIudXNlcm5hbWV9PC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwicXVldWUtaXRlbS1hY3Rpb25zIHB1bGwtcmlnaHRcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPGEgaHJlZj1cIiR7dGhpcy5fdHJhY2sucGVybWFsaW5rX3VybH1cIiB0YXJnZXQ9XCJfYmxhbmtcIj48c3BhbiBjbGFzcz1cImljb25cIj48aSBjbGFzcz1cImZhIGZhLWV4dGVybmFsLWxpbmstc3F1YXJlIHNtYWxsXCIgYXJpYS1oaWRkZW49XCJ0cnVlXCI+PC9pPjwvc3Bhbj48L2E+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwiaWNvbiBxdWV1ZURlbGV0ZVwiIGRhdGEtaWQ9XCIke3RoaXMuX3RyYWNrLmlkfVwiPjxpIGNsYXNzPVwiZmEgZmEtdGltZXMgc21hbGxcIiBhcmlhLWhpZGRlbj1cInRydWVcIj48L2k+PC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgICAgIDwvc3Bhbj5cclxuICAgICAgICAgICAgICAgIDwvcD5cclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgYDtcclxuICAgIH1cclxuXHJcbiAgICByZW5kZXIoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMucXVldWVJdGVtO1xyXG4gICAgfVxyXG5cclxuICAgIGJpbmRFdmVudHMoKSB7XHJcbiAgICAgICAgLy8gRXZlbnQgYmluZGVkIGluIHBsYXllci5qc1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBRdWV1ZUl0ZW07XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9wdWJsaWMvY29udHJvbHMvcXVldWVpdGVtLmpzXG4vLyBtb2R1bGUgaWQgPSAxMFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJpbXBvcnQgQ2hhcnRJdGVtIGZyb20gJy4vY2hhcnRpdGVtJ1xyXG5pbXBvcnQgVXRpbHMgZnJvbSAnLi4vanMvdXRpbHMnXHJcblxyXG5sZXQgU0MgPSByZXF1aXJlKCdzb3VuZGNsb3VkJyk7XHJcblxyXG5jbGFzcyBTZWFyY2gge1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKHBsYXllcikge1xyXG4gICAgICAgIHRoaXMuX3BsYXllciA9IHBsYXllcjtcclxuICAgICAgICB0aGlzLmlzU2hvd24gPSBmYWxzZTtcclxuICAgICAgICBcclxuICAgICAgICB0aGlzLnJlbmRlcigpO1xyXG4gICAgICAgIHRoaXMuYmluZEV2ZW50cygpO1xyXG5cclxuICAgICAgICB0aGlzLmxvYWRDaGFydHMoKTtcclxuICAgIH1cclxuXHJcbiAgICByZW5kZXIoKSB7XHJcbiAgICAgICAgLy8gQ3JlYXRlIHRoZSBzZWFyY2ggZGlhbG9nIGh0bWxcclxuICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjc2VhcmNoTW9kYWxDb250YWluZXInKS5pbm5lckhUTUwgKz0gYFxyXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwiaGVyby1ib2R5XCI+XHJcbiAgICAgICAgICAgICAgICA8ZGl2IGlkPVwic2VhcmNoQ2xvc2VCdG5cIiBjbGFzcz1cImRpYWxvZy1jbG9zZS1idG4gbGluay1idG5cIj5cclxuICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cImljb25cIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPGkgY2xhc3M9XCJmYSBmYS10aW1lc1wiIGFyaWEtaGlkZGVuPVwidHJ1ZVwiPjwvaT5cclxuICAgICAgICAgICAgICAgICAgICA8L3NwYW4+XHJcbiAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjb250ZW50XCI+XHJcbiAgICAgICAgICAgICAgICAgICAgPHNwYWNlIHN0eWxlPVwiaGVpZ2h0OiAyMHZoO1wiPjwvc3BhY2U+XHJcbiAgICAgICAgICAgICAgICAgICAgPGg2IGNsYXNzPVwidXBwZXJjYXNlXCI+U2VhcmNoIGZvciBzb25ncywgPHNwYW4gY2xhc3M9XCJzZWFyY2gtaXRlbVwiIGlkPVwic2VhcmNoU2V0c1wiPnNldHM8L3NwYW4+LCA8c3BhbiBjbGFzcz1cInNlYXJjaC1pdGVtXCIgaWQ9XCJzZWFyY2hVc2VyXCI+dXNlcnM8L3NwYW4+LCA8c3BhbiBjbGFzcz1cInNlYXJjaC1pdGVtXCIgaWQ9XCJzZWFyY2hUYWdzXCI+dGFnczwvc3Bhbj4sIGFuZCBtb3JlPC9oNj5cclxuICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT1cInRleHRcIiBwbGFjZWhvbGRlcj1cInNlYXJjaFwiIGlkPVwic2VhcmNoRmllbGRcIi8+XHJcbiAgICAgICAgICAgICAgICAgICAgPHNwYWNlPjwvc3BhY2U+XHJcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cIm92ZXJmbG93LWNvbnRhaW5lclwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwicm93IGxldmVsXCIgaWQ9XCJvcHRpb25zQ29udGFpbmVyXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgY2xhc3M9XCJidXR0b24tc3dpdGNoIGJ0bi10b29sdGlwXCIgZGF0YS10b29sdGlwPVwiU2h1ZmZsZSB0cmFja3MgYmVmb3JlIGFkZGluZyB0byBxdWV1ZS5cIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT1cImNoZWNrYm94XCIgbmFtZT1cInNodWZmbGVcIiB2YWx1ZT1cIlNodWZmbGVcIiBpZD1cImNoa1NodWZmbGVcIi8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJ1cHBlcmNhc2VcIj5TaHVmZmxlPC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9sYWJlbD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBjbGFzcz1cImJ1dHRvbi1zd2l0Y2ggYnRuLXRvb2x0aXBcIiBkYXRhLXRvb2x0aXA9XCJOdW1iZXIgb2YgcmVzdWx0cyB0byBxdWV1ZS5cIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT1cImNoZWNrYm94XCIgbmFtZT1cInJlc3VsdHNcIiB2YWx1ZT1cInJlc3VsdHNcIiBpZD1cImNoa051bWJlclwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGlkPVwiY2hrTnVtYmVyVGV4dFwiIGNsYXNzPVwidXBwZXJjYXNlXCI+MTIwIHJlc3VsdHM8L3NwYW4+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2xhYmVsPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICA8c3BhY2UgY2xhc3M9XCJ4LWxhcmdlXCI+PC9zcGFjZT5cclxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwicm93XCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJyb3cgbGV2ZWwgdG9nZ2xlLWNvbnRhaW5lclwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGgzIGNsYXNzPVwid2hpdGVcIj5GZWF0dXJlZDwvaDM+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIGlkPVwiY2hhcnRzLWJ0blwiIGNsYXNzPVwiYnRuLW5pbWJ1c1wiPlZpZXcgQWxsPC9idXR0b24+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwicm93IGZsZXggZXhwYW5kXCIgaWQ9XCJjaGFydENvbnRhaW5lclwiPlxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgIGA7XHJcbiAgICB9XHJcblxyXG4gICAgYmluZEV2ZW50cygpIHtcclxuICAgICAgICB0aGlzLnNlYXJjaENsb3NlQnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NlYXJjaENsb3NlQnRuJyk7XHJcbiAgICAgICAgdGhpcy5zZWFyY2hGaWVsZCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzZWFyY2hGaWVsZCcpO1xyXG4gICAgICAgIHRoaXMuY2hrU2h1ZmZsZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjaGtTaHVmZmxlJyk7XHJcbiAgICAgICAgdGhpcy5jaGtOdW1iZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY2hrTnVtYmVyJyk7XHJcbiAgICAgICAgdGhpcy5idG5DaGFydHMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY2hhcnRzLWJ0bicpO1xyXG5cclxuICAgICAgICB0aGlzLnNlYXJjaFNldHMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2VhcmNoU2V0cycpO1xyXG4gICAgICAgIHRoaXMuc2VhcmNoVXNlciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzZWFyY2hVc2VyJyk7XHJcbiAgICAgICAgdGhpcy5zZWFyY2hUYWdzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NlYXJjaFRhZ3MnKTtcclxuXHJcbiAgICAgICAgLy8gQmluZCBzZWFyY2ggZmllbGQga2V5IGNvbWJpbmF0aW9uXHJcbiAgICAgICAgdGhpcy5zZWFyY2hGaWVsZC5vbmtleWRvd24gPSAoZSkgPT4ge1xyXG4gICAgICAgICAgICBpZiAoZS5rZXlDb2RlID09PSAxMykge1xyXG4gICAgICAgICAgICAgICAgLy8gRURJVDogSWYgdGhlIHF1ZXVlIGlzIG5vbmVtcHR5LCBwcmVzZXJ2ZSB0aGUgcXVldWUgZWxlbWVudHMgYW5kIGp1c3QgaW5zZXJ0IHRoZSBzb25nIGluIGJldHdlZW4gaGlzdG9yeSBhbmQgcXVldWUgKG5vIGNvZGUpXHJcblxyXG4gICAgICAgICAgICAgICAgLy8gSGlkZSB0aGUgc2VhcmNoIGRpYWxvZ1xyXG4gICAgICAgICAgICAgICAgdGhpcy5oaWRlU2VhcmNoRGlhbG9nKCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnByb2Nlc3NTZWFyY2hGaWVsZCgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBkb2N1bWVudC5vbmtleXVwID0gKGUpID0+IHtcclxuICAgICAgICAgICAgaWYgKGUua2V5Q29kZSA9PT0gMjcpIHsgLy8gZXNjXHJcbiAgICAgICAgICAgICAgICB0aGlzLnRvZ2dsZVNlYXJjaERpYWxvZygpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBFdmVudCBoYW5kbGVyIGZvciBjbG9zZSBidXR0b24gZm9yIHNlYXJjaCBkaWFsb2dcclxuICAgICAgICB0aGlzLnNlYXJjaENsb3NlQnRuLm9uY2xpY2sgPSAoZSkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLmhpZGVTZWFyY2hEaWFsb2coKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuY2hrU2h1ZmZsZS5vbmNsaWNrID0gKGUpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5fcGxheWVyLnNodWZmbGVRdWV1ZSA9IHRoaXMuY2hrU2h1ZmZsZS5jaGVja2VkO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5jaGtOdW1iZXIub25jbGljayA9IChlKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0UmVzdWx0Q291bnQoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuc2VhcmNoU2V0cy5vbmNsaWNrID0gKGUpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5zZWFyY2hJdGVtQ2xpY2sodGhpcy5zZWFyY2hTZXRzKTtcclxuICAgICAgICAgICAgdGhpcy5zZWFyY2hGaWVsZC5mb2N1cygpO1xyXG4gICAgICAgIH0gIFxyXG5cclxuICAgICAgICB0aGlzLnNlYXJjaFVzZXIub25jbGljayA9IChlKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuc2VhcmNoSXRlbUNsaWNrKHRoaXMuc2VhcmNoVXNlcik7XHJcbiAgICAgICAgICAgIHRoaXMuc2VhcmNoRmllbGQuZm9jdXMoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuc2VhcmNoVGFncy5vbmNsaWNrID0gKGUpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5zZWFyY2hJdGVtQ2xpY2sodGhpcy5zZWFyY2hUYWdzKTtcclxuICAgICAgICAgICAgdGhpcy5zZWFyY2hGaWVsZC5mb2N1cygpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gRXZlbnQgaGFuZGxlciB0byBzaG93IHRoZSBjaGFydHNcclxuICAgICAgICB0aGlzLmJ0bkNoYXJ0cy5vbmNsaWNrID0gKGUpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5oaWRlU2VhcmNoRGlhbG9nKCk7XHJcbiAgICAgICAgICAgIHRoaXMuX3BsYXllci5jaGFydHNEaWFsb2cudG9nZ2xlQ2hhcnRzKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIHByb2Nlc3NTZWFyY2hGaWVsZCgpIHtcclxuICAgICAgICAvLyBDaGVjayBpZiBpbnB1dCBpcyBlbXB0eVxyXG4gICAgICAgIGlmICh0aGlzLnNlYXJjaEZpZWxkLnZhbHVlLmxlbmd0aCA9PT0gMClcclxuICAgICAgICAgICAgcmV0dXJuOyAvLyBFeGl0XHJcblxyXG4gICAgICAgIGxldCBpZnJhbWVJRCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd3aWRnZXR0ZXN0Jyk7XHJcbiAgICAgICAgdGhpcy5fcGxheWVyLmN1clBsYXllciA9IFNDLldpZGdldChpZnJhbWVJRCk7XHJcblxyXG4gICAgICAgIGxldCBzZWFyY2hRdWVyeSA9IHRoaXMuc2VhcmNoRmllbGQudmFsdWUudG9Mb3dlckNhc2UoKTsgLy8gQXNzaWduIHRoZSBzZWFyY2ggcXVlcnlcclxuXHJcbiAgICAgICAgLy8gRGV0ZXJtaW5lIGlucHV0IHR5cGVcclxuICAgICAgICBpZiAoc2VhcmNoUXVlcnkuc3RhcnRzV2l0aCgnaHR0cCcpICYmIGlzTmFOKHNlYXJjaFF1ZXJ5KSkgeyAvLyBDaGVjayBpZiB0aGlzIGlzIGEgdXJsXHJcbiAgICAgICAgICAgIHRoaXMuX3BsYXllci5pc1BsYXlsaXN0ID0gZmFsc2U7IC8vIFJlc2V0XHJcbiAgICAgICAgICAgIGlmIChzZWFyY2hRdWVyeS5pbmNsdWRlcygnc2V0cycpKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9wbGF5ZXIuaXNQbGF5bGlzdCA9IHRydWU7XHJcbiAgICAgICAgICAgIH0gICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvL3RoaXMuX3BsYXllci5jdXJQbGF5ZXIubG9hZChgJHtzZWFyY2hRdWVyeX1gKTtcclxuXHJcbiAgICAgICAgICAgIGxldCBwID0gdGhpcy5fcGxheWVyO1xyXG4gICAgICAgICAgICAvLyBSZXNvbHZlIHNvbmcgdXJsIHRocm91Z2ggQVBJXHJcbiAgICAgICAgICAgIFNDLnJlc29sdmUoc2VhcmNoUXVlcnkpLnRoZW4oKHJlc3BvbnNlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX3BsYXllci5xdWV1ZS5wdXNoKHtpZDogcmVzcG9uc2UuaWQsIHRyYWNrOiByZXNwb25zZX0pO1xyXG4gICAgICAgICAgICAgICAgICAgIFV0aWxzLnNob3dUb2FzdChgQWRkZWQgJHtyZXNwb25zZS50aXRsZX0gdG8gdGhlIHF1ZXVlLmApO1xyXG4gICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdwcm9jZXNzU2VhcmNoRmllbGQgRXJyb3IgLSAnICsgZS5tZXNzYWdlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSBlbHNlIGlmIChpc05hTihzZWFyY2hRdWVyeSkpIHsgLy8gQ2hlY2sgaWYgdGhpcyBpcyBhIHN0cmluZyBxdWVyeVxyXG4gICAgICAgICAgICAvLyBDaGVjayB0YWdzXHJcbiAgICAgICAgICAgIGlmIChzZWFyY2hRdWVyeS5zdGFydHNXaXRoKCdwbGF5bGlzdDonKSB8fCBzZWFyY2hRdWVyeS5zdGFydHNXaXRoKCdzZXQ6JykpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX3BsYXllci5nZXRTZXRCeUtleVdvcmQoc2VhcmNoUXVlcnkuc3BsaXQoJzonKVsxXS50cmltKCkpO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKHNlYXJjaFF1ZXJ5LnN0YXJ0c1dpdGgoJ3RhZzonKSB8fCBzZWFyY2hRdWVyeS5zdGFydHNXaXRoKCd0YWdzOicpKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9wbGF5ZXIuZ2V0VHJhY2tzQnlUYWdzKHNlYXJjaFF1ZXJ5LnNwbGl0KCc6JylbMV0udHJpbSgpKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuX3BsYXllci5pc1BsYXlsaXN0ID0gZmFsc2U7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoc2VhcmNoUXVlcnkuc3RhcnRzV2l0aCgndXNlcjonKSl7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9wbGF5ZXIuZ2V0VHJhY2tzQnlVc2VyKHNlYXJjaFF1ZXJ5LnNwbGl0KCc6JylbMV0udHJpbSgpKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuX3BsYXllci5pc1BsYXlsaXN0ID0gZmFsc2U7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoc2VhcmNoUXVlcnkuc3RhcnRzV2l0aCgnZ2VucmU6JykgfHwgc2VhcmNoUXVlcnkuc3RhcnRzV2l0aCgnZ2VucmVzOicpKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9wbGF5ZXIuZ2V0VHJhY2tzQnlHZW5yZXMoc2VhcmNoUXVlcnkuc3BsaXQoJzonKVsxXS50cmltKCkpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fcGxheWVyLmlzUGxheWxpc3QgPSBmYWxzZTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX3BsYXllci5nZXRUcmFja0J5S2V5V29yZChzZWFyY2hRdWVyeSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9wbGF5ZXIuaXNQbGF5bGlzdCA9IGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIHsgLy8gTXVzdCBiZSBhIHNvbmcgSURcclxuICAgICAgICAgICAgdGhpcy5fcGxheWVyLmN1clBsYXllci5sb2FkKGBodHRwcyUzQS8vYXBpLnNvdW5kY2xvdWQuY29tL3RyYWNrcy8ke3NlYXJjaFF1ZXJ5fWApOyAvLyBGb3IgaWRcclxuICAgICAgICAgICAgdGhpcy5fcGxheWVyLmlzUGxheWxpc3QgPSBmYWxzZTtcclxuICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB0aGlzLl9wbGF5ZXIubG9hZFdpZGdldFNvbmcodGhpcy5fcGxheWVyLmN1clBsYXllciksIDIwMDApOyAvLyBOZWVkcyBsb25nZXIgZGVsYXkgdGltZSBzbyBpdCBwcmV2ZW50cyBzdGFsbGluZyAodHJhY2sgbm90IGF1dG8gcGxheWluZylcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgdG9nZ2xlU2VhcmNoRGlhbG9nKCkge1xyXG4gICAgICAgIC8vIFNjcm9sbCB0byB0b3AgdG8gc2hvdyB0aGUgc2VhcmNoIGRpYWxvZ1xyXG4gICAgICAgIHdpbmRvdy5zY3JvbGxUbygwLCAwKTtcclxuXHJcbiAgICAgICAgdGhpcy5pc1Nob3duID0gIXRoaXMuaXNTaG93bjtcclxuICAgICAgICBpZiAodGhpcy5pc1Nob3duKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2VhcmNoRmllbGQudmFsdWUgPSBcIlwiO1xyXG4gICAgICAgICAgICB0aGlzLnNlYXJjaEZpZWxkLmZvY3VzKCk7XHJcbiAgICAgICAgICAgICQoJyNzZWFyY2hNb2RhbENvbnRhaW5lcicpLmFkZENsYXNzKCdzaG93bicpO1xyXG4gICAgICAgICAgICBpZiAoJCh3aW5kb3cpLndpZHRoKCkgPD0gNzY4KVxyXG4gICAgICAgICAgICAgICAgJCgnYm9keScpLmNzcyh7J292ZXJmbG93LXknOiAnaGlkZGVuJ30pO1xyXG5cclxuICAgICAgICAgICAgLy9pZiAod2luZG93LmlubmVyV2lkdGggPiA3NjgpIHtcclxuICAgICAgICAgICAgICAgICQoJyNwbGF5ZXJIZXJvJykuYWRkQ2xhc3MoJ3VuZm9jdXNlZCcpO1xyXG4gICAgICAgICAgICAvL31cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAvLyBSZXNldCBkaWFsb2cgKG11c3QgcGxhY2UgdXAgaGVyZSB0byBhY2NvdW50IGZvciBpbnZhbGlkIGlucHV0KVxyXG4gICAgICAgICAgICAkKCcjc2VhcmNoTW9kYWxDb250YWluZXInKS5yZW1vdmVDbGFzcygnc2hvd24nKTsgLy8gSGlkZSB0aGUgc2VhcmNoIG1vZGFsXHJcbiAgICAgICAgICAgIGlmICgkKHdpbmRvdykud2lkdGgoKSA8PSA3NjgpIC8vIEZvciBtb2JpbGUgVUlcclxuICAgICAgICAgICAgICAgICQoJ2JvZHknKS5jc3MoeydvdmVyZmxvdy15JzogJ3Njcm9sbCd9KTtcclxuXHJcbiAgICAgICAgICAgIC8vaWYgKHdpbmRvdy5pbm5lcldpZHRoID4gNzY4KSB7XHJcbiAgICAgICAgICAgICAgICAkKCcjcGxheWVySGVybycpLnJlbW92ZUNsYXNzKCd1bmZvY3VzZWQnKTtcclxuICAgICAgICAgICAgLy99XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuXHJcbiAgICBoaWRlU2VhcmNoRGlhbG9nKCkge1xyXG4gICAgICAgIC8vIFJlc2V0IGRpYWxvZyAobXVzdCBwbGFjZSB1cCBoZXJlIHRvIGFjY291bnQgZm9yIGludmFsaWQgaW5wdXQpXHJcbiAgICAgICAgJCgnI3NlYXJjaE1vZGFsQ29udGFpbmVyJykucmVtb3ZlQ2xhc3MoJ3Nob3duJyk7IC8vIEhpZGUgdGhlIHNlYXJjaCBtb2RhbFxyXG4gICAgICAgIGlmICgkKHdpbmRvdykud2lkdGgoKSA8PSA3NjgpIC8vIEZvciBtb2JpbGUgVUlcclxuICAgICAgICAgICAgJCgnYm9keScpLmNzcyh7J292ZXJmbG93LXknOiAnc2Nyb2xsJ30pO1xyXG5cclxuICAgICAgICAvL2lmICh3aW5kb3cuaW5uZXJXaWR0aCA+IDc2OCkge1xyXG4gICAgICAgICAgICAkKCcjcGxheWVySGVybycpLnJlbW92ZUNsYXNzKCd1bmZvY3VzZWQnKTtcclxuICAgICAgICAvL31cclxuICAgICAgICB0aGlzLmlzU2hvd24gPSBmYWxzZTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBTZWFyY2ggdGFnIGJ1dHRvbnNcclxuICAgIHNlYXJjaEl0ZW1DbGljayhlbGVtZW50KSB7XHJcbiAgICAgICAgc3dpdGNoIChlbGVtZW50LmlkKSB7XHJcbiAgICAgICAgICAgIGNhc2UgJ3NlYXJjaFNldHMnOlxyXG4gICAgICAgICAgICAgICAgdGhpcy5zZWFyY2hGaWVsZC52YWx1ZSA9ICdzZXQ6ICc7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSAnc2VhcmNoVXNlcic6XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNlYXJjaEZpZWxkLnZhbHVlID0gJ3VzZXI6ICc7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSAnc2VhcmNoVGFncyc6XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNlYXJjaEZpZWxkLnZhbHVlID0gJ3RhZ3M6ICc7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHNldFJlc3VsdENvdW50KCkge1xyXG4gICAgICAgIGxldCBjb3VudCA9IHByb21wdCgnSG93IG1hbnkgcmVzdWx0cyBkbyB5b3Ugd2FudCB0byBxdWV1ZT8nKTtcclxuXHJcbiAgICAgICAgaWYgKGNvdW50ID09PSBudWxsIHx8ICFpc0Zpbml0ZShjb3VudCkpIHtcclxuICAgICAgICAgICAgVXRpbHMuc2hvd1RvYXN0KCdQbGVhc2UgZW50ZXIgYSBudW1lcmljYWwgdmFsdWUgYW5kIHRyeSBhZ2Fpbi4nKTtcclxuICAgICAgICAgICAgdGhpcy5jaGtOdW1iZXIuY2hlY2tlZCA9IGZhbHNlO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgICQoJyNjaGtOdW1iZXJUZXh0JykudGV4dChgJHtjb3VudH0gcmVzdWx0c2ApO1xyXG4gICAgICAgIHRoaXMuX3BsYXllci5xdWV1ZU51bSA9IGNvdW50O1xyXG4gICAgfVxyXG5cclxuICAgIGxvYWRDaGFydHMoKSB7XHJcbiAgICAgICAgbGV0IGMgPSBudWxsO1xyXG4gICAgICAgIHRoaXMuY2hhcnRDb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjY2hhcnRDb250YWluZXInKTtcclxuICAgICAgICAkLmFqYXgoe1xyXG4gICAgICAgICAgICB1cmw6ICdodHRwOi8vcG9sYXJpdHkueDEwLm14L25pbWJ1cy9mZWF0dXJlZC5qc29uJyxcclxuICAgICAgICAgICAgdHlwZTogXCJHRVRcIixcclxuICAgICAgICAgICAgZGF0YVR5cGU6J2pzb24nLCBcclxuICAgICAgICAgICAgc3VjY2VzczogKGRhdGEpID0+IHtcclxuICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZGF0YS5jb2xsZWN0aW9uLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYyA9IG5ldyBDaGFydEl0ZW0odGhpcy5fcGxheWVyLCBkYXRhLmNvbGxlY3Rpb25baV0uY2hhcnQudGl0bGUsIGRhdGEuY29sbGVjdGlvbltpXS5jaGFydC5hdXRob3IsIGRhdGEuY29sbGVjdGlvbltpXS5jaGFydC5raW5kLCBkYXRhLmNvbGxlY3Rpb25baV0uY2hhcnQuZ2VucmVfdXJsLCBkYXRhLmNvbGxlY3Rpb25baV0uY2hhcnQubGltaXQsIGRhdGEuY29sbGVjdGlvbltpXS5jaGFydC5pbWFnZV91cmwpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2hhcnRDb250YWluZXIuYXBwZW5kQ2hpbGQoYy5yZW5kZXIoKSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICBcclxuICAgIH1cclxuXHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IFNlYXJjaDtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3B1YmxpYy9jb250cm9scy9zZWFyY2guanNcbi8vIG1vZHVsZSBpZCA9IDExXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsImNvbnN0IFNvbmdJbmZvID0gKGxhcmdlQXJ0LCB0cmFjaywgdGFncywgZXJyb3JQdXJjaGFzZSkgPT4gKFxyXG4gICAgYFxyXG4gICAgICAgIDxkaXYgY2xhc3M9XCJjYXJkIGxldmVsXCI+XHJcbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjb250ZW50LW5vLXBhZGRpbmcgdGV4dC1jZW50ZXJcIj5cclxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwicm93IGNlbnRlclwiIGlkPVwiYXJ0Q29udGFpbmVyXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjb2wtMTIgbm8tbWFyZ2luIG5vLXBhZGRpbmdcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJmbGlwQ29udGFpbmVyXCIgaWQ9XCJmbGlwQ29udGFpbmVyXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGltZyBpZD1cInNvbmdBcnRcIiBzcmM9XCIke2xhcmdlQXJ0fVwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJzb25nLWRlc2NcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNvbnRlbnQtbm8tcGFkZGluZ1wiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInJvdyB0ZXh0LWNlbnRlclwiIGlkPVwiZGVzY05hdkJhclwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9XCJidG4tdHJhbnNwYXJlbnRcIiBpZD1cImRlc2MtbGlrZXNcIj48aSBjbGFzcz1cImZhIGZhLWhlYXJ0IHNtYWxsXCIgYXJpYS1oaWRkZW49XCJ0cnVlXCI+PC9pPjxzcGFuPiR7dHJhY2subGlrZXNfY291bnR9PC9zcGFuPjwvYnV0dG9uPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxhIGhyZWY9XCIke3RyYWNrLnBlcm1hbGlua191cmwgKyAnL2NvbW1lbnRzJ31cIiB0YXJnZXQ9XCJfYmxhbmtcIj48YnV0dG9uIGNsYXNzPVwiYnRuLXRyYW5zcGFyZW50XCIgaWQ9XCJkZXNjLWNvbW1lbnRzXCI+PGkgY2xhc3M9XCJmYSBmYS1jb21tZW50IHNtYWxsXCIgYXJpYS1oaWRkZW49XCJ0cnVlXCI+PC9pPjxzcGFuPiR7dHJhY2suY29tbWVudF9jb3VudCB8fCAwfTwvc3Bhbj48L2J1dHRvbj48L2E+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz1cImJ0bi10cmFuc3BhcmVudFwiIGlkPVwiZGVzYy1yZXBvc3RzXCI+PGkgY2xhc3M9XCJmYSBmYS1yZXR3ZWV0IHNtYWxsXCIgYXJpYS1oaWRkZW49XCJ0cnVlXCI+PC9pPjxzcGFuPiR7dHJhY2sucmVwb3N0c19jb3VudH08L3NwYW4+PC9idXR0b24+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGEgaHJlZj1cIiR7dHJhY2sudXNlci5wZXJtYWxpbmtfdXJsfVwiIHRhcmdldD1cIl9ibGFua1wiPjxidXR0b24gY2xhc3M9XCJidG4tdHJhbnNwYXJlbnRcIiBpZD1cImRlc2MtdXNlclwiPjxpIGNsYXNzPVwiZmEgZmEtdXNlciBzbWFsbFwiIGFyaWEtaGlkZGVuPVwidHJ1ZVwiPjwvaT48c3Bhbj4ke3RyYWNrLnVzZXIudXNlcm5hbWV9PC9zcGFuPjwvYnV0dG9uPjwvYT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YSBocmVmPVwiJHt0cmFjay51c2VyLnB1cmNoYXNlX3VybCB8fCBlcnJvclB1cmNoYXNlfVwiIHRhcmdldD1cIl9ibGFua1wiPjxidXR0b24gY2xhc3M9XCJidG4tdHJhbnNwYXJlbnRcIiBpZD1cImRlc2MtYnV5XCI+PGkgY2xhc3M9XCJmYSBmYS11c2Qgc21hbGxcIiBhcmlhLWhpZGRlbj1cInRydWVcIj48L2k+PHNwYW4+UHVyY2hhc2U8L3NwYW4+PC9idXR0b24+PC9hPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwicm93IHRleHQtY2VudGVyXCIgaWQ9XCJkZXNjU3RhdHNcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cD5DcmVhdGVkOiAke3RyYWNrLmNyZWF0ZWRfYXQuc3BsaXQoJ1QnKVswXS5yZXBsYWNlKC8tL2csICcgLyAnKX08L3A+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJyb3dcIiBpZD1cImRlc2NUYWdzXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHt0YWdzfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhY2UgY2xhc3M9XCJsYXJnZVwiPjwvc3BhY2U+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjb250ZW50XCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cHJlPiR7dHJhY2suZGVzY3JpcHRpb24gfHwgJ05vIGRlc2NyaXB0aW9uIGF2YWlsYWJsZS4nfTwvcHJlPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICA8aDUgaWQ9XCJ0cmFja1RpdGxlXCIgY2xhc3M9XCJsaWdodFwiPiR7dHJhY2sudGl0bGV9PC9oNT5cclxuICAgICAgICAgICAgICAgICAgICA8cCBjbGFzcz1cInRpdGxlIHVwcGVyY2FzZVwiIGlkPVwidHJhY2tVc2VyXCI+JHt0cmFjay51c2VyLnVzZXJuYW1lfTwvcD5cclxuICAgICAgICAgICAgICAgICAgICA8cCBjbGFzcz1cInN1YnRpdGxlXCIgaWQ9XCJjdXJUaW1lXCI+MDowMCAvIDQ6MjA8L3A+XHJcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cIndhdmVmb3JtXCI+PC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgPHNwYWNlPjwvc3BhY2U+XHJcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImxldmVsXCIgaWQ9XCJ2b2x1bWVDb250YWluZXJcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJpY29uXCI+PGkgY2xhc3M9XCJmYSBmYS12b2x1bWUtb2ZmXCIgYXJpYS1oaWRkZW49XCJ0cnVlXCI+PC9pPjwvc3Bhbj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IGlkPVwidm9sdW1lU2xpZGVyXCIgdHlwZT1cInJhbmdlXCIgbWluPVwiMFwiIG1heD1cIjEwMFwiIHZhbHVlPVwiMFwiIGNsYXNzPVwicmFuZ2VcIi8+XHJcbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgYFxyXG4pO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgU29uZ0luZm9cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3B1YmxpYy9jb250cm9scy9zb25naW5mby5qc1xuLy8gbW9kdWxlIGlkID0gMTJcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiLyoqXHJcbiAqIERyYXdzIHRoZSB3YXZlZm9ybSBjb21wb25lbnQgb2YgdGhlIHBsYXllci5cclxuICovXHJcbmltcG9ydCBTZXR0aW5ncyBmcm9tICcuLi9qcy9zZXR0aW5ncyc7XHJcbmxldCBTQyA9IHJlcXVpcmUoJ3NvdW5kY2xvdWQnKTtcclxuXHJcbmNsYXNzIFdhdmVGb3JtIHtcclxuXHJcbiAgICAvKipcclxuICAgICAqIENvbnN0cnVjdG9yIGZvciB0aGUgd2F2ZWZvcm1cclxuICAgICAqIEBwYXJhbSB7V2F2ZUZvcm1Db25maWd9IC0ge1xyXG4gICAgICAgICAgICBjb250YWluZXI6IEhUTUxFbGVtZW50LFxyXG4gICAgICAgICAgICBhdWRpbzogQXVkaW8sXHJcbiAgICAgICAgICAgIGRhdGE6IEFycmF5LFxyXG4gICAgICAgICAgICBwZWFrV2lkdGg6IG51bWJlcixcclxuICAgICAgICAgICAgcGVha1NwYWNlOiBudW1iZXIsXHJcbiAgICAgICAgICAgIHJlc3BvbnNpdmU6IGJvb2xlYW4sXHJcbiAgICAgICAgICAgIG1vdXNlT3ZlckV2ZW50czogYm9vbGVhbixcclxuICAgICAgICAgICAgY29sb3I6IHtcclxuICAgICAgICAgICAgICAgIGJhY2tncm91bmQ6IHN0cmluZyxcclxuICAgICAgICAgICAgICAgIGZvb3Rlcjogc3RyaW5nLFxyXG4gICAgICAgICAgICAgICAgZm9vdGVyUGxheWJhY2s6IHN0cmluZyxcclxuICAgICAgICAgICAgICAgIGhvdmVyR3JhZGllbnQ6IHtcclxuICAgICAgICAgICAgICAgICAgICBmcm9tOiBzdHJpbmcsXHJcbiAgICAgICAgICAgICAgICAgICAgdG86IHN0cmluZ1xyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICBwbGF5YmFja0dyYWRpZW50OiB7XHJcbiAgICAgICAgICAgICAgICAgICAgZnJvbTogc3RyaW5nLFxyXG4gICAgICAgICAgICAgICAgICAgIHRvOiBzdHJpbmdcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgaG92ZXJQbGF5YmFja0dyYWRpZW50OiB7XHJcbiAgICAgICAgICAgICAgICAgICAgZnJvbTogc3RyaW5nLFxyXG4gICAgICAgICAgICAgICAgICAgIHRvOiBzdHJpbmdcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAqL1xyXG4gICAgY29uc3RydWN0b3IocGFyYW1zKSB7XHJcbiAgICAgICAgdGhpcy5jdXJyZW50UG9zaXRpb24gPSAwO1xyXG4gICAgICAgIHRoaXMuZHVyYXRpb24gPSAwO1xyXG4gICAgICAgIHRoaXMubW91c2VPdmVyID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5jYW52YXMgPSBudWxsO1xyXG5cclxuICAgICAgICB0aGlzLndhdmVGb3JtRnJhbWUgPSAwO1xyXG4gICAgICAgIHRoaXMudXBkYXRlSW50ZXJ2YWwgPSAoU2V0dGluZ3MuZ2V0UHJlZignYmF0dGVyeVNhdmVyJykgPyAxMDAgOiAxMCk7IC8vIFVwZGF0ZSBldmVyeSB3aGF0ZXZlciBtZXRyaWMgU0MgdXNlc1xyXG5cclxuICAgICAgICAvLyBDcmVhdGUgdGhlIGNvbmZpZyBmaWxlIGZvciB0aGUgd2F2ZWZvcm0gc2V0dGluZ3NcclxuICAgICAgICB0aGlzLmNvbmZpZyA9IHtcclxuICAgICAgICAgICAgY29udGFpbmVyOiBudWxsLFxyXG4gICAgICAgICAgICBhdWRpbzogbnVsbCxcclxuICAgICAgICAgICAgZHVyYXRpb246IDAsXHJcbiAgICAgICAgICAgIGRhdGE6IG51bGwsXHJcbiAgICAgICAgICAgIHBlYWtXaWR0aDogMiwgLy8gUGl4ZWwgd2lkdGggb2YgdGhlIHZlcnRpY2FsIGxpbmVzIGluIHRoZSB3YXZlZm9ybVxyXG4gICAgICAgICAgICBwZWFrU3BhY2U6IDIsIC8vIFRoZSBzcGFjZSBiZXR3ZWVuIHRoZSBwZWFrcyBpbiBwaXhlbHNcclxuICAgICAgICAgICAgcmVzcG9uc2l2ZTogdHJ1ZSxcclxuICAgICAgICAgICAgbW91c2VPdmVyRXZlbnRzOiB0cnVlLFxyXG4gICAgICAgICAgICBtb3VzZUNsaWNrRXZlbnRzOiB0cnVlLFxyXG4gICAgICAgICAgICAvLyBDb2xvciBjb25maWdcclxuICAgICAgICAgICAgY29sb3I6IHtcclxuICAgICAgICAgICAgICAgIGJhY2tncm91bmQ6IFwiIzhDOEM4Q1wiLFxyXG4gICAgICAgICAgICAgICAgZm9vdGVyOiBcIiNCMkIyQjJcIixcclxuICAgICAgICAgICAgICAgIGZvb3RlclBsYXliYWNrOiBcIiNGRkFBODBcIixcclxuICAgICAgICAgICAgICAgIGhvdmVyR3JhZGllbnQ6IHtcclxuICAgICAgICAgICAgICAgIGZyb206IFwiI0ZGNzIwMFwiLFxyXG4gICAgICAgICAgICAgICAgdG86IFwiI0RBNDIxOFwiXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgcGxheWJhY2tHcmFkaWVudDoge1xyXG4gICAgICAgICAgICAgICAgICAgIGZyb206IFwiI0ZGNzIwMFwiLFxyXG4gICAgICAgICAgICAgICAgICAgIHRvOiBcIiNEQTQyMThcIlxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIGhvdmVyUGxheWJhY2tHcmFkaWVudDoge1xyXG4gICAgICAgICAgICAgICAgICAgIGZyb206IFwiI0FCNUQyMFwiLFxyXG4gICAgICAgICAgICAgICAgICAgIHRvOiBcIiNBODQwMjRcIlxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTsgLy8gQ29uZmlnIG9iamVjdCBlbmRcclxuXHJcbiAgICAgICAgaWYgKHBhcmFtcykgeyAvLyBDaGVjayBpZiBub3QgbnVsbFxyXG4gICAgICAgICAgICBPYmplY3QuYXNzaWduKHRoaXMuY29uZmlnLCBwYXJhbXMpOyAvLyBFbnVtZXJhdGUgdGhyb3VnaCBmaWVsZHMgYW5kIGFzc2lnbiB0aGVtIHRvIGNvcnJlc3BvbmRpbmcgZmllbGRzIGluIHRoaXMuY29uZmlnIChTaW1pbGFyIHRvIHNlcmlhbGl6aW5nKVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gVXBkYXRlIGR1cmF0aW9uXHJcbiAgICAgICAgdGhpcy5kdXJhdGlvbiA9IHRoaXMuY29uZmlnLmR1cmF0aW9uO1xyXG5cclxuICAgICAgICB0aGlzLmJ1aWxkQ2FudmFzKCk7XHJcbiAgICAgICAgdGhpcy5iaW5kRXZlbnRzKCk7XHJcbiAgICAgICAgdGhpcy5kcmF3V2F2ZUZvcm0oKTsgLy8gRHJhdyB0aGUgd2F2ZWZvcm1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIENyZWF0ZSB0aGUgY2FudmFzXHJcbiAgICAgKi9cclxuICAgIGJ1aWxkQ2FudmFzKCkge1xyXG4gICAgICAgIHRoaXMuY2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnY2FudmFzJyk7IC8vIENyZWF0ZSB0aGUgY2FudmFzIGVsZW1lbnRcclxuICAgICAgICB0aGlzLmNvbmZpZy5jb250YWluZXIuYXBwZW5kQ2hpbGQodGhpcy5jYW52YXMpOyAvLyBVcGRhdGUgdGhlIGNvbnRhaW5lciB0byB0aGUgY2FudmFzIG9iamVjdFxyXG4gICAgICAgIHRoaXMudXBkYXRlQ2FudmFzU2l6ZSgpO1xyXG4gICAgICAgIHRoaXMuY3R4ID0gdGhpcy5jYW52YXMuZ2V0Q29udGV4dCgnMmQnKTtcclxuICAgICAgICB0aGlzLmN0eC5saW5lV2lkdGggPSB0aGlzLmNvbmZpZy5wZWFrV2lkdGg7IC8vIFNldHMgdGhlIHdpZHRoIG9mIGVhY2ggdmVydGljYWwgbGluZSBpbiB0aGUgY2FudmFzLlxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQmluZCB3YXZlZm9ybSBldmVudHNcclxuICAgICAqL1xyXG4gICAgYmluZEV2ZW50cygpIHtcclxuICAgICAgICBpZiAodGhpcy5jb25maWcucmVzcG9uc2l2ZSkgLy8gSWYgd2F2ZWZvcm0gaXMgcmVzcG9uc2l2ZSwgcmVzaXplIHdpdGggcGFyZW50LlxyXG4gICAgICAgICAgICB0aGlzLm9uUmVzaXplSGFuZGxlcigpO1xyXG5cclxuICAgICAgICBpZiAodGhpcy5jb25maWcubW91c2VPdmVyRXZlbnRzKSB7IC8vIEVuYWJsZSBtb3VzZSBvdmVyL2xlYXZlIGV2ZW50c1xyXG4gICAgICAgICAgICB0aGlzLm9uTW91c2VNb3ZlSGFuZGxlcigpO1xyXG4gICAgICAgICAgICB0aGlzLm9uTW91c2VMZWF2ZUhhbmRsZXIoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh0aGlzLmNvbmZpZy5tb3VzZUNsaWNrRXZlbnRzKSAvLyBFbmFibGUgbW91c2UgY2xpY2sgaGFuZGxpbmdcclxuICAgICAgICAgICAgdGhpcy5vbk1vdXNlQ2xpY2tIYW5kbGVyKCk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgaWYgKHRoaXMuY29uZmlnLmF1ZGlvKSB7IC8vIFRPRE86IE5lZWQgdG8gZmlndXJlIG91dCBob3cgdG8gYmluZCB3aXRoIHdpZGdldCBBUEksIG5vdCByZWd1bGFyIEFQSS5cclxuICAgICAgICAgICAgdGhpcy5vblRpbWVVcGRhdGVIYW5kbGVyKCk7XHJcbiAgICAgICAgICAgIHRoaXMub25DYW5QbGF5SGFuZGxlcigpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEVWRU5UIEhBTkRMRVJTXHJcbiAgICAgKi9cclxuXHJcbiAgICAgLyoqXHJcbiAgICAgICogVGhpcyBmaXJlcyB3aGVuIHRoZSB3aWRnZXQgaXMgcmVhZHkgYW5kIHVwZGF0ZXMgdGhlIHdhdmVmb3JtIGJ5IGR1cmF0aW9uIGFuZCBjdXJyZW50IHRpbWUuXHJcbiAgICAgICogTk9URTogVGhpcyBldmVudCBtaWdodCBub3QgYmUgZmlyZWQuXHJcbiAgICAgICovXHJcbiAgICBvbkNhblBsYXlIYW5kbGVyKCkge1xyXG4gICAgICAgIC8vIFJFQURZIHNpZ25hbCBtaWdodCBub3QgYmUgbmVlZGVkXHJcbiAgICAgICAgdGhpcy5jb25maWcuYXVkaW8uYmluZChTQy5XaWRnZXQuRXZlbnRzLlJFQURZLCAoZSkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLmN1cnJlbnRQb3NpdGlvbiA9IHRoaXMuY29uZmlnLmF1ZGlvLmN1cnJlbnRQb3NpdGlvbjtcclxuICAgICAgICAgICAgdGhpcy5kcmF3V2F2ZUZvcm0oKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEV2ZW50IGZpcmVkIHdoZW4gdGltZSB1cGRhdGVzIGluIHRoZSB3aWRnZXQgb2JqZWN0XHJcbiAgICAgKi9cclxuICAgIG9uVGltZVVwZGF0ZUhhbmRsZXIoKSB7XHJcbiAgICAgICAgdGhpcy5jb25maWcuYXVkaW8uYmluZChTQy5XaWRnZXQuRXZlbnRzLlBMQVlfUFJPR1JFU1MsIChlKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuY3VycmVudFBvc2l0aW9uID0gZS5jdXJyZW50UG9zaXRpb247XHJcbiAgICAgICAgICAgIHRoaXMud2F2ZUZvcm1GcmFtZSsrO1xyXG4gICAgICAgICAgICBpZiAodGhpcy53YXZlRm9ybUZyYW1lICUgdGhpcy51cGRhdGVJbnRlcnZhbCA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5kcmF3V2F2ZUZvcm0oKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogVXBkYXRlIHdhdmVmb3JtIGNvbG9ycyBiYXNlZCBvbiBtb3VzZSBsb2NhdGlvblxyXG4gICAgICovXHJcbiAgICBvbk1vdXNlTW92ZUhhbmRsZXIoKSB7XHJcbiAgICAgICAgdGhpcy5jYW52YXMuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywgZXZlbnQgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLm1vdXNlT3ZlciA9IHRoaXMuZ2V0TW91c2VQb3NpdGlvbihldmVudCk7IC8vIEFzc2lnbiBjb29yZHMgdG8gbW91c2VPdmVyXHJcbiAgICAgICAgICAgIHRoaXMuZHJhd1dhdmVGb3JtKCk7IC8vIFVwZGF0ZSB3YXZlZm9ybVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogSGFuZGxlcyB3aGVuIHRoZSBtb3VzZSBsZWF2ZXMgdGhlIHdhdmVmb3JtIGFyZWFcclxuICAgICAqL1xyXG4gICAgb25Nb3VzZUxlYXZlSGFuZGxlcigpIHtcclxuICAgICAgICB0aGlzLmNhbnZhcy5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWxlYXZlJywgKCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLm1vdXNlT3ZlciA9IG51bGw7XHJcbiAgICAgICAgICAgIHRoaXMuZHJhd1dhdmVGb3JtKCk7IC8vIFVwZGF0ZSB3YXZlZm9ybVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogSGFuZGxlcyB0aGUgbW91c2UgY2xpY2tcclxuICAgICAqL1xyXG4gICAgb25Nb3VzZUNsaWNrSGFuZGxlcigpIHtcclxuICAgICAgICB0aGlzLmNhbnZhcy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGV2ZW50ID0+IHtcclxuICAgICAgICAgICAgLy8gR2V0IGxlZnQgY2xpY2sgYW5kIHRpbWUgPiAwXHJcbiAgICAgICAgICAgIGlmIChldmVudC5idXR0b24gPT09IDAgJiYgdGhpcy5kdXJhdGlvbikge1xyXG4gICAgICAgICAgICAgICAgbGV0IHggPSBldmVudC5vZmZzZXRYIHx8IGV2ZW50LmxheWVyWDtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5jb25maWcuYXVkaW8pIHsgLy8gQXVkaW8gaXMgbm90IG51bGxcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbmZpZy5jdXJyZW50UG9zaXRpb24gPSBwYXJzZUludCh0aGlzLmR1cmF0aW9uIC8gMTAwICogKHggLyAodGhpcy5jb25maWcuY29udGFpbmVyLmNsaWVudFdpZHRoIC8gMTAwKSkpOyAvLyBVcGRhdGUgdGhlIHRyYWNrIHBvc2l0aW9uXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jb25maWcuYXVkaW8uc2Vla1RvKE1hdGguZmxvb3IodGhpcy5jb25maWcuY3VycmVudFBvc2l0aW9uKSk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY3VycmVudFRpbWUgPSBwYXJzZUludCh0aGlzLmR1cmF0aW9uIC8gMTAwICogKHggLyAodGhpcy5jb25maWcuY29udGFpbmVyLmNsaWVudFdpZHRoIC8gMTAwKSkpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHRoaXMuZHJhd1dhdmVGb3JtKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEdldCB0aGUgbW91c2UgcG9zaXRpb24gcmVsYXRpdmUgdG8gY2FudmFzIGxvY2F0aW9uLlxyXG4gICAgICogQHBhcmFtIHtNb3VzZUV2ZW50fSBldmVudFxyXG4gICAgICogQHJldHVybiB7e3g6IG51bWJlciwgeTogbnVtYmVyfX1cclxuICAgICAqL1xyXG4gICAgZ2V0TW91c2VQb3NpdGlvbihlKSB7XHJcbiAgICAgICAgbGV0IHJlY3QgPSB0aGlzLmNhbnZhcy5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICB4OiBldmVudC5jbGllbnRYIC0gcmVjdC5sZWZ0LCAvLyBHZXQgeCBwb3NpdGlvbiByZWxhdGl2ZSB0byBjYW52YXMgbGVmdCBib3JkZXJcclxuICAgICAgICAgICAgeTogZXZlbnQuY2xpZW50WSAtIHJlY3QudG9wIC8vIEdldCB5IHBvc2l0aW9uIHJlbGF0aXZlIHRvIGNhbnZhcyB0b3AgYm9yZGVyXHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEhhbmRsZXMgd2hlbiB0aGUgd2luZG93IG9iamVjdCByZXNpemVzIHRvIHJlZHJhdyB0aGUgd2F2ZWZvcm0gYWNjb3JkaW5nIHRvIHRoZSBjb250YWluZXIgc2l6ZS4gVGhpcyBpcyBvbmx5IHJlZHJhd24gd2hlbiBzaXplcyBhcmUgZGlmZmVyZW50LlxyXG4gICAgICovXHJcbiAgICBvblJlc2l6ZUhhbmRsZXIoKSB7XHJcbiAgICAgICAgbGV0IG9sZFdpZHRoID0gdGhpcy5jb25maWcuY29udGFpbmVyLmNsaWVudFdpZHRoOyAvLyBHZXQgZGltZW5zaW9ucyBvZiB0aGUgY29udGFuZXIgdGhhdCBob2xkcyB0aGUgY2FudmFzXHJcbiAgICAgICAgbGV0IG9sZEhlaWdodCA9IHRoaXMuY29uZmlnLmNvbnRhaW5lci5jbGllbnRIZWlnaHQ7XHJcblxyXG4gICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdyZXNpemUnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChvbGRXaWR0aCAhPT0gdGhpcy5jb25maWcuY29udGFpbmVyLmNsaWVudFdpZHRoIHx8IG9sZEhlaWdodCAhPT0gdGhpcy5jb25maWcuY29udGFpbmVyLmNsaWVudEhlaWdodCkgeyBcclxuXHJcbiAgICAgICAgICAgICAgICAvLyBVcGRhdGUgdHJhY2tlZCBwcmV2aW91cyBkaW1lbnNpb25zIG9uIHJlc2l6ZVxyXG4gICAgICAgICAgICAgICAgb2xkV2lkdGggPSB0aGlzLmNvbmZpZy5jb250YWluZXIuY2xpZW50V2lkdGg7XHJcbiAgICAgICAgICAgICAgICBvbGRIZWlnaHQgPSB0aGlzLmNvbmZpZy5jb250YWluZXIuY2xpZW50SGVpZ2h0O1xyXG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVDYW52YXNTaXplKCk7IC8vIFJlZnJlc2ggdGhlIGRpc3BsYXlcclxuICAgICAgICAgICAgICAgIHRoaXMuZHJhd1dhdmVGb3JtKCk7IC8vIERyYXcgaXRcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogVXBkYXRlIHRoZSBjYW52YXMgc2l6ZSB0byBtYXRjaCB0aGUgY29udGFpbmVyLiAoUHJvYmFibHkgY291bGQgYmUgcmVwbGFjZWQgd2l0aCBDU1MpXHJcbiAgICAgKi9cclxuICAgIHVwZGF0ZUNhbnZhc1NpemUoKSB7XHJcbiAgICAgICAgdGhpcy5jYW52YXMud2lkdGggPSB0aGlzLmNvbmZpZy5jb250YWluZXIuY2xpZW50V2lkdGg7XHJcbiAgICAgICAgdGhpcy5jYW52YXMuaGVpZ2h0ID0gdGhpcy5jb25maWcuY29udGFpbmVyLmNsaWVudEhlaWdodDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFdBVkVGT1JNIENPTE9SSU5HXHJcbiAgICAgKi9cclxuXHJcbiAgICAgLyoqXHJcbiAgICAgICogQ29uc3RydWN0IGEgbGluZWFyIGdyYWRpZW50IG92ZXIgdGhlIHdhdmVmb3JtXHJcbiAgICAgICogXHJcbiAgICAgICogQHBhcmFtIHtudW1iZXJ9IHgxXHJcbiAgICAgICogQHBhcmFtIHtudW1iZXJ9IHkxIFxyXG4gICAgICAqIEBwYXJhbSB7bnVtYmVyfSB4MiBcclxuICAgICAgKiBAcGFyYW0ge251bWJlcn0geTIgXHJcbiAgICAgICogQHBhcmFtIHt7ZnJvbTogc3RyaW5nLCB0bzogc3RyaW5nfX0gcGFyYW0gLSBwYXJhbSBvYmplY3QgdGhhdCBob2xkcyB0aGUgY29sb3IgdmFsdWVzIGFzIHN0cmluZ3MuXHJcbiAgICAgICogQHJldHVybnMge0NhbnZhc0dyYWRpZW50fVxyXG4gICAgICAqXHJcbiAgICAgICogQG1lbWJlcm9mIFdhdmVGb3JtXHJcbiAgICAgICovXHJcbiAgICBnZXRHcmFkaWVudCh4MSwgeTEsIHgyLCB5MiwgcGFyYW0pIHtcclxuICAgICAgICBsZXQgZ3JhZGllbnQgPSB0aGlzLmN0eC5jcmVhdGVMaW5lYXJHcmFkaWVudCh4MSwgeTEsIHgyLCB5Mik7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gQ29sb3Igc2VjdGlvbnMgb2YgdGhlIGdyYWRpZW50IHdpdGggY29sb3JzIGluIHBhcmFtLiogd2hlcmUgaW5kZXhlcyBpbmRpY2F0ZSBzdGFydCBhbmQgZW5kIHBvc2l0aW9ucy5cclxuICAgICAgICBncmFkaWVudC5hZGRDb2xvclN0b3AoMCwgcGFyYW0uZnJvbSk7XHJcbiAgICAgICAgZ3JhZGllbnQuYWRkQ29sb3JTdG9wKDEsIHBhcmFtLnRvKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIGdyYWRpZW50O1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQ29uc3RydWN0IGEgbGluZWFyIGdyYWRpZW50IG9uIG1vdXNlIGhvdmVyXHJcbiAgICAgKiBcclxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB4MSBcclxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB5MSBcclxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB4MiBcclxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB5MiBcclxuICAgICAqIEByZXR1cm5zIHtDYW52YXNHcmFkaWVudH1cclxuICAgICAqIFxyXG4gICAgICogQG1lbWJlcm9mIFdhdmVGb3JtXHJcbiAgICAgKi9cclxuICAgIGdldEhvdmVyR3JhZGllbnQoeDEsIHkxLCB4MiwgeTIpIHtcclxuICAgICAgICAvLyBSZXR1cm4gZ3JhZGllbnQgd2l0aCBob3ZlcmVkIGNvbG9ycy5cclxuICAgICAgICByZXR1cm4gdGhpcy5nZXRHcmFkaWVudCh4MSwgeTEsIHgyLCB5Miwge1xyXG4gICAgICAgICAgICBmcm9tOiB0aGlzLmNvbmZpZy5jb2xvci5ob3ZlckdyYWRpZW50LmZyb20sXHJcbiAgICAgICAgICAgIHRvOiB0aGlzLmNvbmZpZy5jb2xvci5ob3ZlckdyYWRpZW50LnRvXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBDb25zdHJ1Y3QgYSBsaW5lYXIgZ3JhZGllbnQgZm9yIHBsYXliYWNrIHBlYWtcclxuICAgICAqIFxyXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHgxIFxyXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHkxIFxyXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHgyIFxyXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHkyIFxyXG4gICAgICogQHJldHVybnMge0NhbnZhc0dyYWRpZW50fVxyXG4gICAgICogXHJcbiAgICAgKiBAbWVtYmVyb2YgV2F2ZUZvcm1cclxuICAgICAqL1xyXG4gICAgZ2V0UGxheUJhY2tHcmFkaWVudCh4MSwgeTEsIHgyLCB5Mikge1xyXG4gICAgICAgIC8vIFJldHVybiBncmFkaWVudCB3aXRoIHBsYXliYWNrIGNvbG9ycyAoaW4gcHJvZ3Jlc3MgY29sb3JzKVxyXG4gICAgICAgIHJldHVybiB0aGlzLmdldEdyYWRpZW50KHgxLCB5MSwgeDIsIHkyLCB7XHJcbiAgICAgICAgICAgIGZyb206IHRoaXMuY29uZmlnLmNvbG9yLnBsYXliYWNrR3JhZGllbnQuZnJvbSxcclxuICAgICAgICAgICAgdG86IHRoaXMuY29uZmlnLmNvbG9yLnBsYXliYWNrR3JhZGllbnQudG9cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIENvbnN0cnVjdCBsaW5lYXIgZ3JhZGllbnQgZm9yIHBsYXliYWNrIGNvbG9ycyBvbiBtb3VzZSBob3ZlclxyXG4gICAgICogXHJcbiAgICAgKiBAcGFyYW0ge251bWJlcn0geDEgXHJcbiAgICAgKiBAcGFyYW0ge251bWJlcn0geTEgXHJcbiAgICAgKiBAcGFyYW0ge251bWJlcn0geDIgXHJcbiAgICAgKiBAcGFyYW0ge251bWJlcn0geTIgXHJcbiAgICAgKiBAcmV0dXJucyB7Q2FudmFzR3JhZGllbnR9XHJcbiAgICAgKiBcclxuICAgICAqIEBtZW1iZXJvZiBXYXZlRm9ybVxyXG4gICAgICovXHJcbiAgICBnZXRIb3ZlclBsYXlCYWNrR3JhZGllbnQoeDEsIHkxLCB4MiwgeTIpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5nZXRHcmFkaWVudCh4MSwgeTEsIHgyLCB5Miwge1xyXG4gICAgICAgICAgICBmcm9tOiB0aGlzLmNvbmZpZy5jb2xvci5ob3ZlclBsYXliYWNrR3JhZGllbnQuZnJvbSxcclxuICAgICAgICAgICAgdG86IHRoaXMuY29uZmlnLmNvbG9yLmhvdmVyUGxheWJhY2tHcmFkaWVudC50byBcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIERyYXcgdGhlIHN0cm9rZSBzdHlsZSBhY2NvcmRpbmcgdG8gdGhlIG1vdXNlIHBvc2l0aW9uLlxyXG4gICAgICogXHJcbiAgICAgKiBAcGFyYW0ge251bWJlcn0geCBcclxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB5IFxyXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGxpbmVCcmVhayBcclxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBwbGF5YmFjayBcclxuICAgICAqIEByZXR1cm5zIHtjb25maWd9XHJcbiAgICAgKiBcclxuICAgICAqIEBtZW1iZXJvZiBXYXZlRm9ybVxyXG4gICAgICovXHJcbiAgICBnZXRDb250ZXh0U3Ryb2tlU3R5bGUoeCwgeSwgbGluZUJyZWFrLCBwbGF5YmFjaykge1xyXG4gICAgICAgIGlmICh0aGlzLmNvbmZpZy5tb3VzZU92ZXJFdmVudHMpIHsgLy8gVXNlZCB0byBjaGVjayBpZiB0aGlzIGlzIGVuYWJsZWQgaW4gdGhlIGNvbmZpZ3NcclxuICAgICAgICAgICAgaWYgKHRoaXMubW91c2VPdmVyICYmIHRoaXMubW91c2VPdmVyLnggPj0geCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0SG92ZXJHcmFkaWVudCh4LCB5LCB4LCBsaW5lQnJlYWspOyAvLyBDb2xvciB1bnRpbCB0aGUgbGluZSBicmVhay5cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICBpZiAocGxheWJhY2sgPj0geCkgeyAvLyBJZiB0aGUgc29uZyBwcm9ncmVzcyBpcyBncmVhdGVyIHRoYW4gdGhlIHggdmFsdWVcclxuICAgICAgICAgICAgaWYgKHRoaXMuY29uZmlnLm1vdXNlT3ZlckV2ZW50cykge1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMubW91c2VPdmVyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0SG92ZXJQbGF5QmFja0dyYWRpZW50KHgsIHksIHgsIGxpbmVCcmVhayk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmdldFBsYXlCYWNrR3JhZGllbnQoeCwgeSAseCwgbGluZUJyZWFrKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiB0aGlzLmNvbmZpZy5jb2xvci5iYWNrZ3JvdW5kO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogRHJhdyB0aGUgd2F2ZWZvcm0gY2FudmFzIG9iamVjdC5cclxuICAgICAqIFxyXG4gICAgICogQG1lbWJlcm9mIFdhdmVGb3JtXHJcbiAgICAgKi9cclxuICAgIGRyYXdXYXZlRm9ybSgpIHtcclxuICAgICAgICAvLyBQYXJzZSB3YXZlZm9ybSBmcm9tIHVybCwgZXg6IGh0dHBzOi8vd2lzLnNuZGNkbi5jb20vaXZhc2lqMkRRb3F6X20uanNvblxyXG5cclxuICAgICAgICAvLyBXZSBuZWVkIHRvIGNhbGN1bGF0ZSB0aGUgb2Zmc2V0IG9mIGhvdyBtYW55IHBlYWtzIHdlIGNhbiBkaXNwbGF5LiBJZiB0aGUgd2F2Zm9ybSBpcyBhdCAxMDAlIHdpZHRoLCB3ZSBjYW4gZGlzcGxheSBhbGwsIGJ1dCBpZiBub3QsIHdlIG5lZWQgdG8gc2VsZWN0IGV2ZXJ5IE4gcGVha3MgdG8gZHJhdy5cclxuICAgICAgICAvLyBkYXRhLmxlbmd0aCAtIG51bWJlciBvZiBwZWFrcyBpbiB0aGUgd2F2ZWZvcm1cclxuICAgICAgICAvLyBjb25maWcucGVha1dpZHRoIC0gZGVmYXVsdCBzZXQgdG8gMnB4IGluIGNvbnN0cmN0b3IgKHdpZHRoIGlmIGluZGl2aWR1YWwgcGVhaylcclxuICAgICAgICAvLyBjb25pZy5wZWFrU3BhY2UgLSBkZWZhdWx0IHNldCB0byAxcHggaW4gdGhlIGNvbnN0cnVjdG9yIChzcGFjZSBiZXR3ZWVuIHBlYWspXHJcbiAgICAgICAgbGV0IE4gPSB0aGlzLmNvbmZpZy5kYXRhLmxlbmd0aCAvIHRoaXMuY29uZmlnLmNvbnRhaW5lci5jbGllbnRXaWR0aCAqICh0aGlzLmNvbmZpZy5wZWFrV2lkdGggKyB0aGlzLmNvbmZpZy5wZWFrU3BhY2UpO1xyXG5cclxuICAgICAgICBsZXQgY291bnQgPSBNYXRoLmZsb29yKHRoaXMuY29uZmlnLmRhdGEubGVuZ3RoIC8gTik7IC8vIENvdW50IGhvdyBtYW55IHBlYWtzIHdlIHdpbGwgZGlzcGxheSAodG90YWwgcGVha3MgLyBldmVyeSBOdGggcGVhayBieSB0aGUgYW1vdW50IG9mIHBpeGVscyB0aGV5IHVzZSlcclxuXHJcbiAgICAgICAgbGV0IHBsYXliYWNrID0gMDtcclxuXHJcbiAgICAgICAgLy8gTmVlZHMgY2hlY2tpbmdcclxuICAgICAgICBpZiAoISF0aGlzLmR1cmF0aW9uICYmIHRoaXMuY3VycmVudFBvc2l0aW9uID49IDApIHtcclxuICAgICAgICAgICAgcGxheWJhY2sgPSB0aGlzLmNhbnZhcy53aWR0aCAvIHRoaXMuZHVyYXRpb24gKiB0aGlzLmN1cnJlbnRQb3NpdGlvbjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuY3R4LmNsZWFyUmVjdCgwLCAwLCB0aGlzLmN0eC5jYW52YXMud2lkdGgsIHRoaXMuY3R4LmNhbnZhcy5oZWlnaHQpO1xyXG5cclxuICAgICAgICBmb3IgKGxldCBpID0gMCwgeCA9IDA7IGkgPCBjb3VudDsgaSsrLCB4ICs9ICh0aGlzLmNvbmZpZy5wZWFrV2lkdGggKyB0aGlzLmNvbmZpZy5wZWFrU3BhY2UpKSB7IC8vIEl0ZXJhdGUgb3ZlciBhbGwgdGhlIHBlYWtzIGluIHRoZSBkYXRhIGFuZCBkcmF3IHRoZW0uIEluY3JlbWVudCBieSB0aGUgYW1vdW50IG9mIHBpeGVscyB0aGV5IHVzZSAoeCkuXHJcbiAgICAgICAgICAgIC8vIENhbGN1bGF0ZSB0aGUgaGVpZ2h0IG9mIHRoYXQgcGVhayBzbyB3ZSBjYW4gZHJhdyB0aGUgbGluZS5cclxuICAgICAgICAgICAgbGV0IHBlYWtIZWlnaHQgPSB0aGlzLmNhbnZhcy5oZWlnaHQgLyAxNDAgKiB0aGlzLmNvbmZpZy5kYXRhW01hdGgucm91bmQoaSAqIE4pXTtcclxuICAgICAgICAgICAgbGV0IHkgPSAodGhpcy5jYW52YXMuaGVpZ2h0IC8gMiAtIHBlYWtIZWlnaHQgLyAyKSAqIDEuNTtcclxuXHJcbiAgICAgICAgICAgIC8vIENhbGN1bGF0ZSB0aGUgbGluZSBicmVhayB3aGljaCBpcyB0aGUgMnB4IGxpbmUgeW91IHNlZSBjdXR0aW5nIGFjcm9zcyB0aGUgd2F2ZWZvcm0uXHJcbiAgICAgICAgICAgIGxldCBsaW5lQnJlYWsgPSBNYXRoLmZsb29yKHRoaXMuY2FudmFzLmhlaWdodCAvIDEuMzMzMzMpIC0gMTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuY3R4LnN0cm9rZVN0eWxlID0gdGhpcy5nZXRDb250ZXh0U3Ryb2tlU3R5bGUoeCwgeSwgbGluZUJyZWFrLCBwbGF5YmFjayk7IC8vIEdldCB0aGUgZ3JhZGllbnQgY29sb3IgdG8gZHJhdyB0aGUgbGluZS4gSG92ZXJlZCBldmVudHMgYW5kIG90aGVyIGV2ZW50cyBhbHJlYWR5IGhhbmRsZWQgaW5zaWRlIHRoZSBtZXRob2QuXHJcblxyXG4gICAgICAgICAgICB0aGlzLmN0eC5iZWdpblBhdGgoKTtcclxuICAgICAgICAgICAgdGhpcy5jdHgubW92ZVRvKHgsIHkpO1xyXG4gICAgICAgICAgICB0aGlzLmN0eC5saW5lVG8oeCwgbGluZUJyZWFrKTsgLy8gRHJhdyB0byBicmVha1xyXG4gICAgICAgICAgICB0aGlzLmN0eC5zdHJva2UoKTtcclxuXHJcbiAgICAgICAgICAgIC8vIERyYXcgdGhlIHBlYWtzIHVuZGVyIHRoZSBsaW5lIGJyZWFrLlxyXG4gICAgICAgICAgICBpZiAocGxheWJhY2sgPj0geCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jdHguc3Ryb2tlU3R5bGUgPSB0aGlzLmNvbmZpZy5jb2xvci5mb290ZXJQbGF5YmFjazsgLy8gQ29sb3JlZCBwYXJ0IG9mIHRoZSBwbGF5YmFja1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jdHguc3Ryb2tlU3R5bGUgPSB0aGlzLmNvbmZpZy5jb2xvci5mb290ZXI7IC8vIERlZmF1bHQgY29sb3JcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdGhpcy5jdHguYmVnaW5QYXRoKCk7XHJcbiAgICAgICAgICAgIHRoaXMuY3R4Lm1vdmVUbyh4LCBsaW5lQnJlYWsgKyAxKTtcclxuICAgICAgICAgICAgdGhpcy5jdHgubGluZVRvKHgsIHBlYWtIZWlnaHQgKyB5KTtcclxuICAgICAgICAgICAgdGhpcy5jdHguc3Ryb2tlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogU2V0IHRoZSBjdXJyZW50IHRyYWNrIHRpbWUgYW5kIHJlZHJhdyB0aGUgd2F2ZWZvcm1cclxuICAgICAqIFxyXG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IGN1cnJlbnRQb3NpdGlvbiBcclxuICAgICAqIEBwYXJhbSB7TnVtYmVyfSBkdXJhdGlvbiBcclxuICAgICAqIFxyXG4gICAgICogQG1lbWJlcm9mIFdhdmVGb3JtXHJcbiAgICAgKi9cclxuICAgIHNldFBsYXlCYWNrKGN1cnJlbnRQb3NpdGlvbiwgZHVyYXRpb24pIHtcclxuICAgICAgICB0aGlzLmN1cnJlbnRQb3NpdGlvbiA9IGN1cnJlbnRQb3NpdGlvbjtcclxuICAgICAgICB0aGlzLmR1cmF0aW9uID0gZHVyYXRpb247XHJcbiAgICAgICAgdGhpcy5kcmF3V2F2ZUZvcm0oKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFVwZGF0ZSB0aGUgY3VycmVudCBkYXRhIG9iamVjdC5cclxuICAgICAqIFxyXG4gICAgICogQHBhcmFtIHtEYXRhfSBkYXRhIFxyXG4gICAgICogXHJcbiAgICAgKiBAbWVtYmVyb2YgV2F2ZUZvcm1cclxuICAgICAqL1xyXG4gICAgYXN5bmMgdXBkYXRlV2F2ZWZvcm1EYXRhKGRhdGEpIHtcclxuICAgICAgICB0aGlzLmNvbmZpZy5kYXRhID0gZGF0YTtcclxuICAgICAgICB0aGlzLnVwZGF0ZUludGVydmFsID0gKFNldHRpbmdzLmdldFByZWYoJ2JhdHRlcnlTYXZlcicpID8gMTAwIDogMTApOyBcclxuICAgICAgICB0aGlzLmRyYXdXYXZlRm9ybSgpO1xyXG4gICAgfVxyXG5cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgV2F2ZUZvcm1cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3B1YmxpYy9jb250cm9scy93YXZlZm9ybS5qc1xuLy8gbW9kdWxlIGlkID0gMTNcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiLy8gSW5pdGlhbGl6ZSB0aGUgU291bmRDbG91ZCBQbGF5ZXIgb2JqZWN0XHJcbmltcG9ydCBQbGF5ZXIgZnJvbSAnLi9wbGF5ZXInXHJcblxyXG53aW5kb3cub25sb2FkID0gKCkgPT4ge1xyXG4gICAgY29uc3Qgc2NfcGxheWVyID0gbmV3IFBsYXllcigpO1xyXG4gICAgc2NfcGxheWVyLnN0YXJ0KCk7XHJcblxyXG4gICAgdmFyIG15VGFicyA9IHRhYnMoe1xyXG4gICAgICAgIGVsOiAnI3RhYnMnLFxyXG4gICAgICAgIHRhYk5hdmlnYXRpb25MaW5rczogJy50YWItaXRlbScsXHJcbiAgICAgICAgdGFiQ29udGVudENvbnRhaW5lcnM6ICcudGFicGFnZSdcclxuICAgIH0pO1xyXG4gICAgbXlUYWJzLmluaXQoKTtcclxufVxyXG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3B1YmxpYy9qcy9hcHAuanNcbi8vIG1vZHVsZSBpZCA9IDE0XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsImltcG9ydCBVdGlscyBmcm9tICcuL3V0aWxzJztcclxuLyoqXHJcbiAqIERlc2lnbmVkIHRvIGZldGNoIGRhdGEgdXNpbmcgWE1MSHR0cC5cclxuICovXHJcbmNsYXNzIFJlcXVlc3Qge1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQ3JlYXRlcyBhbiBpbnN0YW5jZSBvZiBSZXF1ZXN0LlxyXG4gICAgICogXHJcbiAgICAgKiBAbWVtYmVyb2YgUmVxdWVzdFxyXG4gICAgICovXHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICBVdGlscy5sb2coJ0luaXQgUmVxdWVzdCBzZXJ2aWNlJyk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0KHVybCkge1xyXG4gICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xyXG4gICAgICAgICAgICBjb25zdCB4aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcclxuICAgICAgICAgICAgeGhyLmFkZEV2ZW50TGlzdGVuZXIoXCJsb2FkXCIsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuc3RhdHVzID49IDIwMCAmJiB0aGlzLnN0YXR1cyA8IDMwMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlc29sdmUodGhpcy5yZXNwb25zZVRleHQpOyAvLyBSZXNvbHZlIG9uIHZhbGlkIHJlc3BvbnNlXHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlamVjdCh0aGlzKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICB4aHIuYWRkRXZlbnRMaXN0ZW5lcihcImVycm9yXCIsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgcmVqZWN0KHRoaXMpOyAvLyBSZWplY3Qgb24gZXJyb3JcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICB4aHIub3BlbignR0VUJywgdXJsLCB0cnVlKTtcclxuICAgICAgICAgICAgeGhyLnNlbmQoKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEdldCB0aGUgSlNPTiBkYXRhIGZvciB0aGUgd2F2ZWZvcm1cclxuICAgICAqIFxyXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHVybCBcclxuICAgICAqIEByZXR1cm5zIC0gV2F2ZUZvcm0gSlNPTiBvYmplY3RcclxuICAgICAqL1xyXG4gICAgYXN5bmMgZ2V0SlNPTih1cmwpIHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICByZXR1cm4gSlNPTi5wYXJzZShhd2FpdCB0aGlzLmdldCh1cmwpKTtcclxuICAgICAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGUpO1xyXG4gICAgICAgICAgICByZXR1cm4gW107IC8vIFJldHVybiBudWxsXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBSZXF1ZXN0XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9wdWJsaWMvanMvcmVxdWVzdC5qc1xuLy8gbW9kdWxlIGlkID0gMTVcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sInNvdXJjZVJvb3QiOiIifQ==