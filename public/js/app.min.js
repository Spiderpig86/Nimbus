/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId])
/******/ 			return installedModules[moduleId].exports;
/******/
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// identity function for calling harmony imports with the correct context
/******/ 	__webpack_require__.i = function(value) { return value; };
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, {
/******/ 				configurable: false,
/******/ 				enumerable: true,
/******/ 				get: getter
/******/ 			});
/******/ 		}
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = 14);
/******/ })
/************************************************************************/
/******/ ([
/* 0 */
/***/ (function(module, exports, __webpack_require__) {

!function(t,e){if(true)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var n=e();for(var i in n)("object"==typeof exports?exports:t)[i]=n[i]}}(this,function(){return function(t){function e(i){if(n[i])return n[i].exports;var r=n[i]={exports:{},id:i,loaded:!1};return t[i].call(r.exports,r,r.exports,e),r.loaded=!0,r.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){(function(e){"use strict";var i=n(4),r=n(8),o=n(2),s=n(9),a=n(1).Promise,u=n(15),h=n(16);t.exports=e.SC={initialize:function(){var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];o.set("oauth_token",t.oauth_token),o.set("client_id",t.client_id),o.set("redirect_uri",t.redirect_uri),o.set("baseURL",t.baseURL),o.set("connectURL",t.connectURL)},get:function(t,e){return i.request("GET",t,e)},post:function(t,e){return i.request("POST",t,e)},put:function(t,e){return i.request("PUT",t,e)},"delete":function(t){return i.request("DELETE",t)},upload:function(t){return i.upload(t)},connect:function(t){return s(t)},isConnected:function(){return void 0!==o.get("oauth_token")},oEmbed:function(t,e){return i.oEmbed(t,e)},resolve:function(t){return i.resolve(t)},Recorder:u,Promise:a,stream:function(t,e){return h(t,e)},connectCallback:function(){r.notifyDialog(this.location)}}}).call(e,function(){return this}())},function(t,e,n){var i;(function(t,r,o,s){/*!
	 * @overview es6-promise - a tiny implementation of Promises/A+.
	 * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
	 * @license   Licensed under MIT license
	 *            See https://raw.githubusercontent.com/jakearchibald/es6-promise/master/LICENSE
	 * @version   2.3.0
	 */
(function(){"use strict";function a(t){return"function"==typeof t||"object"==typeof t&&null!==t}function u(t){return"function"==typeof t}function h(t){return"object"==typeof t&&null!==t}function c(t){q=t}function l(t){Q=t}function f(){var e=t.nextTick,n=t.versions.node.match(/^(?:(\d+)\.)?(?:(\d+)\.)?(\*|\d+)$/);return Array.isArray(n)&&"0"===n[1]&&"10"===n[2]&&(e=r),function(){e(m)}}function d(){return function(){K(m)}}function p(){var t=0,e=new et(m),n=document.createTextNode("");return e.observe(n,{characterData:!0}),function(){n.data=t=++t%2}}function g(){var t=new MessageChannel;return t.port1.onmessage=m,function(){t.port2.postMessage(0)}}function _(){return function(){setTimeout(m,1)}}function m(){for(var t=0;Z>t;t+=2){var e=rt[t],n=rt[t+1];e(n),rt[t]=void 0,rt[t+1]=void 0}Z=0}function y(){try{var t=n(26);return K=t.runOnLoop||t.runOnContext,d()}catch(e){return _()}}function v(){}function E(){return new TypeError("You cannot resolve a promise with itself")}function S(){return new TypeError("A promises callback cannot return that same promise.")}function A(t){try{return t.then}catch(e){return ut.error=e,ut}}function w(t,e,n,i){try{t.call(e,n,i)}catch(r){return r}}function T(t,e,n){Q(function(t){var i=!1,r=w(n,e,function(n){i||(i=!0,e!==n?I(t,n):O(t,n))},function(e){i||(i=!0,R(t,e))},"Settle: "+(t._label||" unknown promise"));!i&&r&&(i=!0,R(t,r))},t)}function b(t,e){e._state===st?O(t,e._result):e._state===at?R(t,e._result):D(e,void 0,function(e){I(t,e)},function(e){R(t,e)})}function P(t,e){if(e.constructor===t.constructor)b(t,e);else{var n=A(e);n===ut?R(t,ut.error):void 0===n?O(t,e):u(n)?T(t,e,n):O(t,e)}}function I(t,e){t===e?R(t,E()):a(e)?P(t,e):O(t,e)}function L(t){t._onerror&&t._onerror(t._result),M(t)}function O(t,e){t._state===ot&&(t._result=e,t._state=st,0!==t._subscribers.length&&Q(M,t))}function R(t,e){t._state===ot&&(t._state=at,t._result=e,Q(L,t))}function D(t,e,n,i){var r=t._subscribers,o=r.length;t._onerror=null,r[o]=e,r[o+st]=n,r[o+at]=i,0===o&&t._state&&Q(M,t)}function M(t){var e=t._subscribers,n=t._state;if(0!==e.length){for(var i,r,o=t._result,s=0;s<e.length;s+=3)i=e[s],r=e[s+n],i?x(n,i,r,o):r(o);t._subscribers.length=0}}function k(){this.error=null}function N(t,e){try{return t(e)}catch(n){return ht.error=n,ht}}function x(t,e,n,i){var r,o,s,a,h=u(n);if(h){if(r=N(n,i),r===ht?(a=!0,o=r.error,r=null):s=!0,e===r)return void R(e,S())}else r=i,s=!0;e._state!==ot||(h&&s?I(e,r):a?R(e,o):t===st?O(e,r):t===at&&R(e,r))}function C(t,e){try{e(function(e){I(t,e)},function(e){R(t,e)})}catch(n){R(t,n)}}function F(t,e){var n=this;n._instanceConstructor=t,n.promise=new t(v),n._validateInput(e)?(n._input=e,n.length=e.length,n._remaining=e.length,n._init(),0===n.length?O(n.promise,n._result):(n.length=n.length||0,n._enumerate(),0===n._remaining&&O(n.promise,n._result))):R(n.promise,n._validationError())}function U(t){return new ct(this,t).promise}function B(t){function e(t){I(r,t)}function n(t){R(r,t)}var i=this,r=new i(v);if(!$(t))return R(r,new TypeError("You must pass an array to race.")),r;for(var o=t.length,s=0;r._state===ot&&o>s;s++)D(i.resolve(t[s]),void 0,e,n);return r}function H(t){var e=this;if(t&&"object"==typeof t&&t.constructor===e)return t;var n=new e(v);return I(n,t),n}function j(t){var e=this,n=new e(v);return R(n,t),n}function G(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function Y(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function V(t){this._id=gt++,this._state=void 0,this._result=void 0,this._subscribers=[],v!==t&&(u(t)||G(),this instanceof V||Y(),C(this,t))}function z(){var t;if("undefined"!=typeof o)t=o;else if("undefined"!=typeof self)t=self;else try{t=Function("return this")()}catch(e){throw new Error("polyfill failed because global object is unavailable in this environment")}var n=t.Promise;n&&"[object Promise]"===Object.prototype.toString.call(n.resolve())&&!n.cast||(t.Promise=_t)}var W;W=Array.isArray?Array.isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)};var K,q,X,$=W,Z=0,Q=({}.toString,function(t,e){rt[Z]=t,rt[Z+1]=e,Z+=2,2===Z&&(q?q(m):X())}),J="undefined"!=typeof window?window:void 0,tt=J||{},et=tt.MutationObserver||tt.WebKitMutationObserver,nt="undefined"!=typeof t&&"[object process]"==={}.toString.call(t),it="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,rt=new Array(1e3);X=nt?f():et?p():it?g():void 0===J?y():_();var ot=void 0,st=1,at=2,ut=new k,ht=new k;F.prototype._validateInput=function(t){return $(t)},F.prototype._validationError=function(){return new Error("Array Methods must be provided an Array")},F.prototype._init=function(){this._result=new Array(this.length)};var ct=F;F.prototype._enumerate=function(){for(var t=this,e=t.length,n=t.promise,i=t._input,r=0;n._state===ot&&e>r;r++)t._eachEntry(i[r],r)},F.prototype._eachEntry=function(t,e){var n=this,i=n._instanceConstructor;h(t)?t.constructor===i&&t._state!==ot?(t._onerror=null,n._settledAt(t._state,e,t._result)):n._willSettleAt(i.resolve(t),e):(n._remaining--,n._result[e]=t)},F.prototype._settledAt=function(t,e,n){var i=this,r=i.promise;r._state===ot&&(i._remaining--,t===at?R(r,n):i._result[e]=n),0===i._remaining&&O(r,i._result)},F.prototype._willSettleAt=function(t,e){var n=this;D(t,void 0,function(t){n._settledAt(st,e,t)},function(t){n._settledAt(at,e,t)})};var lt=U,ft=B,dt=H,pt=j,gt=0,_t=V;V.all=lt,V.race=ft,V.resolve=dt,V.reject=pt,V._setScheduler=c,V._setAsap=l,V._asap=Q,V.prototype={constructor:V,then:function(t,e){var n=this,i=n._state;if(i===st&&!t||i===at&&!e)return this;var r=new this.constructor(v),o=n._result;if(i){var s=arguments[i-1];Q(function(){x(i,r,s,o)})}else D(n,r,t,e);return r},"catch":function(t){return this.then(null,t)}};var mt=z,yt={Promise:_t,polyfill:mt};n(19).amd?(i=function(){return yt}.call(e,n,e,s),!(void 0!==i&&(s.exports=i))):"undefined"!=typeof s&&s.exports?s.exports=yt:"undefined"!=typeof this&&(this.ES6Promise=yt),mt()}).call(this)}).call(e,n(6),n(3).setImmediate,function(){return this}(),n(20)(t))},function(t,e){"use strict";var n={oauth_token:void 0,baseURL:"https://api.soundcloud.com",connectURL:"//connect.soundcloud.com",client_id:void 0,redirect_uri:void 0};t.exports={get:function(t){return n[t]},set:function(t,e){e&&(n[t]=e)}}},function(t,e,n){(function(t,i){function r(t,e){this._id=t,this._clearFn=e}var o=n(6).nextTick,s=Function.prototype.apply,a=Array.prototype.slice,u={},h=0;e.setTimeout=function(){return new r(s.call(setTimeout,window,arguments),clearTimeout)},e.setInterval=function(){return new r(s.call(setInterval,window,arguments),clearInterval)},e.clearTimeout=e.clearInterval=function(t){t.close()},r.prototype.unref=r.prototype.ref=function(){},r.prototype.close=function(){this._clearFn.call(window,this._id)},e.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},e.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},e._unrefActive=e.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;e>=0&&(t._idleTimeoutId=setTimeout(function(){t._onTimeout&&t._onTimeout()},e))},e.setImmediate="function"==typeof t?t:function(t){var n=h++,i=arguments.length<2?!1:a.call(arguments,1);return u[n]=!0,o(function(){u[n]&&(i?t.apply(null,i):t.call(null),e.clearImmediate(n))}),n},e.clearImmediate="function"==typeof i?i:function(t){delete u[t]}}).call(e,n(3).setImmediate,n(3).clearImmediate)},function(t,e,n){(function(e){"use strict";var i=n(2),r=n(17),o=n(1).Promise,s=function(t,n,i,r){var s=void 0,a=new o(function(o){var a=e.FormData&&i instanceof FormData;s=new XMLHttpRequest,s.upload&&s.upload.addEventListener("progress",r),s.open(t,n,!0),a||s.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),s.onreadystatechange=function(){4===s.readyState&&o({responseText:s.responseText,request:s})},s.send(i)});return a.request=s,a},a=function(t){var e=t.responseText,n=t.request,i=void 0,r=void 0;try{r=JSON.parse(e)}catch(o){}return r?r.errors&&(i={message:""},r.errors[0]&&r.errors[0].error_message&&(i={message:r.errors[0].error_message})):i=n?{message:"HTTP Error: "+n.status}:{message:"Unknown error"},i&&(i.status=n.status),{json:r,error:i}},u=function c(t,e,n,i){var r=s(t,e,n,i),o=r.then(function(t){var e=t.responseText,n=t.request,i=a({responseText:e,request:n});if(i.json&&"302 - Found"===i.json.status)return c("GET",i.json.location,null);if(200!==n.status&&i.error)throw i.error;return i.json});return o.request=r.request,o},h=function(t,e,n){Object.keys(e).forEach(function(i){n?t.append(i,e[i]):t[i]=e[i]})};t.exports={request:function(t,n){var o=arguments.length<=2||void 0===arguments[2]?{}:arguments[2],s=arguments.length<=3||void 0===arguments[3]?function(){}:arguments[3],a=i.get("oauth_token"),c=i.get("client_id"),l={},f=e.FormData&&o instanceof FormData,d=void 0,p=void 0;return l.format="json",a?l.oauth_token=a:l.client_id=c,h(o,l,f),"GET"!==t&&(d=f?o:r.encode(o),o={oauth_token:a}),n="/"!==n[0]?"/"+n:n,p=""+i.get("baseURL")+n+"?"+r.encode(o),u(t,p,d,s)},oEmbed:function(t){var e=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],n=e.element;delete e.element,e.url=t;var i="https://soundcloud.com/oembed.json?"+r.encode(e);return u("GET",i,null).then(function(t){return n&&t.html&&(n.innerHTML=t.html),t})},upload:function(){var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],e=t.asset_data||t.file,n=i.get("oauth_token")&&t.title&&e;if(!n)return new o(function(t,e){e({status:0,error_message:"oauth_token needs to be present and title and asset_data / file passed as parameters"})});var r=Object.keys(t),s=new FormData;return r.forEach(function(e){var n=t[e];"file"===e&&(e="asset_data",n=t.file),s.append("track["+e+"]",n)}),this.request("POST","/tracks",s,t.progress)},resolve:function(t){return this.request("GET","/resolve",{url:t,_status_code_map:{302:200}})}}}).call(e,function(){return this}())},function(t,e){"use strict";var n={};t.exports={get:function(t){return n[t]},set:function(t,e){n[t]=e}}},function(t,e){function n(){h&&s&&(h=!1,s.length?u=s.concat(u):c=-1,u.length&&i())}function i(){if(!h){var t=setTimeout(n);h=!0;for(var e=u.length;e;){for(s=u,u=[];++c<e;)s&&s[c].run();c=-1,e=u.length}s=null,h=!1,clearTimeout(t)}}function r(t,e){this.fun=t,this.array=e}function o(){}var s,a=t.exports={},u=[],h=!1,c=-1;a.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];u.push(new r(t,e)),1!==u.length||h||setTimeout(i,0)},r.prototype.run=function(){this.fun.apply(null,this.array)},a.title="browser",a.browser=!0,a.env={},a.argv=[],a.version="",a.versions={},a.on=o,a.addListener=o,a.once=o,a.off=o,a.removeListener=o,a.removeAllListeners=o,a.emit=o,a.binding=function(t){throw new Error("process.binding is not supported")},a.cwd=function(){return"/"},a.chdir=function(t){throw new Error("process.chdir is not supported")},a.umask=function(){return 0}},function(t,e,n){"use strict";var i=n(18);e.extract=function(t){return t.split("?")[1]||""},e.parse=function(t){return"string"!=typeof t?{}:(t=t.trim().replace(/^(\?|#|&)/,""),t?t.split("&").reduce(function(t,e){var n=e.replace(/\+/g," ").split("="),i=n.shift(),r=n.length>0?n.join("="):void 0;return i=decodeURIComponent(i),r=void 0===r?null:decodeURIComponent(r),t.hasOwnProperty(i)?Array.isArray(t[i])?t[i].push(r):t[i]=[t[i],r]:t[i]=r,t},{}):{})},e.stringify=function(t){return t?Object.keys(t).sort().map(function(e){var n=t[e];return Array.isArray(n)?n.sort().map(function(t){return i(e)+"="+i(t)}).join("&"):i(e)+"="+i(n)}).filter(function(t){return t.length>0}).join("&"):""}},function(t,e,n){"use strict";var i=n(7),r=n(5);t.exports={notifyDialog:function(t){var e=i.parse(t.search),n=i.parse(t.hash),o={oauth_token:e.access_token||n.access_token,dialog_id:e.state||n.state,error:e.error||n.error,error_description:e.error_description||n.error_description},s=r.get(o.dialog_id);s&&s.handleConnectResponse(o)}}},function(t,e,n){"use strict";var i=n(2),r=n(11),o=n(1).Promise,s=function(t){return i.set("oauth_token",t.oauth_token),t};t.exports=function(){var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],e=i.get("oauth_token");if(e)return new o(function(t){t({oauth_token:e})});var n={client_id:t.client_id||i.get("client_id"),redirect_uri:t.redirect_uri||i.get("redirect_uri"),response_type:"code_and_token",scope:t.scope||"non-expiring",display:"popup"};if(!n.client_id||!n.redirect_uri)throw new Error("Options client_id and redirect_uri must be passed");var a=new r(n);return a.open().then(s)}},function(t,e,n){"use strict";var i=n(1).Promise;t.exports=function(){var t={};return t.promise=new i(function(e,n){t.resolve=e,t.reject=n}),t}},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=n(10),s=n(5),a=n(12),u=n(7),h="SoundCloud_Dialog",c=function(){return[h,Math.ceil(1e6*Math.random()).toString(16)].join("_")},l=function(t){return"https://soundcloud.com/connect?"+u.stringify(t)},f=function(){function t(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];i(this,t),this.id=c(),this.options=e,this.options.state=this.id,this.width=456,this.height=510,this.deferred=o()}return r(t,[{key:"open",value:function(){var t=l(this.options);return this.popup=a.open(t,this.width,this.height),s.set(this.id,this),this.deferred.promise}},{key:"handleConnectResponse",value:function(t){var e=t.error;e?this.deferred.reject(t):this.deferred.resolve(t),this.popup.close()}}]),t}();t.exports=f},function(t,e){"use strict";t.exports={open:function(t,e,n){var i={},r=void 0;return i.location=1,i.width=e,i.height=n,i.left=window.screenX+(window.outerWidth-e)/2,i.top=window.screenY+(window.outerHeight-n)/2,i.toolbar="no",i.scrollbars="yes",r=Object.keys(i).map(function(t){return t+"="+i[t]}).join(", "),window.open(t,i.name,r)}}},function(t,e){(function(e){"use strict";var n=e.AudioContext||e.webkitAudioContext,i=null;t.exports=function(){return i?i:i=new n}}).call(e,function(){return this}())},function(t,e){(function(e){"use strict";var n=e.navigator.getUserMedia||e.navigator.webkitGetUserMedia||e.navigator.mozGetUserMedia;t.exports=function(t,i,r){n.call(e.navigator,t,i,r)}}).call(e,function(){return this}())},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=n(13),s=n(14),a=n(1).Promise,u=n(24),h=function(){var t=this,e=this.context;return new a(function(n,i){t.source?t.source instanceof AudioNode?n(t.source):i(new Error("source needs to be an instance of AudioNode")):s({audio:!0},function(i){t.stream=i,t.source=e.createMediaStreamSource(i),n(t.source)}.bind(t),i)})},c=function(){function t(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];i(this,t),this.context=e.context||o(),this._recorder=null,this.source=e.source,this.stream=null}return r(t,[{key:"start",value:function(){var t=this;return h.call(this).then(function(e){return t._recorder=new u(e),t._recorder.record(),e})}},{key:"stop",value:function(){if(this._recorder&&this._recorder.stop(),this.stream)if(this.stream.stop)this.stream.stop();else if(this.stream.getTracks){var t=this.stream.getTracks()[0];t&&t.stop()}}},{key:"getBuffer",value:function(){var t=this;return new a(function(e,n){t._recorder?t._recorder.getBuffer(function(n){var i=t.context.sampleRate,r=t.context.createBuffer(2,n[0].length,i);r.getChannelData(0).set(n[0]),r.getChannelData(1).set(n[1]),e(r)}.bind(t)):n(new Error("Nothing has been recorded yet."))})}},{key:"getWAV",value:function(){var t=this;return new a(function(e,n){t._recorder?t._recorder.exportWAV(function(t){e(t)}):n(new Error("Nothing has been recorded yet."))})}},{key:"play",value:function(){var t=this;return this.getBuffer().then(function(e){var n=t.context.createBufferSource();return n.buffer=e,n.connect(t.context.destination),n.start(0),n})}},{key:"saveAs",value:function(t){return this.getWAV().then(function(e){u.forceDownload(e,t)})}},{key:"delete",value:function(){this._recorder&&(this._recorder.stop(),this._recorder.clear(),this._recorder=null),this.stream&&this.stream.stop()}}]),t}();t.exports=c},function(t,e,n){"use strict";var i=n(4),r=n(23),o=new r({flashAudioPath:"https://connect.soundcloud.com/sdk/flashAudio.swf"}),s=n(2),a=n(25);t.exports=function(t,e){var n=e?{secret_token:e}:{};return i.request("GET",t,n).then(function(t){var n=s.get("baseURL"),i=s.get("client_id"),r=n+"/tracks/"+t.id+"/streams?client_id="+i,u=n+"/tracks/"+t.id+"/plays?client_id="+i;return e&&(r+="&secret_token="+e,u+="&secret_token="+e),new a(o,{soundId:t.id,duration:t.duration,streamUrlsEndpoint:r,registerEndpoint:u})})}},function(t,e){t.exports={encode:function(t,e){function n(t){return t.filter(function(t){return"string"==typeof t&&t.length}).join("&")}function i(t){var e=Object.keys(t);return l?e.sort():e}function r(t,e){var r=":name[:prop]";return n(i(e).map(function(n){return s(r.replace(/:name/,t).replace(/:prop/,n),e[n])}))}function o(t,e){var i=":name[]";return n(e.map(function(e){return s(i.replace(/:name/,t),e)}))}function s(t,e){var n=/%20/g,i=encodeURIComponent,s=typeof e,a=null;return Array.isArray(e)?a=o(t,e):"string"===s?a=i(t)+"="+u(e):"number"===s?a=i(t)+"="+i(e).replace(n,"+"):"boolean"===s?a=i(t)+"="+e:"object"===s&&(null!==e?a=r(t,e):c||(a=i(t)+"=null")),a}function a(t){return"%"+("0"+t.charCodeAt(0).toString(16)).slice(-2).toUpperCase()}function u(t){return t.replace(/[^ !'()~\*]*/g,encodeURIComponent).replace(/ /g,"+").replace(/[!'()~\*]/g,a)}var h="object"==typeof e?e:{},c=h.ignorenull||!1,l=h.sorted||!1;return n(i(t).map(function(e){return s(e,t[e])}))}}},function(t,e){"use strict";t.exports=function(t){return encodeURIComponent(t).replace(/[!'()*]/g,function(t){return"%"+t.charCodeAt(0).toString(16).toUpperCase()})}},function(t,e){t.exports=function(){throw new Error("define cannot be used indirect")}},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children=[],t.webpackPolyfill=1),t}},function(t,e){var n=window.URL||window.webkitURL;t.exports=function(t,e){try{try{var i;try{var r=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder;i=new r,i.append(t),i=i.getBlob()}catch(o){i=new Blob([t])}return new Worker(n.createObjectURL(i))}catch(o){return new Worker("data:application/javascript,"+encodeURIComponent(t))}}catch(o){return new Worker(e)}}},function(t,e,n){t.exports=function(){return n(21)('!function(t){function n(r){if(e[r])return e[r].exports;var a=e[r]={exports:{},id:r,loaded:!1};return t[r].call(a.exports,a,a.exports,n),a.loaded=!0,a.exports}var e={};return n.m=t,n.c=e,n.p="",n(0)}([function(t,n){(function(t){function n(t){h=t.sampleRate,v=t.numChannels,s()}function e(t){for(var n=0;v>n;n++)p[n].push(t[n]);g+=t[0].length}function r(t){for(var n=[],e=0;v>e;e++)n.push(i(p[e],g));if(2===v)var r=f(n[0],n[1]);else var r=n[0];var a=l(r),o=new Blob([a],{type:t});this.postMessage(o)}function a(){for(var t=[],n=0;v>n;n++)t.push(i(p[n],g));this.postMessage(t)}function o(){g=0,p=[],s()}function s(){for(var t=0;v>t;t++)p[t]=[]}function i(t,n){for(var e=new Float32Array(n),r=0,a=0;a<t.length;a++)e.set(t[a],r),r+=t[a].length;return e}function f(t,n){for(var e=t.length+n.length,r=new Float32Array(e),a=0,o=0;e>a;)r[a++]=t[o],r[a++]=n[o],o++;return r}function c(t,n,e){for(var r=0;r<e.length;r++,n+=2){var a=Math.max(-1,Math.min(1,e[r]));t.setInt16(n,0>a?32768*a:32767*a,!0)}}function u(t,n,e){for(var r=0;r<e.length;r++)t.setUint8(n+r,e.charCodeAt(r))}function l(t){var n=new ArrayBuffer(44+2*t.length),e=new DataView(n);return u(e,0,"RIFF"),e.setUint32(4,36+2*t.length,!0),u(e,8,"WAVE"),u(e,12,"fmt "),e.setUint32(16,16,!0),e.setUint16(20,1,!0),e.setUint16(22,v,!0),e.setUint32(24,h,!0),e.setUint32(28,4*h,!0),e.setUint16(32,2*v,!0),e.setUint16(34,16,!0),u(e,36,"data"),e.setUint32(40,2*t.length,!0),c(e,44,t),e}var h,v,g=0,p=[];t.onmessage=function(t){switch(t.data.command){case"init":n(t.data.config);break;case"record":e(t.data.buffer);break;case"exportWAV":r(t.data.type);break;case"getBuffer":a();break;case"clear":o()}}}).call(n,function(){return this}())}]);\n//# sourceMappingURL=9f9aac32c9a7432b5555.worker.js.map',n.p+"9f9aac32c9a7432b5555.worker.js")}},function(t,e){t.exports=function(t){function e(i){if(n[i])return n[i].exports;var r=n[i]={exports:{},id:i,loaded:!1};return t[i].call(r.exports,r,r.exports,e),r.loaded=!0,r.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}(function(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))switch(typeof t[e]){case"function":break;case"object":t[e]=function(e){var n=e.slice(1),i=t[e[0]];return function(t,e,r){i.apply(this,[t,e,r].concat(n))}}(t[e]);break;default:t[e]=t[t[e]]}return t}([function(t,e,n){var i,r=n(1),o=n(12),s=n(14),a=n(38),u=n(43),h=n(39),c=n(16),l=n(42),f=n(128),d=n(129);t.exports=i=function(t){t=t||{},this._players={},this._volume=1,this._mute=!1,this.States=a,this.Errors=u,this._settings=o({},t,i.defaults)},i.MimeTypes=d,i.Protocols=f,i.Events=h,i.States=a,i.Errors=u,i.BrowserUtils=c,i.defaults={flashAudioPath:"flashAudio.swf",flashLoadTimeout:2e3,flashObjectID:"flashAudioObject",audioObjectID:"html5AudioObject",updateInterval:300,bufferTime:8e3,bufferingDelay:800,streamUrlProvider:null,debug:!1},i.capabilities=l.names,i.createDefaultMediaDescriptor=function(t,e,n){if(!t||!e||!e.length)throw new Error("invalid input to create media descriptor");return n||(n=0),{id:t,src:e,duration:n,forceSingle:!1,forceFlash:!1,forceHTML5:!1,forceCustomHLS:!1,mimeType:void 0}},i.prototype.getAudioPlayer=function(t){return this._players[t]},i.prototype.hasAudioPlayer=function(t){return void 0!==this._players[t]},i.prototype.removeAudioPlayer=function(t){this.hasAudioPlayer(t)&&delete this._players[t]},i.prototype.setVolume=function(t){t=Math.min(1,t),this._volume=Math.max(0,t);for(var e in this._players)this._players.hasOwnProperty(e)&&this._players[e].setVolume(this._volume)},i.prototype.getVolume=function(){return this._volume},i.prototype.setMute=function(t){this._muted=t;for(var e in this._players)this._players.hasOwnProperty(e)&&this._players[e].setMute(this._muted)},i.prototype.getMute=function(){return this._muted},i.prototype.createAudioPlayer=function(t,e){var n,i=r({},this._settings,e);if(!t)throw"AudioManager: No media descriptor object passed, can`t build any player";if(t.id||(t.id=Math.floor(1e10*Math.random()).toString()+(new Date).getTime().toString()),!t.src)throw new Error("AudioManager: You need to pass a valid media source URL");if(!this._players[t.id]){if(n=s.createAudioPlayer(t,i),!n)throw new Error("AudioManager: No player could be created from the given descriptor");this._players[t.id]=n}return this._players[t.id].setVolume(this._volume),this._players[t.id].setMute(this._muted),this._players[t.id].on(h.STATE_CHANGE,this._onStateChange,this),this._players[t.id]},i.prototype._onStateChange=function(t,e){e.getState()===a.DEAD&&this.removeAudioPlayer(e.getId())}},[130,2,8,4],[131,3,4],function(t,e){function n(t,e,n){n||(n={});for(var i=-1,r=e.length;++i<r;){var o=e[i];n[o]=t[o]}return n}t.exports=n},[132,5,6,7],function(t,e){function n(t){return!!t&&"object"==typeof t}function i(t,e){var n=null==t?void 0:t[e];return s(n)?n:void 0}function r(t){return o(t)&&f.call(t)==a}function o(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function s(t){return null==t?!1:r(t)?d.test(c.call(t)):n(t)&&u.test(t)}var a="[object Function]",u=/^\[object .+?Constructor\]$/,h=Object.prototype,c=Function.prototype.toString,l=h.hasOwnProperty,f=h.toString,d=RegExp("^"+c.call(l).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");t.exports=i},function(t,e){function n(t){return!!t&&"object"==typeof t}function i(t){return function(e){return null==e?void 0:e[t]}}function r(t){return null!=t&&o(l(t))}function o(t){return"number"==typeof t&&t>-1&&t%1==0&&c>=t}function s(t){return n(t)&&r(t)&&u.call(t,"callee")&&!h.call(t,"callee")}var a=Object.prototype,u=a.hasOwnProperty,h=a.propertyIsEnumerable,c=9007199254740991,l=i("length");t.exports=s},function(t,e){function n(t){return!!t&&"object"==typeof t}function i(t,e){var n=null==t?void 0:t[e];return a(n)?n:void 0}function r(t){return"number"==typeof t&&t>-1&&t%1==0&&m>=t}function o(t){return s(t)&&p.call(t)==h}function s(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function a(t){return null==t?!1:o(t)?g.test(f.call(t)):n(t)&&c.test(t)}var u="[object Array]",h="[object Function]",c=/^\[object .+?Constructor\]$/,l=Object.prototype,f=Function.prototype.toString,d=l.hasOwnProperty,p=l.toString,g=RegExp("^"+f.call(d).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),_=i(Array,"isArray"),m=9007199254740991,y=_||function(t){return n(t)&&r(t.length)&&p.call(t)==u};t.exports=y},[133,9,10,11],function(t,e){function n(t,e,n){if("function"!=typeof t)return i;if(void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 3:return function(n,i,r){return t.call(e,n,i,r)};case 4:return function(n,i,r,o){return t.call(e,n,i,r,o)};case 5:return function(n,i,r,o,s){return t.call(e,n,i,r,o,s)}}return function(){return t.apply(e,arguments)}}function i(t){return t}t.exports=n},function(t,e){function n(t){return function(e){return null==e?void 0:e[t]}}function i(t){return null!=t&&s(c(t))}function r(t,e){return t="number"==typeof t||u.test(t)?+t:-1,e=null==e?h:e,t>-1&&t%1==0&&e>t}function o(t,e,n){if(!a(n))return!1;var o=typeof e;if("number"==o?i(n)&&r(e,n.length):"string"==o&&e in n){var s=n[e];return t===t?t===s:s!==s}return!1}function s(t){return"number"==typeof t&&t>-1&&t%1==0&&h>=t}function a(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}var u=/^\d+$/,h=9007199254740991,c=n("length");t.exports=o},function(t,e){function n(t,e){if("function"!=typeof t)throw new TypeError(i);return e=r(void 0===e?t.length-1:+e||0,0),function(){for(var n=arguments,i=-1,o=r(n.length-e,0),s=Array(o);++i<o;)s[i]=n[e+i];switch(e){case 0:return t.call(this,s);case 1:return t.call(this,n[0],s);case 2:return t.call(this,n[0],n[1],s)}var a=Array(e+1);for(i=-1;++i<e;)a[i]=n[i];return a[e]=s,t.apply(this,a)}}var i="Expected a function",r=Math.max;t.exports=n},function(t,e,n){function i(t,e){return void 0===t?e:t}function r(t,e){return s(function(n){var i=n[0];return null==i?i:(n.push(e),t.apply(void 0,n))})}var o=n(1),s=n(13),a=r(o,i);t.exports=a},11,function(t,e,n){t.exports=n(15)},function(t,e,n){var i,r=n(16),o=n(17),s=n(45),a=n(49),u=n(46),h=n(48),c=n(50),l=n(129);t.exports=i=function(){},i.createAudioPlayer=function(t,e){var n;if(n=t.src.split(":")[0],("rtmp"===n||"rtmpt"===n||t.forceFlash)&&!t.forceHTML5)return new o(t,e);if(t.mimeType=i.getMimeType(t),t.mimeType===l.M3U8){if(r.isMSESupportMPEG()||r.isMSESupportMP4())return new c(t,e);if(r.isNativeHlsSupported()&&!t.forceCustomHLS)return r.isMobile()||t.forceSingle?new a(t,e):new s(t,e)}else{if(r.supportHTML5Audio()&&r.canPlayType(t.mimeType)||t.forceHTML5)return r.isMobile()||t.forceSingle?new h(t,e):new u(t,e);if(t.mimeType===l.MP3)return new o(t,e)}return null},i.getMimeType=function(t){if(t.mimeType)return t.mimeType;var e=t.src.split("?")[0];return e=e.substring(e.lastIndexOf(".")+1,e.length),l.getTypeByExtension(e)}},function(t,e){function n(){return!(!window.MediaSource&&!window.WebKitMediaSource)}t.exports={supportHTML5Audio:function(){var t;try{if(window.HTMLAudioElement&&"undefined"!=typeof Audio)return t=new Audio,!0}catch(e){return!1}},createAudioElement:function(){var t=document.createElement("audio");return t.setAttribute("msAudioCategory","BackgroundCapableMedia"),t.mozAudioChannelType="content",t},isMobile:function(t){var e=window.navigator.userAgent,n=["mobile","iPhone","iPad","iPod","Android","Skyfire"];return n.some(function(t){return t=new RegExp(t,"i"),t.test(e)})},isIE10Mobile:function(){return/IEmobile\/10\.0/gi.test(navigator.userAgent)},canPlayType:function(t){var e=document.createElement("audio");return!!(e&&e.canPlayType&&e.canPlayType(t).match(/maybe|probably/i))},isNativeHlsSupported:function(){var t,e,n,i=navigator.userAgent,r=["iPhone","iPad","iPod"];return t=function(t){return t.test(i)},e=!t(/chrome/i)&&!t(/opera/i)&&t(/safari/i),n=r.some(function(e){return t(new RegExp(e,"i"))}),n||e},isMSESupported:n,isMSESupportMPEG:function(){return n()&&MediaSource.isTypeSupported("audio/mpeg")},isMSESupportMP4:function(){return n()&&MediaSource.isTypeSupported("audio/mp4")}}},function(t,e,n){function i(t,e){a.call(this,"FlashAudioProxy",t,e),i.players[t.id]=this,this._errorMessage=null,this._errorID=null,this._volume=1,this._muted=!1,i.creatingFlashAudio||(i.flashAudio?this._createFlashAudio():i.createFlashObject(e))}var r=n(1),o=n(18),s=n(29),a=n(35),u=n(39),h=n(43),c=n(38),l=n(44);t.exports=i,r(i.prototype,a.prototype),i.players={},i.createFlashObject=function(t){i.creatingFlashAudio=!0,i.containerElement=document.createElement("div"),i.containerElement.setAttribute("id",t.flashObjectID+"-container"),i.flashElementTarget=document.createElement("div"),i.flashElementTarget.setAttribute("id",t.flashObjectID+"-target"),i.containerElement.appendChild(i.flashElementTarget),document.body.appendChild(i.containerElement);var e=function(e){if(e.success)i.flashAudio=document.getElementById(t.flashObjectID),window.setTimeout(function(){if(i.flashAudio&&!("PercentLoaded"in i.flashAudio))for(var t in i.players)i.players.hasOwnProperty(t)&&(i.players[t]._errorID=h.FLASH_PROXY_FLASH_BLOCKED,i.players[t]._errorMessage="Flash object blocked",i.players[t]._setState(c.ERROR),i.players[t]._logger.type=i.players[t].getType(),i.players[t]._logger.log(i.players[t]._errorMessage))},t.flashLoadTimeout),i.flashAudio.triggerEvent=function(t,e){i.players[t]._triggerEvent(e)},i.flashAudio.onPositionChange=function(t,e,n,r){i.players[t]._onPositionChange(e,n,r)},i.flashAudio.onDebug=function(t,e,n){i.players[t]._logger.type=e,i.players[t]._logger.log(n)},i.flashAudio.onStateChange=function(t,e){i.players[t]._setState(e),e===c.DEAD&&delete i.players[t]},i.flashAudio.onInit=function(t){i.creatingFlashAudio=!1,o(s(i.players),"_createFlashAudio")};else for(var n in i.players)i.players.hasOwnProperty(n)&&(i.players[n]._errorID=h.FLASH_PROXY_CANT_LOAD_FLASH,i.players[n]._errorMessage="Cannot create flash object",i.players[n]._setState(c.ERROR))};document.getElementById(t.flashObjectID)||l.embedSWF(t.flashAudioPath,t.flashObjectID+"-target","1","1","9.0.24","",{json:encodeURIComponent(JSON.stringify(t))},{allowscriptaccess:"always"},{id:t.flashObjectID,tabIndex:"-1"},e)},i._ready=function(){return i.flashAudio&&!i.creatingFlashAudio},i.prototype._createFlashAudio=function(){i.flashAudio.createAudio(this.getDescriptor()),this._state=i.flashAudio.getState(this.getId()),this.setVolume(this._volume),this.setMute(this._muted)},i.prototype._triggerEvent=function(t){this._logger.log("Flash element triggered event: "+t),this.trigger(t,this)},i.prototype._setState=function(t){this._state!==t&&(this._state=t,this.trigger(u.STATE_CHANGE,t,this))},i.prototype._onPositionChange=function(t,e,n){this.trigger(u.POSITION_CHANGE,t,e,n,this)},i.prototype.getType=function(){return i._ready()?i.flashAudio.getType(this.getId()):this._type},i.prototype.getContainerElement=function(){
return i.containerElement},i.prototype.play=function(t){if(i._ready()){if(this.getState()===c.PAUSED)return void this.resume();t=void 0===t?0:t,i.flashAudio.playAudio(this.getId(),t)}},i.prototype.pause=function(){i._ready()&&i.flashAudio.pauseAudio(this.getId())},i.prototype.seek=function(t){i._ready()&&i.flashAudio.seekAudio(this.getId(),t)},i.prototype.resume=function(){i._ready()&&i.flashAudio.resumeAudio(this.getId())},i.prototype.setVolume=function(t){this._volume=t,i._ready()&&i.flashAudio.setVolume(this.getId(),t)},i.prototype.getVolume=function(){return i._ready()?i.flashAudio.getVolume(this.getId()):this._volume},i.prototype.setMute=function(t){this._muted=t,i._ready()&&i.flashAudio.setMute(this.getId(),t)},i.prototype.getMute=function(){return i._ready()?i.flashAudio.getMute(this.getId()):this._muted},i.prototype.getState=function(){return this._state},i.prototype.getCurrentPosition=function(){return i._ready()?i.flashAudio.getCurrentPosition(this.getId()):0},i.prototype.getLoadedPosition=function(){return i._ready()?i.flashAudio.getLoadedPosition(this.getId()):0},i.prototype.getDuration=function(){return i._ready()?i.flashAudio.getDuration(this.getId()):0},i.prototype.kill=function(){return i._ready()?void i.flashAudio.killAudio(this.getId()):0},i.prototype.getErrorMessage=function(){return this._errorMessage?this._errorMessage:i.flashAudio.getErrorMessage(this.getId())},i.prototype.getErrorID=function(){return this._errorID?this._errorID:i.flashAudio.getErrorID(this.getId())},i.prototype.getLevelNum=function(){return i._ready()?i.flashAudio.getLevelNum(this.getId()):0},i.prototype.getLevel=function(){return i._ready()?i.flashAudio.getLevel(this.getId()):0},i.prototype.setLevel=function(t){return i._ready()?i.flashAudio.setLevel(this.getId(),t):0}},function(t,e,n){function i(t){return function(e){return null==e?void 0:e[t]}}function r(t){return null!=t&&s(_(t))}function o(t,e){var n=typeof t;if("string"==n&&p.test(t)||"number"==n)return!0;if(l(t))return!1;var i=!d.test(t);return i||null!=e&&t in a(e)}function s(t){return"number"==typeof t&&t>-1&&t%1==0&&g>=t}function a(t){return u(t)?t:Object(t)}function u(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}var h=n(19),c=n(24),l=n(23),f=n(28),d=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\n\\]|\\.)*?\1)\]/,p=/^\w*$/,g=9007199254740991,_=i("length"),m=f(function(t,e,n){var i=-1,s="function"==typeof e,a=o(e),u=r(t)?Array(t.length):[];return h(t,function(t){var r=s?e:a&&null!=t?t[e]:void 0;u[++i]=r?r.apply(t,n):c(t,e,n)}),u});t.exports=m},[134,20],[132,21,22,23],5,6,7,function(t,e,n){function i(t,e,n){null==t||r(e,t)||(e=c(e),t=1==e.length?t:u(t,h(e,0,-1)),e=s(e));var i=null==t?t:t[e];return null==i?void 0:i.apply(t,n)}function r(t,e){var n=typeof t;if("string"==n&&d.test(t)||"number"==n)return!0;if(l(t))return!1;var i=!f.test(t);return i||null!=e&&t in o(e)}function o(t){return a(t)?t:Object(t)}function s(t){var e=t?t.length:0;return e?t[e-1]:void 0}function a(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}var u=n(25),h=n(26),c=n(27),l=n(23),f=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\n\\]|\\.)*?\1)\]/,d=/^\w*$/;t.exports=i},function(t,e){function n(t,e,n){if(null!=t){void 0!==n&&n in i(t)&&(e=[n]);for(var r=0,o=e.length;null!=t&&o>r;)t=t[e[r++]];return r&&r==o?t:void 0}}function i(t){return r(t)?t:Object(t)}function r(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}t.exports=n},function(t,e){function n(t,e,n){var i=-1,r=t.length;e=null==e?0:+e||0,0>e&&(e=-e>r?0:r+e),n=void 0===n||n>r?r:+n||0,0>n&&(n+=r),r=e>n?0:n-e>>>0,e>>>=0;for(var o=Array(r);++i<r;)o[i]=t[i+e];return o}t.exports=n},function(t,e,n){function i(t){return null==t?"":t+""}function r(t){if(o(t))return t;var e=[];return i(t).replace(s,function(t,n,i,r){e.push(i?r.replace(a,"$1"):n||t)}),e}var o=n(23),s=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\n\\]|\\.)*?)\2)\]/g,a=/\\(\\)?/g;t.exports=r},11,function(t,e,n){function i(t){return r(t,o(t))}var r=n(30),o=n(31);t.exports=i},function(t,e){function n(t,e){for(var n=-1,i=e.length,r=Array(i);++n<i;)r[n]=t[e[n]];return r}t.exports=n},[132,32,33,34],5,6,7,function(t,e,n){function i(t,e,n,i){this._type=t,this._id=e.id,this._descriptor=e,this._settings=n,this._currentPosition=this._loadedPosition=this._duration=0,this._capabilities=r({},h.createDefaults(),i),this._logger=new u(this.getType(),this.getId(),e.title,n);try{h.validate(this.getCapabilities())}catch(o){return this.getLogger().log("Bad caps: "+o),void this.updateState(s.ERROR)}this.updateState(s.INITIALIZE)}var r=n(1),o=n(36),s=n(38),a=n(39),u=n(40),h=n(42);t.exports=i,r(i.prototype,o),i.prototype.canPlay=function(){return!1},i.prototype.getCapabilities=function(){return this._capabilities},i.prototype.getLogger=function(){return this._logger},i.prototype.getSettings=function(){return this._settings},i.prototype.getDescriptor=function(){return this._descriptor},i.prototype.getType=function(){return this._type},i.prototype.getId=function(){return this._id+""},i.prototype.beforeStateChange=function(t,e){return!0},i.prototype.notifyStateChange=function(t,e){return!0},i.prototype.afterStateChange=function(t,e){},i.prototype.updateState=function(t){var e=this._state;e!==t&&e!==s.DEAD&&this.beforeStateChange(e,t)&&(this._state=t,this._logger.log('state changed "'+this.getState()+'", position: '+this.getCurrentPosition()+", duration: "+this.getDuration()),this.notifyStateChange(e,t)&&this.trigger(a.STATE_CHANGE,t,this),this.afterStateChange(e,t))},i.prototype.getState=function(){return this._state},i.prototype._isInOneOfStates=function(){for(var t in arguments)if(arguments[t]===this.getState())return!0;return!1},i.prototype.getCurrentPosition=function(){return this._currentPosition},i.prototype.getLoadedPosition=function(){return this._loadedPosition},i.prototype.getDuration=function(){return this._duration}},function(t,e,n){t.exports=n(37)},function(t,e,n){!function(){function n(){return{keys:Object.keys||function(t){if("object"!=typeof t&&"function"!=typeof t||null===t)throw new TypeError("keys() called on a non-object");var e,n=[];for(e in t)t.hasOwnProperty(e)&&(n[n.length]=e);return n},uniqueId:function(t){var e=++a+"";return t?t+e:e},has:function(t,e){return o.call(t,e)},each:function(t,e,n){if(null!=t)if(r&&t.forEach===r)t.forEach(e,n);else if(t.length===+t.length)for(var i=0,o=t.length;o>i;i++)e.call(n,t[i],i,t);else for(var s in t)this.has(t,s)&&e.call(n,t[s],s,t)},once:function(t){var e,n=!1;return function(){return n?e:(n=!0,e=t.apply(this,arguments),t=null,e)}}}}var i,r=Array.prototype.forEach,o=Object.prototype.hasOwnProperty,s=Array.prototype.slice,a=0,u=n();i={on:function(t,e,n){if(!c(this,"on",t,[e,n])||!e)return this;this._events||(this._events={});var i=this._events[t]||(this._events[t]=[]);return i.push({callback:e,context:n,ctx:n||this}),this},once:function(t,e,n){if(!c(this,"once",t,[e,n])||!e)return this;var i=this,r=u.once(function(){i.off(t,r),e.apply(this,arguments)});return r._callback=e,this.on(t,r,n)},off:function(t,e,n){var i,r,o,s,a,h,l,f;if(!this._events||!c(this,"off",t,[e,n]))return this;if(!t&&!e&&!n)return this._events={},this;for(s=t?[t]:u.keys(this._events),a=0,h=s.length;h>a;a++)if(t=s[a],o=this._events[t]){if(this._events[t]=i=[],e||n)for(l=0,f=o.length;f>l;l++)r=o[l],(e&&e!==r.callback&&e!==r.callback._callback||n&&n!==r.context)&&i.push(r);i.length||delete this._events[t]}return this},trigger:function(t){if(!this._events)return this;var e=s.call(arguments,1);if(!c(this,"trigger",t,e))return this;var n=this._events[t],i=this._events.all;return n&&l(n,e),i&&l(i,arguments),this},stopListening:function(t,e,n){var i=this._listeners;if(!i)return this;var r=!e&&!n;"object"==typeof e&&(n=this),t&&((i={})[t._listenerId]=t);for(var o in i)i[o].off(e,n,this),r&&delete this._listeners[o];return this}};var h=/\s+/,c=function(t,e,n,i){if(!n)return!0;if("object"==typeof n){for(var r in n)t[e].apply(t,[r,n[r]].concat(i));return!1}if(h.test(n)){for(var o=n.split(h),s=0,a=o.length;a>s;s++)t[e].apply(t,[o[s]].concat(i));return!1}return!0},l=function(t,e){var n,i=-1,r=t.length,o=e[0],s=e[1],a=e[2];switch(e.length){case 0:for(;++i<r;)(n=t[i]).callback.call(n.ctx);return;case 1:for(;++i<r;)(n=t[i]).callback.call(n.ctx,o);return;case 2:for(;++i<r;)(n=t[i]).callback.call(n.ctx,o,s);return;case 3:for(;++i<r;)(n=t[i]).callback.call(n.ctx,o,s,a);return;default:for(;++i<r;)(n=t[i]).callback.apply(n.ctx,e)}},f={listenTo:"on",listenToOnce:"once"};u.each(f,function(t,e){i[e]=function(e,n,i){var r=this._listeners||(this._listeners={}),o=e._listenerId||(e._listenerId=u.uniqueId("l"));return r[o]=e,"object"==typeof n&&(i=this),e[t](n,i,this),this}}),i.bind=i.on,i.unbind=i.off,i.mixin=function(t){var e=["on","once","off","trigger","stopListening","listenTo","listenToOnce","bind","unbind"];return u.each(e,function(e){t[e]=this[e]},this),t},"undefined"!=typeof t&&t.exports&&(e=t.exports=i),e.BackboneEvents=i}(this)},function(t,e){t.exports={PLAYING:"playing",LOADING:"loading",SEEKING:"seeking",PAUSED:"paused",ERROR:"error",IDLE:"idle",INITIALIZE:"initialize",ENDED:"ended",DEAD:"dead"}},function(t,e){t.exports={POSITION_CHANGE:"position-change",STATE_CHANGE:"state-change",DATA:"data",NETWORK_TIMEOUT:"network-timeout",METADATA:"metadata"}},function(t,e,n){var i,r=n(41),o=null;t.exports=function(t,e,n,s){if(!i&&(i=r(!!s.debug,"audiomanager"),o)){var a=i;i=function(){a(o(arguments[0]+"%s",Array.prototype.slice.call(arguments,1)))}}return n=n&&n.length?" ["+n.replace(/\s/g,"").substr(0,6)+"]":"",{log:i.bind(null,"%s (%s)%s",t,e,n)}}},function(t,e){function n(){function t(t,n){for(var i,r=arguments.length,o=Array(r>2?r-2:0),s=2;r>s;s++)o[s-2]=arguments[s];"string"==typeof n?n=" "+n:(o.unshift(n),n=""),(i=window.console)[t].apply(i,[e()+" |"+c+"%c"+n].concat(l,o))}function e(){var t=new Date,e=null===h?0:t-h;return h=+t,"%c"+r(t.getHours())+":"+r(t.getMinutes())+":"+r(t.getSeconds())+"."+i(t.getMilliseconds(),"0",3)+"%c (%c"+i("+"+e+"ms"," ",8)+"%c)"}var n=arguments.length<=0||void 0===arguments[0]?!0:arguments[0],o=arguments.length<=1||void 0===arguments[1]?"":arguments[1];if(!n)return s;var h=null,c=a(o),l=["color: green","color: grey","color: blue","color: grey",u(o),""],f=t.bind(null,"log");return f.log=f,["info","warn","error"].forEach(function(e){f[e]=t.bind(null,e)}),f}function i(t,e,n){return o(e,n-(""+t).length)+t}function r(t){return i(t,"0",2)}function o(t,e){return e>0?new Array(e+1).join(t):""}function s(){}function a(t){return t?"%c"+t:"%c"}t.exports=n,s.log=s.info=s.warn=s.error=s;var u=function(){var t=["#51613C","#447848","#486E5F","#787444","#6E664E"],e=0;return function(n){return n?"background-color:"+t[e++%t.length]+";color:#fff;border-radius:3px;padding:2px 4px;font-family:sans-serif;text-transform:uppercase;font-size:9px;margin:0 4px":""}}()},function(t,e){function n(t){for(var e in r)if(r.hasOwnProperty(e)&&void 0===t[r[e]])throw new Error("Caps lack required field: "+e);if(!(t[r.PROTOCOLS]instanceof Array))throw new Error("Caps protocols must be an array");if(!(t[r.MIMETYPES]instanceof Array))throw new Error("Caps mimetypes must be an array");return!0}function i(){var t={};return t[r.MIMETYPES]=[],t[r.PROTOCOLS]=[],t[r.AUDIO_ONLY]=!0,t[r.CAN_SEEK_ALWAYS]=!0,t[r.NEEDS_URL_REFRESH]=!0,t}var r={MIMETYPES:"mimetypes",PROTOCOLS:"protocols",AUDIO_ONLY:"audioOnly",CAN_SEEK_ALWAYS:"canSeekAlways",NEEDS_URL_REFRESH:"needsUrlRefresh"},o={createDefaults:i,names:r,validate:n};t.exports=o},function(t,e){t.exports={FLASH_HLS_PLAYLIST_NOT_FOUND:"HLS_PLAYLIST_NOT_FOUND",FLASH_HLS_PLAYLIST_SECURITY_ERROR:"HLS_SECURITY_ERROR",FLASH_HLS_NOT_VALID_PLAYLIST:"HLS_NOT_VALID_PLAYLIST",FLASH_HLS_NO_TS_IN_PLAYLIST:"HLS_NO_TS_IN_PLAYLIST",FLASH_HLS_NO_PLAYLIST_IN_MANIFEST:"HLS_NO_PLAYLIST_IN_MANIFEST",FLASH_HLS_TS_IS_CORRUPT:"HLS_TS_IS_CORRUPT",FLASH_HLS_FLV_TAG_CORRUPT:"HLS_FLV_TAG_CORRUPT",FLASH_HTTP_FILE_NOT_FOUND:"HTTP_FILE_NOT_FOUND",FLASH_RTMP_CONNECT_FAILED:"RTMP_CONNECT_FAILED",FLASH_RTMP_CONNECT_CLOSED:"RTMP_CONNECT_CLOSED",FLASH_RTMP_CANNOT_PLAY_STREAM:"RTMP_CANNOT_PLAY_STREAM",FLASH_PROXY_CANT_LOAD_FLASH:"CANT_LOAD_FLASH",FLASH_PROXY_FLASH_BLOCKED:"FLASH_PROXY_FLASH_BLOCKED",GENERIC_AUDIO_ENDED_EARLY:"GENERIC_AUDIO_ENDED_EARLY",GENERIC_AUDIO_OVERRUN:"GENERIC_AUDIO_OVERRUN",HTML5_AUDIO_ABORTED:"HTML5_AUDIO_ABORTED",HTML5_AUDIO_NETWORK:"HTML5_AUDIO_NETWORK",HTML5_AUDIO_DECODE:"HTML5_AUDIO_DECODE",HTML5_AUDIO_SRC_NOT_SUPPORTED:"HTML5_AUDIO_SRC_NOT_SUPPORTED",MSE_BAD_OBJECT_STATE:"MSE_BAD_OBJECT_STATE",MSE_NOT_SUPPORTED:"MSE_NOT_SUPPORTED",MSE_MP3_NOT_SUPPORTED:"MSE_MP3_NOT_SUPPORTED",MSE_HLS_NOT_VALID_PLAYLIST:"MSE_HLS_NOT_VALID_PLAYLIST",MSE_HLS_PLAYLIST_NOT_FOUND:"MSE_HLS_PLAYLIST_NOT_FOUND",MSE_HLS_SEGMENT_NOT_FOUND:"MSE_HLS_SEGMENT_NOT_FOUND"}},function(t,e){function n(){if(!q&&document.getElementsByTagName("body")[0]){try{var t,e=v("span");e.style.display="none",t=j.getElementsByTagName("body")[0].appendChild(e),t.parentNode.removeChild(t),t=null,e=null}catch(n){return}q=!0;for(var i=V.length,r=0;i>r;r++)V[r]()}}function i(t){q?t():V[V.length]=t}function r(t){if(typeof H.addEventListener!=k)H.addEventListener("load",t,!1);else if(typeof j.addEventListener!=k)j.addEventListener("load",t,!1);else if(typeof H.attachEvent!=k)S(H,"onload",t);else if("function"==typeof H.onload){var e=H.onload;H.onload=function(){e(),t()}}else H.onload=t}function o(){var t=j.getElementsByTagName("body")[0],e=v(N);e.setAttribute("style","visibility: hidden;"),e.setAttribute("type",F);var n=t.appendChild(e);if(n){var i=0;!function r(){if(typeof n.GetVariable!=k)try{var o=n.GetVariable("$version");o&&(o=o.split(" ")[1].split(","),Q.pv=[E(o[0]),E(o[1]),E(o[2])])}catch(a){Q.pv=[8,0,0]}else if(10>i)return i++,void window.setTimeout(r,10);t.removeChild(e),n=null,s()}()}else s()}function s(){var t=z.length;if(t>0)for(var e=0;t>e;e++){var n=z[e].id,i=z[e].callbackFn,r={success:!1,id:n};if(Q.pv[0]>0){var o=y(n);if(o)if(!A(z[e].swfVersion)||Q.wk&&Q.wk<312)if(z[e].expressInstall&&u()){var s={};s.data=z[e].expressInstall,s.width=o.getAttribute("width")||"0",s.height=o.getAttribute("height")||"0",o.getAttribute("class")&&(s.styleclass=o.getAttribute("class")),o.getAttribute("align")&&(s.align=o.getAttribute("align"));for(var l={},f=o.getElementsByTagName("param"),d=f.length,p=0;d>p;p++)"movie"!==f[p].getAttribute("name").toLowerCase()&&(l[f[p].getAttribute("name")]=f[p].getAttribute("value"));h(s,l,n,i)}else c(o),i&&i(r);else T(n,!0),i&&(r.success=!0,r.ref=a(n),r.id=n,i(r))}else if(T(n,!0),i){var g=a(n);g&&typeof g.SetVariable!=k&&(r.success=!0,r.ref=g,r.id=g.id),i(r)}}}function a(t){var e=null,n=y(t);return n&&"OBJECT"===n.nodeName.toUpperCase()&&(e=typeof n.SetVariable!==k?n:n.getElementsByTagName(N)[0]||n),e}function u(){return!X&&A("6.0.65")&&(Q.win||Q.mac)&&!(Q.wk&&Q.wk<312)}function h(t,e,n,i){var r=y(n);if(n=m(n),X=!0,O=i||null,R={success:!1,id:n},r){"OBJECT"===r.nodeName.toUpperCase()?(I=l(r),L=null):(I=r,L=n),t.id=U,(typeof t.width==k||!/%$/.test(t.width)&&E(t.width)<310)&&(t.width="310"),(typeof t.height==k||!/%$/.test(t.height)&&E(t.height)<137)&&(t.height="137");var o=Q.ie?"ActiveX":"PlugIn",s="MMredirectURL="+encodeURIComponent(H.location.toString().replace(/&/g,"%26"))+"&MMplayerType="+o+"&MMdoctitle="+encodeURIComponent(j.title.slice(0,47)+" - Flash Player Installation");if(typeof e.flashvars!=k?e.flashvars+="&"+s:e.flashvars=s,Q.ie&&4!==r.readyState){var a=v("div");n+="SWFObjectNew",a.setAttribute("id",n),r.parentNode.insertBefore(a,r),r.style.display="none",g(r)}d(t,e,n)}}function c(t){if(Q.ie&&4!==t.readyState){t.style.display="none";var e=v("div");t.parentNode.insertBefore(e,t),e.parentNode.replaceChild(l(t),e),g(t)}else t.parentNode.replaceChild(l(t),t)}function l(t){var e=v("div");if(Q.win&&Q.ie)e.innerHTML=t.innerHTML;else{var n=t.getElementsByTagName(N)[0];if(n){var i=n.childNodes;if(i)for(var r=i.length,o=0;r>o;o++)1===i[o].nodeType&&"PARAM"===i[o].nodeName||8===i[o].nodeType||e.appendChild(i[o].cloneNode(!0))}}return e}function f(t,e){var n=v("div");return n.innerHTML="<object classid='clsid:D27CDB6E-AE6D-11cf-96B8-444553540000'><param name='movie' value='"+t+"'>"+e+"</object>",n.firstChild}function d(t,e,n){var i,r=y(n);if(n=m(n),Q.wk&&Q.wk<312)return i;if(r){var o,s,a,u=v(Q.ie?"div":N);typeof t.id==k&&(t.id=n);for(a in e)e.hasOwnProperty(a)&&"movie"!==a.toLowerCase()&&p(u,a,e[a]);Q.ie&&(u=f(t.data,u.innerHTML));for(o in t)t.hasOwnProperty(o)&&(s=o.toLowerCase(),"styleclass"===s?u.setAttribute("class",t[o]):"classid"!==s&&"data"!==s&&u.setAttribute(o,t[o]));Q.ie?W[W.length]=t.id:(u.setAttribute("type",F),u.setAttribute("data",t.data)),r.parentNode.replaceChild(u,r),i=u}return i}function p(t,e,n){var i=v("param");i.setAttribute("name",e),i.setAttribute("value",n),t.appendChild(i)}function g(t){var e=y(t);e&&"OBJECT"===e.nodeName.toUpperCase()&&(Q.ie?(e.style.display="none",function n(){if(4===e.readyState){for(var t in e)"function"==typeof e[t]&&(e[t]=null);e.parentNode.removeChild(e)}else window.setTimeout(n,10)}()):e.parentNode.removeChild(e))}function _(t){return t&&t.nodeType&&1===t.nodeType}function m(t){return _(t)?t.id:t}function y(t){if(_(t))return t;var e=null;try{e=j.getElementById(t)}catch(n){}return e}function v(t){return j.createElement(t)}function E(t){return parseInt(t,10)}function S(t,e,n){t.attachEvent(e,n),K[K.length]=[t,e,n]}function A(t){t+="";var e=Q.pv,n=t.split(".");return n[0]=E(n[0]),n[1]=E(n[1])||0,n[2]=E(n[2])||0,e[0]>n[0]||e[0]===n[0]&&e[1]>n[1]||e[0]===n[0]&&e[1]===n[1]&&e[2]>=n[2]}function w(t,e,n,i){var r=j.getElementsByTagName("head")[0];if(r){var o="string"==typeof n?n:"screen";if(i&&(D=null,M=null),!D||M!==o){var s=v("style");s.setAttribute("type","text/css"),s.setAttribute("media",o),D=r.appendChild(s),Q.ie&&typeof j.styleSheets!=k&&j.styleSheets.length>0&&(D=j.styleSheets[j.styleSheets.length-1]),M=o}D&&(typeof D.addRule!=k?D.addRule(t,e):typeof j.createTextNode!=k&&D.appendChild(j.createTextNode(t+" {"+e+"}")))}}function T(t,e){if($){var n=e?"visible":"hidden",i=y(t);q&&i?i.style.visibility=n:"string"==typeof t&&w("#"+t,"visibility:"+n)}}function b(t){var e=/[\\\"<>\.;]/,n=null!=e.exec(t);return n&&typeof encodeURIComponent!=k?encodeURIComponent(t):t}/*!    SWFObject v2.3.20130521 <http://github.com/swfobject/swfobject>
		    is released under the MIT License <http://www.opensource.org/licenses/mit-license.php>
		*/
var P,I,L,O,R,D,M,k="undefined",N="object",x="Shockwave Flash",C="ShockwaveFlash.ShockwaveFlash",F="application/x-shockwave-flash",U="SWFObjectExprInst",B="onreadystatechange",H=window,j=document,G=navigator,Y=!1,V=[],z=[],W=[],K=[],q=!1,X=!1,$=!0,Z=!1,Q=function(){var t=typeof j.getElementById!=k&&typeof j.getElementsByTagName!=k&&typeof j.createElement!=k,e=G.userAgent.toLowerCase(),n=G.platform.toLowerCase(),i=n?/win/.test(n):/win/.test(e),r=n?/mac/.test(n):/mac/.test(e),o=/webkit/.test(e)?parseFloat(e.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):!1,s="Microsoft Internet Explorer"===G.appName,a=[0,0,0],u=null;if(typeof G.plugins!=k&&typeof G.plugins[x]==N)u=G.plugins[x].description,u&&typeof G.mimeTypes!=k&&G.mimeTypes[F]&&G.mimeTypes[F].enabledPlugin&&(Y=!0,s=!1,u=u.replace(/^.*\s+(\S+\s+\S+$)/,"$1"),a[0]=E(u.replace(/^(.*)\..*$/,"$1")),a[1]=E(u.replace(/^.*\.(.*)\s.*$/,"$1")),a[2]=/[a-zA-Z]/.test(u)?E(u.replace(/^.*[a-zA-Z]+(.*)$/,"$1")):0);else if(typeof H.ActiveXObject!=k)try{var h=new ActiveXObject(C);h&&(u=h.GetVariable("$version"),u&&(s=!0,u=u.split(" ")[1].split(","),a=[E(u[0]),E(u[1]),E(u[2])]))}catch(c){}return{w3:t,pv:a,wk:o,ie:s,win:i,mac:r}}();!function(){Q.w3&&((typeof j.readyState!=k&&("complete"===j.readyState||"interactive"===j.readyState)||typeof j.readyState==k&&(j.getElementsByTagName("body")[0]||j.body))&&n(),q||(typeof j.addEventListener!=k&&j.addEventListener("DOMContentLoaded",n,!1),Q.ie&&(j.attachEvent(B,function t(){"complete"===j.readyState&&(j.detachEvent(B,t),n())}),H===top&&!function e(){if(!q){try{j.documentElement.doScroll("left")}catch(t){return void window.setTimeout(e,0)}n()}}()),Q.wk&&!function i(){return q?void 0:/loaded|complete/.test(j.readyState)?void n():void window.setTimeout(i,0)}()))}(),V[0]=function(){Y?o():s()},function(){Q.ie&&window.attachEvent("onunload",function(){for(var t=K.length,e=0;t>e;e++)K[e][0].detachEvent(K[e][1],K[e][2]);for(var n=W.length,i=0;n>i;i++)g(W[i]);for(var r in Q)Q[r]=null;Q=null;for(var o in P)P[o]=null;P=null})}(),t.exports=P={registerObject:function(t,e,n,i){if(Q.w3&&t&&e){var r={};r.id=t,r.swfVersion=e,r.expressInstall=n,r.callbackFn=i,z[z.length]=r,T(t,!1)}else i&&i({success:!1,id:t})},getObjectById:function(t){return Q.w3?a(t):void 0},embedSWF:function(t,e,n,r,o,s,a,c,l,f){var p=m(e),g={success:!1,id:p};Q.w3&&!(Q.wk&&Q.wk<312)&&t&&e&&n&&r&&o?(T(p,!1),i(function(){n+="",r+="";var i={};if(l&&typeof l===N)for(var _ in l)i[_]=l[_];i.data=t,i.width=n,i.height=r;var m={};if(c&&typeof c===N)for(var y in c)m[y]=c[y];if(a&&typeof a===N)for(var v in a)if(a.hasOwnProperty(v)){var E=Z?encodeURIComponent(v):v,S=Z?encodeURIComponent(a[v]):a[v];typeof m.flashvars!=k?m.flashvars+="&"+E+"="+S:m.flashvars=E+"="+S}if(A(o)){var w=d(i,m,e);i.id===p&&T(p,!0),g.success=!0,g.ref=w,g.id=w.id}else{if(s&&u())return i.data=s,void h(i,m,e,f);T(p,!0)}f&&f(g)})):f&&f(g)},switchOffAutoHideShow:function(){$=!1},enableUriEncoding:function(t){Z=typeof t===k?!0:t},ua:Q,getFlashPlayerVersion:function(){return{major:Q.pv[0],minor:Q.pv[1],release:Q.pv[2]}},hasFlashPlayerVersion:A,createSWF:function(t,e,n){return Q.w3?d(t,e,n):void 0},showExpressInstall:function(t,e,n,i){Q.w3&&u()&&h(t,e,n,i)},removeSWF:function(t){Q.w3&&g(t)},createCSS:function(t,e,n,i){Q.w3&&w(t,e,n,i)},addDomLoadEvent:i,addLoadEvent:r,getQueryParamValue:function(t){var e=j.location.search||j.location.hash;if(e){if(/\?/.test(e)&&(e=e.split("?")[1]),null==t)return b(e);for(var n=e.split("&"),i=0;i<n.length;i++)if(n[i].substring(0,n[i].indexOf("="))===t)return b(n[i].substring(n[i].indexOf("=")+1))}return""},expressInstallCallback:function(){if(X){var t=y(U);t&&I&&(t.parentNode.replaceChild(I,t),L&&(T(L,!0),Q.ie&&(I.style.display="block")),O&&O(R)),X=!1}},version:"2.3"}},function(t,e,n){function i(t,e,n,i){if(n!==s&&n!==o&&void 0!==n)throw new Error("Can not use the provided base class");this._baseclass=n||o,this._baseclass.call(this,t,e,i||"HLSAudioPlayer"),this._seekPosition=0}var r=n(1),o=n(46),s=n(48),a=n(38);t.exports=i,r(i.prototype,o.prototype),i.prototype.seek=function(t){this._baseclass.prototype.seek.apply(this,arguments),this._isInOneOfStates(a.LOADING,a.SEEKING)&&(this._seekPosition=t)},i.prototype.getCurrentPosition=function(){if(this._isInOneOfStates(a.LOADING)&&this._seekPosition>0)return this._seekPosition;if(this._isInOneOfStates(a.PLAYING,a.SEEKING)){if(this._seekPosition>=this._currentPosition)return this._seekPosition;this._seekPosition=0}return this._baseclass.prototype.getCurrentPosition.apply(this,arguments)}},function(t,e,n){function i(t,e,n){this._duration=0,this._currentPosition=0,this._loadedPosition=0,h.prototype.constructor.call(this,n||"HTML5AudioPlayer",t,e),this._isLoaded=!1,this._prevCurrentPosition=0,this._prevCheckTime=0,this._positionUpdateTimer=0,this._playRequested=!1,this._startFromPosition=0,this.getDescriptor().duration&&(this._duration=this.getDescriptor().duration),this._bindHandlers(),this._initMediaElement(),this.updateState(s.IDLE)}var r=n(1),o=n(47).bindAll,s=n(38),a=n(39),u=n(43),h=n(35),c=n(16);t.exports=i,r(i.prototype,h.prototype),i.MediaAPIEvents=["ended","play","playing","pause","seeking","waiting","seeked","error","loadeddata","loadedmetadata"],i.prototype.play=function(t){return this._isInOneOfStates(s.ERROR,s.DEAD)?void this._logger.log("play called but state is ERROR or DEAD"):(this._logger.log("play from "+t),this._startFromPosition=t||0,this._playRequested=!0,this._isInOneOfStates(s.PAUSED,s.ENDED)?void this.resume():(this.updateState(s.LOADING),this._html5Audio.readyState>0&&this._onLoadedMetadata(),this._html5Audio.readyState>1&&this._onLoaded(),void(this._isLoaded?this._playAfterLoaded():this.once(a.DATA,this._playAfterLoaded))))},i.prototype.pause=function(){this._isInOneOfStates(s.ERROR,s.DEAD)||(this._logger.log("pause"),this._playRequested=!1,this._html5Audio&&this._html5Audio.pause())},i.prototype.seek=function(t){var e,n=!1,i=t/1e3,r=this._html5Audio.seekable;if(!this._isInOneOfStates(s.ERROR,s.DEAD)){if(!this._isLoaded)return this.once(a.DATA,function(){this.seek(t)}),void this._logger.log("postponing seek for when loaded");if(c.isIE10Mobile)n=!0;else for(e=0;e<r.length;e++)if(i<=r.end(e)&&i>=r.start(e)){n=!0;break}if(!n)return void this._logger.log("can not seek");this._logger.log("seek"),this.updateState(s.SEEKING),this._html5Audio.currentTime=i,this._currentPosition=t,this._lastMediaClockCheck=null}},i.prototype.resume=function(){return this._isInOneOfStates(s.ERROR,s.DEAD)?void this._logger.log("resume called but state is ERROR or DEAD"):(this._logger.log("resume"),void(this.getState()===s.PAUSED?(this.updateState(s.PLAYING),this._html5Audio.play(this._html5Audio.currentTime)):this.getState()===s.ENDED&&this._html5Audio.play(0)))},i.prototype.setVolume=function(t){this._html5Audio&&(this._html5Audio.volume=t)},i.prototype.getVolume=function(){return this._html5Audio?this._html5Audio.volume:1},i.prototype.setMute=function(t){this._html5Audio&&(this._html5Audio.muted=t)},i.prototype.getMute=function(){return this._html5Audio?this._html5Audio.muted:!1},i.prototype.kill=function(){this._state!==s.DEAD&&(this._logger.log("killing ..."),this._resetPositionInterval(!1),this._playRequested=!1,this._toggleEventListeners(!1),this.pause(),delete this._html5Audio,this.updateState(s.DEAD),this._logger.log("dead"))},i.prototype.getErrorMessage=function(){return this._errorMessage},i.prototype.getErrorID=function(){return this._errorID},i.prototype._bindHandlers=function(){o(this,["_onPositionChange","_onHtml5MediaEvent","_onLoaded","_onLoadedMetadata"])},i.prototype._initMediaElement=function(){this._html5Audio=c.createAudioElement(),this._html5Audio.id=this.getSettings().audioObjectID+"_"+this.getId(),this._html5Audio.preload="auto",this._html5Audio.type=this.getDescriptor().mimeType,this._html5Audio.src=this.getDescriptor().src,this._html5Audio.load(),this._toggleEventListeners(!0)},i.prototype._playAfterLoaded=function(){this._playRequested&&(this._trySeekToStartPosition(),this._html5Audio.play())},i.prototype._isInOneOfStates=function(){for(var t in arguments)if(arguments[t]===this._state)return!0;return!1},i.prototype._toggleEventListeners=function(t){if(this._html5Audio){var e=t?"addEventListener":"removeEventListener";i.MediaAPIEvents.forEach(function(t){switch(t){case"loadeddata":this._html5Audio[e]("loadeddata",this._onLoaded);break;case"loadedmetadata":this._html5Audio[e]("loadedmetadata",this._onLoadedMetadata);break;default:this._html5Audio[e](t,this._onHtml5MediaEvent)}},this)}},i.prototype._trySeekToStartPosition=function(){var t;return this._startFromPosition>0&&(this._logger.log("seek to start position: "+this._startFromPosition),t=this._startFromPosition/1e3,this._html5Audio.currentTime=t,this._html5Audio.currentTime===t)?(this._lastMediaClockCheck=null,this._currentPosition=this._startFromPosition,this._startFromPosition=0,!0):!1},i.prototype._onLoaded=function(){this._logger.log("HTML5 media loadeddata event"),this.trigger(a.DATA,this)},i.prototype._onLoadedMetadata=function(){this._logger.log("HTML5 media loadedmetadata event"),(void 0===this._duration||0===this._duration)&&(this._duration=1e3*this._html5Audio.duration),this._loadedPosition=this._duration,this._isLoaded=!0,this.trigger(a.METADATA,this)},i.prototype._resetPositionInterval=function(t){window.clearInterval(this._positionUpdateTimer),t&&(this._positionUpdateTimer=window.setInterval(this._onPositionChange,this.getSettings().updateInterval))},i.prototype._onPositionChange=function(){if(!this._isInOneOfStates(s.DEAD)){var t;return Date.now(),this._currentPosition=1e3*this._html5Audio.currentTime,this.trigger(a.POSITION_CHANGE,this.getCurrentPosition(),this._loadedPosition,this._duration,this),this._isInOneOfStates(s.PLAYING,s.LOADING)?0!==this._duration&&(this._currentPosition>this._duration||this._currentPosition>this._loadedPosition&&!c.isIE10Mobile)?void this._onHtml5MediaEvent({type:"ended"}):this.getState()!==s.PLAYING||this._mediasHasProgressed()?void(this.getState()!==s.PLAYING&&this._mediasHasProgressed()&&this.updateState(s.PLAYING)):(this._logger.log("media clock check failed, playhead is not advancing anymore"),void this.updateState(s.LOADING)):void(this._state===s.SEEKING&&t>0&&this.updateState(s.PLAYING))}},i.prototype._mediasHasProgressed=function(){var t=!1,e=Date.now();if(this._lastMediaClockCheck){var n=e-this._lastMediaClockCheck,i=this._currentPosition-this._lastMediaClockValue;if(.1*n>i){if(0===i&&50>n)return!0;t=!0}}return this._lastMediaClockValue=this._currentPosition,this._lastMediaClockCheck=e,!t},i.prototype._onHtml5MediaEvent=function(t){switch(this._logger.log("HTML5 media event: "+t.type),t.type){case"playing":if(this._trySeekToStartPosition())break;this._onPositionChange(),this._resetPositionInterval(!0),this.updateState(s.PLAYING);break;case"pause":this._onPositionChange(),this._resetPositionInterval(!1),this.updateState(s.PAUSED);break;case"ended":this._currentPosition=this._loadedPosition=this._duration,this._resetPositionInterval(!1),this.updateState(s.ENDED);break;case"waiting":if(this.getState()===s.SEEKING)break;this.updateState(s.LOADING);break;case"seeking":this.updateState(s.SEEKING);break;case"seeked":this._html5Audio.paused?this.updateState(s.PAUSED):this.updateState(s.PLAYING),this._onPositionChange(t);break;case"error":this._error(this._html5AudioErrorCodeToErrorId(),!0)}},i.prototype._html5AudioErrorCodeToErrorId=function(){return{1:u.HTML5_AUDIO_ABORTED,2:u.HTML5_AUDIO_NETWORK,3:u.HTML5_AUDIO_DECODE,4:u.HTML5_AUDIO_SRC_NOT_SUPPORTED}[this._html5Audio.error.code]},i.prototype._error=function(t,e){var n="error: ";e&&(n="error (native): "),this._errorID=t,this._errorMessage=this._getErrorMessage(this._errorID),this._logger.log(n+this._errorID+" "+this._errorMessage),this.updateState(s.ERROR),this._toggleEventListeners(!1)},i.prototype._getErrorMessage=function(t){var e={};return e[u.HTML5_AUDIO_ABORTED]="The fetching process for the media resource was aborted by the user agent at the user's request.",e[u.HTML5_AUDIO_NETWORK]="A network error of some description caused the user agent to stop fetching the media resource, after the resource was established to be usable.",e[u.HTML5_AUDIO_DECODE]="An error of some description occurred while decoding the media resource, after the resource was established to be usable.",e[u.HTML5_AUDIO_SRC_NOT_SUPPORTED]="The media resource indicated by the src attribute was not suitable.",e[t]}},function(t,e){function n(t,e){var n=new Uint8Array(t.byteLength+e.byteLength);return n.set(new Uint8Array(t),0),n.set(new Uint8Array(e),t.byteLength),n}t.exports={bindAll:function(t,e){e.forEach(function(e){t[e]=t[e].bind(t)})},concatBuffersToUint8Array:n}},function(t,e,n){function i(t,e,n){u.prototype.constructor.call(this,t,e,n||"HTML5SingleAudioPlayer")}var r,o=n(1),s=n(16),a=n(39),u=n(46),h=n(38),c={};t.exports=i,o(i.prototype,u.prototype),i._onLoaded=function(t){i._pauseOthersAndForwardEvent("_onLoaded",t)},i._onLoadedMetadata=function(t){i._pauseOthersAndForwardEvent("_onLoadedMetadata",t)},i._onHtml5MediaEvent=function(t){i._pauseOthersAndForwardEvent("_onHtml5MediaEvent",t)},i._pauseOthersAndForwardEvent=function(t,e){Object.keys(c).forEach(function(n){var i=c[n];n===r?i[t](e):i.pause()})},i.prototype._initMediaElement=function(){i._html5Audio||(i._html5Audio=s.createAudioElement(),i._html5Audio.id=this.getSettings().audioObjectID+"_Single",u.prototype._toggleEventListeners.call(i,!0)),this._toggleEventListeners(!0),this._html5Audio=i._html5Audio,this._logger.log("initialized player for use with: "+this.getDescriptor().src)},i.prototype._toggleEventListeners=function(t){t?c[this.getId()]=this:delete c[this.getId()]},i.prototype.play=function(t){this._logger.log("singleton play at: "+t),(0===this._html5Audio.readyState||this.getDescriptor().src!==this._html5Audio.src)&&(this._logger.log("setting up audio element for use with: "+this.getDescriptor().src),r=this.getId(),this._isInOneOfStates(h.PAUSED)&&(this._logger.log("state was paused"),t=this._currentPosition||0),this._toggleEventListeners(!0),this._html5Audio.preload="auto",this._html5Audio.type=this.getDescriptor().mimeType,this._html5Audio.src=this.getDescriptor().src,this._html5Audio.load()),u.prototype.play.call(this,t)},i.prototype.resume=function(){return this._isInOneOfStates(h.ERROR,h.DEAD)?void 0:r!==this.getId()?void this.play(this._currentPosition):void u.prototype.resume.apply(this,arguments)},i.prototype.pause=function(){this._isInOneOfStates(h.ERROR,h.DEAD)||(this._logger.log("singleton pause"),r===this.getId()?u.prototype.pause.apply(this,arguments):(this._toggleEventListeners(!1),this._isInOneOfStates(h.PAUSED)||this.updateState(h.PAUSED),this._resetPositionInterval(!1)))},i.prototype.seek=function(t){return r!==this.getId()?(this._currentPosition=t,void this.trigger(a.POSITION_CHANGE,this._currentPosition,this._loadedPosition,this._duration,this)):void u.prototype.seek.apply(this,arguments)}},function(t,e,n){function i(t,e){o.call(this,t,e,s,"HLSSingleAudioPlayer")}var r=n(1),o=n(45),s=n(48);t.exports=i,r(i.prototype,s.prototype,o.prototype)},function(t,e,n){function i(t,e){return u.prototype.constructor.call(this,"HLSMSEPlayer",t,e,w()),o(this,["_onPositionChange","_onPlaylistLoaded","_onPlaylistFailed","_onSegmentLoaded","_onSegmentProgress","_onSegmentFailed","_onHtml5MediaEvent","_onLoadedData","_onLoadedMetadata","_onMediaSourceAppend","_onMediaSourceReady","_onMediaSourceDestroy","_onMediaSourceError"]),this._streamUrlProvider=this.getSettings().streamUrlProvider||null,this._minPreBufferLengthForPlayback=5e3,this._maxBufferLength=3e4,this._streamUrlRetryTimer=null,this._streamUrlTimesFailed=0,this._playlistRetryTimer=null,this._playlistTimesFailed=0,this._playlistRefreshInProgress=!1,this._isPlaylistLoaded=!1,this._loadOnInit=!1,this._schedulingSegmentIndex=-1,this._segmentsDownloading=[],this._nextSchedulingTimeout=null,this._mimeType=T(),this._mimeType?(this._mseToolkit=new l(this._logger,this._mimeType),this._mseToolkit.on(l.Events.SEGMENT_APPENDED,this._onMediaSourceAppend),this._mseToolkit.on(l.Events.SOURCE_READY,this._onMediaSourceReady),this._mseToolkit.on(l.Events.SOURCE_DESTROY,this._onMediaSourceDestroy),this._mseToolkit.on(l.Events.SOURCE_ERROR,this._onMediaSourceError),this._hlsToolkit=new c(this._logger,this.getDescriptor().src),this._hlsToolkit.on(c.Events.SEGMENT_LOADED,this._onSegmentLoaded),this._hlsToolkit.on(c.Events.SEGMENT_PROGRESS,this._onSegmentProgress),this._hlsToolkit.on(c.Events.SEGMENT_FAILED,this._onSegmentFailed),this._hlsToolkit.on(c.Events.PLAYLIST_LOADED,this._onPlaylistLoaded),this._hlsToolkit.on(c.Events.PLAYLIST_FAILED,this._onPlaylistFailed),this._hlsToolkit.on(c.Events.PLAYLIST_PARSE_ERROR,this._onPlaylistFailed),this._html5Audio=this._mseToolkit.media(),void this._toggleEventListeners(!0)):void this._error(a.MSE_NOT_SUPPORTED)}var r=n(1),o=n(47).bindAll,s=n(39),a=n(43),u=n(35),h=n(46),c=n(51),l=n(66),f=n(67),d=n(38),p=n(42),g=n(128),_=n(129),m=n(16),y=200,v=500,E=3,S=1e4,A=function(t){var e=t/E,n=v*(Math.pow(Math.E,e)/Math.E);return n+=Math.random()*y,n>S&&(n=S),n},w=function(){var t={};return t[p.names.PROTOCOLS]=[g.HLS],t[p.names.MIMETYPES]=[_.HLS,_.M3U8,_.MP3],t[p.names.NEEDS_URL_REFRESH]=!1,t},T=function(){return m.isMSESupportMPEG()&&!m.isNativeHlsSupported()?"audio/mpeg":m.isMSESupportMP4()?"audio/mp4":null};t.exports=i,r(i.prototype,u.prototype),i.prototype._onLoadedData=function(){this._logger.log("loadeddata event handler"),this.trigger(s.DATA)},i.prototype._onLoadedMetadata=function(){this._logger.log("loadedmetadata event handler")},i.prototype._mediasHasProgressed=function(){var t=!1,e=Date.now();if(this._lastMediaClockCheck){var n=e-this._lastMediaClockCheck,i=this._currentPosition-this._lastMediaClockValue;if(.1*n>i){if(0===i&&50>n)return!0;t=!0}}return this._lastMediaClockValue=this._currentPosition,this._lastMediaClockCheck=e,!t},i.prototype._onPositionChange=function(){return this._html5Audio&&this.getState()!==d.SEEKING?(this._currentPosition=1e3*this._html5Audio.currentTime,this.getState()!==d.PLAYING||this._mediasHasProgressed()?(this.getState()!==d.PLAYING&&this._mediasHasProgressed()&&this.updateState(d.PLAYING),this._triggerPositionEvent(),this._currentPosition>=this._duration?void this.updateState(d.ENDED):void 0):(this._logger.log("media clock check failed, playhead is not advancing anymore"),void this.updateState(d.LOADING))):void 0},i.prototype._onMediaSourceReady=function(){this.getDescriptor().duration&&(this._setDuration(this.getDescriptor().duration),this._logger.log("duration set from descriptor to "+this._duration)),this.updateState(d.IDLE),this._loadOnInit&&this._loadInitialPlaylist()},i.prototype._onMediaSourceDestroy=function(){this.kill()},i.prototype._onMediaSourceError=function(t){this._logger.log("MediaSource API error: "+t.message),this._error(a.MSE_BAD_OBJECT_STATE),this.kill()},i.prototype._onMediaSourceAppend=function(t){this._logger.log("segment appended: "+t.index),this.trigger(s.DATA,t),this._loadedPosition=t.endPosition,this._playRequested&&(this._logger.log("triggering playback after appending enough segments"),this._html5Audio.play(this._currentPosition))},i.prototype._onSegmentProgress=function(t){var e=Math.round(t.loaded/t.total*100);this._logger.log("segment "+t.index+" loaded "+t.loaded+" of "+t.total+" bytes ("+e+"%)"),this._loadedPosition=t.endPosition-t.duration*(t.loaded/t.total)},i.prototype._onSegmentLoaded=function(t){return this._mseToolkit.sourceIsReady()?void this._appendSegments():void this._logger.log("we have been disposed while loading a segment, noop")},i.prototype._onSegmentFailed=function(t){switch(this._logger.log("segment loading failed handler: "+t.status),t.status){case c.Status.NOT_FOUND:case c.Status.FORBIDDEN:this._cancelNextScheduling(),this._cancelAllInFlightRequests(),this._refreshPlaylist();break;case c.Status.TIMEOUT:this.trigger(s.NETWORK_TIMEOUT);case c.Status.SERVER_ERROR:if(t.aborted){this._logger.log("aborted segment has been prevented from being retried");break}t.scheduleRetry(A(t.timesFailed),this._hlsToolkit.loadSegment,this._hlsToolkit);break;case c.Status.FAILED:this._logger.log("WARNING: segment loading failed for unknown reason!");break;default:throw new Error("Invalid status on failed segment: "+t.status)}},i.prototype._onPlaylistLoaded=function(){return this._logger.log("playlist loaded handler"),this._mseToolkit.sourceIsReady()?(this._playlistRefreshInProgress&&(this._cancelNextScheduling(),this._runScheduling()),this._playlistRefreshInProgress=!1,this._playlistTimesFailed=0,this._isPlaylistLoaded=!0,this._inspectEncryptionData(),this._setDuration(this._hlsToolkit.getDuration()),this._logger.log("duration set from playlist info to "+this._duration),void this.trigger(s.METADATA)):void this._logger.log("we have been disposed while loading the playlist, noop")},i.prototype._onPlaylistFailed=function(t){return this._logger.log("playlist loading failed handler. HTTP status code is "+t),this._mseToolkit.sourceIsReady()?(this._logger.log("Playlist loading failed  "+this._playlistTimesFailed+" times before"),this._playlistTimesFailed++,this._playlistRetryTimer=window.setTimeout(function(){this.hasStreamUrlProvider()?this._refreshPlaylist():this._hlsToolkit.updatePlaylist()}.bind(this),A(this._playlistTimesFailed)),void(0===t&&this.trigger(s.NETWORK_TIMEOUT))):void this._logger.log("we have been disposed while loading the playlist, noop")},i.prototype.afterStateChange=function(t,e){switch(e){case d.PLAYING:this._runScheduling();break;case d.PAUSED:this._cancelNextScheduling()}},i.prototype._onHtml5MediaEvent=function(t){switch(this._logger.log('HTML5 media event "'+t.type+'"'),this._waitingToPause=!1,t.type){case"playing":this._playRequested=!1,this._triggerPositionEvent(),this._resetPositionTimer(!0),this.updateState(d.PLAYING);break;case"pause":this._triggerPositionEvent(),this._resetPositionTimer(!1),this.updateState(d.PAUSED);break;case"ended":this._currentPosition=this._loadedPosition=this._duration,this._triggerPositionEvent(),this._resetPositionTimer(!1),this.updateState(d.ENDED);break;case"waiting":if(this.getState()===d.SEEKING)break;this.updateState(d.LOADING);break;case"seeking":this._triggerPositionEvent(),this.updateState(d.SEEKING);break;case"seeked":this._html5Audio.paused?this.updateState(d.PAUSED):this.updateState(d.PLAYING),this._onPositionChange();break;case"error":this._error(this._html5AudioErrorCodeToErrorId(),!0)}},i.prototype._toggleEventListeners=function(t){if(this._html5Audio){var e=t?"addEventListener":"removeEventListener";h.MediaAPIEvents.forEach(function(t){switch(t){case"loadeddata":this._html5Audio[e]("loadeddata",this._onLoadedData);break;case"loadedmetadata":this._html5Audio[e]("loadedmetadata",this._onLoadedMetadata);break;case"timeupdate":default:this._html5Audio[e](t,this._onHtml5MediaEvent)}},this)}},i.prototype._loadInitialPlaylist=function(){this.updateState(d.LOADING),this._hlsToolkit.updatePlaylist()},i.prototype._refreshPlaylist=function(){this.hasStreamUrlProvider()&&(this._playlistRefreshfInProgress||(this._playlistRefreshInProgress=!0,this._streamUrlProvider().done(function(t){this._logger.log("got new M3u8 URL: "+t),this._streamUrlTimesFailed=0,this._hlsToolkit.setUri(t),this._hlsToolkit.updatePlaylist()}.bind(this)).fail(function(){this._logger.log("failed to retrieve stream URL :("),this._streamUrlRetryTimer=window.setTimeout(function(){this._playlistRefreshInProgress=!1,this._refreshPlaylist()}.bind(this),A(++this._streamUrlTimesFailed))}.bind(this))))},i.prototype._setDuration=function(t){this._duration=t;try{this._mseToolkit.duration(this._duration)}catch(e){this._onMediaSourceError(e)}},i.prototype._resetPositionTimer=function(t){window.clearInterval(this._positionUpdateTimer),t&&(this._positionUpdateTimer=window.setInterval(this._onPositionChange,this.getSettings().updateInterval))},i.prototype._triggerPositionEvent=function(){this.trigger(s.POSITION_CHANGE,this._currentPosition,this._loadedPosition,this._duration,this)},i.prototype._initTransmuxerOnce=function(t,e){if(!this._transmuxer){var n=this._mimeType!==t.mimeType?f.Configs.MP3_TO_FMP4:f.Configs.VOID;this._transmuxer=new f(n),this._transmuxer.on("segment",function(t){this._logger.log("transmuxed data ready, "+t.data.length+" bytes for segment "+t.index),e(t)}.bind(this))}},i.prototype._transmuxSegment=function(t,e){this._logger.log("transmuxing segment "+t.index),this._initTransmuxerOnce(t,e),this._transmuxer.process(t)},i.prototype._appendSegments=function(){var t=!0;this._segmentsDownloading.slice().forEach(function(e){e.isComplete()&&t?(this._decryptSegment(e),this._transmuxSegment(e,function(t){this._mseToolkit.append(t)}.bind(this)),this._segmentsDownloading.shift()):t=!1},this)},i.prototype._cancelNextScheduling=function(){this._logger.log("cancelling next scheduling"),window.clearTimeout(this._nextSchedulingTimeout),this._nextSchedulingTimeout=null},i.prototype._getBufferUntilTime=function(){return this._currentPosition+this._maxBufferLength},i.prototype._getCurrentSegment=function(){return this._schedulingSegmentIndex>0?this._hlsToolkit.getSegment(this._schedulingSegmentIndex):this._hlsToolkit.getSegmentForTime(this._currentPosition)},i.prototype._runScheduling=function(){function t(){var e=!1,n=this._getBufferUntilTime(),i=this._getCurrentSegment(),r=i?i.duration:Math.Infinity;if(this._logger.log("scheduling next requests, current buffer-until time: "+n+" ms"),!i)return void this._logger.log("no segment to schedule, closing loop");for(this._logger.log("current segment index: "+i.index);i.endPosition<=n;){if(this._logger.log("scheduling loop at "+this._currentPosition+" ms, current segment "+i.index),this._requestSegment(i),i.isLast){e=!0,this._logger.log("end of playlist reached");break}this._schedulingSegmentIndex=i.index+1,i=this._hlsToolkit.getSegment(this._schedulingSegmentIndex)}this._isInOneOfStates(d.DEAD,d.PAUSED)||e?(this._logger.log("not re-scheduling"),this._nextSchedulingTimeout=null):(this._logger.log("timing next check for more data in "+r+" ms"),this._nextSchedulingTimeout=window.setTimeout(t.bind(this),r))}this._nextSchedulingTimeout||t.call(this)},i.prototype._cancelAllInFlightRequests=function(){this._schedulingSegmentIndex=-1,this._segmentsDownloading.forEach(function(t){t.isComplete()||t.cancel()}),this._segmentsDownloading=[]},i.prototype._requestSegment=function(t){return this._segmentsDownloading.push(t),t.isComplete()?(this._logger.log("requested data is already loaded from segment "+t.index),void this._onSegmentLoaded(t)):t.hasBeenRequested()||t.hasFailed()?void this._logger.log("segment already in flight or failed (will retry): "+t.timesFailed+" times"):void this._hlsToolkit.loadSegment(t)},i.prototype._decryptSegment=function(t){this._hlsToolkit.isAES128Encrypted()&&this._hlsToolkit.decryptSegmentAES128(t)},i.prototype._inspectEncryptionData=function(){this._hlsToolkit.isAES128Encrypted()&&(this._logger.log("got key of byte length "+this._hlsToolkit.getEncryptionKey().byteLength),this._hlsToolkit.getEncryptionIv()?this._logger.log("got IV of byte length "+this._hlsToolkit.getEncryptionIv().byteLength):this._logger.log("no IV found in header, will use per-segment-index IV"))},i.prototype._html5AudioErrorCodeToErrorId=function(){return{1:a.HTML5_AUDIO_ABORTED,2:a.HTML5_AUDIO_NETWORK,3:a.HTML5_AUDIO_DECODE,4:a.HTML5_AUDIO_SRC_NOT_SUPPORTED}[this._html5Audio.error.code]},i.prototype._error=function(t,e){this._errorID=t,this._errorMessage=this._getErrorMessage(this._errorID),e&&this._html5Audio.error&&(this._errorMessage+=" (native message: "+this._html5Audio.error.message+")"),this._logger.log(this._errorID+" "+this._errorMessage),this.updateState(d.ERROR),this._toggleEventListeners(!1)},i.prototype._getErrorMessage=function(t){var e={};return e[a.MSE_NOT_SUPPORTED]="The browser does not support MediaSource API",e[a.MSE_BAD_OBJECT_STATE]="MediaSource API has thrown an exception",e[t]?"Error: "+t+" ("+e[t]+")":"Error: "+t},i.prototype.setVolume=function(t){this._html5Audio&&(this._html5Audio.volume=t)},i.prototype.getVolume=function(){return this._html5Audio?this._html5Audio.volume:1},i.prototype.setMute=function(t){this._html5Audio&&(this._html5Audio.muted=t)},i.prototype.getMute=function(){return this._html5Audio?this._html5Audio.muted:!1},i.prototype.getErrorID=function(){return this._errorID},i.prototype.play=function(t){return this._isInOneOfStates(d.ERROR,d.DEAD)?void this._logger.log("play called but state is ERROR or DEAD"):this._isInOneOfStates(d.IDLE,d.INITIALIZE)?(t=t||0,this._logger.log("play from "+t),this._playRequested=!0,this.seek(t),this.getState()===d.INITIALIZE?void(this._loadOnInit=!0):void this._loadInitialPlaylist()):void this.resume()},i.prototype.pause=function(){this._html5Audio&&(this._playRequested=!1,this._html5Audio.pause())},i.prototype.seek=function(t){if(!this._isInOneOfStates(d.ERROR,d.DEAD)){if(!this._isPlaylistLoaded)return void this.once(s.METADATA,function(){this.seek(t)}.bind(this));if(t>this._duration)return void this._logger.log("can not seek to position over duration");this._logger.log("seek to "+t+" ms"),this.updateState(d.SEEKING),this._lastMediaClockCheck=null,this._currentPosition=t;try{this._html5Audio.currentTime=t/1e3}catch(e){this._logger.log("error seeking: "+e.message)}this._cancelAllInFlightRequests(),this._cancelNextScheduling(),this._runScheduling()}},i.prototype.resume=function(){this._html5Audio&&(this._logger.log("resume from "+this._currentPosition),this._html5Audio.play(1e3*this._currentPosition))},i.prototype.kill=function(){this.getState()!==d.DEAD&&(this._logger.log("kill"),this._resetPositionTimer(!1),this._cancelNextScheduling(),this._cancelAllInFlightRequests(),window.clearTimeout(this._playlistRetryTimer),window.clearTimeout(this._streamUrlRetryTimer),this._playRequested=!1,this._toggleEventListeners(!1),this._html5Audio.pause(),this.updateState(d.DEAD))},i.prototype.getErrorMessage=function(){return this._errorMessage},i.prototype.hasStreamUrlProvider=function(){return!!this._streamUrlProvider}},function(t,e,n){var i,r=n(1),o=n(52),s=n(58),a=null,u=n(36),h={NEW:"new",REQUESTED:"requested",COMPLETE:"complete",TIMEOUT:"timeout",FORBIDDEN:"forbidden",NOT_FOUND:"not-found",SERVER_ERROR:"server-error",FAILED:"failed"},c={FIRST:"#EXTM3U",PLAYLIST:"#EXT-X-STREAM-INF:",SEGMENT:"#EXTINF:",END_TAG:"#EXT-X-ENDLIST",ENCRYPTION:"#EXT-X-KEY:"};t.exports=i=function(t,e){this._logger=t,this._duration=0,this.setUri(e)},i.Events={PLAYLIST_LOADED:"playlist-loaded",PLAYLIST_PARSE_ERROR:"playlist-parse-error",PLAYLIST_FAILED:"playlist-failed",SEGMENT_LOADED:"segment-loaded",SEGMENT_PROGRESS:"segment-progress",SEGMENT_FAILED:"segment-failed",SEGMENT_CANCELED:"segment-canceled"},i.Status=h,r(i.prototype,u),i.Segment=function(t,e,n,i,o){r(this,{toolkit:t,uri:e,startPosition:n,endPosition:n+i,duration:i,index:o,data:null,status:h.NEW,isLast:!1,timesFailed:0,loaded:0,total:-1,aborted:!1,xhr:null,mimeType:"audio/mpeg"}),this._logger=t._logger},i.Segment.prototype.containsTime=function(t){return t>=this.startPosition&&t<=this.endPosition},i.Segment.prototype.isComplete=function(){return this.status===h.COMPLETE},i.Segment.prototype.hasFailed=function(){return this.status===h.TIMEOUT||this.status===h.FORBIDDEN||this.status===h.NOT_FOUND||this.status===h.SERVER_ERROR||this.status===h.FAILED},i.Segment.prototype.isNew=function(){return this.status===h.NEW},i.Segment.prototype.hasBeenRequested=function(){return this.status===h.REQUESTED},i.Segment.prototype.scheduleRetry=function(t,e,n){var i=this;this._retryTimer=window.setTimeout(function(){e.call(n,i)},t)},i.Segment.prototype.cancel=function(){this._logger.log("segment cancelled, clearing timeout: "+this.index),window.clearTimeout(this._retryTimer),this.xhr&&(this._logger.log("will abort & reset segment: "+this.index),this.status=h.NEW,this.aborted=!0,this.data=null,this.timesFailed=0,this.xhr.abort(),this.xhr=null,this.toolkit.trigger(i.Events.SEGMENT_CANCELED,this));
},i.prototype.setUri=function(t){var e=this._uri=t;e.indexOf("?")>-1&&(e=e.substr(0,e.indexOf("?"))),this._baseURI=e.substr(0,e.lastIndexOf("/")+1)},i.prototype.updatePlaylist=function(){var t=!1,e=new XMLHttpRequest;e.open("GET",this._uri,!0),e.responseType="text",this._logger.log("downloading playlist");var n=function(n){t||(t=!0,this.trigger(i.Events.PLAYLIST_FAILED,e.status))}.bind(this);e.onload=function(t){return 200!==e.status?void n():(this._segments=[],this._duration=0,this._parsePlaylist(e.responseText)?(this.getLastSegment().isLast=!0,this._logger.log("playlist download complete"),void this._retrieveEncryptionKey(function(){this.trigger(i.Events.PLAYLIST_LOADED)})):(this._logger.log("error parsing playlist"),void this.trigger(i.Events.PLAYLIST_PARSE_ERROR)))}.bind(this),e.onerror=function(t){n(t)}.bind(this),e.send()},i.prototype._parsePlaylist=function(t){for(var e,n,r,o=t.split("\n"),s=!1,a=0,u=0;a<o.length;)e=o[a++],0===e.indexOf(c.SEGMENT)?(r=1e3*Number(e.substr(8,e.indexOf(",")-8)),n=this._createSegmentURL(o[a]),this._addSegment(new i.Segment(this,n,this._duration,r,u++)),a++):0===e.indexOf(c.ENCRYPTION)?this._parsePlaylistEncryptionHeader(e):0===e.indexOf(c.END_TAG)&&(s=!0);return!(0===this.getNumSegments()||!s)},i.prototype._addSegment=function(t){this._segments.push(t),this._duration+=t.duration},i.prototype._parsePlaylistEncryptionHeader=function(t){var e,n,i,r=t.substr(c.ENCRYPTION.length).split(",");if(s(r,function(t){t.indexOf("METHOD")>=0?n=t.split("=")[1]:t.indexOf("URI")>=0?e=t.split("=")[1]:t.indexOf("IV")>=0&&(i=t.split("=")[1])}),!(n&&e&&n.length&&e.length))throw new Error("Failed to parse M3U8 encryption header");n=n.trim(),e=e.trim().replace(/"/g,""),this._encryptionMethod=n,this._encryptionKeyUri=e,i&&i.length?(this._encryptionIvHexString=i.trim(),this._parseEncryptionIvHexString()):this._encryptionIv=null},i.prototype._parseEncryptionIvHexString=function(){var t,e=this._encryptionIvHexString.replace("0x",""),n=new Uint16Array(8),i=0;if(e.length%4!==0)throw new Error("Failed to parse M3U8 encryption IV (length is not multiple of 4)");for(;i<e.length;i+=4){if(t=parseInt(e.substr(i,4),16),isNaN(t))throw new Error("Failed to parse hex number in IV string");n[i/4]=t}this._encryptionIv=n},i.prototype._encryptionIvForSegment=function(t){var e=new DataView(new ArrayBuffer(16));return e.setUint32(0,t.index,!0),e.buffer},i.prototype._retrieveEncryptionKey=function(t){if(t){if(!this._encryptionKeyUri)return void t.call(this);var e=this._encryptionKeyUri,n=new XMLHttpRequest;n.open("GET",e,!0),n.responseType="arraybuffer",n.onload=o(function(i){200===n.status?this._encryptionKey=new Uint8Array(n.response):this._logger.log("Failed to retrieve encryption key from "+e+", returned status "+n.status),t.call(this)},this),n.send(),this._logger.log("Downloading encryption key from "+e)}},i.prototype._removeEncryptionPaddingBytes=function(t){var e=t.data[t.data.byteLength-1];e?(this._logger.log("Detected PKCS7 padding length of "+e+" bytes, slicing segment."),t.data=t.data.subarray(0,t.data.byteLength-e)):this._logger.log("No padding detected (last byte is zero)")},i.prototype.decryptSegmentAES128=function(t){if(this._logger.log("Decrypting AES-128 cyphered segment ..."),!a)throw new Error("AES decryption not built-in");var e=a.cipher.createDecipher("AES-CBC",a.util.createBuffer(this._encryptionKey)),n=0,i=t.data.byteLength,r=this._encryptionIv||this._encryptionIvForSegment(t);for(this._logger.log("Using IV ->"),e.start({iv:a.util.createBuffer(r)}),e.update(a.util.createBuffer(t.data)),e.finish(),t.data=new Uint8Array(i);i>n;n++)t.data[n]=e.output.getByte();this._removeEncryptionPaddingBytes(t)},i.prototype.isAES128Encrypted=function(){return"AES-128"===this._encryptionMethod},i.prototype.getEncryptionKeyUri=function(){return this._encryptionKeyUri},i.prototype.getEncryptionIv=function(){return this._encryptionIv},i.prototype.getEncryptionKey=function(){return this._encryptionKey},i.prototype._createSegmentURL=function(t){return"http://"===t.substr(0,7)||"https://"===t.substr(0,8)||"/"===t.substr(0,1)?t:this._baseURI+t},i.prototype._handleLoadSegmentFailure=function(t,e,n){t.aborted||(this._logger.log("segment aborted: "+t.aborted),this._logger.log("segment loading failure: HTTP response status: "+e.status),0===e.status?t.status=h.TIMEOUT:403===e.status?t.status=h.FORBIDDEN:404===e.status?t.status=h.NOT_FOUND:e.status>=500?t.status=h.SERVER_ERROR:t.status=h.FAILED,t.timesFailed++,this.trigger(i.Events.SEGMENT_FAILED,t))},i.prototype.loadSegment=function(t){var e=!1,n=new XMLHttpRequest,r=t.uri,o=function(i){e||(e=!0,this._handleLoadSegmentFailure(t,n,i))}.bind(this);(t.hasBeenRequested()||t.isComplete())&&this._logger.log("segment cant be loaded, requested: ",!!t.hasBeenRequested()," complete: ",t.isComplete()),n.open("GET",r,!0),n.responseType="arraybuffer",n.onload=function(){if(!t.aborted){if(200!==n.status)return void o();this._logger.log("download of segment "+t.index+" complete"),t.status=h.COMPLETE,t.data=new Uint8Array(n.response),t.downloadTime=Date.now()-t.downloadStartTime,this.trigger(i.Events.SEGMENT_LOADED,t)}}.bind(this),n.onprogress=function(e){t.aborted||e.loaded&&e.total&&(t.loaded=e.loaded,t.total=e.total,this.trigger(i.Events.SEGMENT_PROGRESS,t))}.bind(this),n.onerror=function(t){o(t)}.bind(this),this._logger.log("requesting segment "+t.index+" from "+r),t.xhr=n,t.aborted=!1,t.downloadStartTime=Date.now(),t.status=h.REQUESTED,n.send()},i.prototype.getSegment=function(t){return this._segments&&this._segments[t]?this._segments[t]:null},i.prototype.getSegmentIndexForTime=function(t){var e,n;if(t>this._duration||0>t||!this._segments||0===this._segments.length)return-1;for(e=Math.floor(this._segments.length*(t/this._duration)),n=this._segments[e];!(n.startPosition<=t&&n.startPosition+n.duration>t);)n.startPosition+n.duration>=t?e--:e++,n=this._segments[e];return e},i.prototype.getSegmentForTime=function(t){var e=this.getSegmentIndexForTime(t);return e>=0?this._segments[e]:null},i.prototype.getDuration=function(){return this._duration},i.prototype.getNumSegments=function(){return this._segments.length},i.prototype.getLastSegment=function(){return this._segments.length?this._segments[this._segments.length-1]:null}},function(t,e,n){var i=n(53),r=n(56),o=n(57),s=1,a=32,u=o(function(t,e,n){var o=s;if(n.length){var h=r(n,u.placeholder);o|=a}return i(t,o,e,n,h)});u.placeholder={},t.exports=u},function(t,e,n){(function(e){function i(t,e,n){for(var i=n.length,r=-1,o=P(t.length-i,0),s=-1,a=e.length,u=Array(a+o);++s<a;)u[s]=e[s];for(;++r<i;)u[n[r]]=t[r];for(;o--;)u[s++]=t[r++];return u}function r(t,e,n){for(var i=-1,r=n.length,o=-1,s=P(t.length-r,0),a=-1,u=e.length,h=Array(s+u);++o<s;)h[o]=t[o];for(var c=o;++a<u;)h[c+a]=e[a];for(;++i<r;)h[c+n[i]]=t[o++];return h}function o(t,n){function i(){var o=this&&this!==e&&this instanceof i?r:t;return o.apply(n,arguments)}var r=s(t);return i}function s(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var n=p(t.prototype),i=t.apply(n,e);return f(i)?i:n}}function a(t,n,o,u,h,c,f,p,T,b){function I(){for(var y=arguments.length,v=y,E=Array(y);v--;)E[v]=arguments[v];if(u&&(E=i(E,u,h)),c&&(E=r(E,c,f)),D||k){var w=I.placeholder,x=g(E,w);if(y-=x.length,b>y){var C=p?d(p):void 0,F=P(b-y,0),U=D?x:void 0,B=D?void 0:x,H=D?E:void 0,j=D?void 0:E;n|=D?S:A,n&=~(D?A:S),M||(n&=~(_|m));var G=a(t,n,o,H,U,j,B,C,T,F);return G.placeholder=w,G}}var Y=O?o:this,V=R?Y[t]:t;return p&&(E=l(E,p)),L&&T<E.length&&(E.length=T),this&&this!==e&&this instanceof I&&(V=N||s(t)),V.apply(Y,E)}var L=n&w,O=n&_,R=n&m,D=n&v,M=n&y,k=n&E,N=R?void 0:s(t);return I}function u(t,n,i,r){function o(){for(var n=-1,s=arguments.length,h=-1,c=r.length,l=Array(c+s);++h<c;)l[h]=r[h];for(;s--;)l[h++]=arguments[++n];var f=this&&this!==e&&this instanceof o?u:t;return f.apply(a?i:this,l)}var a=n&_,u=s(t);return o}function h(t,e,n,i,r,s,h,c){var l=e&m;if(!l&&"function"!=typeof t)throw new TypeError(T);var f=i?i.length:0;if(f||(e&=~(S|A),i=r=void 0),f-=r?r.length:0,e&A){var d=i,p=r;i=r=void 0}var g=[t,e,n,i,r,d,p,s,h,c];if(g[9]=null==c?l?0:t.length:P(c-f,0)||0,e==_)var y=o(g[0],g[2]);else y=e!=S&&e!=(_|S)||g[4].length?a.apply(void 0,g):u.apply(void 0,g);return y}function c(t,e){return t="number"==typeof t||b.test(t)?+t:-1,e=null==e?L:e,t>-1&&t%1==0&&e>t}function l(t,e){for(var n=t.length,i=I(e.length,n),r=d(t);i--;){var o=e[i];t[i]=c(o,n)?r[o]:void 0}return t}function f(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}var d=n(54),p=n(55),g=n(56),_=1,m=2,y=4,v=8,E=16,S=32,A=64,w=128,T="Expected a function",b=/^\d+$/,P=Math.max,I=Math.min,L=9007199254740991;t.exports=h}).call(e,function(){return this}())},function(t,e){function n(t,e){var n=-1,i=t.length;for(e||(e=Array(i));++n<i;)e[n]=t[n];return e}t.exports=n},function(t,e){function n(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}var i=function(){function t(){}return function(e){if(n(e)){t.prototype=e;var i=new t;t.prototype=void 0}return i||{}}}();t.exports=i},function(t,e){function n(t,e){for(var n=-1,r=t.length,o=-1,s=[];++n<r;)t[n]===e&&(t[n]=i,s[++o]=n);return s}var i="__lodash_placeholder__";t.exports=n},11,function(t,e,n){function i(t,e){return function(n,i,r){return"function"==typeof i&&void 0===r&&a(n)?t(n,i):e(n,s(i,r,3))}}var r=n(59),o=n(60),s=n(65),a=n(64),u=i(r,o);t.exports=u},function(t,e){function n(t,e){for(var n=-1,i=t.length;++n<i&&e(t[n],n,t)!==!1;);return t}t.exports=n},[134,61],[132,62,63,64],5,6,7,9,function(t,e,n){var i,r=n(36),o=n(16),s=n(47).bindAll,a=n(1);t.exports=i=function(t,e){s(this,["_onMSEInit","_onMSEDispose","_onSourceBufferUpdate"]),this.mimeType=e,this._logger=t,this._isBufferPrepared=!1,this._sourceBufferPtsOffset=0,this._segmentsAwaitingAppendance=[],this._isNotReady=!0,this._sourceBuffer=null,this._mediaSource=new MediaSource,this._mediaSource.addEventListener("sourceopen",this._onMSEInit,!1),this._mediaSource.addEventListener("sourceclose",this._onMSEDispose,!1),this._mediaElem=o.createAudioElement(),this._mediaElem.src=window.URL.createObjectURL(this._mediaSource)},i.Events={SOURCE_READY:"source-ready",SOURCE_DESTROYED:"source-destroy",SOURCE_ERROR:"source-error",SEGMENT_APPENDED:"segment-appended"},a(i.prototype,r),a(i.prototype,{_onMSEInit:function(){this._logger.log("source open handler"),this._isNotReady=!1,this._mediaSource.removeEventListener("sourceopen",this._onMSEInit,!1),this._sourceBuffer=this._mediaSource.addSourceBuffer(this.mimeType),this._sourceBuffer.addEventListener("update",this._onSourceBufferUpdate),this.trigger(i.Events.SOURCE_READY)},_onMSEDispose:function(){this._isNotReady=!0,this._logger.log("source dispose handler"),this._mediaSource.removeEventListener("sourceclose",this._onMSEDispose,!1)},_appendNextSegment:function(t){try{if(this._sourceBuffer.updating)return this._logger.log("source buffer is busy updating already, enqueuing data for later appending"),void this._segmentsAwaitingAppendance.unshift(t);t.isLast&&this._logger.log("about to append last segment"),this._currentSegmentAppending=t,this._sourceBuffer.timestampOffset=t.startPosition/1e3,this._sourceBuffer.appendBuffer(t.data),this._logger.log("appending segment "+t.index)}catch(e){this._logger.log("error while appending to SourceBuffer: "+e.message+")"),this.trigger(i.Events.SOURCE_ERROR,e)}},_tryAppendEos:function(){this._logger.log("attempting to finalize stream");try{"open"!==this._mediaSource.readyState||this._sourceBuffer.updating?this._logger.log("couldn't call endOfStream because SourceBuffer is still updating, we'll call it once its done"):(this._mediaSource.endOfStream(),this._logger.log("called endOfStream"))}catch(t){this._logger.log("SourceBuffer endOfStream() call failed with error: "+t.message),this.trigger(i.Events.SOURCE_ERROR,t)}},_onSourceBufferUpdate:function(){(this._currentSegmentAppending||this._sourceBuffer.updating)&&(this._logger.log("done updating SourceBuffer with segment "+this._currentSegmentAppending.index),this.trigger(i.Events.SEGMENT_APPENDED,this._currentSegmentAppending),this._currentSegmentAppending.isLast&&(this._logger.log("was last segment, setting on EOS on SourceBuffer"),this._tryAppendEos()),this._segmentsAwaitingAppendance.length&&!this._sourceBuffer.updating&&this._appendNextSegment(this._segmentsAwaitingAppendance.pop()))},append:function(t){if(!this.sourceIsReady())throw new Error("MediaSource is not ready yet");this._appendNextSegment(t)},media:function(){return this._mediaElem},sourceIsReady:function(){return!this._isNotReady},duration:function(t){return this._mediaSource.duration=t/1e3,1e3*this._mediaSource.duration}})},function(t,e,n){var i,r=n(47).concatBuffersToUint8Array,o=n(1),s=n(36),a=n(68);t.exports=i=function(t){this.config=t,this.reset(),this.segments=[],this.pushedInitData=!1},o(i.prototype,s),i.prototype.process=function(t){switch(this.segments.push(t),this.config){case i.Configs.VOID:this.trigger("segment",t);break;case i.Configs.MP3_TO_FMP4:this.src.enqueue(new a.Unit.Transfer(t.data,"binary")),this.src.enqueue(a.Unit.Transfer.Flush());break;default:throw new Error("Config "+this.config+" not supported")}},i.prototype.dequeue=function(){return this.segments.shift()},i.prototype.reset=function(){switch(this.config){case i.Configs.VOID:break;case i.Configs.MP3_TO_FMP4:this.gotInitData=!1,this.src=new a.Unit.BasePushSrc,this.parser=new a.Units.MP3Parser,this.muxer=new a.Units.MP4Mux(a.Units.MP4Mux.Profiles.MP3_AUDIO_ONLY),this.sink=new a.Unit.BaseSink,this.sink._onData=function(){var t,e=this.sink.dequeue().data;return this.gotInitData?(t=this.dequeue(),t.mimeType="audio/mp4",this.gotInitData&&!this.pushedInitData?(t.data=r(this.initData,e),this.pushedInitData=!0):t.data=e,this.trigger("segment",t),void this.reset()):(this.gotInitData=!0,void(this.initData=e))}.bind(this),a.Unit.link(this.src,this.parser,this.muxer,this.sink);break;default:throw new Error("Config "+this.config+" not supported")}},i.Configs={VOID:"VOID",MP3_TO_FMP4:"MP3_TO_FMP4"}},function(t,e,n){var i,r=n(69),o=n(115),s=n(118),a=n(121),u=n(124),h=n(125);t.exports=i={Unit:r,Units:{File:h,MP4Mux:o,MP3Parser:s,MSESink:a,XHR:u}}},function(t,e,n){(function(e){var i,r,o,s,a,u,h,c,l,f,d=n(74),p=n(76),g=n(85),_=n(96),m=n(97);t.exports=i=function(){_.call(this),this.inputs||(this.inputs=[]),this.outputs||(this.outputs=[])},i.create=function(t){return p(i.prototype,t)},i.createBaseSrc=function(t){return p(u.prototype,t)},i.createBasePushSrc=function(t){return p(h.prototype,t)},i.createBaseSink=function(t){return p(c.prototype,t)},i.createBaseTransform=function(t){return p(a.prototype,t)},i.createBaseParser=function(t){return p(l.prototype,t)},i.link=function(t,e){if(arguments.length>2)return i.linkArray(arguments);for(var n=0;n<Math.min(t.numberOfOuts(),e.numberOfIns());n++)t.out(n).pipe(e["in"](n));return e},i.linkArray=function(t){var e,n,r;for(r=0;r<t.length;r++)e=t[r],t.length>r+1&&(n=t[r+1],i.link(e,n));return n};var y=i.Event={CHAIN:"chain",NEED_DATA:"need-data",FINISH:"finish",PIPE:"pipe",UNPIPE:"unpipe",ERROR:"error",END:"end",OPEN:"open",CLOSE:"close"};i.prototype=p(_.prototype,{constructor:i,"in":function(t){return this.inputs[t]},out:function(t){return this.outputs[t]},numberOfIns:function(){return this.inputs.length},numberOfOuts:function(){return this.outputs.length},add:function(t){return t instanceof r?this.addInput(t):t instanceof o&&this.addOutput(t),this},remove:function(t){t instanceof r?this.removeInput(t):t instanceof o&&this.removeOutput(t)},addInput:function(t){this._installEventForwarder(t,y.FINISH),this._installEventForwarder(t,y.OPEN),this._installEventForwarder(t,y.PIPE),this._installEventForwarder(t,y.UNPIPE),this._installEventForwarder(t,y.ERROR),this._installEventForwarder(t,y.CHAIN),this.inputs.push(t)},addOutput:function(t){this._installEventForwarder(t,y.END),this._installEventForwarder(t,y.OPEN),this._installEventForwarder(t,y.CLOSE),this._installEventForwarder(t,y.ERROR),this._installEventForwarder(t,y.NEED_DATA),this.outputs.push(t)},removeInput:function(t){removePut(this.inputs,t)},removeOutput:function(t){removePut(this.outputs,t)},removePut:function(t,e){t.slice().forEach(function(n,i){n==e&&t.splice(i,1)})},_installEventForwarder:function(t,e){t.on(e,function(n){this.emit(e,t,n)}.bind(this))}}),i.Transfer=s=function(t,n,i){n||(n=t instanceof e?"buffer":t instanceof String?"utf8":"object"),this.resolved=!1,this.data=t,this.encoding=n,this.doneCallback=i},s.prototype=p(Object.prototype,{constructor:s,resolve:function(){this.doneCallback&&!this.resolved&&(this.doneCallback(),this.resolved=!0)},setFlushing:function(t){return this.data.flush=t,this},setEmpty:function(t){return this.data.empty=t,this}}),s.Flush=function(){return new s({},"binary").setFlushing(!0).setEmpty(!0)},s.EOS=function(){return new s(null,"binary")},i.Input=r=function(t,e){m.Writable.prototype.constructor.call(this,{objectMode:!0,decodeStrings:!1})},r.prototype=p(m.Writable.prototype,{constructor:r,_write:function(t,e,n){d("_write: "+e),this.emit(i.Event.CHAIN,new s(t,e,n))}}),i.Output=o=function(t){m.Readable.prototype.constructor.call(this,{objectMode:!0}),this._dataRequested=0,this._shouldPushMore=!0},o.eos=function(t){t.push(null,"null")},o.prototype=p(m.Readable.prototype,{constructor:o,_read:function(t){this._dataRequested++,this.emit(y.NEED_DATA,this)},push:function(t,e){return this._dataRequested--,this._shouldPushMore=m.Readable.prototype.push.call(this,t,e),this._shouldPushMore},isPulling:function(){return this._dataRequested>0},eos:function(){m.Readable.prototype.push.call(this,null,"null")}}),i.BaseTransform=a=function(){i.prototype.constructor.apply(this,arguments),this.add(new r).add(new o),this.on(y.CHAIN,this._onChain.bind(this)),this.on(y.FINISH,this._onFinish.bind(this))},a.prototype=p(i.prototype,{constructor:a,_onChain:function(t,e){this._transform(e),this.out(0).push(e.data,e.encoding),e.resolve()},_onFinish:function(t){o.eos(this.out(0))},_transform:function(t){}}),i.BaseSrc=u=function(){i.prototype.constructor.apply(this,arguments),this.add(new o),this.on(y.NEED_DATA,this.squeeze.bind(this))},u.prototype=p(i.prototype,{constructor:u,squeeze:function(){d("squeeze");var t=this._source();t&&(this.out(0).push(t.data,t.encoding),t.resolve())},_source:function(){}}),i.BasePushSrc=h=function(){u.prototype.constructor.apply(this,arguments),this._bufferOut=[]},h.prototype=p(u.prototype,{constructor:h,_source:function(){return this._bufferOut.length?this._bufferOut.shift():null},enqueue:function(t){this._bufferOut.push(t),this.out(0).isPulling&&this.out(0).isPulling()&&this.squeeze()}}),i.BaseSink=c=function(){i.prototype.constructor.apply(this,arguments),this.add(new r),this.on(y.CHAIN,this._onChain.bind(this)),this._bufferIn=[]},c.prototype=p(i.prototype,{constructor:c,_onChain:function(t,e){d("BaseSink._onChain: "+e.encoding),this._bufferIn.push(e),this._onData(),e.resolve()},_onData:function(){},dequeue:function(){return this._bufferIn.length?this._bufferIn.shift():null}}),i.BaseParser=l=function(){h.prototype.constructor.apply(this,arguments),c.prototype.constructor.apply(this,arguments),this.on("finish",this._onFinish.bind(this))},g(l.prototype,i.prototype,_.prototype,u.prototype,h.prototype,c.prototype,{constructor:l,_onData:function(){this._parse(this.dequeue())},_onFinish:function(){d("BaseParser._onFinish"),o.eos(this.out(0))},_parse:function(t){}}),i.InputSelector=f=function(t){for(a.prototype.constructor.apply(this,arguments),t=(t||1)-1;t-- >0;)this.add(new r);this.selectedInputIndex=0},g(f.prototype,a.prototype,{constructor:f,_onChain:function(t,e){var n=this["in"](this.selectedInputIndex);return t!==n?void e.resolve():(this._transform(e),this.out(0).push(e.data,e.encoding),void e.resolve())},_onFinish:function(t){var e=this["in"](this.selectedInputIndex);t===e&&o.eos(this.out(0))}})}).call(e,n(70).Buffer)},function(t,e,n){(function(t,i){function r(){function t(){}try{var e=new Uint8Array(1);return e.foo=function(){return 42},e.constructor=t,42===e.foo()&&e.constructor===t&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(n){return!1}}function o(){return t.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function t(e){return this instanceof t?(this.length=0,this.parent=void 0,"number"==typeof e?s(this,e):"string"==typeof e?a(this,e,arguments.length>1?arguments[1]:"utf8"):u(this,e)):arguments.length>1?new t(e,arguments[1]):new t(e)}function s(e,n){if(e=g(e,0>n?0:0|_(n)),!t.TYPED_ARRAY_SUPPORT)for(var i=0;n>i;i++)e[i]=0;return e}function a(t,e,n){("string"!=typeof n||""===n)&&(n="utf8");var i=0|y(e,n);return t=g(t,i),t.write(e,n),t}function u(e,n){if(t.isBuffer(n))return h(e,n);if($(n))return c(e,n);if(null==n)throw new TypeError("must start with number, buffer, array or string");if("undefined"!=typeof ArrayBuffer){if(n.buffer instanceof ArrayBuffer)return l(e,n);if(n instanceof ArrayBuffer)return f(e,n)}return n.length?d(e,n):p(e,n)}function h(t,e){var n=0|_(e.length);return t=g(t,n),e.copy(t,0,0,n),t}function c(t,e){var n=0|_(e.length);t=g(t,n);for(var i=0;n>i;i+=1)t[i]=255&e[i];return t}function l(t,e){var n=0|_(e.length);t=g(t,n);for(var i=0;n>i;i+=1)t[i]=255&e[i];return t}function f(e,n){return t.TYPED_ARRAY_SUPPORT?(n.byteLength,e=t._augment(new Uint8Array(n))):e=l(e,new Uint8Array(n)),e}function d(t,e){var n=0|_(e.length);t=g(t,n);for(var i=0;n>i;i+=1)t[i]=255&e[i];return t}function p(t,e){var n,i=0;"Buffer"===e.type&&$(e.data)&&(n=e.data,i=0|_(n.length)),t=g(t,i);for(var r=0;i>r;r+=1)t[r]=255&n[r];return t}function g(e,n){t.TYPED_ARRAY_SUPPORT?(e=t._augment(new Uint8Array(n)),e.__proto__=t.prototype):(e.length=n,e._isBuffer=!0);var i=0!==n&&n<=t.poolSize>>>1;return i&&(e.parent=Z),e}function _(t){if(t>=o())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o().toString(16)+" bytes");return 0|t}function m(e,n){if(!(this instanceof m))return new m(e,n);var i=new t(e,n);return delete i.parent,i}function y(t,e){"string"!=typeof t&&(t=""+t);var n=t.length;if(0===n)return 0;for(var i=!1;;)switch(e){case"ascii":case"binary":case"raw":case"raws":return n;case"utf8":case"utf-8":return Y(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return W(t).length;default:if(i)return Y(t).length;e=(""+e).toLowerCase(),i=!0}}function v(t,e,n){var i=!1;if(e=0|e,n=void 0===n||n===1/0?this.length:0|n,t||(t="utf8"),0>e&&(e=0),n>this.length&&(n=this.length),e>=n)return"";for(;;)switch(t){case"hex":return D(this,e,n);case"utf8":case"utf-8":return I(this,e,n);case"ascii":return O(this,e,n);case"binary":return R(this,e,n);case"base64":return P(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return M(this,e,n);default:if(i)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),i=!0}}function E(t,e,n,i){n=Number(n)||0;var r=t.length-n;i?(i=Number(i),i>r&&(i=r)):i=r;var o=e.length;if(o%2!==0)throw new Error("Invalid hex string");i>o/2&&(i=o/2);for(var s=0;i>s;s++){var a=parseInt(e.substr(2*s,2),16);if(isNaN(a))throw new Error("Invalid hex string");t[n+s]=a}return s}function S(t,e,n,i){return K(Y(e,t.length-n),t,n,i)}function A(t,e,n,i){return K(V(e),t,n,i)}function w(t,e,n,i){return A(t,e,n,i)}function T(t,e,n,i){return K(W(e),t,n,i)}function b(t,e,n,i){return K(z(e,t.length-n),t,n,i)}function P(t,e,n){return 0===e&&n===t.length?q.fromByteArray(t):q.fromByteArray(t.slice(e,n))}function I(t,e,n){n=Math.min(t.length,n);for(var i=[],r=e;n>r;){var o=t[r],s=null,a=o>239?4:o>223?3:o>191?2:1;if(n>=r+a){var u,h,c,l;switch(a){case 1:128>o&&(s=o);break;case 2:u=t[r+1],128===(192&u)&&(l=(31&o)<<6|63&u,l>127&&(s=l));break;case 3:u=t[r+1],h=t[r+2],128===(192&u)&&128===(192&h)&&(l=(15&o)<<12|(63&u)<<6|63&h,l>2047&&(55296>l||l>57343)&&(s=l));break;case 4:u=t[r+1],h=t[r+2],c=t[r+3],128===(192&u)&&128===(192&h)&&128===(192&c)&&(l=(15&o)<<18|(63&u)<<12|(63&h)<<6|63&c,l>65535&&1114112>l&&(s=l))}}null===s?(s=65533,a=1):s>65535&&(s-=65536,i.push(s>>>10&1023|55296),s=56320|1023&s),i.push(s),r+=a}return L(i)}function L(t){var e=t.length;if(Q>=e)return String.fromCharCode.apply(String,t);for(var n="",i=0;e>i;)n+=String.fromCharCode.apply(String,t.slice(i,i+=Q));return n}function O(t,e,n){var i="";n=Math.min(t.length,n);for(var r=e;n>r;r++)i+=String.fromCharCode(127&t[r]);return i}function R(t,e,n){var i="";n=Math.min(t.length,n);for(var r=e;n>r;r++)i+=String.fromCharCode(t[r]);return i}function D(t,e,n){var i=t.length;(!e||0>e)&&(e=0),(!n||0>n||n>i)&&(n=i);for(var r="",o=e;n>o;o++)r+=G(t[o]);return r}function M(t,e,n){for(var i=t.slice(e,n),r="",o=0;o<i.length;o+=2)r+=String.fromCharCode(i[o]+256*i[o+1]);return r}function k(t,e,n){if(t%1!==0||0>t)throw new RangeError("offset is not uint");if(t+e>n)throw new RangeError("Trying to access beyond buffer length")}function N(e,n,i,r,o,s){if(!t.isBuffer(e))throw new TypeError("buffer must be a Buffer instance");if(n>o||s>n)throw new RangeError("value is out of bounds");if(i+r>e.length)throw new RangeError("index out of range")}function x(t,e,n,i){0>e&&(e=65535+e+1);for(var r=0,o=Math.min(t.length-n,2);o>r;r++)t[n+r]=(e&255<<8*(i?r:1-r))>>>8*(i?r:1-r)}function C(t,e,n,i){0>e&&(e=4294967295+e+1);for(var r=0,o=Math.min(t.length-n,4);o>r;r++)t[n+r]=e>>>8*(i?r:3-r)&255}function F(t,e,n,i,r,o){if(e>r||o>e)throw new RangeError("value is out of bounds");if(n+i>t.length)throw new RangeError("index out of range");if(0>n)throw new RangeError("index out of range")}function U(t,e,n,i,r){return r||F(t,e,n,4,3.4028234663852886e38,-3.4028234663852886e38),X.write(t,e,n,i,23,4),n+4}function B(t,e,n,i,r){return r||F(t,e,n,8,1.7976931348623157e308,-1.7976931348623157e308),X.write(t,e,n,i,52,8),n+8}function H(t){if(t=j(t).replace(tt,""),t.length<2)return"";for(;t.length%4!==0;)t+="=";return t}function j(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function G(t){return 16>t?"0"+t.toString(16):t.toString(16)}function Y(t,e){e=e||1/0;for(var n,i=t.length,r=null,o=[],s=0;i>s;s++){if(n=t.charCodeAt(s),n>55295&&57344>n){if(!r){if(n>56319){(e-=3)>-1&&o.push(239,191,189);continue}if(s+1===i){(e-=3)>-1&&o.push(239,191,189);continue}r=n;continue}if(56320>n){(e-=3)>-1&&o.push(239,191,189),r=n;continue}n=(r-55296<<10|n-56320)+65536}else r&&(e-=3)>-1&&o.push(239,191,189);if(r=null,128>n){if((e-=1)<0)break;o.push(n)}else if(2048>n){if((e-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(65536>n){if((e-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(1114112>n))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function V(t){for(var e=[],n=0;n<t.length;n++)e.push(255&t.charCodeAt(n));return e}function z(t,e){for(var n,i,r,o=[],s=0;s<t.length&&!((e-=2)<0);s++)n=t.charCodeAt(s),i=n>>8,r=n%256,o.push(r),o.push(i);return o}function W(t){return q.toByteArray(H(t))}function K(t,e,n,i){for(var r=0;i>r&&!(r+n>=e.length||r>=t.length);r++)e[r+n]=t[r];return r}/*!
		 * The buffer module from node.js, for the browser.
		 *
		 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
		 * @license  MIT
		 */
var q=n(71),X=n(72),$=n(73);e.Buffer=t,e.SlowBuffer=m,e.INSPECT_MAX_BYTES=50,t.poolSize=8192;var Z={};t.TYPED_ARRAY_SUPPORT=void 0!==i.TYPED_ARRAY_SUPPORT?i.TYPED_ARRAY_SUPPORT:r(),t.TYPED_ARRAY_SUPPORT&&(t.prototype.__proto__=Uint8Array.prototype,t.__proto__=Uint8Array),t.isBuffer=function(t){return!(null==t||!t._isBuffer)},t.compare=function(e,n){if(!t.isBuffer(e)||!t.isBuffer(n))throw new TypeError("Arguments must be Buffers");if(e===n)return 0;for(var i=e.length,r=n.length,o=0,s=Math.min(i,r);s>o&&e[o]===n[o];)++o;return o!==s&&(i=e[o],r=n[o]),r>i?-1:i>r?1:0},t.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"raw":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},t.concat=function(e,n){if(!$(e))throw new TypeError("list argument must be an Array of Buffers.");if(0===e.length)return new t(0);var i;if(void 0===n)for(n=0,i=0;i<e.length;i++)n+=e[i].length;var r=new t(n),o=0;for(i=0;i<e.length;i++){var s=e[i];s.copy(r,o),o+=s.length}return r},t.byteLength=y,t.prototype.length=void 0,t.prototype.parent=void 0,t.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?I(this,0,t):v.apply(this,arguments)},t.prototype.equals=function(e){if(!t.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e?!0:0===t.compare(this,e)},t.prototype.inspect=function(){var t="",n=e.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(t+=" ... ")),"<Buffer "+t+">"},t.prototype.compare=function(e){if(!t.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e?0:t.compare(this,e)},t.prototype.indexOf=function(e,n){function i(t,e,n){for(var i=-1,r=0;n+r<t.length;r++)if(t[n+r]===e[-1===i?0:r-i]){if(-1===i&&(i=r),r-i+1===e.length)return n+i}else i=-1;return-1}if(n>2147483647?n=2147483647:-2147483648>n&&(n=-2147483648),n>>=0,0===this.length)return-1;if(n>=this.length)return-1;if(0>n&&(n=Math.max(this.length+n,0)),"string"==typeof e)return 0===e.length?-1:String.prototype.indexOf.call(this,e,n);if(t.isBuffer(e))return i(this,e,n);if("number"==typeof e)return t.TYPED_ARRAY_SUPPORT&&"function"===Uint8Array.prototype.indexOf?Uint8Array.prototype.indexOf.call(this,e,n):i(this,[e],n);throw new TypeError("val must be string, number or Buffer")},t.prototype.get=function(t){return console.log(".get() is deprecated. Access using array indexes instead."),this.readUInt8(t)},t.prototype.set=function(t,e){return console.log(".set() is deprecated. Access using array indexes instead."),this.writeUInt8(t,e)},t.prototype.write=function(t,e,n,i){if(void 0===e)i="utf8",n=this.length,e=0;else if(void 0===n&&"string"==typeof e)i=e,n=this.length,e=0;else if(isFinite(e))e=0|e,isFinite(n)?(n=0|n,void 0===i&&(i="utf8")):(i=n,n=void 0);else{var r=i;i=e,e=0|n,n=r}var o=this.length-e;if((void 0===n||n>o)&&(n=o),t.length>0&&(0>n||0>e)||e>this.length)throw new RangeError("attempt to write outside buffer bounds");i||(i="utf8");for(var s=!1;;)switch(i){case"hex":return E(this,t,e,n);case"utf8":case"utf-8":return S(this,t,e,n);case"ascii":return A(this,t,e,n);case"binary":return w(this,t,e,n);case"base64":return T(this,t,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return b(this,t,e,n);default:if(s)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),s=!0}},t.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var Q=4096;t.prototype.slice=function(e,n){var i=this.length;e=~~e,n=void 0===n?i:~~n,0>e?(e+=i,0>e&&(e=0)):e>i&&(e=i),0>n?(n+=i,0>n&&(n=0)):n>i&&(n=i),e>n&&(n=e);var r;if(t.TYPED_ARRAY_SUPPORT)r=t._augment(this.subarray(e,n));else{var o=n-e;r=new t(o,void 0);for(var s=0;o>s;s++)r[s]=this[s+e]}return r.length&&(r.parent=this.parent||this),r},t.prototype.readUIntLE=function(t,e,n){t=0|t,e=0|e,n||k(t,e,this.length);for(var i=this[t],r=1,o=0;++o<e&&(r*=256);)i+=this[t+o]*r;return i},t.prototype.readUIntBE=function(t,e,n){t=0|t,e=0|e,n||k(t,e,this.length);for(var i=this[t+--e],r=1;e>0&&(r*=256);)i+=this[t+--e]*r;return i},t.prototype.readUInt8=function(t,e){return e||k(t,1,this.length),this[t]},t.prototype.readUInt16LE=function(t,e){return e||k(t,2,this.length),this[t]|this[t+1]<<8},t.prototype.readUInt16BE=function(t,e){return e||k(t,2,this.length),this[t]<<8|this[t+1]},t.prototype.readUInt32LE=function(t,e){return e||k(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},t.prototype.readUInt32BE=function(t,e){return e||k(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},t.prototype.readIntLE=function(t,e,n){t=0|t,e=0|e,n||k(t,e,this.length);for(var i=this[t],r=1,o=0;++o<e&&(r*=256);)i+=this[t+o]*r;return r*=128,i>=r&&(i-=Math.pow(2,8*e)),i},t.prototype.readIntBE=function(t,e,n){t=0|t,e=0|e,n||k(t,e,this.length);for(var i=e,r=1,o=this[t+--i];i>0&&(r*=256);)o+=this[t+--i]*r;return r*=128,o>=r&&(o-=Math.pow(2,8*e)),o},t.prototype.readInt8=function(t,e){return e||k(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},t.prototype.readInt16LE=function(t,e){e||k(t,2,this.length);var n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},t.prototype.readInt16BE=function(t,e){e||k(t,2,this.length);var n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},t.prototype.readInt32LE=function(t,e){return e||k(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},t.prototype.readInt32BE=function(t,e){return e||k(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},t.prototype.readFloatLE=function(t,e){return e||k(t,4,this.length),X.read(this,t,!0,23,4)},t.prototype.readFloatBE=function(t,e){return e||k(t,4,this.length),X.read(this,t,!1,23,4)},t.prototype.readDoubleLE=function(t,e){return e||k(t,8,this.length),X.read(this,t,!0,52,8)},t.prototype.readDoubleBE=function(t,e){return e||k(t,8,this.length),X.read(this,t,!1,52,8)},t.prototype.writeUIntLE=function(t,e,n,i){t=+t,e=0|e,n=0|n,i||N(this,t,e,n,Math.pow(2,8*n),0);var r=1,o=0;for(this[e]=255&t;++o<n&&(r*=256);)this[e+o]=t/r&255;return e+n},t.prototype.writeUIntBE=function(t,e,n,i){t=+t,e=0|e,n=0|n,i||N(this,t,e,n,Math.pow(2,8*n),0);var r=n-1,o=1;for(this[e+r]=255&t;--r>=0&&(o*=256);)this[e+r]=t/o&255;return e+n},t.prototype.writeUInt8=function(e,n,i){return e=+e,n=0|n,i||N(this,e,n,1,255,0),t.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[n]=255&e,n+1},t.prototype.writeUInt16LE=function(e,n,i){return e=+e,n=0|n,i||N(this,e,n,2,65535,0),t.TYPED_ARRAY_SUPPORT?(this[n]=255&e,this[n+1]=e>>>8):x(this,e,n,!0),n+2},t.prototype.writeUInt16BE=function(e,n,i){return e=+e,n=0|n,i||N(this,e,n,2,65535,0),t.TYPED_ARRAY_SUPPORT?(this[n]=e>>>8,this[n+1]=255&e):x(this,e,n,!1),n+2},t.prototype.writeUInt32LE=function(e,n,i){return e=+e,n=0|n,i||N(this,e,n,4,4294967295,0),t.TYPED_ARRAY_SUPPORT?(this[n+3]=e>>>24,this[n+2]=e>>>16,this[n+1]=e>>>8,this[n]=255&e):C(this,e,n,!0),n+4},t.prototype.writeUInt32BE=function(e,n,i){return e=+e,n=0|n,i||N(this,e,n,4,4294967295,0),t.TYPED_ARRAY_SUPPORT?(this[n]=e>>>24,this[n+1]=e>>>16,this[n+2]=e>>>8,this[n+3]=255&e):C(this,e,n,!1),n+4},t.prototype.writeIntLE=function(t,e,n,i){if(t=+t,e=0|e,!i){var r=Math.pow(2,8*n-1);N(this,t,e,n,r-1,-r)}var o=0,s=1,a=0>t?1:0;for(this[e]=255&t;++o<n&&(s*=256);)this[e+o]=(t/s>>0)-a&255;return e+n},t.prototype.writeIntBE=function(t,e,n,i){if(t=+t,e=0|e,!i){var r=Math.pow(2,8*n-1);N(this,t,e,n,r-1,-r)}var o=n-1,s=1,a=0>t?1:0;for(this[e+o]=255&t;--o>=0&&(s*=256);)this[e+o]=(t/s>>0)-a&255;return e+n},t.prototype.writeInt8=function(e,n,i){return e=+e,n=0|n,i||N(this,e,n,1,127,-128),t.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),0>e&&(e=255+e+1),this[n]=255&e,n+1},t.prototype.writeInt16LE=function(e,n,i){return e=+e,n=0|n,i||N(this,e,n,2,32767,-32768),t.TYPED_ARRAY_SUPPORT?(this[n]=255&e,this[n+1]=e>>>8):x(this,e,n,!0),n+2},t.prototype.writeInt16BE=function(e,n,i){return e=+e,n=0|n,i||N(this,e,n,2,32767,-32768),t.TYPED_ARRAY_SUPPORT?(this[n]=e>>>8,this[n+1]=255&e):x(this,e,n,!1),n+2},t.prototype.writeInt32LE=function(e,n,i){return e=+e,n=0|n,i||N(this,e,n,4,2147483647,-2147483648),t.TYPED_ARRAY_SUPPORT?(this[n]=255&e,this[n+1]=e>>>8,this[n+2]=e>>>16,this[n+3]=e>>>24):C(this,e,n,!0),n+4},t.prototype.writeInt32BE=function(e,n,i){return e=+e,n=0|n,i||N(this,e,n,4,2147483647,-2147483648),0>e&&(e=4294967295+e+1),t.TYPED_ARRAY_SUPPORT?(this[n]=e>>>24,this[n+1]=e>>>16,this[n+2]=e>>>8,this[n+3]=255&e):C(this,e,n,!1),n+4},t.prototype.writeFloatLE=function(t,e,n){return U(this,t,e,!0,n)},t.prototype.writeFloatBE=function(t,e,n){return U(this,t,e,!1,n)},t.prototype.writeDoubleLE=function(t,e,n){return B(this,t,e,!0,n)},t.prototype.writeDoubleBE=function(t,e,n){return B(this,t,e,!1,n)},t.prototype.copy=function(e,n,i,r){if(i||(i=0),r||0===r||(r=this.length),n>=e.length&&(n=e.length),n||(n=0),r>0&&i>r&&(r=i),r===i)return 0;if(0===e.length||0===this.length)return 0;if(0>n)throw new RangeError("targetStart out of bounds");if(0>i||i>=this.length)throw new RangeError("sourceStart out of bounds");if(0>r)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-n<r-i&&(r=e.length-n+i);var o,s=r-i;if(this===e&&n>i&&r>n)for(o=s-1;o>=0;o--)e[o+n]=this[o+i];else if(1e3>s||!t.TYPED_ARRAY_SUPPORT)for(o=0;s>o;o++)e[o+n]=this[o+i];else e._set(this.subarray(i,i+s),n);return s},t.prototype.fill=function(t,e,n){if(t||(t=0),e||(e=0),n||(n=this.length),e>n)throw new RangeError("end < start");if(n!==e&&0!==this.length){if(0>e||e>=this.length)throw new RangeError("start out of bounds");if(0>n||n>this.length)throw new RangeError("end out of bounds");var i;if("number"==typeof t)for(i=e;n>i;i++)this[i]=t;else{var r=Y(t.toString()),o=r.length;for(i=e;n>i;i++)this[i]=r[i%o]}return this}},t.prototype.toArrayBuffer=function(){if("undefined"!=typeof Uint8Array){if(t.TYPED_ARRAY_SUPPORT)return new t(this).buffer;for(var e=new Uint8Array(this.length),n=0,i=e.length;i>n;n+=1)e[n]=this[n];return e.buffer}throw new TypeError("Buffer.toArrayBuffer not supported in this browser")};var J=t.prototype;t._augment=function(e){return e.constructor=t,e._isBuffer=!0,e._set=e.set,e.get=J.get,e.set=J.set,e.write=J.write,e.toString=J.toString,e.toLocaleString=J.toString,e.toJSON=J.toJSON,e.equals=J.equals,e.compare=J.compare,e.indexOf=J.indexOf,e.copy=J.copy,e.slice=J.slice,e.readUIntLE=J.readUIntLE,e.readUIntBE=J.readUIntBE,e.readUInt8=J.readUInt8,e.readUInt16LE=J.readUInt16LE,e.readUInt16BE=J.readUInt16BE,e.readUInt32LE=J.readUInt32LE,e.readUInt32BE=J.readUInt32BE,e.readIntLE=J.readIntLE,e.readIntBE=J.readIntBE,e.readInt8=J.readInt8,e.readInt16LE=J.readInt16LE,e.readInt16BE=J.readInt16BE,e.readInt32LE=J.readInt32LE,e.readInt32BE=J.readInt32BE,e.readFloatLE=J.readFloatLE,e.readFloatBE=J.readFloatBE,e.readDoubleLE=J.readDoubleLE,e.readDoubleBE=J.readDoubleBE,e.writeUInt8=J.writeUInt8,e.writeUIntLE=J.writeUIntLE,e.writeUIntBE=J.writeUIntBE,e.writeUInt16LE=J.writeUInt16LE,e.writeUInt16BE=J.writeUInt16BE,e.writeUInt32LE=J.writeUInt32LE,e.writeUInt32BE=J.writeUInt32BE,e.writeIntLE=J.writeIntLE,e.writeIntBE=J.writeIntBE,e.writeInt8=J.writeInt8,e.writeInt16LE=J.writeInt16LE,e.writeInt16BE=J.writeInt16BE,e.writeInt32LE=J.writeInt32LE,e.writeInt32BE=J.writeInt32BE,e.writeFloatLE=J.writeFloatLE,e.writeFloatBE=J.writeFloatBE,e.writeDoubleLE=J.writeDoubleLE,e.writeDoubleBE=J.writeDoubleBE,e.fill=J.fill,e.inspect=J.inspect,e.toArrayBuffer=J.toArrayBuffer,e};var tt=/[^+\/0-9A-Za-z-_]/g}).call(e,n(70).Buffer,function(){return this}())},function(t,e,n){var i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";!function(t){"use strict";function e(t){var e=t.charCodeAt(0);return e===s||e===l?62:e===a||e===f?63:u>e?-1:u+10>e?e-u+26+26:c+26>e?e-c:h+26>e?e-h+26:void 0}function n(t){function n(t){h[l++]=t}var i,r,s,a,u,h;if(t.length%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var c=t.length;u="="===t.charAt(c-2)?2:"="===t.charAt(c-1)?1:0,h=new o(3*t.length/4-u),s=u>0?t.length-4:t.length;var l=0;for(i=0,r=0;s>i;i+=4,r+=3)a=e(t.charAt(i))<<18|e(t.charAt(i+1))<<12|e(t.charAt(i+2))<<6|e(t.charAt(i+3)),n((16711680&a)>>16),n((65280&a)>>8),n(255&a);return 2===u?(a=e(t.charAt(i))<<2|e(t.charAt(i+1))>>4,n(255&a)):1===u&&(a=e(t.charAt(i))<<10|e(t.charAt(i+1))<<4|e(t.charAt(i+2))>>2,n(a>>8&255),n(255&a)),h}function r(t){function e(t){return i.charAt(t)}function n(t){return e(t>>18&63)+e(t>>12&63)+e(t>>6&63)+e(63&t)}var r,o,s,a=t.length%3,u="";for(r=0,s=t.length-a;s>r;r+=3)o=(t[r]<<16)+(t[r+1]<<8)+t[r+2],u+=n(o);switch(a){case 1:o=t[t.length-1],u+=e(o>>2),u+=e(o<<4&63),u+="==";break;case 2:o=(t[t.length-2]<<8)+t[t.length-1],u+=e(o>>10),u+=e(o>>4&63),u+=e(o<<2&63),u+="="}return u}var o="undefined"!=typeof Uint8Array?Uint8Array:Array,s="+".charCodeAt(0),a="/".charCodeAt(0),u="0".charCodeAt(0),h="a".charCodeAt(0),c="A".charCodeAt(0),l="-".charCodeAt(0),f="_".charCodeAt(0);t.toByteArray=n,t.fromByteArray=r}(e)},function(t,e){e.read=function(t,e,n,i,r){var o,s,a=8*r-i-1,u=(1<<a)-1,h=u>>1,c=-7,l=n?r-1:0,f=n?-1:1,d=t[e+l];for(l+=f,o=d&(1<<-c)-1,d>>=-c,c+=a;c>0;o=256*o+t[e+l],l+=f,c-=8);for(s=o&(1<<-c)-1,o>>=-c,c+=i;c>0;s=256*s+t[e+l],l+=f,c-=8);if(0===o)o=1-h;else{if(o===u)return s?NaN:(d?-1:1)*(1/0);s+=Math.pow(2,i),o-=h}return(d?-1:1)*s*Math.pow(2,o-i)},e.write=function(t,e,n,i,r,o){var s,a,u,h=8*o-r-1,c=(1<<h)-1,l=c>>1,f=23===r?Math.pow(2,-24)-Math.pow(2,-77):0,d=i?0:o-1,p=i?1:-1,g=0>e||0===e&&0>1/e?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,s=c):(s=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-s))<1&&(s--,u*=2),e+=s+l>=1?f/u:f*Math.pow(2,1-l),e*u>=2&&(s++,u/=2),s+l>=c?(a=0,s=c):s+l>=1?(a=(e*u-1)*Math.pow(2,r),s+=l):(a=e*Math.pow(2,l-1)*Math.pow(2,r),s=0));r>=8;t[n+d]=255&a,d+=p,a/=256,r-=8);for(s=s<<r|a,h+=r;h>0;t[n+d]=255&s,d+=p,s/=256,h-=8);t[n+d-p]|=128*g}},function(t,e){var n=Array.isArray,i=Object.prototype.toString;t.exports=n||function(t){return!!t&&"[object Array]"==i.call(t)}},function(t,e,n){var i=n(75);t.exports=function(){i.loggingEnabled()&&console.log.apply(console,arguments)}},function(t,e){var n=!1;t.exports={loggingEnabled:function(t){return void 0!==t&&(n=t),n}}},function(t,e,n){function i(t,e,n){var i=o(t);return n&&s(t,e,n)&&(e=void 0),e?r(i,e):i}var r=n(77),o=n(83),s=n(84);t.exports=i},[131,78,79],3,[132,80,81,82],5,6,7,55,10,[130,86,92,88],[131,87,88],3,[132,89,90,91],5,6,7,[133,93,94,95],9,10,11,function(t,e){function n(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function i(t){return"function"==typeof t}function r(t){return"number"==typeof t}function o(t){return"object"==typeof t&&null!==t}function s(t){return void 0===t}t.exports=n,n.EventEmitter=n,n.prototype._events=void 0,n.prototype._maxListeners=void 0,n.defaultMaxListeners=10,n.prototype.setMaxListeners=function(t){if(!r(t)||0>t||isNaN(t))throw TypeError("n must be a positive number");return this._maxListeners=t,this},n.prototype.emit=function(t){var e,n,r,a,u,h;if(this._events||(this._events={}),"error"===t&&(!this._events.error||o(this._events.error)&&!this._events.error.length)){if(e=arguments[1],e instanceof Error)throw e;throw TypeError('Uncaught, unspecified "error" event.')}if(n=this._events[t],s(n))return!1;if(i(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:a=Array.prototype.slice.call(arguments,1),n.apply(this,a)}else if(o(n))for(a=Array.prototype.slice.call(arguments,1),h=n.slice(),r=h.length,u=0;r>u;u++)h[u].apply(this,a);return!0},n.prototype.addListener=function(t,e){var r;if(!i(e))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",t,i(e.listener)?e.listener:e),this._events[t]?o(this._events[t])?this._events[t].push(e):this._events[t]=[this._events[t],e]:this._events[t]=e,o(this._events[t])&&!this._events[t].warned&&(r=s(this._maxListeners)?n.defaultMaxListeners:this._maxListeners,r&&r>0&&this._events[t].length>r&&(this._events[t].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[t].length),"function"==typeof console.trace&&console.trace())),this},n.prototype.on=n.prototype.addListener,n.prototype.once=function(t,e){function n(){this.removeListener(t,n),r||(r=!0,e.apply(this,arguments))}if(!i(e))throw TypeError("listener must be a function");var r=!1;return n.listener=e,this.on(t,n),this},n.prototype.removeListener=function(t,e){var n,r,s,a;if(!i(e))throw TypeError("listener must be a function");if(!this._events||!this._events[t])return this;if(n=this._events[t],s=n.length,r=-1,n===e||i(n.listener)&&n.listener===e)delete this._events[t],this._events.removeListener&&this.emit("removeListener",t,e);else if(o(n)){for(a=s;a-- >0;)if(n[a]===e||n[a].listener&&n[a].listener===e){r=a;break}if(0>r)return this;1===n.length?(n.length=0,delete this._events[t]):n.splice(r,1),this._events.removeListener&&this.emit("removeListener",t,e)}return this},n.prototype.removeAllListeners=function(t){var e,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[t]&&delete this._events[t],this;if(0===arguments.length){for(e in this._events)"removeListener"!==e&&this.removeAllListeners(e);return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[t],i(n))this.removeListener(t,n);else if(n)for(;n.length;)this.removeListener(t,n[n.length-1]);return delete this._events[t],this},n.prototype.listeners=function(t){var e;return e=this._events&&this._events[t]?i(this._events[t])?[this._events[t]]:this._events[t].slice():[]},n.prototype.listenerCount=function(t){if(this._events){var e=this._events[t];if(i(e))return 1;if(e)return e.length}return 0},n.listenerCount=function(t,e){return t.listenerCount(e)}},function(t,e,n){function i(){r.call(this)}t.exports=i;var r=n(96).EventEmitter,o=n(98);o(i,r),i.Readable=n(99),i.Writable=n(111),i.Duplex=n(112),i.Transform=n(113),i.PassThrough=n(114),i.Stream=i,i.prototype.pipe=function(t,e){function n(e){t.writable&&!1===t.write(e)&&h.pause&&h.pause()}function i(){h.readable&&h.resume&&h.resume()}function o(){c||(c=!0,t.end())}function s(){c||(c=!0,"function"==typeof t.destroy&&t.destroy())}function a(t){if(u(),0===r.listenerCount(this,"error"))throw t}function u(){h.removeListener("data",n),t.removeListener("drain",i),h.removeListener("end",o),h.removeListener("close",s),h.removeListener("error",a),t.removeListener("error",a),h.removeListener("end",u),h.removeListener("close",u),t.removeListener("close",u)}var h=this;h.on("data",n),t.on("drain",i),t._isStdio||e&&e.end===!1||(h.on("end",o),h.on("close",s));var c=!1;return h.on("error",a),t.on("error",a),h.on("end",u),h.on("close",u),t.on("close",u),t.emit("pipe",h),t}},function(t,e){"function"==typeof Object.create?t.exports=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(t,e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}},function(t,e,n){e=t.exports=n(100),e.Stream=n(97),e.Readable=e,e.Writable=n(107),e.Duplex=n(106),e.Transform=n(109),e.PassThrough=n(110)},function(t,e,n){(function(e){function i(t,e){var i=n(106);t=t||{};var r=t.highWaterMark,o=t.objectMode?16:16384;this.highWaterMark=r||0===r?r:o,this.highWaterMark=~~this.highWaterMark,this.buffer=[],this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.objectMode=!!t.objectMode,e instanceof i&&(this.objectMode=this.objectMode||!!t.readableObjectMode),this.defaultEncoding=t.defaultEncoding||"utf8",this.ranOut=!1,this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(L||(L=n(108).StringDecoder),this.decoder=new L(t.encoding),this.encoding=t.encoding)}function r(t){return n(106),this instanceof r?(this._readableState=new i(t,this),this.readable=!0,void P.call(this)):new r(t)}function o(t,e,n,i,r){var o=h(e,n);if(o)t.emit("error",o);else if(I.isNullOrUndefined(n))e.reading=!1,e.ended||c(t,e);else if(e.objectMode||n&&n.length>0)if(e.ended&&!r){var a=new Error("stream.push() after EOF");t.emit("error",a)}else if(e.endEmitted&&r){var a=new Error("stream.unshift() after end event");t.emit("error",a)}else!e.decoder||r||i||(n=e.decoder.write(n)),r||(e.reading=!1),e.flowing&&0===e.length&&!e.sync?(t.emit("data",n),t.read(0)):(e.length+=e.objectMode?1:n.length,r?e.buffer.unshift(n):e.buffer.push(n),e.needReadable&&l(t)),d(t,e);else r||(e.reading=!1);return s(e)}function s(t){return!t.ended&&(t.needReadable||t.length<t.highWaterMark||0===t.length)}function a(t){if(t>=R)t=R;else{t--;for(var e=1;32>e;e<<=1)t|=t>>e;t++}return t}function u(t,e){return 0===e.length&&e.ended?0:e.objectMode?0===t?0:1:isNaN(t)||I.isNull(t)?e.flowing&&e.buffer.length?e.buffer[0].length:e.length:0>=t?0:(t>e.highWaterMark&&(e.highWaterMark=a(t)),t>e.length?e.ended?e.length:(e.needReadable=!0,0):t)}function h(t,e){var n=null;return I.isBuffer(e)||I.isString(e)||I.isNullOrUndefined(e)||t.objectMode||(n=new TypeError("Invalid non-string/buffer chunk")),n}function c(t,e){if(e.decoder&&!e.ended){var n=e.decoder.end();n&&n.length&&(e.buffer.push(n),e.length+=e.objectMode?1:n.length)}e.ended=!0,l(t)}function l(t){var n=t._readableState;n.needReadable=!1,n.emittedReadable||(O("emitReadable",n.flowing),n.emittedReadable=!0,n.sync?e.nextTick(function(){f(t)}):f(t))}function f(t){O("emit readable"),t.emit("readable"),y(t)}function d(t,n){n.readingMore||(n.readingMore=!0,e.nextTick(function(){p(t,n)}))}function p(t,e){for(var n=e.length;!e.reading&&!e.flowing&&!e.ended&&e.length<e.highWaterMark&&(O("maybeReadMore read 0"),t.read(0),n!==e.length);)n=e.length;e.readingMore=!1}function g(t){return function(){var e=t._readableState;O("pipeOnDrain",e.awaitDrain),e.awaitDrain&&e.awaitDrain--,0===e.awaitDrain&&b.listenerCount(t,"data")&&(e.flowing=!0,y(t))}}function _(t,n){n.resumeScheduled||(n.resumeScheduled=!0,e.nextTick(function(){m(t,n)}))}function m(t,e){e.resumeScheduled=!1,t.emit("resume"),y(t),e.flowing&&!e.reading&&t.read(0)}function y(t){var e=t._readableState;if(O("flow",e.flowing),e.flowing)do var n=t.read();while(null!==n&&e.flowing)}function v(t,e){var n,i=e.buffer,r=e.length,o=!!e.decoder,s=!!e.objectMode;if(0===i.length)return null;if(0===r)n=null;else if(s)n=i.shift();else if(!t||t>=r)n=o?i.join(""):T.concat(i,r),i.length=0;else if(t<i[0].length){var a=i[0];n=a.slice(0,t),i[0]=a.slice(t)}else if(t===i[0].length)n=i.shift();else{n=o?"":new T(t);for(var u=0,h=0,c=i.length;c>h&&t>u;h++){var a=i[0],l=Math.min(t-u,a.length);o?n+=a.slice(0,l):a.copy(n,u,0,l),l<a.length?i[0]=a.slice(l):i.shift(),u+=l}}return n}function E(t){var n=t._readableState;if(n.length>0)throw new Error("endReadable called on non-empty stream");n.endEmitted||(n.ended=!0,e.nextTick(function(){n.endEmitted||0!==n.length||(n.endEmitted=!0,t.readable=!1,t.emit("end"))}))}function S(t,e){for(var n=0,i=t.length;i>n;n++)e(t[n],n)}function A(t,e){for(var n=0,i=t.length;i>n;n++)if(t[n]===e)return n;return-1}t.exports=r;var w=n(102),T=n(70).Buffer;r.ReadableState=i;var b=n(96).EventEmitter;b.listenerCount||(b.listenerCount=function(t,e){return t.listeners(e).length});var P=n(97),I=n(103);I.inherits=n(104);var L,O=n(105);O=O&&O.debuglog?O.debuglog("stream"):function(){},I.inherits(r,P),r.prototype.push=function(t,e){var n=this._readableState;return I.isString(t)&&!n.objectMode&&(e=e||n.defaultEncoding,e!==n.encoding&&(t=new T(t,e),e="")),o(this,n,t,e,!1)},r.prototype.unshift=function(t){var e=this._readableState;return o(this,e,t,"",!0)},r.prototype.setEncoding=function(t){return L||(L=n(108).StringDecoder),this._readableState.decoder=new L(t),this._readableState.encoding=t,this};var R=8388608;r.prototype.read=function(t){O("read",t);var e=this._readableState,n=t;if((!I.isNumber(t)||t>0)&&(e.emittedReadable=!1),0===t&&e.needReadable&&(e.length>=e.highWaterMark||e.ended))return O("read: emitReadable",e.length,e.ended),0===e.length&&e.ended?E(this):l(this),null;if(t=u(t,e),0===t&&e.ended)return 0===e.length&&E(this),null;var i=e.needReadable;O("need readable",i),(0===e.length||e.length-t<e.highWaterMark)&&(i=!0,O("length less than watermark",i)),(e.ended||e.reading)&&(i=!1,O("reading or ended",i)),i&&(O("do read"),e.reading=!0,e.sync=!0,0===e.length&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1),i&&!e.reading&&(t=u(n,e));var r;return r=t>0?v(t,e):null,I.isNull(r)&&(e.needReadable=!0,t=0),e.length-=t,0!==e.length||e.ended||(e.needReadable=!0),n!==t&&e.ended&&0===e.length&&E(this),I.isNull(r)||this.emit("data",r),r},r.prototype._read=function(t){this.emit("error",new Error("not implemented"))},r.prototype.pipe=function(t,n){function i(t){O("onunpipe"),t===l&&o()}function r(){O("onend"),t.end()}function o(){O("cleanup"),t.removeListener("close",u),t.removeListener("finish",h),t.removeListener("drain",_),t.removeListener("error",a),t.removeListener("unpipe",i),l.removeListener("end",r),l.removeListener("end",o),l.removeListener("data",s),!f.awaitDrain||t._writableState&&!t._writableState.needDrain||_()}function s(e){O("ondata");var n=t.write(e);!1===n&&(O("false write response, pause",l._readableState.awaitDrain),l._readableState.awaitDrain++,l.pause())}function a(e){O("onerror",e),c(),t.removeListener("error",a),0===b.listenerCount(t,"error")&&t.emit("error",e)}function u(){t.removeListener("finish",h),c()}function h(){O("onfinish"),t.removeListener("close",u),c()}function c(){O("unpipe"),l.unpipe(t)}var l=this,f=this._readableState;switch(f.pipesCount){case 0:f.pipes=t;break;case 1:f.pipes=[f.pipes,t];break;default:f.pipes.push(t)}f.pipesCount+=1,O("pipe count=%d opts=%j",f.pipesCount,n);var d=(!n||n.end!==!1)&&t!==e.stdout&&t!==e.stderr,p=d?r:o;f.endEmitted?e.nextTick(p):l.once("end",p),t.on("unpipe",i);var _=g(l);return t.on("drain",_),l.on("data",s),t._events&&t._events.error?w(t._events.error)?t._events.error.unshift(a):t._events.error=[a,t._events.error]:t.on("error",a),t.once("close",u),t.once("finish",h),t.emit("pipe",l),f.flowing||(O("pipe resume"),l.resume()),t},r.prototype.unpipe=function(t){var e=this._readableState;if(0===e.pipesCount)return this;if(1===e.pipesCount)return t&&t!==e.pipes?this:(t||(t=e.pipes),e.pipes=null,e.pipesCount=0,e.flowing=!1,t&&t.emit("unpipe",this),this);if(!t){var n=e.pipes,i=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=!1;for(var r=0;i>r;r++)n[r].emit("unpipe",this);return this}var r=A(e.pipes,t);return-1===r?this:(e.pipes.splice(r,1),e.pipesCount-=1,1===e.pipesCount&&(e.pipes=e.pipes[0]),t.emit("unpipe",this),this)},r.prototype.on=function(t,n){var i=P.prototype.on.call(this,t,n);if("data"===t&&!1!==this._readableState.flowing&&this.resume(),"readable"===t&&this.readable){var r=this._readableState;if(!r.readableListening)if(r.readableListening=!0,r.emittedReadable=!1,r.needReadable=!0,r.reading)r.length&&l(this,r);else{var o=this;e.nextTick(function(){O("readable nexttick read 0"),o.read(0)})}}return i},r.prototype.addListener=r.prototype.on,r.prototype.resume=function(){var t=this._readableState;return t.flowing||(O("resume"),t.flowing=!0,t.reading||(O("resume read 0"),this.read(0)),_(this,t)),this},r.prototype.pause=function(){return O("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(O("pause"),this._readableState.flowing=!1,this.emit("pause")),this},r.prototype.wrap=function(t){var e=this._readableState,n=!1,i=this;t.on("end",function(){if(O("wrapped end"),e.decoder&&!e.ended){var t=e.decoder.end();t&&t.length&&i.push(t)}i.push(null)}),t.on("data",function(r){if(O("wrapped data"),e.decoder&&(r=e.decoder.write(r)),r&&(e.objectMode||r.length)){var o=i.push(r);o||(n=!0,t.pause())}});for(var r in t)I.isFunction(t[r])&&I.isUndefined(this[r])&&(this[r]=function(e){return function(){return t[e].apply(t,arguments)}}(r));var o=["error","close","destroy","pause","resume"];return S(o,function(e){t.on(e,i.emit.bind(i,e))}),i._read=function(e){O("wrapped _read",e),n&&(n=!1,t.resume())},i},r._fromList=v}).call(e,n(101))},function(t,e){function n(){h=!1,s.length?u=s.concat(u):c=-1,u.length&&i()}function i(){if(!h){var t=setTimeout(n);h=!0;for(var e=u.length;e;){for(s=u,u=[];++c<e;)s&&s[c].run();c=-1,e=u.length}s=null,h=!1,clearTimeout(t)}}function r(t,e){this.fun=t,this.array=e}function o(){}var s,a=t.exports={},u=[],h=!1,c=-1;a.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];u.push(new r(t,e)),1!==u.length||h||setTimeout(i,0)},r.prototype.run=function(){this.fun.apply(null,this.array)},a.title="browser",a.browser=!0,a.env={},a.argv=[],a.version="",a.versions={},a.on=o,a.addListener=o,a.once=o,a.off=o,a.removeListener=o,a.removeAllListeners=o,a.emit=o,a.binding=function(t){throw new Error("process.binding is not supported")},a.cwd=function(){return"/"},a.chdir=function(t){throw new Error("process.chdir is not supported")},a.umask=function(){return 0}},function(t,e){t.exports=Array.isArray||function(t){return"[object Array]"==Object.prototype.toString.call(t)}},function(t,e,n){(function(t){function n(t){return Array.isArray?Array.isArray(t):"[object Array]"===_(t)}function i(t){return"boolean"==typeof t}function r(t){return null===t}function o(t){return null==t}function s(t){return"number"==typeof t}function a(t){return"string"==typeof t}function u(t){return"symbol"==typeof t}function h(t){return void 0===t}function c(t){return"[object RegExp]"===_(t)}function l(t){return"object"==typeof t&&null!==t}function f(t){return"[object Date]"===_(t)}function d(t){return"[object Error]"===_(t)||t instanceof Error}function p(t){return"function"==typeof t}function g(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||"undefined"==typeof t}function _(t){return Object.prototype.toString.call(t)}e.isArray=n,e.isBoolean=i,e.isNull=r,e.isNullOrUndefined=o,e.isNumber=s,e.isString=a,e.isSymbol=u,e.isUndefined=h,e.isRegExp=c,e.isObject=l,e.isDate=f,e.isError=d,e.isFunction=p,e.isPrimitive=g,e.isBuffer=t.isBuffer}).call(e,n(70).Buffer)},98,function(t,e){},function(t,e,n){(function(e){function i(t){return this instanceof i?(u.call(this,t),h.call(this,t),t&&t.readable===!1&&(this.readable=!1),t&&t.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,t&&t.allowHalfOpen===!1&&(this.allowHalfOpen=!1),void this.once("end",r)):new i(t)}function r(){this.allowHalfOpen||this._writableState.ended||e.nextTick(this.end.bind(this))}function o(t,e){for(var n=0,i=t.length;i>n;n++)e(t[n],n)}t.exports=i;var s=Object.keys||function(t){var e=[];for(var n in t)e.push(n);return e},a=n(103);a.inherits=n(104);var u=n(100),h=n(107);a.inherits(i,u),o(s(h.prototype),function(t){i.prototype[t]||(i.prototype[t]=h.prototype[t])})}).call(e,n(101))},function(t,e,n){(function(e){function i(t,e,n){this.chunk=t,this.encoding=e,this.callback=n}function r(t,e){var i=n(106);t=t||{};var r=t.highWaterMark,o=t.objectMode?16:16384;this.highWaterMark=r||0===r?r:o,this.objectMode=!!t.objectMode,e instanceof i&&(this.objectMode=this.objectMode||!!t.writableObjectMode),this.highWaterMark=~~this.highWaterMark,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;var s=t.decodeStrings===!1;this.decodeStrings=!s,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(t){d(e,t)},this.writecb=null,this.writelen=0,this.buffer=[],this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1}function o(t){var e=n(106);return this instanceof o||this instanceof e?(this._writableState=new r(t,this),this.writable=!0,void w.call(this)):new o(t)}function s(t,n,i){var r=new Error("write after end");
t.emit("error",r),e.nextTick(function(){i(r)})}function a(t,n,i,r){var o=!0;if(!(A.isBuffer(i)||A.isString(i)||A.isNullOrUndefined(i)||n.objectMode)){var s=new TypeError("Invalid non-string/buffer chunk");t.emit("error",s),e.nextTick(function(){r(s)}),o=!1}return o}function u(t,e,n){return!t.objectMode&&t.decodeStrings!==!1&&A.isString(e)&&(e=new S(e,n)),e}function h(t,e,n,r,o){n=u(e,n,r),A.isBuffer(n)&&(r="buffer");var s=e.objectMode?1:n.length;e.length+=s;var a=e.length<e.highWaterMark;return a||(e.needDrain=!0),e.writing||e.corked?e.buffer.push(new i(n,r,o)):c(t,e,!1,s,n,r,o),a}function c(t,e,n,i,r,o,s){e.writelen=i,e.writecb=s,e.writing=!0,e.sync=!0,n?t._writev(r,e.onwrite):t._write(r,o,e.onwrite),e.sync=!1}function l(t,n,i,r,o){i?e.nextTick(function(){n.pendingcb--,o(r)}):(n.pendingcb--,o(r)),t._writableState.errorEmitted=!0,t.emit("error",r)}function f(t){t.writing=!1,t.writecb=null,t.length-=t.writelen,t.writelen=0}function d(t,n){var i=t._writableState,r=i.sync,o=i.writecb;if(f(i),n)l(t,i,r,n,o);else{var s=m(t,i);s||i.corked||i.bufferProcessing||!i.buffer.length||_(t,i),r?e.nextTick(function(){p(t,i,s,o)}):p(t,i,s,o)}}function p(t,e,n,i){n||g(t,e),e.pendingcb--,i(),v(t,e)}function g(t,e){0===e.length&&e.needDrain&&(e.needDrain=!1,t.emit("drain"))}function _(t,e){if(e.bufferProcessing=!0,t._writev&&e.buffer.length>1){for(var n=[],i=0;i<e.buffer.length;i++)n.push(e.buffer[i].callback);e.pendingcb++,c(t,e,!0,e.length,e.buffer,"",function(t){for(var i=0;i<n.length;i++)e.pendingcb--,n[i](t)}),e.buffer=[]}else{for(var i=0;i<e.buffer.length;i++){var r=e.buffer[i],o=r.chunk,s=r.encoding,a=r.callback,u=e.objectMode?1:o.length;if(c(t,e,!1,u,o,s,a),e.writing){i++;break}}i<e.buffer.length?e.buffer=e.buffer.slice(i):e.buffer.length=0}e.bufferProcessing=!1}function m(t,e){return e.ending&&0===e.length&&!e.finished&&!e.writing}function y(t,e){e.prefinished||(e.prefinished=!0,t.emit("prefinish"))}function v(t,e){var n=m(t,e);return n&&(0===e.pendingcb?(y(t,e),e.finished=!0,t.emit("finish")):y(t,e)),n}function E(t,n,i){n.ending=!0,v(t,n),i&&(n.finished?e.nextTick(i):t.once("finish",i)),n.ended=!0}t.exports=o;var S=n(70).Buffer;o.WritableState=r;var A=n(103);A.inherits=n(104);var w=n(97);A.inherits(o,w),o.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe. Not readable."))},o.prototype.write=function(t,e,n){var i=this._writableState,r=!1;return A.isFunction(e)&&(n=e,e=null),A.isBuffer(t)?e="buffer":e||(e=i.defaultEncoding),A.isFunction(n)||(n=function(){}),i.ended?s(this,i,n):a(this,i,t,n)&&(i.pendingcb++,r=h(this,i,t,e,n)),r},o.prototype.cork=function(){var t=this._writableState;t.corked++},o.prototype.uncork=function(){var t=this._writableState;t.corked&&(t.corked--,t.writing||t.corked||t.finished||t.bufferProcessing||!t.buffer.length||_(this,t))},o.prototype._write=function(t,e,n){n(new Error("not implemented"))},o.prototype._writev=null,o.prototype.end=function(t,e,n){var i=this._writableState;A.isFunction(t)?(n=t,t=null,e=null):A.isFunction(e)&&(n=e,e=null),A.isNullOrUndefined(t)||this.write(t,e),i.corked&&(i.corked=1,this.uncork()),i.ending||i.finished||E(this,i,n)}}).call(e,n(101))},function(t,e,n){function i(t){if(t&&!u(t))throw new Error("Unknown encoding: "+t)}function r(t){return t.toString(this.encoding)}function o(t){this.charReceived=t.length%2,this.charLength=this.charReceived?2:0}function s(t){this.charReceived=t.length%3,this.charLength=this.charReceived?3:0}var a=n(70).Buffer,u=a.isEncoding||function(t){switch(t&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}},h=e.StringDecoder=function(t){switch(this.encoding=(t||"utf8").toLowerCase().replace(/[-_]/,""),i(t),this.encoding){case"utf8":this.surrogateSize=3;break;case"ucs2":case"utf16le":this.surrogateSize=2,this.detectIncompleteChar=o;break;case"base64":this.surrogateSize=3,this.detectIncompleteChar=s;break;default:return void(this.write=r)}this.charBuffer=new a(6),this.charReceived=0,this.charLength=0};h.prototype.write=function(t){for(var e="";this.charLength;){var n=t.length>=this.charLength-this.charReceived?this.charLength-this.charReceived:t.length;if(t.copy(this.charBuffer,this.charReceived,0,n),this.charReceived+=n,this.charReceived<this.charLength)return"";t=t.slice(n,t.length),e=this.charBuffer.slice(0,this.charLength).toString(this.encoding);var i=e.charCodeAt(e.length-1);if(!(i>=55296&&56319>=i)){if(this.charReceived=this.charLength=0,0===t.length)return e;break}this.charLength+=this.surrogateSize,e=""}this.detectIncompleteChar(t);var r=t.length;this.charLength&&(t.copy(this.charBuffer,0,t.length-this.charReceived,r),r-=this.charReceived),e+=t.toString(this.encoding,0,r);var r=e.length-1,i=e.charCodeAt(r);if(i>=55296&&56319>=i){var o=this.surrogateSize;return this.charLength+=o,this.charReceived+=o,this.charBuffer.copy(this.charBuffer,o,0,o),t.copy(this.charBuffer,0,0,o),e.substring(0,r)}return e},h.prototype.detectIncompleteChar=function(t){for(var e=t.length>=3?3:t.length;e>0;e--){var n=t[t.length-e];if(1==e&&n>>5==6){this.charLength=2;break}if(2>=e&&n>>4==14){this.charLength=3;break}if(3>=e&&n>>3==30){this.charLength=4;break}}this.charReceived=e},h.prototype.end=function(t){var e="";if(t&&t.length&&(e=this.write(t)),this.charReceived){var n=this.charReceived,i=this.charBuffer,r=this.encoding;e+=i.slice(0,n).toString(r)}return e}},function(t,e,n){function i(t,e){this.afterTransform=function(t,n){return r(e,t,n)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null}function r(t,e,n){var i=t._transformState;i.transforming=!1;var r=i.writecb;if(!r)return t.emit("error",new Error("no writecb in Transform class"));i.writechunk=null,i.writecb=null,u.isNullOrUndefined(n)||t.push(n),r&&r(e);var o=t._readableState;o.reading=!1,(o.needReadable||o.length<o.highWaterMark)&&t._read(o.highWaterMark)}function o(t){if(!(this instanceof o))return new o(t);a.call(this,t),this._transformState=new i(t,this);var e=this;this._readableState.needReadable=!0,this._readableState.sync=!1,this.once("prefinish",function(){u.isFunction(this._flush)?this._flush(function(t){s(e,t)}):s(e)})}function s(t,e){if(e)return t.emit("error",e);var n=t._writableState,i=t._transformState;if(n.length)throw new Error("calling transform done when ws.length != 0");if(i.transforming)throw new Error("calling transform done when still transforming");return t.push(null)}t.exports=o;var a=n(106),u=n(103);u.inherits=n(104),u.inherits(o,a),o.prototype.push=function(t,e){return this._transformState.needTransform=!1,a.prototype.push.call(this,t,e)},o.prototype._transform=function(t,e,n){throw new Error("not implemented")},o.prototype._write=function(t,e,n){var i=this._transformState;if(i.writecb=n,i.writechunk=t,i.writeencoding=e,!i.transforming){var r=this._readableState;(i.needTransform||r.needReadable||r.length<r.highWaterMark)&&this._read(r.highWaterMark)}},o.prototype._read=function(t){var e=this._transformState;u.isNull(e.writechunk)||!e.writecb||e.transforming?e.needTransform=!0:(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform))}},function(t,e,n){function i(t){return this instanceof i?void r.call(this,t):new i(t)}t.exports=i;var r=n(109),o=n(103);o.inherits=n(104),o.inherits(i,r),i.prototype._transform=function(t,e,n){n(null,t)}},function(t,e,n){t.exports=n(107)},function(t,e,n){t.exports=n(106)},function(t,e,n){t.exports=n(109)},function(t,e,n){t.exports=n(110)},function(t,e,n){(function(e){var i,r=n(74),o=n(69),s=(o.BaseTransform,o.BaseParser),a=n(116);t.exports=i=function(t,e){o.BaseParser.prototype.constructor.apply(this,arguments),t||(t={audioTrackId:-1,videoTrackId:-1,tracks:[]}),this.muxer=new a(t),this.muxer.ondata=this._onMp4Data.bind(this),this.muxer.oncodecinfo=this._onCodecInfo.bind(this),this._codecInfo=null,this._timestamp=0,e&&(this.worker="undefined"!=typeof Worker?new Worker("/dist/mp4-mux-worker-bundle.js"):null),this.worker&&(this.worker.onmessage=function(t){this._onMp4Data(t.data)}.bind(this),this.worker.postMessage({mp4MuxProfile:t}))},i.Profiles=a.Profiles,i.prototype=o.createBaseParser({constructor:i,_onMp4Data:function(t){r("_onMp4Data"),this.enqueue(new o.Transfer(new e(t),"buffer"))},_onCodecInfo:function(t){r("Codec info: "+t),this._codecInfo=t},_onFinish:function(t){r("MP4Mux._onFinish"),this.worker?this.worker.postMessage({eos:!0}):this.muxer&&this.muxer.flush(),s.prototype._onFinish.call(this,t)},_parse:function(t){var e;t.data&&(e=this._timestamp=t.data.timestamp),t.data.flush&&(this._needFlush=!0),r("UnitMP4Mux Timestamp: "+this._timestamp),r("UnitMP4Mux._parse: Payload type: "+typeof t.data),this.worker?(t.data.empty||this.worker.postMessage({data:t.data,meta:t.data.meta,timestamp:e,packetType:a.TYPE_AUDIO_PACKET}),this._needFlush&&(this.worker.postMessage({eos:!0}),this._needFlush=!1)):this.muxer&&(t.data.empty||this.muxer.pushPacket(a.TYPE_AUDIO_PACKET,new Uint8Array(t.data),e,t.data.meta),this._needFlush&&(this.muxer.flush(),this._needFlush=!1))}})}).call(e,n(70).Buffer)},function(t,e,n){function i(t){for(var e=t.length>>1,n=new Uint8Array(e),i=0;e>i;i++)n[i]=parseInt(t.substr(2*i,2),16);return n}function r(t,e){var n,i=0,r=s.RAW;switch(e.codecId){case l:var o=t[i++];r=o,n=1024;break;case c:var u=t[i+1]>>3&3,f=t[i+1]>>1&3;n=1===f?3===u?1152:576:3===f?384:1152}return info={codecDescription:h[e.codecId],codecId:e.codecId,data:t.subarray(i),rate:e.sampleRate,size:e.sampleSize,channels:e.channels,samples:n,packetType:r},a("parsed audio packet with %d samples",n),info}function o(t){var e=0,n=t[e]>>4,i=15&t[e];e++;var r={frameType:n,codecId:i,codecDescription:d[i]};switch(i){case g:var o=t[e++];r.packetType=o,r.compositionTime=(t[e]<<24|t[e+1]<<16|t[e+2]<<8)>>8,e+=3;break;case p:r.packetType=_.NALU,r.horizontalOffset=t[e]>>4&15,r.verticalOffset=15&t[e],r.compositionTime=0,e++}return r.data=t.subarray(e),r}var s,a=n(74),u=n(117),h=["PCM","ADPCM","MP3","PCM le","Nellymouser16","Nellymouser8","Nellymouser","G.711 A-law","G.711 mu-law",null,"AAC","Speex","MP3 8khz"],c=2,l=10;!function(t){t[t.HEADER=0]="HEADER",t[t.RAW=1]="RAW"}(s||(s={}));var f,d=[null,"JPEG","Sorenson","Screen","VP6","VP6 alpha","Screen2","AVC"],p=4,g=7;!function(t){t[t.KEY=1]="KEY",t[t.INNER=2]="INNER",t[t.DISPOSABLE=3]="DISPOSABLE",t[t.GENERATED=4]="GENERATED",t[t.INFO=5]="INFO"}(f||(f={}));var _;!function(t){t[t.HEADER=0]="HEADER",t[t.NALU=1]="NALU",t[t.END=2]="END"}(_||(_={}));var m,y=8,v=9,E=!0;!function(t){t[t.CAN_GENERATE_HEADER=0]="CAN_GENERATE_HEADER",t[t.NEED_HEADER_DATA=1]="NEED_HEADER_DATA",t[t.MAIN_PACKETS=2]="MAIN_PACKETS"}(m||(m={}));var S=function(){function t(t){var e=this;this.oncodecinfo=function(t){throw new Error("MP4Mux.oncodecinfo is not set")},this.ondata=function(t){throw new Error("MP4Mux.ondata is not set")},this.metadata=t,this.trackStates=this.metadata.tracks.map(function(t,n){var i={trackId:n+1,trackInfo:t,cachedDuration:0,samplesProcessed:0,initializationData:[]};return e.metadata.audioTrackId===n&&(e.audioTrackState=i),e.metadata.videoTrackId===n&&(e.videoTrackState=i),i},this),this._checkIfNeedHeaderData(),this.filePos=0,this.cachedPackets=[],this.chunkIndex=0}return t.prototype.pushPacket=function(t,e,n,i){switch(this.state===m.CAN_GENERATE_HEADER&&this._tryGenerateHeader(),t){case y:var a=this.audioTrackState,u=r(e,i);if(!a||a.trackInfo.codecId!==u.codecId)throw new Error("Unexpected audio packet codec: "+u.codecDescription);switch(u.codecId){default:throw new Error("Unsupported audio codec: "+u.codecDescription);case c:break;case l:if(u.packetType===s.HEADER)return void a.initializationData.push(u.data)}this.cachedPackets.push({packet:u,timestamp:n,trackId:a.trackId});break;case v:var h=this.videoTrackState,f=o(e);if(!h||h.trackInfo.codecId!==f.codecId)throw new Error("Unexpected video packet codec: "+f.codecDescription);switch(f.codecId){default:throw new Error("unsupported video codec: "+f.codecDescription);case p:break;case g:if(f.packetType===_.HEADER)return void h.initializationData.push(f.data)}this.cachedPackets.push({packet:f,timestamp:n,trackId:h.trackId});break;default:throw new Error("unknown packet type: "+t)}this.state===m.NEED_HEADER_DATA&&this._tryGenerateHeader()},t.prototype.flush=function(){this.cachedPackets.length>0&&this._chunk()},t.prototype._checkIfNeedHeaderData=function(){this.trackStates.some(function(t){return t.trackInfo.codecId===l||t.trackInfo.codecId===g})?this.state=m.NEED_HEADER_DATA:this.state=m.CAN_GENERATE_HEADER},t.prototype._tryGenerateHeader=function(){var t=this.trackStates.every(function(t){switch(t.trackInfo.codecId){case l:case g:return t.initializationData.length>0;default:return!0}});if(t){for(var e=["isom"],n=1,r=1,o=[],s=0;s<this.trackStates.length;s++){var a,h=this.trackStates[s],f=h.trackInfo;switch(f.codecId){case l:var d=h.initializationData[0];a=new u.AudioSampleEntry("mp4a",n,f.channels,f.samplesize,f.samplerate);var _=new Uint8Array(41+d.length);_.set(i("0000000003808080"),0),_[8]=32+d.length,_.set(i("00020004808080"),9),_[16]=18+d.length,_.set(i("40150000000000FA000000000005808080"),17),_[34]=d.length,_.set(d,35),_.set(i("068080800102"),35+d.length),a.otherBoxes=[new u.RawTag("esds",_)];var y=d[0]>>3;h.mimeTypeCodec="mp4a.40."+y;break;case c:a=new u.AudioSampleEntry(".mp3",n,f.channels,f.samplesize,f.samplerate),h.mimeTypeCodec="mp3";break;case g:var v=h.initializationData[0];a=new u.VideoSampleEntry("avc1",r,f.width,f.height),a.otherBoxes=[new u.RawTag("avcC",v)];var E=v[1]<<16|v[2]<<8|v[3];h.mimeTypeCodec="avc1."+(16777216|E).toString(16).substr(1),e.push("iso2","avc1","mp41");break;case p:a=new u.VideoSampleEntry("VP6F",r,f.width,f.height),a.otherBoxes=[new u.RawTag("glbl",i("00"))],h.mimeTypeCodec="avc1.42001E";break;default:throw new Error("not supported track type")}var S,A=u.TrackHeaderFlags.TRACK_ENABLED|u.TrackHeaderFlags.TRACK_IN_MOVIE;h===this.audioTrackState?S=new u.TrackBox(new u.TrackHeaderBox(A,h.trackId,-1,0,0,1,s),new u.MediaBox(new u.MediaHeaderBox(f.timescale,-1,f.language),new u.HandlerBox("soun","SoundHandler"),new u.MediaInformationBox(new u.SoundMediaHeaderBox,new u.DataInformationBox(new u.DataReferenceBox([new u.DataEntryUrlBox(u.SELF_CONTAINED_DATA_REFERENCE_FLAG)])),new u.SampleTableBox(new u.SampleDescriptionBox([a]),new u.RawTag("stts",i("0000000000000000")),new u.RawTag("stsc",i("0000000000000000")),new u.RawTag("stsz",i("000000000000000000000000")),new u.RawTag("stco",i("0000000000000000")))))):h===this.videoTrackState&&(S=new u.TrackBox(new u.TrackHeaderBox(A,h.trackId,-1,f.width,f.height,0,s),new u.MediaBox(new u.MediaHeaderBox(f.timescale,-1,f.language),new u.HandlerBox("vide","VideoHandler"),new u.MediaInformationBox(new u.VideoMediaHeaderBox,new u.DataInformationBox(new u.DataReferenceBox([new u.DataEntryUrlBox(u.SELF_CONTAINED_DATA_REFERENCE_FLAG)])),new u.SampleTableBox(new u.SampleDescriptionBox([a]),new u.RawTag("stts",i("0000000000000000")),new u.RawTag("stsc",i("0000000000000000")),new u.RawTag("stsz",i("000000000000000000000000")),new u.RawTag("stco",i("0000000000000000"))))))),o.push(S)}var w=new u.MovieExtendsBox(null,[new u.TrackExtendsBox(1,1,0,0,0),new u.TrackExtendsBox(2,1,0,0,0)],null),T=new u.BoxContainerBox("udat",[new u.MetaBox(new u.RawTag("hdlr",i("00000000000000006D6469726170706C000000000000000000")),[new u.RawTag("ilst",i("00000025A9746F6F0000001D6461746100000001000000004C61766635342E36332E313034"))])]),b=new u.MovieHeaderBox(1e3,0,this.trackStates.length+1),P=new u.MovieBox(b,o,w,T),I=new u.FileTypeBox("isom",512,e),L=I.layout(0),O=P.layout(L),R=new Uint8Array(L+O);I.write(R),P.write(R),this.oncodecinfo(this.trackStates.map(function(t){return t.mimeTypeCodec})),this.ondata(R),this.filePos+=R.length,this.state=m.MAIN_PACKETS}},t.prototype._chunk=function(){var t=this.cachedPackets;if(E&&this.videoTrackState){for(var e=t.length-1,n=this.videoTrackState.trackId;e>0&&(t[e].trackId!==n||t[e].packet.frameType!==f.KEY);)e--;e>0&&(t=t.slice(0,e))}if(0!==t.length){for(var i=[],r=0,o=[],s=[],a=0;a<this.trackStates.length;a++){var h=this.trackStates[a],d=h.trackInfo,_=h.trackId,m=t.filter(function(t){return t.trackId===_});if(0!==m.length){var y,v,S,A=new u.TrackFragmentBaseMediaDecodeTimeBox(h.cachedDuration);switch(s.push(r),d.codecId){case l:case c:S=[];for(var e=0;e<m.length;e++){var w=m[e].packet,T=Math.round(w.samples*d.timescale/d.samplerate);i.push(w.data),r+=w.data.length,S.push({duration:T,size:w.data.length}),h.samplesProcessed+=w.samples}var b=u.TrackFragmentFlags.DEFAULT_SAMPLE_FLAGS_PRESENT;y=new u.TrackFragmentHeaderBox(b,_,0,0,0,0,u.SampleFlags.SAMPLE_DEPENDS_ON_NO_OTHERS);var P=u.TrackRunFlags.DATA_OFFSET_PRESENT|u.TrackRunFlags.SAMPLE_DURATION_PRESENT|u.TrackRunFlags.SAMPLE_SIZE_PRESENT;v=new u.TrackRunBox(P,S,0,0),h.cachedDuration=Math.round(h.samplesProcessed*d.timescale/d.samplerate);break;case g:case p:S=[];for(var I=h.samplesProcessed,L=I*d.timescale/d.framerate,O=Math.round(L),e=0;e<m.length;e++){var R=m[e].packet;I++;var D=Math.round(I*d.timescale/d.framerate),M=D-O;O=D;var k=Math.round(I*d.timescale/d.framerate+R.compositionTime*d.timescale/1e3);i.push(R.data),r+=R.data.length;var N=R.frameType===f.KEY?u.SampleFlags.SAMPLE_DEPENDS_ON_NO_OTHERS:u.SampleFlags.SAMPLE_DEPENDS_ON_OTHER|u.SampleFlags.SAMPLE_IS_NOT_SYNC;S.push({duration:M,size:R.data.length,flags:N,compositionTimeOffset:k-D})}var b=u.TrackFragmentFlags.DEFAULT_SAMPLE_FLAGS_PRESENT;y=new u.TrackFragmentHeaderBox(b,_,0,0,0,0,u.SampleFlags.SAMPLE_DEPENDS_ON_NO_OTHERS);var P=u.TrackRunFlags.DATA_OFFSET_PRESENT|u.TrackRunFlags.SAMPLE_DURATION_PRESENT|u.TrackRunFlags.SAMPLE_SIZE_PRESENT|u.TrackRunFlags.SAMPLE_FLAGS_PRESENT|u.TrackRunFlags.SAMPLE_COMPOSITION_TIME_OFFSET;v=new u.TrackRunBox(P,S,0,0),h.cachedDuration=O,h.samplesProcessed=I;break;default:throw new Error("Un codec")}var x=new u.TrackFragmentBox(y,A,v);o.push(x)}}this.cachedPackets.splice(0,t.length);for(var C=new u.MovieFragmentHeaderBox(++this.chunkIndex),F=new u.MovieFragmentBox(C,o),U=F.layout(0),B=new u.MediaDataBox(i),H=B.layout(U),j=U+8,a=0;a<o.length;a++)o[a].run.dataOffset=j+s[a];var G=new Uint8Array(U+H);F.write(G),B.write(G),this.ondata(G),this.filePos+=G.length}},t}();t.exports=S,S.MP3_SOUND_CODEC_ID=c,S.AAC_SOUND_CODEC_ID=l,S.TYPE_AUDIO_PACKET=y,S.TYPE_VIDEO_PACKET=v,S.Profiles={MP3_AUDIO_ONLY:{audioTrackId:0,videoTrackId:-1,tracks:[{codecId:S.MP3_SOUND_CODEC_ID,channels:2,samplerate:44100,samplesize:16,timescale:44100}]}}},function(t,e){function n(t){for(var e=new Uint8Array(4*t.length),n=0,i=0,r=t.length;r>i;i++){var o=t.charCodeAt(i);if(127>=o)e[n++]=o;else{if(o>=55296&&56319>=o){var s=t.charCodeAt(i+1);s>=56320&&57343>=s&&(o=((1023&o)<<10)+(1023&s)+65536,++i)}0!==(4292870144&o)?(e[n++]=248|o>>>24&3,e[n++]=128|o>>>18&63,e[n++]=128|o>>>12&63,e[n++]=128|o>>>6&63,e[n++]=128|63&o):0!==(4294901760&o)?(e[n++]=240|o>>>18&7,e[n++]=128|o>>>12&63,e[n++]=128|o>>>6&63,e[n++]=128|63&o):0!==(4294965248&o)?(e[n++]=224|o>>>12&15,e[n++]=128|o>>>6&63,e[n++]=128|63&o):(e[n++]=192|o>>>6&31,e[n++]=128|63&o)}}return e.subarray(0,n)}function i(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return Array.prototype.concat.apply(t,e)}function r(t,e,n){t[e]=n>>24&255,t[e+1]=n>>16&255,t[e+2]=n>>8&255,t[e+3]=255&n}function o(t){return t.charCodeAt(0)<<24|t.charCodeAt(1)<<16|t.charCodeAt(2)<<8|t.charCodeAt(3)}function s(t){return(t-d)/1e3|0}function a(t){return 65536*t|0}function u(t){return 1073741824*t|0}function h(t){return 256*t|0}function c(t){return(31&t.charCodeAt(0))<<10|(31&t.charCodeAt(1))<<5|31&t.charCodeAt(2)}var l,f=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)};t.exports=l={};var d=-20828448e5,p=[1,0,0,0,1,0,0,0,1],g=[0,0,0],_=function(){function t(t,e){this.boxtype=t,"uuid"===t&&(this.userType=e)}return t.prototype.layout=function(t){this.offset=t;var e=8;return this.userType&&(e+=16),this.size=e,e},t.prototype.write=function(t){return r(t,this.offset,this.size),r(t,this.offset+4,o(this.boxtype)),this.userType?(t.set(this.userType,this.offset+8),24):8},t.prototype.toUint8Array=function(){var t=this.layout(0),e=new Uint8Array(t);return this.write(e),e},t}();l.Box=_;var m=function(t){function e(e,n,i){void 0===n&&(n=0),void 0===i&&(i=0),t.call(this,e),this.version=n,this.flags=i}return f(e,t),e.prototype.layout=function(e){return this.size=t.prototype.layout.call(this,e)+4,this.size},e.prototype.write=function(e){var n=t.prototype.write.call(this,e);return r(e,this.offset+n,this.version<<24|this.flags),n+4},e}(_);l.FullBox=m;var y=function(t){function e(e,n,i){t.call(this,"ftype"),this.majorBrand=e,this.minorVersion=n,this.compatibleBrands=i}return f(e,t),e.prototype.layout=function(e){return this.size=t.prototype.layout.call(this,e)+4*(2+this.compatibleBrands.length),this.size},e.prototype.write=function(e){var n=this,i=t.prototype.write.call(this,e);return r(e,this.offset+i,o(this.majorBrand)),r(e,this.offset+i+4,this.minorVersion),i+=8,this.compatibleBrands.forEach(function(t){r(e,n.offset+i,o(t)),i+=4},this),i},e}(_);l.FileTypeBox=y;var v=function(t){function e(e,n){t.call(this,e),this.children=n}return f(e,t),e.prototype.layout=function(e){var n=t.prototype.layout.call(this,e);return this.children.forEach(function(t){t&&(n+=t.layout(e+n))}),this.size=n},e.prototype.write=function(e){var n=t.prototype.write.call(this,e);return this.children.forEach(function(t){t&&(n+=t.write(e))}),n},e}(_);l.BoxContainerBox=v;var E=function(t){function e(e,n,r,o){t.call(this,"moov",i([e],n,[r,o])),this.header=e,this.tracks=n,this.extendsBox=r,this.userData=o}return f(e,t),e}(v);l.MovieBox=E;var S=function(t){function e(e,n,i,r,o,s,a,u){void 0===r&&(r=1),void 0===o&&(o=1),void 0===s&&(s=p),void 0===a&&(a=d),void 0===u&&(u=d),t.call(this,"mvhd",0,0),this.timescale=e,this.duration=n,this.nextTrackId=i,this.rate=r,this.volume=o,this.matrix=s,this.creationTime=a,this.modificationTime=u}return f(e,t),e.prototype.layout=function(e){return this.size=t.prototype.layout.call(this,e)+16+4+2+2+8+36+24+4,this.size},e.prototype.write=function(e){var n=t.prototype.write.call(this,e);return r(e,this.offset+n,s(this.creationTime)),r(e,this.offset+n+4,s(this.modificationTime)),r(e,this.offset+n+8,this.timescale),r(e,this.offset+n+12,this.duration),n+=16,r(e,this.offset+n,a(this.rate)),r(e,this.offset+n+4,h(this.volume)<<16),r(e,this.offset+n+8,0),r(e,this.offset+n+12,0),n+=16,r(e,this.offset+n,a(this.matrix[0])),r(e,this.offset+n+4,a(this.matrix[1])),r(e,this.offset+n+8,a(this.matrix[2])),r(e,this.offset+n+12,a(this.matrix[3])),r(e,this.offset+n+16,a(this.matrix[4])),r(e,this.offset+n+20,a(this.matrix[5])),r(e,this.offset+n+24,u(this.matrix[6])),r(e,this.offset+n+28,u(this.matrix[7])),r(e,this.offset+n+32,u(this.matrix[8])),n+=36,r(e,this.offset+n,0),r(e,this.offset+n+4,0),r(e,this.offset+n+8,0),r(e,this.offset+n+12,0),r(e,this.offset+n+16,0),r(e,this.offset+n+20,0),n+=24,r(e,this.offset+n,this.nextTrackId),n+=4},e}(m);l.MovieHeaderBox=S,function(t){t[t.TRACK_ENABLED=1]="TRACK_ENABLED",t[t.TRACK_IN_MOVIE=2]="TRACK_IN_MOVIE",t[t.TRACK_IN_PREVIEW=4]="TRACK_IN_PREVIEW"}(l.TrackHeaderFlags||(l.TrackHeaderFlags={}));var A=(l.TrackHeaderFlags,function(t){function e(e,n,i,r,o,s,a,u,h,c,l){void 0===a&&(a=0),void 0===u&&(u=0),void 0===h&&(h=p),void 0===c&&(c=d),void 0===l&&(l=d),t.call(this,"tkhd",0,e),this.trackId=n,this.duration=i,this.width=r,this.height=o,this.volume=s,this.alternateGroup=a,this.layer=u,this.matrix=h,this.creationTime=c,this.modificationTime=l}return f(e,t),e.prototype.layout=function(e){return this.size=t.prototype.layout.call(this,e)+20+8+6+2+36+8,this.size},e.prototype.write=function(e){var n=t.prototype.write.call(this,e);return r(e,this.offset+n,s(this.creationTime)),r(e,this.offset+n+4,s(this.modificationTime)),r(e,this.offset+n+8,this.trackId),r(e,this.offset+n+12,0),r(e,this.offset+n+16,this.duration),n+=20,r(e,this.offset+n,0),r(e,this.offset+n+4,0),r(e,this.offset+n+8,this.layer<<16|this.alternateGroup),r(e,this.offset+n+12,h(this.volume)<<16),n+=16,r(e,this.offset+n,a(this.matrix[0])),r(e,this.offset+n+4,a(this.matrix[1])),r(e,this.offset+n+8,a(this.matrix[2])),r(e,this.offset+n+12,a(this.matrix[3])),r(e,this.offset+n+16,a(this.matrix[4])),r(e,this.offset+n+20,a(this.matrix[5])),r(e,this.offset+n+24,u(this.matrix[6])),r(e,this.offset+n+28,u(this.matrix[7])),r(e,this.offset+n+32,u(this.matrix[8])),n+=36,r(e,this.offset+n,a(this.width)),r(e,this.offset+n+4,a(this.height)),n+=8},e}(m));l.TrackHeaderBox=A;var w=function(t){function e(e,n,i,r,o){void 0===i&&(i="unk"),void 0===r&&(r=d),void 0===o&&(o=d),t.call(this,"mdhd",0,0),this.timescale=e,this.duration=n,this.language=i,this.creationTime=r,this.modificationTime=o}return f(e,t),e.prototype.layout=function(e){return this.size=t.prototype.layout.call(this,e)+16+4,this.size},e.prototype.write=function(e){var n=t.prototype.write.call(this,e);return r(e,this.offset+n,s(this.creationTime)),r(e,this.offset+n+4,s(this.modificationTime)),r(e,this.offset+n+8,this.timescale),r(e,this.offset+n+12,this.duration),r(e,this.offset+n+16,c(this.language)<<16),n+20},e}(m);l.MediaHeaderBox=w;var T=function(t){function e(e,i){t.call(this,"hdlr",0,0),this.handlerType=e,this.name=i,this._encodedName=n(this.name)}return f(e,t),e.prototype.layout=function(e){return this.size=t.prototype.layout.call(this,e)+8+12+(this._encodedName.length+1),this.size},e.prototype.write=function(e){var n=t.prototype.write.call(this,e);return r(e,this.offset+n,0),r(e,this.offset+n+4,o(this.handlerType)),r(e,this.offset+n+8,0),r(e,this.offset+n+12,0),r(e,this.offset+n+16,0),n+=20,e.set(this._encodedName,this.offset+n),e[this.offset+n+this._encodedName.length]=0,n+=this._encodedName.length+1},e}(m);l.HandlerBox=T;var b=function(t){function e(e){void 0===e&&(e=0),t.call(this,"smhd",0,0),this.balance=e}return f(e,t),e.prototype.layout=function(e){return this.size=t.prototype.layout.call(this,e)+4,this.size},e.prototype.write=function(e){var n=t.prototype.write.call(this,e);return r(e,this.offset+n,h(this.balance)<<16),n+4},e}(m);l.SoundMediaHeaderBox=b;var P=function(t){function e(e,n){void 0===e&&(e=0),void 0===n&&(n=g),t.call(this,"vmhd",0,0),this.graphicsMode=e,this.opColor=n}return f(e,t),e.prototype.layout=function(e){return this.size=t.prototype.layout.call(this,e)+8,this.size},e.prototype.write=function(e){var n=t.prototype.write.call(this,e);return r(e,this.offset+n,this.graphicsMode<<16|this.opColor[0]),r(e,this.offset+n+4,this.opColor[1]<<16|this.opColor[2]),n+8},e}(m);l.VideoMediaHeaderBox=P,l.SELF_CONTAINED_DATA_REFERENCE_FLAG=1;var I=function(t){function e(e,i){void 0===i&&(i=null),t.call(this,"url ",0,e),this.location=i,e&l.SELF_CONTAINED_DATA_REFERENCE_FLAG||(this._encodedLocation=n(i))}return f(e,t),e.prototype.layout=function(e){var n=t.prototype.layout.call(this,e);return this._encodedLocation&&(n+=this._encodedLocation.length+1),this.size=n},e.prototype.write=function(e){var n=t.prototype.write.call(this,e);return this._encodedLocation&&(e.set(this._encodedLocation,this.offset+n),e[this.offset+n+this._encodedLocation.length]=0,n+=this._encodedLocation.length),n},e}(m);l.DataEntryUrlBox=I;var L=function(t){function e(e){t.call(this,"dref",0,0),this.entries=e}return f(e,t),e.prototype.layout=function(e){var n=t.prototype.layout.call(this,e)+4;return this.entries.forEach(function(t){n+=t.layout(e+n)}),this.size=n},e.prototype.write=function(e){var n=t.prototype.write.call(this,e);return r(e,this.offset+n,this.entries.length),this.entries.forEach(function(t){n+=t.write(e)}),n},e}(m);l.DataReferenceBox=L;var O=function(t){function e(e){t.call(this,"dinf",[e]),this.dataReference=e}return f(e,t),e}(v);l.DataInformationBox=O;var R=function(t){function e(e){t.call(this,"stsd",0,0),this.entries=e}return f(e,t),e.prototype.layout=function(e){var n=t.prototype.layout.call(this,e);return n+=4,this.entries.forEach(function(t){n+=t.layout(e+n)}),this.size=n},e.prototype.write=function(e){var n=t.prototype.write.call(this,e);return r(e,this.offset+n,this.entries.length),n+=4,this.entries.forEach(function(t){n+=t.write(e)}),n},e}(m);l.SampleDescriptionBox=R;var D=function(t){function e(e,n,i,r,o){t.call(this,"stbl",[e,n,i,r,o]),this.sampleDescriptions=e,this.timeToSample=n,this.sampleToChunk=i,this.sampleSizes=r,this.chunkOffset=o}return f(e,t),e}(v);l.SampleTableBox=D;var M=function(t){function e(e,n,i){t.call(this,"minf",[e,n,i]),this.header=e,this.info=n,this.sampleTable=i}return f(e,t),e}(v);l.MediaInformationBox=M;var k=function(t){function e(e,n,i){t.call(this,"mdia",[e,n,i]),this.header=e,this.handler=n,this.info=i}return f(e,t),e}(v);l.MediaBox=k;var N=function(t){function e(e,n){t.call(this,"trak",[e,n]),this.header=e,this.media=n}return f(e,t),e}(v);l.TrackBox=N;var x=function(t){function e(e,n,i,r,o){t.call(this,"trex",0,0),this.trackId=e,this.defaultSampleDescriptionIndex=n,this.defaultSampleDuration=i,this.defaultSampleSize=r,this.defaultSampleFlags=o}return f(e,t),e.prototype.layout=function(e){return this.size=t.prototype.layout.call(this,e)+20,this.size},e.prototype.write=function(e){var n=t.prototype.write.call(this,e);return r(e,this.offset+n,this.trackId),r(e,this.offset+n+4,this.defaultSampleDescriptionIndex),r(e,this.offset+n+8,this.defaultSampleDuration),r(e,this.offset+n+12,this.defaultSampleSize),r(e,this.offset+n+16,this.defaultSampleFlags),n+20},e}(m);l.TrackExtendsBox=x;var C=function(t){function e(e,n,r){t.call(this,"mvex",i([e],n,[r])),this.header=e,this.tracDefaults=n,this.levels=r}return f(e,t),e}(v);l.MovieExtendsBox=C;var F=function(t){function e(e,n){t.call(this,"meta",0,0),this.handler=e,this.otherBoxes=n}return f(e,t),e.prototype.layout=function(e){var n=t.prototype.layout.call(this,e);return n+=this.handler.layout(e+n),this.otherBoxes.forEach(function(t){n+=t.layout(e+n)}),this.size=n},e.prototype.write=function(e){var n=t.prototype.write.call(this,e);return n+=this.handler.write(e),this.otherBoxes.forEach(function(t){n+=t.write(e)}),n},e}(m);l.MetaBox=F;var U=function(t){function e(e){t.call(this,"mfhd",0,0),this.sequenceNumber=e}return f(e,t),e.prototype.layout=function(e){return this.size=t.prototype.layout.call(this,e)+4,this.size},e.prototype.write=function(e){var n=t.prototype.write.call(this,e);return r(e,this.offset+n,this.sequenceNumber),n+4},e}(m);l.MovieFragmentHeaderBox=U,function(t){t[t.BASE_DATA_OFFSET_PRESENT=1]="BASE_DATA_OFFSET_PRESENT",t[t.SAMPLE_DESCRIPTION_INDEX_PRESENT=2]="SAMPLE_DESCRIPTION_INDEX_PRESENT",t[t.DEFAULT_SAMPLE_DURATION_PRESENT=8]="DEFAULT_SAMPLE_DURATION_PRESENT",t[t.DEFAULT_SAMPLE_SIZE_PRESENT=16]="DEFAULT_SAMPLE_SIZE_PRESENT",t[t.DEFAULT_SAMPLE_FLAGS_PRESENT=32]="DEFAULT_SAMPLE_FLAGS_PRESENT"}(l.TrackFragmentFlags||(l.TrackFragmentFlags={}));var B=l.TrackFragmentFlags,H=function(t){function e(e,n,i,r,o,s,a){t.call(this,"tfhd",0,e),this.trackId=n,this.baseDataOffset=i,this.sampleDescriptionIndex=r,this.defaultSampleDuration=o,this.defaultSampleSize=s,this.defaultSampleFlags=a}return f(e,t),e.prototype.layout=function(e){var n=t.prototype.layout.call(this,e)+4,i=this.flags;return i&B.BASE_DATA_OFFSET_PRESENT&&(n+=8),i&B.SAMPLE_DESCRIPTION_INDEX_PRESENT&&(n+=4),i&B.DEFAULT_SAMPLE_DURATION_PRESENT&&(n+=4),i&B.DEFAULT_SAMPLE_SIZE_PRESENT&&(n+=4),i&B.DEFAULT_SAMPLE_FLAGS_PRESENT&&(n+=4),this.size=n},e.prototype.write=function(e){var n=t.prototype.write.call(this,e),i=this.flags;return r(e,this.offset+n,this.trackId),n+=4,i&B.BASE_DATA_OFFSET_PRESENT&&(r(e,this.offset+n,0),r(e,this.offset+n+4,this.baseDataOffset),n+=8),i&B.SAMPLE_DESCRIPTION_INDEX_PRESENT&&(r(e,this.offset+n,this.sampleDescriptionIndex),n+=4),i&B.DEFAULT_SAMPLE_DURATION_PRESENT&&(r(e,this.offset+n,this.defaultSampleDuration),n+=4),i&B.DEFAULT_SAMPLE_SIZE_PRESENT&&(r(e,this.offset+n,this.defaultSampleSize),n+=4),i&B.DEFAULT_SAMPLE_FLAGS_PRESENT&&(r(e,this.offset+n,this.defaultSampleFlags),n+=4),n},e}(m);l.TrackFragmentHeaderBox=H;
var j=function(t){function e(e){t.call(this,"tfdt",0,0),this.baseMediaDecodeTime=e}return f(e,t),e.prototype.layout=function(e){return this.size=t.prototype.layout.call(this,e)+4,this.size},e.prototype.write=function(e){var n=t.prototype.write.call(this,e);return r(e,this.offset+n,this.baseMediaDecodeTime),n+4},e}(m);l.TrackFragmentBaseMediaDecodeTimeBox=j;var G=function(t){function e(e,n,i){t.call(this,"traf",[e,n,i]),this.header=e,this.decodeTime=n,this.run=i}return f(e,t),e}(v);l.TrackFragmentBox=G,function(t){t[t.IS_LEADING_MASK=201326592]="IS_LEADING_MASK",t[t.SAMPLE_DEPENDS_ON_MASK=50331648]="SAMPLE_DEPENDS_ON_MASK",t[t.SAMPLE_DEPENDS_ON_OTHER=16777216]="SAMPLE_DEPENDS_ON_OTHER",t[t.SAMPLE_DEPENDS_ON_NO_OTHERS=33554432]="SAMPLE_DEPENDS_ON_NO_OTHERS",t[t.SAMPLE_IS_DEPENDED_ON_MASK=12582912]="SAMPLE_IS_DEPENDED_ON_MASK",t[t.SAMPLE_HAS_REDUNDANCY_MASK=3145728]="SAMPLE_HAS_REDUNDANCY_MASK",t[t.SAMPLE_PADDING_VALUE_MASK=917504]="SAMPLE_PADDING_VALUE_MASK",t[t.SAMPLE_IS_NOT_SYNC=65536]="SAMPLE_IS_NOT_SYNC",t[t.SAMPLE_DEGRADATION_PRIORITY_MASK=65535]="SAMPLE_DEGRADATION_PRIORITY_MASK"}(l.SampleFlags||(l.SampleFlags={})),l.SampleFlags,!function(t){t[t.DATA_OFFSET_PRESENT=1]="DATA_OFFSET_PRESENT",t[t.FIRST_SAMPLE_FLAGS_PRESENT=4]="FIRST_SAMPLE_FLAGS_PRESENT",t[t.SAMPLE_DURATION_PRESENT=256]="SAMPLE_DURATION_PRESENT",t[t.SAMPLE_SIZE_PRESENT=512]="SAMPLE_SIZE_PRESENT",t[t.SAMPLE_FLAGS_PRESENT=1024]="SAMPLE_FLAGS_PRESENT",t[t.SAMPLE_COMPOSITION_TIME_OFFSET=2048]="SAMPLE_COMPOSITION_TIME_OFFSET"}(l.TrackRunFlags||(l.TrackRunFlags={}));var Y=l.TrackRunFlags,V=function(t){function e(e,n,i,r){t.call(this,"trun",1,e),this.samples=n,this.dataOffset=i,this.firstSampleFlags=r}return f(e,t),e.prototype.layout=function(e){var n=t.prototype.layout.call(this,e)+4,i=this.samples.length,r=this.flags;return r&Y.DATA_OFFSET_PRESENT&&(n+=4),r&Y.FIRST_SAMPLE_FLAGS_PRESENT&&(n+=4),r&Y.SAMPLE_DURATION_PRESENT&&(n+=4*i),r&Y.SAMPLE_SIZE_PRESENT&&(n+=4*i),r&Y.SAMPLE_FLAGS_PRESENT&&(n+=4*i),r&Y.SAMPLE_COMPOSITION_TIME_OFFSET&&(n+=4*i),this.size=n},e.prototype.write=function(e){var n=t.prototype.write.call(this,e),i=this.samples.length,o=this.flags;r(e,this.offset+n,i),n+=4,o&Y.DATA_OFFSET_PRESENT&&(r(e,this.offset+n,this.dataOffset),n+=4),o&Y.FIRST_SAMPLE_FLAGS_PRESENT&&(r(e,this.offset+n,this.firstSampleFlags),n+=4);for(var s=0;i>s;s++){var a=this.samples[s];o&Y.SAMPLE_DURATION_PRESENT&&(r(e,this.offset+n,a.duration),n+=4),o&Y.SAMPLE_SIZE_PRESENT&&(r(e,this.offset+n,a.size),n+=4),o&Y.SAMPLE_FLAGS_PRESENT&&(r(e,this.offset+n,a.flags),n+=4),o&Y.SAMPLE_COMPOSITION_TIME_OFFSET&&(r(e,this.offset+n,a.compositionTimeOffset),n+=4)}return n},e}(m);l.TrackRunBox=V;var z=function(t){function e(e,n){t.call(this,"moof",i([e],n)),this.header=e,this.trafs=n}return f(e,t),e}(v);l.MovieFragmentBox=z;var W=function(t){function e(e){t.call(this,"mdat"),this.chunks=e}return f(e,t),e.prototype.layout=function(e){var n=t.prototype.layout.call(this,e);return this.chunks.forEach(function(t){n+=t.length}),this.size=n},e.prototype.write=function(e){var n=this,i=t.prototype.write.call(this,e);return this.chunks.forEach(function(t){e.set(t,n.offset+i),i+=t.length},this),i},e}(_);l.MediaDataBox=W;var K=function(t){function e(e,n){t.call(this,e),this.dataReferenceIndex=n}return f(e,t),e.prototype.layout=function(e){return this.size=t.prototype.layout.call(this,e)+8,this.size},e.prototype.write=function(e){var n=t.prototype.write.call(this,e);return r(e,this.offset+n,0),r(e,this.offset+n+4,this.dataReferenceIndex),n+8},e}(_);l.SampleEntry=K;var q=function(t){function e(e,n,i,r,o,s){void 0===i&&(i=2),void 0===r&&(r=16),void 0===o&&(o=44100),void 0===s&&(s=null),t.call(this,e,n),this.channelCount=i,this.sampleSize=r,this.sampleRate=o,this.otherBoxes=s}return f(e,t),e.prototype.layout=function(e){var n=t.prototype.layout.call(this,e)+20;return this.otherBoxes&&this.otherBoxes.forEach(function(t){n+=t.layout(e+n)}),this.size=n},e.prototype.write=function(e){var n=t.prototype.write.call(this,e);return r(e,this.offset+n,0),r(e,this.offset+n+4,0),r(e,this.offset+n+8,this.channelCount<<16|this.sampleSize),r(e,this.offset+n+12,0),r(e,this.offset+n+16,this.sampleRate<<16),n+=20,this.otherBoxes&&this.otherBoxes.forEach(function(t){n+=t.write(e)}),n},e}(K);l.AudioSampleEntry=q,l.COLOR_NO_ALPHA_VIDEO_SAMPLE_DEPTH=24;var X=function(t){function e(e,n,i,r,o,s,a,u,h,c){if(void 0===o&&(o=""),void 0===s&&(s=72),void 0===a&&(a=72),void 0===u&&(u=1),void 0===h&&(h=l.COLOR_NO_ALPHA_VIDEO_SAMPLE_DEPTH),void 0===c&&(c=null),t.call(this,e,n),this.width=i,this.height=r,this.compressorName=o,this.horizResolution=s,this.vertResolution=a,this.frameCount=u,this.depth=h,this.otherBoxes=c,o.length>31)throw new Error("invalid compressor name")}return f(e,t),e.prototype.layout=function(e){var n=t.prototype.layout.call(this,e)+16+12+4+2+32+2+2;return this.otherBoxes&&this.otherBoxes.forEach(function(t){n+=t.layout(e+n)}),this.size=n},e.prototype.write=function(e){var n=t.prototype.write.call(this,e);r(e,this.offset+n,0),r(e,this.offset+n+4,0),r(e,this.offset+n+8,0),r(e,this.offset+n+12,0),n+=16,r(e,this.offset+n,this.width<<16|this.height),r(e,this.offset+n+4,a(this.horizResolution)),r(e,this.offset+n+8,a(this.vertResolution)),n+=12,r(e,this.offset+n,0),r(e,this.offset+n+4,this.frameCount<<16),n+=6,e[this.offset+n]=this.compressorName.length;for(var i=0;31>i;i++)e[this.offset+n+i+1]=i<this.compressorName.length?127&this.compressorName.charCodeAt(i):0;return n+=32,r(e,this.offset+n,this.depth<<16|65535),n+=4,this.otherBoxes&&this.otherBoxes.forEach(function(t){n+=t.write(e)}),n},e}(K);l.VideoSampleEntry=X;var $=function(t){function e(e,n){t.call(this,e),this.data=n}return f(e,t),e.prototype.layout=function(e){return this.size=t.prototype.layout.call(this,e)+this.data.length,this.size},e.prototype.write=function(e){var n=t.prototype.write.call(this,e);return e.set(this.data,this.offset+n),n+this.data.length},e}(_);l.RawTag=$},function(t,e,n){(function(e){var i,r=n(74),o=n(69),s=(o.BaseTransform,n(119));n(120),t.exports=i=function(){o.BaseParser.prototype.constructor.apply(this,arguments),this.parser=new s,this.parser.onFrame=this._onMp3Frame.bind(this),this.parser.onNoise=this._onNoise.bind(this),this.parser.onClose=this._onClose.bind(this),this._sampleRate=0,this._bitRate=0,this._timestamp=0},i.prototype=o.createBaseParser({constructor:i,_onMp3Frame:function(t,n,i){r("Found frame length "+t.length+" bitRate="+n+", sampleRate="+i);var s=new e(t),a=1152;s.meta={mimeType:"audio/mpeg",codecId:2,channels:2,bitRate:n,sampleRate:i,sampleSize:16},s.duration=a,s.timestamp=this._timestamp,this.enqueue(new o.Transfer(s,"buffer")),this._bitRate=n,this._timestamp+=a},_onNoise:function(){r("mp3 has noise")},_onClose:function(){r("parser closed")},_parse:function(t){return r("parse called"),t.data.empty?(r("empty transfer"),void this.enqueue(t)):void this.parser.push(new Uint8Array(t.data))}})}).call(e,n(70).Buffer)},function(t,e,n){var i=n(74),r=[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],o=[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],s=function(){function t(){this.buffer=null,this.bufferSize=0}return t.prototype.push=function(t){var e;if(this.bufferSize>0){var n=t.length+this.bufferSize;if(!this.buffer||this.buffer.length<n){var r=new Uint8Array(n);this.bufferSize>0&&r.set(this.buffer.subarray(0,this.bufferSize)),this.buffer=r}this.buffer.set(t,this.bufferSize),this.bufferSize=n,t=this.buffer,e=n}else e=t.length;i("push "+e);for(var o,s=0;e>s&&(o=this._parse(t,s,e))>0;)s+=o;var a=e-s;a>0&&(!this.buffer||this.buffer.length<a?this.buffer=new Uint8Array(t.subarray(s,e)):this.buffer.set(t.subarray(s,e))),this.bufferSize=a},t.prototype._parse=function(t,e,n){if(i("_parse"),e+2>n)return-1;if(255===t[e]||224===(224&t[e+1])){if(e+24>n)return-1;var s=t[e+1]>>3&3,a=t[e+1]>>1&3,u=t[e+2]>>4&15,h=t[e+2]>>2&3,c=!!(2&t[e+2]);if(1!==s&&0!==u&&15!==u&&3!==h){var l=3===s?3-a:3===a?3:4,f=1e3*r[14*l+u-1],d=3===s?0:2===s?1:2,p=o[3*d+h],g=c?1:0,_=3===a?(3===s?12:6)*f/p+g<<2:(3===s?144:72)*f/p+g|0;return e+_>n?-1:(this.onFrame&&(i("onFrame"),this.onFrame(t.subarray(e,e+_),f,p)),_)}}for(var m=e+2;n>m;){if(255===t[m-1]&&224===(224&t[m]))return this.onNoise&&this.onNoise(t.subarray(e,m-1)),m-e-1;m++}return-1},t.prototype.close=function(){this.bufferSize>0&&this.onNoise&&this.onNoise(this.buffer.subarray(0,this.bufferSize)),this.buffer=null,this.bufferSize=0,this.onClose&&this.onClose()},t}();t.exports=s},function(t,e){var n=1e9;t.exports={TIMESCALE_SECONDS:n}},function(t,e,n){var i,r=n(122),o=n(69),s=o.BaseSink,a=n(123);t.exports=i=function(t){if(s.prototype.constructor.call(this),!r.haveMediaSourceSupportMimeType(t))throw new Error("Local MediaSource doesn't support provided MIME type: "+t);var e;e=arguments.length>1?Array.prototype.slice.call(arguments):t instanceof Array?t:[t],this.mimeTypes=e,this.mediaSource=new MediaSource,this.mseWriter=new a(this.mediaSource),this.dataSources=[],this.selectedDataSourceIndex=0,this.mimeTypes.forEach(function(t){var e={mimeType:t};this.mseWriter.listen(e),this.dataSources.push(e)}.bind(this))},i.prototype=o.createBaseSink({constructor:i,_onData:function(){var t=this.dataSources[this.selectedDataSourceIndex];if(!t||!t.onData)throw new Error("DataSource is not existing or has no onData function defined");var e=this.dequeue();e&&t.onData(e.data)},getMediaSourceUrl:function(){return URL.createObjectURL(this.mediaSource)}})},function(t,e){var n;t.exports=n={haveGlobalWindow:function(){return"undefined"!=typeof window},haveMediaSourceExtensions:function(){return n.haveGlobalWindow()&&window.MediaSource},haveMediaSourceSupportMimeType:function(t){return n.haveMediaSourceExtensions()&&window.MediaSource.isTypeSupported(t)}}},function(t,e){var n=function(){function t(t,e){this.mediaSource=t,this.dataSource=e,this.dataSource.onData=this.pushData.bind(this),this.updateEnabled=!1,this.buffer=[],this.sourceBuffer=null,this.sourceBufferUpdatedBound=null}return t.prototype.allowWriting=function(){this.updateEnabled=!0,this.update()},t.prototype.pushData=function(t){this.buffer.push(t),this.update()},t.prototype.update=function(){if(this.updateEnabled&&0!==this.buffer.length){this.sourceBuffer||(this.sourceBuffer=this.mediaSource.addSourceBuffer(this.dataSource.mimeType),this.sourceBufferUpdatedBound=this._sourceBufferUpdated.bind(this),this.sourceBuffer.addEventListener("update",this.sourceBufferUpdatedBound)),this.updateEnabled=!1;var t=this.buffer.shift();if(null===t)return void this.sourceBuffer.removeEventListener("update",this.sourceBufferUpdatedBound);t.timestamp&&(this.sourceBuffer.timestampOffset=t.timestamp/1e9),this.sourceBuffer.appendBuffer(t)}},t.prototype._sourceBufferUpdated=function(t){this.updateEnabled=!0,this.update()},t.prototype.finish=function(){this.buffer.push(null),this.update()},t}(),i=function(){function t(t){this.bufferWriters=[],this.mediaSource=t,this.mediaSourceOpened=!1,this.mediaSource.addEventListener("sourceopen",function(t){this.mediaSourceOpened=!0,this.bufferWriters.forEach(function(t){t.allowWriting()})}.bind(this)),this.mediaSource.addEventListener("sourceend",function(t){this.mediaSourceOpened=!1}.bind(this))}return t.prototype.listen=function(t){var e=new n(this.mediaSource,t);this.bufferWriters.push(e),this.mediaSourceOpened&&e.allowWriting()},t}();t.exports=i},function(t,e,n){var i,r,o=n(69);r=function(t){o.BasePushSrc.prototype.constructor.call(this);var e=this.req=new XMLHttpRequest;e.open("GET",t,!0),e.responseType="arraybuffer",e.onload=function(t){this.enqueue(new o.Transfer(new Uint8Array(e.response),"binary")),this.enqueue(new o.Transfer(null,"binary"))}.bind(this),e.send()},r.prototype=o.createBasePushSrc({constructor:r}),t.exports=i={Src:r}},function(t,e,n){var i,r,o,s=n(69),a=n(126);n(76),r=function(t,e){s.prototype.constructor.call(this);var n=a.createReadStream(t,e);this.on("end",function(){n.close()}),this.addOutput(n)},r.prototype=s.create({constructor:r}),o=function(t,e){s.prototype.constructor.call(this);var n=a.createWriteStream(t,e);this.on("finish",function(){n.close()}),this.addInput(n)},o.prototype=s.create({constructor:o}),t.exports=i={Src:r,Sink:o}},function(t,e,n){var i=n(122);t.exports=i.haveGlobalWindow()?new(n(127)):n(!function(){var t=new Error('Cannot find module "fs"');throw t.code="MODULE_NOT_FOUND",t}())},function(t,e,n){var i;i=function(){function t(){return!1}function e(t){return!(!(t&&t.data instanceof Object)||n(t))}function n(t){return!!(t&&t.data instanceof ArrayBuffer)}function i(t,n){var i,r=t.length,o=n;for(i=0;r>i;++i){if(!e(o))throw new Error("ENOENT");o=o.data[t[i]]}return o}String.prototype.trim||!function(){var t=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;String.prototype.trim=function(){return this.replace(t,"")}}();var r=function(){var t=Date.now();this.root={mtime:t,ctime:t,atime:t,data:{}}};return r.prototype.join=function(){var t=[],e=arguments||[];return t=this.parse(Array.prototype.slice.call(e).join("/")),("/"===e[0][0]?"/":"")+t.join("/")},r.prototype.parse=function(t){var e=[];return t=t||"/",t.split(/\/+/).forEach(function(t){t=t.trim(),t.length&&"."!==t&&(".."===t?e.pop():e.push(t))}),e},r.prototype.fileSizeSI=function(t,e,n,i,r){return(e=Math,n=e.log,i=1e3,r=n(t)/n(i)|0,t/e.pow(i,r)).toFixed(r?2:0)+" "+(r?"kMGTPEZY"[--r]+"B":"Bytes")},r.prototype.fileSizeIEC=function(t,e,n,i,r){return(e=Math,n=e.log,i=1024,r=n(t)/n(i)|0,t/e.pow(i,r)).toFixed(r?2:0)+" "+(r?"KMGTPEZY"[--r]+"iB":"Bytes")},r.prototype.statSync=function(n){var r=this.parse(n),o=i(r,this.root),s=e(o);if(!o||!o.data)throw new Error("ENOENT");return{size:s?Object.keys(o.data).length:o.data.byteLength,ctime:new Date(o.ctime),mtime:new Date(o.mtime),atime:new Date(o.atime),isFile:function(){return!s},isDirectory:function(){return s},isBlockDevice:t,isCharacterDevice:t,isSymbolicLink:t,isFIFO:t,isSocket:t}},r.prototype.existsSync=function(t){var n,i=this.parse(t),r=i.length,o=this.root;for(n=0;r>n;++n){if(!e(o))return!1;o=o.data[i[n]]}return!!o},r.prototype.mkdirSync=function(t){var n=this.parse(t),r=i(n.slice(0,n.length-1),this.root),o=Date.now();if(!n.length||!e(r))throw new Error("ENODIR");r.data[n[n.length-1]]={data:{},ctime:o,mtime:o,atime:o},r.mtime=o},r.prototype.mkdirpSync=function(t){var r,o,s,a=this.parse(t),u=a.length;if(!a.length)throw new Error("ENODIR");for(o=0;u>o;++o){if(r=a.slice(0,o+1),s=i(r,this.root),n(s))throw new Error("ENODIR");e(s)||this.mkdirSync(r.join("/"))}},r.prototype.readdirSync=function(t){var n=this.parse(t),r=i(n,this.root);if(!e(r))throw new Error("ENODIR");return r.atime=Date.now(),Object.keys(r.data)},r.prototype.rmdirSync=function(t){var n=this.parse(t),r=i(n,this.root);if(dirname=n.pop(),parentDir=i(n,this.root),!e(r))throw new Error("ENODIR");if(Object.keys(r.data).length)throw new Error("ENOTEMPTY");delete parentDir.data[dirname],parentDir.mtime=Date.now()},r.prototype.rmrfSync=function(t){var n=this.parse(t),r=n.pop(),o=i(n,this.root);if(!e(o))throw new Error("ENODIR");r?delete o.data[r]:o.data={},o.mtime=Date.now()},r.prototype.writeFileSync=function(t,n,r){var o,s,a=this.parse(t),u=a.pop(),h=this.existsSync(t),c=i(a,this.root);if(!e(c))throw new Error("ENODIR");if(!u)throw new Error("EINVALIDPATH");if(r=r||{encoding:!0},"string"==typeof n){o=new ArrayBuffer(2*n.length);for(var l=new Uint16Array(o),f=0,d=n.length;d>f;++f)l[f]=n.charCodeAt(f)}else o=n;s=Date.now(),c.data[u]={data:o,ctime:s,mtime:s,atime:s},h||(c.mtime=s),c.atime=s},r.prototype.readFileSync=function(t,e){var r=this.parse(t),o=i(r,this.root),e=e||{encoding:!1};if(!n(o))throw new Error("ENOENT");return o.atime=Date.now(),e.encoding?String.fromCharCode.apply(null,new Uint16Array(o.data)):o.data},r.prototype.renameSync=function(t,n){var r=this.parse(t),o=i(r,this.root),s=i(r.slice(0,r.length-1),this.root),a=r[r.length-1],u=this.parse(n),h=i(u,this.root),c=i(u.slice(0,u.length-1),this.root),l=u[u.length-1],f=Date.now();if(!r.length||!u.length)throw new Error("ENOENT");if(!e(s||!e(c)))throw new Error("ENODIR");if(h)throw new Error("EEXISTS");c.data[l]=h=o,h.ctime=f,c.mtime=f,delete s.data[a],s.mtime=f},["stat","exists","readdir","mkdirp","mkdir","rmdir","rmrf","unlink"].forEach(function(t){r.prototype[t]=function(e,n){try{var i=this[t+"Sync"](e)}catch(r){return n(r)}return n(null,i)}}),["writeFile","readFile"].forEach(function(t){r.prototype[t]=function(e,n,i){i||(i=n,n=void 0);try{var r=this[t+"Sync"](e,n)}catch(o){return i(o)}return i(null,r)}}),["rename"].forEach(function(t){r.prototype[t]=function(e,n,i){try{var r=this[t+"Sync"](e,n)}catch(o){return i(o)}return i(null,r)}}),r}.call(e,n,e,t),!(void 0!==i&&(t.exports=i))},function(t,e){var n={HTTP:"http",RTMP:"rtmp",HLS:"hls"};t.exports=n},function(t,e){t.exports={AAC:"audio/aac",M3U8:"application/x-mpegURL",HLS:"application/vnd.apple.mpegurl",MP4A:"audio/mp4",MP3:"audio/mpeg",OGG:"audio/ogg",WAV:"audio/wav",WEBMA:"audio/webm",getTypeByExtension:function(t){var e={mp3:this.MP3,aac:this.AAC,mp4:this.MP4A,mp4a:this.MP4A,ogg:this.OGG,oga:this.OGG,opus:this.OGG,webm:this.WEBM,wav:this.WAV,m3u8:this.M3U8};return e[t]||null}}},function(t,e,n,i,r,o){function s(t,e,n){for(var i=-1,r=h(e),o=r.length;++i<o;){var s=r[i],a=t[s],u=n(a,e[s],s,t,e);(u===u?u===a:a!==a)&&(void 0!==a||s in t)||(t[s]=u)}return t}var a=n(i),u=n(r),h=n(o),c=u(function(t,e,n){return n?s(t,e,n):a(t,e)});t.exports=c},function(t,e,n,i,r){function o(t,e){return null==e?t:s(e,a(e),t)}var s=n(i),a=n(r);t.exports=o},function(t,e,n,i,r,o){function s(t){return function(e){return null==e?void 0:e[t]}}function a(t){return null!=t&&h(S(t))}function u(t,e){return t="number"==typeof t||_.test(t)?+t:-1,e=null==e?E:e,t>-1&&t%1==0&&e>t}function h(t){return"number"==typeof t&&t>-1&&t%1==0&&E>=t}function c(t){for(var e=f(t),n=e.length,i=n&&t.length,r=!!i&&h(i)&&(g(t)||p(t)),o=-1,s=[];++o<n;){var a=e[o];(r&&u(a,i)||y.call(t,a))&&s.push(a)}return s}function l(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function f(t){if(null==t)return[];l(t)||(t=Object(t));var e=t.length;e=e&&h(e)&&(g(t)||p(t))&&e||0;for(var n=t.constructor,i=-1,r="function"==typeof n&&n.prototype===t,o=Array(e),s=e>0;++i<e;)o[i]=i+"";for(var a in t)s&&u(a,e)||"constructor"==a&&(r||!y.call(t,a))||o.push(a);return o}var d=n(i),p=n(r),g=n(o),_=/^\d+$/,m=Object.prototype,y=m.hasOwnProperty,v=d(Object,"keys"),E=9007199254740991,S=s("length"),A=v?function(t){var e=null==t?void 0:t.constructor;return"function"==typeof e&&e.prototype===t||"function"!=typeof t&&a(t)?c(t):l(t)?v(t):[]}:c;t.exports=A},function(t,e,n,i,r,o){function s(t){return h(function(e,n){var i=-1,r=null==e?0:n.length,o=r>2?n[r-2]:void 0,s=r>2?n[2]:void 0,h=r>1?n[r-1]:void 0;for("function"==typeof o?(o=a(o,h,5),r-=2):(o="function"==typeof h?h:void 0,r-=o?1:0),s&&u(n[0],n[1],s)&&(o=3>r?void 0:o,r=1);++i<r;){var c=n[i];c&&t(e,c,o)}return e})}var a=n(i),u=n(r),h=n(o);t.exports=s},function(t,e,n,i){function r(t,e){return p(t,e,l)}function o(t){return function(e){return null==e?void 0:e[t]}}function s(t,e){return function(n,i){var r=n?g(n):0;if(!u(r))return t(n,i);for(var o=e?r:-1,s=h(n);(e?o--:++o<r)&&i(s[o],o,s)!==!1;);return n}}function a(t){return function(e,n,i){for(var r=h(e),o=i(e),s=o.length,a=t?s:-1;t?a--:++a<s;){var u=o[a];if(n(r[u],u,r)===!1)break}return e}}function u(t){return"number"==typeof t&&t>-1&&t%1==0&&f>=t}function h(t){return c(t)?t:Object(t)}function c(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}var l=n(i),f=9007199254740991,d=s(r),p=a(),g=o("length");t.exports=d}]))},function(t,e,n){var i=n(22),r=function(t,e){var n=e||{},r=n.bufferLen||4096,o=n.numChannels||2;this.context=t.context,this.node=(this.context.createScriptProcessor||this.context.createJavaScriptNode).call(this.context,r,o,o);var s=new i;s.postMessage({command:"init",config:{sampleRate:this.context.sampleRate,numChannels:o}});var a,u=!1;this.node.onaudioprocess=function(t){if(u){for(var e=[],n=0;o>n;n++)e.push(t.inputBuffer.getChannelData(n));s.postMessage({command:"record",buffer:e})}},this.configure=function(t){for(var e in t)t.hasOwnProperty(e)&&(n[e]=t[e])},this.record=function(){u=!0},this.stop=function(){u=!1},this.clear=function(){s.postMessage({command:"clear"})},this.getBuffer=function(t){a=t||n.callback,s.postMessage({command:"getBuffer"})},this.exportWAV=function(t,e){if(a=t||n.callback,e=e||n.type||"audio/wav",!a)throw new Error("Callback not set");s.postMessage({command:"exportWAV",type:e})},s.onmessage=function(t){var e=t.data;a(e)},t.connect(this.node),this.node.connect(this.context.destination)};r.forceDownload=function(t,e){var n=(window.URL||window.webkitURL).createObjectURL(t),i=window.document.createElement("a");i.href=n,i.download=e||"output.wav";var r=document.createEvent("Event");r.initEvent("click",!0,!0),i.dispatchEvent(r)},t.exports=r},function(t,e){t.exports=function(t){function e(i){if(n[i])return n[i].exports;var r=n[i]={exports:{},id:i,loaded:!1};return t[i].call(r.exports,r,r.exports,e),r.loaded=!0,r.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){function i(){return this._hooksPause.every(function(t){return t.call()})}function r(t){var e=t.resource_id||t.id||t.cid;if(!e)throw new Error("Your model should have a unique `id`, `cid` or `resource_id` property");return e}function o(t){C=t,t&&(x.AudioManagerStates=t.States)}function s(){var t=G();return p.call(this,!0).done(function(e){t.resolve(e.url)}).fail(function(){t.reject()}),t.promise()}function a(t){var e,n=this.options;return e={id:this.getId(),src:t.url,duration:$.result(n.duration),title:this.options.title,mimeType:t.mimeType,forceSingle:n.useSinglePlayer},C.createAudioPlayer(e,{streamUrlProvider:s.bind(this)})}function u(t,e){var n=e?"on":"off";t[n]("state-change",L,this)[n]("position-change",c,this)[n]("metadata",h,this)}function h(){this.trigger(Y.METADATA)}function c(){this._prevPosition!==this.currentTime()&&(this.trigger(Y.TIME),this._prevPosition=this.currentTime())}function l(){this._initAudioDefer&&(this._initAudioDefer.reject(),this._initAudioDefer=null,this.streamInfo=null)}function f(){l.call(this),this.controller&&(this._storedPosition=this.currentTime(),this.controller.kill(),this.controller=null,this.trigger(Y.RESET))}function d(){this._registerPlays=!0,this.pause(),this.trigger(Y.FINISH)}function p(t){var e=G(),n=this.streamInfo&&!t;return n?e.resolve(this.streamInfo):g.call(this).done(function(t){var n=q.choosePreferredStream(t,this.options);n?e.resolve(n):(this.trigger(Y.NO_PROTOCOL),F.warn("(%s) Could not match a protocol of given media descriptor to one of the supported protocols (%s), aborting attempt to play.",this.getId(),this.options.protocols),e.reject())}.bind(this)).fail(function(t){F.warn("(%s) Stream request failed with status: %d",this.getId(),t.status),_.call(this,t),m.call(this,t),e.reject()}.bind(this)),e.promise()}function g(){if(this.options.streamUrls&&!this._usedPrefetchUrls){var t,e=G();return this._usedPrefetchUrls=!0,t=$.result(this.options.streamUrls),e.resolve(t),e.promise()}return this.ajax({type:"GET",url:$.result(this.options.streamUrlsEndpoint),dataType:"json",async:this.options.asyncFetch,timeout:this.options.asyncFetch?nt:et})}function _(t){var e=t.status>=400&&-1!==(t.responseText||"").indexOf("geo_blocked");e&&this.trigger(Y.GEO_BLOCKED)}function m(t){0===t.status&&this.trigger(Y.NO_CONNECTION)}function y(){return this.controller&&this.controller.getCapabilities&&this.controller.getCapabilities()?this.controller.getCapabilities().needsUrlRefresh:!0}function v(t){if(!y.call(this))return!0;var e=this._initAudioDefer&&this._initAudioDefer.state(),n=q.streamValidForPlayingFrom(this.streamInfo,t);return this.controller&&this.controller.hasStreamUrlProvider&&this.controller.hasStreamUrlProvider()?!0:e&&("pending"===e||"resolved"===e&&n)}function E(t){t&&!this._bufferingTimeout?this._bufferingTimeout=window.setTimeout(function(){this._isBuffering=!0,this.trigger(Y.BUFFERRING_START)}.bind(this),it):t||(this._bufferingTimeout&&(window.clearTimeout(this._bufferingTimeout),this._bufferingTimeout=null),this._isBuffering&&(this._isBuffering=!1,this.trigger(Y.BUFFERRING_END)))}function S(){this.off(Y.TIME,this.seekTimeEventHandler),this.trigger(Y.SEEKED),this.seekTimeEventHandler=null}function A(){this._errorRecoveryFlagsResetTimeout=window.setTimeout(function(){this._errorRecoveryTime=null,this._errorRecoveryCounts=0}.bind(this),at)}function w(){this._errorRecoveryFlagsResetTimeout&&window.clearTimeout(this._errorRecoveryFlagsResetTimeout)}function T(){var t=this.isPlaying(),e=Date.now();return w.call(this),this._errorRecoveryTime&&this._errorRecoveryTime+ot>e&&this._errorRecoveryCounts>st?void this.trigger(Y.AUDIO_ERROR,this):(this._errorRecoveryTime=Date.now(),this._errorRecoveryCounts++,f.call(this),void(t&&this.play({seek:this.currentTime(),userInitiated:!1})))}function b(t){this.logAudioError({error_code:t,protocol:this.streamInfo?this.streamInfo.protocol:void 0,player_type:this.controller?this.controller.getType():void 0,host:this.streamInfo?X.getUrlHost(this.streamInfo.url):void 0,url:this.streamInfo?this.streamInfo.url:void 0})}function P(){var t,e=C.Errors;if(!this.controller)return F.error("(%s) Controller is null, aborting error handler.",this.getId(),this),b.call(this,null),void T.call(this);switch(t=this.controller&&this.controller.getErrorID(),F.error("(%s) %s",this.getId(),this.controller.getErrorMessage?this.controller.getErrorMessage():"Controller does not provide getErrorMessage()"),D(t,"MSE","GENERIC","HTML5_AUDIO_DECODE","HTML5_AUDIO_SRC_NOT_SUPPORTED","FLASH_PROXY","FLASH_RTMP_CONNECT_FAILED","FLASH_RTMP_CANNOT_PLAY_STREAM")&&b.call(this,t),t){case e.FLASH_PROXY_CANT_LOAD_FLASH:this.trigger(Y.FLASH_NOT_LOADED);break;case e.FLASH_PROXY_FLASH_BLOCKED:this.trigger(Y.FLASH_BLOCK);break;case e.FLASH_RTMP_CONNECT_FAILED:$.without(this.options.protocols,W.RTMP);case e.FLASH_RTMP_CANNOT_PLAY_STREAM:case e.FLASH_RTMP_CONNECT_CLOSED:case e.HTML5_AUDIO_NETWORK:case e.HTML5_AUDIO_ABORTED:case e.HTML5_AUDIO_DECODE:case e.HTML5_AUDIO_SRC_NOT_SUPPORTED:case e.GENERIC_AUDIO_ENDED_EARLY:case e.MSE_BAD_OBJECT_STATE:case e.MSE_NOT_SUPPORTED:case e.MSE_MP3_NOT_SUPPORTED:case e.MSE_HLS_NOT_VALID_PLAYLIST:case e.MSE_HLS_PLAYLIST_NOT_FOUND:case e.MSE_HLS_SEGMENT_NOT_FOUND:T.call(this);break;case e.GENERIC_AUDIO_OVERRUN:d.call(this);break;default:F.error("(%s) Unhandled audio error code: %s",this.getId(),t,this)}}function I(t,e){switch(this.options.debug&&O.call(this,t,e),t){case Y.PAUSE:this._isPlaying=!1,this._isPlayActionQueued=!1;break;case Y.PLAY:var n=e;this.toggleMute(J.muted),this.setVolume(J.volume),this._isPlaying=!1,this._isPlayActionQueued=!0,this._userInitiatedPlay=void 0!==n.userInitiated?!!n.userInitiated:!0,M.call(this);break;case Y.PLAY_START:this._isPlaying=!0,this._isPlayActionQueued=!1,this._registerPlays&&this.registerPlay();break;case Y.BUFFERRING_START:case Y.SEEK:this._isPlaying&&(this._isPlaying=!1,this._isPlayActionQueued=!0);break;case Y.BUFFERRING_END:case Y.SEEKED:this._isPlayActionQueued&&(this._isPlaying=!0,this._isPlayActionQueued=!1);break;case Y.NO_CONNECTION:this._hasNoConnection=!0,this._noConnectionSince=Date.now();break;case Y.NO_STREAMS:this.pause(),E.call(this,!1),l.call(this),N.call(this);break;case Y.STREAMS:this._noConnectionSince=null,this._hasNoConnection=!1;break;case Y.ONLINE:k.call(this);break;case Y.OFFLINE:}}function L(t){var e=C.States,n=C.Errors;switch(t){case e.IDLE:R.call(this),this.controller&&this.controller.getErrorID()===n.FLASH_PROXY_FLASH_BLOCKED&&this.trigger(Y.FLASH_UNBLOCK);break;case e.PAUSED:R.call(this),E.call(this,!1),this.seekTimeEventHandler&&this.isPaused()&&S.call(this),this.isPlaying()&&this.trigger(Y.PAUSE,{position:this.currentTime()});break;case e.PLAYING:R.call(this),E.call(this,!1),A.call(this),this.trigger(Y.PLAY_RESUME);break;case e.LOADING:case e.SEEKING:R.call(this),E.call(this,!0);break;case e.ENDED:R.call(this),d.call(this);break;case e.ERROR:E.call(this,!1),P.call(this)}this.trigger(Y.STATE_CHANGE,t)}function O(t,e){var n=this.options.title;n=n&&n.length?" ["+n.replace(/\s/g,"").substr(0,6)+"]":"",t===Y.STATE_CHANGE?F("(%s)%s Event: %s (%s)",this.getId(),n,t,e):t!==Y.TIME||this._loggedTime?t!==Y.TIME&&F("(%s)%s Event: %s",this.getId(),n,t):F("(%s)%s Event: %s %dms",this.getId(),n,t,this.currentTime()),this._loggedTime=t===Y.TIME}function R(){this._initAudioDefer&&this._initAudioDefer.resolve()}function D(t){return void 0===C.Errors[t]?!1:Array.prototype.slice.call(arguments,1).some(function(e){return 0===t.indexOf(e)})}function M(){function t(){var t=window.navigator.onLine;F("Navigator `onLine` status is now: "+t),window.setTimeout(function(){window.navigator.onLine===t&&this.trigger(t?Y.ONLINE:Y.OFFLINE)}.bind(this),500)}this._onlineEventsRegistered||(this._onlineEventsRegistered=!0,window.addEventListener("online",t.bind(this)),window.addEventListener("offline",t.bind(this)))}function k(){if(this.hasNoConnection()&&this._isPlayRetryQueued){var t=Date.now()-this._noConnectionSince;this._isPlayRetryQueued=!0,t<this.options.retryAfterNoConnectionEventTimeout&&this.play({userInitiated:!1})}}function N(){this.hasNoConnection()&&!this._userInitiatedPlay&&(this._isPlayRetryQueued=!0)}var x,C,F,U=n(1),B=n(6),H=n(8),j=n(9),G=n(2).Deferred,Y=n(7),V=n(14),z=n(10),W=n(15),K=n(16),q=n(18),X=n(12),$=n(13),Z=n(19),Q={},J={muted:!1,volume:1},tt={soundId:Q,duration:Q,title:null,registerEndpoint:Q,streamUrlsEndpoint:Q,resourceId:!1,debug:!1,asyncFetch:!0,useSinglePlayer:!0,protocols:[W.HLS,W.RTMP,W.HTTP],extensions:[V.MP3],maxBitrate:1/0,mediaSourceEnabled:!1,mseFirefox:!1,mseSafari:!1,eventLogger:null,logErrors:!0,logPerformance:!0,ajax:null,retryAfterNoConnectionEventTimeout:6e4,fadeOutOnPause:!1,fadeOutAlgo:Z.VolumeAutomator.Algos.EaseInOut},et=6e3,nt=6e3,it=400,rt=6e4,ot=6e3,st=3,at=3e4,ut=[];x=t.exports=function(t,e){if(1===arguments.length?e=t:x.setAudioManager(t),!C)throw new Error("SCAudio: AudioManager instance must be set with `SCAudio.setAudioManager()` or passed via the constructor");this.options=$.extend({},tt,e);var n=Object.keys(this.options).filter(function(t){return this.options[t]===Q},this);if(n.length)throw new Error("SCAudio: pass into constructor the following options: "+n.join(", "));K.prioritizeAndFilter(this.options),this.controller=null,this.streamInfo=null,this._userInitiatedPlay=this._registerPlays=!0,this._registerCounts=this._errorRecoveryCounts=0,this._isPlayActionQueued=this._onlineEventsRegistered=this._usedPrefetchUrls=this._isPlaying=this._isBuffering=this._hasNoConnection=!1,this._initAudioDefer=this._expirationTimeout=this._bufferingTimeout=this._errorRecoveryTime=this._errorRecoveryFlagsResetTimeout=this._storedPosition=this._prevPosition=this._noConnectionSince=null,this.options.debug&&(this._loggedTime=!1),this._modelListeners={},this._hooksPause=[],this.audioPerfMonitor=new H(this,this.logAudioPerformance.bind(this)),this.audioLogger=new B(this),this.volumeAutomator=new Z.VolumeAutomator(this),F=F||j(e.debug,"scaudio")},$.extend(x.prototype,z,{constructor:x,initAudio:function(){return this._initAudioDefer||(this._initAudioDefer=G(),p.call(this).done(function(t){var e=!0;this.streamInfo&&(e=!1),this.streamInfo=t,e&&this.trigger(Y.STREAMS),this.controller=a.call(this,t),u.call(this,this.controller,!0),L.call(this,this.controller.getState())}.bind(this)).fail(function(){this.trigger(Y.NO_STREAMS)}.bind(this)),this._initAudioDefer.done(function(){this.trigger(Y.CREATED)}.bind(this))),this._initAudioDefer.promise()},registerPlay:function(){var t=this.options.soundId,e=!1;return-1===ut.indexOf(t)&&(ut.push(t),window.setTimeout(function(){var e=ut.indexOf(t);e>-1&&ut.splice(e,1)},rt),this.ajax({type:"POST",url:$.result(this.options.registerEndpoint),dataType:"json"}),this._registerCounts++,this._registerPlays=!1,this.trigger(Y.REGISTERED),e=!0),e},toggle:function(){
this[this.isPaused()?"play":"pause"]()},play:function(t){var e;if(t&&null!=t.seek)e=t.seek;else{if(this.isPlaying())return;e=this.currentTime()}t=$.extend({},t,{position:e}),this.trigger(Y.PLAY,t),v.call(this,e)||(f.call(this),this._isPlayActionQueued=!0),this.initAudio().done(function(){this._isPlayActionQueued&&(this._storedPosition=null,this.trigger(Y.PLAY_START,t),this.controller&&this.controller.play(e))}.bind(this)),E.call(this,!0)},pause:function(t){this.isPaused()||(t=$.extend({},t,{position:this.currentTime()}),i.call(this)&&(this.trigger(Y.PAUSE,t),this.controller&&this.controller.pause()))},registerHook:function(t,e){switch(t){case"pause":this._hooksPause.push(e);break;default:throw new Error("can`t register hook for "+t)}},getListenTime:function(){return this.audioLogger?this.audioLogger.getListenTime():0},dispose:function(){this.audioLogger=null,this.audioPerfMonitor=null,$.without(ut,this.options.soundId),window.clearTimeout(this._bufferingTimeout),l.call(this),this.controller&&(this.controller.kill(),this.controller=null),delete this.controller,this.trigger(Y.DESTROYED),this.off()},seek:function(t){return this.controller?t>=$.result(this.options.duration)?void d.call(this):(this.seekTimeEventHandler&&this.off(Y.TIME,this.seekTimeEventHandler),this.seekTimeEventHandler=$.after(2,function(){S.call(this)}.bind(this)),this.on(Y.TIME,this.seekTimeEventHandler),this.trigger(Y.SEEK,{from:this.currentTime(),to:t}),this.isPlaying()&&!v.call(this,t)?(f.call(this),void this.play({seek:t})):void this.controller.seek(t)):void 0},seekRelative:function(t){this.controller&&this.seek(this.currentTime()+t)},currentTime:function(){return this._storedPosition?this._storedPosition:this.controller?this.controller.getCurrentPosition():0},loadProgress:function(){var t=0;return this.controller&&(t=this.controller.getLoadedPosition()/this.controller.getDuration(),t=t>=.99?1:t),t},buffered:function(){return this.controller&&this.controller.getDuration()||0},isPaused:function(){return!this.isPlaying()},isBuffering:function(){return this._isBuffering},isPlaying:function(){return this._isPlayActionQueued||this._isPlaying},isLoading:function(){return!(!this.controller||this.controller.getState()!==C.States.LOADING)},hasNoConnection:function(){return!!this._hasNoConnection},hasStreamInfo:function(){return!!this.streamInfo},toggleMute:function(t){x.toggleMute(t)},isMuted:function(){return x.isMuted()},setVolume:function(t){x.setVolume(t)},getVolume:function(){return x.getVolume()},logAudioPerformance:function(t){this.getEventLogger()&&this.options.logPerformance&&this.getEventLogger().audioPerformance(t)},logAudioError:function(t){this.getEventLogger()&&this.options.logErrors&&this.getEventLogger().audioError(t)},getAudioManagerStates:function(){return C.States},getId:function(){return this.options.resourceId||this.options.soundId},getEventLogger:function(){return this.options.eventLogger},registerModelEventListener:function(t,e){var n=r(t);if(this._modelListeners[n])throw new Error("Data model is already registered (forgot to unregister it or registering twice?)");this._modelListeners[n]=e=e.bind(this,t),this.on("all",e)},unregisterModelEventListener:function(t){var e=r(t);this._modelListeners[e]&&(this.off("all",this._modelListeners[e]),delete this._modelListeners[e])},ajax:function(t){return this.options.ajax?this.options.ajax(t):U(t)},trigger:function(t,e){I.call(this,t,e),z.trigger.call(this,t,e)}}),$.extend(x,{getSettings:function(){return J},setSettings:function(t){$.extend(J,t)},setAudioManager:o,setAudioManagerOnce:$.once(o),toggleMute:function(t){J.muted=void 0===t?!J.muted:!!t,C&&C.setVolume(J.muted?0:1)},isMuted:function(){return J.muted},setVolume:function(t){J.volume=void 0===t?1:t,C&&C.setVolume(J.volume)},getVolume:function(){return J.volume},Extensions:V,Protocols:W,Events:Y,BUFFER_DELAY:it,PLAY_REGISTRATION_TIMEOUT:rt})},function(t,e,n){var i=n(2).Deferred,r=4;t.exports=function(t){var e,n,o,s,a,u,h,c;t&&(o=t.data||null,n=t.url||"",e=t.type||"GET",s=t.dataType||"text",a=t.async,u=t.timeout,h=t.beforeSend||null);var l=i();a=a!==!1;var f=new XMLHttpRequest;return f.open(e,n,a),a&&(f.responseType="text"),h&&h(f),f.onreadystatechange=function(){if(f.readyState===r)if(clearTimeout(c),0!==f.status&&f.status<400){var t=f.responseText;if("json"===s)try{t=JSON.parse(t)}catch(e){return void l.reject(f)}l.resolve(t)}else l.reject(f)},null!=u&&(c=setTimeout(function(){f.readyState!==r&&(f.abort(),l.reject(f))},u)),f.send(o),l.promise()}},function(t,e,n){t.exports=n(3)},function(t,e,n){/*!
		* jquery-deferred
		* Copyright(c) 2011 Hidden <zzdhidden@gmail.com>
		* MIT Licensed
		*/
var i=t.exports=n(4),r=Array.prototype.slice;i.extend({Deferred:function(t){var e=[["resolve","done",i.Callbacks("once memory"),"resolved"],["reject","fail",i.Callbacks("once memory"),"rejected"],["notify","progress",i.Callbacks("memory")]],n="pending",r={state:function(){return n},always:function(){return o.done(arguments).fail(arguments),this},then:function(){var t=arguments;return i.Deferred(function(n){i.each(e,function(e,r){var s=r[0],a=t[e];o[r[1]](i.isFunction(a)?function(){var t=a.apply(this,arguments);t&&i.isFunction(t.promise)?t.promise().done(n.resolve).fail(n.reject).progress(n.notify):n[s+"With"](this===o?n:this,[t])}:n[s])}),t=null}).promise()},promise:function(t){return null!=t?i.extend(t,r):r}},o={};return r.pipe=r.then,i.each(e,function(t,i){var s=i[2],a=i[3];r[i[1]]=s.add,a&&s.add(function(){n=a},e[1^t][2].disable,e[2][2].lock),o[i[0]]=s.fire,o[i[0]+"With"]=s.fireWith}),r.promise(o),t&&t.call(o,o),o},when:function(t){var e,n,o,s=0,a=r.call(arguments),u=a.length,h=1!==u||t&&i.isFunction(t.promise)?u:0,c=1===h?t:i.Deferred(),l=function(t,n,i){return function(o){n[t]=this,i[t]=arguments.length>1?r.call(arguments):o,i===e?c.notifyWith(n,i):--h||c.resolveWith(n,i)}};if(u>1)for(e=new Array(u),n=new Array(u),o=new Array(u);u>s;s++)a[s]&&i.isFunction(a[s].promise)?a[s].promise().done(l(s,o,a)).fail(c.reject).progress(l(s,n,e)):--h;return h||c.resolveWith(o,a),c.promise()}})},function(t,e,n){function i(t){var e=s[t]={};return r.each(t.split(o),function(t,n){e[n]=!0}),e}var r=t.exports=n(5),o=/\s+/,s={};r.Callbacks=function(t){t="string"==typeof t?s[t]||i(t):r.extend({},t);var e,n,o,a,u,h,c=[],l=!t.once&&[],f=function(i){for(e=t.memory&&i,n=!0,h=a||0,a=0,u=c.length,o=!0;c&&u>h;h++)if(c[h].apply(i[0],i[1])===!1&&t.stopOnFalse){e=!1;break}o=!1,c&&(l?l.length&&f(l.shift()):e?c=[]:d.disable())},d={add:function(){if(c){var n=c.length;!function i(e){r.each(e,function(e,n){var o=r.type(n);"function"===o?t.unique&&d.has(n)||c.push(n):n&&n.length&&"string"!==o&&i(n)})}(arguments),o?u=c.length:e&&(a=n,f(e))}return this},remove:function(){return c&&r.each(arguments,function(t,e){for(var n;(n=r.inArray(e,c,n))>-1;)c.splice(n,1),o&&(u>=n&&u--,h>=n&&h--)}),this},has:function(t){return r.inArray(t,c)>-1},empty:function(){return c=[],this},disable:function(){return c=l=e=void 0,this},disabled:function(){return!c},lock:function(){return l=void 0,e||d.disable(),this},locked:function(){return!l},fireWith:function(t,e){return e=e||[],e=[t,e.slice?e.slice():e],!c||n&&!l||(o?l.push(e):f(e)),this},fire:function(){return d.fireWith(this,arguments),this},fired:function(){return!!n}};return d}},function(t,e){function n(t){return null==t?String(t):c[h.call(t)]||"object"}function i(t){return"function"===u.type(t)}function r(t){return"array"===u.type(t)}function o(t,e,n){var r,o=0,s=t.length,a=void 0===s||i(t);if(n)if(a){for(r in t)if(e.apply(t[r],n)===!1)break}else for(;s>o&&e.apply(t[o++],n)!==!1;);else if(a){for(r in t)if(e.call(t[r],r,t[r])===!1)break}else for(;s>o&&e.call(t[o],o,t[o++])!==!1;);return t}function s(t){return!(!t||"object"!==u.type(t))}function a(){var t,e,n,i,r,o,s=arguments[0]||{},a=1,h=arguments.length,c=!1;for("boolean"==typeof s&&(c=s,s=arguments[1]||{},a=2),"object"==typeof s||u.isFunction(s)||(s={}),h===a&&(s=this,--a);h>a;a++)if(null!=(t=arguments[a]))for(e in t)n=s[e],i=t[e],s!==i&&(c&&i&&(u.isPlainObject(i)||(r=u.isArray(i)))?(r?(r=!1,o=n&&u.isArray(n)?n:[]):o=n&&u.isPlainObject(n)?n:{},s[e]=u.extend(c,o,i)):void 0!==i&&(s[e]=i));return s}var u=t.exports={type:n,isArray:r,isFunction:i,isPlainObject:s,each:o,extend:a,noop:function(){}},h=Object.prototype.toString,c={};"Boolean Number String Function Array Date RegExp Object".split(" ").forEach(function(t){c["[object "+t+"]"]=t.toLowerCase()})},function(t,e,n){function i(t){this.listenTime+=t.from-this.currentTime,this.currentTime=t.to}function r(t){this.listenTime+=t.position-this.currentTime,this.currentTime=t.position}function o(t){this.currentTime=t.position}var s,a=n(7);s=t.exports=function(t){this.scAudio=t,this.listenTime=0,this.currentTime=0,this.scAudio.on(a.SEEK,i,this).on(a.PLAY_START,o,this).on(a.PAUSE,r,this)},s.prototype={constructor:s,getListenTime:function(){return this.listenTime+this.scAudio.currentTime()-this.currentTime}}},function(t,e){var n={CREATED:"created",STATE_CHANGE:"state-change",DESTROYED:"destroyed",PLAY:"play",PLAY_START:"play-start",PLAY_RESUME:"play-resume",METADATA:"metadata",PAUSE:"pause",FINISH:"finish",RESET:"reset",SEEK:"seek",SEEKED:"seeked",GEO_BLOCKED:"geo_blocked",BUFFERRING_START:"buffering_start",BUFFERRING_END:"buffering_end",FLASH_NOT_LOADED:"flash_not_loaded",FLASH_BLOCK:"flash_blocked",FLASH_UNBLOCK:"flash_unblocked",AUDIO_ERROR:"audio_error",TIME:"time",NO_STREAMS:"no_streams",STREAMS:"streams",NO_PROTOCOL:"no_protocol",NO_CONNECTION:"no_connection",REGISTERED:"registered",ONLINE:"online",OFFLINE:"offline"};t.exports=n},function(t,e,n){function i(){return this.scAudio.controller?this.controller?void m.warn("(%s) Setup was called while it was already initialized (returned with a no-op)",this.scAudio.getId()):(m("(%s) Initialized",this.scAudio.getId()),this.controller=this.scAudio.controller,this.protocol=this.scAudio.streamInfo.protocol,void(this.host=S.getUrlHost(this.scAudio.streamInfo.url))):void m.warn("Cant initialize when controller is null")}function r(){this.controller&&(m("(%s) Reset",this.scAudio.getId()),this.controller=this.protocol=this.host=null,this.timeToPlayMeasured=!1)}function o(t){var e=this.scAudio.getAudioManagerStates();t===e.LOADING?this.timeToPlayMeasured&&f.call(this):A.isNull(this.bufferingStartTime)||d.call(this)}function s(){this.metadataLoadStartTime=Date.now()}function a(){return A.isNull(this.metadataLoadStartTime)?void m.warn("(%s) onMetadataEnd was called without onMetadataStart being called before.",this.scAudio.getId()):(this.log({type:"metadata",latency:Date.now()-this.metadataLoadStartTime}),void(this.metadataLoadStartTime=null))}function u(){this.playClickTime=Date.now()}function h(){if(!this.timeToPlayMeasured){if(A.isNull(this.playClickTime))return void m.warn("(%s) onPlayResume was called without onPlayStart being called before.",this.scAudio.getId());this.log({type:"play",latency:Date.now()-this.playClickTime}),this.playClickTime=null,this.timeToPlayMeasured=!0}}function c(){this.scAudio.isPaused()||(this.seekStartTime=Date.now())}function l(){if(!this.scAudio.isPaused()){if(A.isNull(this.seekStartTime))return void m.warn("(%s) onSeekEnd was called without onSeekStart being called before.",this.scAudio.getId());this.log({type:"seek",latency:Date.now()-this.seekStartTime}),this.seekStartTime=null}}function f(){this.bufferingStartTime||(this.bufferingStartTime=Date.now())}function d(){return A.isNull(this.bufferingStartTime)?void m.warn("(%s) onBufferingEnd was called without onBufferingStart being called before.",this.scAudio.getId()):(p.call(this),void(this.bufferingStartTime=null))}function p(){A.isNull(this.bufferingStartTime)||(A.isNull(this.bufferingTimeAccumulated)&&(this.bufferingTimeAccumulated=0),this.bufferingTimeAccumulated+=Date.now()-this.bufferingStartTime)}function g(){p.call(this),A.isNull(this.bufferingTimeAccumulated)||(this.log({type:"buffer",latency:this.bufferingTimeAccumulated}),this.bufferingStartTime=this.bufferingTimeAccumulated=null)}var _,m,y=n(9),v=n(7),E=n(10),S=n(12),A=n(13);_=t.exports=function(t,e){this.scAudio=t,this.logFn=e,this.controller=null,this.reset(),m=m||y(t.options.debug,"audioperf"),t.on(v.CREATED,i,this).on(v.RESET,r,this).on(v.DESTROYED,r,this).on(v.SEEK,c,this).on(v.SEEKED,l,this).on(v.PLAY,u,this).on(v.PLAY_START,s,this).on(v.PLAY_RESUME,h,this).on(v.PAUSE,g,this).on(v.FINISH,g,this).on(v.STATE_CHANGE,o,this).on(v.METADATA,a,this)},A.extend(_.prototype,E,{constructor:_,log:function(t){return this.controller?(A.extend(t,{protocol:this.protocol,host:this.host,playertype:this.controller.getType()}),m("(%s) %s latency: %d protocol: %s host: %s playertype: %s",this.scAudio.getId(),t.type,t.latency,t.protocol,t.host,t.playertype),void this.logFn(t)):void m.warn("(%s) Monitor log was called while controller is null (returned with a no-op)",this.scAudio.getId())},reset:function(){this.bufferingStartTime=this.bufferingTimeAccumulated=this.playClickTime=this.seekStartTime=this.metadataLoadStartTime=null,this.timeToPlayMeasured=!1}})},function(t,e){function n(){function t(t,n){for(var i,r=arguments.length,o=Array(r>2?r-2:0),s=2;r>s;s++)o[s-2]=arguments[s];"string"==typeof n?n=" "+n:(o.unshift(n),n=""),(i=window.console)[t].apply(i,[e()+" |"+c+"%c"+n].concat(l,o))}function e(){var t=new Date,e=null===h?0:t-h;return h=+t,"%c"+r(t.getHours())+":"+r(t.getMinutes())+":"+r(t.getSeconds())+"."+i(t.getMilliseconds(),"0",3)+"%c (%c"+i("+"+e+"ms"," ",8)+"%c)"}var n=arguments.length<=0||void 0===arguments[0]?!0:arguments[0],o=arguments.length<=1||void 0===arguments[1]?"":arguments[1];if(!n)return s;var h=null,c=a(o),l=["color: green","color: grey","color: blue","color: grey",u(o),""],f=t.bind(null,"log");return f.log=f,["info","warn","error"].forEach(function(e){f[e]=t.bind(null,e)}),f}function i(t,e,n){return o(e,n-(""+t).length)+t}function r(t){return i(t,"0",2)}function o(t,e){return e>0?new Array(e+1).join(t):""}function s(){}function a(t){return t?"%c"+t:"%c"}t.exports=n,s.log=s.info=s.warn=s.error=s;var u=function(){var t=["#51613C","#447848","#486E5F","#787444","#6E664E"],e=0;return function(n){return n?"background-color:"+t[e++%t.length]+";color:#fff;border-radius:3px;padding:2px 4px;font-family:sans-serif;text-transform:uppercase;font-size:9px;margin:0 4px":""}}()},function(t,e,n){t.exports=n(11)},function(t,e,n){!function(){function n(){return{keys:Object.keys||function(t){if("object"!=typeof t&&"function"!=typeof t||null===t)throw new TypeError("keys() called on a non-object");var e,n=[];for(e in t)t.hasOwnProperty(e)&&(n[n.length]=e);return n},uniqueId:function(t){var e=++a+"";return t?t+e:e},has:function(t,e){return o.call(t,e)},each:function(t,e,n){if(null!=t)if(r&&t.forEach===r)t.forEach(e,n);else if(t.length===+t.length)for(var i=0,o=t.length;o>i;i++)e.call(n,t[i],i,t);else for(var s in t)this.has(t,s)&&e.call(n,t[s],s,t)},once:function(t){var e,n=!1;return function(){return n?e:(n=!0,e=t.apply(this,arguments),t=null,e)}}}}var i,r=Array.prototype.forEach,o=Object.prototype.hasOwnProperty,s=Array.prototype.slice,a=0,u=n();i={on:function(t,e,n){if(!c(this,"on",t,[e,n])||!e)return this;this._events||(this._events={});var i=this._events[t]||(this._events[t]=[]);return i.push({callback:e,context:n,ctx:n||this}),this},once:function(t,e,n){if(!c(this,"once",t,[e,n])||!e)return this;var i=this,r=u.once(function(){i.off(t,r),e.apply(this,arguments)});return r._callback=e,this.on(t,r,n)},off:function(t,e,n){var i,r,o,s,a,h,l,f;if(!this._events||!c(this,"off",t,[e,n]))return this;if(!t&&!e&&!n)return this._events={},this;for(s=t?[t]:u.keys(this._events),a=0,h=s.length;h>a;a++)if(t=s[a],o=this._events[t]){if(this._events[t]=i=[],e||n)for(l=0,f=o.length;f>l;l++)r=o[l],(e&&e!==r.callback&&e!==r.callback._callback||n&&n!==r.context)&&i.push(r);i.length||delete this._events[t]}return this},trigger:function(t){if(!this._events)return this;var e=s.call(arguments,1);if(!c(this,"trigger",t,e))return this;var n=this._events[t],i=this._events.all;return n&&l(n,e),i&&l(i,arguments),this},stopListening:function(t,e,n){var i=this._listeners;if(!i)return this;var r=!e&&!n;"object"==typeof e&&(n=this),t&&((i={})[t._listenerId]=t);for(var o in i)i[o].off(e,n,this),r&&delete this._listeners[o];return this}};var h=/\s+/,c=function(t,e,n,i){if(!n)return!0;if("object"==typeof n){for(var r in n)t[e].apply(t,[r,n[r]].concat(i));return!1}if(h.test(n)){for(var o=n.split(h),s=0,a=o.length;a>s;s++)t[e].apply(t,[o[s]].concat(i));return!1}return!0},l=function(t,e){var n,i=-1,r=t.length,o=e[0],s=e[1],a=e[2];switch(e.length){case 0:for(;++i<r;)(n=t[i]).callback.call(n.ctx);return;case 1:for(;++i<r;)(n=t[i]).callback.call(n.ctx,o);return;case 2:for(;++i<r;)(n=t[i]).callback.call(n.ctx,o,s);return;case 3:for(;++i<r;)(n=t[i]).callback.call(n.ctx,o,s,a);return;default:for(;++i<r;)(n=t[i]).callback.apply(n.ctx,e)}},f={listenTo:"on",listenToOnce:"once"};u.each(f,function(t,e){i[e]=function(e,n,i){var r=this._listeners||(this._listeners={}),o=e._listenerId||(e._listenerId=u.uniqueId("l"));return r[o]=e,"object"==typeof n&&(i=this),e[t](n,i,this),this}}),i.bind=i.on,i.unbind=i.off,i.mixin=function(t){var e=["on","once","off","trigger","stopListening","listenTo","listenToOnce","bind","unbind"];return u.each(e,function(e){t[e]=this[e]},this),t},"undefined"!=typeof t&&t.exports&&(e=t.exports=i),e.BackboneEvents=i}(this)},function(t,e){var n={getUrlParams:function(t){var e={},n=t.indexOf("?");return n>-1&&t.substr(n+1).split("&").forEach(function(t){var n=t.split("=");e[n[0]]=n[1]}),e},getUrlHost:function(t){var e,n=t.split("//");return e=n[0]===t?n[0].split("/")[0]:n[1]?n[1].split("/")[0]:""}};t.exports=n},function(t,e){var n={extend:function(t){var e=Array.prototype.slice.call(arguments,1);return e.forEach(function(e){if(e)for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])}),t},each:function(t,e,n){Object.keys(t).forEach(function(i){e.call(n||null,t[i],i)})},without:function(t,e){var n=t.indexOf(e);n>-1&&t.splice(n,1)},result:function(t){var e=t;return n.isFunction(e)&&(e=t()),e},isFunction:function(t){return"function"==typeof t},after:function(t,e){return function(){return--t<1?e.apply(this,arguments):void 0}},isNull:function(t){return null===t},once:function(t){var e,n=!1;return function(){return n?e:(n=!0,void(e=t.apply(this,arguments)))}}};t.exports=n},function(t,e){var n={AAC:"aac",MP3:"mp3",OGG:"ogg",OPUS:"opus",WAV:"wav"};t.exports=n},function(t,e){var n={HTTP:"http",RTMP:"rtmp",HLS:"hls"};t.exports=n},function(t,e,n){function i(t){return h.supportsMediaSourceExtensions()&&t.mediaSourceEnabled&&(h.isChrome()&&h.getChromeVersion()>=35||h.isFirefox()&&t.mseFirefox||h.isSafari()&&t.mseSafari)}function r(t){return function(e){var n=!1;switch(e){case u.RTMP:n=h.supportsFlash();break;case u.HTTP:n=h.supportsHTML5Audio()||h.supportsFlash();break;case u.HLS:n=i(t)}return n}}function o(t){return h.isSafari()||h.isFirefox()?[u.HLS,u.HTTP,u.RTMP]:t}function s(t){t.protocols=o(t.protocols).filter(r(t))}var a,u=n(15),h=n(17);a={prioritizeAndFilter:s},t.exports=a},function(t,e){function n(t){return t.test(window.navigator.userAgent.toLowerCase())}function i(t,e){try{return window.navigator.userAgent.toLowerCase().match(t)[e]}catch(n){return null}}function r(){try{return parseInt(i(/chrom(e|ium)\/([0-9]+)\./,2),10)}catch(t){return NaN}}function o(){return!h()&&n(/safari/)}function s(){return o()&&n(/version\/7\.1/)}function a(){return o()&&n(/version\/8/)&&!n(/version\/80/)}function u(){return o()&&n(/version\/9\./)}function h(){return n(/chrom(e|ium)/)}function c(){return n(/firefox/)}function l(){return!!window.MediaSource&&(window.MediaSource.isTypeSupported("audio/mpeg")||window.MediaSource.isTypeSupported("audio/mp4"))}function f(){try{return window.hasOwnProperty("Audio")&&!!(new window.Audio).canPlayType("audio/mpeg")}catch(t){return!1}}function d(){try{var t=o()&&n(/version\/5\.0/),e=window.hasOwnProperty("Audio")&&(!!(new window.Audio).canPlayType('audio/x-mpegURL; codecs="mp3"')||!!(new window.Audio).canPlayType('vnd.apple.mpegURL; codecs="mp3"'));return!t&&e}catch(i){return!1}}function p(){return _(g())>=y}function g(){var t,e,n,i;if("undefined"!=typeof window.ActiveXObject)try{i=new window.ActiveXObject("ShockwaveFlash.ShockwaveFlash"),i&&(t=i.GetVariable("$version"))}catch(r){t=null}else window.navigator&&window.navigator.plugins&&window.navigator.plugins.length>0&&(n="application/x-shockwave-flash",e=window.navigator.mimeTypes,e&&e[n]&&e[n].enabledPlugin&&e[n].enabledPlugin.description&&(t=e[n].enabledPlugin.description));return t}function _(t){if(!t)return 0;var e=t.match(/\d\S+/)[0].replace(/,/g,".").split(".");return parseFloat([e[0],e[1]].join("."))||0}var m,y=9;m={flashPlugin:g,isSafari:o,isSafari71:s,isSafari8:a,isSafari9:u,isChrome:h,getChromeVersion:r,isFirefox:c,supportsNativeHLSAudio:d,supportsHTML5Audio:f,supportsFlash:p,supportsMediaSourceExtensions:l},t.exports=m},function(t,e,n){function i(t){var e=f.getUrlHost(t);return p.every(function(t){return 0!==e.indexOf(t)})}function r(t,e){return!(t===c.HLS&&!i(e))}function o(t,e){if(!t)return!1;var n=t.issuedAt+s(t.protocol,t.duration);return a(t.protocol)?Date.now()+t.duration-(e||0)<n:Date.now()<n}function s(t,e){var n=a(t);return g+(n?l.result(e):0)}function a(t){return t===c.HTTP||t===c.HLS}function u(t,e){function n(t){return-1*t}function i(t,e){return Math.abs(e-m)-Math.abs(t-m)}var o,s,a,u,h,c,f,d,p,g,_={},m=e.maxBitrate,y=e.protocols,v=e.extensions;for(l.each(t,function(t,e){var n=e.split("_"),i=n[0],r=n[1],o=n[2];_[i]=_[i]||{},_[i][r]=_[i][r]||{},_[i][r][o]=t}),h=0,c=y.length;c>h;++h)for(u=y[h],d=0,p=v.length;p>d;++d)if(f=v[d],_[u]&&_[u][f]){if(o=Object.keys(_[u][f]).map(Number).sort(n),s=m===1/0,a=m===-(1/0),m=s||a?o[s?"pop":"shift"]():o.sort(i).pop(),g=_[u][f][m],!r(u,g))continue;return{url:g,bitrate:m,protocol:u,extension:f,issuedAt:Date.now(),duration:l.result(e.duration)}}return null}var h,c=n(15),l=n(13),f=n(12),d=.9,p=[],g=Math.floor(12e4*d);h={choosePreferredStream:u,streamValidForPlayingFrom:o},t.exports=h},function(t,e,n){var i,r,o=n(7),s=n(13),a={Linear:0,EaseOut:1,EaseInOut:2},u=600,h=25;t.exports=i={},i.VolumeAutomator=r=function(t){this.scAudio=t,this.fadeOutAlgo=this.scAudio.options.fadeOutAlgo,this.fadeOutTimer=null,this.initialVolume=void 0,this.scAudio.options.fadeOutOnPause&&r.isSupported()&&(this.scAudio.on(o.PLAY,this.onPlay,this),this.scAudio.registerHook("pause",this.hookPause.bind(this)))},i.VolumeAutomator.isSupported=function(){var t=new window.Audio,e=t.volume,n=0===e?1:e/2;return t.volume=n,t.volume===n},i.VolumeAutomator.Algos=a,s.extend(r.prototype,{fadeOutAndPause:function(){var t=Date.now(),e=function(){var n,i=(Date.now()-t)/u,r=this.initialVolume;if(i>=1)this.scAudio.controller&&this.scAudio.controller.pause(),this.cancelFadeout();else{switch(this.fadeOutAlgo){case a.Linear:n=r*(1-i);break;case a.EaseOut:n=r*(1/(10*(i+.1))-.05);break;case a.EaseInOut:default:n=r*(Math.cos(i*Math.PI)/2+.5)}this.scAudio.setVolume(n),window.clearTimeout(this.fadeOutTimer),this.fadeOutTimer=window.setTimeout(e,h)}}.bind(this);this.initialVolume=this.scAudio.getVolume(),e()},cancelFadeout:function(){this.fadeOutTimer&&(window.clearTimeout(this.fadeOutTimer),this.fadeOutTimer=null,this.scAudio.setVolume(this.initialVolume),this.initialVolume=void 0)},hookPause:function(t){return this.fadeOutAndPause(),!1},onPlay:function(){this.cancelFadeout()}})}])},function(t,e){}])});
//# sourceMappingURL=sdk.js.map

/***/ }),
/* 1 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__controls_toast__ = __webpack_require__(5);


class Utils {

     /**
     * Simple function to convert milliseconds to a string with minutes and seconds
     * @param {*int} millis - time in milliseconds
     */
    static convertMillisecondsToDigitalClock(ms) {
        let hours = Math.floor(ms / 3600000), // 1 Hour = 36000 Milliseconds
        minutes = Math.floor((ms % 3600000) / 60000), // 1 Minutes = 60000 Milliseconds
        seconds = Math.floor(((ms % 360000) % 60000) / 1000) // 1 Second = 1000 Milliseconds
        return {
            hours : hours,
            minutes : minutes,
            seconds : seconds,
            clock : ((hours === 0) ? '' : hours + ':') + (minutes < 10 && hours > 0 ? '0' : '') + minutes + ':' + (seconds < 10 ? '0' : '') + seconds
        };
    }

    /**
     * Grab a random image when a song does not have cover art.
     */
    static fetchRandomImage() {
        let i = Math.floor(Math.random() * 4050) + 1;
        return `http://img.infinitynewtab.com/wallpaper/${i}.jpg`;
    }

    static showToast(message) {
        this.toastContainer = document.getElementById('toastContainer');
        this.toastContainer.innerHTML = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__controls_toast__["a" /* default */])(message, '');
        setTimeout(function() { 
            $('#toast').addClass('shown');
        }, 500);
        setTimeout(function() { // Hide toast
            $('#toast').removeClass('shown');
        }, 3000);
    }
}

/* harmony default export */ __webpack_exports__["a"] = (Utils);

/***/ }),
/* 2 */
/***/ (function(module, exports) {

module.exports = {
	"client_id": "2t9loNQH90kzJcsFCODdigxfp325aq4z",
	"client_secret": "a05kSM418xnhpSvPVPXzQBRjmO1s8GWW"
};

/***/ }),
/* 3 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
class Settings {

    static loadPrefs() {
        this.disableAnimationsCSS = "<style id='disableAnimations'>* {transition: none !important; -webkit-transition: none; !important}</style>";
        this.disableBlurCSS = "<style id='disableBlur'>#histItemBg {-webkit-filter: brightness(.5) !important;filter: brightness(.5) !important; } #background {-webkit-filter: brightness(.8) !important;filter: brightness(.8) !important; }</style>"
        
        // Default settings object
        this._settings = {
            disableAnimations: false,
            disableBlur: false,
            playerVolume: 100
        }
        this._settings.disableAnimations = this.getPref('disableAnimations') || false;
        this._settings.disableBlur = this.getPref('disableBlur') || false;
        this._settings.playerVolume = this.getPref('playerVolume') || 100;
    }

    static storePref(name, value) {
        localStorage.setItem(name, value);
    }

    static getPref(name) {
        return localStorage.getItem(name);
    }

}

/* harmony default export */ __webpack_exports__["a"] = (Settings);

/***/ }),
/* 4 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__consts_sec_json__ = __webpack_require__(2);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__consts_sec_json___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0__consts_sec_json__);


let SC = __webpack_require__(0);

class ChartItem {
    constructor(player, title, artist, kind, genre, limit, art) {
        this._player = player;
        this._title = title;
        this._artist = artist;
        this._kind = kind;
        this._genre = genre;
        this._limit = limit;
        this._art = art;

        this.chartItem = document.createElement('div');
        this.chartItem.className = 'col-4';
        // this.chartItem.setAttribute('data-genre', this._genre);
        // this.chartItem.setAttribute('data-limit', this._limit);
        this.bindEvents();
        let tempInner = document.createElement('div');
        tempInner.innerHTML = `
                <div class="chart-item card">
                    <div class="card-container">
                        <div class="card-image" style="background-image: url(${art});"></div>

                        <div class="title-container">
                            <p class="title">${this._title}</p><span class="subtitle">By SoundCloud</span>
                        </div>
                    </div>
                </div>
            </div>
        `;
        this.chartItem.appendChild(tempInner); // Must use this method to preserve listeners
    }

    render() {
        return this.chartItem;
    }

    bindEvents() {
        this.chartItem.addEventListener('click', (e) => {
            this._player.getTracksFromCharts(this._kind, this._genre, this._limit);
            this._player.searchDialog.hideSearchDialog();
            this._player.chartsDialog.hideCharts();
        }, false);
    }
}

/* harmony default export */ __webpack_exports__["a"] = (ChartItem);

/***/ }),
/* 5 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
const Toast = (text, shown) => (
    `
        <div class="toast ${shown}" id="toast">
            <p class="text-center">${text}</p>
        </div>
    `
);
/* harmony default export */ __webpack_exports__["a"] = (Toast);

/***/ }),
/* 6 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__consts_sec_json__ = __webpack_require__(2);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__consts_sec_json___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0__consts_sec_json__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__controls_HistItem__ = __webpack_require__(7);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__controls_songinfo__ = __webpack_require__(12);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__controls_waveform__ = __webpack_require__(13);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__request__ = __webpack_require__(15);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__controls_search__ = __webpack_require__(11);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__controls_toast__ = __webpack_require__(5);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__controls_dashboard__ = __webpack_require__(9);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__utils__ = __webpack_require__(1);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9__settings__ = __webpack_require__(3);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_10__controls_charts__ = __webpack_require__(8);












const SC = __webpack_require__(0); // Import node module

// Soundcloud Properties 

// Oldest range (around 2007 onward)
const RAND_COUNT = 90000;
const OFFSET = 0;

// Going from 2010
const RAND_COUNT_1 = 7000000;
const OFFSET_1 = 3000000;

// More Recent
const RAND_COUNT_2 = 90000000;
const OFFSET_2 = 10000000;

// The fresh stuff
const RAND_COUNT_3 = 300000000;
const OFFSET_3 = 100000000;

// Widget Parameters
//const WIDGET_PARAMS = '&liking=false&show_artwork=false&show_comments=false&show_playcount=false&visual=false';
const WIDGET_PARAMS = '';

class Player {

    /**
     * Sets up the the application variables and hooking events to controls.
     */
    constructor() {
        // Initialize variables
        this.history = [];
        this.queue = []; // For tracks playing next
        this.isPlaying = false;
        this.curPlayer = null;
        this.curPosition = 0;
        this.waveform = null;
        this.isRepeating = false; // For repeating songs
        this.hasBeenFetched = false; // Used to stop duplicates during recursion
        this.timerUpdate = 0;
        this.isPlaylist = false; // Check if we are playing a playlist.
        this.setCurIndex = 0; // The current index of the song in the playlist
        this.setTrackCount = 0; // This holds the number of tracks in the playlist so we can tell when we have reached the end.
        this.shuffleQueue = false; // Should the queue be shuffled when we get a list of tracks;
        this.queueNum = 120; // How many results to add to the queue

        this.seekingForward = false; // Work around for the bug in PROGRESS event

        // Experimental API v2 Endpoint
        this.SOUNDCLOUD_API_V2 = 'https://api-v2.soundcloud.com/';

        // Widget Props
        this.widgetTrack = {
            cover: '',
            title: '',
            id: 0,
            artist: '',
            permalink_url: '',
            description: '',
            created_at: '',
            duration: 0,
            currentPosition: 0
        };

        // Bind page elements 
        this.bindControlElements();
        this.bindControlEvents();

        // Initialize Search dialog
        this.searchDialog = new __WEBPACK_IMPORTED_MODULE_5__controls_search__["a" /* default */](this);
        
        // Initialize the dashboard, also initializes settings
        this.dashboard = new __WEBPACK_IMPORTED_MODULE_7__controls_dashboard__["a" /* default */](this);

        // Initialize the charts
        this.chartsDialog = new __WEBPACK_IMPORTED_MODULE_10__controls_charts__["a" /* default */](this);

        // Settings already Initialized
        if (JSON.parse(__WEBPACK_IMPORTED_MODULE_9__settings__["a" /* default */].getPref('disableAnimations'))) {
            $(__WEBPACK_IMPORTED_MODULE_9__settings__["a" /* default */].disableAnimationsCSS).appendTo("head");
        }
        if (JSON.parse(__WEBPACK_IMPORTED_MODULE_9__settings__["a" /* default */].getPref('disableBlur'))) {
            $(__WEBPACK_IMPORTED_MODULE_9__settings__["a" /* default */].disableBlurCSS).appendTo("head");
        }

        // Load a track when the app is loaded (take url param into account).
        document.getElementById('widgettest').setAttribute('src', 'https://w.soundcloud.com/player/?url=https%3A//api.soundcloud.com/tracks/170202151' + WIDGET_PARAMS);
        let iframeID = document.getElementById('widgettest');
        this.curPlayer = SC.Widget(iframeID);
        // Update the player
        this.bindWidgetEvents(this.curPlayer); // Bind event handlers for widget.
        
        // Check for params and then decide what to play
        this.checkParamsAndFetch();

        console.log('construct done');
    }

    /**
     * Binds the page elements to JS objects so we can access them in other functions.
     */
    bindControlElements() {
        this.mainPlayer = document.getElementById('songContainer');
        this.playBtn = document.getElementById('play-btn');
        this.histContainer = document.getElementById('histContainer');
        this.btnFf = document.getElementById('seek-fw-btn');
        this.btnBk = document.getElementById('seek-bk-btn');
        this.btnSearch = document.getElementById('custom-btn');
        this.btnRepeat = document.getElementById('repeat-btn');
        this.btnDashboard = document.getElementById('dashboard-btn');
    }

    /**
     * Binds components on the page to commands on action.
     */
    bindControlEvents() {
        this.playBtn.onclick = (e) => {
            // if (this.curPlayer === null && !this.isPlaying)
            //     this.updateStream(this.getRandomTrack());
            this.togglePlay();

            // Check if song title matches title in app
            if ($('#songTitle').value !== this.curPlayer.title) {
                this.curPlayer.getCurrentSound((song) => {
                    this.updateSongInfo(song);
                });
            }
        }

        // Event handler for seeking forward / fetch new song
        this.btnFf.onclick = (e) => {
            if (this.queue.length > 0 || this.isPlaylist) {
                this.seekForward(); // Seek forward in queue
            } else { // Else just load another song
                this.fetchNext();
            }
        }

        // Event handler for seeking back
        this.btnBk.onclick = (e) => {
            if (this.curPosition > 10000) { // If the song is past 10 seconds, reset song back to beginning (like in Spotify)
                this.restartSong();
            } else { // Else, go to the last song
                this.seekBack();
            }
        }

        // Event handler to play custom song
        this.btnSearch.onclick = (e) => {
            this.searchDialog.toggleSearchDialog();
        }
        
        // Event handler for repeats
        this.btnRepeat.onclick = (e) => {
            this.isRepeating = !this.isRepeating; // Toggle the value
            if (this.isRepeating) {
                this.btnRepeat.style.color = '#ff2160';
            } else {
                this.btnRepeat.style.color = 'inherit';
            }
        }

        // Event handler to show dashboard
        this.btnDashboard.onclick = (e) => {
            this.dashboard.toggleDashboard();
        }

        // Bind keyboard shortcuts
        document.onkeydown = (e) => {
            if (e.keyCode == 32) {
                // space key to toggle playback
                var tag = e.target.tagName.toLowerCase();
                if (tag != 'input') // Ignore the search field
                    this.togglePlay();

            } else if (e.shiftKey && e.keyCode == 38) {
                // shift up
                this.volumeUp(10);
            } else if (e.shiftKey && e.keyCode == 40) {
                // shift down
                this.volumeDown(10);

            } else if (e.shiftKey && e.keyCode == 66) {
                let id = prompt("Enter song id.");
                if (id == null)
                    return;

                document.getElementById('widgettest').setAttribute('src', `https://w.soundcloud.com/player/?url=https%3A//api.soundcloud.com/tracks/${id}` + WIDGET_PARAMS);
                let iframeID = document.getElementById('widgettest');
                this.curPlayer = SC.Widget(iframeID);
                this.curPlayer.load(`https%3A//api.soundcloud.com/tracks/${id}` + WIDGET_PARAMS);
                // Update the player
                this.bindWidgetEvents(this.curPlayer); // Bind event handlers for widget.
                this.togglePlay();
                setTimeout(() => this.loadWidgetSong(this.curPlayer), 1000);
            }
        }

    }

    /**
     * Attempts to load information associated to the widget to local vars and displays them
     * @param {SoundCloudWidget} widget - widget loaded by API
     */
    loadWidgetSong(widget) {
        try {
            console.log('loadwidgetsong called');
            this.waveform = null; // Reset the reference
            widget.getCurrentSound((song) => {
                //console.log(song);
                let rndImg = __WEBPACK_IMPORTED_MODULE_8__utils__["a" /* default */].fetchRandomImage();
                this.updateSongInfo(song);

                // Set the volume (player always resets to 100 again)
                this.setVolume(__WEBPACK_IMPORTED_MODULE_9__settings__["a" /* default */].getPref('playerVolume'));

                let found = false; // Boolean to see if the song exists
                if (this.history.length > 0 || this.queue.length > 0) {
                    let songList = this.history.concat(this.queue); // Use this to prevent adding any duplicates
                    for (let i = 0; i < songList.length; i++) {
                        if (songList[i].track.id === song.id) {
                            found = true;
                        }
                    };

                    if (!found) { // Append the song if not found
                        this.history.push({id: song.id, track: song}); // Push the track so it can be replayed from history. 
                        let h = new __WEBPACK_IMPORTED_MODULE_1__controls_HistItem__["a" /* default */]((song.artwork_url === null ? rndImg : song.artwork_url), song, this, "javascript:alert('Download link unavailable');");
                        this.histContainer.appendChild(h.render()); // Append to history

                        $('.action-bar-item').click((e) => { // Stop button clicks from triggering playing the song
                            e.stopPropagation();
                        });
                    }
                } else {
                    this.history.push({id: song.id, track: song}); // Push the track so it can be replayed from history. 
                    let h = new __WEBPACK_IMPORTED_MODULE_1__controls_HistItem__["a" /* default */]((song.artwork_url === null ? rndImg : song.artwork_url), song, this, "javascript:alert('Download link unavailable');");
                    this.histContainer.appendChild(h.render()); // Append to history
                    $('.action-bar-item').click((e) => { // Stop button clicks from triggering playing the song
                        e.stopPropagation();
                    });
                }

                this.hasBeenFetched = false; // Reset

                console.log('getcurrentsound done');
            }, (err) => {
                console.log(err.message);
            });

            // Update the play state
            this.togglePlayState(true);
            return;
        } catch (ex) {
            console.log(ex.message);
        }
    }

    updateSongInfo(song) {
        console.log('getcurrentsound start');
        if ( /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)) { // Attempt to fix on mobile devices
            
            // Sorry cannot auto play on mobile =_(
            // https://stackoverflow.com/questions/26066062/autoplay-html5-audio-player-on-mobile-browsers
            // Need to use trick.
            // widget.play();
            // setTimeout(() => {
            //         $('#play-btn').trigger('click'); // Cannot fix autoplay issue, but now users can play the track with 1 tap of the play button instead o several (bug fix)
            //         console.log('test play')
            //     }, 2000);
            // this.togglePlayState(true);
            //this.curPlayer.play(); // Extra call for forcing auto playing in mobile

            // Android app workaround https://developer.android.com/reference/android/webkit/WebSettings.html
        }
        this.curPlayer.play(); // Play normally on non mobile
        this.togglePlayState(true);

        this.isPlaying = true;
        let rndImg = __WEBPACK_IMPORTED_MODULE_8__utils__["a" /* default */].fetchRandomImage();
        this.widgetTrack.cover = song.artwork_url;
        this.widgetTrack.title = song.title;
        this.widgetTrack.id = song.id;
        this.widgetTrack.artist = song.user.username || 'N/A'; // Some tracks don't have a usernme associated
        this.widgetTrack.permalink_url = song.permalink_url;
        this.widgetTrack.description = song.description || 'N/A';
        this.widgetTrack.created_at = song.created_at;
        this.widgetTrack.duration = song.duration || 'N/A';
        this.widgetTrack.currentPosition = 0;

        document.title = `\u25B6   Nimbus - ${this.widgetTrack.title}`;

        // Create tag list
        let tagBtns = ``;
        let tagCollection = song.tag_list;
        
        // Get tags that are inside quotes already (treat multiple words as 1 tag)
        let quotedTags = song.tag_list.match(/(["'])(?:(?=(\\?))\2.)*?\1/g);

        // Clean the original list
        tagCollection = tagCollection.replace(/(["'])(?:(?=(\\?))\2.)*?\1/g, ''); // Remove all double quoted entries
        tagCollection = tagCollection.split(' ');
        tagCollection = tagCollection.concat(quotedTags);

        if (song.tag_list !== '') {
            for (let i = 0; i < tagCollection.length; i++) {
                let tagName = tagCollection[i];
                if (tagName !== '' && tagName !== null) {
                    tagName = tagName.replace(/\"/g, '');
                    tagBtns += `<a href="https://soundcloud.com/tags/${tagName}" target="_blank"><button class="btn-transparent">
                        #${tagName}
                    </button></a>
                    `;
                }
            }
        }

        this.mainPlayer.innerHTML = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_2__controls_songinfo__["a" /* default */])((song.artwork_url === null ? song.user.avatar_url : song.artwork_url.replace('large', 't500x500')), song, tagBtns, "javascript:alert('Purchase link unavailable');");
        //this.curTrack.track = track;
        document.getElementById('background').style.backgroundImage = 'url(' + (song.artwork_url === null ? rndImg : song.artwork_url.replace('large', 't500x500')) + ')';

        // Add listener for flipContainer
        this.flipContainer = document.getElementById('flipContainer');
        this.flipContainer.onclick = (e) => {
            $('#flipContainer').toggleClass('flipped');
        }

        this.volumeSlider = document.getElementById('volumeSlider');

        this.volumeSlider.addEventListener('change', () => {
            this.setVolume(this.volumeSlider.value);
        }, false);

        // Async method to build waveform
        (async function() {
            let req = new __WEBPACK_IMPORTED_MODULE_4__request__["a" /* default */](); // Construct it
            let data = await req.getJSON(song.waveform_url);
            console.log(song.waveform_url);

            // Draw the waveform
            const waveFormContainer = document.querySelector('.waveform');
            if (!this.waveform) {
                this.waveform = new __WEBPACK_IMPORTED_MODULE_3__controls_waveform__["a" /* default */]({
                container: waveFormContainer,
                audio: this.curPlayer,
                duration: song.duration,
                data: data.samples,
                peakWidth: 2,
                peakSpace: 1,
                responsive: true,
                mouseOverEvents: true,
                mouseClickEvents: true,
                color: {
                    background: "rgba(140, 140, 140, 0.7)",
                    footer: "rgba(90, 90, 90, 0.6)",
                    footerPlayback: "#5d1835",
                    hoverGradient: {
                        from: "#d91e53",
                        to: "#d91e53"
                    },
                    playbackGradient: {
                        from: "#d91e53",
                        to: "#d91e53"
                    },
                    hoverPlaybackGradient: {
                        from: "#ff2160",
                        to: "#ff2160"
                    }
                }
            });
        } else {
            await waveform.updateWaveformData(data.samples);
        }
        }).bind(this)();

    }

    /**
     * The starting point of the application called by app.js. This initalizes the SoundCloud API.
     */
    start() {
        try {
            SC.initialize({
                client_id: __WEBPACK_IMPORTED_MODULE_0__consts_sec_json___default.a.client_id
            });
        } catch (e) {
            console.log('Error initializing SoundCloud API. Stack trace: ' + e.toString());
        }
        console.log('SoundCloud API initalized!');
    }

    /**
     * Bind event handlers to the widget
     * @param {SoundCloudWidget} widget - widget loaded from API
     */
    bindWidgetEvents(widget) {
        this.curPlayer = widget;
        widget.bind(SC.Widget.Events.READY, (e) => {

            // Bind when the song is playing
            widget.bind(SC.Widget.Events.PLAY_PROGRESS, (e) => {
                this.curPosition = e.currentPosition;
                let curTimeStr = __WEBPACK_IMPORTED_MODULE_8__utils__["a" /* default */].convertMillisecondsToDigitalClock(e.currentPosition).clock;
                let totalTimeStr = __WEBPACK_IMPORTED_MODULE_8__utils__["a" /* default */].convertMillisecondsToDigitalClock(this.widgetTrack.duration).clock;
                document.getElementById('curTime').innerText = `${curTimeStr} / ${totalTimeStr}`;
                
                // For some reason FINISH event no longer fires when changing songs in playlist, manual override here
                if (e.currentPosition === 0) {
                    if (this.isPlaylist && !this.isRepeating && !this.seekingForward) {
                        this.loadWidgetSong(this.curPlayer); // Update track info to the next song in the playlist
                    } else if (this.isPlaylist && this.isRepeating && !this.seekingForward) { // Replay set
                        this.curPlayer.pause();
                        setTimeout(() => {
                            this.curPlayer.prev();
                            this.loadWidgetSong(this.curPlayer);
                        }, 500);
                    } else if (this.seekingForward) {
                        this.curPlayer.seekTo(1);
                        setTimeout(() => {this.seekingForward = false, 500}); // Prevent this event from firing more than once.
                    }
                }
            });

            // Bind when the song has finished
            widget.bind(SC.Widget.Events.FINISH, (e) => {
                // When the song finishes, we need to find a new song to play.
                console.log('finished');
                this.isPlaying = false;

                // Check if user is playing a playlist
                if (this.isPlaylist && !this.isRepeating) {
                    let oldSongID = this.widgetTrack.id;
                    this.togglePlay();
                    this.loadWidgetSong(this.curPlayer); // Update track info to the next song in the playlist
                    this.isPlaying = false;
                    setTimeout(() => {
                        // Check if we have reached the end of the playlist
                        if (oldSongID === this.widgetTrack.id) { // If the last song we played has the same ID as the new one, fetch a new song. (SoundCloud ends up looping the last song again)
                            this.isPlaylist = false;
                            this.setCurIndex = 0;
                            this.setTrackCount = 0;
                            this.fetchNext();
                        } else {
                            this.restartSong();
                            this.togglePlay();
                            this.curPlayer.play();
                        }
                    }, 200);
                    return;
                }

                // Check if repeat is on first. TODO: Make it work with playlists
                if (this.isRepeating) {
                    if (this.isPlaylist) { // If we are repeating in a playlist, we need to go back to previous song since the API preloads the next one
                        this.restartSong();
                        this.curPlayer.pause();
                        this.curPlayer.pause();
                        setTimeout(this.curPlayer.prev(), 200);
                        return;
                    } else {
                        // Else we can just restart the song (API does not preload song)
                        this.restartSong();
                        this.togglePlay();
                        return;
                    }
                }
                
                // Check if the queue is not empty and play whatever song that is next in the queue
                if (this.queue.length > 0) {
                    let nextSong = this.queue.pop(); // Pop the next song

                    if (nextSong) { // If not null
                        this.curPlayer.load(nextSong.track.permalink_url);
                        setTimeout(() => this.loadWidgetSong(this.curPlayer), 2000); // Update player info, song will be added to history here
                    }
                } else if (!this.hasBeenFetched) { // If we have fetched a song already, do not fetch another one.
                    this.fetchNext();
                    this.hasBeenFetched = true;
                }
            });

            // Bind play state event
            widget.bind(SC.Widget.Events.PLAY, (e) => {
                this.togglePlayState(true);
            });

            // Bind pause state event
            widget.bind(SC.Widget.Events.PAUSE, (e) => {
                this.togglePlayState(false);
            });

            // Throw error in case user enters invalid URL
            widget.bind(SC.Widget.Events.ERROR, (e) => {
                alert('Error, unable to load resource.');
            });

        });
    }

    /**
     * This function is designed to get a random track from SoundCloud
     */
    getRandomTrack() {
        try {
            // Choose to use old track ids or new track ids
            let chooseId = (Math.floor(Math.random() * 10));
            let trackId = 0;

            // Generate random song id. Give slight preference to newer tracks 
            if (chooseId > 4) {
                trackId = Math.floor((Math.random() * RAND_COUNT_3) + OFFSET_3);
            } else if (chooseId > 2) {
                trackId = Math.floor((Math.random() * RAND_COUNT_2) + OFFSET_2);
            } else if (chooseId > 1) {
                trackId = Math.floor((Math.random() * RAND_COUNT_1) + OFFSET_1);
            } else {
                trackId = Math.floor((Math.random() * RAND_COUNT) + OFFSET);
            }

            console.log('in id');

            return trackId;
        } catch (e) {
            console.log('getRandomTrack() - ' + e.toString());
        }
    }

    /**
     * Extracts address paramters by name and loads the appropriate content.
     * 
     * 
     * @memberof Player
     */
    checkParamsAndFetch() {
        // Fetch param values if present
        let id = this.getURLParamsByName('id', window.location.href);
        let url = this.getURLParamsByName('url', window.location.href);

        // Do not fetch a random song if an id was already provided
        if (id) // id takes takes precedence
            this.streamSong(id);
        else if (url)
            this.curPlayer.load(url); // Load the song by url (Widget API takes care of the rest)
        else
            this.fetchNext();
    }

    /**
     * Update the UI controls for when the song is playing
     * @param {boolean} playing - if the song is playing or not
     */
    togglePlayState(playing) {
        if (playing) {
            this.playBtn.innerHTML = '<i class="fa fa-pause" aria-hidden="true"></i>';
            document.title = `\u25B6   Nimbus - ${this.widgetTrack.title}`;
        } else {
            this.playBtn.innerHTML = '<i class="fa fa-play" aria-hidden="true"></i>';
            document.title = `\u23F8   Nimbus - ${this.widgetTrack.title}`;
        }
    }

    // UTIL functions
    /**
     * Seek to next song in queue
     */
    seekForward() {
        // If we are in playlist mode, play the next song in the playlist and do not fetch a new song
        if (this.isPlaylist) {
            let nextSongID = this.widgetTrack.id;
            this.seekingForward = true;
            this.restartSong();
            this.curPlayer.pause();
            this.curPlayer.pause(); // Widget not really responsive when user goes back and forth quickly
            setTimeout(this.curPlayer.next(), 200);
            this.restartSong(); // Seems weird to call restartSong() so many times, but this is used to reset the songs and avoid the weird bug where the player plays 2 songs simulatenously.
            this.curPlayer.play();
            this.curPlayer.pause(); // Same interrupted Promise issue from API
            this.curPlayer.play();
            setTimeout(() => {
                this.loadWidgetSong(this.curPlayer);
                setTimeout(() => {
                    console.log(this.widgetTrack.id + ' - ' + nextSongID);
                    if (this.widgetTrack.id === nextSongID) { // If we have reached the end of the playlist
                        this.isPlaylist = false;
                        this.setCurIndex = 0;
                        this.setTrackCount = 0;
                        this.fetchNext();
                    }
                }, 200);

            }, 200);
        } else {
            let nextSong = this.queue.pop(); // Pop the next song

            if (nextSong) { // If not null
                this.curPlayer.load(nextSong.track.permalink_url);
                setTimeout(() => this.loadWidgetSong(this.curPlayer), 2000); // Update player info, will add song to history
            }
        }
    }

    /**
     * Rewind to previous song
     */
    seekBack() {
        // this.isPlaylist = false; // Exit playlist mode so we don't end up stuck in a loop with songs
        // If we are in a playlist, simply move back to the previous song
        if (this.isPlaylist) {
            let lastSongID = this.widgetTrack.id;
            this.restartSong();
            this.curPlayer.pause();
            this.curPlayer.pause();
            setTimeout(this.curPlayer.prev(), 200); // Player not cooperating with async
            this.restartSong(); // Seems weird to call restartSong() so many times, but this is used to reset the songs and avoid the weird bug where the player plays 2 songs simulatenously.
            setTimeout(() => {
                this.loadWidgetSong(this.curPlayer);
                setTimeout(() => {
                    console.log(this.widgetTrack.id + ' - ' + lastSongID);
                    if (this.widgetTrack.id === lastSongID) { // If we have reached the beginning of the playlist
                        this.loadPreviousSong();
                    }
                }, 200); // Needed to be done to allow time for async request to complete in loadWidgetSong()
                
            }, 200);
            this.curPlayer.play();
            this.curPlayer.pause(); // Same interrupted Promise issue from API
            this.curPlayer.play();
            return;
        }
        console.log('not playlist');

        this.loadPreviousSong();
    }

    loadPreviousSong() {
        this.isPlaylist = false;

         // Pop current song and add it to queue so it is our next song
        this.queue.push(this.history.pop());
        let prevSong = this.history[this.history.length - 1].track;

        if (prevSong) { // If not null
            this.curPlayer.load(prevSong.permalink_url);
            console.log(prevSong.permalink_url);
            setTimeout(() => this.loadWidgetSong(this.curPlayer), 2000); // Update player info
        }
    }

    /**
     * Resets the song back to 0
     */
    restartSong() {
        this.curPlayer.seekTo(0);
    }

    /**
     * Increases the volume with the maximum bound being 100.
     * @param {float} offset - how much to increase the volume by
     */
    volumeUp(offset) {
        this.curPlayer.getVolume((vol) => {
            let newVol = Math.min(100, vol + offset);
            this.setVolume(newVol);
        });
    }

    /**
     * Lowers the volume by offset with the minimum bound being 0.
     * @param {float} offset - how much to lower the volume by
     */
    volumeDown(offset) {
        this.curPlayer.getVolume((vol) => {
            let newVol = Math.max(0, vol - offset);
            this.setVolume(newVol);
        });
    }

    /**
     * Sets the volume of the player while updating UI components and user setting.
     * 
     * @param {Number} vol - volume level
     * 
     * @memberof Player
     * 
     */
    setVolume(vol) {
        this.curPlayer.setVolume(vol);
        this.volumeSlider.value = vol;
        __WEBPACK_IMPORTED_MODULE_9__settings__["a" /* default */].storePref('playerVolume', vol);
    }

    /**
     * Updates controls to show that the song is in progress.
     */
    togglePlay() {
        if (!this.isPlaying) {
            // Nuanced but adds that 'break' in the sound so you know it was pressed just in case isPlaying is the wrong value
            this.curPlayer.play(); 
            console.log('isPlaying = true');
            this.isPlaying = true;
            // this.mainPlayer.innerHTML = SongInfo((this.curTrack.track.artwork_url === null ? '../img/cd.png' : this.curTrack.track.artwork_url.replace('large', 't500x500')), this.curTrack.track);
            // Update play state
            this.togglePlayState(true);
        } else {
            this.curPlayer.pause();

            // Update play state
            this.togglePlayState(false);
            this.isPlaying = false;
        }
    }

    /**
     * Fetch the next song and verify that the song exists (non 404).
     */
    fetchNext() {
        try {
            console.log('Queue length - ' + this.queue.length);
            if (this.queue.length > 0) { // First check if the queue is non-empty
                let nextSong = this.queue.pop(); // Pop the next song

                if (nextSong) { // If not null
                    this.history.push({id: nextSong.id, track: nextSong}); // Add it to history
                    this.curPlayer.load(nextSong.permalink_url);
                    setTimeout(() => this.loadWidgetSong(this.curPlayer), 2000); // Update player info
                }
            } else { // If the queue is empty, fetch a new song
                this.curPlayer.pause();
                this.restartSong();
            }
        } catch (e) {
            console.log('fetchNext' + e.toString());
        }
        let id = this.getRandomTrack(); // Works for tracks with 403 errors in other API

        SC.get('/tracks/' + id).then((track) => { // Check if there are results
            // Really just designed to check if the song actually exists
           this.streamSong(id);
        }, (err) => {
            console.log(err.status);
            // if (err.status === 0) { // Invalid API key
            //     console.log('0/401 Unauthorized. Possible Invalid SoundCloud key')
            //     throw '0/401 Unauthorized. Possible Invalid SoundCloud key'
            // }
            if (err.status === 403) { // Play the song anyway even if this API requiest returns a forbidden request (Soundcloud problem)
                this.streamSong(id);
                return;
            }
            // If there is no song with the associated ID, fetch a new one.
            console.log('track fetch fail' + id);
            this.fetchNext();
            console.log('track fetch fail post' + id);
        }).catch((err) => {
            console.log(err.status);
            if (err.status === 0) { // Invalid API key
                console.log('0/401 Unauthorized. Possible Invalid SoundCloud key')
                throw '0/401 Unauthorized. Possible Invalid SoundCloud key';
            }
            if (err.status === 403) { // Play the song anyway even if this API requiest returns a forbidden request (Soundcloud problem)
                this.streamSong(id);
                return;
            }
            // If there is no song with the associated ID, fetch a new one.
            this.fetchNext();
        });
    }

    /**
     * Stream the song when a valid id is found
     * @param {int} id - holds the song id
     */
    streamSong(id) {
        console.log('track fetch success ' + id);
        this.curPlayer.load(`https%3A//api.soundcloud.com/tracks/${id}` + WIDGET_PARAMS);
        this.togglePlayState(true);
        setTimeout(() => this.loadWidgetSong(this.curPlayer), 2000);
    }

    /**
     * Find the song based on user entered keywords, like 'I'm Feeling Lucky' on Google.
     * 
     * @param {String} query - search terms to find song
     * 
     * @memberof Player
     */
    getTrackByKeyWord(query) {
        // Get a list of songs by the search query and play first choice
        try {
            SC.get('/tracks', {q: query}).then((tracks) => {
                if (tracks.length > 0) {
                    // Load the first song
                    this.curPlayer.load(tracks[0].permalink_url); // The "I'm feeling lucky part of the search"
                }
            });
        } catch (e) {
            console.log('getTrackByKeyWord Error - ' + e.message);
        }
    }

    /**
     * Fetches tracks by a list of tags from the user separated by commas.
     * 
     * @param {string} tagList - a string with tags separated by commas
     * 
     * @memberof Player
     */
    getTracksByTags(tagList) {
        try {
            // Create options object to hold what we want to search for
            let options = {
                tags: tagList,
                limit: this.queueNum
            } // TODO: Allow to modify limit later

            SC.get('/tracks', options).then((tracks) => {
                if (tracks.length > 0) {
                    console.log(tracks);

                    let trackCollection = null;
                    if (this.shuffleQueue)
                        trackCollection = this.shuffleTracks(tracks);
                    else
                        trackCollection = tracks.reverse();

                    // Queue all tracks to the queue of the user's playlist. Note that queue is actually acting like a stack since we use push() and pop()
                    for (let i = 0; i < trackCollection.length - 1; i++) { // Skip the first one since we are already playing it at this point (need to subtract upper bound by 1 since we want to exclude the first track from the reversed array)
                        this.queue.push({id: trackCollection[i].id, track: trackCollection[i]});
                        console.log(tracks[i].title);
                    }

                    // Load the song
                    this.curPlayer.load(trackCollection[trackCollection.length - 1].permalink_url);
                
                    // Display toast message when done
                    __WEBPACK_IMPORTED_MODULE_8__utils__["a" /* default */].showToast(`${tracks.length} tracks added to the queue.`);
                } else {
                    __WEBPACK_IMPORTED_MODULE_8__utils__["a" /* default */].showToast('Search returned no results. Please try again.');
                }
            });
        } catch (e) {
            console.log('getTracksByTags Error - ' + e.message);
        }
    }

    /**
     * Searches for a playlist by keyword.
     * 
     * @param {String} query - name of the playlist
     * 
     * @memberof Player
     */
    getSetByKeyWord(query) {
        try {
            SC.get('/playlists', {q: query}).then((sets) => {
                if (sets.length > 0) {
                    if (this.shuffleQueue) { // If we want to shuffle the results
                        // Load the set
                        let resIndex = Math.floor(Math.random() * (sets.length + 1));
                        this.curPlayer.load(sets[resIndex].permalink_url); // The "I'm feeling lucky part of the search"
                        this.setTrackCount = sets[resIndex].track_count;
                        __WEBPACK_IMPORTED_MODULE_8__utils__["a" /* default */].showToast(`Now playing ${sets[resIndex].title} (${this.setTrackCount} songs)`)
                    } else {
                        // Load the set
                        this.curPlayer.load(sets[0].permalink_url); // The "I'm feeling lucky part of the search"
                        this.setTrackCount = sets[0].track_count;
                        __WEBPACK_IMPORTED_MODULE_8__utils__["a" /* default */].showToast(`Now playing ${sets[0].title} (${this.setTrackCount} songs)`)
                    }
                }
            });
        } catch (e) {
            console.log('getSetByKeyWord Error - ' + e.message);
        }
    }

    /**
     * Searches for the first queueNum songs by a user.
     * 
     * @param {String} user - username of the user
     * 
     * @memberof Player
     */
    getTracksByUser(user) {
        try {
            SC.resolve(`https://soundcloud.com/${user}`).then((response) => {
                try {
                    // Create options object to hold what we want to search for
                    let options = {
                        limit: this.queueNum
                    } // TODO: Allow to modify limit later

                    SC.get(`/users/${response.id}/tracks`, options).then((tracks) => {
                        console.log(tracks);
                        if (tracks.length > 0) {

                            let trackCollection = null;
                            if (this.shuffleQueue)
                                trackCollection = this.shuffleTracks(tracks);
                            else
                                trackCollection = tracks.reverse();

                            // Queue all tracks to the queue of the user's playlist. Note that queue is actually acting like a stack since we use push() and pop()
                            for (let i = 0; i < trackCollection.length - 1; i++) { // Skip the first one since we are already playing it at this point (need to subtract upper bound by 1 since we want to exclude the first track from the reversed array)
                                this.queue.push({id: trackCollection[i].id, track: trackCollection[i]});
                                console.log(tracks[i].title);
                            }
                            
                            // Load the song
                            this.curPlayer.load(trackCollection[trackCollection.length - 1].permalink_url); // Top of the result
                        
                            // Display toast message when done
                            __WEBPACK_IMPORTED_MODULE_8__utils__["a" /* default */].showToast(`${tracks.length} tracks added to the queue.`);
                        } else {
                            __WEBPACK_IMPORTED_MODULE_8__utils__["a" /* default */].showToast('Search returned no results. Please try again.');
                        }
                    });
                } catch (e) {
                    console.log('getSongsByUser Error - ' + e.message);
                }
            });
        } catch (e) {
            console.log(e);
        }
    }

    /**
     * Searches for songs by genres (string of genres separated by commas)
     * 
     * @param {String} genreList - comma separated list of genres
     * 
     * @memberof Player
     */
    getTracksByGenres(genreList) {
        try {
            // Create options object to hold what we want to search for
            let options = {
                genres: genreList,
                limit: this.queueNum
            } // TODO: Allow to modify limit later

            SC.get('/tracks', options).then((tracks) => {
                if (tracks.length > 0) {

                    let trackCollection = null;
                    if (this.shuffleQueue)
                        trackCollection = this.shuffleTracks(tracks);
                    else
                        trackCollection = tracks.reverse();

                    // Queue all tracks to the queue of the user's playlist. Note that queue is actually acting like a stack since we use push() and pop()
                    for (let i = 0; i < trackCollection.length - 1; i++) { // Skip the first one since we are already playing it at this point (need to subtract upper bound by 1 since we want to exclude the first track from the reversed array)
                        this.queue.push({id: trackCollection[i].id, track: trackCollection[i]});
                    }

                    // Load the song
                    this.curPlayer.load(trackCollection[trackCollection.length - 1].permalink_url);
                
                    // Display toast message when done
                    __WEBPACK_IMPORTED_MODULE_8__utils__["a" /* default */].showToast(`${tracks.length} tracks added to the queue.`);
                } else {
                    __WEBPACK_IMPORTED_MODULE_8__utils__["a" /* default */].showToast('Search returned no results. Please try again.');
                }
            });
        } catch (e) {
            console.log('getSongsByGenres Error - ' + e.message);
        }
    }

    /**
     * Checks if song history contains a song by id.
     * 
     * @param {Number} id - id of the song we are looking for.
     * @returns {Boolean}
     * 
     * @memberof Player
     */
    historyContainsId(id) {
        let found = false;
        for (let i = 0; i < this.history.length; i++) {
            if (this.history[i].id === id) {
                found = true;
            }
        };
        return found;
    }

    /**
     * Extracts the url params to play specific tracks on load.
     * 
     * @param {String} name - name of the param
     * @param {String} url - current address loaded by the user
     * @returns 
     * 
     * @memberof Player
     */
    getURLParamsByName(name, url) {
        if (!url) url = window.location.href;
        name = name.replace(/[\[\]]/g, "\\$&");
        var regex = new RegExp("[?&]" + name + "(=([^&#]*)|&|#|$)"),
            results = regex.exec(url);
        if (!results) return null;
        if (!results[2]) return '';
        return decodeURIComponent(results[2].replace(/\+/g, " "));
    }

    shuffleTracks(tracks) {
        let temp = null;
        console.log('shuffling tracks');
        // Using in place Durstenfeld shuffle
        for (let i = tracks.length - 1; i > 0; i --) {
            let j = Math.floor(Math.random() * (i+1)); // Generate a random index [0...i]
            temp = tracks[i]; // Start swapping
            tracks[i] = tracks[j];
            tracks[j] = temp;
        }

        return tracks;
    }

    getTracksFromCharts(_kind, _genres, _limit, $_partition = 1) {
        // kind=top&genre=soundcloud%3Agenres%3Aall-music&limit=50
        try {
            // let oReq = new XMLHttpRequest(); //New request object
            // oReq.onload = function() {
            //     // Callback
            //     let songs = JSON.parse(this.responseText);
            //     console.log(songs);
            //     console.log(this.queue);
            // };
            // oReq.open("get", `http://polarity.x10.mx/test.php?kind=${_kind}&genre=${_genres}&limit=${_limit}&linked_partitioning=${$_partition}&client_id=${consts.client_id}`, true);
            // //                               ^ Don't block the rest of the execution.
            // //                                 Don't wait until the request finishes to 
            // //                                 continue.
            // oReq.send();
            // // console.log(`https://api-v2.soundcloud.com/charts?kind=${_kind}&genre=${_genres}&limit=${_limit}&linked_partitioning=${$_partition}&client_id=${consts.client_id}`);
            // // let req = new Request(); // Construct it
            // // let tracks = await req.getJSON(`https://api-v2.soundcloud.com/charts?kind=${_kind}&genre=${_genres}&limit=${_limit}&linked_partitioning=${$_partition}&client_id=${consts.client_id}`);

            $.ajax({
                url: 'http://polarity.x10.mx/nimbus/charts.php', //This is the current doc
                type: "GET",
                dataType:'json', // add json datatype to get json
                data: ({
                    kind: _kind,
                    genre: _genres,
                    limit: _limit,
                    linked_partitioning: $_partition,
                    client_id: __WEBPACK_IMPORTED_MODULE_0__consts_sec_json___default.a.client_id
                }),
                success: (data) => {
                    let trackCollection = null;
                    if (this.shuffleQueue)
                        trackCollection = this.shuffleTracks(data.collection);
                    else
                        trackCollection = data.collection.reverse();

                    for (let i = 0; i < trackCollection.length - 1; i++) {
                        this.queue.push({id: trackCollection[i].track.id, track: trackCollection[i].track}); // This needs the track identifier
                    }

                    console.log(trackCollection);

                     // Load the song
                    this.curPlayer.load(trackCollection[trackCollection.length - 1].track.permalink_url);
                    setTimeout(() => this.loadWidgetSong(this.curPlayer), 1000);
                    
                    // Display toast message when done
                    __WEBPACK_IMPORTED_MODULE_8__utils__["a" /* default */].showToast(`${trackCollection.length} tracks added to the queue.`);
                }
            });  
        } catch (e) {
            console.log('getTracksFromCharts Error - ' + e.message); 
        }
    }
}

/* harmony default export */ __webpack_exports__["a"] = (Player);

/***/ }),
/* 7 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__consts_sec_json__ = __webpack_require__(2);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__consts_sec_json___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0__consts_sec_json__);


let SC = __webpack_require__(0);

class HistItem {

    constructor(bg, track, player, errorDownloadCallback) {
        this._bg = bg;
        this._track = track;
        this._errorDownloadCallback = errorDownloadCallback;

        this.histItem = document.createElement('div');
        this.histItem.className = 'card';
        this.histItem.setAttribute('id', 'histItem');
        this.histItem.setAttribute('data-id', track.id);
        this.histItem.addEventListener('click', (e) => {
            player.streamSong(track.id);
        }, false);
        let tempInner = document.createElement('div');
        tempInner.innerHTML = `
            <div class="card" data-id="${this._track.id}">
                <div id="histItemBg" class="bg-image" style="background-image: url('${this._bg}')"></div>
                <div class="player-content overlay">
                    <div class="row level">
                        <div class="level-left" style="position:relative;">
                            <img src="${this._track.artwork_url === null ? this._track.user.avatar_url : this._track.artwork_url}">
                            <span class="hist-play center">
                                <i class="fa fa-play center-alt" aria-hidden="true"></i>
                            </span>
                        </div>
                        <div class="desc">
                            <p class="title">${this._track.title}</p>
                            <p class="subtitle">${this._track.user.username}</p>
                            <p class="subtitle">${this._track.genre || 'N/A'}</p>
                        </div>
                    </div>
                </div>
                <div class="row overlay">
                    <div class="action-bar center no-padding">
                        <div class="action-bar-item">
                            <a href="${this._track.downloadable === false ? this._errorDownloadCallback : `https://api.soundcloud.com/tracks/${this._track.id}/download?client_id=${__WEBPACK_IMPORTED_MODULE_0__consts_sec_json___default.a.client_id}`}" target="_blank"><button class="btn-transparent">Download</button></a>
                        </div>
                        <div class="action-bar-item">
                            <a href="${this._track.permalink_url}" target="_blank"><button class="btn-transparent">View</button></a>
                        </div>
                    </div>
                </div>
            </div>
        `;
        this.histItem.appendChild(tempInner); // Must use this method to preserve listeners
    }

    render() {
         return this.histItem; // Cannot return innerHTML since that removes all listeners
    }
}

/* harmony default export */ __webpack_exports__["a"] = (HistItem);

/***/ }),
/* 8 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__chartitem__ = __webpack_require__(4);


class Charts {

    constructor(player) {
        this._player = player;
        this.isShown = false;
        this.render();
        this.bindEvents();

        // Load the charts
        let c = null;
        this.chartContainer = document.querySelector('#allCharts');
        $.ajax({
            url: 'http://polarity.x10.mx/nimbus/charts.json',
            type: "GET",
            dataType:'json', 
            success: (data) => {
                for (let i = 0; i < data.collection.length; i++) {
                    c = new __WEBPACK_IMPORTED_MODULE_0__chartitem__["a" /* default */](this._player, data.collection[i].chart.title, data.collection[i].chart.author, data.collection[i].chart.kind, data.collection[i].chart.genre_url, data.collection[i].chart.limit, data.collection[i].chart.image_url);
                    this.chartContainer.appendChild(c.render());
                }
            }
        });
    }

    render() {
        document.querySelector('#chartModalContainer').innerHTML += `
            <div class="hero-body">
                <div id="chartsCloseButton" class="dialog-close-btn link-btn">
                    <span class="icon">
                        <i class="fa fa-times" aria-hidden="true"></i>
                    </span>
                </div>
                <div class="content">
                    <div class="row">
                        <h3 class="white">Charts</h3>
                        <div class="row" id="allCharts">

                        </div>
                    </div>
                </div>
            </div>
        `;
    }

    bindEvents() {
        this.chartsCloseButton = document.getElementById('chartsCloseButton');

        // Event handler for close button for search dialog
        this.chartsCloseButton.onclick = (e) => {
            this.hideCharts();
        }
    }

    toggleCharts() {
        // Scroll to top to show the search dialog
        window.scrollTo(0, 0);

        this.isShown = !this.isShown;
        if (this.isShown) {
            $('#chartModalContainer').addClass('shown');
            if ($(window).width() <= 768)
                $('body').css({'overflow-y': 'hidden'});
            //if (window.innerWidth > 768) {
                $('#playerHero').addClass('unfocused');
            //}
        } else {
            // Reset dialog (must place up here to account for invalid input)
            $('#chartModalContainer').removeClass('shown'); // Hide the search modal
            if ($(window).width() <= 768) // For mobile UI
                $('body').css({'overflow-y': 'scroll'});

            //if (window.innerWidth > 768) {
                $('#playerHero').removeClass('unfocused');
            //}
        }
    }


    hideCharts() {
        // Reset dialog (must place up here to account for invalid input)
        $('#chartModalContainer').removeClass('shown'); // Hide the search modal
        if ($(window).width() <= 768) // For mobile UI
            $('body').css({'overflow-y': 'scroll'});
        this.isShown = false;
        //if (window.innerWidth > 768) {
            $('#playerHero').removeClass('unfocused');
        //}
    }

}

/* harmony default export */ __webpack_exports__["a"] = (Charts);

/***/ }),
/* 9 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__queueitem__ = __webpack_require__(10);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__js_utils__ = __webpack_require__(1);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__js_settings__ = __webpack_require__(3);




class Dashboard {

    constructor(player) {
        this._player = player;
        this.isShown = false;
        this.queueItemCount = 0; // Counts number of songs on queue
        document.querySelector('#dashboardModalContainer').innerHTML += this.render();
        this.bindEvents();
        __WEBPACK_IMPORTED_MODULE_2__js_settings__["a" /* default */].loadPrefs(); // Init settings
        this.updateControls(); // Update settings controls
    }

    render() {
        return `
            <div class="hero-body">
                <div id="dashboardCloseBtn" class="dialog-close-btn link-btn">
                    <span class="icon">
                        <i class="fa fa-times" aria-hidden="true"></i>
                    </span>
                </div>
                <div id="tabs" class="content">
                    <div class="tab-container tabs-center">
                        <ul>
                            <li class="tab-item selected">
                                <a>Settings</a>
                            </li>
                            <li id="queueTab" class="tab-item">
                                <a>Queue</a>
                            </li>
                        </ul>
                    </div>
                    <div class="tabpage shown">
                        <h3>Settings</h3>
                        <div class="divider"></div>
                        <div class="row">
                            <div class="toggle-container">
                                <p>Disable Animations</p>
                                <div class="toggle-switch"><input type="checkbox" id="chkAnimations"/><label for="chkAnimations"></label></div>
                            </div>
                            <div class="toggle-container">
                                <p>Disable Blur</p>
                                <div class="toggle-switch"><input type="checkbox" id="chkBlur"/><label for="chkBlur"></label></div>
                            </div>
                        </div>
                    </div>
                    <div class="tabpage">
                        <div class="row level">
                            <h3 style="flex-grow: 1;">Queue</h3><button id="btnClearQueue" class="btn-small btn-nimbus">Clear Queue</button>
                        </div>
                        <div class="divider"></div>
                        <space></space>
                        <div id="queueContainer">

                        </div>
                    </div>
                </div>
            </div>
        `;
    }

    bindEvents() {
        this.dashboardCloseBtn = document.getElementById('dashboardCloseBtn');
        this.queueTab = document.getElementById('queueTab');
        this.queueContainer = document.getElementById('queueContainer');
        this.btnClearQueue = document.getElementById('btnClearQueue');

        this.chkAnimations = document.getElementById('chkAnimations');
        this.chkBlur = document.getElementById('chkBlur');

        // Event handler for close button for search dialog
        this.dashboardCloseBtn.onclick = (e) => {
            this.hideDashboard();
        }

        this.queueTab.onclick = (e) => {
            // Update queue items
            this.refreshQueueContainer();
        }

        // Settings controls
        this.chkAnimations.onclick = (e) => {
            __WEBPACK_IMPORTED_MODULE_2__js_settings__["a" /* default */].storePref('disableAnimations', this.chkAnimations.checked);
            if (this.chkAnimations.checked && !document.getElementById("disableAnimations")) {
                $(__WEBPACK_IMPORTED_MODULE_2__js_settings__["a" /* default */].disableAnimationsCSS).appendTo("head");
            } else {
                $('#disableAnimations').remove(); // Remove the style sheet
            }
        }

        this.chkBlur.onclick = (e) => {
            __WEBPACK_IMPORTED_MODULE_2__js_settings__["a" /* default */].storePref('disableBlur', this.chkBlur.checked);
            if (this.chkBlur.checked && !document.getElementById("disableBlur")) {
                $(__WEBPACK_IMPORTED_MODULE_2__js_settings__["a" /* default */].disableBlurCSS).appendTo("head");
            } else {
                $('#disableBlur').remove(); // Remove the style sheet
            }
        }

        this.btnClearQueue.onclick = (e) => {
            this.clearQueue();
        }
    }

    updateControls() {

        // Update settings controls
        this.chkAnimations.checked = JSON.parse(__WEBPACK_IMPORTED_MODULE_2__js_settings__["a" /* default */].getPref('disableAnimations'));
        this.chkBlur.checked = JSON.parse(__WEBPACK_IMPORTED_MODULE_2__js_settings__["a" /* default */].getPref('disableBlur'));
    }

    toggleDashboard() {
        // Scroll to top to show the search dialog
        window.scrollTo(0, 0);

        this.isShown = !this.isShown;
        if (this.isShown) {
            $('#dashboardModalContainer').addClass('shown');
            if ($(window).width() <= 768)
                $('body').css({'overflow-y': 'hidden'});
            this.refreshQueueContainer();
            //if (window.innerWidth > 768) {
                $('#playerHero').addClass('unfocused');
            //}
        } else {
            // Reset dialog (must place up here to account for invalid input)
            $('#dashboardModalContainer').removeClass('shown'); // Hide the search modal
            if ($(window).width() <= 768) // For mobile UI
                $('body').css({'overflow-y': 'scroll'});

            //if (window.innerWidth > 768) {
                $('#playerHero').removeClass('unfocused');
            //}
        }
    }


    hideDashboard() {
        // Reset dialog (must place up here to account for invalid input)
        $('#dashboardModalContainer').removeClass('shown'); // Hide the search modal
        if ($(window).width() <= 768) // For mobile UI
            $('body').css({'overflow-y': 'scroll'});
        this.isShown = false;
        //if (window.innerWidth > 768) {
            $('#playerHero').removeClass('unfocused');
        //}
    }
    
    refreshQueueContainer() {
        this.queueContainer.innerHTML = `<div></div>`; // Clear the container
        if (this._player.queue.length > 0 ) {
            this.queueItemCount = 0;
            let q = null;
            let frag = document.createElement('div');;
            for (let i = this._player.queue.length - 1; i >= 0; i--) {
                q = new __WEBPACK_IMPORTED_MODULE_0__queueitem__["a" /* default */](this._player, this._player.queue[i].track);
                frag.appendChild(q.render());
                this.queueItemCount += 1;
            }
            this.queueContainer.appendChild(frag);

            $('.queueDelete').on('click', () => { // Add event handler on all tracks, not the most efficient: https://stackoverflow.com/questions/11248855/how-do-i-use-jquery-get-the-id-of-the-div-which-has-been-clicked-on
                let curIndex = this._player.queue.map((track) => {return String(track.id)}).indexOf(String($(event.currentTarget).attr('data-id'))); // Find the song's id associated with this object in the queue
                // NOTE: Must convert mapped vars to string or same datatype in order to check for equality
                if (curIndex === -1) return; // In case we couldn't find it, which is an error
                this._player.queue.splice(curIndex, 1); // Remove the element
                this.refreshQueueContainer(); // Update the queue container
            });
        } else {
            this.queueItemCount = 0;
            // Notification that queue is empty
            this.queueContainer.innerHTML = `<div class="text-center">
                <h6 class="light" style="color: #717579;">
                Looks like your queue is empty. Nimbus will continue to fetch music in the background.</h6>
            </div>`;
        }
    }

    clearQueue() {
        this._player.queue = []; // Clear the queue
        this.queueContainer.innerHTML = `<div class="text-center">
                <h6 class="light" style="color: #717579;">
                Looks like your queue is empty. Nimbus will continue to fetch music in the background.</h6>
            </div>`;
    }
}

/* harmony default export */ __webpack_exports__["a"] = (Dashboard);

/***/ }),
/* 10 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__js_utils__ = __webpack_require__(1);


class QueueItem {

    constructor(player, track) {
        this._player = player;
        this._track = track;

        this.queueItem = document.createElement('div');
        this.queueItem.innerHTML = `
            <div class="queue-item">
                <h6 class="title light btn-tooltip" data-tooltip="${this._track.title}"><span>${this._track.title}</span><div class="pull-right">${__WEBPACK_IMPORTED_MODULE_0__js_utils__["a" /* default */].convertMillisecondsToDigitalClock(this._track.duration).clock}</div></h6>
                <p class="subtitle"><span>${this._track.user.username}</span>
                    <span class="queue-item-actions pull-right">
                        <a href="${this._track.permalink_url}" target="_blank"><span class="icon"><i class="fa fa-external-link-square small" aria-hidden="true"></i></span></a>
                        <span class="icon queueDelete" data-id="${this._track.id}"><i class="fa fa-times small" aria-hidden="true"></i></span>
                    </span>
                </p>
            </div>
        `;
    }

    render() {
        return this.queueItem;
    }

    bindEvents() {
       
    }
}

/* harmony default export */ __webpack_exports__["a"] = (QueueItem);

/***/ }),
/* 11 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__chartitem__ = __webpack_require__(4);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__js_utils__ = __webpack_require__(1);



let SC = __webpack_require__(0);

class Search {

    constructor(player) {
        this._player = player;
        this.isShown = false;
        
        this.render();
        this.bindEvents();

        this.loadCharts();
    }

    render() {
        // Create the search dialog html
        document.querySelector('#searchModalContainer').innerHTML += `
            <div class="hero-body">
                <div id="searchCloseBtn" class="dialog-close-btn link-btn">
                    <span class="icon">
                        <i class="fa fa-times" aria-hidden="true"></i>
                    </span>
                </div>
                <div class="content">
                    <space style="height: 20vh;"></space>
                    <h6 class="uppercase">Search for songs, <span class="search-item" id="searchSets">sets</span>, <span class="search-item" id="searchUser">users</span>, <span class="search-item" id="searchTags">tags</span>, and more</h6>
                    <input type="text" placeholder="search" id="searchField"/>
                    <space></space>
                    <div class="overflow-container">
                        <div class="row level" id="optionsContainer">
                            <label class="button-switch btn-tooltip" data-tooltip="Shuffle tracks before adding to queue.">
                                <input type="checkbox" name="shuffle" value="Shuffle" id="chkShuffle"/>
                                <span class="uppercase">Shuffle</span>
                            </label>
                            <label class="button-switch btn-tooltip" data-tooltip="Number of results to queue.">
                                <input type="checkbox" name="results" value="results" id="chkNumber">
                                <span id="chkNumberText" class="uppercase">120 results</span>
                            </label>
                        </div>
                    </div>
                    <space class="x-large"></space>
                    <div class="row">
                        <div class="row level toggle-container">
                            <h3 class="white">Featured</h3>
                            <button id="charts-btn" class="btn-nimbus">View All</button>
                        </div>
                        <div class="row flex expand" id="chartContainer">

                        </div>
                    </div>
                </div>
            </div>
            `;
    }

    bindEvents() {
        this.searchCloseBtn = document.getElementById('searchCloseBtn');
        this.searchField = document.getElementById('searchField');
        this.chkShuffle = document.getElementById('chkShuffle');
        this.chkNumber = document.getElementById('chkNumber');
        this.btnCharts = document.getElementById('charts-btn');

        this.searchSets = document.getElementById('searchSets');
        this.searchUser = document.getElementById('searchUser');
        this.searchTags = document.getElementById('searchTags');

        // Bind search field key combination
        this.searchField.onkeydown = (e) => {
            if (e.keyCode === 13) {
                // EDIT: If the queue is nonempty, preserve the queue elements and just insert the song in between history and queue (no code)

                // Hide the search dialog
                this.hideSearchDialog();
                this.processSearchField();
            }
        }

        document.onkeyup = (e) => {
            if (e.keyCode === 27) { // esc
                this.toggleSearchDialog();
            }
        }

        // Event handler for close button for search dialog
        this.searchCloseBtn.onclick = (e) => {
            this.hideSearchDialog();
        }

        this.chkShuffle.onclick = (e) => {
            this._player.shuffleQueue = this.chkShuffle.checked;
        }

        this.chkNumber.onclick = (e) => {
            this.setResultCount();
        }

        this.searchSets.onclick = (e) => {
            this.searchItemClick(this.searchSets);
            this.searchField.focus();
        }  

        this.searchUser.onclick = (e) => {
            this.searchItemClick(this.searchUser);
            this.searchField.focus();
        }

        this.searchTags.onclick = (e) => {
            this.searchItemClick(this.searchTags);
            this.searchField.focus();
        }

        // Event handler to show the charts
        this.btnCharts.onclick = (e) => {
            this.hideSearchDialog();
            this._player.chartsDialog.toggleCharts();
        }
    }

    processSearchField() {
        // Check if input is empty
        if (this.searchField.value.length === 0)
            return; // Exit

        let iframeID = document.getElementById('widgettest');
        this._player.curPlayer = SC.Widget(iframeID);

        let searchQuery = this.searchField.value.toLowerCase(); // Assign the search query

        // Determine input type
        if (searchQuery.startsWith('http') && isNaN(searchQuery)) { // Check if this is a url
            this._player.isPlaylist = false; // Reset
            if (searchQuery.includes('sets')) {
                this._player.isPlaylist = true;
            }                    
            this._player.curPlayer.load(`${searchQuery}`);
        } else if (isNaN(searchQuery)) { // Check if this is a string query
            // Check tags
            console.log(searchQuery.startsWith('set:'));
            if (searchQuery.startsWith('playlist:') || searchQuery.startsWith('set:')) {
                this._player.getSetByKeyWord(searchQuery.split(':')[1].trim());
                this._player.isPlaylist = true;
            } else if (searchQuery.startsWith('tag:') || searchQuery.startsWith('tags:')) {
                this._player.getTracksByTags(searchQuery.split(':')[1].trim());
                this._player.isPlaylist = false;
            } else if (searchQuery.startsWith('user:')){
                this._player.getTracksByUser(searchQuery.split(':')[1].trim());
                this._player.isPlaylist = false;
            } else if (searchQuery.startsWith('genre:') || searchQuery.startsWith('genres:')) {
                this._player.getTracksByGenres(searchQuery.split(':')[1].trim());
                this._player.isPlaylist = false;
            } else {
                this._player.getTrackByKeyWord(searchQuery);
                this._player.isPlaylist = false;
            }
        } else { // Must be a song ID
            this._player.curPlayer.load(`https%3A//api.soundcloud.com/tracks/${searchQuery}`); // For id
            this._player.isPlaylist = false;
        }

        setTimeout(() => this._player.loadWidgetSong(this._player.curPlayer), 2000); // Needs longer delay time so it prevents stalling (track not auto playing)
    }

    toggleSearchDialog() {
        // Scroll to top to show the search dialog
        window.scrollTo(0, 0);

        this.isShown = !this.isShown;
        if (this.isShown) {
            this.searchField.value = "";
            this.searchField.focus();
            $('#searchModalContainer').addClass('shown');
            if ($(window).width() <= 768)
                $('body').css({'overflow-y': 'hidden'});

            //if (window.innerWidth > 768) {
                $('#playerHero').addClass('unfocused');
            //}
        } else {
            // Reset dialog (must place up here to account for invalid input)
            $('#searchModalContainer').removeClass('shown'); // Hide the search modal
            if ($(window).width() <= 768) // For mobile UI
                $('body').css({'overflow-y': 'scroll'});

            //if (window.innerWidth > 768) {
                $('#playerHero').removeClass('unfocused');
            //}
        }
    }


    hideSearchDialog() {
        // Reset dialog (must place up here to account for invalid input)
        $('#searchModalContainer').removeClass('shown'); // Hide the search modal
        if ($(window).width() <= 768) // For mobile UI
            $('body').css({'overflow-y': 'scroll'});

        //if (window.innerWidth > 768) {
            $('#playerHero').removeClass('unfocused');
        //}
        this.isShown = false;
    }

    // Search tag buttons
    searchItemClick(element) {
        switch (element.id) {
            case 'searchSets':
                this.searchField.value = 'set: ';
                break;
            case 'searchUser':
                this.searchField.value = 'user: ';
                break;
            case 'searchTags':
                this.searchField.value = 'tags: ';
        }
    }

    setResultCount() {
        let count = prompt('How many results do you want to queue?');

        if (count === null || !isFinite(count)) {
            __WEBPACK_IMPORTED_MODULE_1__js_utils__["a" /* default */].showToast('Please enter a numerical value and try again.');
            this.chkNumber.checked = false;
            return;
        }
        $('#chkNumberText').text(`${count} results`);
        this._player.queueNum = count;
    }

    loadCharts() {
        let c = null;
        this.chartContainer = document.querySelector('#chartContainer');
        $.ajax({
            url: 'http://polarity.x10.mx/nimbus/featured.json',
            type: "GET",
            dataType:'json', 
            success: (data) => {
                for (let i = 0; i < data.collection.length; i++) {
                    c = new __WEBPACK_IMPORTED_MODULE_0__chartitem__["a" /* default */](this._player, data.collection[i].chart.title, data.collection[i].chart.author, data.collection[i].chart.kind, data.collection[i].chart.genre_url, data.collection[i].chart.limit, data.collection[i].chart.image_url);
                    this.chartContainer.appendChild(c.render());
                }
            }
        });
        
    }

}

/* harmony default export */ __webpack_exports__["a"] = (Search);

/***/ }),
/* 12 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
const SongInfo = (largeArt, track, tags, errorPurchase) => (
    `
        <div class="card level">
            <div class="content-no-padding text-center">
                    <div class="row center" id="artContainer">
                        <div class="col-12 no-margin no-padding">
                            <div class="flipContainer" id="flipContainer">
                                <img id="songArt" src="${largeArt}">
                                <div class="song-desc">
                                    <div class="content-no-padding">
                                        <div class="row text-center" id="descNavBar">
                                            <button class="btn-transparent" id="desc-likes"><i class="fa fa-heart small" aria-hidden="true"></i><span>${track.likes_count}</span></button>
                                            <a href="${track.permalink_url + '/comments'}" target="_blank"><button class="btn-transparent" id="desc-comments"><i class="fa fa-comment small" aria-hidden="true"></i><span>${track.comment_count || 0}</span></button></a>
                                            <button class="btn-transparent" id="desc-reposts"><i class="fa fa-retweet small" aria-hidden="true"></i><span>${track.reposts_count}</span></button>
                                            <a href="${track.user.permalink_url}" target="_blank"><button class="btn-transparent" id="desc-user"><i class="fa fa-user small" aria-hidden="true"></i><span>${track.user.username}</span></button></a>
                                            <a href="${track.user.purchase_url || errorPurchase}" target="_blank"><button class="btn-transparent" id="desc-buy"><i class="fa fa-usd small" aria-hidden="true"></i><span>Purchase</span></button></a>
                                        </div>
                                        <div class="row text-center" id="descStats">
                                            <p>Created: ${track.created_at.split('T')[0].replace(/-/g, ' / ')}</p>
                                        </div>
                                        <div class="row" id="descTags">
                                            ${tags}
                                        </div>
                                    </div>
                                    <space class="large"></space>
                                    <div class="content">
                                        <pre>${track.description || 'No description available.'}</pre>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <h5 id="trackTitle" class="light">${track.title}</h5>
                    <p class="title uppercase" id="trackUser">${track.user.username}</p>
                    <p class="subtitle" id="curTime">0:00 / 4:20</p>
                    <div class="waveform"></div>
                    <space></space>
                    <div class="level" id="volumeContainer">
                        <span class="icon"><i class="fa fa-volume-off" aria-hidden="true"></i></span>
                        <input id="volumeSlider" type="range" min="0" max="100" value="0" class="range"/>
                    </div>
            </div>
        </div>
    `
);

/* harmony default export */ __webpack_exports__["a"] = (SongInfo);

/***/ }),
/* 13 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__js_settings__ = __webpack_require__(3);
/**
 * Draws the waveform component of the player.
 */

let SC = __webpack_require__(0);

class WaveForm {

    /**
     * Constructor for the waveform
     * @param {WaveFormConfig} - {
            container: HTMLElement,
            audio: Audio,
            data: Array,
            peakWidth: number,
            peakSpace: number,
            responsive: boolean,
            mouseOverEvents: boolean,
            color: {
                background: string,
                footer: string,
                footerPlayback: string,
                hoverGradient: {
                    from: string,
                    to: string
                },
                    playbackGradient: {
                    from: string,
                    to: string
                },
                    hoverPlaybackGradient: {
                    from: string,
                    to: string
                }
            }
        }
     */
    constructor(params) {
        this.currentPosition = 0;
        this.duration = 0;
        this.mouseOver = false;
        this.canvas = null;

        this.waveFormFrame = 0;
        this.updateInterval = (__WEBPACK_IMPORTED_MODULE_0__js_settings__["a" /* default */].getPref('batterySaver') ? 100 : 10); // Update every whatever metric SC uses

        // Create the config file for the waveform settings
        this.config = {
            container: null,
            audio: null,
            duration: 0,
            data: null,
            peakWidth: 2, // Pixel width of the vertical lines in the waveform
            peakSpace: 2, // The space between the peaks in pixels
            responsive: true,
            mouseOverEvents: true,
            mouseClickEvents: true,
            // Color config
            color: {
                background: "#8C8C8C",
                footer: "#B2B2B2",
                footerPlayback: "#FFAA80",
                hoverGradient: {
                from: "#FF7200",
                to: "#DA4218"
                },
                playbackGradient: {
                    from: "#FF7200",
                    to: "#DA4218"
                },
                hoverPlaybackGradient: {
                    from: "#AB5D20",
                    to: "#A84024"
                }
            }
        }; // Config object end

        if (params) { // Check if not null
            Object.assign(this.config, params); // Enumerate through fields and assign them to corresponding fields in this.config (Similar to serializing)
        }

        // Update duration
        this.duration = this.config.duration;

        this.buildCanvas();
        this.bindEvents();
        this.drawWaveForm(); // Draw the waveform
    }

    /**
     * Create the canvas
     */
    buildCanvas() {
        this.canvas = document.createElement('canvas'); // Create the canvas element
        this.config.container.appendChild(this.canvas); // Update the container to the canvas object
        this.updateCanvasSize();
        this.ctx = this.canvas.getContext('2d');
        this.ctx.lineWidth = this.config.peakWidth; // Sets the width of each vertical line in the canvas.
    }

    /**
     * Bind waveform events
     */
    bindEvents() {
        if (this.config.responsive) // If waveform is responsive, resize with parent.
            this.onResizeHandler();

        if (this.config.mouseOverEvents) { // Enable mouse over/leave events
            this.onMouseMoveHandler();
            this.onMouseLeaveHandler();
        }

        if (this.config.mouseClickEvents) // Enable mouse click handling
            this.onMouseClickHandler();
        
        if (this.config.audio) { // TODO: Need to figure out how to bind with widget API, not regular API.
            this.onTimeUpdateHandler();
            this.onCanPlayHandler();
        }
    }

    /**
     * EVENT HANDLERS
     */

     /**
      * This fires when the widget is ready and updates the waveform by duration and current time.
      * NOTE: This event might not be fired.
      */
    onCanPlayHandler() {
        // READY signal might not be needed
        this.config.audio.bind(SC.Widget.Events.READY, (e) => {
            this.currentPosition = this.config.audio.currentPosition;
            this.drawWaveForm();
        });
    }

    /**
     * Event fired when time updates in the widget object
     */
    onTimeUpdateHandler() {
        this.config.audio.bind(SC.Widget.Events.PLAY_PROGRESS, (e) => {
            this.currentPosition = e.currentPosition;
            this.waveFormFrame++;
            if (this.waveFormFrame % this.updateInterval === 0) {
                this.drawWaveForm();
            }
        });
    }

    /**
     * Update waveform colors based on mouse location
     */
    onMouseMoveHandler() {
        this.canvas.addEventListener('mousemove', event => {
            this.mouseOver = this.getMousePosition(event); // Assign coords to mouseOver
            this.drawWaveForm(); // Update waveform
        });
    }

    /**
     * Handles when the mouse leaves the waveform area
     */
    onMouseLeaveHandler() {
        this.canvas.addEventListener('mouseleave', () => {
            this.mouseOver = null;
            this.drawWaveForm(); // Update waveform
        });
    }

    /**
     * Handles the mouse click
     */
    onMouseClickHandler() {
        this.canvas.addEventListener('click', event => {
            // Get left click and time > 0
            if (event.button === 0 && this.duration) {
                let x = event.offsetX || event.layerX;

                if (this.config.audio) { // Audio is not null
                    this.config.currentPosition = parseInt(this.duration / 100 * (x / (this.config.container.clientWidth / 100))); // Update the track position
                    this.config.audio.seekTo(Math.floor(this.config.currentPosition));
                } else {
                    this.currentTime = parseInt(this.duration / 100 * (x / (this.config.container.clientWidth / 100)));
                }

                this.drawWaveForm();
            }
        });
    }

    /**
     * Get the mouse position relative to canvas location.
     * @param {MouseEvent} event
     * @return {{x: number, y: number}}
     */
    getMousePosition(e) {
        let rect = this.canvas.getBoundingClientRect();
        return {
            x: event.clientX - rect.left, // Get x position relative to canvas left border
            y: event.clientY - rect.top // Get y position relative to canvas top border
        };
    }

    /**
     * Handles when the window object resizes to redraw the waveform according to the container size. This is only redrawn when sizes are different.
     */
    onResizeHandler() {
        let oldWidth = this.config.container.clientWidth; // Get dimensions of the contaner that holds the canvas
        let oldHeight = this.config.container.clientHeight;

        window.addEventListener('resize', () => {
            if (oldWidth !== this.config.container.clientWidth || oldHeight !== this.config.container.clientHeight) { 

                // Update tracked previous dimensions on resize
                oldWidth = this.config.container.clientWidth;
                oldHeight = this.config.container.clientHeight;
                this.updateCanvasSize(); // Refresh the display
                this.drawWaveForm(); // Draw it
            }
        });
    }

    /**
     * Update the canvas size to match the container. (Probably could be replaced with CSS)
     */
    updateCanvasSize() {
        this.canvas.width = this.config.container.clientWidth;
        this.canvas.height = this.config.container.clientHeight;
    }

    /**
     * WAVEFORM COLORING
     */

     /**
      * Construct a linear gradient over the waveform
      * 
      * @param {number} x1
      * @param {number} y1 
      * @param {number} x2 
      * @param {number} y2 
      * @param {{from: string, to: string}} param - param object that holds the color values as strings.
      * @returns {CanvasGradient}
      *
      * @memberof WaveForm
      */
    getGradient(x1, y1, x2, y2, param) {
        let gradient = this.ctx.createLinearGradient(x1, y1, x2, y2);
        
        // Color sections of the gradient with colors in param.* where indexes indicate start and end positions.
        gradient.addColorStop(0, param.from);
        gradient.addColorStop(1, param.to);

        return gradient;
    }

    /**
     * Construct a linear gradient on mouse hover
     * 
     * @param {number} x1 
     * @param {number} y1 
     * @param {number} x2 
     * @param {number} y2 
     * @returns {CanvasGradient}
     * 
     * @memberof WaveForm
     */
    getHoverGradient(x1, y1, x2, y2) {
        // Return gradient with hovered colors.
        return this.getGradient(x1, y1, x2, y2, {
            from: this.config.color.hoverGradient.from,
            to: this.config.color.hoverGradient.to
        });
    }

    /**
     * Construct a linear gradient for playback peak
     * 
     * @param {number} x1 
     * @param {number} y1 
     * @param {number} x2 
     * @param {number} y2 
     * @returns {CanvasGradient}
     * 
     * @memberof WaveForm
     */
    getPlayBackGradient(x1, y1, x2, y2) {
        // Return gradient with playback colors (in progress colors)
        return this.getGradient(x1, y1, x2, y2, {
            from: this.config.color.playbackGradient.from,
            to: this.config.color.playbackGradient.to
        });
    }

    /**
     * Construct linear gradient for playback colors on mouse hover
     * 
     * @param {number} x1 
     * @param {number} y1 
     * @param {number} x2 
     * @param {number} y2 
     * @returns {CanvasGradient}
     * 
     * @memberof WaveForm
     */
    getHoverPlayBackGradient(x1, y1, x2, y2) {
        return this.getGradient(x1, y1, x2, y2, {
            from: this.config.color.hoverPlaybackGradient.from,
            to: this.config.color.hoverPlaybackGradient.to 
        });
    }

    /**
     * Draw the stroke style according to the mouse position.
     * 
     * @param {number} x 
     * @param {number} y 
     * @param {number} lineBreak 
     * @param {number} playback 
     * @returns {config}
     * 
     * @memberof WaveForm
     */
    getContextStrokeStyle(x, y, lineBreak, playback) {
        if (this.config.mouseOverEvents) { // Used to check if this is enabled in the configs
            if (this.mouseOver && this.mouseOver.x >= x) {
                return this.getHoverGradient(x, y, x, lineBreak); // Color until the line break.
            }
        }
        
        if (playback >= x) { // If the song progress is greater than the x value
            if (this.config.mouseOverEvents) {
                if (this.mouseOver) {
                    return this.getHoverPlayBackGradient(x, y, x, lineBreak);
                }
            }

            return this.getPlayBackGradient(x, y ,x, lineBreak);
        }

        return this.config.color.background;
    }

    /**
     * Draw the waveform canvas object.
     * 
     * @memberof WaveForm
     */
    drawWaveForm() {
        // Parse waveform from url, ex: https://wis.sndcdn.com/ivasij2DQoqz_m.json

        // We need to calculate the offset of how many peaks we can display. If the wavform is at 100% width, we can display all, but if not, we need to select every N peaks to draw.
        // data.length - number of peaks in the waveform
        // config.peakWidth - default set to 2px in constrctor (width if individual peak)
        // conig.peakSpace - default set to 1px in the constructor (space between peak)
        let N = this.config.data.length / this.config.container.clientWidth * (this.config.peakWidth + this.config.peakSpace);

        let count = Math.floor(this.config.data.length / N); // Count how many peaks we will display (total peaks / every Nth peak by the amount of pixels they use)

        let playback = 0;

        // Needs checking
        if (!!this.duration && this.currentPosition >= 0) {
            playback = this.canvas.width / this.duration * this.currentPosition;
        }

        this.ctx.clearRect(0, 0, this.ctx.canvas.width, this.ctx.canvas.height);

        for (let i = 0, x = 0; i < count; i++, x += (this.config.peakWidth + this.config.peakSpace)) { // Iterate over all the peaks in the data and draw them. Increment by the amount of pixels they use (x).
            // Calculate the height of that peak so we can draw the line.
            let peakHeight = this.canvas.height / 140 * this.config.data[Math.round(i * N)];
            let y = (this.canvas.height / 2 - peakHeight / 2) * 1.5;

            // Calculate the line break which is the 2px line you see cutting across the waveform.
            let lineBreak = Math.floor(this.canvas.height / 1.33333) - 1;

            this.ctx.strokeStyle = this.getContextStrokeStyle(x, y, lineBreak, playback); // Get the gradient color to draw the line. Hovered events and other events already handled inside the method.

            this.ctx.beginPath();
            this.ctx.moveTo(x, y);
            this.ctx.lineTo(x, lineBreak); // Draw to break
            this.ctx.stroke();

            // Draw the peaks under the line break.
            if (playback >= x) {
                this.ctx.strokeStyle = this.config.color.footerPlayback; // Colored part of the playback
            } else {
                this.ctx.strokeStyle = this.config.color.footer; // Default color
            }

            this.ctx.beginPath();
            this.ctx.moveTo(x, lineBreak + 1);
            this.ctx.lineTo(x, peakHeight + y);
            this.ctx.stroke();
        }
    }

    /**
     * Set the current track time and redraw the waveform
     * 
     * @param {Number} currentPosition 
     * @param {Number} duration 
     * 
     * @memberof WaveForm
     */
    setPlayBack(currentPosition, duration) {
        this.currentPosition = currentPosition;
        this.duration = duration;
        this.drawWaveForm();
    }

    /**
     * Update the current data object.
     * 
     * @param {Data} data 
     * 
     * @memberof WaveForm
     */
    async updateWaveformData(data) {
        this.config.data = data;
        this.updateInterval = (__WEBPACK_IMPORTED_MODULE_0__js_settings__["a" /* default */].getPref('batterySaver') ? 100 : 10); 
        this.drawWaveForm();
    }

}

/* harmony default export */ __webpack_exports__["a"] = (WaveForm);

/***/ }),
/* 14 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
Object.defineProperty(__webpack_exports__, "__esModule", { value: true });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__player__ = __webpack_require__(6);
// Initialize the SoundCloud Player object


window.onload = () => {
    const sc_player = new __WEBPACK_IMPORTED_MODULE_0__player__["a" /* default */]();
    sc_player.start();

    var myTabs = tabs({
        el: '#tabs',
        tabNavigationLinks: '.tab-item',
        tabContentContainers: '.tabpage'
    });
    myTabs.init();
}


/***/ }),
/* 15 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/**
 * Designed to fetch data using XMLHttp.
 */
class Request {

    /**
     * Creates an instance of Request.
     * 
     * @memberof Request
     */
    constructor() {
        console.log('Init Request service');
    }

    get(url) {
         return new Promise(function (resolve, reject) {
            const xhr = new XMLHttpRequest();
            xhr.addEventListener("load", function() {
                if (this.status >= 200 && this.status < 300) {
                    resolve(this.responseText); // Resolve on valid response
                } else {
                    reject(this);
                }
            });

            xhr.addEventListener("error", function() {
                reject(this); // Reject on error
            });

            xhr.open('GET', url, true);
            xhr.send();
        });
    }

    /**
     * Get the JSON data for the waveform
     * 
     * @param {string} url 
     * @returns - WaveForm JSON object
     */
    async getJSON(url) {
        try {
            return JSON.parse(await this.get(url));
        } catch (e) {
            console.log(e);
            return []; // Return null
        }
    }
}

/* harmony default export */ __webpack_exports__["a"] = (Request);

/***/ })
/******/ ]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAgMzY4OTBkZTYwZDZkYjQ4OTg2NjQiLCJ3ZWJwYWNrOi8vLy4vfi9zb3VuZGNsb3VkL3Nkay5qcyIsIndlYnBhY2s6Ly8vLi9wdWJsaWMvanMvdXRpbHMuanMiLCJ3ZWJwYWNrOi8vLy4vY29uc3RzLXNlYy5qc29uIiwid2VicGFjazovLy8uL3B1YmxpYy9qcy9zZXR0aW5ncy5qcyIsIndlYnBhY2s6Ly8vLi9wdWJsaWMvY29udHJvbHMvY2hhcnRpdGVtLmpzIiwid2VicGFjazovLy8uL3B1YmxpYy9jb250cm9scy90b2FzdC5qcyIsIndlYnBhY2s6Ly8vLi9wdWJsaWMvanMvcGxheWVyLmpzIiwid2VicGFjazovLy8uL3B1YmxpYy9jb250cm9scy9IaXN0SXRlbS5qcyIsIndlYnBhY2s6Ly8vLi9wdWJsaWMvY29udHJvbHMvY2hhcnRzLmpzIiwid2VicGFjazovLy8uL3B1YmxpYy9jb250cm9scy9kYXNoYm9hcmQuanMiLCJ3ZWJwYWNrOi8vLy4vcHVibGljL2NvbnRyb2xzL3F1ZXVlaXRlbS5qcyIsIndlYnBhY2s6Ly8vLi9wdWJsaWMvY29udHJvbHMvc2VhcmNoLmpzIiwid2VicGFjazovLy8uL3B1YmxpYy9jb250cm9scy9zb25naW5mby5qcyIsIndlYnBhY2s6Ly8vLi9wdWJsaWMvY29udHJvbHMvd2F2ZWZvcm0uanMiLCJ3ZWJwYWNrOi8vLy4vcHVibGljL2pzL2FwcC5qcyIsIndlYnBhY2s6Ly8vLi9wdWJsaWMvanMvcmVxdWVzdC5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBQUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0EsbURBQTJDLGNBQWM7O0FBRXpEO0FBQ0E7QUFDQTtBQUNBO0FB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QUNBOztBQUVBO0FBQ0E7O0FBRUEseUZBQXlGOztBQUV6RjtBQUNBO0FBQ0EsMENBQTBDO0FBQzFDOztBQUVBO0FBQ0E7QUFDQSx3RUFBd0U7QUFDeEUsYUFBYTtBQUNiLGdFQUFnRTtBQUNoRTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsZUFBZSxPQUFPO0FBQ3RCLGVBQWUsT0FBTztBQUN0QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsS0FBSztBQUNwQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUk7QUFDQTtBQUNBOztBQUVBOztBQUVBLGlFOzs7Ozs7OztBQzNhQTtBQUFBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7Ozs7Ozs7O0FDYkE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0NBQStDO0FBQy9DLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0EsYUFBYTs7QUFFYjtBQUNBLDZCQUE2QjtBQUM3QixhQUFhOztBQUViO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsZUFBZSxPQUFPO0FBQ3RCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQSxzQkFBc0I7QUFDdEI7QUFDQTtBQUNBOztBQUVBLGdFIiwiZmlsZSI6ImFwcC5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSlcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcblxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge31cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gaWRlbnRpdHkgZnVuY3Rpb24gZm9yIGNhbGxpbmcgaGFybW9ueSBpbXBvcnRzIHdpdGggdGhlIGNvcnJlY3QgY29udGV4dFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5pID0gZnVuY3Rpb24odmFsdWUpIHsgcmV0dXJuIHZhbHVlOyB9O1xuXG4gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuIFx0XHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHtcbiBcdFx0XHRcdGNvbmZpZ3VyYWJsZTogZmFsc2UsXG4gXHRcdFx0XHRlbnVtZXJhYmxlOiB0cnVlLFxuIFx0XHRcdFx0Z2V0OiBnZXR0ZXJcbiBcdFx0XHR9KTtcbiBcdFx0fVxuIFx0fTtcblxuIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbiBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbiBcdFx0cmV0dXJuIGdldHRlcjtcbiBcdH07XG5cbiBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSAxNCk7XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gd2VicGFjay9ib290c3RyYXAgMzY4OTBkZTYwZDZkYjQ4OTg2NjQiLCIhZnVuY3Rpb24odCxlKXtpZihcIm9iamVjdFwiPT10eXBlb2YgZXhwb3J0cyYmXCJvYmplY3RcIj09dHlwZW9mIG1vZHVsZSltb2R1bGUuZXhwb3J0cz1lKCk7ZWxzZSBpZihcImZ1bmN0aW9uXCI9PXR5cGVvZiBkZWZpbmUmJmRlZmluZS5hbWQpZGVmaW5lKFtdLGUpO2Vsc2V7dmFyIG49ZSgpO2Zvcih2YXIgaSBpbiBuKShcIm9iamVjdFwiPT10eXBlb2YgZXhwb3J0cz9leHBvcnRzOnQpW2ldPW5baV19fSh0aGlzLGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoaSl7aWYobltpXSlyZXR1cm4gbltpXS5leHBvcnRzO3ZhciByPW5baV09e2V4cG9ydHM6e30saWQ6aSxsb2FkZWQ6ITF9O3JldHVybiB0W2ldLmNhbGwoci5leHBvcnRzLHIsci5leHBvcnRzLGUpLHIubG9hZGVkPSEwLHIuZXhwb3J0c312YXIgbj17fTtyZXR1cm4gZS5tPXQsZS5jPW4sZS5wPVwiXCIsZSgwKX0oW2Z1bmN0aW9uKHQsZSxuKXsoZnVuY3Rpb24oZSl7XCJ1c2Ugc3RyaWN0XCI7dmFyIGk9big0KSxyPW4oOCksbz1uKDIpLHM9big5KSxhPW4oMSkuUHJvbWlzZSx1PW4oMTUpLGg9bigxNik7dC5leHBvcnRzPWUuU0M9e2luaXRpYWxpemU6ZnVuY3Rpb24oKXt2YXIgdD1hcmd1bWVudHMubGVuZ3RoPD0wfHx2b2lkIDA9PT1hcmd1bWVudHNbMF0/e306YXJndW1lbnRzWzBdO28uc2V0KFwib2F1dGhfdG9rZW5cIix0Lm9hdXRoX3Rva2VuKSxvLnNldChcImNsaWVudF9pZFwiLHQuY2xpZW50X2lkKSxvLnNldChcInJlZGlyZWN0X3VyaVwiLHQucmVkaXJlY3RfdXJpKSxvLnNldChcImJhc2VVUkxcIix0LmJhc2VVUkwpLG8uc2V0KFwiY29ubmVjdFVSTFwiLHQuY29ubmVjdFVSTCl9LGdldDpmdW5jdGlvbih0LGUpe3JldHVybiBpLnJlcXVlc3QoXCJHRVRcIix0LGUpfSxwb3N0OmZ1bmN0aW9uKHQsZSl7cmV0dXJuIGkucmVxdWVzdChcIlBPU1RcIix0LGUpfSxwdXQ6ZnVuY3Rpb24odCxlKXtyZXR1cm4gaS5yZXF1ZXN0KFwiUFVUXCIsdCxlKX0sXCJkZWxldGVcIjpmdW5jdGlvbih0KXtyZXR1cm4gaS5yZXF1ZXN0KFwiREVMRVRFXCIsdCl9LHVwbG9hZDpmdW5jdGlvbih0KXtyZXR1cm4gaS51cGxvYWQodCl9LGNvbm5lY3Q6ZnVuY3Rpb24odCl7cmV0dXJuIHModCl9LGlzQ29ubmVjdGVkOmZ1bmN0aW9uKCl7cmV0dXJuIHZvaWQgMCE9PW8uZ2V0KFwib2F1dGhfdG9rZW5cIil9LG9FbWJlZDpmdW5jdGlvbih0LGUpe3JldHVybiBpLm9FbWJlZCh0LGUpfSxyZXNvbHZlOmZ1bmN0aW9uKHQpe3JldHVybiBpLnJlc29sdmUodCl9LFJlY29yZGVyOnUsUHJvbWlzZTphLHN0cmVhbTpmdW5jdGlvbih0LGUpe3JldHVybiBoKHQsZSl9LGNvbm5lY3RDYWxsYmFjazpmdW5jdGlvbigpe3Iubm90aWZ5RGlhbG9nKHRoaXMubG9jYXRpb24pfX19KS5jYWxsKGUsZnVuY3Rpb24oKXtyZXR1cm4gdGhpc30oKSl9LGZ1bmN0aW9uKHQsZSxuKXt2YXIgaTsoZnVuY3Rpb24odCxyLG8scyl7LyohXG5cdCAqIEBvdmVydmlldyBlczYtcHJvbWlzZSAtIGEgdGlueSBpbXBsZW1lbnRhdGlvbiBvZiBQcm9taXNlcy9BKy5cblx0ICogQGNvcHlyaWdodCBDb3B5cmlnaHQgKGMpIDIwMTQgWWVodWRhIEthdHosIFRvbSBEYWxlLCBTdGVmYW4gUGVubmVyIGFuZCBjb250cmlidXRvcnMgKENvbnZlcnNpb24gdG8gRVM2IEFQSSBieSBKYWtlIEFyY2hpYmFsZClcblx0ICogQGxpY2Vuc2UgICBMaWNlbnNlZCB1bmRlciBNSVQgbGljZW5zZVxuXHQgKiAgICAgICAgICAgIFNlZSBodHRwczovL3Jhdy5naXRodWJ1c2VyY29udGVudC5jb20vamFrZWFyY2hpYmFsZC9lczYtcHJvbWlzZS9tYXN0ZXIvTElDRU5TRVxuXHQgKiBAdmVyc2lvbiAgIDIuMy4wXG5cdCAqL1xuKGZ1bmN0aW9uKCl7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gYSh0KXtyZXR1cm5cImZ1bmN0aW9uXCI9PXR5cGVvZiB0fHxcIm9iamVjdFwiPT10eXBlb2YgdCYmbnVsbCE9PXR9ZnVuY3Rpb24gdSh0KXtyZXR1cm5cImZ1bmN0aW9uXCI9PXR5cGVvZiB0fWZ1bmN0aW9uIGgodCl7cmV0dXJuXCJvYmplY3RcIj09dHlwZW9mIHQmJm51bGwhPT10fWZ1bmN0aW9uIGModCl7cT10fWZ1bmN0aW9uIGwodCl7UT10fWZ1bmN0aW9uIGYoKXt2YXIgZT10Lm5leHRUaWNrLG49dC52ZXJzaW9ucy5ub2RlLm1hdGNoKC9eKD86KFxcZCspXFwuKT8oPzooXFxkKylcXC4pPyhcXCp8XFxkKykkLyk7cmV0dXJuIEFycmF5LmlzQXJyYXkobikmJlwiMFwiPT09blsxXSYmXCIxMFwiPT09blsyXSYmKGU9ciksZnVuY3Rpb24oKXtlKG0pfX1mdW5jdGlvbiBkKCl7cmV0dXJuIGZ1bmN0aW9uKCl7SyhtKX19ZnVuY3Rpb24gcCgpe3ZhciB0PTAsZT1uZXcgZXQobSksbj1kb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShcIlwiKTtyZXR1cm4gZS5vYnNlcnZlKG4se2NoYXJhY3RlckRhdGE6ITB9KSxmdW5jdGlvbigpe24uZGF0YT10PSsrdCUyfX1mdW5jdGlvbiBnKCl7dmFyIHQ9bmV3IE1lc3NhZ2VDaGFubmVsO3JldHVybiB0LnBvcnQxLm9ubWVzc2FnZT1tLGZ1bmN0aW9uKCl7dC5wb3J0Mi5wb3N0TWVzc2FnZSgwKX19ZnVuY3Rpb24gXygpe3JldHVybiBmdW5jdGlvbigpe3NldFRpbWVvdXQobSwxKX19ZnVuY3Rpb24gbSgpe2Zvcih2YXIgdD0wO1o+dDt0Kz0yKXt2YXIgZT1ydFt0XSxuPXJ0W3QrMV07ZShuKSxydFt0XT12b2lkIDAscnRbdCsxXT12b2lkIDB9Wj0wfWZ1bmN0aW9uIHkoKXt0cnl7dmFyIHQ9bigyNik7cmV0dXJuIEs9dC5ydW5Pbkxvb3B8fHQucnVuT25Db250ZXh0LGQoKX1jYXRjaChlKXtyZXR1cm4gXygpfX1mdW5jdGlvbiB2KCl7fWZ1bmN0aW9uIEUoKXtyZXR1cm4gbmV3IFR5cGVFcnJvcihcIllvdSBjYW5ub3QgcmVzb2x2ZSBhIHByb21pc2Ugd2l0aCBpdHNlbGZcIil9ZnVuY3Rpb24gUygpe3JldHVybiBuZXcgVHlwZUVycm9yKFwiQSBwcm9taXNlcyBjYWxsYmFjayBjYW5ub3QgcmV0dXJuIHRoYXQgc2FtZSBwcm9taXNlLlwiKX1mdW5jdGlvbiBBKHQpe3RyeXtyZXR1cm4gdC50aGVufWNhdGNoKGUpe3JldHVybiB1dC5lcnJvcj1lLHV0fX1mdW5jdGlvbiB3KHQsZSxuLGkpe3RyeXt0LmNhbGwoZSxuLGkpfWNhdGNoKHIpe3JldHVybiByfX1mdW5jdGlvbiBUKHQsZSxuKXtRKGZ1bmN0aW9uKHQpe3ZhciBpPSExLHI9dyhuLGUsZnVuY3Rpb24obil7aXx8KGk9ITAsZSE9PW4/SSh0LG4pOk8odCxuKSl9LGZ1bmN0aW9uKGUpe2l8fChpPSEwLFIodCxlKSl9LFwiU2V0dGxlOiBcIisodC5fbGFiZWx8fFwiIHVua25vd24gcHJvbWlzZVwiKSk7IWkmJnImJihpPSEwLFIodCxyKSl9LHQpfWZ1bmN0aW9uIGIodCxlKXtlLl9zdGF0ZT09PXN0P08odCxlLl9yZXN1bHQpOmUuX3N0YXRlPT09YXQ/Uih0LGUuX3Jlc3VsdCk6RChlLHZvaWQgMCxmdW5jdGlvbihlKXtJKHQsZSl9LGZ1bmN0aW9uKGUpe1IodCxlKX0pfWZ1bmN0aW9uIFAodCxlKXtpZihlLmNvbnN0cnVjdG9yPT09dC5jb25zdHJ1Y3RvciliKHQsZSk7ZWxzZXt2YXIgbj1BKGUpO249PT11dD9SKHQsdXQuZXJyb3IpOnZvaWQgMD09PW4/Tyh0LGUpOnUobik/VCh0LGUsbik6Tyh0LGUpfX1mdW5jdGlvbiBJKHQsZSl7dD09PWU/Uih0LEUoKSk6YShlKT9QKHQsZSk6Tyh0LGUpfWZ1bmN0aW9uIEwodCl7dC5fb25lcnJvciYmdC5fb25lcnJvcih0Ll9yZXN1bHQpLE0odCl9ZnVuY3Rpb24gTyh0LGUpe3QuX3N0YXRlPT09b3QmJih0Ll9yZXN1bHQ9ZSx0Ll9zdGF0ZT1zdCwwIT09dC5fc3Vic2NyaWJlcnMubGVuZ3RoJiZRKE0sdCkpfWZ1bmN0aW9uIFIodCxlKXt0Ll9zdGF0ZT09PW90JiYodC5fc3RhdGU9YXQsdC5fcmVzdWx0PWUsUShMLHQpKX1mdW5jdGlvbiBEKHQsZSxuLGkpe3ZhciByPXQuX3N1YnNjcmliZXJzLG89ci5sZW5ndGg7dC5fb25lcnJvcj1udWxsLHJbb109ZSxyW28rc3RdPW4scltvK2F0XT1pLDA9PT1vJiZ0Ll9zdGF0ZSYmUShNLHQpfWZ1bmN0aW9uIE0odCl7dmFyIGU9dC5fc3Vic2NyaWJlcnMsbj10Ll9zdGF0ZTtpZigwIT09ZS5sZW5ndGgpe2Zvcih2YXIgaSxyLG89dC5fcmVzdWx0LHM9MDtzPGUubGVuZ3RoO3MrPTMpaT1lW3NdLHI9ZVtzK25dLGk/eChuLGkscixvKTpyKG8pO3QuX3N1YnNjcmliZXJzLmxlbmd0aD0wfX1mdW5jdGlvbiBrKCl7dGhpcy5lcnJvcj1udWxsfWZ1bmN0aW9uIE4odCxlKXt0cnl7cmV0dXJuIHQoZSl9Y2F0Y2gobil7cmV0dXJuIGh0LmVycm9yPW4saHR9fWZ1bmN0aW9uIHgodCxlLG4saSl7dmFyIHIsbyxzLGEsaD11KG4pO2lmKGgpe2lmKHI9TihuLGkpLHI9PT1odD8oYT0hMCxvPXIuZXJyb3Iscj1udWxsKTpzPSEwLGU9PT1yKXJldHVybiB2b2lkIFIoZSxTKCkpfWVsc2Ugcj1pLHM9ITA7ZS5fc3RhdGUhPT1vdHx8KGgmJnM/SShlLHIpOmE/UihlLG8pOnQ9PT1zdD9PKGUscik6dD09PWF0JiZSKGUscikpfWZ1bmN0aW9uIEModCxlKXt0cnl7ZShmdW5jdGlvbihlKXtJKHQsZSl9LGZ1bmN0aW9uKGUpe1IodCxlKX0pfWNhdGNoKG4pe1IodCxuKX19ZnVuY3Rpb24gRih0LGUpe3ZhciBuPXRoaXM7bi5faW5zdGFuY2VDb25zdHJ1Y3Rvcj10LG4ucHJvbWlzZT1uZXcgdCh2KSxuLl92YWxpZGF0ZUlucHV0KGUpPyhuLl9pbnB1dD1lLG4ubGVuZ3RoPWUubGVuZ3RoLG4uX3JlbWFpbmluZz1lLmxlbmd0aCxuLl9pbml0KCksMD09PW4ubGVuZ3RoP08obi5wcm9taXNlLG4uX3Jlc3VsdCk6KG4ubGVuZ3RoPW4ubGVuZ3RofHwwLG4uX2VudW1lcmF0ZSgpLDA9PT1uLl9yZW1haW5pbmcmJk8obi5wcm9taXNlLG4uX3Jlc3VsdCkpKTpSKG4ucHJvbWlzZSxuLl92YWxpZGF0aW9uRXJyb3IoKSl9ZnVuY3Rpb24gVSh0KXtyZXR1cm4gbmV3IGN0KHRoaXMsdCkucHJvbWlzZX1mdW5jdGlvbiBCKHQpe2Z1bmN0aW9uIGUodCl7SShyLHQpfWZ1bmN0aW9uIG4odCl7UihyLHQpfXZhciBpPXRoaXMscj1uZXcgaSh2KTtpZighJCh0KSlyZXR1cm4gUihyLG5ldyBUeXBlRXJyb3IoXCJZb3UgbXVzdCBwYXNzIGFuIGFycmF5IHRvIHJhY2UuXCIpKSxyO2Zvcih2YXIgbz10Lmxlbmd0aCxzPTA7ci5fc3RhdGU9PT1vdCYmbz5zO3MrKylEKGkucmVzb2x2ZSh0W3NdKSx2b2lkIDAsZSxuKTtyZXR1cm4gcn1mdW5jdGlvbiBIKHQpe3ZhciBlPXRoaXM7aWYodCYmXCJvYmplY3RcIj09dHlwZW9mIHQmJnQuY29uc3RydWN0b3I9PT1lKXJldHVybiB0O3ZhciBuPW5ldyBlKHYpO3JldHVybiBJKG4sdCksbn1mdW5jdGlvbiBqKHQpe3ZhciBlPXRoaXMsbj1uZXcgZSh2KTtyZXR1cm4gUihuLHQpLG59ZnVuY3Rpb24gRygpe3Rocm93IG5ldyBUeXBlRXJyb3IoXCJZb3UgbXVzdCBwYXNzIGEgcmVzb2x2ZXIgZnVuY3Rpb24gYXMgdGhlIGZpcnN0IGFyZ3VtZW50IHRvIHRoZSBwcm9taXNlIGNvbnN0cnVjdG9yXCIpfWZ1bmN0aW9uIFkoKXt0aHJvdyBuZXcgVHlwZUVycm9yKFwiRmFpbGVkIHRvIGNvbnN0cnVjdCAnUHJvbWlzZSc6IFBsZWFzZSB1c2UgdGhlICduZXcnIG9wZXJhdG9yLCB0aGlzIG9iamVjdCBjb25zdHJ1Y3RvciBjYW5ub3QgYmUgY2FsbGVkIGFzIGEgZnVuY3Rpb24uXCIpfWZ1bmN0aW9uIFYodCl7dGhpcy5faWQ9Z3QrKyx0aGlzLl9zdGF0ZT12b2lkIDAsdGhpcy5fcmVzdWx0PXZvaWQgMCx0aGlzLl9zdWJzY3JpYmVycz1bXSx2IT09dCYmKHUodCl8fEcoKSx0aGlzIGluc3RhbmNlb2YgVnx8WSgpLEModGhpcyx0KSl9ZnVuY3Rpb24geigpe3ZhciB0O2lmKFwidW5kZWZpbmVkXCIhPXR5cGVvZiBvKXQ9bztlbHNlIGlmKFwidW5kZWZpbmVkXCIhPXR5cGVvZiBzZWxmKXQ9c2VsZjtlbHNlIHRyeXt0PUZ1bmN0aW9uKFwicmV0dXJuIHRoaXNcIikoKX1jYXRjaChlKXt0aHJvdyBuZXcgRXJyb3IoXCJwb2x5ZmlsbCBmYWlsZWQgYmVjYXVzZSBnbG9iYWwgb2JqZWN0IGlzIHVuYXZhaWxhYmxlIGluIHRoaXMgZW52aXJvbm1lbnRcIil9dmFyIG49dC5Qcm9taXNlO24mJlwiW29iamVjdCBQcm9taXNlXVwiPT09T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKG4ucmVzb2x2ZSgpKSYmIW4uY2FzdHx8KHQuUHJvbWlzZT1fdCl9dmFyIFc7Vz1BcnJheS5pc0FycmF5P0FycmF5LmlzQXJyYXk6ZnVuY3Rpb24odCl7cmV0dXJuXCJbb2JqZWN0IEFycmF5XVwiPT09T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHQpfTt2YXIgSyxxLFgsJD1XLFo9MCxRPSh7fS50b1N0cmluZyxmdW5jdGlvbih0LGUpe3J0W1pdPXQscnRbWisxXT1lLForPTIsMj09PVomJihxP3EobSk6WCgpKX0pLEo9XCJ1bmRlZmluZWRcIiE9dHlwZW9mIHdpbmRvdz93aW5kb3c6dm9pZCAwLHR0PUp8fHt9LGV0PXR0Lk11dGF0aW9uT2JzZXJ2ZXJ8fHR0LldlYktpdE11dGF0aW9uT2JzZXJ2ZXIsbnQ9XCJ1bmRlZmluZWRcIiE9dHlwZW9mIHQmJlwiW29iamVjdCBwcm9jZXNzXVwiPT09e30udG9TdHJpbmcuY2FsbCh0KSxpdD1cInVuZGVmaW5lZFwiIT10eXBlb2YgVWludDhDbGFtcGVkQXJyYXkmJlwidW5kZWZpbmVkXCIhPXR5cGVvZiBpbXBvcnRTY3JpcHRzJiZcInVuZGVmaW5lZFwiIT10eXBlb2YgTWVzc2FnZUNoYW5uZWwscnQ9bmV3IEFycmF5KDFlMyk7WD1udD9mKCk6ZXQ/cCgpOml0P2coKTp2b2lkIDA9PT1KP3koKTpfKCk7dmFyIG90PXZvaWQgMCxzdD0xLGF0PTIsdXQ9bmV3IGssaHQ9bmV3IGs7Ri5wcm90b3R5cGUuX3ZhbGlkYXRlSW5wdXQ9ZnVuY3Rpb24odCl7cmV0dXJuICQodCl9LEYucHJvdG90eXBlLl92YWxpZGF0aW9uRXJyb3I9ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IEVycm9yKFwiQXJyYXkgTWV0aG9kcyBtdXN0IGJlIHByb3ZpZGVkIGFuIEFycmF5XCIpfSxGLnByb3RvdHlwZS5faW5pdD1mdW5jdGlvbigpe3RoaXMuX3Jlc3VsdD1uZXcgQXJyYXkodGhpcy5sZW5ndGgpfTt2YXIgY3Q9RjtGLnByb3RvdHlwZS5fZW51bWVyYXRlPWZ1bmN0aW9uKCl7Zm9yKHZhciB0PXRoaXMsZT10Lmxlbmd0aCxuPXQucHJvbWlzZSxpPXQuX2lucHV0LHI9MDtuLl9zdGF0ZT09PW90JiZlPnI7cisrKXQuX2VhY2hFbnRyeShpW3JdLHIpfSxGLnByb3RvdHlwZS5fZWFjaEVudHJ5PWZ1bmN0aW9uKHQsZSl7dmFyIG49dGhpcyxpPW4uX2luc3RhbmNlQ29uc3RydWN0b3I7aCh0KT90LmNvbnN0cnVjdG9yPT09aSYmdC5fc3RhdGUhPT1vdD8odC5fb25lcnJvcj1udWxsLG4uX3NldHRsZWRBdCh0Ll9zdGF0ZSxlLHQuX3Jlc3VsdCkpOm4uX3dpbGxTZXR0bGVBdChpLnJlc29sdmUodCksZSk6KG4uX3JlbWFpbmluZy0tLG4uX3Jlc3VsdFtlXT10KX0sRi5wcm90b3R5cGUuX3NldHRsZWRBdD1mdW5jdGlvbih0LGUsbil7dmFyIGk9dGhpcyxyPWkucHJvbWlzZTtyLl9zdGF0ZT09PW90JiYoaS5fcmVtYWluaW5nLS0sdD09PWF0P1IocixuKTppLl9yZXN1bHRbZV09biksMD09PWkuX3JlbWFpbmluZyYmTyhyLGkuX3Jlc3VsdCl9LEYucHJvdG90eXBlLl93aWxsU2V0dGxlQXQ9ZnVuY3Rpb24odCxlKXt2YXIgbj10aGlzO0QodCx2b2lkIDAsZnVuY3Rpb24odCl7bi5fc2V0dGxlZEF0KHN0LGUsdCl9LGZ1bmN0aW9uKHQpe24uX3NldHRsZWRBdChhdCxlLHQpfSl9O3ZhciBsdD1VLGZ0PUIsZHQ9SCxwdD1qLGd0PTAsX3Q9VjtWLmFsbD1sdCxWLnJhY2U9ZnQsVi5yZXNvbHZlPWR0LFYucmVqZWN0PXB0LFYuX3NldFNjaGVkdWxlcj1jLFYuX3NldEFzYXA9bCxWLl9hc2FwPVEsVi5wcm90b3R5cGU9e2NvbnN0cnVjdG9yOlYsdGhlbjpmdW5jdGlvbih0LGUpe3ZhciBuPXRoaXMsaT1uLl9zdGF0ZTtpZihpPT09c3QmJiF0fHxpPT09YXQmJiFlKXJldHVybiB0aGlzO3ZhciByPW5ldyB0aGlzLmNvbnN0cnVjdG9yKHYpLG89bi5fcmVzdWx0O2lmKGkpe3ZhciBzPWFyZ3VtZW50c1tpLTFdO1EoZnVuY3Rpb24oKXt4KGkscixzLG8pfSl9ZWxzZSBEKG4scix0LGUpO3JldHVybiByfSxcImNhdGNoXCI6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMudGhlbihudWxsLHQpfX07dmFyIG10PXoseXQ9e1Byb21pc2U6X3QscG9seWZpbGw6bXR9O24oMTkpLmFtZD8oaT1mdW5jdGlvbigpe3JldHVybiB5dH0uY2FsbChlLG4sZSxzKSwhKHZvaWQgMCE9PWkmJihzLmV4cG9ydHM9aSkpKTpcInVuZGVmaW5lZFwiIT10eXBlb2YgcyYmcy5leHBvcnRzP3MuZXhwb3J0cz15dDpcInVuZGVmaW5lZFwiIT10eXBlb2YgdGhpcyYmKHRoaXMuRVM2UHJvbWlzZT15dCksbXQoKX0pLmNhbGwodGhpcyl9KS5jYWxsKGUsbig2KSxuKDMpLnNldEltbWVkaWF0ZSxmdW5jdGlvbigpe3JldHVybiB0aGlzfSgpLG4oMjApKHQpKX0sZnVuY3Rpb24odCxlKXtcInVzZSBzdHJpY3RcIjt2YXIgbj17b2F1dGhfdG9rZW46dm9pZCAwLGJhc2VVUkw6XCJodHRwczovL2FwaS5zb3VuZGNsb3VkLmNvbVwiLGNvbm5lY3RVUkw6XCIvL2Nvbm5lY3Quc291bmRjbG91ZC5jb21cIixjbGllbnRfaWQ6dm9pZCAwLHJlZGlyZWN0X3VyaTp2b2lkIDB9O3QuZXhwb3J0cz17Z2V0OmZ1bmN0aW9uKHQpe3JldHVybiBuW3RdfSxzZXQ6ZnVuY3Rpb24odCxlKXtlJiYoblt0XT1lKX19fSxmdW5jdGlvbih0LGUsbil7KGZ1bmN0aW9uKHQsaSl7ZnVuY3Rpb24gcih0LGUpe3RoaXMuX2lkPXQsdGhpcy5fY2xlYXJGbj1lfXZhciBvPW4oNikubmV4dFRpY2sscz1GdW5jdGlvbi5wcm90b3R5cGUuYXBwbHksYT1BcnJheS5wcm90b3R5cGUuc2xpY2UsdT17fSxoPTA7ZS5zZXRUaW1lb3V0PWZ1bmN0aW9uKCl7cmV0dXJuIG5ldyByKHMuY2FsbChzZXRUaW1lb3V0LHdpbmRvdyxhcmd1bWVudHMpLGNsZWFyVGltZW91dCl9LGUuc2V0SW50ZXJ2YWw9ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IHIocy5jYWxsKHNldEludGVydmFsLHdpbmRvdyxhcmd1bWVudHMpLGNsZWFySW50ZXJ2YWwpfSxlLmNsZWFyVGltZW91dD1lLmNsZWFySW50ZXJ2YWw9ZnVuY3Rpb24odCl7dC5jbG9zZSgpfSxyLnByb3RvdHlwZS51bnJlZj1yLnByb3RvdHlwZS5yZWY9ZnVuY3Rpb24oKXt9LHIucHJvdG90eXBlLmNsb3NlPWZ1bmN0aW9uKCl7dGhpcy5fY2xlYXJGbi5jYWxsKHdpbmRvdyx0aGlzLl9pZCl9LGUuZW5yb2xsPWZ1bmN0aW9uKHQsZSl7Y2xlYXJUaW1lb3V0KHQuX2lkbGVUaW1lb3V0SWQpLHQuX2lkbGVUaW1lb3V0PWV9LGUudW5lbnJvbGw9ZnVuY3Rpb24odCl7Y2xlYXJUaW1lb3V0KHQuX2lkbGVUaW1lb3V0SWQpLHQuX2lkbGVUaW1lb3V0PS0xfSxlLl91bnJlZkFjdGl2ZT1lLmFjdGl2ZT1mdW5jdGlvbih0KXtjbGVhclRpbWVvdXQodC5faWRsZVRpbWVvdXRJZCk7dmFyIGU9dC5faWRsZVRpbWVvdXQ7ZT49MCYmKHQuX2lkbGVUaW1lb3V0SWQ9c2V0VGltZW91dChmdW5jdGlvbigpe3QuX29uVGltZW91dCYmdC5fb25UaW1lb3V0KCl9LGUpKX0sZS5zZXRJbW1lZGlhdGU9XCJmdW5jdGlvblwiPT10eXBlb2YgdD90OmZ1bmN0aW9uKHQpe3ZhciBuPWgrKyxpPWFyZ3VtZW50cy5sZW5ndGg8Mj8hMTphLmNhbGwoYXJndW1lbnRzLDEpO3JldHVybiB1W25dPSEwLG8oZnVuY3Rpb24oKXt1W25dJiYoaT90LmFwcGx5KG51bGwsaSk6dC5jYWxsKG51bGwpLGUuY2xlYXJJbW1lZGlhdGUobikpfSksbn0sZS5jbGVhckltbWVkaWF0ZT1cImZ1bmN0aW9uXCI9PXR5cGVvZiBpP2k6ZnVuY3Rpb24odCl7ZGVsZXRlIHVbdF19fSkuY2FsbChlLG4oMykuc2V0SW1tZWRpYXRlLG4oMykuY2xlYXJJbW1lZGlhdGUpfSxmdW5jdGlvbih0LGUsbil7KGZ1bmN0aW9uKGUpe1widXNlIHN0cmljdFwiO3ZhciBpPW4oMikscj1uKDE3KSxvPW4oMSkuUHJvbWlzZSxzPWZ1bmN0aW9uKHQsbixpLHIpe3ZhciBzPXZvaWQgMCxhPW5ldyBvKGZ1bmN0aW9uKG8pe3ZhciBhPWUuRm9ybURhdGEmJmkgaW5zdGFuY2VvZiBGb3JtRGF0YTtzPW5ldyBYTUxIdHRwUmVxdWVzdCxzLnVwbG9hZCYmcy51cGxvYWQuYWRkRXZlbnRMaXN0ZW5lcihcInByb2dyZXNzXCIscikscy5vcGVuKHQsbiwhMCksYXx8cy5zZXRSZXF1ZXN0SGVhZGVyKFwiQ29udGVudC1UeXBlXCIsXCJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWRcIikscy5vbnJlYWR5c3RhdGVjaGFuZ2U9ZnVuY3Rpb24oKXs0PT09cy5yZWFkeVN0YXRlJiZvKHtyZXNwb25zZVRleHQ6cy5yZXNwb25zZVRleHQscmVxdWVzdDpzfSl9LHMuc2VuZChpKX0pO3JldHVybiBhLnJlcXVlc3Q9cyxhfSxhPWZ1bmN0aW9uKHQpe3ZhciBlPXQucmVzcG9uc2VUZXh0LG49dC5yZXF1ZXN0LGk9dm9pZCAwLHI9dm9pZCAwO3RyeXtyPUpTT04ucGFyc2UoZSl9Y2F0Y2gobyl7fXJldHVybiByP3IuZXJyb3JzJiYoaT17bWVzc2FnZTpcIlwifSxyLmVycm9yc1swXSYmci5lcnJvcnNbMF0uZXJyb3JfbWVzc2FnZSYmKGk9e21lc3NhZ2U6ci5lcnJvcnNbMF0uZXJyb3JfbWVzc2FnZX0pKTppPW4/e21lc3NhZ2U6XCJIVFRQIEVycm9yOiBcIituLnN0YXR1c306e21lc3NhZ2U6XCJVbmtub3duIGVycm9yXCJ9LGkmJihpLnN0YXR1cz1uLnN0YXR1cykse2pzb246cixlcnJvcjppfX0sdT1mdW5jdGlvbiBjKHQsZSxuLGkpe3ZhciByPXModCxlLG4saSksbz1yLnRoZW4oZnVuY3Rpb24odCl7dmFyIGU9dC5yZXNwb25zZVRleHQsbj10LnJlcXVlc3QsaT1hKHtyZXNwb25zZVRleHQ6ZSxyZXF1ZXN0Om59KTtpZihpLmpzb24mJlwiMzAyIC0gRm91bmRcIj09PWkuanNvbi5zdGF0dXMpcmV0dXJuIGMoXCJHRVRcIixpLmpzb24ubG9jYXRpb24sbnVsbCk7aWYoMjAwIT09bi5zdGF0dXMmJmkuZXJyb3IpdGhyb3cgaS5lcnJvcjtyZXR1cm4gaS5qc29ufSk7cmV0dXJuIG8ucmVxdWVzdD1yLnJlcXVlc3Qsb30saD1mdW5jdGlvbih0LGUsbil7T2JqZWN0LmtleXMoZSkuZm9yRWFjaChmdW5jdGlvbihpKXtuP3QuYXBwZW5kKGksZVtpXSk6dFtpXT1lW2ldfSl9O3QuZXhwb3J0cz17cmVxdWVzdDpmdW5jdGlvbih0LG4pe3ZhciBvPWFyZ3VtZW50cy5sZW5ndGg8PTJ8fHZvaWQgMD09PWFyZ3VtZW50c1syXT97fTphcmd1bWVudHNbMl0scz1hcmd1bWVudHMubGVuZ3RoPD0zfHx2b2lkIDA9PT1hcmd1bWVudHNbM10/ZnVuY3Rpb24oKXt9OmFyZ3VtZW50c1szXSxhPWkuZ2V0KFwib2F1dGhfdG9rZW5cIiksYz1pLmdldChcImNsaWVudF9pZFwiKSxsPXt9LGY9ZS5Gb3JtRGF0YSYmbyBpbnN0YW5jZW9mIEZvcm1EYXRhLGQ9dm9pZCAwLHA9dm9pZCAwO3JldHVybiBsLmZvcm1hdD1cImpzb25cIixhP2wub2F1dGhfdG9rZW49YTpsLmNsaWVudF9pZD1jLGgobyxsLGYpLFwiR0VUXCIhPT10JiYoZD1mP286ci5lbmNvZGUobyksbz17b2F1dGhfdG9rZW46YX0pLG49XCIvXCIhPT1uWzBdP1wiL1wiK246bixwPVwiXCIraS5nZXQoXCJiYXNlVVJMXCIpK24rXCI/XCIrci5lbmNvZGUobyksdSh0LHAsZCxzKX0sb0VtYmVkOmZ1bmN0aW9uKHQpe3ZhciBlPWFyZ3VtZW50cy5sZW5ndGg8PTF8fHZvaWQgMD09PWFyZ3VtZW50c1sxXT97fTphcmd1bWVudHNbMV0sbj1lLmVsZW1lbnQ7ZGVsZXRlIGUuZWxlbWVudCxlLnVybD10O3ZhciBpPVwiaHR0cHM6Ly9zb3VuZGNsb3VkLmNvbS9vZW1iZWQuanNvbj9cIityLmVuY29kZShlKTtyZXR1cm4gdShcIkdFVFwiLGksbnVsbCkudGhlbihmdW5jdGlvbih0KXtyZXR1cm4gbiYmdC5odG1sJiYobi5pbm5lckhUTUw9dC5odG1sKSx0fSl9LHVwbG9hZDpmdW5jdGlvbigpe3ZhciB0PWFyZ3VtZW50cy5sZW5ndGg8PTB8fHZvaWQgMD09PWFyZ3VtZW50c1swXT97fTphcmd1bWVudHNbMF0sZT10LmFzc2V0X2RhdGF8fHQuZmlsZSxuPWkuZ2V0KFwib2F1dGhfdG9rZW5cIikmJnQudGl0bGUmJmU7aWYoIW4pcmV0dXJuIG5ldyBvKGZ1bmN0aW9uKHQsZSl7ZSh7c3RhdHVzOjAsZXJyb3JfbWVzc2FnZTpcIm9hdXRoX3Rva2VuIG5lZWRzIHRvIGJlIHByZXNlbnQgYW5kIHRpdGxlIGFuZCBhc3NldF9kYXRhIC8gZmlsZSBwYXNzZWQgYXMgcGFyYW1ldGVyc1wifSl9KTt2YXIgcj1PYmplY3Qua2V5cyh0KSxzPW5ldyBGb3JtRGF0YTtyZXR1cm4gci5mb3JFYWNoKGZ1bmN0aW9uKGUpe3ZhciBuPXRbZV07XCJmaWxlXCI9PT1lJiYoZT1cImFzc2V0X2RhdGFcIixuPXQuZmlsZSkscy5hcHBlbmQoXCJ0cmFja1tcIitlK1wiXVwiLG4pfSksdGhpcy5yZXF1ZXN0KFwiUE9TVFwiLFwiL3RyYWNrc1wiLHMsdC5wcm9ncmVzcyl9LHJlc29sdmU6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMucmVxdWVzdChcIkdFVFwiLFwiL3Jlc29sdmVcIix7dXJsOnQsX3N0YXR1c19jb2RlX21hcDp7MzAyOjIwMH19KX19fSkuY2FsbChlLGZ1bmN0aW9uKCl7cmV0dXJuIHRoaXN9KCkpfSxmdW5jdGlvbih0LGUpe1widXNlIHN0cmljdFwiO3ZhciBuPXt9O3QuZXhwb3J0cz17Z2V0OmZ1bmN0aW9uKHQpe3JldHVybiBuW3RdfSxzZXQ6ZnVuY3Rpb24odCxlKXtuW3RdPWV9fX0sZnVuY3Rpb24odCxlKXtmdW5jdGlvbiBuKCl7aCYmcyYmKGg9ITEscy5sZW5ndGg/dT1zLmNvbmNhdCh1KTpjPS0xLHUubGVuZ3RoJiZpKCkpfWZ1bmN0aW9uIGkoKXtpZighaCl7dmFyIHQ9c2V0VGltZW91dChuKTtoPSEwO2Zvcih2YXIgZT11Lmxlbmd0aDtlOyl7Zm9yKHM9dSx1PVtdOysrYzxlOylzJiZzW2NdLnJ1bigpO2M9LTEsZT11Lmxlbmd0aH1zPW51bGwsaD0hMSxjbGVhclRpbWVvdXQodCl9fWZ1bmN0aW9uIHIodCxlKXt0aGlzLmZ1bj10LHRoaXMuYXJyYXk9ZX1mdW5jdGlvbiBvKCl7fXZhciBzLGE9dC5leHBvcnRzPXt9LHU9W10saD0hMSxjPS0xO2EubmV4dFRpY2s9ZnVuY3Rpb24odCl7dmFyIGU9bmV3IEFycmF5KGFyZ3VtZW50cy5sZW5ndGgtMSk7aWYoYXJndW1lbnRzLmxlbmd0aD4xKWZvcih2YXIgbj0xO248YXJndW1lbnRzLmxlbmd0aDtuKyspZVtuLTFdPWFyZ3VtZW50c1tuXTt1LnB1c2gobmV3IHIodCxlKSksMSE9PXUubGVuZ3RofHxofHxzZXRUaW1lb3V0KGksMCl9LHIucHJvdG90eXBlLnJ1bj1mdW5jdGlvbigpe3RoaXMuZnVuLmFwcGx5KG51bGwsdGhpcy5hcnJheSl9LGEudGl0bGU9XCJicm93c2VyXCIsYS5icm93c2VyPSEwLGEuZW52PXt9LGEuYXJndj1bXSxhLnZlcnNpb249XCJcIixhLnZlcnNpb25zPXt9LGEub249byxhLmFkZExpc3RlbmVyPW8sYS5vbmNlPW8sYS5vZmY9byxhLnJlbW92ZUxpc3RlbmVyPW8sYS5yZW1vdmVBbGxMaXN0ZW5lcnM9byxhLmVtaXQ9byxhLmJpbmRpbmc9ZnVuY3Rpb24odCl7dGhyb3cgbmV3IEVycm9yKFwicHJvY2Vzcy5iaW5kaW5nIGlzIG5vdCBzdXBwb3J0ZWRcIil9LGEuY3dkPWZ1bmN0aW9uKCl7cmV0dXJuXCIvXCJ9LGEuY2hkaXI9ZnVuY3Rpb24odCl7dGhyb3cgbmV3IEVycm9yKFwicHJvY2Vzcy5jaGRpciBpcyBub3Qgc3VwcG9ydGVkXCIpfSxhLnVtYXNrPWZ1bmN0aW9uKCl7cmV0dXJuIDB9fSxmdW5jdGlvbih0LGUsbil7XCJ1c2Ugc3RyaWN0XCI7dmFyIGk9bigxOCk7ZS5leHRyYWN0PWZ1bmN0aW9uKHQpe3JldHVybiB0LnNwbGl0KFwiP1wiKVsxXXx8XCJcIn0sZS5wYXJzZT1mdW5jdGlvbih0KXtyZXR1cm5cInN0cmluZ1wiIT10eXBlb2YgdD97fToodD10LnRyaW0oKS5yZXBsYWNlKC9eKFxcP3wjfCYpLyxcIlwiKSx0P3Quc3BsaXQoXCImXCIpLnJlZHVjZShmdW5jdGlvbih0LGUpe3ZhciBuPWUucmVwbGFjZSgvXFwrL2csXCIgXCIpLnNwbGl0KFwiPVwiKSxpPW4uc2hpZnQoKSxyPW4ubGVuZ3RoPjA/bi5qb2luKFwiPVwiKTp2b2lkIDA7cmV0dXJuIGk9ZGVjb2RlVVJJQ29tcG9uZW50KGkpLHI9dm9pZCAwPT09cj9udWxsOmRlY29kZVVSSUNvbXBvbmVudChyKSx0Lmhhc093blByb3BlcnR5KGkpP0FycmF5LmlzQXJyYXkodFtpXSk/dFtpXS5wdXNoKHIpOnRbaV09W3RbaV0scl06dFtpXT1yLHR9LHt9KTp7fSl9LGUuc3RyaW5naWZ5PWZ1bmN0aW9uKHQpe3JldHVybiB0P09iamVjdC5rZXlzKHQpLnNvcnQoKS5tYXAoZnVuY3Rpb24oZSl7dmFyIG49dFtlXTtyZXR1cm4gQXJyYXkuaXNBcnJheShuKT9uLnNvcnQoKS5tYXAoZnVuY3Rpb24odCl7cmV0dXJuIGkoZSkrXCI9XCIraSh0KX0pLmpvaW4oXCImXCIpOmkoZSkrXCI9XCIraShuKX0pLmZpbHRlcihmdW5jdGlvbih0KXtyZXR1cm4gdC5sZW5ndGg+MH0pLmpvaW4oXCImXCIpOlwiXCJ9fSxmdW5jdGlvbih0LGUsbil7XCJ1c2Ugc3RyaWN0XCI7dmFyIGk9big3KSxyPW4oNSk7dC5leHBvcnRzPXtub3RpZnlEaWFsb2c6ZnVuY3Rpb24odCl7dmFyIGU9aS5wYXJzZSh0LnNlYXJjaCksbj1pLnBhcnNlKHQuaGFzaCksbz17b2F1dGhfdG9rZW46ZS5hY2Nlc3NfdG9rZW58fG4uYWNjZXNzX3Rva2VuLGRpYWxvZ19pZDplLnN0YXRlfHxuLnN0YXRlLGVycm9yOmUuZXJyb3J8fG4uZXJyb3IsZXJyb3JfZGVzY3JpcHRpb246ZS5lcnJvcl9kZXNjcmlwdGlvbnx8bi5lcnJvcl9kZXNjcmlwdGlvbn0scz1yLmdldChvLmRpYWxvZ19pZCk7cyYmcy5oYW5kbGVDb25uZWN0UmVzcG9uc2Uobyl9fX0sZnVuY3Rpb24odCxlLG4pe1widXNlIHN0cmljdFwiO3ZhciBpPW4oMikscj1uKDExKSxvPW4oMSkuUHJvbWlzZSxzPWZ1bmN0aW9uKHQpe3JldHVybiBpLnNldChcIm9hdXRoX3Rva2VuXCIsdC5vYXV0aF90b2tlbiksdH07dC5leHBvcnRzPWZ1bmN0aW9uKCl7dmFyIHQ9YXJndW1lbnRzLmxlbmd0aDw9MHx8dm9pZCAwPT09YXJndW1lbnRzWzBdP3t9OmFyZ3VtZW50c1swXSxlPWkuZ2V0KFwib2F1dGhfdG9rZW5cIik7aWYoZSlyZXR1cm4gbmV3IG8oZnVuY3Rpb24odCl7dCh7b2F1dGhfdG9rZW46ZX0pfSk7dmFyIG49e2NsaWVudF9pZDp0LmNsaWVudF9pZHx8aS5nZXQoXCJjbGllbnRfaWRcIikscmVkaXJlY3RfdXJpOnQucmVkaXJlY3RfdXJpfHxpLmdldChcInJlZGlyZWN0X3VyaVwiKSxyZXNwb25zZV90eXBlOlwiY29kZV9hbmRfdG9rZW5cIixzY29wZTp0LnNjb3BlfHxcIm5vbi1leHBpcmluZ1wiLGRpc3BsYXk6XCJwb3B1cFwifTtpZighbi5jbGllbnRfaWR8fCFuLnJlZGlyZWN0X3VyaSl0aHJvdyBuZXcgRXJyb3IoXCJPcHRpb25zIGNsaWVudF9pZCBhbmQgcmVkaXJlY3RfdXJpIG11c3QgYmUgcGFzc2VkXCIpO3ZhciBhPW5ldyByKG4pO3JldHVybiBhLm9wZW4oKS50aGVuKHMpfX0sZnVuY3Rpb24odCxlLG4pe1widXNlIHN0cmljdFwiO3ZhciBpPW4oMSkuUHJvbWlzZTt0LmV4cG9ydHM9ZnVuY3Rpb24oKXt2YXIgdD17fTtyZXR1cm4gdC5wcm9taXNlPW5ldyBpKGZ1bmN0aW9uKGUsbil7dC5yZXNvbHZlPWUsdC5yZWplY3Q9bn0pLHR9fSxmdW5jdGlvbih0LGUsbil7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gaSh0LGUpe2lmKCEodCBpbnN0YW5jZW9mIGUpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIil9dmFyIHI9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KHQsZSl7Zm9yKHZhciBuPTA7bjxlLmxlbmd0aDtuKyspe3ZhciBpPWVbbl07aS5lbnVtZXJhYmxlPWkuZW51bWVyYWJsZXx8ITEsaS5jb25maWd1cmFibGU9ITAsXCJ2YWx1ZVwiaW4gaSYmKGkud3JpdGFibGU9ITApLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LGkua2V5LGkpfX1yZXR1cm4gZnVuY3Rpb24oZSxuLGkpe3JldHVybiBuJiZ0KGUucHJvdG90eXBlLG4pLGkmJnQoZSxpKSxlfX0oKSxvPW4oMTApLHM9big1KSxhPW4oMTIpLHU9big3KSxoPVwiU291bmRDbG91ZF9EaWFsb2dcIixjPWZ1bmN0aW9uKCl7cmV0dXJuW2gsTWF0aC5jZWlsKDFlNipNYXRoLnJhbmRvbSgpKS50b1N0cmluZygxNildLmpvaW4oXCJfXCIpfSxsPWZ1bmN0aW9uKHQpe3JldHVyblwiaHR0cHM6Ly9zb3VuZGNsb3VkLmNvbS9jb25uZWN0P1wiK3Uuc3RyaW5naWZ5KHQpfSxmPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCgpe3ZhciBlPWFyZ3VtZW50cy5sZW5ndGg8PTB8fHZvaWQgMD09PWFyZ3VtZW50c1swXT97fTphcmd1bWVudHNbMF07aSh0aGlzLHQpLHRoaXMuaWQ9YygpLHRoaXMub3B0aW9ucz1lLHRoaXMub3B0aW9ucy5zdGF0ZT10aGlzLmlkLHRoaXMud2lkdGg9NDU2LHRoaXMuaGVpZ2h0PTUxMCx0aGlzLmRlZmVycmVkPW8oKX1yZXR1cm4gcih0LFt7a2V5Olwib3BlblwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIHQ9bCh0aGlzLm9wdGlvbnMpO3JldHVybiB0aGlzLnBvcHVwPWEub3Blbih0LHRoaXMud2lkdGgsdGhpcy5oZWlnaHQpLHMuc2V0KHRoaXMuaWQsdGhpcyksdGhpcy5kZWZlcnJlZC5wcm9taXNlfX0se2tleTpcImhhbmRsZUNvbm5lY3RSZXNwb25zZVwiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBlPXQuZXJyb3I7ZT90aGlzLmRlZmVycmVkLnJlamVjdCh0KTp0aGlzLmRlZmVycmVkLnJlc29sdmUodCksdGhpcy5wb3B1cC5jbG9zZSgpfX1dKSx0fSgpO3QuZXhwb3J0cz1mfSxmdW5jdGlvbih0LGUpe1widXNlIHN0cmljdFwiO3QuZXhwb3J0cz17b3BlbjpmdW5jdGlvbih0LGUsbil7dmFyIGk9e30scj12b2lkIDA7cmV0dXJuIGkubG9jYXRpb249MSxpLndpZHRoPWUsaS5oZWlnaHQ9bixpLmxlZnQ9d2luZG93LnNjcmVlblgrKHdpbmRvdy5vdXRlcldpZHRoLWUpLzIsaS50b3A9d2luZG93LnNjcmVlblkrKHdpbmRvdy5vdXRlckhlaWdodC1uKS8yLGkudG9vbGJhcj1cIm5vXCIsaS5zY3JvbGxiYXJzPVwieWVzXCIscj1PYmplY3Qua2V5cyhpKS5tYXAoZnVuY3Rpb24odCl7cmV0dXJuIHQrXCI9XCIraVt0XX0pLmpvaW4oXCIsIFwiKSx3aW5kb3cub3Blbih0LGkubmFtZSxyKX19fSxmdW5jdGlvbih0LGUpeyhmdW5jdGlvbihlKXtcInVzZSBzdHJpY3RcIjt2YXIgbj1lLkF1ZGlvQ29udGV4dHx8ZS53ZWJraXRBdWRpb0NvbnRleHQsaT1udWxsO3QuZXhwb3J0cz1mdW5jdGlvbigpe3JldHVybiBpP2k6aT1uZXcgbn19KS5jYWxsKGUsZnVuY3Rpb24oKXtyZXR1cm4gdGhpc30oKSl9LGZ1bmN0aW9uKHQsZSl7KGZ1bmN0aW9uKGUpe1widXNlIHN0cmljdFwiO3ZhciBuPWUubmF2aWdhdG9yLmdldFVzZXJNZWRpYXx8ZS5uYXZpZ2F0b3Iud2Via2l0R2V0VXNlck1lZGlhfHxlLm5hdmlnYXRvci5tb3pHZXRVc2VyTWVkaWE7dC5leHBvcnRzPWZ1bmN0aW9uKHQsaSxyKXtuLmNhbGwoZS5uYXZpZ2F0b3IsdCxpLHIpfX0pLmNhbGwoZSxmdW5jdGlvbigpe3JldHVybiB0aGlzfSgpKX0sZnVuY3Rpb24odCxlLG4pe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIGkodCxlKXtpZighKHQgaW5zdGFuY2VvZiBlKSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpfXZhciByPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCh0LGUpe2Zvcih2YXIgbj0wO248ZS5sZW5ndGg7bisrKXt2YXIgaT1lW25dO2kuZW51bWVyYWJsZT1pLmVudW1lcmFibGV8fCExLGkuY29uZmlndXJhYmxlPSEwLFwidmFsdWVcImluIGkmJihpLndyaXRhYmxlPSEwKSxPYmplY3QuZGVmaW5lUHJvcGVydHkodCxpLmtleSxpKX19cmV0dXJuIGZ1bmN0aW9uKGUsbixpKXtyZXR1cm4gbiYmdChlLnByb3RvdHlwZSxuKSxpJiZ0KGUsaSksZX19KCksbz1uKDEzKSxzPW4oMTQpLGE9bigxKS5Qcm9taXNlLHU9bigyNCksaD1mdW5jdGlvbigpe3ZhciB0PXRoaXMsZT10aGlzLmNvbnRleHQ7cmV0dXJuIG5ldyBhKGZ1bmN0aW9uKG4saSl7dC5zb3VyY2U/dC5zb3VyY2UgaW5zdGFuY2VvZiBBdWRpb05vZGU/bih0LnNvdXJjZSk6aShuZXcgRXJyb3IoXCJzb3VyY2UgbmVlZHMgdG8gYmUgYW4gaW5zdGFuY2Ugb2YgQXVkaW9Ob2RlXCIpKTpzKHthdWRpbzohMH0sZnVuY3Rpb24oaSl7dC5zdHJlYW09aSx0LnNvdXJjZT1lLmNyZWF0ZU1lZGlhU3RyZWFtU291cmNlKGkpLG4odC5zb3VyY2UpfS5iaW5kKHQpLGkpfSl9LGM9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KCl7dmFyIGU9YXJndW1lbnRzLmxlbmd0aDw9MHx8dm9pZCAwPT09YXJndW1lbnRzWzBdP3t9OmFyZ3VtZW50c1swXTtpKHRoaXMsdCksdGhpcy5jb250ZXh0PWUuY29udGV4dHx8bygpLHRoaXMuX3JlY29yZGVyPW51bGwsdGhpcy5zb3VyY2U9ZS5zb3VyY2UsdGhpcy5zdHJlYW09bnVsbH1yZXR1cm4gcih0LFt7a2V5Olwic3RhcnRcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciB0PXRoaXM7cmV0dXJuIGguY2FsbCh0aGlzKS50aGVuKGZ1bmN0aW9uKGUpe3JldHVybiB0Ll9yZWNvcmRlcj1uZXcgdShlKSx0Ll9yZWNvcmRlci5yZWNvcmQoKSxlfSl9fSx7a2V5Olwic3RvcFwiLHZhbHVlOmZ1bmN0aW9uKCl7aWYodGhpcy5fcmVjb3JkZXImJnRoaXMuX3JlY29yZGVyLnN0b3AoKSx0aGlzLnN0cmVhbSlpZih0aGlzLnN0cmVhbS5zdG9wKXRoaXMuc3RyZWFtLnN0b3AoKTtlbHNlIGlmKHRoaXMuc3RyZWFtLmdldFRyYWNrcyl7dmFyIHQ9dGhpcy5zdHJlYW0uZ2V0VHJhY2tzKClbMF07dCYmdC5zdG9wKCl9fX0se2tleTpcImdldEJ1ZmZlclwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcztyZXR1cm4gbmV3IGEoZnVuY3Rpb24oZSxuKXt0Ll9yZWNvcmRlcj90Ll9yZWNvcmRlci5nZXRCdWZmZXIoZnVuY3Rpb24obil7dmFyIGk9dC5jb250ZXh0LnNhbXBsZVJhdGUscj10LmNvbnRleHQuY3JlYXRlQnVmZmVyKDIsblswXS5sZW5ndGgsaSk7ci5nZXRDaGFubmVsRGF0YSgwKS5zZXQoblswXSksci5nZXRDaGFubmVsRGF0YSgxKS5zZXQoblsxXSksZShyKX0uYmluZCh0KSk6bihuZXcgRXJyb3IoXCJOb3RoaW5nIGhhcyBiZWVuIHJlY29yZGVkIHlldC5cIikpfSl9fSx7a2V5OlwiZ2V0V0FWXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgdD10aGlzO3JldHVybiBuZXcgYShmdW5jdGlvbihlLG4pe3QuX3JlY29yZGVyP3QuX3JlY29yZGVyLmV4cG9ydFdBVihmdW5jdGlvbih0KXtlKHQpfSk6bihuZXcgRXJyb3IoXCJOb3RoaW5nIGhhcyBiZWVuIHJlY29yZGVkIHlldC5cIikpfSl9fSx7a2V5OlwicGxheVwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcztyZXR1cm4gdGhpcy5nZXRCdWZmZXIoKS50aGVuKGZ1bmN0aW9uKGUpe3ZhciBuPXQuY29udGV4dC5jcmVhdGVCdWZmZXJTb3VyY2UoKTtyZXR1cm4gbi5idWZmZXI9ZSxuLmNvbm5lY3QodC5jb250ZXh0LmRlc3RpbmF0aW9uKSxuLnN0YXJ0KDApLG59KX19LHtrZXk6XCJzYXZlQXNcIix2YWx1ZTpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5nZXRXQVYoKS50aGVuKGZ1bmN0aW9uKGUpe3UuZm9yY2VEb3dubG9hZChlLHQpfSl9fSx7a2V5OlwiZGVsZXRlXCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLl9yZWNvcmRlciYmKHRoaXMuX3JlY29yZGVyLnN0b3AoKSx0aGlzLl9yZWNvcmRlci5jbGVhcigpLHRoaXMuX3JlY29yZGVyPW51bGwpLHRoaXMuc3RyZWFtJiZ0aGlzLnN0cmVhbS5zdG9wKCl9fV0pLHR9KCk7dC5leHBvcnRzPWN9LGZ1bmN0aW9uKHQsZSxuKXtcInVzZSBzdHJpY3RcIjt2YXIgaT1uKDQpLHI9bigyMyksbz1uZXcgcih7Zmxhc2hBdWRpb1BhdGg6XCJodHRwczovL2Nvbm5lY3Quc291bmRjbG91ZC5jb20vc2RrL2ZsYXNoQXVkaW8uc3dmXCJ9KSxzPW4oMiksYT1uKDI1KTt0LmV4cG9ydHM9ZnVuY3Rpb24odCxlKXt2YXIgbj1lP3tzZWNyZXRfdG9rZW46ZX06e307cmV0dXJuIGkucmVxdWVzdChcIkdFVFwiLHQsbikudGhlbihmdW5jdGlvbih0KXt2YXIgbj1zLmdldChcImJhc2VVUkxcIiksaT1zLmdldChcImNsaWVudF9pZFwiKSxyPW4rXCIvdHJhY2tzL1wiK3QuaWQrXCIvc3RyZWFtcz9jbGllbnRfaWQ9XCIraSx1PW4rXCIvdHJhY2tzL1wiK3QuaWQrXCIvcGxheXM/Y2xpZW50X2lkPVwiK2k7cmV0dXJuIGUmJihyKz1cIiZzZWNyZXRfdG9rZW49XCIrZSx1Kz1cIiZzZWNyZXRfdG9rZW49XCIrZSksbmV3IGEobyx7c291bmRJZDp0LmlkLGR1cmF0aW9uOnQuZHVyYXRpb24sc3RyZWFtVXJsc0VuZHBvaW50OnIscmVnaXN0ZXJFbmRwb2ludDp1fSl9KX19LGZ1bmN0aW9uKHQsZSl7dC5leHBvcnRzPXtlbmNvZGU6ZnVuY3Rpb24odCxlKXtmdW5jdGlvbiBuKHQpe3JldHVybiB0LmZpbHRlcihmdW5jdGlvbih0KXtyZXR1cm5cInN0cmluZ1wiPT10eXBlb2YgdCYmdC5sZW5ndGh9KS5qb2luKFwiJlwiKX1mdW5jdGlvbiBpKHQpe3ZhciBlPU9iamVjdC5rZXlzKHQpO3JldHVybiBsP2Uuc29ydCgpOmV9ZnVuY3Rpb24gcih0LGUpe3ZhciByPVwiOm5hbWVbOnByb3BdXCI7cmV0dXJuIG4oaShlKS5tYXAoZnVuY3Rpb24obil7cmV0dXJuIHMoci5yZXBsYWNlKC86bmFtZS8sdCkucmVwbGFjZSgvOnByb3AvLG4pLGVbbl0pfSkpfWZ1bmN0aW9uIG8odCxlKXt2YXIgaT1cIjpuYW1lW11cIjtyZXR1cm4gbihlLm1hcChmdW5jdGlvbihlKXtyZXR1cm4gcyhpLnJlcGxhY2UoLzpuYW1lLyx0KSxlKX0pKX1mdW5jdGlvbiBzKHQsZSl7dmFyIG49LyUyMC9nLGk9ZW5jb2RlVVJJQ29tcG9uZW50LHM9dHlwZW9mIGUsYT1udWxsO3JldHVybiBBcnJheS5pc0FycmF5KGUpP2E9byh0LGUpOlwic3RyaW5nXCI9PT1zP2E9aSh0KStcIj1cIit1KGUpOlwibnVtYmVyXCI9PT1zP2E9aSh0KStcIj1cIitpKGUpLnJlcGxhY2UobixcIitcIik6XCJib29sZWFuXCI9PT1zP2E9aSh0KStcIj1cIitlOlwib2JqZWN0XCI9PT1zJiYobnVsbCE9PWU/YT1yKHQsZSk6Y3x8KGE9aSh0KStcIj1udWxsXCIpKSxhfWZ1bmN0aW9uIGEodCl7cmV0dXJuXCIlXCIrKFwiMFwiK3QuY2hhckNvZGVBdCgwKS50b1N0cmluZygxNikpLnNsaWNlKC0yKS50b1VwcGVyQ2FzZSgpfWZ1bmN0aW9uIHUodCl7cmV0dXJuIHQucmVwbGFjZSgvW14gIScoKX5cXCpdKi9nLGVuY29kZVVSSUNvbXBvbmVudCkucmVwbGFjZSgvIC9nLFwiK1wiKS5yZXBsYWNlKC9bIScoKX5cXCpdL2csYSl9dmFyIGg9XCJvYmplY3RcIj09dHlwZW9mIGU/ZTp7fSxjPWguaWdub3JlbnVsbHx8ITEsbD1oLnNvcnRlZHx8ITE7cmV0dXJuIG4oaSh0KS5tYXAoZnVuY3Rpb24oZSl7cmV0dXJuIHMoZSx0W2VdKX0pKX19fSxmdW5jdGlvbih0LGUpe1widXNlIHN0cmljdFwiO3QuZXhwb3J0cz1mdW5jdGlvbih0KXtyZXR1cm4gZW5jb2RlVVJJQ29tcG9uZW50KHQpLnJlcGxhY2UoL1shJygpKl0vZyxmdW5jdGlvbih0KXtyZXR1cm5cIiVcIit0LmNoYXJDb2RlQXQoMCkudG9TdHJpbmcoMTYpLnRvVXBwZXJDYXNlKCl9KX19LGZ1bmN0aW9uKHQsZSl7dC5leHBvcnRzPWZ1bmN0aW9uKCl7dGhyb3cgbmV3IEVycm9yKFwiZGVmaW5lIGNhbm5vdCBiZSB1c2VkIGluZGlyZWN0XCIpfX0sZnVuY3Rpb24odCxlKXt0LmV4cG9ydHM9ZnVuY3Rpb24odCl7cmV0dXJuIHQud2VicGFja1BvbHlmaWxsfHwodC5kZXByZWNhdGU9ZnVuY3Rpb24oKXt9LHQucGF0aHM9W10sdC5jaGlsZHJlbj1bXSx0LndlYnBhY2tQb2x5ZmlsbD0xKSx0fX0sZnVuY3Rpb24odCxlKXt2YXIgbj13aW5kb3cuVVJMfHx3aW5kb3cud2Via2l0VVJMO3QuZXhwb3J0cz1mdW5jdGlvbih0LGUpe3RyeXt0cnl7dmFyIGk7dHJ5e3ZhciByPXdpbmRvdy5CbG9iQnVpbGRlcnx8d2luZG93LldlYktpdEJsb2JCdWlsZGVyfHx3aW5kb3cuTW96QmxvYkJ1aWxkZXJ8fHdpbmRvdy5NU0Jsb2JCdWlsZGVyO2k9bmV3IHIsaS5hcHBlbmQodCksaT1pLmdldEJsb2IoKX1jYXRjaChvKXtpPW5ldyBCbG9iKFt0XSl9cmV0dXJuIG5ldyBXb3JrZXIobi5jcmVhdGVPYmplY3RVUkwoaSkpfWNhdGNoKG8pe3JldHVybiBuZXcgV29ya2VyKFwiZGF0YTphcHBsaWNhdGlvbi9qYXZhc2NyaXB0LFwiK2VuY29kZVVSSUNvbXBvbmVudCh0KSl9fWNhdGNoKG8pe3JldHVybiBuZXcgV29ya2VyKGUpfX19LGZ1bmN0aW9uKHQsZSxuKXt0LmV4cG9ydHM9ZnVuY3Rpb24oKXtyZXR1cm4gbigyMSkoJyFmdW5jdGlvbih0KXtmdW5jdGlvbiBuKHIpe2lmKGVbcl0pcmV0dXJuIGVbcl0uZXhwb3J0czt2YXIgYT1lW3JdPXtleHBvcnRzOnt9LGlkOnIsbG9hZGVkOiExfTtyZXR1cm4gdFtyXS5jYWxsKGEuZXhwb3J0cyxhLGEuZXhwb3J0cyxuKSxhLmxvYWRlZD0hMCxhLmV4cG9ydHN9dmFyIGU9e307cmV0dXJuIG4ubT10LG4uYz1lLG4ucD1cIlwiLG4oMCl9KFtmdW5jdGlvbih0LG4peyhmdW5jdGlvbih0KXtmdW5jdGlvbiBuKHQpe2g9dC5zYW1wbGVSYXRlLHY9dC5udW1DaGFubmVscyxzKCl9ZnVuY3Rpb24gZSh0KXtmb3IodmFyIG49MDt2Pm47bisrKXBbbl0ucHVzaCh0W25dKTtnKz10WzBdLmxlbmd0aH1mdW5jdGlvbiByKHQpe2Zvcih2YXIgbj1bXSxlPTA7dj5lO2UrKyluLnB1c2goaShwW2VdLGcpKTtpZigyPT09dil2YXIgcj1mKG5bMF0sblsxXSk7ZWxzZSB2YXIgcj1uWzBdO3ZhciBhPWwociksbz1uZXcgQmxvYihbYV0se3R5cGU6dH0pO3RoaXMucG9zdE1lc3NhZ2Uobyl9ZnVuY3Rpb24gYSgpe2Zvcih2YXIgdD1bXSxuPTA7dj5uO24rKyl0LnB1c2goaShwW25dLGcpKTt0aGlzLnBvc3RNZXNzYWdlKHQpfWZ1bmN0aW9uIG8oKXtnPTAscD1bXSxzKCl9ZnVuY3Rpb24gcygpe2Zvcih2YXIgdD0wO3Y+dDt0KyspcFt0XT1bXX1mdW5jdGlvbiBpKHQsbil7Zm9yKHZhciBlPW5ldyBGbG9hdDMyQXJyYXkobikscj0wLGE9MDthPHQubGVuZ3RoO2ErKyllLnNldCh0W2FdLHIpLHIrPXRbYV0ubGVuZ3RoO3JldHVybiBlfWZ1bmN0aW9uIGYodCxuKXtmb3IodmFyIGU9dC5sZW5ndGgrbi5sZW5ndGgscj1uZXcgRmxvYXQzMkFycmF5KGUpLGE9MCxvPTA7ZT5hOylyW2ErK109dFtvXSxyW2ErK109bltvXSxvKys7cmV0dXJuIHJ9ZnVuY3Rpb24gYyh0LG4sZSl7Zm9yKHZhciByPTA7cjxlLmxlbmd0aDtyKyssbis9Mil7dmFyIGE9TWF0aC5tYXgoLTEsTWF0aC5taW4oMSxlW3JdKSk7dC5zZXRJbnQxNihuLDA+YT8zMjc2OCphOjMyNzY3KmEsITApfX1mdW5jdGlvbiB1KHQsbixlKXtmb3IodmFyIHI9MDtyPGUubGVuZ3RoO3IrKyl0LnNldFVpbnQ4KG4rcixlLmNoYXJDb2RlQXQocikpfWZ1bmN0aW9uIGwodCl7dmFyIG49bmV3IEFycmF5QnVmZmVyKDQ0KzIqdC5sZW5ndGgpLGU9bmV3IERhdGFWaWV3KG4pO3JldHVybiB1KGUsMCxcIlJJRkZcIiksZS5zZXRVaW50MzIoNCwzNisyKnQubGVuZ3RoLCEwKSx1KGUsOCxcIldBVkVcIiksdShlLDEyLFwiZm10IFwiKSxlLnNldFVpbnQzMigxNiwxNiwhMCksZS5zZXRVaW50MTYoMjAsMSwhMCksZS5zZXRVaW50MTYoMjIsdiwhMCksZS5zZXRVaW50MzIoMjQsaCwhMCksZS5zZXRVaW50MzIoMjgsNCpoLCEwKSxlLnNldFVpbnQxNigzMiwyKnYsITApLGUuc2V0VWludDE2KDM0LDE2LCEwKSx1KGUsMzYsXCJkYXRhXCIpLGUuc2V0VWludDMyKDQwLDIqdC5sZW5ndGgsITApLGMoZSw0NCx0KSxlfXZhciBoLHYsZz0wLHA9W107dC5vbm1lc3NhZ2U9ZnVuY3Rpb24odCl7c3dpdGNoKHQuZGF0YS5jb21tYW5kKXtjYXNlXCJpbml0XCI6bih0LmRhdGEuY29uZmlnKTticmVhaztjYXNlXCJyZWNvcmRcIjplKHQuZGF0YS5idWZmZXIpO2JyZWFrO2Nhc2VcImV4cG9ydFdBVlwiOnIodC5kYXRhLnR5cGUpO2JyZWFrO2Nhc2VcImdldEJ1ZmZlclwiOmEoKTticmVhaztjYXNlXCJjbGVhclwiOm8oKX19fSkuY2FsbChuLGZ1bmN0aW9uKCl7cmV0dXJuIHRoaXN9KCkpfV0pO1xcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPTlmOWFhYzMyYzlhNzQzMmI1NTU1Lndvcmtlci5qcy5tYXAnLG4ucCtcIjlmOWFhYzMyYzlhNzQzMmI1NTU1Lndvcmtlci5qc1wiKX19LGZ1bmN0aW9uKHQsZSl7dC5leHBvcnRzPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoaSl7aWYobltpXSlyZXR1cm4gbltpXS5leHBvcnRzO3ZhciByPW5baV09e2V4cG9ydHM6e30saWQ6aSxsb2FkZWQ6ITF9O3JldHVybiB0W2ldLmNhbGwoci5leHBvcnRzLHIsci5leHBvcnRzLGUpLHIubG9hZGVkPSEwLHIuZXhwb3J0c312YXIgbj17fTtyZXR1cm4gZS5tPXQsZS5jPW4sZS5wPVwiXCIsZSgwKX0oZnVuY3Rpb24odCl7Zm9yKHZhciBlIGluIHQpaWYoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHQsZSkpc3dpdGNoKHR5cGVvZiB0W2VdKXtjYXNlXCJmdW5jdGlvblwiOmJyZWFrO2Nhc2VcIm9iamVjdFwiOnRbZV09ZnVuY3Rpb24oZSl7dmFyIG49ZS5zbGljZSgxKSxpPXRbZVswXV07cmV0dXJuIGZ1bmN0aW9uKHQsZSxyKXtpLmFwcGx5KHRoaXMsW3QsZSxyXS5jb25jYXQobikpfX0odFtlXSk7YnJlYWs7ZGVmYXVsdDp0W2VdPXRbdFtlXV19cmV0dXJuIHR9KFtmdW5jdGlvbih0LGUsbil7dmFyIGkscj1uKDEpLG89bigxMikscz1uKDE0KSxhPW4oMzgpLHU9big0MyksaD1uKDM5KSxjPW4oMTYpLGw9big0MiksZj1uKDEyOCksZD1uKDEyOSk7dC5leHBvcnRzPWk9ZnVuY3Rpb24odCl7dD10fHx7fSx0aGlzLl9wbGF5ZXJzPXt9LHRoaXMuX3ZvbHVtZT0xLHRoaXMuX211dGU9ITEsdGhpcy5TdGF0ZXM9YSx0aGlzLkVycm9ycz11LHRoaXMuX3NldHRpbmdzPW8oe30sdCxpLmRlZmF1bHRzKX0saS5NaW1lVHlwZXM9ZCxpLlByb3RvY29scz1mLGkuRXZlbnRzPWgsaS5TdGF0ZXM9YSxpLkVycm9ycz11LGkuQnJvd3NlclV0aWxzPWMsaS5kZWZhdWx0cz17Zmxhc2hBdWRpb1BhdGg6XCJmbGFzaEF1ZGlvLnN3ZlwiLGZsYXNoTG9hZFRpbWVvdXQ6MmUzLGZsYXNoT2JqZWN0SUQ6XCJmbGFzaEF1ZGlvT2JqZWN0XCIsYXVkaW9PYmplY3RJRDpcImh0bWw1QXVkaW9PYmplY3RcIix1cGRhdGVJbnRlcnZhbDozMDAsYnVmZmVyVGltZTo4ZTMsYnVmZmVyaW5nRGVsYXk6ODAwLHN0cmVhbVVybFByb3ZpZGVyOm51bGwsZGVidWc6ITF9LGkuY2FwYWJpbGl0aWVzPWwubmFtZXMsaS5jcmVhdGVEZWZhdWx0TWVkaWFEZXNjcmlwdG9yPWZ1bmN0aW9uKHQsZSxuKXtpZighdHx8IWV8fCFlLmxlbmd0aCl0aHJvdyBuZXcgRXJyb3IoXCJpbnZhbGlkIGlucHV0IHRvIGNyZWF0ZSBtZWRpYSBkZXNjcmlwdG9yXCIpO3JldHVybiBufHwobj0wKSx7aWQ6dCxzcmM6ZSxkdXJhdGlvbjpuLGZvcmNlU2luZ2xlOiExLGZvcmNlRmxhc2g6ITEsZm9yY2VIVE1MNTohMSxmb3JjZUN1c3RvbUhMUzohMSxtaW1lVHlwZTp2b2lkIDB9fSxpLnByb3RvdHlwZS5nZXRBdWRpb1BsYXllcj1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5fcGxheWVyc1t0XX0saS5wcm90b3R5cGUuaGFzQXVkaW9QbGF5ZXI9ZnVuY3Rpb24odCl7cmV0dXJuIHZvaWQgMCE9PXRoaXMuX3BsYXllcnNbdF19LGkucHJvdG90eXBlLnJlbW92ZUF1ZGlvUGxheWVyPWZ1bmN0aW9uKHQpe3RoaXMuaGFzQXVkaW9QbGF5ZXIodCkmJmRlbGV0ZSB0aGlzLl9wbGF5ZXJzW3RdfSxpLnByb3RvdHlwZS5zZXRWb2x1bWU9ZnVuY3Rpb24odCl7dD1NYXRoLm1pbigxLHQpLHRoaXMuX3ZvbHVtZT1NYXRoLm1heCgwLHQpO2Zvcih2YXIgZSBpbiB0aGlzLl9wbGF5ZXJzKXRoaXMuX3BsYXllcnMuaGFzT3duUHJvcGVydHkoZSkmJnRoaXMuX3BsYXllcnNbZV0uc2V0Vm9sdW1lKHRoaXMuX3ZvbHVtZSl9LGkucHJvdG90eXBlLmdldFZvbHVtZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLl92b2x1bWV9LGkucHJvdG90eXBlLnNldE11dGU9ZnVuY3Rpb24odCl7dGhpcy5fbXV0ZWQ9dDtmb3IodmFyIGUgaW4gdGhpcy5fcGxheWVycyl0aGlzLl9wbGF5ZXJzLmhhc093blByb3BlcnR5KGUpJiZ0aGlzLl9wbGF5ZXJzW2VdLnNldE11dGUodGhpcy5fbXV0ZWQpfSxpLnByb3RvdHlwZS5nZXRNdXRlPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX211dGVkfSxpLnByb3RvdHlwZS5jcmVhdGVBdWRpb1BsYXllcj1mdW5jdGlvbih0LGUpe3ZhciBuLGk9cih7fSx0aGlzLl9zZXR0aW5ncyxlKTtpZighdCl0aHJvd1wiQXVkaW9NYW5hZ2VyOiBObyBtZWRpYSBkZXNjcmlwdG9yIG9iamVjdCBwYXNzZWQsIGNhbmB0IGJ1aWxkIGFueSBwbGF5ZXJcIjtpZih0LmlkfHwodC5pZD1NYXRoLmZsb29yKDFlMTAqTWF0aC5yYW5kb20oKSkudG9TdHJpbmcoKSsobmV3IERhdGUpLmdldFRpbWUoKS50b1N0cmluZygpKSwhdC5zcmMpdGhyb3cgbmV3IEVycm9yKFwiQXVkaW9NYW5hZ2VyOiBZb3UgbmVlZCB0byBwYXNzIGEgdmFsaWQgbWVkaWEgc291cmNlIFVSTFwiKTtpZighdGhpcy5fcGxheWVyc1t0LmlkXSl7aWYobj1zLmNyZWF0ZUF1ZGlvUGxheWVyKHQsaSksIW4pdGhyb3cgbmV3IEVycm9yKFwiQXVkaW9NYW5hZ2VyOiBObyBwbGF5ZXIgY291bGQgYmUgY3JlYXRlZCBmcm9tIHRoZSBnaXZlbiBkZXNjcmlwdG9yXCIpO3RoaXMuX3BsYXllcnNbdC5pZF09bn1yZXR1cm4gdGhpcy5fcGxheWVyc1t0LmlkXS5zZXRWb2x1bWUodGhpcy5fdm9sdW1lKSx0aGlzLl9wbGF5ZXJzW3QuaWRdLnNldE11dGUodGhpcy5fbXV0ZWQpLHRoaXMuX3BsYXllcnNbdC5pZF0ub24oaC5TVEFURV9DSEFOR0UsdGhpcy5fb25TdGF0ZUNoYW5nZSx0aGlzKSx0aGlzLl9wbGF5ZXJzW3QuaWRdfSxpLnByb3RvdHlwZS5fb25TdGF0ZUNoYW5nZT1mdW5jdGlvbih0LGUpe2UuZ2V0U3RhdGUoKT09PWEuREVBRCYmdGhpcy5yZW1vdmVBdWRpb1BsYXllcihlLmdldElkKCkpfX0sWzEzMCwyLDgsNF0sWzEzMSwzLDRdLGZ1bmN0aW9uKHQsZSl7ZnVuY3Rpb24gbih0LGUsbil7bnx8KG49e30pO2Zvcih2YXIgaT0tMSxyPWUubGVuZ3RoOysraTxyOyl7dmFyIG89ZVtpXTtuW29dPXRbb119cmV0dXJuIG59dC5leHBvcnRzPW59LFsxMzIsNSw2LDddLGZ1bmN0aW9uKHQsZSl7ZnVuY3Rpb24gbih0KXtyZXR1cm4hIXQmJlwib2JqZWN0XCI9PXR5cGVvZiB0fWZ1bmN0aW9uIGkodCxlKXt2YXIgbj1udWxsPT10P3ZvaWQgMDp0W2VdO3JldHVybiBzKG4pP246dm9pZCAwfWZ1bmN0aW9uIHIodCl7cmV0dXJuIG8odCkmJmYuY2FsbCh0KT09YX1mdW5jdGlvbiBvKHQpe3ZhciBlPXR5cGVvZiB0O3JldHVybiEhdCYmKFwib2JqZWN0XCI9PWV8fFwiZnVuY3Rpb25cIj09ZSl9ZnVuY3Rpb24gcyh0KXtyZXR1cm4gbnVsbD09dD8hMTpyKHQpP2QudGVzdChjLmNhbGwodCkpOm4odCkmJnUudGVzdCh0KX12YXIgYT1cIltvYmplY3QgRnVuY3Rpb25dXCIsdT0vXlxcW29iamVjdCAuKz9Db25zdHJ1Y3RvclxcXSQvLGg9T2JqZWN0LnByb3RvdHlwZSxjPUZ1bmN0aW9uLnByb3RvdHlwZS50b1N0cmluZyxsPWguaGFzT3duUHJvcGVydHksZj1oLnRvU3RyaW5nLGQ9UmVnRXhwKFwiXlwiK2MuY2FsbChsKS5yZXBsYWNlKC9bXFxcXF4kLiorPygpW1xcXXt9fF0vZyxcIlxcXFwkJlwiKS5yZXBsYWNlKC9oYXNPd25Qcm9wZXJ0eXwoZnVuY3Rpb24pLio/KD89XFxcXFxcKCl8IGZvciAuKz8oPz1cXFxcXFxdKS9nLFwiJDEuKj9cIikrXCIkXCIpO3QuZXhwb3J0cz1pfSxmdW5jdGlvbih0LGUpe2Z1bmN0aW9uIG4odCl7cmV0dXJuISF0JiZcIm9iamVjdFwiPT10eXBlb2YgdH1mdW5jdGlvbiBpKHQpe3JldHVybiBmdW5jdGlvbihlKXtyZXR1cm4gbnVsbD09ZT92b2lkIDA6ZVt0XX19ZnVuY3Rpb24gcih0KXtyZXR1cm4gbnVsbCE9dCYmbyhsKHQpKX1mdW5jdGlvbiBvKHQpe3JldHVyblwibnVtYmVyXCI9PXR5cGVvZiB0JiZ0Pi0xJiZ0JTE9PTAmJmM+PXR9ZnVuY3Rpb24gcyh0KXtyZXR1cm4gbih0KSYmcih0KSYmdS5jYWxsKHQsXCJjYWxsZWVcIikmJiFoLmNhbGwodCxcImNhbGxlZVwiKX12YXIgYT1PYmplY3QucHJvdG90eXBlLHU9YS5oYXNPd25Qcm9wZXJ0eSxoPWEucHJvcGVydHlJc0VudW1lcmFibGUsYz05MDA3MTk5MjU0NzQwOTkxLGw9aShcImxlbmd0aFwiKTt0LmV4cG9ydHM9c30sZnVuY3Rpb24odCxlKXtmdW5jdGlvbiBuKHQpe3JldHVybiEhdCYmXCJvYmplY3RcIj09dHlwZW9mIHR9ZnVuY3Rpb24gaSh0LGUpe3ZhciBuPW51bGw9PXQ/dm9pZCAwOnRbZV07cmV0dXJuIGEobik/bjp2b2lkIDB9ZnVuY3Rpb24gcih0KXtyZXR1cm5cIm51bWJlclwiPT10eXBlb2YgdCYmdD4tMSYmdCUxPT0wJiZtPj10fWZ1bmN0aW9uIG8odCl7cmV0dXJuIHModCkmJnAuY2FsbCh0KT09aH1mdW5jdGlvbiBzKHQpe3ZhciBlPXR5cGVvZiB0O3JldHVybiEhdCYmKFwib2JqZWN0XCI9PWV8fFwiZnVuY3Rpb25cIj09ZSl9ZnVuY3Rpb24gYSh0KXtyZXR1cm4gbnVsbD09dD8hMTpvKHQpP2cudGVzdChmLmNhbGwodCkpOm4odCkmJmMudGVzdCh0KX12YXIgdT1cIltvYmplY3QgQXJyYXldXCIsaD1cIltvYmplY3QgRnVuY3Rpb25dXCIsYz0vXlxcW29iamVjdCAuKz9Db25zdHJ1Y3RvclxcXSQvLGw9T2JqZWN0LnByb3RvdHlwZSxmPUZ1bmN0aW9uLnByb3RvdHlwZS50b1N0cmluZyxkPWwuaGFzT3duUHJvcGVydHkscD1sLnRvU3RyaW5nLGc9UmVnRXhwKFwiXlwiK2YuY2FsbChkKS5yZXBsYWNlKC9bXFxcXF4kLiorPygpW1xcXXt9fF0vZyxcIlxcXFwkJlwiKS5yZXBsYWNlKC9oYXNPd25Qcm9wZXJ0eXwoZnVuY3Rpb24pLio/KD89XFxcXFxcKCl8IGZvciAuKz8oPz1cXFxcXFxdKS9nLFwiJDEuKj9cIikrXCIkXCIpLF89aShBcnJheSxcImlzQXJyYXlcIiksbT05MDA3MTk5MjU0NzQwOTkxLHk9X3x8ZnVuY3Rpb24odCl7cmV0dXJuIG4odCkmJnIodC5sZW5ndGgpJiZwLmNhbGwodCk9PXV9O3QuZXhwb3J0cz15fSxbMTMzLDksMTAsMTFdLGZ1bmN0aW9uKHQsZSl7ZnVuY3Rpb24gbih0LGUsbil7aWYoXCJmdW5jdGlvblwiIT10eXBlb2YgdClyZXR1cm4gaTtpZih2b2lkIDA9PT1lKXJldHVybiB0O3N3aXRjaChuKXtjYXNlIDE6cmV0dXJuIGZ1bmN0aW9uKG4pe3JldHVybiB0LmNhbGwoZSxuKX07Y2FzZSAzOnJldHVybiBmdW5jdGlvbihuLGkscil7cmV0dXJuIHQuY2FsbChlLG4saSxyKX07Y2FzZSA0OnJldHVybiBmdW5jdGlvbihuLGkscixvKXtyZXR1cm4gdC5jYWxsKGUsbixpLHIsbyl9O2Nhc2UgNTpyZXR1cm4gZnVuY3Rpb24obixpLHIsbyxzKXtyZXR1cm4gdC5jYWxsKGUsbixpLHIsbyxzKX19cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIHQuYXBwbHkoZSxhcmd1bWVudHMpfX1mdW5jdGlvbiBpKHQpe3JldHVybiB0fXQuZXhwb3J0cz1ufSxmdW5jdGlvbih0LGUpe2Z1bmN0aW9uIG4odCl7cmV0dXJuIGZ1bmN0aW9uKGUpe3JldHVybiBudWxsPT1lP3ZvaWQgMDplW3RdfX1mdW5jdGlvbiBpKHQpe3JldHVybiBudWxsIT10JiZzKGModCkpfWZ1bmN0aW9uIHIodCxlKXtyZXR1cm4gdD1cIm51bWJlclwiPT10eXBlb2YgdHx8dS50ZXN0KHQpPyt0Oi0xLGU9bnVsbD09ZT9oOmUsdD4tMSYmdCUxPT0wJiZlPnR9ZnVuY3Rpb24gbyh0LGUsbil7aWYoIWEobikpcmV0dXJuITE7dmFyIG89dHlwZW9mIGU7aWYoXCJudW1iZXJcIj09bz9pKG4pJiZyKGUsbi5sZW5ndGgpOlwic3RyaW5nXCI9PW8mJmUgaW4gbil7dmFyIHM9bltlXTtyZXR1cm4gdD09PXQ/dD09PXM6cyE9PXN9cmV0dXJuITF9ZnVuY3Rpb24gcyh0KXtyZXR1cm5cIm51bWJlclwiPT10eXBlb2YgdCYmdD4tMSYmdCUxPT0wJiZoPj10fWZ1bmN0aW9uIGEodCl7dmFyIGU9dHlwZW9mIHQ7cmV0dXJuISF0JiYoXCJvYmplY3RcIj09ZXx8XCJmdW5jdGlvblwiPT1lKX12YXIgdT0vXlxcZCskLyxoPTkwMDcxOTkyNTQ3NDA5OTEsYz1uKFwibGVuZ3RoXCIpO3QuZXhwb3J0cz1vfSxmdW5jdGlvbih0LGUpe2Z1bmN0aW9uIG4odCxlKXtpZihcImZ1bmN0aW9uXCIhPXR5cGVvZiB0KXRocm93IG5ldyBUeXBlRXJyb3IoaSk7cmV0dXJuIGU9cih2b2lkIDA9PT1lP3QubGVuZ3RoLTE6K2V8fDAsMCksZnVuY3Rpb24oKXtmb3IodmFyIG49YXJndW1lbnRzLGk9LTEsbz1yKG4ubGVuZ3RoLWUsMCkscz1BcnJheShvKTsrK2k8bzspc1tpXT1uW2UraV07c3dpdGNoKGUpe2Nhc2UgMDpyZXR1cm4gdC5jYWxsKHRoaXMscyk7Y2FzZSAxOnJldHVybiB0LmNhbGwodGhpcyxuWzBdLHMpO2Nhc2UgMjpyZXR1cm4gdC5jYWxsKHRoaXMsblswXSxuWzFdLHMpfXZhciBhPUFycmF5KGUrMSk7Zm9yKGk9LTE7KytpPGU7KWFbaV09bltpXTtyZXR1cm4gYVtlXT1zLHQuYXBwbHkodGhpcyxhKX19dmFyIGk9XCJFeHBlY3RlZCBhIGZ1bmN0aW9uXCIscj1NYXRoLm1heDt0LmV4cG9ydHM9bn0sZnVuY3Rpb24odCxlLG4pe2Z1bmN0aW9uIGkodCxlKXtyZXR1cm4gdm9pZCAwPT09dD9lOnR9ZnVuY3Rpb24gcih0LGUpe3JldHVybiBzKGZ1bmN0aW9uKG4pe3ZhciBpPW5bMF07cmV0dXJuIG51bGw9PWk/aToobi5wdXNoKGUpLHQuYXBwbHkodm9pZCAwLG4pKX0pfXZhciBvPW4oMSkscz1uKDEzKSxhPXIobyxpKTt0LmV4cG9ydHM9YX0sMTEsZnVuY3Rpb24odCxlLG4pe3QuZXhwb3J0cz1uKDE1KX0sZnVuY3Rpb24odCxlLG4pe3ZhciBpLHI9bigxNiksbz1uKDE3KSxzPW4oNDUpLGE9big0OSksdT1uKDQ2KSxoPW4oNDgpLGM9big1MCksbD1uKDEyOSk7dC5leHBvcnRzPWk9ZnVuY3Rpb24oKXt9LGkuY3JlYXRlQXVkaW9QbGF5ZXI9ZnVuY3Rpb24odCxlKXt2YXIgbjtpZihuPXQuc3JjLnNwbGl0KFwiOlwiKVswXSwoXCJydG1wXCI9PT1ufHxcInJ0bXB0XCI9PT1ufHx0LmZvcmNlRmxhc2gpJiYhdC5mb3JjZUhUTUw1KXJldHVybiBuZXcgbyh0LGUpO2lmKHQubWltZVR5cGU9aS5nZXRNaW1lVHlwZSh0KSx0Lm1pbWVUeXBlPT09bC5NM1U4KXtpZihyLmlzTVNFU3VwcG9ydE1QRUcoKXx8ci5pc01TRVN1cHBvcnRNUDQoKSlyZXR1cm4gbmV3IGModCxlKTtpZihyLmlzTmF0aXZlSGxzU3VwcG9ydGVkKCkmJiF0LmZvcmNlQ3VzdG9tSExTKXJldHVybiByLmlzTW9iaWxlKCl8fHQuZm9yY2VTaW5nbGU/bmV3IGEodCxlKTpuZXcgcyh0LGUpfWVsc2V7aWYoci5zdXBwb3J0SFRNTDVBdWRpbygpJiZyLmNhblBsYXlUeXBlKHQubWltZVR5cGUpfHx0LmZvcmNlSFRNTDUpcmV0dXJuIHIuaXNNb2JpbGUoKXx8dC5mb3JjZVNpbmdsZT9uZXcgaCh0LGUpOm5ldyB1KHQsZSk7aWYodC5taW1lVHlwZT09PWwuTVAzKXJldHVybiBuZXcgbyh0LGUpfXJldHVybiBudWxsfSxpLmdldE1pbWVUeXBlPWZ1bmN0aW9uKHQpe2lmKHQubWltZVR5cGUpcmV0dXJuIHQubWltZVR5cGU7dmFyIGU9dC5zcmMuc3BsaXQoXCI/XCIpWzBdO3JldHVybiBlPWUuc3Vic3RyaW5nKGUubGFzdEluZGV4T2YoXCIuXCIpKzEsZS5sZW5ndGgpLGwuZ2V0VHlwZUJ5RXh0ZW5zaW9uKGUpfX0sZnVuY3Rpb24odCxlKXtmdW5jdGlvbiBuKCl7cmV0dXJuISghd2luZG93Lk1lZGlhU291cmNlJiYhd2luZG93LldlYktpdE1lZGlhU291cmNlKX10LmV4cG9ydHM9e3N1cHBvcnRIVE1MNUF1ZGlvOmZ1bmN0aW9uKCl7dmFyIHQ7dHJ5e2lmKHdpbmRvdy5IVE1MQXVkaW9FbGVtZW50JiZcInVuZGVmaW5lZFwiIT10eXBlb2YgQXVkaW8pcmV0dXJuIHQ9bmV3IEF1ZGlvLCEwfWNhdGNoKGUpe3JldHVybiExfX0sY3JlYXRlQXVkaW9FbGVtZW50OmZ1bmN0aW9uKCl7dmFyIHQ9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImF1ZGlvXCIpO3JldHVybiB0LnNldEF0dHJpYnV0ZShcIm1zQXVkaW9DYXRlZ29yeVwiLFwiQmFja2dyb3VuZENhcGFibGVNZWRpYVwiKSx0Lm1vekF1ZGlvQ2hhbm5lbFR5cGU9XCJjb250ZW50XCIsdH0saXNNb2JpbGU6ZnVuY3Rpb24odCl7dmFyIGU9d2luZG93Lm5hdmlnYXRvci51c2VyQWdlbnQsbj1bXCJtb2JpbGVcIixcImlQaG9uZVwiLFwiaVBhZFwiLFwiaVBvZFwiLFwiQW5kcm9pZFwiLFwiU2t5ZmlyZVwiXTtyZXR1cm4gbi5zb21lKGZ1bmN0aW9uKHQpe3JldHVybiB0PW5ldyBSZWdFeHAodCxcImlcIiksdC50ZXN0KGUpfSl9LGlzSUUxME1vYmlsZTpmdW5jdGlvbigpe3JldHVybi9JRW1vYmlsZVxcLzEwXFwuMC9naS50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpfSxjYW5QbGF5VHlwZTpmdW5jdGlvbih0KXt2YXIgZT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYXVkaW9cIik7cmV0dXJuISEoZSYmZS5jYW5QbGF5VHlwZSYmZS5jYW5QbGF5VHlwZSh0KS5tYXRjaCgvbWF5YmV8cHJvYmFibHkvaSkpfSxpc05hdGl2ZUhsc1N1cHBvcnRlZDpmdW5jdGlvbigpe3ZhciB0LGUsbixpPW5hdmlnYXRvci51c2VyQWdlbnQscj1bXCJpUGhvbmVcIixcImlQYWRcIixcImlQb2RcIl07cmV0dXJuIHQ9ZnVuY3Rpb24odCl7cmV0dXJuIHQudGVzdChpKX0sZT0hdCgvY2hyb21lL2kpJiYhdCgvb3BlcmEvaSkmJnQoL3NhZmFyaS9pKSxuPXIuc29tZShmdW5jdGlvbihlKXtyZXR1cm4gdChuZXcgUmVnRXhwKGUsXCJpXCIpKX0pLG58fGV9LGlzTVNFU3VwcG9ydGVkOm4saXNNU0VTdXBwb3J0TVBFRzpmdW5jdGlvbigpe3JldHVybiBuKCkmJk1lZGlhU291cmNlLmlzVHlwZVN1cHBvcnRlZChcImF1ZGlvL21wZWdcIil9LGlzTVNFU3VwcG9ydE1QNDpmdW5jdGlvbigpe3JldHVybiBuKCkmJk1lZGlhU291cmNlLmlzVHlwZVN1cHBvcnRlZChcImF1ZGlvL21wNFwiKX19fSxmdW5jdGlvbih0LGUsbil7ZnVuY3Rpb24gaSh0LGUpe2EuY2FsbCh0aGlzLFwiRmxhc2hBdWRpb1Byb3h5XCIsdCxlKSxpLnBsYXllcnNbdC5pZF09dGhpcyx0aGlzLl9lcnJvck1lc3NhZ2U9bnVsbCx0aGlzLl9lcnJvcklEPW51bGwsdGhpcy5fdm9sdW1lPTEsdGhpcy5fbXV0ZWQ9ITEsaS5jcmVhdGluZ0ZsYXNoQXVkaW98fChpLmZsYXNoQXVkaW8/dGhpcy5fY3JlYXRlRmxhc2hBdWRpbygpOmkuY3JlYXRlRmxhc2hPYmplY3QoZSkpfXZhciByPW4oMSksbz1uKDE4KSxzPW4oMjkpLGE9bigzNSksdT1uKDM5KSxoPW4oNDMpLGM9bigzOCksbD1uKDQ0KTt0LmV4cG9ydHM9aSxyKGkucHJvdG90eXBlLGEucHJvdG90eXBlKSxpLnBsYXllcnM9e30saS5jcmVhdGVGbGFzaE9iamVjdD1mdW5jdGlvbih0KXtpLmNyZWF0aW5nRmxhc2hBdWRpbz0hMCxpLmNvbnRhaW5lckVsZW1lbnQ9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKSxpLmNvbnRhaW5lckVsZW1lbnQuc2V0QXR0cmlidXRlKFwiaWRcIix0LmZsYXNoT2JqZWN0SUQrXCItY29udGFpbmVyXCIpLGkuZmxhc2hFbGVtZW50VGFyZ2V0PWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiksaS5mbGFzaEVsZW1lbnRUYXJnZXQuc2V0QXR0cmlidXRlKFwiaWRcIix0LmZsYXNoT2JqZWN0SUQrXCItdGFyZ2V0XCIpLGkuY29udGFpbmVyRWxlbWVudC5hcHBlbmRDaGlsZChpLmZsYXNoRWxlbWVudFRhcmdldCksZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChpLmNvbnRhaW5lckVsZW1lbnQpO3ZhciBlPWZ1bmN0aW9uKGUpe2lmKGUuc3VjY2VzcylpLmZsYXNoQXVkaW89ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodC5mbGFzaE9iamVjdElEKSx3aW5kb3cuc2V0VGltZW91dChmdW5jdGlvbigpe2lmKGkuZmxhc2hBdWRpbyYmIShcIlBlcmNlbnRMb2FkZWRcImluIGkuZmxhc2hBdWRpbykpZm9yKHZhciB0IGluIGkucGxheWVycylpLnBsYXllcnMuaGFzT3duUHJvcGVydHkodCkmJihpLnBsYXllcnNbdF0uX2Vycm9ySUQ9aC5GTEFTSF9QUk9YWV9GTEFTSF9CTE9DS0VELGkucGxheWVyc1t0XS5fZXJyb3JNZXNzYWdlPVwiRmxhc2ggb2JqZWN0IGJsb2NrZWRcIixpLnBsYXllcnNbdF0uX3NldFN0YXRlKGMuRVJST1IpLGkucGxheWVyc1t0XS5fbG9nZ2VyLnR5cGU9aS5wbGF5ZXJzW3RdLmdldFR5cGUoKSxpLnBsYXllcnNbdF0uX2xvZ2dlci5sb2coaS5wbGF5ZXJzW3RdLl9lcnJvck1lc3NhZ2UpKX0sdC5mbGFzaExvYWRUaW1lb3V0KSxpLmZsYXNoQXVkaW8udHJpZ2dlckV2ZW50PWZ1bmN0aW9uKHQsZSl7aS5wbGF5ZXJzW3RdLl90cmlnZ2VyRXZlbnQoZSl9LGkuZmxhc2hBdWRpby5vblBvc2l0aW9uQ2hhbmdlPWZ1bmN0aW9uKHQsZSxuLHIpe2kucGxheWVyc1t0XS5fb25Qb3NpdGlvbkNoYW5nZShlLG4scil9LGkuZmxhc2hBdWRpby5vbkRlYnVnPWZ1bmN0aW9uKHQsZSxuKXtpLnBsYXllcnNbdF0uX2xvZ2dlci50eXBlPWUsaS5wbGF5ZXJzW3RdLl9sb2dnZXIubG9nKG4pfSxpLmZsYXNoQXVkaW8ub25TdGF0ZUNoYW5nZT1mdW5jdGlvbih0LGUpe2kucGxheWVyc1t0XS5fc2V0U3RhdGUoZSksZT09PWMuREVBRCYmZGVsZXRlIGkucGxheWVyc1t0XX0saS5mbGFzaEF1ZGlvLm9uSW5pdD1mdW5jdGlvbih0KXtpLmNyZWF0aW5nRmxhc2hBdWRpbz0hMSxvKHMoaS5wbGF5ZXJzKSxcIl9jcmVhdGVGbGFzaEF1ZGlvXCIpfTtlbHNlIGZvcih2YXIgbiBpbiBpLnBsYXllcnMpaS5wbGF5ZXJzLmhhc093blByb3BlcnR5KG4pJiYoaS5wbGF5ZXJzW25dLl9lcnJvcklEPWguRkxBU0hfUFJPWFlfQ0FOVF9MT0FEX0ZMQVNILGkucGxheWVyc1tuXS5fZXJyb3JNZXNzYWdlPVwiQ2Fubm90IGNyZWF0ZSBmbGFzaCBvYmplY3RcIixpLnBsYXllcnNbbl0uX3NldFN0YXRlKGMuRVJST1IpKX07ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodC5mbGFzaE9iamVjdElEKXx8bC5lbWJlZFNXRih0LmZsYXNoQXVkaW9QYXRoLHQuZmxhc2hPYmplY3RJRCtcIi10YXJnZXRcIixcIjFcIixcIjFcIixcIjkuMC4yNFwiLFwiXCIse2pzb246ZW5jb2RlVVJJQ29tcG9uZW50KEpTT04uc3RyaW5naWZ5KHQpKX0se2FsbG93c2NyaXB0YWNjZXNzOlwiYWx3YXlzXCJ9LHtpZDp0LmZsYXNoT2JqZWN0SUQsdGFiSW5kZXg6XCItMVwifSxlKX0saS5fcmVhZHk9ZnVuY3Rpb24oKXtyZXR1cm4gaS5mbGFzaEF1ZGlvJiYhaS5jcmVhdGluZ0ZsYXNoQXVkaW99LGkucHJvdG90eXBlLl9jcmVhdGVGbGFzaEF1ZGlvPWZ1bmN0aW9uKCl7aS5mbGFzaEF1ZGlvLmNyZWF0ZUF1ZGlvKHRoaXMuZ2V0RGVzY3JpcHRvcigpKSx0aGlzLl9zdGF0ZT1pLmZsYXNoQXVkaW8uZ2V0U3RhdGUodGhpcy5nZXRJZCgpKSx0aGlzLnNldFZvbHVtZSh0aGlzLl92b2x1bWUpLHRoaXMuc2V0TXV0ZSh0aGlzLl9tdXRlZCl9LGkucHJvdG90eXBlLl90cmlnZ2VyRXZlbnQ9ZnVuY3Rpb24odCl7dGhpcy5fbG9nZ2VyLmxvZyhcIkZsYXNoIGVsZW1lbnQgdHJpZ2dlcmVkIGV2ZW50OiBcIit0KSx0aGlzLnRyaWdnZXIodCx0aGlzKX0saS5wcm90b3R5cGUuX3NldFN0YXRlPWZ1bmN0aW9uKHQpe3RoaXMuX3N0YXRlIT09dCYmKHRoaXMuX3N0YXRlPXQsdGhpcy50cmlnZ2VyKHUuU1RBVEVfQ0hBTkdFLHQsdGhpcykpfSxpLnByb3RvdHlwZS5fb25Qb3NpdGlvbkNoYW5nZT1mdW5jdGlvbih0LGUsbil7dGhpcy50cmlnZ2VyKHUuUE9TSVRJT05fQ0hBTkdFLHQsZSxuLHRoaXMpfSxpLnByb3RvdHlwZS5nZXRUeXBlPWZ1bmN0aW9uKCl7cmV0dXJuIGkuX3JlYWR5KCk/aS5mbGFzaEF1ZGlvLmdldFR5cGUodGhpcy5nZXRJZCgpKTp0aGlzLl90eXBlfSxpLnByb3RvdHlwZS5nZXRDb250YWluZXJFbGVtZW50PWZ1bmN0aW9uKCl7XG5yZXR1cm4gaS5jb250YWluZXJFbGVtZW50fSxpLnByb3RvdHlwZS5wbGF5PWZ1bmN0aW9uKHQpe2lmKGkuX3JlYWR5KCkpe2lmKHRoaXMuZ2V0U3RhdGUoKT09PWMuUEFVU0VEKXJldHVybiB2b2lkIHRoaXMucmVzdW1lKCk7dD12b2lkIDA9PT10PzA6dCxpLmZsYXNoQXVkaW8ucGxheUF1ZGlvKHRoaXMuZ2V0SWQoKSx0KX19LGkucHJvdG90eXBlLnBhdXNlPWZ1bmN0aW9uKCl7aS5fcmVhZHkoKSYmaS5mbGFzaEF1ZGlvLnBhdXNlQXVkaW8odGhpcy5nZXRJZCgpKX0saS5wcm90b3R5cGUuc2Vlaz1mdW5jdGlvbih0KXtpLl9yZWFkeSgpJiZpLmZsYXNoQXVkaW8uc2Vla0F1ZGlvKHRoaXMuZ2V0SWQoKSx0KX0saS5wcm90b3R5cGUucmVzdW1lPWZ1bmN0aW9uKCl7aS5fcmVhZHkoKSYmaS5mbGFzaEF1ZGlvLnJlc3VtZUF1ZGlvKHRoaXMuZ2V0SWQoKSl9LGkucHJvdG90eXBlLnNldFZvbHVtZT1mdW5jdGlvbih0KXt0aGlzLl92b2x1bWU9dCxpLl9yZWFkeSgpJiZpLmZsYXNoQXVkaW8uc2V0Vm9sdW1lKHRoaXMuZ2V0SWQoKSx0KX0saS5wcm90b3R5cGUuZ2V0Vm9sdW1lPWZ1bmN0aW9uKCl7cmV0dXJuIGkuX3JlYWR5KCk/aS5mbGFzaEF1ZGlvLmdldFZvbHVtZSh0aGlzLmdldElkKCkpOnRoaXMuX3ZvbHVtZX0saS5wcm90b3R5cGUuc2V0TXV0ZT1mdW5jdGlvbih0KXt0aGlzLl9tdXRlZD10LGkuX3JlYWR5KCkmJmkuZmxhc2hBdWRpby5zZXRNdXRlKHRoaXMuZ2V0SWQoKSx0KX0saS5wcm90b3R5cGUuZ2V0TXV0ZT1mdW5jdGlvbigpe3JldHVybiBpLl9yZWFkeSgpP2kuZmxhc2hBdWRpby5nZXRNdXRlKHRoaXMuZ2V0SWQoKSk6dGhpcy5fbXV0ZWR9LGkucHJvdG90eXBlLmdldFN0YXRlPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3N0YXRlfSxpLnByb3RvdHlwZS5nZXRDdXJyZW50UG9zaXRpb249ZnVuY3Rpb24oKXtyZXR1cm4gaS5fcmVhZHkoKT9pLmZsYXNoQXVkaW8uZ2V0Q3VycmVudFBvc2l0aW9uKHRoaXMuZ2V0SWQoKSk6MH0saS5wcm90b3R5cGUuZ2V0TG9hZGVkUG9zaXRpb249ZnVuY3Rpb24oKXtyZXR1cm4gaS5fcmVhZHkoKT9pLmZsYXNoQXVkaW8uZ2V0TG9hZGVkUG9zaXRpb24odGhpcy5nZXRJZCgpKTowfSxpLnByb3RvdHlwZS5nZXREdXJhdGlvbj1mdW5jdGlvbigpe3JldHVybiBpLl9yZWFkeSgpP2kuZmxhc2hBdWRpby5nZXREdXJhdGlvbih0aGlzLmdldElkKCkpOjB9LGkucHJvdG90eXBlLmtpbGw9ZnVuY3Rpb24oKXtyZXR1cm4gaS5fcmVhZHkoKT92b2lkIGkuZmxhc2hBdWRpby5raWxsQXVkaW8odGhpcy5nZXRJZCgpKTowfSxpLnByb3RvdHlwZS5nZXRFcnJvck1lc3NhZ2U9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZXJyb3JNZXNzYWdlP3RoaXMuX2Vycm9yTWVzc2FnZTppLmZsYXNoQXVkaW8uZ2V0RXJyb3JNZXNzYWdlKHRoaXMuZ2V0SWQoKSl9LGkucHJvdG90eXBlLmdldEVycm9ySUQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZXJyb3JJRD90aGlzLl9lcnJvcklEOmkuZmxhc2hBdWRpby5nZXRFcnJvcklEKHRoaXMuZ2V0SWQoKSl9LGkucHJvdG90eXBlLmdldExldmVsTnVtPWZ1bmN0aW9uKCl7cmV0dXJuIGkuX3JlYWR5KCk/aS5mbGFzaEF1ZGlvLmdldExldmVsTnVtKHRoaXMuZ2V0SWQoKSk6MH0saS5wcm90b3R5cGUuZ2V0TGV2ZWw9ZnVuY3Rpb24oKXtyZXR1cm4gaS5fcmVhZHkoKT9pLmZsYXNoQXVkaW8uZ2V0TGV2ZWwodGhpcy5nZXRJZCgpKTowfSxpLnByb3RvdHlwZS5zZXRMZXZlbD1mdW5jdGlvbih0KXtyZXR1cm4gaS5fcmVhZHkoKT9pLmZsYXNoQXVkaW8uc2V0TGV2ZWwodGhpcy5nZXRJZCgpLHQpOjB9fSxmdW5jdGlvbih0LGUsbil7ZnVuY3Rpb24gaSh0KXtyZXR1cm4gZnVuY3Rpb24oZSl7cmV0dXJuIG51bGw9PWU/dm9pZCAwOmVbdF19fWZ1bmN0aW9uIHIodCl7cmV0dXJuIG51bGwhPXQmJnMoXyh0KSl9ZnVuY3Rpb24gbyh0LGUpe3ZhciBuPXR5cGVvZiB0O2lmKFwic3RyaW5nXCI9PW4mJnAudGVzdCh0KXx8XCJudW1iZXJcIj09bilyZXR1cm4hMDtpZihsKHQpKXJldHVybiExO3ZhciBpPSFkLnRlc3QodCk7cmV0dXJuIGl8fG51bGwhPWUmJnQgaW4gYShlKX1mdW5jdGlvbiBzKHQpe3JldHVyblwibnVtYmVyXCI9PXR5cGVvZiB0JiZ0Pi0xJiZ0JTE9PTAmJmc+PXR9ZnVuY3Rpb24gYSh0KXtyZXR1cm4gdSh0KT90Ok9iamVjdCh0KX1mdW5jdGlvbiB1KHQpe3ZhciBlPXR5cGVvZiB0O3JldHVybiEhdCYmKFwib2JqZWN0XCI9PWV8fFwiZnVuY3Rpb25cIj09ZSl9dmFyIGg9bigxOSksYz1uKDI0KSxsPW4oMjMpLGY9bigyOCksZD0vXFwufFxcWyg/OlteW1xcXV0qfChbXCInXSkoPzooPyFcXDEpW15cXG5cXFxcXXxcXFxcLikqP1xcMSlcXF0vLHA9L15cXHcqJC8sZz05MDA3MTk5MjU0NzQwOTkxLF89aShcImxlbmd0aFwiKSxtPWYoZnVuY3Rpb24odCxlLG4pe3ZhciBpPS0xLHM9XCJmdW5jdGlvblwiPT10eXBlb2YgZSxhPW8oZSksdT1yKHQpP0FycmF5KHQubGVuZ3RoKTpbXTtyZXR1cm4gaCh0LGZ1bmN0aW9uKHQpe3ZhciByPXM/ZTphJiZudWxsIT10P3RbZV06dm9pZCAwO3VbKytpXT1yP3IuYXBwbHkodCxuKTpjKHQsZSxuKX0pLHV9KTt0LmV4cG9ydHM9bX0sWzEzNCwyMF0sWzEzMiwyMSwyMiwyM10sNSw2LDcsZnVuY3Rpb24odCxlLG4pe2Z1bmN0aW9uIGkodCxlLG4pe251bGw9PXR8fHIoZSx0KXx8KGU9YyhlKSx0PTE9PWUubGVuZ3RoP3Q6dSh0LGgoZSwwLC0xKSksZT1zKGUpKTt2YXIgaT1udWxsPT10P3Q6dFtlXTtyZXR1cm4gbnVsbD09aT92b2lkIDA6aS5hcHBseSh0LG4pfWZ1bmN0aW9uIHIodCxlKXt2YXIgbj10eXBlb2YgdDtpZihcInN0cmluZ1wiPT1uJiZkLnRlc3QodCl8fFwibnVtYmVyXCI9PW4pcmV0dXJuITA7aWYobCh0KSlyZXR1cm4hMTt2YXIgaT0hZi50ZXN0KHQpO3JldHVybiBpfHxudWxsIT1lJiZ0IGluIG8oZSl9ZnVuY3Rpb24gbyh0KXtyZXR1cm4gYSh0KT90Ok9iamVjdCh0KX1mdW5jdGlvbiBzKHQpe3ZhciBlPXQ/dC5sZW5ndGg6MDtyZXR1cm4gZT90W2UtMV06dm9pZCAwfWZ1bmN0aW9uIGEodCl7dmFyIGU9dHlwZW9mIHQ7cmV0dXJuISF0JiYoXCJvYmplY3RcIj09ZXx8XCJmdW5jdGlvblwiPT1lKX12YXIgdT1uKDI1KSxoPW4oMjYpLGM9bigyNyksbD1uKDIzKSxmPS9cXC58XFxbKD86W15bXFxdXSp8KFtcIiddKSg/Oig/IVxcMSlbXlxcblxcXFxdfFxcXFwuKSo/XFwxKVxcXS8sZD0vXlxcdyokLzt0LmV4cG9ydHM9aX0sZnVuY3Rpb24odCxlKXtmdW5jdGlvbiBuKHQsZSxuKXtpZihudWxsIT10KXt2b2lkIDAhPT1uJiZuIGluIGkodCkmJihlPVtuXSk7Zm9yKHZhciByPTAsbz1lLmxlbmd0aDtudWxsIT10JiZvPnI7KXQ9dFtlW3IrK11dO3JldHVybiByJiZyPT1vP3Q6dm9pZCAwfX1mdW5jdGlvbiBpKHQpe3JldHVybiByKHQpP3Q6T2JqZWN0KHQpfWZ1bmN0aW9uIHIodCl7dmFyIGU9dHlwZW9mIHQ7cmV0dXJuISF0JiYoXCJvYmplY3RcIj09ZXx8XCJmdW5jdGlvblwiPT1lKX10LmV4cG9ydHM9bn0sZnVuY3Rpb24odCxlKXtmdW5jdGlvbiBuKHQsZSxuKXt2YXIgaT0tMSxyPXQubGVuZ3RoO2U9bnVsbD09ZT8wOitlfHwwLDA+ZSYmKGU9LWU+cj8wOnIrZSksbj12b2lkIDA9PT1ufHxuPnI/cjorbnx8MCwwPm4mJihuKz1yKSxyPWU+bj8wOm4tZT4+PjAsZT4+Pj0wO2Zvcih2YXIgbz1BcnJheShyKTsrK2k8cjspb1tpXT10W2krZV07cmV0dXJuIG99dC5leHBvcnRzPW59LGZ1bmN0aW9uKHQsZSxuKXtmdW5jdGlvbiBpKHQpe3JldHVybiBudWxsPT10P1wiXCI6dCtcIlwifWZ1bmN0aW9uIHIodCl7aWYobyh0KSlyZXR1cm4gdDt2YXIgZT1bXTtyZXR1cm4gaSh0KS5yZXBsYWNlKHMsZnVuY3Rpb24odCxuLGkscil7ZS5wdXNoKGk/ci5yZXBsYWNlKGEsXCIkMVwiKTpufHx0KX0pLGV9dmFyIG89bigyMykscz0vW14uW1xcXV0rfFxcWyg/OigtP1xcZCsoPzpcXC5cXGQrKT8pfChbXCInXSkoKD86KD8hXFwyKVteXFxuXFxcXF18XFxcXC4pKj8pXFwyKVxcXS9nLGE9L1xcXFwoXFxcXCk/L2c7dC5leHBvcnRzPXJ9LDExLGZ1bmN0aW9uKHQsZSxuKXtmdW5jdGlvbiBpKHQpe3JldHVybiByKHQsbyh0KSl9dmFyIHI9bigzMCksbz1uKDMxKTt0LmV4cG9ydHM9aX0sZnVuY3Rpb24odCxlKXtmdW5jdGlvbiBuKHQsZSl7Zm9yKHZhciBuPS0xLGk9ZS5sZW5ndGgscj1BcnJheShpKTsrK248aTspcltuXT10W2Vbbl1dO3JldHVybiByfXQuZXhwb3J0cz1ufSxbMTMyLDMyLDMzLDM0XSw1LDYsNyxmdW5jdGlvbih0LGUsbil7ZnVuY3Rpb24gaSh0LGUsbixpKXt0aGlzLl90eXBlPXQsdGhpcy5faWQ9ZS5pZCx0aGlzLl9kZXNjcmlwdG9yPWUsdGhpcy5fc2V0dGluZ3M9bix0aGlzLl9jdXJyZW50UG9zaXRpb249dGhpcy5fbG9hZGVkUG9zaXRpb249dGhpcy5fZHVyYXRpb249MCx0aGlzLl9jYXBhYmlsaXRpZXM9cih7fSxoLmNyZWF0ZURlZmF1bHRzKCksaSksdGhpcy5fbG9nZ2VyPW5ldyB1KHRoaXMuZ2V0VHlwZSgpLHRoaXMuZ2V0SWQoKSxlLnRpdGxlLG4pO3RyeXtoLnZhbGlkYXRlKHRoaXMuZ2V0Q2FwYWJpbGl0aWVzKCkpfWNhdGNoKG8pe3JldHVybiB0aGlzLmdldExvZ2dlcigpLmxvZyhcIkJhZCBjYXBzOiBcIitvKSx2b2lkIHRoaXMudXBkYXRlU3RhdGUocy5FUlJPUil9dGhpcy51cGRhdGVTdGF0ZShzLklOSVRJQUxJWkUpfXZhciByPW4oMSksbz1uKDM2KSxzPW4oMzgpLGE9bigzOSksdT1uKDQwKSxoPW4oNDIpO3QuZXhwb3J0cz1pLHIoaS5wcm90b3R5cGUsbyksaS5wcm90b3R5cGUuY2FuUGxheT1mdW5jdGlvbigpe3JldHVybiExfSxpLnByb3RvdHlwZS5nZXRDYXBhYmlsaXRpZXM9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fY2FwYWJpbGl0aWVzfSxpLnByb3RvdHlwZS5nZXRMb2dnZXI9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbG9nZ2VyfSxpLnByb3RvdHlwZS5nZXRTZXR0aW5ncz1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9zZXR0aW5nc30saS5wcm90b3R5cGUuZ2V0RGVzY3JpcHRvcj1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9kZXNjcmlwdG9yfSxpLnByb3RvdHlwZS5nZXRUeXBlPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3R5cGV9LGkucHJvdG90eXBlLmdldElkPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2lkK1wiXCJ9LGkucHJvdG90eXBlLmJlZm9yZVN0YXRlQ2hhbmdlPWZ1bmN0aW9uKHQsZSl7cmV0dXJuITB9LGkucHJvdG90eXBlLm5vdGlmeVN0YXRlQ2hhbmdlPWZ1bmN0aW9uKHQsZSl7cmV0dXJuITB9LGkucHJvdG90eXBlLmFmdGVyU3RhdGVDaGFuZ2U9ZnVuY3Rpb24odCxlKXt9LGkucHJvdG90eXBlLnVwZGF0ZVN0YXRlPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuX3N0YXRlO2UhPT10JiZlIT09cy5ERUFEJiZ0aGlzLmJlZm9yZVN0YXRlQ2hhbmdlKGUsdCkmJih0aGlzLl9zdGF0ZT10LHRoaXMuX2xvZ2dlci5sb2coJ3N0YXRlIGNoYW5nZWQgXCInK3RoaXMuZ2V0U3RhdGUoKSsnXCIsIHBvc2l0aW9uOiAnK3RoaXMuZ2V0Q3VycmVudFBvc2l0aW9uKCkrXCIsIGR1cmF0aW9uOiBcIit0aGlzLmdldER1cmF0aW9uKCkpLHRoaXMubm90aWZ5U3RhdGVDaGFuZ2UoZSx0KSYmdGhpcy50cmlnZ2VyKGEuU1RBVEVfQ0hBTkdFLHQsdGhpcyksdGhpcy5hZnRlclN0YXRlQ2hhbmdlKGUsdCkpfSxpLnByb3RvdHlwZS5nZXRTdGF0ZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9zdGF0ZX0saS5wcm90b3R5cGUuX2lzSW5PbmVPZlN0YXRlcz1mdW5jdGlvbigpe2Zvcih2YXIgdCBpbiBhcmd1bWVudHMpaWYoYXJndW1lbnRzW3RdPT09dGhpcy5nZXRTdGF0ZSgpKXJldHVybiEwO3JldHVybiExfSxpLnByb3RvdHlwZS5nZXRDdXJyZW50UG9zaXRpb249ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fY3VycmVudFBvc2l0aW9ufSxpLnByb3RvdHlwZS5nZXRMb2FkZWRQb3NpdGlvbj1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9sb2FkZWRQb3NpdGlvbn0saS5wcm90b3R5cGUuZ2V0RHVyYXRpb249ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZHVyYXRpb259fSxmdW5jdGlvbih0LGUsbil7dC5leHBvcnRzPW4oMzcpfSxmdW5jdGlvbih0LGUsbil7IWZ1bmN0aW9uKCl7ZnVuY3Rpb24gbigpe3JldHVybntrZXlzOk9iamVjdC5rZXlzfHxmdW5jdGlvbih0KXtpZihcIm9iamVjdFwiIT10eXBlb2YgdCYmXCJmdW5jdGlvblwiIT10eXBlb2YgdHx8bnVsbD09PXQpdGhyb3cgbmV3IFR5cGVFcnJvcihcImtleXMoKSBjYWxsZWQgb24gYSBub24tb2JqZWN0XCIpO3ZhciBlLG49W107Zm9yKGUgaW4gdCl0Lmhhc093blByb3BlcnR5KGUpJiYobltuLmxlbmd0aF09ZSk7cmV0dXJuIG59LHVuaXF1ZUlkOmZ1bmN0aW9uKHQpe3ZhciBlPSsrYStcIlwiO3JldHVybiB0P3QrZTplfSxoYXM6ZnVuY3Rpb24odCxlKXtyZXR1cm4gby5jYWxsKHQsZSl9LGVhY2g6ZnVuY3Rpb24odCxlLG4pe2lmKG51bGwhPXQpaWYociYmdC5mb3JFYWNoPT09cil0LmZvckVhY2goZSxuKTtlbHNlIGlmKHQubGVuZ3RoPT09K3QubGVuZ3RoKWZvcih2YXIgaT0wLG89dC5sZW5ndGg7bz5pO2krKyllLmNhbGwobix0W2ldLGksdCk7ZWxzZSBmb3IodmFyIHMgaW4gdCl0aGlzLmhhcyh0LHMpJiZlLmNhbGwobix0W3NdLHMsdCl9LG9uY2U6ZnVuY3Rpb24odCl7dmFyIGUsbj0hMTtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gbj9lOihuPSEwLGU9dC5hcHBseSh0aGlzLGFyZ3VtZW50cyksdD1udWxsLGUpfX19fXZhciBpLHI9QXJyYXkucHJvdG90eXBlLmZvckVhY2gsbz1PYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LHM9QXJyYXkucHJvdG90eXBlLnNsaWNlLGE9MCx1PW4oKTtpPXtvbjpmdW5jdGlvbih0LGUsbil7aWYoIWModGhpcyxcIm9uXCIsdCxbZSxuXSl8fCFlKXJldHVybiB0aGlzO3RoaXMuX2V2ZW50c3x8KHRoaXMuX2V2ZW50cz17fSk7dmFyIGk9dGhpcy5fZXZlbnRzW3RdfHwodGhpcy5fZXZlbnRzW3RdPVtdKTtyZXR1cm4gaS5wdXNoKHtjYWxsYmFjazplLGNvbnRleHQ6bixjdHg6bnx8dGhpc30pLHRoaXN9LG9uY2U6ZnVuY3Rpb24odCxlLG4pe2lmKCFjKHRoaXMsXCJvbmNlXCIsdCxbZSxuXSl8fCFlKXJldHVybiB0aGlzO3ZhciBpPXRoaXMscj11Lm9uY2UoZnVuY3Rpb24oKXtpLm9mZih0LHIpLGUuYXBwbHkodGhpcyxhcmd1bWVudHMpfSk7cmV0dXJuIHIuX2NhbGxiYWNrPWUsdGhpcy5vbih0LHIsbil9LG9mZjpmdW5jdGlvbih0LGUsbil7dmFyIGkscixvLHMsYSxoLGwsZjtpZighdGhpcy5fZXZlbnRzfHwhYyh0aGlzLFwib2ZmXCIsdCxbZSxuXSkpcmV0dXJuIHRoaXM7aWYoIXQmJiFlJiYhbilyZXR1cm4gdGhpcy5fZXZlbnRzPXt9LHRoaXM7Zm9yKHM9dD9bdF06dS5rZXlzKHRoaXMuX2V2ZW50cyksYT0wLGg9cy5sZW5ndGg7aD5hO2ErKylpZih0PXNbYV0sbz10aGlzLl9ldmVudHNbdF0pe2lmKHRoaXMuX2V2ZW50c1t0XT1pPVtdLGV8fG4pZm9yKGw9MCxmPW8ubGVuZ3RoO2Y+bDtsKyspcj1vW2xdLChlJiZlIT09ci5jYWxsYmFjayYmZSE9PXIuY2FsbGJhY2suX2NhbGxiYWNrfHxuJiZuIT09ci5jb250ZXh0KSYmaS5wdXNoKHIpO2kubGVuZ3RofHxkZWxldGUgdGhpcy5fZXZlbnRzW3RdfXJldHVybiB0aGlzfSx0cmlnZ2VyOmZ1bmN0aW9uKHQpe2lmKCF0aGlzLl9ldmVudHMpcmV0dXJuIHRoaXM7dmFyIGU9cy5jYWxsKGFyZ3VtZW50cywxKTtpZighYyh0aGlzLFwidHJpZ2dlclwiLHQsZSkpcmV0dXJuIHRoaXM7dmFyIG49dGhpcy5fZXZlbnRzW3RdLGk9dGhpcy5fZXZlbnRzLmFsbDtyZXR1cm4gbiYmbChuLGUpLGkmJmwoaSxhcmd1bWVudHMpLHRoaXN9LHN0b3BMaXN0ZW5pbmc6ZnVuY3Rpb24odCxlLG4pe3ZhciBpPXRoaXMuX2xpc3RlbmVycztpZighaSlyZXR1cm4gdGhpczt2YXIgcj0hZSYmIW47XCJvYmplY3RcIj09dHlwZW9mIGUmJihuPXRoaXMpLHQmJigoaT17fSlbdC5fbGlzdGVuZXJJZF09dCk7Zm9yKHZhciBvIGluIGkpaVtvXS5vZmYoZSxuLHRoaXMpLHImJmRlbGV0ZSB0aGlzLl9saXN0ZW5lcnNbb107cmV0dXJuIHRoaXN9fTt2YXIgaD0vXFxzKy8sYz1mdW5jdGlvbih0LGUsbixpKXtpZighbilyZXR1cm4hMDtpZihcIm9iamVjdFwiPT10eXBlb2Ygbil7Zm9yKHZhciByIGluIG4pdFtlXS5hcHBseSh0LFtyLG5bcl1dLmNvbmNhdChpKSk7cmV0dXJuITF9aWYoaC50ZXN0KG4pKXtmb3IodmFyIG89bi5zcGxpdChoKSxzPTAsYT1vLmxlbmd0aDthPnM7cysrKXRbZV0uYXBwbHkodCxbb1tzXV0uY29uY2F0KGkpKTtyZXR1cm4hMX1yZXR1cm4hMH0sbD1mdW5jdGlvbih0LGUpe3ZhciBuLGk9LTEscj10Lmxlbmd0aCxvPWVbMF0scz1lWzFdLGE9ZVsyXTtzd2l0Y2goZS5sZW5ndGgpe2Nhc2UgMDpmb3IoOysraTxyOykobj10W2ldKS5jYWxsYmFjay5jYWxsKG4uY3R4KTtyZXR1cm47Y2FzZSAxOmZvcig7KytpPHI7KShuPXRbaV0pLmNhbGxiYWNrLmNhbGwobi5jdHgsbyk7cmV0dXJuO2Nhc2UgMjpmb3IoOysraTxyOykobj10W2ldKS5jYWxsYmFjay5jYWxsKG4uY3R4LG8scyk7cmV0dXJuO2Nhc2UgMzpmb3IoOysraTxyOykobj10W2ldKS5jYWxsYmFjay5jYWxsKG4uY3R4LG8scyxhKTtyZXR1cm47ZGVmYXVsdDpmb3IoOysraTxyOykobj10W2ldKS5jYWxsYmFjay5hcHBseShuLmN0eCxlKX19LGY9e2xpc3RlblRvOlwib25cIixsaXN0ZW5Ub09uY2U6XCJvbmNlXCJ9O3UuZWFjaChmLGZ1bmN0aW9uKHQsZSl7aVtlXT1mdW5jdGlvbihlLG4saSl7dmFyIHI9dGhpcy5fbGlzdGVuZXJzfHwodGhpcy5fbGlzdGVuZXJzPXt9KSxvPWUuX2xpc3RlbmVySWR8fChlLl9saXN0ZW5lcklkPXUudW5pcXVlSWQoXCJsXCIpKTtyZXR1cm4gcltvXT1lLFwib2JqZWN0XCI9PXR5cGVvZiBuJiYoaT10aGlzKSxlW3RdKG4saSx0aGlzKSx0aGlzfX0pLGkuYmluZD1pLm9uLGkudW5iaW5kPWkub2ZmLGkubWl4aW49ZnVuY3Rpb24odCl7dmFyIGU9W1wib25cIixcIm9uY2VcIixcIm9mZlwiLFwidHJpZ2dlclwiLFwic3RvcExpc3RlbmluZ1wiLFwibGlzdGVuVG9cIixcImxpc3RlblRvT25jZVwiLFwiYmluZFwiLFwidW5iaW5kXCJdO3JldHVybiB1LmVhY2goZSxmdW5jdGlvbihlKXt0W2VdPXRoaXNbZV19LHRoaXMpLHR9LFwidW5kZWZpbmVkXCIhPXR5cGVvZiB0JiZ0LmV4cG9ydHMmJihlPXQuZXhwb3J0cz1pKSxlLkJhY2tib25lRXZlbnRzPWl9KHRoaXMpfSxmdW5jdGlvbih0LGUpe3QuZXhwb3J0cz17UExBWUlORzpcInBsYXlpbmdcIixMT0FESU5HOlwibG9hZGluZ1wiLFNFRUtJTkc6XCJzZWVraW5nXCIsUEFVU0VEOlwicGF1c2VkXCIsRVJST1I6XCJlcnJvclwiLElETEU6XCJpZGxlXCIsSU5JVElBTElaRTpcImluaXRpYWxpemVcIixFTkRFRDpcImVuZGVkXCIsREVBRDpcImRlYWRcIn19LGZ1bmN0aW9uKHQsZSl7dC5leHBvcnRzPXtQT1NJVElPTl9DSEFOR0U6XCJwb3NpdGlvbi1jaGFuZ2VcIixTVEFURV9DSEFOR0U6XCJzdGF0ZS1jaGFuZ2VcIixEQVRBOlwiZGF0YVwiLE5FVFdPUktfVElNRU9VVDpcIm5ldHdvcmstdGltZW91dFwiLE1FVEFEQVRBOlwibWV0YWRhdGFcIn19LGZ1bmN0aW9uKHQsZSxuKXt2YXIgaSxyPW4oNDEpLG89bnVsbDt0LmV4cG9ydHM9ZnVuY3Rpb24odCxlLG4scyl7aWYoIWkmJihpPXIoISFzLmRlYnVnLFwiYXVkaW9tYW5hZ2VyXCIpLG8pKXt2YXIgYT1pO2k9ZnVuY3Rpb24oKXthKG8oYXJndW1lbnRzWzBdK1wiJXNcIixBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsMSkpKX19cmV0dXJuIG49biYmbi5sZW5ndGg/XCIgW1wiK24ucmVwbGFjZSgvXFxzL2csXCJcIikuc3Vic3RyKDAsNikrXCJdXCI6XCJcIix7bG9nOmkuYmluZChudWxsLFwiJXMgKCVzKSVzXCIsdCxlLG4pfX19LGZ1bmN0aW9uKHQsZSl7ZnVuY3Rpb24gbigpe2Z1bmN0aW9uIHQodCxuKXtmb3IodmFyIGkscj1hcmd1bWVudHMubGVuZ3RoLG89QXJyYXkocj4yP3ItMjowKSxzPTI7cj5zO3MrKylvW3MtMl09YXJndW1lbnRzW3NdO1wic3RyaW5nXCI9PXR5cGVvZiBuP249XCIgXCIrbjooby51bnNoaWZ0KG4pLG49XCJcIiksKGk9d2luZG93LmNvbnNvbGUpW3RdLmFwcGx5KGksW2UoKStcIiB8XCIrYytcIiVjXCIrbl0uY29uY2F0KGwsbykpfWZ1bmN0aW9uIGUoKXt2YXIgdD1uZXcgRGF0ZSxlPW51bGw9PT1oPzA6dC1oO3JldHVybiBoPSt0LFwiJWNcIityKHQuZ2V0SG91cnMoKSkrXCI6XCIrcih0LmdldE1pbnV0ZXMoKSkrXCI6XCIrcih0LmdldFNlY29uZHMoKSkrXCIuXCIraSh0LmdldE1pbGxpc2Vjb25kcygpLFwiMFwiLDMpK1wiJWMgKCVjXCIraShcIitcIitlK1wibXNcIixcIiBcIiw4KStcIiVjKVwifXZhciBuPWFyZ3VtZW50cy5sZW5ndGg8PTB8fHZvaWQgMD09PWFyZ3VtZW50c1swXT8hMDphcmd1bWVudHNbMF0sbz1hcmd1bWVudHMubGVuZ3RoPD0xfHx2b2lkIDA9PT1hcmd1bWVudHNbMV0/XCJcIjphcmd1bWVudHNbMV07aWYoIW4pcmV0dXJuIHM7dmFyIGg9bnVsbCxjPWEobyksbD1bXCJjb2xvcjogZ3JlZW5cIixcImNvbG9yOiBncmV5XCIsXCJjb2xvcjogYmx1ZVwiLFwiY29sb3I6IGdyZXlcIix1KG8pLFwiXCJdLGY9dC5iaW5kKG51bGwsXCJsb2dcIik7cmV0dXJuIGYubG9nPWYsW1wiaW5mb1wiLFwid2FyblwiLFwiZXJyb3JcIl0uZm9yRWFjaChmdW5jdGlvbihlKXtmW2VdPXQuYmluZChudWxsLGUpfSksZn1mdW5jdGlvbiBpKHQsZSxuKXtyZXR1cm4gbyhlLG4tKFwiXCIrdCkubGVuZ3RoKSt0fWZ1bmN0aW9uIHIodCl7cmV0dXJuIGkodCxcIjBcIiwyKX1mdW5jdGlvbiBvKHQsZSl7cmV0dXJuIGU+MD9uZXcgQXJyYXkoZSsxKS5qb2luKHQpOlwiXCJ9ZnVuY3Rpb24gcygpe31mdW5jdGlvbiBhKHQpe3JldHVybiB0P1wiJWNcIit0OlwiJWNcIn10LmV4cG9ydHM9bixzLmxvZz1zLmluZm89cy53YXJuPXMuZXJyb3I9czt2YXIgdT1mdW5jdGlvbigpe3ZhciB0PVtcIiM1MTYxM0NcIixcIiM0NDc4NDhcIixcIiM0ODZFNUZcIixcIiM3ODc0NDRcIixcIiM2RTY2NEVcIl0sZT0wO3JldHVybiBmdW5jdGlvbihuKXtyZXR1cm4gbj9cImJhY2tncm91bmQtY29sb3I6XCIrdFtlKysldC5sZW5ndGhdK1wiO2NvbG9yOiNmZmY7Ym9yZGVyLXJhZGl1czozcHg7cGFkZGluZzoycHggNHB4O2ZvbnQtZmFtaWx5OnNhbnMtc2VyaWY7dGV4dC10cmFuc2Zvcm06dXBwZXJjYXNlO2ZvbnQtc2l6ZTo5cHg7bWFyZ2luOjAgNHB4XCI6XCJcIn19KCl9LGZ1bmN0aW9uKHQsZSl7ZnVuY3Rpb24gbih0KXtmb3IodmFyIGUgaW4gcilpZihyLmhhc093blByb3BlcnR5KGUpJiZ2b2lkIDA9PT10W3JbZV1dKXRocm93IG5ldyBFcnJvcihcIkNhcHMgbGFjayByZXF1aXJlZCBmaWVsZDogXCIrZSk7aWYoISh0W3IuUFJPVE9DT0xTXWluc3RhbmNlb2YgQXJyYXkpKXRocm93IG5ldyBFcnJvcihcIkNhcHMgcHJvdG9jb2xzIG11c3QgYmUgYW4gYXJyYXlcIik7aWYoISh0W3IuTUlNRVRZUEVTXWluc3RhbmNlb2YgQXJyYXkpKXRocm93IG5ldyBFcnJvcihcIkNhcHMgbWltZXR5cGVzIG11c3QgYmUgYW4gYXJyYXlcIik7cmV0dXJuITB9ZnVuY3Rpb24gaSgpe3ZhciB0PXt9O3JldHVybiB0W3IuTUlNRVRZUEVTXT1bXSx0W3IuUFJPVE9DT0xTXT1bXSx0W3IuQVVESU9fT05MWV09ITAsdFtyLkNBTl9TRUVLX0FMV0FZU109ITAsdFtyLk5FRURTX1VSTF9SRUZSRVNIXT0hMCx0fXZhciByPXtNSU1FVFlQRVM6XCJtaW1ldHlwZXNcIixQUk9UT0NPTFM6XCJwcm90b2NvbHNcIixBVURJT19PTkxZOlwiYXVkaW9Pbmx5XCIsQ0FOX1NFRUtfQUxXQVlTOlwiY2FuU2Vla0Fsd2F5c1wiLE5FRURTX1VSTF9SRUZSRVNIOlwibmVlZHNVcmxSZWZyZXNoXCJ9LG89e2NyZWF0ZURlZmF1bHRzOmksbmFtZXM6cix2YWxpZGF0ZTpufTt0LmV4cG9ydHM9b30sZnVuY3Rpb24odCxlKXt0LmV4cG9ydHM9e0ZMQVNIX0hMU19QTEFZTElTVF9OT1RfRk9VTkQ6XCJITFNfUExBWUxJU1RfTk9UX0ZPVU5EXCIsRkxBU0hfSExTX1BMQVlMSVNUX1NFQ1VSSVRZX0VSUk9SOlwiSExTX1NFQ1VSSVRZX0VSUk9SXCIsRkxBU0hfSExTX05PVF9WQUxJRF9QTEFZTElTVDpcIkhMU19OT1RfVkFMSURfUExBWUxJU1RcIixGTEFTSF9ITFNfTk9fVFNfSU5fUExBWUxJU1Q6XCJITFNfTk9fVFNfSU5fUExBWUxJU1RcIixGTEFTSF9ITFNfTk9fUExBWUxJU1RfSU5fTUFOSUZFU1Q6XCJITFNfTk9fUExBWUxJU1RfSU5fTUFOSUZFU1RcIixGTEFTSF9ITFNfVFNfSVNfQ09SUlVQVDpcIkhMU19UU19JU19DT1JSVVBUXCIsRkxBU0hfSExTX0ZMVl9UQUdfQ09SUlVQVDpcIkhMU19GTFZfVEFHX0NPUlJVUFRcIixGTEFTSF9IVFRQX0ZJTEVfTk9UX0ZPVU5EOlwiSFRUUF9GSUxFX05PVF9GT1VORFwiLEZMQVNIX1JUTVBfQ09OTkVDVF9GQUlMRUQ6XCJSVE1QX0NPTk5FQ1RfRkFJTEVEXCIsRkxBU0hfUlRNUF9DT05ORUNUX0NMT1NFRDpcIlJUTVBfQ09OTkVDVF9DTE9TRURcIixGTEFTSF9SVE1QX0NBTk5PVF9QTEFZX1NUUkVBTTpcIlJUTVBfQ0FOTk9UX1BMQVlfU1RSRUFNXCIsRkxBU0hfUFJPWFlfQ0FOVF9MT0FEX0ZMQVNIOlwiQ0FOVF9MT0FEX0ZMQVNIXCIsRkxBU0hfUFJPWFlfRkxBU0hfQkxPQ0tFRDpcIkZMQVNIX1BST1hZX0ZMQVNIX0JMT0NLRURcIixHRU5FUklDX0FVRElPX0VOREVEX0VBUkxZOlwiR0VORVJJQ19BVURJT19FTkRFRF9FQVJMWVwiLEdFTkVSSUNfQVVESU9fT1ZFUlJVTjpcIkdFTkVSSUNfQVVESU9fT1ZFUlJVTlwiLEhUTUw1X0FVRElPX0FCT1JURUQ6XCJIVE1MNV9BVURJT19BQk9SVEVEXCIsSFRNTDVfQVVESU9fTkVUV09SSzpcIkhUTUw1X0FVRElPX05FVFdPUktcIixIVE1MNV9BVURJT19ERUNPREU6XCJIVE1MNV9BVURJT19ERUNPREVcIixIVE1MNV9BVURJT19TUkNfTk9UX1NVUFBPUlRFRDpcIkhUTUw1X0FVRElPX1NSQ19OT1RfU1VQUE9SVEVEXCIsTVNFX0JBRF9PQkpFQ1RfU1RBVEU6XCJNU0VfQkFEX09CSkVDVF9TVEFURVwiLE1TRV9OT1RfU1VQUE9SVEVEOlwiTVNFX05PVF9TVVBQT1JURURcIixNU0VfTVAzX05PVF9TVVBQT1JURUQ6XCJNU0VfTVAzX05PVF9TVVBQT1JURURcIixNU0VfSExTX05PVF9WQUxJRF9QTEFZTElTVDpcIk1TRV9ITFNfTk9UX1ZBTElEX1BMQVlMSVNUXCIsTVNFX0hMU19QTEFZTElTVF9OT1RfRk9VTkQ6XCJNU0VfSExTX1BMQVlMSVNUX05PVF9GT1VORFwiLE1TRV9ITFNfU0VHTUVOVF9OT1RfRk9VTkQ6XCJNU0VfSExTX1NFR01FTlRfTk9UX0ZPVU5EXCJ9fSxmdW5jdGlvbih0LGUpe2Z1bmN0aW9uIG4oKXtpZighcSYmZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJib2R5XCIpWzBdKXt0cnl7dmFyIHQsZT12KFwic3BhblwiKTtlLnN0eWxlLmRpc3BsYXk9XCJub25lXCIsdD1qLmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiYm9keVwiKVswXS5hcHBlbmRDaGlsZChlKSx0LnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQodCksdD1udWxsLGU9bnVsbH1jYXRjaChuKXtyZXR1cm59cT0hMDtmb3IodmFyIGk9Vi5sZW5ndGgscj0wO2k+cjtyKyspVltyXSgpfX1mdW5jdGlvbiBpKHQpe3E/dCgpOlZbVi5sZW5ndGhdPXR9ZnVuY3Rpb24gcih0KXtpZih0eXBlb2YgSC5hZGRFdmVudExpc3RlbmVyIT1rKUguYWRkRXZlbnRMaXN0ZW5lcihcImxvYWRcIix0LCExKTtlbHNlIGlmKHR5cGVvZiBqLmFkZEV2ZW50TGlzdGVuZXIhPWspai5hZGRFdmVudExpc3RlbmVyKFwibG9hZFwiLHQsITEpO2Vsc2UgaWYodHlwZW9mIEguYXR0YWNoRXZlbnQhPWspUyhILFwib25sb2FkXCIsdCk7ZWxzZSBpZihcImZ1bmN0aW9uXCI9PXR5cGVvZiBILm9ubG9hZCl7dmFyIGU9SC5vbmxvYWQ7SC5vbmxvYWQ9ZnVuY3Rpb24oKXtlKCksdCgpfX1lbHNlIEgub25sb2FkPXR9ZnVuY3Rpb24gbygpe3ZhciB0PWouZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJib2R5XCIpWzBdLGU9dihOKTtlLnNldEF0dHJpYnV0ZShcInN0eWxlXCIsXCJ2aXNpYmlsaXR5OiBoaWRkZW47XCIpLGUuc2V0QXR0cmlidXRlKFwidHlwZVwiLEYpO3ZhciBuPXQuYXBwZW5kQ2hpbGQoZSk7aWYobil7dmFyIGk9MDshZnVuY3Rpb24gcigpe2lmKHR5cGVvZiBuLkdldFZhcmlhYmxlIT1rKXRyeXt2YXIgbz1uLkdldFZhcmlhYmxlKFwiJHZlcnNpb25cIik7byYmKG89by5zcGxpdChcIiBcIilbMV0uc3BsaXQoXCIsXCIpLFEucHY9W0Uob1swXSksRShvWzFdKSxFKG9bMl0pXSl9Y2F0Y2goYSl7US5wdj1bOCwwLDBdfWVsc2UgaWYoMTA+aSlyZXR1cm4gaSsrLHZvaWQgd2luZG93LnNldFRpbWVvdXQociwxMCk7dC5yZW1vdmVDaGlsZChlKSxuPW51bGwscygpfSgpfWVsc2UgcygpfWZ1bmN0aW9uIHMoKXt2YXIgdD16Lmxlbmd0aDtpZih0PjApZm9yKHZhciBlPTA7dD5lO2UrKyl7dmFyIG49eltlXS5pZCxpPXpbZV0uY2FsbGJhY2tGbixyPXtzdWNjZXNzOiExLGlkOm59O2lmKFEucHZbMF0+MCl7dmFyIG89eShuKTtpZihvKWlmKCFBKHpbZV0uc3dmVmVyc2lvbil8fFEud2smJlEud2s8MzEyKWlmKHpbZV0uZXhwcmVzc0luc3RhbGwmJnUoKSl7dmFyIHM9e307cy5kYXRhPXpbZV0uZXhwcmVzc0luc3RhbGwscy53aWR0aD1vLmdldEF0dHJpYnV0ZShcIndpZHRoXCIpfHxcIjBcIixzLmhlaWdodD1vLmdldEF0dHJpYnV0ZShcImhlaWdodFwiKXx8XCIwXCIsby5nZXRBdHRyaWJ1dGUoXCJjbGFzc1wiKSYmKHMuc3R5bGVjbGFzcz1vLmdldEF0dHJpYnV0ZShcImNsYXNzXCIpKSxvLmdldEF0dHJpYnV0ZShcImFsaWduXCIpJiYocy5hbGlnbj1vLmdldEF0dHJpYnV0ZShcImFsaWduXCIpKTtmb3IodmFyIGw9e30sZj1vLmdldEVsZW1lbnRzQnlUYWdOYW1lKFwicGFyYW1cIiksZD1mLmxlbmd0aCxwPTA7ZD5wO3ArKylcIm1vdmllXCIhPT1mW3BdLmdldEF0dHJpYnV0ZShcIm5hbWVcIikudG9Mb3dlckNhc2UoKSYmKGxbZltwXS5nZXRBdHRyaWJ1dGUoXCJuYW1lXCIpXT1mW3BdLmdldEF0dHJpYnV0ZShcInZhbHVlXCIpKTtoKHMsbCxuLGkpfWVsc2UgYyhvKSxpJiZpKHIpO2Vsc2UgVChuLCEwKSxpJiYoci5zdWNjZXNzPSEwLHIucmVmPWEobiksci5pZD1uLGkocikpfWVsc2UgaWYoVChuLCEwKSxpKXt2YXIgZz1hKG4pO2cmJnR5cGVvZiBnLlNldFZhcmlhYmxlIT1rJiYoci5zdWNjZXNzPSEwLHIucmVmPWcsci5pZD1nLmlkKSxpKHIpfX19ZnVuY3Rpb24gYSh0KXt2YXIgZT1udWxsLG49eSh0KTtyZXR1cm4gbiYmXCJPQkpFQ1RcIj09PW4ubm9kZU5hbWUudG9VcHBlckNhc2UoKSYmKGU9dHlwZW9mIG4uU2V0VmFyaWFibGUhPT1rP246bi5nZXRFbGVtZW50c0J5VGFnTmFtZShOKVswXXx8biksZX1mdW5jdGlvbiB1KCl7cmV0dXJuIVgmJkEoXCI2LjAuNjVcIikmJihRLndpbnx8US5tYWMpJiYhKFEud2smJlEud2s8MzEyKX1mdW5jdGlvbiBoKHQsZSxuLGkpe3ZhciByPXkobik7aWYobj1tKG4pLFg9ITAsTz1pfHxudWxsLFI9e3N1Y2Nlc3M6ITEsaWQ6bn0scil7XCJPQkpFQ1RcIj09PXIubm9kZU5hbWUudG9VcHBlckNhc2UoKT8oST1sKHIpLEw9bnVsbCk6KEk9cixMPW4pLHQuaWQ9VSwodHlwZW9mIHQud2lkdGg9PWt8fCEvJSQvLnRlc3QodC53aWR0aCkmJkUodC53aWR0aCk8MzEwKSYmKHQud2lkdGg9XCIzMTBcIiksKHR5cGVvZiB0LmhlaWdodD09a3x8IS8lJC8udGVzdCh0LmhlaWdodCkmJkUodC5oZWlnaHQpPDEzNykmJih0LmhlaWdodD1cIjEzN1wiKTt2YXIgbz1RLmllP1wiQWN0aXZlWFwiOlwiUGx1Z0luXCIscz1cIk1NcmVkaXJlY3RVUkw9XCIrZW5jb2RlVVJJQ29tcG9uZW50KEgubG9jYXRpb24udG9TdHJpbmcoKS5yZXBsYWNlKC8mL2csXCIlMjZcIikpK1wiJk1NcGxheWVyVHlwZT1cIitvK1wiJk1NZG9jdGl0bGU9XCIrZW5jb2RlVVJJQ29tcG9uZW50KGoudGl0bGUuc2xpY2UoMCw0NykrXCIgLSBGbGFzaCBQbGF5ZXIgSW5zdGFsbGF0aW9uXCIpO2lmKHR5cGVvZiBlLmZsYXNodmFycyE9az9lLmZsYXNodmFycys9XCImXCIrczplLmZsYXNodmFycz1zLFEuaWUmJjQhPT1yLnJlYWR5U3RhdGUpe3ZhciBhPXYoXCJkaXZcIik7bis9XCJTV0ZPYmplY3ROZXdcIixhLnNldEF0dHJpYnV0ZShcImlkXCIsbiksci5wYXJlbnROb2RlLmluc2VydEJlZm9yZShhLHIpLHIuc3R5bGUuZGlzcGxheT1cIm5vbmVcIixnKHIpfWQodCxlLG4pfX1mdW5jdGlvbiBjKHQpe2lmKFEuaWUmJjQhPT10LnJlYWR5U3RhdGUpe3Quc3R5bGUuZGlzcGxheT1cIm5vbmVcIjt2YXIgZT12KFwiZGl2XCIpO3QucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoZSx0KSxlLnBhcmVudE5vZGUucmVwbGFjZUNoaWxkKGwodCksZSksZyh0KX1lbHNlIHQucGFyZW50Tm9kZS5yZXBsYWNlQ2hpbGQobCh0KSx0KX1mdW5jdGlvbiBsKHQpe3ZhciBlPXYoXCJkaXZcIik7aWYoUS53aW4mJlEuaWUpZS5pbm5lckhUTUw9dC5pbm5lckhUTUw7ZWxzZXt2YXIgbj10LmdldEVsZW1lbnRzQnlUYWdOYW1lKE4pWzBdO2lmKG4pe3ZhciBpPW4uY2hpbGROb2RlcztpZihpKWZvcih2YXIgcj1pLmxlbmd0aCxvPTA7cj5vO28rKykxPT09aVtvXS5ub2RlVHlwZSYmXCJQQVJBTVwiPT09aVtvXS5ub2RlTmFtZXx8OD09PWlbb10ubm9kZVR5cGV8fGUuYXBwZW5kQ2hpbGQoaVtvXS5jbG9uZU5vZGUoITApKX19cmV0dXJuIGV9ZnVuY3Rpb24gZih0LGUpe3ZhciBuPXYoXCJkaXZcIik7cmV0dXJuIG4uaW5uZXJIVE1MPVwiPG9iamVjdCBjbGFzc2lkPSdjbHNpZDpEMjdDREI2RS1BRTZELTExY2YtOTZCOC00NDQ1NTM1NDAwMDAnPjxwYXJhbSBuYW1lPSdtb3ZpZScgdmFsdWU9J1wiK3QrXCInPlwiK2UrXCI8L29iamVjdD5cIixuLmZpcnN0Q2hpbGR9ZnVuY3Rpb24gZCh0LGUsbil7dmFyIGkscj15KG4pO2lmKG49bShuKSxRLndrJiZRLndrPDMxMilyZXR1cm4gaTtpZihyKXt2YXIgbyxzLGEsdT12KFEuaWU/XCJkaXZcIjpOKTt0eXBlb2YgdC5pZD09ayYmKHQuaWQ9bik7Zm9yKGEgaW4gZSllLmhhc093blByb3BlcnR5KGEpJiZcIm1vdmllXCIhPT1hLnRvTG93ZXJDYXNlKCkmJnAodSxhLGVbYV0pO1EuaWUmJih1PWYodC5kYXRhLHUuaW5uZXJIVE1MKSk7Zm9yKG8gaW4gdCl0Lmhhc093blByb3BlcnR5KG8pJiYocz1vLnRvTG93ZXJDYXNlKCksXCJzdHlsZWNsYXNzXCI9PT1zP3Uuc2V0QXR0cmlidXRlKFwiY2xhc3NcIix0W29dKTpcImNsYXNzaWRcIiE9PXMmJlwiZGF0YVwiIT09cyYmdS5zZXRBdHRyaWJ1dGUobyx0W29dKSk7US5pZT9XW1cubGVuZ3RoXT10LmlkOih1LnNldEF0dHJpYnV0ZShcInR5cGVcIixGKSx1LnNldEF0dHJpYnV0ZShcImRhdGFcIix0LmRhdGEpKSxyLnBhcmVudE5vZGUucmVwbGFjZUNoaWxkKHUsciksaT11fXJldHVybiBpfWZ1bmN0aW9uIHAodCxlLG4pe3ZhciBpPXYoXCJwYXJhbVwiKTtpLnNldEF0dHJpYnV0ZShcIm5hbWVcIixlKSxpLnNldEF0dHJpYnV0ZShcInZhbHVlXCIsbiksdC5hcHBlbmRDaGlsZChpKX1mdW5jdGlvbiBnKHQpe3ZhciBlPXkodCk7ZSYmXCJPQkpFQ1RcIj09PWUubm9kZU5hbWUudG9VcHBlckNhc2UoKSYmKFEuaWU/KGUuc3R5bGUuZGlzcGxheT1cIm5vbmVcIixmdW5jdGlvbiBuKCl7aWYoND09PWUucmVhZHlTdGF0ZSl7Zm9yKHZhciB0IGluIGUpXCJmdW5jdGlvblwiPT10eXBlb2YgZVt0XSYmKGVbdF09bnVsbCk7ZS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGUpfWVsc2Ugd2luZG93LnNldFRpbWVvdXQobiwxMCl9KCkpOmUucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChlKSl9ZnVuY3Rpb24gXyh0KXtyZXR1cm4gdCYmdC5ub2RlVHlwZSYmMT09PXQubm9kZVR5cGV9ZnVuY3Rpb24gbSh0KXtyZXR1cm4gXyh0KT90LmlkOnR9ZnVuY3Rpb24geSh0KXtpZihfKHQpKXJldHVybiB0O3ZhciBlPW51bGw7dHJ5e2U9ai5nZXRFbGVtZW50QnlJZCh0KX1jYXRjaChuKXt9cmV0dXJuIGV9ZnVuY3Rpb24gdih0KXtyZXR1cm4gai5jcmVhdGVFbGVtZW50KHQpfWZ1bmN0aW9uIEUodCl7cmV0dXJuIHBhcnNlSW50KHQsMTApfWZ1bmN0aW9uIFModCxlLG4pe3QuYXR0YWNoRXZlbnQoZSxuKSxLW0subGVuZ3RoXT1bdCxlLG5dfWZ1bmN0aW9uIEEodCl7dCs9XCJcIjt2YXIgZT1RLnB2LG49dC5zcGxpdChcIi5cIik7cmV0dXJuIG5bMF09RShuWzBdKSxuWzFdPUUoblsxXSl8fDAsblsyXT1FKG5bMl0pfHwwLGVbMF0+blswXXx8ZVswXT09PW5bMF0mJmVbMV0+blsxXXx8ZVswXT09PW5bMF0mJmVbMV09PT1uWzFdJiZlWzJdPj1uWzJdfWZ1bmN0aW9uIHcodCxlLG4saSl7dmFyIHI9ai5nZXRFbGVtZW50c0J5VGFnTmFtZShcImhlYWRcIilbMF07aWYocil7dmFyIG89XCJzdHJpbmdcIj09dHlwZW9mIG4/bjpcInNjcmVlblwiO2lmKGkmJihEPW51bGwsTT1udWxsKSwhRHx8TSE9PW8pe3ZhciBzPXYoXCJzdHlsZVwiKTtzLnNldEF0dHJpYnV0ZShcInR5cGVcIixcInRleHQvY3NzXCIpLHMuc2V0QXR0cmlidXRlKFwibWVkaWFcIixvKSxEPXIuYXBwZW5kQ2hpbGQocyksUS5pZSYmdHlwZW9mIGouc3R5bGVTaGVldHMhPWsmJmouc3R5bGVTaGVldHMubGVuZ3RoPjAmJihEPWouc3R5bGVTaGVldHNbai5zdHlsZVNoZWV0cy5sZW5ndGgtMV0pLE09b31EJiYodHlwZW9mIEQuYWRkUnVsZSE9az9ELmFkZFJ1bGUodCxlKTp0eXBlb2Ygai5jcmVhdGVUZXh0Tm9kZSE9ayYmRC5hcHBlbmRDaGlsZChqLmNyZWF0ZVRleHROb2RlKHQrXCIge1wiK2UrXCJ9XCIpKSl9fWZ1bmN0aW9uIFQodCxlKXtpZigkKXt2YXIgbj1lP1widmlzaWJsZVwiOlwiaGlkZGVuXCIsaT15KHQpO3EmJmk/aS5zdHlsZS52aXNpYmlsaXR5PW46XCJzdHJpbmdcIj09dHlwZW9mIHQmJncoXCIjXCIrdCxcInZpc2liaWxpdHk6XCIrbil9fWZ1bmN0aW9uIGIodCl7dmFyIGU9L1tcXFxcXFxcIjw+XFwuO10vLG49bnVsbCE9ZS5leGVjKHQpO3JldHVybiBuJiZ0eXBlb2YgZW5jb2RlVVJJQ29tcG9uZW50IT1rP2VuY29kZVVSSUNvbXBvbmVudCh0KTp0fS8qISAgICBTV0ZPYmplY3QgdjIuMy4yMDEzMDUyMSA8aHR0cDovL2dpdGh1Yi5jb20vc3dmb2JqZWN0L3N3Zm9iamVjdD5cblx0XHQgICAgaXMgcmVsZWFzZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlIDxodHRwOi8vd3d3Lm9wZW5zb3VyY2Uub3JnL2xpY2Vuc2VzL21pdC1saWNlbnNlLnBocD5cblx0XHQqL1xudmFyIFAsSSxMLE8sUixELE0saz1cInVuZGVmaW5lZFwiLE49XCJvYmplY3RcIix4PVwiU2hvY2t3YXZlIEZsYXNoXCIsQz1cIlNob2Nrd2F2ZUZsYXNoLlNob2Nrd2F2ZUZsYXNoXCIsRj1cImFwcGxpY2F0aW9uL3gtc2hvY2t3YXZlLWZsYXNoXCIsVT1cIlNXRk9iamVjdEV4cHJJbnN0XCIsQj1cIm9ucmVhZHlzdGF0ZWNoYW5nZVwiLEg9d2luZG93LGo9ZG9jdW1lbnQsRz1uYXZpZ2F0b3IsWT0hMSxWPVtdLHo9W10sVz1bXSxLPVtdLHE9ITEsWD0hMSwkPSEwLFo9ITEsUT1mdW5jdGlvbigpe3ZhciB0PXR5cGVvZiBqLmdldEVsZW1lbnRCeUlkIT1rJiZ0eXBlb2Ygai5nZXRFbGVtZW50c0J5VGFnTmFtZSE9ayYmdHlwZW9mIGouY3JlYXRlRWxlbWVudCE9ayxlPUcudXNlckFnZW50LnRvTG93ZXJDYXNlKCksbj1HLnBsYXRmb3JtLnRvTG93ZXJDYXNlKCksaT1uPy93aW4vLnRlc3Qobik6L3dpbi8udGVzdChlKSxyPW4/L21hYy8udGVzdChuKTovbWFjLy50ZXN0KGUpLG89L3dlYmtpdC8udGVzdChlKT9wYXJzZUZsb2F0KGUucmVwbGFjZSgvXi4qd2Via2l0XFwvKFxcZCsoXFwuXFxkKyk/KS4qJC8sXCIkMVwiKSk6ITEscz1cIk1pY3Jvc29mdCBJbnRlcm5ldCBFeHBsb3JlclwiPT09Ry5hcHBOYW1lLGE9WzAsMCwwXSx1PW51bGw7aWYodHlwZW9mIEcucGx1Z2lucyE9ayYmdHlwZW9mIEcucGx1Z2luc1t4XT09Til1PUcucGx1Z2luc1t4XS5kZXNjcmlwdGlvbix1JiZ0eXBlb2YgRy5taW1lVHlwZXMhPWsmJkcubWltZVR5cGVzW0ZdJiZHLm1pbWVUeXBlc1tGXS5lbmFibGVkUGx1Z2luJiYoWT0hMCxzPSExLHU9dS5yZXBsYWNlKC9eLipcXHMrKFxcUytcXHMrXFxTKyQpLyxcIiQxXCIpLGFbMF09RSh1LnJlcGxhY2UoL14oLiopXFwuLiokLyxcIiQxXCIpKSxhWzFdPUUodS5yZXBsYWNlKC9eLipcXC4oLiopXFxzLiokLyxcIiQxXCIpKSxhWzJdPS9bYS16QS1aXS8udGVzdCh1KT9FKHUucmVwbGFjZSgvXi4qW2EtekEtWl0rKC4qKSQvLFwiJDFcIikpOjApO2Vsc2UgaWYodHlwZW9mIEguQWN0aXZlWE9iamVjdCE9ayl0cnl7dmFyIGg9bmV3IEFjdGl2ZVhPYmplY3QoQyk7aCYmKHU9aC5HZXRWYXJpYWJsZShcIiR2ZXJzaW9uXCIpLHUmJihzPSEwLHU9dS5zcGxpdChcIiBcIilbMV0uc3BsaXQoXCIsXCIpLGE9W0UodVswXSksRSh1WzFdKSxFKHVbMl0pXSkpfWNhdGNoKGMpe31yZXR1cm57dzM6dCxwdjphLHdrOm8saWU6cyx3aW46aSxtYWM6cn19KCk7IWZ1bmN0aW9uKCl7US53MyYmKCh0eXBlb2Ygai5yZWFkeVN0YXRlIT1rJiYoXCJjb21wbGV0ZVwiPT09ai5yZWFkeVN0YXRlfHxcImludGVyYWN0aXZlXCI9PT1qLnJlYWR5U3RhdGUpfHx0eXBlb2Ygai5yZWFkeVN0YXRlPT1rJiYoai5nZXRFbGVtZW50c0J5VGFnTmFtZShcImJvZHlcIilbMF18fGouYm9keSkpJiZuKCkscXx8KHR5cGVvZiBqLmFkZEV2ZW50TGlzdGVuZXIhPWsmJmouYWRkRXZlbnRMaXN0ZW5lcihcIkRPTUNvbnRlbnRMb2FkZWRcIixuLCExKSxRLmllJiYoai5hdHRhY2hFdmVudChCLGZ1bmN0aW9uIHQoKXtcImNvbXBsZXRlXCI9PT1qLnJlYWR5U3RhdGUmJihqLmRldGFjaEV2ZW50KEIsdCksbigpKX0pLEg9PT10b3AmJiFmdW5jdGlvbiBlKCl7aWYoIXEpe3RyeXtqLmRvY3VtZW50RWxlbWVudC5kb1Njcm9sbChcImxlZnRcIil9Y2F0Y2godCl7cmV0dXJuIHZvaWQgd2luZG93LnNldFRpbWVvdXQoZSwwKX1uKCl9fSgpKSxRLndrJiYhZnVuY3Rpb24gaSgpe3JldHVybiBxP3ZvaWQgMDovbG9hZGVkfGNvbXBsZXRlLy50ZXN0KGoucmVhZHlTdGF0ZSk/dm9pZCBuKCk6dm9pZCB3aW5kb3cuc2V0VGltZW91dChpLDApfSgpKSl9KCksVlswXT1mdW5jdGlvbigpe1k/bygpOnMoKX0sZnVuY3Rpb24oKXtRLmllJiZ3aW5kb3cuYXR0YWNoRXZlbnQoXCJvbnVubG9hZFwiLGZ1bmN0aW9uKCl7Zm9yKHZhciB0PUsubGVuZ3RoLGU9MDt0PmU7ZSsrKUtbZV1bMF0uZGV0YWNoRXZlbnQoS1tlXVsxXSxLW2VdWzJdKTtmb3IodmFyIG49Vy5sZW5ndGgsaT0wO24+aTtpKyspZyhXW2ldKTtmb3IodmFyIHIgaW4gUSlRW3JdPW51bGw7UT1udWxsO2Zvcih2YXIgbyBpbiBQKVBbb109bnVsbDtQPW51bGx9KX0oKSx0LmV4cG9ydHM9UD17cmVnaXN0ZXJPYmplY3Q6ZnVuY3Rpb24odCxlLG4saSl7aWYoUS53MyYmdCYmZSl7dmFyIHI9e307ci5pZD10LHIuc3dmVmVyc2lvbj1lLHIuZXhwcmVzc0luc3RhbGw9bixyLmNhbGxiYWNrRm49aSx6W3oubGVuZ3RoXT1yLFQodCwhMSl9ZWxzZSBpJiZpKHtzdWNjZXNzOiExLGlkOnR9KX0sZ2V0T2JqZWN0QnlJZDpmdW5jdGlvbih0KXtyZXR1cm4gUS53Mz9hKHQpOnZvaWQgMH0sZW1iZWRTV0Y6ZnVuY3Rpb24odCxlLG4scixvLHMsYSxjLGwsZil7dmFyIHA9bShlKSxnPXtzdWNjZXNzOiExLGlkOnB9O1EudzMmJiEoUS53ayYmUS53azwzMTIpJiZ0JiZlJiZuJiZyJiZvPyhUKHAsITEpLGkoZnVuY3Rpb24oKXtuKz1cIlwiLHIrPVwiXCI7dmFyIGk9e307aWYobCYmdHlwZW9mIGw9PT1OKWZvcih2YXIgXyBpbiBsKWlbX109bFtfXTtpLmRhdGE9dCxpLndpZHRoPW4saS5oZWlnaHQ9cjt2YXIgbT17fTtpZihjJiZ0eXBlb2YgYz09PU4pZm9yKHZhciB5IGluIGMpbVt5XT1jW3ldO2lmKGEmJnR5cGVvZiBhPT09Tilmb3IodmFyIHYgaW4gYSlpZihhLmhhc093blByb3BlcnR5KHYpKXt2YXIgRT1aP2VuY29kZVVSSUNvbXBvbmVudCh2KTp2LFM9Wj9lbmNvZGVVUklDb21wb25lbnQoYVt2XSk6YVt2XTt0eXBlb2YgbS5mbGFzaHZhcnMhPWs/bS5mbGFzaHZhcnMrPVwiJlwiK0UrXCI9XCIrUzptLmZsYXNodmFycz1FK1wiPVwiK1N9aWYoQShvKSl7dmFyIHc9ZChpLG0sZSk7aS5pZD09PXAmJlQocCwhMCksZy5zdWNjZXNzPSEwLGcucmVmPXcsZy5pZD13LmlkfWVsc2V7aWYocyYmdSgpKXJldHVybiBpLmRhdGE9cyx2b2lkIGgoaSxtLGUsZik7VChwLCEwKX1mJiZmKGcpfSkpOmYmJmYoZyl9LHN3aXRjaE9mZkF1dG9IaWRlU2hvdzpmdW5jdGlvbigpeyQ9ITF9LGVuYWJsZVVyaUVuY29kaW5nOmZ1bmN0aW9uKHQpe1o9dHlwZW9mIHQ9PT1rPyEwOnR9LHVhOlEsZ2V0Rmxhc2hQbGF5ZXJWZXJzaW9uOmZ1bmN0aW9uKCl7cmV0dXJue21ham9yOlEucHZbMF0sbWlub3I6US5wdlsxXSxyZWxlYXNlOlEucHZbMl19fSxoYXNGbGFzaFBsYXllclZlcnNpb246QSxjcmVhdGVTV0Y6ZnVuY3Rpb24odCxlLG4pe3JldHVybiBRLnczP2QodCxlLG4pOnZvaWQgMH0sc2hvd0V4cHJlc3NJbnN0YWxsOmZ1bmN0aW9uKHQsZSxuLGkpe1EudzMmJnUoKSYmaCh0LGUsbixpKX0scmVtb3ZlU1dGOmZ1bmN0aW9uKHQpe1EudzMmJmcodCl9LGNyZWF0ZUNTUzpmdW5jdGlvbih0LGUsbixpKXtRLnczJiZ3KHQsZSxuLGkpfSxhZGREb21Mb2FkRXZlbnQ6aSxhZGRMb2FkRXZlbnQ6cixnZXRRdWVyeVBhcmFtVmFsdWU6ZnVuY3Rpb24odCl7dmFyIGU9ai5sb2NhdGlvbi5zZWFyY2h8fGoubG9jYXRpb24uaGFzaDtpZihlKXtpZigvXFw/Ly50ZXN0KGUpJiYoZT1lLnNwbGl0KFwiP1wiKVsxXSksbnVsbD09dClyZXR1cm4gYihlKTtmb3IodmFyIG49ZS5zcGxpdChcIiZcIiksaT0wO2k8bi5sZW5ndGg7aSsrKWlmKG5baV0uc3Vic3RyaW5nKDAsbltpXS5pbmRleE9mKFwiPVwiKSk9PT10KXJldHVybiBiKG5baV0uc3Vic3RyaW5nKG5baV0uaW5kZXhPZihcIj1cIikrMSkpfXJldHVyblwiXCJ9LGV4cHJlc3NJbnN0YWxsQ2FsbGJhY2s6ZnVuY3Rpb24oKXtpZihYKXt2YXIgdD15KFUpO3QmJkkmJih0LnBhcmVudE5vZGUucmVwbGFjZUNoaWxkKEksdCksTCYmKFQoTCwhMCksUS5pZSYmKEkuc3R5bGUuZGlzcGxheT1cImJsb2NrXCIpKSxPJiZPKFIpKSxYPSExfX0sdmVyc2lvbjpcIjIuM1wifX0sZnVuY3Rpb24odCxlLG4pe2Z1bmN0aW9uIGkodCxlLG4saSl7aWYobiE9PXMmJm4hPT1vJiZ2b2lkIDAhPT1uKXRocm93IG5ldyBFcnJvcihcIkNhbiBub3QgdXNlIHRoZSBwcm92aWRlZCBiYXNlIGNsYXNzXCIpO3RoaXMuX2Jhc2VjbGFzcz1ufHxvLHRoaXMuX2Jhc2VjbGFzcy5jYWxsKHRoaXMsdCxlLGl8fFwiSExTQXVkaW9QbGF5ZXJcIiksdGhpcy5fc2Vla1Bvc2l0aW9uPTB9dmFyIHI9bigxKSxvPW4oNDYpLHM9big0OCksYT1uKDM4KTt0LmV4cG9ydHM9aSxyKGkucHJvdG90eXBlLG8ucHJvdG90eXBlKSxpLnByb3RvdHlwZS5zZWVrPWZ1bmN0aW9uKHQpe3RoaXMuX2Jhc2VjbGFzcy5wcm90b3R5cGUuc2Vlay5hcHBseSh0aGlzLGFyZ3VtZW50cyksdGhpcy5faXNJbk9uZU9mU3RhdGVzKGEuTE9BRElORyxhLlNFRUtJTkcpJiYodGhpcy5fc2Vla1Bvc2l0aW9uPXQpfSxpLnByb3RvdHlwZS5nZXRDdXJyZW50UG9zaXRpb249ZnVuY3Rpb24oKXtpZih0aGlzLl9pc0luT25lT2ZTdGF0ZXMoYS5MT0FESU5HKSYmdGhpcy5fc2Vla1Bvc2l0aW9uPjApcmV0dXJuIHRoaXMuX3NlZWtQb3NpdGlvbjtpZih0aGlzLl9pc0luT25lT2ZTdGF0ZXMoYS5QTEFZSU5HLGEuU0VFS0lORykpe2lmKHRoaXMuX3NlZWtQb3NpdGlvbj49dGhpcy5fY3VycmVudFBvc2l0aW9uKXJldHVybiB0aGlzLl9zZWVrUG9zaXRpb247dGhpcy5fc2Vla1Bvc2l0aW9uPTB9cmV0dXJuIHRoaXMuX2Jhc2VjbGFzcy5wcm90b3R5cGUuZ2V0Q3VycmVudFBvc2l0aW9uLmFwcGx5KHRoaXMsYXJndW1lbnRzKX19LGZ1bmN0aW9uKHQsZSxuKXtmdW5jdGlvbiBpKHQsZSxuKXt0aGlzLl9kdXJhdGlvbj0wLHRoaXMuX2N1cnJlbnRQb3NpdGlvbj0wLHRoaXMuX2xvYWRlZFBvc2l0aW9uPTAsaC5wcm90b3R5cGUuY29uc3RydWN0b3IuY2FsbCh0aGlzLG58fFwiSFRNTDVBdWRpb1BsYXllclwiLHQsZSksdGhpcy5faXNMb2FkZWQ9ITEsdGhpcy5fcHJldkN1cnJlbnRQb3NpdGlvbj0wLHRoaXMuX3ByZXZDaGVja1RpbWU9MCx0aGlzLl9wb3NpdGlvblVwZGF0ZVRpbWVyPTAsdGhpcy5fcGxheVJlcXVlc3RlZD0hMSx0aGlzLl9zdGFydEZyb21Qb3NpdGlvbj0wLHRoaXMuZ2V0RGVzY3JpcHRvcigpLmR1cmF0aW9uJiYodGhpcy5fZHVyYXRpb249dGhpcy5nZXREZXNjcmlwdG9yKCkuZHVyYXRpb24pLHRoaXMuX2JpbmRIYW5kbGVycygpLHRoaXMuX2luaXRNZWRpYUVsZW1lbnQoKSx0aGlzLnVwZGF0ZVN0YXRlKHMuSURMRSl9dmFyIHI9bigxKSxvPW4oNDcpLmJpbmRBbGwscz1uKDM4KSxhPW4oMzkpLHU9big0MyksaD1uKDM1KSxjPW4oMTYpO3QuZXhwb3J0cz1pLHIoaS5wcm90b3R5cGUsaC5wcm90b3R5cGUpLGkuTWVkaWFBUElFdmVudHM9W1wiZW5kZWRcIixcInBsYXlcIixcInBsYXlpbmdcIixcInBhdXNlXCIsXCJzZWVraW5nXCIsXCJ3YWl0aW5nXCIsXCJzZWVrZWRcIixcImVycm9yXCIsXCJsb2FkZWRkYXRhXCIsXCJsb2FkZWRtZXRhZGF0YVwiXSxpLnByb3RvdHlwZS5wbGF5PWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLl9pc0luT25lT2ZTdGF0ZXMocy5FUlJPUixzLkRFQUQpP3ZvaWQgdGhpcy5fbG9nZ2VyLmxvZyhcInBsYXkgY2FsbGVkIGJ1dCBzdGF0ZSBpcyBFUlJPUiBvciBERUFEXCIpOih0aGlzLl9sb2dnZXIubG9nKFwicGxheSBmcm9tIFwiK3QpLHRoaXMuX3N0YXJ0RnJvbVBvc2l0aW9uPXR8fDAsdGhpcy5fcGxheVJlcXVlc3RlZD0hMCx0aGlzLl9pc0luT25lT2ZTdGF0ZXMocy5QQVVTRUQscy5FTkRFRCk/dm9pZCB0aGlzLnJlc3VtZSgpOih0aGlzLnVwZGF0ZVN0YXRlKHMuTE9BRElORyksdGhpcy5faHRtbDVBdWRpby5yZWFkeVN0YXRlPjAmJnRoaXMuX29uTG9hZGVkTWV0YWRhdGEoKSx0aGlzLl9odG1sNUF1ZGlvLnJlYWR5U3RhdGU+MSYmdGhpcy5fb25Mb2FkZWQoKSx2b2lkKHRoaXMuX2lzTG9hZGVkP3RoaXMuX3BsYXlBZnRlckxvYWRlZCgpOnRoaXMub25jZShhLkRBVEEsdGhpcy5fcGxheUFmdGVyTG9hZGVkKSkpKX0saS5wcm90b3R5cGUucGF1c2U9ZnVuY3Rpb24oKXt0aGlzLl9pc0luT25lT2ZTdGF0ZXMocy5FUlJPUixzLkRFQUQpfHwodGhpcy5fbG9nZ2VyLmxvZyhcInBhdXNlXCIpLHRoaXMuX3BsYXlSZXF1ZXN0ZWQ9ITEsdGhpcy5faHRtbDVBdWRpbyYmdGhpcy5faHRtbDVBdWRpby5wYXVzZSgpKX0saS5wcm90b3R5cGUuc2Vlaz1mdW5jdGlvbih0KXt2YXIgZSxuPSExLGk9dC8xZTMscj10aGlzLl9odG1sNUF1ZGlvLnNlZWthYmxlO2lmKCF0aGlzLl9pc0luT25lT2ZTdGF0ZXMocy5FUlJPUixzLkRFQUQpKXtpZighdGhpcy5faXNMb2FkZWQpcmV0dXJuIHRoaXMub25jZShhLkRBVEEsZnVuY3Rpb24oKXt0aGlzLnNlZWsodCl9KSx2b2lkIHRoaXMuX2xvZ2dlci5sb2coXCJwb3N0cG9uaW5nIHNlZWsgZm9yIHdoZW4gbG9hZGVkXCIpO2lmKGMuaXNJRTEwTW9iaWxlKW49ITA7ZWxzZSBmb3IoZT0wO2U8ci5sZW5ndGg7ZSsrKWlmKGk8PXIuZW5kKGUpJiZpPj1yLnN0YXJ0KGUpKXtuPSEwO2JyZWFrfWlmKCFuKXJldHVybiB2b2lkIHRoaXMuX2xvZ2dlci5sb2coXCJjYW4gbm90IHNlZWtcIik7dGhpcy5fbG9nZ2VyLmxvZyhcInNlZWtcIiksdGhpcy51cGRhdGVTdGF0ZShzLlNFRUtJTkcpLHRoaXMuX2h0bWw1QXVkaW8uY3VycmVudFRpbWU9aSx0aGlzLl9jdXJyZW50UG9zaXRpb249dCx0aGlzLl9sYXN0TWVkaWFDbG9ja0NoZWNrPW51bGx9fSxpLnByb3RvdHlwZS5yZXN1bWU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5faXNJbk9uZU9mU3RhdGVzKHMuRVJST1Iscy5ERUFEKT92b2lkIHRoaXMuX2xvZ2dlci5sb2coXCJyZXN1bWUgY2FsbGVkIGJ1dCBzdGF0ZSBpcyBFUlJPUiBvciBERUFEXCIpOih0aGlzLl9sb2dnZXIubG9nKFwicmVzdW1lXCIpLHZvaWQodGhpcy5nZXRTdGF0ZSgpPT09cy5QQVVTRUQ/KHRoaXMudXBkYXRlU3RhdGUocy5QTEFZSU5HKSx0aGlzLl9odG1sNUF1ZGlvLnBsYXkodGhpcy5faHRtbDVBdWRpby5jdXJyZW50VGltZSkpOnRoaXMuZ2V0U3RhdGUoKT09PXMuRU5ERUQmJnRoaXMuX2h0bWw1QXVkaW8ucGxheSgwKSkpfSxpLnByb3RvdHlwZS5zZXRWb2x1bWU9ZnVuY3Rpb24odCl7dGhpcy5faHRtbDVBdWRpbyYmKHRoaXMuX2h0bWw1QXVkaW8udm9sdW1lPXQpfSxpLnByb3RvdHlwZS5nZXRWb2x1bWU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5faHRtbDVBdWRpbz90aGlzLl9odG1sNUF1ZGlvLnZvbHVtZToxfSxpLnByb3RvdHlwZS5zZXRNdXRlPWZ1bmN0aW9uKHQpe3RoaXMuX2h0bWw1QXVkaW8mJih0aGlzLl9odG1sNUF1ZGlvLm11dGVkPXQpfSxpLnByb3RvdHlwZS5nZXRNdXRlPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2h0bWw1QXVkaW8/dGhpcy5faHRtbDVBdWRpby5tdXRlZDohMX0saS5wcm90b3R5cGUua2lsbD1mdW5jdGlvbigpe3RoaXMuX3N0YXRlIT09cy5ERUFEJiYodGhpcy5fbG9nZ2VyLmxvZyhcImtpbGxpbmcgLi4uXCIpLHRoaXMuX3Jlc2V0UG9zaXRpb25JbnRlcnZhbCghMSksdGhpcy5fcGxheVJlcXVlc3RlZD0hMSx0aGlzLl90b2dnbGVFdmVudExpc3RlbmVycyghMSksdGhpcy5wYXVzZSgpLGRlbGV0ZSB0aGlzLl9odG1sNUF1ZGlvLHRoaXMudXBkYXRlU3RhdGUocy5ERUFEKSx0aGlzLl9sb2dnZXIubG9nKFwiZGVhZFwiKSl9LGkucHJvdG90eXBlLmdldEVycm9yTWVzc2FnZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9lcnJvck1lc3NhZ2V9LGkucHJvdG90eXBlLmdldEVycm9ySUQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZXJyb3JJRH0saS5wcm90b3R5cGUuX2JpbmRIYW5kbGVycz1mdW5jdGlvbigpe28odGhpcyxbXCJfb25Qb3NpdGlvbkNoYW5nZVwiLFwiX29uSHRtbDVNZWRpYUV2ZW50XCIsXCJfb25Mb2FkZWRcIixcIl9vbkxvYWRlZE1ldGFkYXRhXCJdKX0saS5wcm90b3R5cGUuX2luaXRNZWRpYUVsZW1lbnQ9ZnVuY3Rpb24oKXt0aGlzLl9odG1sNUF1ZGlvPWMuY3JlYXRlQXVkaW9FbGVtZW50KCksdGhpcy5faHRtbDVBdWRpby5pZD10aGlzLmdldFNldHRpbmdzKCkuYXVkaW9PYmplY3RJRCtcIl9cIit0aGlzLmdldElkKCksdGhpcy5faHRtbDVBdWRpby5wcmVsb2FkPVwiYXV0b1wiLHRoaXMuX2h0bWw1QXVkaW8udHlwZT10aGlzLmdldERlc2NyaXB0b3IoKS5taW1lVHlwZSx0aGlzLl9odG1sNUF1ZGlvLnNyYz10aGlzLmdldERlc2NyaXB0b3IoKS5zcmMsdGhpcy5faHRtbDVBdWRpby5sb2FkKCksdGhpcy5fdG9nZ2xlRXZlbnRMaXN0ZW5lcnMoITApfSxpLnByb3RvdHlwZS5fcGxheUFmdGVyTG9hZGVkPWZ1bmN0aW9uKCl7dGhpcy5fcGxheVJlcXVlc3RlZCYmKHRoaXMuX3RyeVNlZWtUb1N0YXJ0UG9zaXRpb24oKSx0aGlzLl9odG1sNUF1ZGlvLnBsYXkoKSl9LGkucHJvdG90eXBlLl9pc0luT25lT2ZTdGF0ZXM9ZnVuY3Rpb24oKXtmb3IodmFyIHQgaW4gYXJndW1lbnRzKWlmKGFyZ3VtZW50c1t0XT09PXRoaXMuX3N0YXRlKXJldHVybiEwO3JldHVybiExfSxpLnByb3RvdHlwZS5fdG9nZ2xlRXZlbnRMaXN0ZW5lcnM9ZnVuY3Rpb24odCl7aWYodGhpcy5faHRtbDVBdWRpbyl7dmFyIGU9dD9cImFkZEV2ZW50TGlzdGVuZXJcIjpcInJlbW92ZUV2ZW50TGlzdGVuZXJcIjtpLk1lZGlhQVBJRXZlbnRzLmZvckVhY2goZnVuY3Rpb24odCl7c3dpdGNoKHQpe2Nhc2VcImxvYWRlZGRhdGFcIjp0aGlzLl9odG1sNUF1ZGlvW2VdKFwibG9hZGVkZGF0YVwiLHRoaXMuX29uTG9hZGVkKTticmVhaztjYXNlXCJsb2FkZWRtZXRhZGF0YVwiOnRoaXMuX2h0bWw1QXVkaW9bZV0oXCJsb2FkZWRtZXRhZGF0YVwiLHRoaXMuX29uTG9hZGVkTWV0YWRhdGEpO2JyZWFrO2RlZmF1bHQ6dGhpcy5faHRtbDVBdWRpb1tlXSh0LHRoaXMuX29uSHRtbDVNZWRpYUV2ZW50KX19LHRoaXMpfX0saS5wcm90b3R5cGUuX3RyeVNlZWtUb1N0YXJ0UG9zaXRpb249ZnVuY3Rpb24oKXt2YXIgdDtyZXR1cm4gdGhpcy5fc3RhcnRGcm9tUG9zaXRpb24+MCYmKHRoaXMuX2xvZ2dlci5sb2coXCJzZWVrIHRvIHN0YXJ0IHBvc2l0aW9uOiBcIit0aGlzLl9zdGFydEZyb21Qb3NpdGlvbiksdD10aGlzLl9zdGFydEZyb21Qb3NpdGlvbi8xZTMsdGhpcy5faHRtbDVBdWRpby5jdXJyZW50VGltZT10LHRoaXMuX2h0bWw1QXVkaW8uY3VycmVudFRpbWU9PT10KT8odGhpcy5fbGFzdE1lZGlhQ2xvY2tDaGVjaz1udWxsLHRoaXMuX2N1cnJlbnRQb3NpdGlvbj10aGlzLl9zdGFydEZyb21Qb3NpdGlvbix0aGlzLl9zdGFydEZyb21Qb3NpdGlvbj0wLCEwKTohMX0saS5wcm90b3R5cGUuX29uTG9hZGVkPWZ1bmN0aW9uKCl7dGhpcy5fbG9nZ2VyLmxvZyhcIkhUTUw1IG1lZGlhIGxvYWRlZGRhdGEgZXZlbnRcIiksdGhpcy50cmlnZ2VyKGEuREFUQSx0aGlzKX0saS5wcm90b3R5cGUuX29uTG9hZGVkTWV0YWRhdGE9ZnVuY3Rpb24oKXt0aGlzLl9sb2dnZXIubG9nKFwiSFRNTDUgbWVkaWEgbG9hZGVkbWV0YWRhdGEgZXZlbnRcIiksKHZvaWQgMD09PXRoaXMuX2R1cmF0aW9ufHwwPT09dGhpcy5fZHVyYXRpb24pJiYodGhpcy5fZHVyYXRpb249MWUzKnRoaXMuX2h0bWw1QXVkaW8uZHVyYXRpb24pLHRoaXMuX2xvYWRlZFBvc2l0aW9uPXRoaXMuX2R1cmF0aW9uLHRoaXMuX2lzTG9hZGVkPSEwLHRoaXMudHJpZ2dlcihhLk1FVEFEQVRBLHRoaXMpfSxpLnByb3RvdHlwZS5fcmVzZXRQb3NpdGlvbkludGVydmFsPWZ1bmN0aW9uKHQpe3dpbmRvdy5jbGVhckludGVydmFsKHRoaXMuX3Bvc2l0aW9uVXBkYXRlVGltZXIpLHQmJih0aGlzLl9wb3NpdGlvblVwZGF0ZVRpbWVyPXdpbmRvdy5zZXRJbnRlcnZhbCh0aGlzLl9vblBvc2l0aW9uQ2hhbmdlLHRoaXMuZ2V0U2V0dGluZ3MoKS51cGRhdGVJbnRlcnZhbCkpfSxpLnByb3RvdHlwZS5fb25Qb3NpdGlvbkNoYW5nZT1mdW5jdGlvbigpe2lmKCF0aGlzLl9pc0luT25lT2ZTdGF0ZXMocy5ERUFEKSl7dmFyIHQ7cmV0dXJuIERhdGUubm93KCksdGhpcy5fY3VycmVudFBvc2l0aW9uPTFlMyp0aGlzLl9odG1sNUF1ZGlvLmN1cnJlbnRUaW1lLHRoaXMudHJpZ2dlcihhLlBPU0lUSU9OX0NIQU5HRSx0aGlzLmdldEN1cnJlbnRQb3NpdGlvbigpLHRoaXMuX2xvYWRlZFBvc2l0aW9uLHRoaXMuX2R1cmF0aW9uLHRoaXMpLHRoaXMuX2lzSW5PbmVPZlN0YXRlcyhzLlBMQVlJTkcscy5MT0FESU5HKT8wIT09dGhpcy5fZHVyYXRpb24mJih0aGlzLl9jdXJyZW50UG9zaXRpb24+dGhpcy5fZHVyYXRpb258fHRoaXMuX2N1cnJlbnRQb3NpdGlvbj50aGlzLl9sb2FkZWRQb3NpdGlvbiYmIWMuaXNJRTEwTW9iaWxlKT92b2lkIHRoaXMuX29uSHRtbDVNZWRpYUV2ZW50KHt0eXBlOlwiZW5kZWRcIn0pOnRoaXMuZ2V0U3RhdGUoKSE9PXMuUExBWUlOR3x8dGhpcy5fbWVkaWFzSGFzUHJvZ3Jlc3NlZCgpP3ZvaWQodGhpcy5nZXRTdGF0ZSgpIT09cy5QTEFZSU5HJiZ0aGlzLl9tZWRpYXNIYXNQcm9ncmVzc2VkKCkmJnRoaXMudXBkYXRlU3RhdGUocy5QTEFZSU5HKSk6KHRoaXMuX2xvZ2dlci5sb2coXCJtZWRpYSBjbG9jayBjaGVjayBmYWlsZWQsIHBsYXloZWFkIGlzIG5vdCBhZHZhbmNpbmcgYW55bW9yZVwiKSx2b2lkIHRoaXMudXBkYXRlU3RhdGUocy5MT0FESU5HKSk6dm9pZCh0aGlzLl9zdGF0ZT09PXMuU0VFS0lORyYmdD4wJiZ0aGlzLnVwZGF0ZVN0YXRlKHMuUExBWUlORykpfX0saS5wcm90b3R5cGUuX21lZGlhc0hhc1Byb2dyZXNzZWQ9ZnVuY3Rpb24oKXt2YXIgdD0hMSxlPURhdGUubm93KCk7aWYodGhpcy5fbGFzdE1lZGlhQ2xvY2tDaGVjayl7dmFyIG49ZS10aGlzLl9sYXN0TWVkaWFDbG9ja0NoZWNrLGk9dGhpcy5fY3VycmVudFBvc2l0aW9uLXRoaXMuX2xhc3RNZWRpYUNsb2NrVmFsdWU7aWYoLjEqbj5pKXtpZigwPT09aSYmNTA+bilyZXR1cm4hMDt0PSEwfX1yZXR1cm4gdGhpcy5fbGFzdE1lZGlhQ2xvY2tWYWx1ZT10aGlzLl9jdXJyZW50UG9zaXRpb24sdGhpcy5fbGFzdE1lZGlhQ2xvY2tDaGVjaz1lLCF0fSxpLnByb3RvdHlwZS5fb25IdG1sNU1lZGlhRXZlbnQ9ZnVuY3Rpb24odCl7c3dpdGNoKHRoaXMuX2xvZ2dlci5sb2coXCJIVE1MNSBtZWRpYSBldmVudDogXCIrdC50eXBlKSx0LnR5cGUpe2Nhc2VcInBsYXlpbmdcIjppZih0aGlzLl90cnlTZWVrVG9TdGFydFBvc2l0aW9uKCkpYnJlYWs7dGhpcy5fb25Qb3NpdGlvbkNoYW5nZSgpLHRoaXMuX3Jlc2V0UG9zaXRpb25JbnRlcnZhbCghMCksdGhpcy51cGRhdGVTdGF0ZShzLlBMQVlJTkcpO2JyZWFrO2Nhc2VcInBhdXNlXCI6dGhpcy5fb25Qb3NpdGlvbkNoYW5nZSgpLHRoaXMuX3Jlc2V0UG9zaXRpb25JbnRlcnZhbCghMSksdGhpcy51cGRhdGVTdGF0ZShzLlBBVVNFRCk7YnJlYWs7Y2FzZVwiZW5kZWRcIjp0aGlzLl9jdXJyZW50UG9zaXRpb249dGhpcy5fbG9hZGVkUG9zaXRpb249dGhpcy5fZHVyYXRpb24sdGhpcy5fcmVzZXRQb3NpdGlvbkludGVydmFsKCExKSx0aGlzLnVwZGF0ZVN0YXRlKHMuRU5ERUQpO2JyZWFrO2Nhc2VcIndhaXRpbmdcIjppZih0aGlzLmdldFN0YXRlKCk9PT1zLlNFRUtJTkcpYnJlYWs7dGhpcy51cGRhdGVTdGF0ZShzLkxPQURJTkcpO2JyZWFrO2Nhc2VcInNlZWtpbmdcIjp0aGlzLnVwZGF0ZVN0YXRlKHMuU0VFS0lORyk7YnJlYWs7Y2FzZVwic2Vla2VkXCI6dGhpcy5faHRtbDVBdWRpby5wYXVzZWQ/dGhpcy51cGRhdGVTdGF0ZShzLlBBVVNFRCk6dGhpcy51cGRhdGVTdGF0ZShzLlBMQVlJTkcpLHRoaXMuX29uUG9zaXRpb25DaGFuZ2UodCk7YnJlYWs7Y2FzZVwiZXJyb3JcIjp0aGlzLl9lcnJvcih0aGlzLl9odG1sNUF1ZGlvRXJyb3JDb2RlVG9FcnJvcklkKCksITApfX0saS5wcm90b3R5cGUuX2h0bWw1QXVkaW9FcnJvckNvZGVUb0Vycm9ySWQ9ZnVuY3Rpb24oKXtyZXR1cm57MTp1LkhUTUw1X0FVRElPX0FCT1JURUQsMjp1LkhUTUw1X0FVRElPX05FVFdPUkssMzp1LkhUTUw1X0FVRElPX0RFQ09ERSw0OnUuSFRNTDVfQVVESU9fU1JDX05PVF9TVVBQT1JURUR9W3RoaXMuX2h0bWw1QXVkaW8uZXJyb3IuY29kZV19LGkucHJvdG90eXBlLl9lcnJvcj1mdW5jdGlvbih0LGUpe3ZhciBuPVwiZXJyb3I6IFwiO2UmJihuPVwiZXJyb3IgKG5hdGl2ZSk6IFwiKSx0aGlzLl9lcnJvcklEPXQsdGhpcy5fZXJyb3JNZXNzYWdlPXRoaXMuX2dldEVycm9yTWVzc2FnZSh0aGlzLl9lcnJvcklEKSx0aGlzLl9sb2dnZXIubG9nKG4rdGhpcy5fZXJyb3JJRCtcIiBcIit0aGlzLl9lcnJvck1lc3NhZ2UpLHRoaXMudXBkYXRlU3RhdGUocy5FUlJPUiksdGhpcy5fdG9nZ2xlRXZlbnRMaXN0ZW5lcnMoITEpfSxpLnByb3RvdHlwZS5fZ2V0RXJyb3JNZXNzYWdlPWZ1bmN0aW9uKHQpe3ZhciBlPXt9O3JldHVybiBlW3UuSFRNTDVfQVVESU9fQUJPUlRFRF09XCJUaGUgZmV0Y2hpbmcgcHJvY2VzcyBmb3IgdGhlIG1lZGlhIHJlc291cmNlIHdhcyBhYm9ydGVkIGJ5IHRoZSB1c2VyIGFnZW50IGF0IHRoZSB1c2VyJ3MgcmVxdWVzdC5cIixlW3UuSFRNTDVfQVVESU9fTkVUV09SS109XCJBIG5ldHdvcmsgZXJyb3Igb2Ygc29tZSBkZXNjcmlwdGlvbiBjYXVzZWQgdGhlIHVzZXIgYWdlbnQgdG8gc3RvcCBmZXRjaGluZyB0aGUgbWVkaWEgcmVzb3VyY2UsIGFmdGVyIHRoZSByZXNvdXJjZSB3YXMgZXN0YWJsaXNoZWQgdG8gYmUgdXNhYmxlLlwiLGVbdS5IVE1MNV9BVURJT19ERUNPREVdPVwiQW4gZXJyb3Igb2Ygc29tZSBkZXNjcmlwdGlvbiBvY2N1cnJlZCB3aGlsZSBkZWNvZGluZyB0aGUgbWVkaWEgcmVzb3VyY2UsIGFmdGVyIHRoZSByZXNvdXJjZSB3YXMgZXN0YWJsaXNoZWQgdG8gYmUgdXNhYmxlLlwiLGVbdS5IVE1MNV9BVURJT19TUkNfTk9UX1NVUFBPUlRFRF09XCJUaGUgbWVkaWEgcmVzb3VyY2UgaW5kaWNhdGVkIGJ5IHRoZSBzcmMgYXR0cmlidXRlIHdhcyBub3Qgc3VpdGFibGUuXCIsZVt0XX19LGZ1bmN0aW9uKHQsZSl7ZnVuY3Rpb24gbih0LGUpe3ZhciBuPW5ldyBVaW50OEFycmF5KHQuYnl0ZUxlbmd0aCtlLmJ5dGVMZW5ndGgpO3JldHVybiBuLnNldChuZXcgVWludDhBcnJheSh0KSwwKSxuLnNldChuZXcgVWludDhBcnJheShlKSx0LmJ5dGVMZW5ndGgpLG59dC5leHBvcnRzPXtiaW5kQWxsOmZ1bmN0aW9uKHQsZSl7ZS5mb3JFYWNoKGZ1bmN0aW9uKGUpe3RbZV09dFtlXS5iaW5kKHQpfSl9LGNvbmNhdEJ1ZmZlcnNUb1VpbnQ4QXJyYXk6bn19LGZ1bmN0aW9uKHQsZSxuKXtmdW5jdGlvbiBpKHQsZSxuKXt1LnByb3RvdHlwZS5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMsdCxlLG58fFwiSFRNTDVTaW5nbGVBdWRpb1BsYXllclwiKX12YXIgcixvPW4oMSkscz1uKDE2KSxhPW4oMzkpLHU9big0NiksaD1uKDM4KSxjPXt9O3QuZXhwb3J0cz1pLG8oaS5wcm90b3R5cGUsdS5wcm90b3R5cGUpLGkuX29uTG9hZGVkPWZ1bmN0aW9uKHQpe2kuX3BhdXNlT3RoZXJzQW5kRm9yd2FyZEV2ZW50KFwiX29uTG9hZGVkXCIsdCl9LGkuX29uTG9hZGVkTWV0YWRhdGE9ZnVuY3Rpb24odCl7aS5fcGF1c2VPdGhlcnNBbmRGb3J3YXJkRXZlbnQoXCJfb25Mb2FkZWRNZXRhZGF0YVwiLHQpfSxpLl9vbkh0bWw1TWVkaWFFdmVudD1mdW5jdGlvbih0KXtpLl9wYXVzZU90aGVyc0FuZEZvcndhcmRFdmVudChcIl9vbkh0bWw1TWVkaWFFdmVudFwiLHQpfSxpLl9wYXVzZU90aGVyc0FuZEZvcndhcmRFdmVudD1mdW5jdGlvbih0LGUpe09iamVjdC5rZXlzKGMpLmZvckVhY2goZnVuY3Rpb24obil7dmFyIGk9Y1tuXTtuPT09cj9pW3RdKGUpOmkucGF1c2UoKX0pfSxpLnByb3RvdHlwZS5faW5pdE1lZGlhRWxlbWVudD1mdW5jdGlvbigpe2kuX2h0bWw1QXVkaW98fChpLl9odG1sNUF1ZGlvPXMuY3JlYXRlQXVkaW9FbGVtZW50KCksaS5faHRtbDVBdWRpby5pZD10aGlzLmdldFNldHRpbmdzKCkuYXVkaW9PYmplY3RJRCtcIl9TaW5nbGVcIix1LnByb3RvdHlwZS5fdG9nZ2xlRXZlbnRMaXN0ZW5lcnMuY2FsbChpLCEwKSksdGhpcy5fdG9nZ2xlRXZlbnRMaXN0ZW5lcnMoITApLHRoaXMuX2h0bWw1QXVkaW89aS5faHRtbDVBdWRpbyx0aGlzLl9sb2dnZXIubG9nKFwiaW5pdGlhbGl6ZWQgcGxheWVyIGZvciB1c2Ugd2l0aDogXCIrdGhpcy5nZXREZXNjcmlwdG9yKCkuc3JjKX0saS5wcm90b3R5cGUuX3RvZ2dsZUV2ZW50TGlzdGVuZXJzPWZ1bmN0aW9uKHQpe3Q/Y1t0aGlzLmdldElkKCldPXRoaXM6ZGVsZXRlIGNbdGhpcy5nZXRJZCgpXX0saS5wcm90b3R5cGUucGxheT1mdW5jdGlvbih0KXt0aGlzLl9sb2dnZXIubG9nKFwic2luZ2xldG9uIHBsYXkgYXQ6IFwiK3QpLCgwPT09dGhpcy5faHRtbDVBdWRpby5yZWFkeVN0YXRlfHx0aGlzLmdldERlc2NyaXB0b3IoKS5zcmMhPT10aGlzLl9odG1sNUF1ZGlvLnNyYykmJih0aGlzLl9sb2dnZXIubG9nKFwic2V0dGluZyB1cCBhdWRpbyBlbGVtZW50IGZvciB1c2Ugd2l0aDogXCIrdGhpcy5nZXREZXNjcmlwdG9yKCkuc3JjKSxyPXRoaXMuZ2V0SWQoKSx0aGlzLl9pc0luT25lT2ZTdGF0ZXMoaC5QQVVTRUQpJiYodGhpcy5fbG9nZ2VyLmxvZyhcInN0YXRlIHdhcyBwYXVzZWRcIiksdD10aGlzLl9jdXJyZW50UG9zaXRpb258fDApLHRoaXMuX3RvZ2dsZUV2ZW50TGlzdGVuZXJzKCEwKSx0aGlzLl9odG1sNUF1ZGlvLnByZWxvYWQ9XCJhdXRvXCIsdGhpcy5faHRtbDVBdWRpby50eXBlPXRoaXMuZ2V0RGVzY3JpcHRvcigpLm1pbWVUeXBlLHRoaXMuX2h0bWw1QXVkaW8uc3JjPXRoaXMuZ2V0RGVzY3JpcHRvcigpLnNyYyx0aGlzLl9odG1sNUF1ZGlvLmxvYWQoKSksdS5wcm90b3R5cGUucGxheS5jYWxsKHRoaXMsdCl9LGkucHJvdG90eXBlLnJlc3VtZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9pc0luT25lT2ZTdGF0ZXMoaC5FUlJPUixoLkRFQUQpP3ZvaWQgMDpyIT09dGhpcy5nZXRJZCgpP3ZvaWQgdGhpcy5wbGF5KHRoaXMuX2N1cnJlbnRQb3NpdGlvbik6dm9pZCB1LnByb3RvdHlwZS5yZXN1bWUuYXBwbHkodGhpcyxhcmd1bWVudHMpfSxpLnByb3RvdHlwZS5wYXVzZT1mdW5jdGlvbigpe3RoaXMuX2lzSW5PbmVPZlN0YXRlcyhoLkVSUk9SLGguREVBRCl8fCh0aGlzLl9sb2dnZXIubG9nKFwic2luZ2xldG9uIHBhdXNlXCIpLHI9PT10aGlzLmdldElkKCk/dS5wcm90b3R5cGUucGF1c2UuYXBwbHkodGhpcyxhcmd1bWVudHMpOih0aGlzLl90b2dnbGVFdmVudExpc3RlbmVycyghMSksdGhpcy5faXNJbk9uZU9mU3RhdGVzKGguUEFVU0VEKXx8dGhpcy51cGRhdGVTdGF0ZShoLlBBVVNFRCksdGhpcy5fcmVzZXRQb3NpdGlvbkludGVydmFsKCExKSkpfSxpLnByb3RvdHlwZS5zZWVrPWZ1bmN0aW9uKHQpe3JldHVybiByIT09dGhpcy5nZXRJZCgpPyh0aGlzLl9jdXJyZW50UG9zaXRpb249dCx2b2lkIHRoaXMudHJpZ2dlcihhLlBPU0lUSU9OX0NIQU5HRSx0aGlzLl9jdXJyZW50UG9zaXRpb24sdGhpcy5fbG9hZGVkUG9zaXRpb24sdGhpcy5fZHVyYXRpb24sdGhpcykpOnZvaWQgdS5wcm90b3R5cGUuc2Vlay5hcHBseSh0aGlzLGFyZ3VtZW50cyl9fSxmdW5jdGlvbih0LGUsbil7ZnVuY3Rpb24gaSh0LGUpe28uY2FsbCh0aGlzLHQsZSxzLFwiSExTU2luZ2xlQXVkaW9QbGF5ZXJcIil9dmFyIHI9bigxKSxvPW4oNDUpLHM9big0OCk7dC5leHBvcnRzPWkscihpLnByb3RvdHlwZSxzLnByb3RvdHlwZSxvLnByb3RvdHlwZSl9LGZ1bmN0aW9uKHQsZSxuKXtmdW5jdGlvbiBpKHQsZSl7cmV0dXJuIHUucHJvdG90eXBlLmNvbnN0cnVjdG9yLmNhbGwodGhpcyxcIkhMU01TRVBsYXllclwiLHQsZSx3KCkpLG8odGhpcyxbXCJfb25Qb3NpdGlvbkNoYW5nZVwiLFwiX29uUGxheWxpc3RMb2FkZWRcIixcIl9vblBsYXlsaXN0RmFpbGVkXCIsXCJfb25TZWdtZW50TG9hZGVkXCIsXCJfb25TZWdtZW50UHJvZ3Jlc3NcIixcIl9vblNlZ21lbnRGYWlsZWRcIixcIl9vbkh0bWw1TWVkaWFFdmVudFwiLFwiX29uTG9hZGVkRGF0YVwiLFwiX29uTG9hZGVkTWV0YWRhdGFcIixcIl9vbk1lZGlhU291cmNlQXBwZW5kXCIsXCJfb25NZWRpYVNvdXJjZVJlYWR5XCIsXCJfb25NZWRpYVNvdXJjZURlc3Ryb3lcIixcIl9vbk1lZGlhU291cmNlRXJyb3JcIl0pLHRoaXMuX3N0cmVhbVVybFByb3ZpZGVyPXRoaXMuZ2V0U2V0dGluZ3MoKS5zdHJlYW1VcmxQcm92aWRlcnx8bnVsbCx0aGlzLl9taW5QcmVCdWZmZXJMZW5ndGhGb3JQbGF5YmFjaz01ZTMsdGhpcy5fbWF4QnVmZmVyTGVuZ3RoPTNlNCx0aGlzLl9zdHJlYW1VcmxSZXRyeVRpbWVyPW51bGwsdGhpcy5fc3RyZWFtVXJsVGltZXNGYWlsZWQ9MCx0aGlzLl9wbGF5bGlzdFJldHJ5VGltZXI9bnVsbCx0aGlzLl9wbGF5bGlzdFRpbWVzRmFpbGVkPTAsdGhpcy5fcGxheWxpc3RSZWZyZXNoSW5Qcm9ncmVzcz0hMSx0aGlzLl9pc1BsYXlsaXN0TG9hZGVkPSExLHRoaXMuX2xvYWRPbkluaXQ9ITEsdGhpcy5fc2NoZWR1bGluZ1NlZ21lbnRJbmRleD0tMSx0aGlzLl9zZWdtZW50c0Rvd25sb2FkaW5nPVtdLHRoaXMuX25leHRTY2hlZHVsaW5nVGltZW91dD1udWxsLHRoaXMuX21pbWVUeXBlPVQoKSx0aGlzLl9taW1lVHlwZT8odGhpcy5fbXNlVG9vbGtpdD1uZXcgbCh0aGlzLl9sb2dnZXIsdGhpcy5fbWltZVR5cGUpLHRoaXMuX21zZVRvb2xraXQub24obC5FdmVudHMuU0VHTUVOVF9BUFBFTkRFRCx0aGlzLl9vbk1lZGlhU291cmNlQXBwZW5kKSx0aGlzLl9tc2VUb29sa2l0Lm9uKGwuRXZlbnRzLlNPVVJDRV9SRUFEWSx0aGlzLl9vbk1lZGlhU291cmNlUmVhZHkpLHRoaXMuX21zZVRvb2xraXQub24obC5FdmVudHMuU09VUkNFX0RFU1RST1ksdGhpcy5fb25NZWRpYVNvdXJjZURlc3Ryb3kpLHRoaXMuX21zZVRvb2xraXQub24obC5FdmVudHMuU09VUkNFX0VSUk9SLHRoaXMuX29uTWVkaWFTb3VyY2VFcnJvciksdGhpcy5faGxzVG9vbGtpdD1uZXcgYyh0aGlzLl9sb2dnZXIsdGhpcy5nZXREZXNjcmlwdG9yKCkuc3JjKSx0aGlzLl9obHNUb29sa2l0Lm9uKGMuRXZlbnRzLlNFR01FTlRfTE9BREVELHRoaXMuX29uU2VnbWVudExvYWRlZCksdGhpcy5faGxzVG9vbGtpdC5vbihjLkV2ZW50cy5TRUdNRU5UX1BST0dSRVNTLHRoaXMuX29uU2VnbWVudFByb2dyZXNzKSx0aGlzLl9obHNUb29sa2l0Lm9uKGMuRXZlbnRzLlNFR01FTlRfRkFJTEVELHRoaXMuX29uU2VnbWVudEZhaWxlZCksdGhpcy5faGxzVG9vbGtpdC5vbihjLkV2ZW50cy5QTEFZTElTVF9MT0FERUQsdGhpcy5fb25QbGF5bGlzdExvYWRlZCksdGhpcy5faGxzVG9vbGtpdC5vbihjLkV2ZW50cy5QTEFZTElTVF9GQUlMRUQsdGhpcy5fb25QbGF5bGlzdEZhaWxlZCksdGhpcy5faGxzVG9vbGtpdC5vbihjLkV2ZW50cy5QTEFZTElTVF9QQVJTRV9FUlJPUix0aGlzLl9vblBsYXlsaXN0RmFpbGVkKSx0aGlzLl9odG1sNUF1ZGlvPXRoaXMuX21zZVRvb2xraXQubWVkaWEoKSx2b2lkIHRoaXMuX3RvZ2dsZUV2ZW50TGlzdGVuZXJzKCEwKSk6dm9pZCB0aGlzLl9lcnJvcihhLk1TRV9OT1RfU1VQUE9SVEVEKX12YXIgcj1uKDEpLG89big0NykuYmluZEFsbCxzPW4oMzkpLGE9big0MyksdT1uKDM1KSxoPW4oNDYpLGM9big1MSksbD1uKDY2KSxmPW4oNjcpLGQ9bigzOCkscD1uKDQyKSxnPW4oMTI4KSxfPW4oMTI5KSxtPW4oMTYpLHk9MjAwLHY9NTAwLEU9MyxTPTFlNCxBPWZ1bmN0aW9uKHQpe3ZhciBlPXQvRSxuPXYqKE1hdGgucG93KE1hdGguRSxlKS9NYXRoLkUpO3JldHVybiBuKz1NYXRoLnJhbmRvbSgpKnksbj5TJiYobj1TKSxufSx3PWZ1bmN0aW9uKCl7dmFyIHQ9e307cmV0dXJuIHRbcC5uYW1lcy5QUk9UT0NPTFNdPVtnLkhMU10sdFtwLm5hbWVzLk1JTUVUWVBFU109W18uSExTLF8uTTNVOCxfLk1QM10sdFtwLm5hbWVzLk5FRURTX1VSTF9SRUZSRVNIXT0hMSx0fSxUPWZ1bmN0aW9uKCl7cmV0dXJuIG0uaXNNU0VTdXBwb3J0TVBFRygpJiYhbS5pc05hdGl2ZUhsc1N1cHBvcnRlZCgpP1wiYXVkaW8vbXBlZ1wiOm0uaXNNU0VTdXBwb3J0TVA0KCk/XCJhdWRpby9tcDRcIjpudWxsfTt0LmV4cG9ydHM9aSxyKGkucHJvdG90eXBlLHUucHJvdG90eXBlKSxpLnByb3RvdHlwZS5fb25Mb2FkZWREYXRhPWZ1bmN0aW9uKCl7dGhpcy5fbG9nZ2VyLmxvZyhcImxvYWRlZGRhdGEgZXZlbnQgaGFuZGxlclwiKSx0aGlzLnRyaWdnZXIocy5EQVRBKX0saS5wcm90b3R5cGUuX29uTG9hZGVkTWV0YWRhdGE9ZnVuY3Rpb24oKXt0aGlzLl9sb2dnZXIubG9nKFwibG9hZGVkbWV0YWRhdGEgZXZlbnQgaGFuZGxlclwiKX0saS5wcm90b3R5cGUuX21lZGlhc0hhc1Byb2dyZXNzZWQ9ZnVuY3Rpb24oKXt2YXIgdD0hMSxlPURhdGUubm93KCk7aWYodGhpcy5fbGFzdE1lZGlhQ2xvY2tDaGVjayl7dmFyIG49ZS10aGlzLl9sYXN0TWVkaWFDbG9ja0NoZWNrLGk9dGhpcy5fY3VycmVudFBvc2l0aW9uLXRoaXMuX2xhc3RNZWRpYUNsb2NrVmFsdWU7aWYoLjEqbj5pKXtpZigwPT09aSYmNTA+bilyZXR1cm4hMDt0PSEwfX1yZXR1cm4gdGhpcy5fbGFzdE1lZGlhQ2xvY2tWYWx1ZT10aGlzLl9jdXJyZW50UG9zaXRpb24sdGhpcy5fbGFzdE1lZGlhQ2xvY2tDaGVjaz1lLCF0fSxpLnByb3RvdHlwZS5fb25Qb3NpdGlvbkNoYW5nZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9odG1sNUF1ZGlvJiZ0aGlzLmdldFN0YXRlKCkhPT1kLlNFRUtJTkc/KHRoaXMuX2N1cnJlbnRQb3NpdGlvbj0xZTMqdGhpcy5faHRtbDVBdWRpby5jdXJyZW50VGltZSx0aGlzLmdldFN0YXRlKCkhPT1kLlBMQVlJTkd8fHRoaXMuX21lZGlhc0hhc1Byb2dyZXNzZWQoKT8odGhpcy5nZXRTdGF0ZSgpIT09ZC5QTEFZSU5HJiZ0aGlzLl9tZWRpYXNIYXNQcm9ncmVzc2VkKCkmJnRoaXMudXBkYXRlU3RhdGUoZC5QTEFZSU5HKSx0aGlzLl90cmlnZ2VyUG9zaXRpb25FdmVudCgpLHRoaXMuX2N1cnJlbnRQb3NpdGlvbj49dGhpcy5fZHVyYXRpb24/dm9pZCB0aGlzLnVwZGF0ZVN0YXRlKGQuRU5ERUQpOnZvaWQgMCk6KHRoaXMuX2xvZ2dlci5sb2coXCJtZWRpYSBjbG9jayBjaGVjayBmYWlsZWQsIHBsYXloZWFkIGlzIG5vdCBhZHZhbmNpbmcgYW55bW9yZVwiKSx2b2lkIHRoaXMudXBkYXRlU3RhdGUoZC5MT0FESU5HKSkpOnZvaWQgMH0saS5wcm90b3R5cGUuX29uTWVkaWFTb3VyY2VSZWFkeT1mdW5jdGlvbigpe3RoaXMuZ2V0RGVzY3JpcHRvcigpLmR1cmF0aW9uJiYodGhpcy5fc2V0RHVyYXRpb24odGhpcy5nZXREZXNjcmlwdG9yKCkuZHVyYXRpb24pLHRoaXMuX2xvZ2dlci5sb2coXCJkdXJhdGlvbiBzZXQgZnJvbSBkZXNjcmlwdG9yIHRvIFwiK3RoaXMuX2R1cmF0aW9uKSksdGhpcy51cGRhdGVTdGF0ZShkLklETEUpLHRoaXMuX2xvYWRPbkluaXQmJnRoaXMuX2xvYWRJbml0aWFsUGxheWxpc3QoKX0saS5wcm90b3R5cGUuX29uTWVkaWFTb3VyY2VEZXN0cm95PWZ1bmN0aW9uKCl7dGhpcy5raWxsKCl9LGkucHJvdG90eXBlLl9vbk1lZGlhU291cmNlRXJyb3I9ZnVuY3Rpb24odCl7dGhpcy5fbG9nZ2VyLmxvZyhcIk1lZGlhU291cmNlIEFQSSBlcnJvcjogXCIrdC5tZXNzYWdlKSx0aGlzLl9lcnJvcihhLk1TRV9CQURfT0JKRUNUX1NUQVRFKSx0aGlzLmtpbGwoKX0saS5wcm90b3R5cGUuX29uTWVkaWFTb3VyY2VBcHBlbmQ9ZnVuY3Rpb24odCl7dGhpcy5fbG9nZ2VyLmxvZyhcInNlZ21lbnQgYXBwZW5kZWQ6IFwiK3QuaW5kZXgpLHRoaXMudHJpZ2dlcihzLkRBVEEsdCksdGhpcy5fbG9hZGVkUG9zaXRpb249dC5lbmRQb3NpdGlvbix0aGlzLl9wbGF5UmVxdWVzdGVkJiYodGhpcy5fbG9nZ2VyLmxvZyhcInRyaWdnZXJpbmcgcGxheWJhY2sgYWZ0ZXIgYXBwZW5kaW5nIGVub3VnaCBzZWdtZW50c1wiKSx0aGlzLl9odG1sNUF1ZGlvLnBsYXkodGhpcy5fY3VycmVudFBvc2l0aW9uKSl9LGkucHJvdG90eXBlLl9vblNlZ21lbnRQcm9ncmVzcz1mdW5jdGlvbih0KXt2YXIgZT1NYXRoLnJvdW5kKHQubG9hZGVkL3QudG90YWwqMTAwKTt0aGlzLl9sb2dnZXIubG9nKFwic2VnbWVudCBcIit0LmluZGV4K1wiIGxvYWRlZCBcIit0LmxvYWRlZCtcIiBvZiBcIit0LnRvdGFsK1wiIGJ5dGVzIChcIitlK1wiJSlcIiksdGhpcy5fbG9hZGVkUG9zaXRpb249dC5lbmRQb3NpdGlvbi10LmR1cmF0aW9uKih0LmxvYWRlZC90LnRvdGFsKX0saS5wcm90b3R5cGUuX29uU2VnbWVudExvYWRlZD1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5fbXNlVG9vbGtpdC5zb3VyY2VJc1JlYWR5KCk/dm9pZCB0aGlzLl9hcHBlbmRTZWdtZW50cygpOnZvaWQgdGhpcy5fbG9nZ2VyLmxvZyhcIndlIGhhdmUgYmVlbiBkaXNwb3NlZCB3aGlsZSBsb2FkaW5nIGEgc2VnbWVudCwgbm9vcFwiKX0saS5wcm90b3R5cGUuX29uU2VnbWVudEZhaWxlZD1mdW5jdGlvbih0KXtzd2l0Y2godGhpcy5fbG9nZ2VyLmxvZyhcInNlZ21lbnQgbG9hZGluZyBmYWlsZWQgaGFuZGxlcjogXCIrdC5zdGF0dXMpLHQuc3RhdHVzKXtjYXNlIGMuU3RhdHVzLk5PVF9GT1VORDpjYXNlIGMuU3RhdHVzLkZPUkJJRERFTjp0aGlzLl9jYW5jZWxOZXh0U2NoZWR1bGluZygpLHRoaXMuX2NhbmNlbEFsbEluRmxpZ2h0UmVxdWVzdHMoKSx0aGlzLl9yZWZyZXNoUGxheWxpc3QoKTticmVhaztjYXNlIGMuU3RhdHVzLlRJTUVPVVQ6dGhpcy50cmlnZ2VyKHMuTkVUV09SS19USU1FT1VUKTtjYXNlIGMuU3RhdHVzLlNFUlZFUl9FUlJPUjppZih0LmFib3J0ZWQpe3RoaXMuX2xvZ2dlci5sb2coXCJhYm9ydGVkIHNlZ21lbnQgaGFzIGJlZW4gcHJldmVudGVkIGZyb20gYmVpbmcgcmV0cmllZFwiKTticmVha310LnNjaGVkdWxlUmV0cnkoQSh0LnRpbWVzRmFpbGVkKSx0aGlzLl9obHNUb29sa2l0LmxvYWRTZWdtZW50LHRoaXMuX2hsc1Rvb2xraXQpO2JyZWFrO2Nhc2UgYy5TdGF0dXMuRkFJTEVEOnRoaXMuX2xvZ2dlci5sb2coXCJXQVJOSU5HOiBzZWdtZW50IGxvYWRpbmcgZmFpbGVkIGZvciB1bmtub3duIHJlYXNvbiFcIik7YnJlYWs7ZGVmYXVsdDp0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIHN0YXR1cyBvbiBmYWlsZWQgc2VnbWVudDogXCIrdC5zdGF0dXMpfX0saS5wcm90b3R5cGUuX29uUGxheWxpc3RMb2FkZWQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbG9nZ2VyLmxvZyhcInBsYXlsaXN0IGxvYWRlZCBoYW5kbGVyXCIpLHRoaXMuX21zZVRvb2xraXQuc291cmNlSXNSZWFkeSgpPyh0aGlzLl9wbGF5bGlzdFJlZnJlc2hJblByb2dyZXNzJiYodGhpcy5fY2FuY2VsTmV4dFNjaGVkdWxpbmcoKSx0aGlzLl9ydW5TY2hlZHVsaW5nKCkpLHRoaXMuX3BsYXlsaXN0UmVmcmVzaEluUHJvZ3Jlc3M9ITEsdGhpcy5fcGxheWxpc3RUaW1lc0ZhaWxlZD0wLHRoaXMuX2lzUGxheWxpc3RMb2FkZWQ9ITAsdGhpcy5faW5zcGVjdEVuY3J5cHRpb25EYXRhKCksdGhpcy5fc2V0RHVyYXRpb24odGhpcy5faGxzVG9vbGtpdC5nZXREdXJhdGlvbigpKSx0aGlzLl9sb2dnZXIubG9nKFwiZHVyYXRpb24gc2V0IGZyb20gcGxheWxpc3QgaW5mbyB0byBcIit0aGlzLl9kdXJhdGlvbiksdm9pZCB0aGlzLnRyaWdnZXIocy5NRVRBREFUQSkpOnZvaWQgdGhpcy5fbG9nZ2VyLmxvZyhcIndlIGhhdmUgYmVlbiBkaXNwb3NlZCB3aGlsZSBsb2FkaW5nIHRoZSBwbGF5bGlzdCwgbm9vcFwiKX0saS5wcm90b3R5cGUuX29uUGxheWxpc3RGYWlsZWQ9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuX2xvZ2dlci5sb2coXCJwbGF5bGlzdCBsb2FkaW5nIGZhaWxlZCBoYW5kbGVyLiBIVFRQIHN0YXR1cyBjb2RlIGlzIFwiK3QpLHRoaXMuX21zZVRvb2xraXQuc291cmNlSXNSZWFkeSgpPyh0aGlzLl9sb2dnZXIubG9nKFwiUGxheWxpc3QgbG9hZGluZyBmYWlsZWQgIFwiK3RoaXMuX3BsYXlsaXN0VGltZXNGYWlsZWQrXCIgdGltZXMgYmVmb3JlXCIpLHRoaXMuX3BsYXlsaXN0VGltZXNGYWlsZWQrKyx0aGlzLl9wbGF5bGlzdFJldHJ5VGltZXI9d2luZG93LnNldFRpbWVvdXQoZnVuY3Rpb24oKXt0aGlzLmhhc1N0cmVhbVVybFByb3ZpZGVyKCk/dGhpcy5fcmVmcmVzaFBsYXlsaXN0KCk6dGhpcy5faGxzVG9vbGtpdC51cGRhdGVQbGF5bGlzdCgpfS5iaW5kKHRoaXMpLEEodGhpcy5fcGxheWxpc3RUaW1lc0ZhaWxlZCkpLHZvaWQoMD09PXQmJnRoaXMudHJpZ2dlcihzLk5FVFdPUktfVElNRU9VVCkpKTp2b2lkIHRoaXMuX2xvZ2dlci5sb2coXCJ3ZSBoYXZlIGJlZW4gZGlzcG9zZWQgd2hpbGUgbG9hZGluZyB0aGUgcGxheWxpc3QsIG5vb3BcIil9LGkucHJvdG90eXBlLmFmdGVyU3RhdGVDaGFuZ2U9ZnVuY3Rpb24odCxlKXtzd2l0Y2goZSl7Y2FzZSBkLlBMQVlJTkc6dGhpcy5fcnVuU2NoZWR1bGluZygpO2JyZWFrO2Nhc2UgZC5QQVVTRUQ6dGhpcy5fY2FuY2VsTmV4dFNjaGVkdWxpbmcoKX19LGkucHJvdG90eXBlLl9vbkh0bWw1TWVkaWFFdmVudD1mdW5jdGlvbih0KXtzd2l0Y2godGhpcy5fbG9nZ2VyLmxvZygnSFRNTDUgbWVkaWEgZXZlbnQgXCInK3QudHlwZSsnXCInKSx0aGlzLl93YWl0aW5nVG9QYXVzZT0hMSx0LnR5cGUpe2Nhc2VcInBsYXlpbmdcIjp0aGlzLl9wbGF5UmVxdWVzdGVkPSExLHRoaXMuX3RyaWdnZXJQb3NpdGlvbkV2ZW50KCksdGhpcy5fcmVzZXRQb3NpdGlvblRpbWVyKCEwKSx0aGlzLnVwZGF0ZVN0YXRlKGQuUExBWUlORyk7YnJlYWs7Y2FzZVwicGF1c2VcIjp0aGlzLl90cmlnZ2VyUG9zaXRpb25FdmVudCgpLHRoaXMuX3Jlc2V0UG9zaXRpb25UaW1lcighMSksdGhpcy51cGRhdGVTdGF0ZShkLlBBVVNFRCk7YnJlYWs7Y2FzZVwiZW5kZWRcIjp0aGlzLl9jdXJyZW50UG9zaXRpb249dGhpcy5fbG9hZGVkUG9zaXRpb249dGhpcy5fZHVyYXRpb24sdGhpcy5fdHJpZ2dlclBvc2l0aW9uRXZlbnQoKSx0aGlzLl9yZXNldFBvc2l0aW9uVGltZXIoITEpLHRoaXMudXBkYXRlU3RhdGUoZC5FTkRFRCk7YnJlYWs7Y2FzZVwid2FpdGluZ1wiOmlmKHRoaXMuZ2V0U3RhdGUoKT09PWQuU0VFS0lORylicmVhazt0aGlzLnVwZGF0ZVN0YXRlKGQuTE9BRElORyk7YnJlYWs7Y2FzZVwic2Vla2luZ1wiOnRoaXMuX3RyaWdnZXJQb3NpdGlvbkV2ZW50KCksdGhpcy51cGRhdGVTdGF0ZShkLlNFRUtJTkcpO2JyZWFrO2Nhc2VcInNlZWtlZFwiOnRoaXMuX2h0bWw1QXVkaW8ucGF1c2VkP3RoaXMudXBkYXRlU3RhdGUoZC5QQVVTRUQpOnRoaXMudXBkYXRlU3RhdGUoZC5QTEFZSU5HKSx0aGlzLl9vblBvc2l0aW9uQ2hhbmdlKCk7YnJlYWs7Y2FzZVwiZXJyb3JcIjp0aGlzLl9lcnJvcih0aGlzLl9odG1sNUF1ZGlvRXJyb3JDb2RlVG9FcnJvcklkKCksITApfX0saS5wcm90b3R5cGUuX3RvZ2dsZUV2ZW50TGlzdGVuZXJzPWZ1bmN0aW9uKHQpe2lmKHRoaXMuX2h0bWw1QXVkaW8pe3ZhciBlPXQ/XCJhZGRFdmVudExpc3RlbmVyXCI6XCJyZW1vdmVFdmVudExpc3RlbmVyXCI7aC5NZWRpYUFQSUV2ZW50cy5mb3JFYWNoKGZ1bmN0aW9uKHQpe3N3aXRjaCh0KXtjYXNlXCJsb2FkZWRkYXRhXCI6dGhpcy5faHRtbDVBdWRpb1tlXShcImxvYWRlZGRhdGFcIix0aGlzLl9vbkxvYWRlZERhdGEpO2JyZWFrO2Nhc2VcImxvYWRlZG1ldGFkYXRhXCI6dGhpcy5faHRtbDVBdWRpb1tlXShcImxvYWRlZG1ldGFkYXRhXCIsdGhpcy5fb25Mb2FkZWRNZXRhZGF0YSk7YnJlYWs7Y2FzZVwidGltZXVwZGF0ZVwiOmRlZmF1bHQ6dGhpcy5faHRtbDVBdWRpb1tlXSh0LHRoaXMuX29uSHRtbDVNZWRpYUV2ZW50KX19LHRoaXMpfX0saS5wcm90b3R5cGUuX2xvYWRJbml0aWFsUGxheWxpc3Q9ZnVuY3Rpb24oKXt0aGlzLnVwZGF0ZVN0YXRlKGQuTE9BRElORyksdGhpcy5faGxzVG9vbGtpdC51cGRhdGVQbGF5bGlzdCgpfSxpLnByb3RvdHlwZS5fcmVmcmVzaFBsYXlsaXN0PWZ1bmN0aW9uKCl7dGhpcy5oYXNTdHJlYW1VcmxQcm92aWRlcigpJiYodGhpcy5fcGxheWxpc3RSZWZyZXNoZkluUHJvZ3Jlc3N8fCh0aGlzLl9wbGF5bGlzdFJlZnJlc2hJblByb2dyZXNzPSEwLHRoaXMuX3N0cmVhbVVybFByb3ZpZGVyKCkuZG9uZShmdW5jdGlvbih0KXt0aGlzLl9sb2dnZXIubG9nKFwiZ290IG5ldyBNM3U4IFVSTDogXCIrdCksdGhpcy5fc3RyZWFtVXJsVGltZXNGYWlsZWQ9MCx0aGlzLl9obHNUb29sa2l0LnNldFVyaSh0KSx0aGlzLl9obHNUb29sa2l0LnVwZGF0ZVBsYXlsaXN0KCl9LmJpbmQodGhpcykpLmZhaWwoZnVuY3Rpb24oKXt0aGlzLl9sb2dnZXIubG9nKFwiZmFpbGVkIHRvIHJldHJpZXZlIHN0cmVhbSBVUkwgOihcIiksdGhpcy5fc3RyZWFtVXJsUmV0cnlUaW1lcj13aW5kb3cuc2V0VGltZW91dChmdW5jdGlvbigpe3RoaXMuX3BsYXlsaXN0UmVmcmVzaEluUHJvZ3Jlc3M9ITEsdGhpcy5fcmVmcmVzaFBsYXlsaXN0KCl9LmJpbmQodGhpcyksQSgrK3RoaXMuX3N0cmVhbVVybFRpbWVzRmFpbGVkKSl9LmJpbmQodGhpcykpKSl9LGkucHJvdG90eXBlLl9zZXREdXJhdGlvbj1mdW5jdGlvbih0KXt0aGlzLl9kdXJhdGlvbj10O3RyeXt0aGlzLl9tc2VUb29sa2l0LmR1cmF0aW9uKHRoaXMuX2R1cmF0aW9uKX1jYXRjaChlKXt0aGlzLl9vbk1lZGlhU291cmNlRXJyb3IoZSl9fSxpLnByb3RvdHlwZS5fcmVzZXRQb3NpdGlvblRpbWVyPWZ1bmN0aW9uKHQpe3dpbmRvdy5jbGVhckludGVydmFsKHRoaXMuX3Bvc2l0aW9uVXBkYXRlVGltZXIpLHQmJih0aGlzLl9wb3NpdGlvblVwZGF0ZVRpbWVyPXdpbmRvdy5zZXRJbnRlcnZhbCh0aGlzLl9vblBvc2l0aW9uQ2hhbmdlLHRoaXMuZ2V0U2V0dGluZ3MoKS51cGRhdGVJbnRlcnZhbCkpfSxpLnByb3RvdHlwZS5fdHJpZ2dlclBvc2l0aW9uRXZlbnQ9ZnVuY3Rpb24oKXt0aGlzLnRyaWdnZXIocy5QT1NJVElPTl9DSEFOR0UsdGhpcy5fY3VycmVudFBvc2l0aW9uLHRoaXMuX2xvYWRlZFBvc2l0aW9uLHRoaXMuX2R1cmF0aW9uLHRoaXMpfSxpLnByb3RvdHlwZS5faW5pdFRyYW5zbXV4ZXJPbmNlPWZ1bmN0aW9uKHQsZSl7aWYoIXRoaXMuX3RyYW5zbXV4ZXIpe3ZhciBuPXRoaXMuX21pbWVUeXBlIT09dC5taW1lVHlwZT9mLkNvbmZpZ3MuTVAzX1RPX0ZNUDQ6Zi5Db25maWdzLlZPSUQ7dGhpcy5fdHJhbnNtdXhlcj1uZXcgZihuKSx0aGlzLl90cmFuc211eGVyLm9uKFwic2VnbWVudFwiLGZ1bmN0aW9uKHQpe3RoaXMuX2xvZ2dlci5sb2coXCJ0cmFuc211eGVkIGRhdGEgcmVhZHksIFwiK3QuZGF0YS5sZW5ndGgrXCIgYnl0ZXMgZm9yIHNlZ21lbnQgXCIrdC5pbmRleCksZSh0KX0uYmluZCh0aGlzKSl9fSxpLnByb3RvdHlwZS5fdHJhbnNtdXhTZWdtZW50PWZ1bmN0aW9uKHQsZSl7dGhpcy5fbG9nZ2VyLmxvZyhcInRyYW5zbXV4aW5nIHNlZ21lbnQgXCIrdC5pbmRleCksdGhpcy5faW5pdFRyYW5zbXV4ZXJPbmNlKHQsZSksdGhpcy5fdHJhbnNtdXhlci5wcm9jZXNzKHQpfSxpLnByb3RvdHlwZS5fYXBwZW5kU2VnbWVudHM9ZnVuY3Rpb24oKXt2YXIgdD0hMDt0aGlzLl9zZWdtZW50c0Rvd25sb2FkaW5nLnNsaWNlKCkuZm9yRWFjaChmdW5jdGlvbihlKXtlLmlzQ29tcGxldGUoKSYmdD8odGhpcy5fZGVjcnlwdFNlZ21lbnQoZSksdGhpcy5fdHJhbnNtdXhTZWdtZW50KGUsZnVuY3Rpb24odCl7dGhpcy5fbXNlVG9vbGtpdC5hcHBlbmQodCl9LmJpbmQodGhpcykpLHRoaXMuX3NlZ21lbnRzRG93bmxvYWRpbmcuc2hpZnQoKSk6dD0hMX0sdGhpcyl9LGkucHJvdG90eXBlLl9jYW5jZWxOZXh0U2NoZWR1bGluZz1mdW5jdGlvbigpe3RoaXMuX2xvZ2dlci5sb2coXCJjYW5jZWxsaW5nIG5leHQgc2NoZWR1bGluZ1wiKSx3aW5kb3cuY2xlYXJUaW1lb3V0KHRoaXMuX25leHRTY2hlZHVsaW5nVGltZW91dCksdGhpcy5fbmV4dFNjaGVkdWxpbmdUaW1lb3V0PW51bGx9LGkucHJvdG90eXBlLl9nZXRCdWZmZXJVbnRpbFRpbWU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fY3VycmVudFBvc2l0aW9uK3RoaXMuX21heEJ1ZmZlckxlbmd0aH0saS5wcm90b3R5cGUuX2dldEN1cnJlbnRTZWdtZW50PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3NjaGVkdWxpbmdTZWdtZW50SW5kZXg+MD90aGlzLl9obHNUb29sa2l0LmdldFNlZ21lbnQodGhpcy5fc2NoZWR1bGluZ1NlZ21lbnRJbmRleCk6dGhpcy5faGxzVG9vbGtpdC5nZXRTZWdtZW50Rm9yVGltZSh0aGlzLl9jdXJyZW50UG9zaXRpb24pfSxpLnByb3RvdHlwZS5fcnVuU2NoZWR1bGluZz1mdW5jdGlvbigpe2Z1bmN0aW9uIHQoKXt2YXIgZT0hMSxuPXRoaXMuX2dldEJ1ZmZlclVudGlsVGltZSgpLGk9dGhpcy5fZ2V0Q3VycmVudFNlZ21lbnQoKSxyPWk/aS5kdXJhdGlvbjpNYXRoLkluZmluaXR5O2lmKHRoaXMuX2xvZ2dlci5sb2coXCJzY2hlZHVsaW5nIG5leHQgcmVxdWVzdHMsIGN1cnJlbnQgYnVmZmVyLXVudGlsIHRpbWU6IFwiK24rXCIgbXNcIiksIWkpcmV0dXJuIHZvaWQgdGhpcy5fbG9nZ2VyLmxvZyhcIm5vIHNlZ21lbnQgdG8gc2NoZWR1bGUsIGNsb3NpbmcgbG9vcFwiKTtmb3IodGhpcy5fbG9nZ2VyLmxvZyhcImN1cnJlbnQgc2VnbWVudCBpbmRleDogXCIraS5pbmRleCk7aS5lbmRQb3NpdGlvbjw9bjspe2lmKHRoaXMuX2xvZ2dlci5sb2coXCJzY2hlZHVsaW5nIGxvb3AgYXQgXCIrdGhpcy5fY3VycmVudFBvc2l0aW9uK1wiIG1zLCBjdXJyZW50IHNlZ21lbnQgXCIraS5pbmRleCksdGhpcy5fcmVxdWVzdFNlZ21lbnQoaSksaS5pc0xhc3Qpe2U9ITAsdGhpcy5fbG9nZ2VyLmxvZyhcImVuZCBvZiBwbGF5bGlzdCByZWFjaGVkXCIpO2JyZWFrfXRoaXMuX3NjaGVkdWxpbmdTZWdtZW50SW5kZXg9aS5pbmRleCsxLGk9dGhpcy5faGxzVG9vbGtpdC5nZXRTZWdtZW50KHRoaXMuX3NjaGVkdWxpbmdTZWdtZW50SW5kZXgpfXRoaXMuX2lzSW5PbmVPZlN0YXRlcyhkLkRFQUQsZC5QQVVTRUQpfHxlPyh0aGlzLl9sb2dnZXIubG9nKFwibm90IHJlLXNjaGVkdWxpbmdcIiksdGhpcy5fbmV4dFNjaGVkdWxpbmdUaW1lb3V0PW51bGwpOih0aGlzLl9sb2dnZXIubG9nKFwidGltaW5nIG5leHQgY2hlY2sgZm9yIG1vcmUgZGF0YSBpbiBcIityK1wiIG1zXCIpLHRoaXMuX25leHRTY2hlZHVsaW5nVGltZW91dD13aW5kb3cuc2V0VGltZW91dCh0LmJpbmQodGhpcykscikpfXRoaXMuX25leHRTY2hlZHVsaW5nVGltZW91dHx8dC5jYWxsKHRoaXMpfSxpLnByb3RvdHlwZS5fY2FuY2VsQWxsSW5GbGlnaHRSZXF1ZXN0cz1mdW5jdGlvbigpe3RoaXMuX3NjaGVkdWxpbmdTZWdtZW50SW5kZXg9LTEsdGhpcy5fc2VnbWVudHNEb3dubG9hZGluZy5mb3JFYWNoKGZ1bmN0aW9uKHQpe3QuaXNDb21wbGV0ZSgpfHx0LmNhbmNlbCgpfSksdGhpcy5fc2VnbWVudHNEb3dubG9hZGluZz1bXX0saS5wcm90b3R5cGUuX3JlcXVlc3RTZWdtZW50PWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLl9zZWdtZW50c0Rvd25sb2FkaW5nLnB1c2godCksdC5pc0NvbXBsZXRlKCk/KHRoaXMuX2xvZ2dlci5sb2coXCJyZXF1ZXN0ZWQgZGF0YSBpcyBhbHJlYWR5IGxvYWRlZCBmcm9tIHNlZ21lbnQgXCIrdC5pbmRleCksdm9pZCB0aGlzLl9vblNlZ21lbnRMb2FkZWQodCkpOnQuaGFzQmVlblJlcXVlc3RlZCgpfHx0Lmhhc0ZhaWxlZCgpP3ZvaWQgdGhpcy5fbG9nZ2VyLmxvZyhcInNlZ21lbnQgYWxyZWFkeSBpbiBmbGlnaHQgb3IgZmFpbGVkICh3aWxsIHJldHJ5KTogXCIrdC50aW1lc0ZhaWxlZCtcIiB0aW1lc1wiKTp2b2lkIHRoaXMuX2hsc1Rvb2xraXQubG9hZFNlZ21lbnQodCl9LGkucHJvdG90eXBlLl9kZWNyeXB0U2VnbWVudD1mdW5jdGlvbih0KXt0aGlzLl9obHNUb29sa2l0LmlzQUVTMTI4RW5jcnlwdGVkKCkmJnRoaXMuX2hsc1Rvb2xraXQuZGVjcnlwdFNlZ21lbnRBRVMxMjgodCl9LGkucHJvdG90eXBlLl9pbnNwZWN0RW5jcnlwdGlvbkRhdGE9ZnVuY3Rpb24oKXt0aGlzLl9obHNUb29sa2l0LmlzQUVTMTI4RW5jcnlwdGVkKCkmJih0aGlzLl9sb2dnZXIubG9nKFwiZ290IGtleSBvZiBieXRlIGxlbmd0aCBcIit0aGlzLl9obHNUb29sa2l0LmdldEVuY3J5cHRpb25LZXkoKS5ieXRlTGVuZ3RoKSx0aGlzLl9obHNUb29sa2l0LmdldEVuY3J5cHRpb25JdigpP3RoaXMuX2xvZ2dlci5sb2coXCJnb3QgSVYgb2YgYnl0ZSBsZW5ndGggXCIrdGhpcy5faGxzVG9vbGtpdC5nZXRFbmNyeXB0aW9uSXYoKS5ieXRlTGVuZ3RoKTp0aGlzLl9sb2dnZXIubG9nKFwibm8gSVYgZm91bmQgaW4gaGVhZGVyLCB3aWxsIHVzZSBwZXItc2VnbWVudC1pbmRleCBJVlwiKSl9LGkucHJvdG90eXBlLl9odG1sNUF1ZGlvRXJyb3JDb2RlVG9FcnJvcklkPWZ1bmN0aW9uKCl7cmV0dXJuezE6YS5IVE1MNV9BVURJT19BQk9SVEVELDI6YS5IVE1MNV9BVURJT19ORVRXT1JLLDM6YS5IVE1MNV9BVURJT19ERUNPREUsNDphLkhUTUw1X0FVRElPX1NSQ19OT1RfU1VQUE9SVEVEfVt0aGlzLl9odG1sNUF1ZGlvLmVycm9yLmNvZGVdfSxpLnByb3RvdHlwZS5fZXJyb3I9ZnVuY3Rpb24odCxlKXt0aGlzLl9lcnJvcklEPXQsdGhpcy5fZXJyb3JNZXNzYWdlPXRoaXMuX2dldEVycm9yTWVzc2FnZSh0aGlzLl9lcnJvcklEKSxlJiZ0aGlzLl9odG1sNUF1ZGlvLmVycm9yJiYodGhpcy5fZXJyb3JNZXNzYWdlKz1cIiAobmF0aXZlIG1lc3NhZ2U6IFwiK3RoaXMuX2h0bWw1QXVkaW8uZXJyb3IubWVzc2FnZStcIilcIiksdGhpcy5fbG9nZ2VyLmxvZyh0aGlzLl9lcnJvcklEK1wiIFwiK3RoaXMuX2Vycm9yTWVzc2FnZSksdGhpcy51cGRhdGVTdGF0ZShkLkVSUk9SKSx0aGlzLl90b2dnbGVFdmVudExpc3RlbmVycyghMSl9LGkucHJvdG90eXBlLl9nZXRFcnJvck1lc3NhZ2U9ZnVuY3Rpb24odCl7dmFyIGU9e307cmV0dXJuIGVbYS5NU0VfTk9UX1NVUFBPUlRFRF09XCJUaGUgYnJvd3NlciBkb2VzIG5vdCBzdXBwb3J0IE1lZGlhU291cmNlIEFQSVwiLGVbYS5NU0VfQkFEX09CSkVDVF9TVEFURV09XCJNZWRpYVNvdXJjZSBBUEkgaGFzIHRocm93biBhbiBleGNlcHRpb25cIixlW3RdP1wiRXJyb3I6IFwiK3QrXCIgKFwiK2VbdF0rXCIpXCI6XCJFcnJvcjogXCIrdH0saS5wcm90b3R5cGUuc2V0Vm9sdW1lPWZ1bmN0aW9uKHQpe3RoaXMuX2h0bWw1QXVkaW8mJih0aGlzLl9odG1sNUF1ZGlvLnZvbHVtZT10KX0saS5wcm90b3R5cGUuZ2V0Vm9sdW1lPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2h0bWw1QXVkaW8/dGhpcy5faHRtbDVBdWRpby52b2x1bWU6MX0saS5wcm90b3R5cGUuc2V0TXV0ZT1mdW5jdGlvbih0KXt0aGlzLl9odG1sNUF1ZGlvJiYodGhpcy5faHRtbDVBdWRpby5tdXRlZD10KX0saS5wcm90b3R5cGUuZ2V0TXV0ZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9odG1sNUF1ZGlvP3RoaXMuX2h0bWw1QXVkaW8ubXV0ZWQ6ITF9LGkucHJvdG90eXBlLmdldEVycm9ySUQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZXJyb3JJRH0saS5wcm90b3R5cGUucGxheT1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5faXNJbk9uZU9mU3RhdGVzKGQuRVJST1IsZC5ERUFEKT92b2lkIHRoaXMuX2xvZ2dlci5sb2coXCJwbGF5IGNhbGxlZCBidXQgc3RhdGUgaXMgRVJST1Igb3IgREVBRFwiKTp0aGlzLl9pc0luT25lT2ZTdGF0ZXMoZC5JRExFLGQuSU5JVElBTElaRSk/KHQ9dHx8MCx0aGlzLl9sb2dnZXIubG9nKFwicGxheSBmcm9tIFwiK3QpLHRoaXMuX3BsYXlSZXF1ZXN0ZWQ9ITAsdGhpcy5zZWVrKHQpLHRoaXMuZ2V0U3RhdGUoKT09PWQuSU5JVElBTElaRT92b2lkKHRoaXMuX2xvYWRPbkluaXQ9ITApOnZvaWQgdGhpcy5fbG9hZEluaXRpYWxQbGF5bGlzdCgpKTp2b2lkIHRoaXMucmVzdW1lKCl9LGkucHJvdG90eXBlLnBhdXNlPWZ1bmN0aW9uKCl7dGhpcy5faHRtbDVBdWRpbyYmKHRoaXMuX3BsYXlSZXF1ZXN0ZWQ9ITEsdGhpcy5faHRtbDVBdWRpby5wYXVzZSgpKX0saS5wcm90b3R5cGUuc2Vlaz1mdW5jdGlvbih0KXtpZighdGhpcy5faXNJbk9uZU9mU3RhdGVzKGQuRVJST1IsZC5ERUFEKSl7aWYoIXRoaXMuX2lzUGxheWxpc3RMb2FkZWQpcmV0dXJuIHZvaWQgdGhpcy5vbmNlKHMuTUVUQURBVEEsZnVuY3Rpb24oKXt0aGlzLnNlZWsodCl9LmJpbmQodGhpcykpO2lmKHQ+dGhpcy5fZHVyYXRpb24pcmV0dXJuIHZvaWQgdGhpcy5fbG9nZ2VyLmxvZyhcImNhbiBub3Qgc2VlayB0byBwb3NpdGlvbiBvdmVyIGR1cmF0aW9uXCIpO3RoaXMuX2xvZ2dlci5sb2coXCJzZWVrIHRvIFwiK3QrXCIgbXNcIiksdGhpcy51cGRhdGVTdGF0ZShkLlNFRUtJTkcpLHRoaXMuX2xhc3RNZWRpYUNsb2NrQ2hlY2s9bnVsbCx0aGlzLl9jdXJyZW50UG9zaXRpb249dDt0cnl7dGhpcy5faHRtbDVBdWRpby5jdXJyZW50VGltZT10LzFlM31jYXRjaChlKXt0aGlzLl9sb2dnZXIubG9nKFwiZXJyb3Igc2Vla2luZzogXCIrZS5tZXNzYWdlKX10aGlzLl9jYW5jZWxBbGxJbkZsaWdodFJlcXVlc3RzKCksdGhpcy5fY2FuY2VsTmV4dFNjaGVkdWxpbmcoKSx0aGlzLl9ydW5TY2hlZHVsaW5nKCl9fSxpLnByb3RvdHlwZS5yZXN1bWU9ZnVuY3Rpb24oKXt0aGlzLl9odG1sNUF1ZGlvJiYodGhpcy5fbG9nZ2VyLmxvZyhcInJlc3VtZSBmcm9tIFwiK3RoaXMuX2N1cnJlbnRQb3NpdGlvbiksdGhpcy5faHRtbDVBdWRpby5wbGF5KDFlMyp0aGlzLl9jdXJyZW50UG9zaXRpb24pKX0saS5wcm90b3R5cGUua2lsbD1mdW5jdGlvbigpe3RoaXMuZ2V0U3RhdGUoKSE9PWQuREVBRCYmKHRoaXMuX2xvZ2dlci5sb2coXCJraWxsXCIpLHRoaXMuX3Jlc2V0UG9zaXRpb25UaW1lcighMSksdGhpcy5fY2FuY2VsTmV4dFNjaGVkdWxpbmcoKSx0aGlzLl9jYW5jZWxBbGxJbkZsaWdodFJlcXVlc3RzKCksd2luZG93LmNsZWFyVGltZW91dCh0aGlzLl9wbGF5bGlzdFJldHJ5VGltZXIpLHdpbmRvdy5jbGVhclRpbWVvdXQodGhpcy5fc3RyZWFtVXJsUmV0cnlUaW1lciksdGhpcy5fcGxheVJlcXVlc3RlZD0hMSx0aGlzLl90b2dnbGVFdmVudExpc3RlbmVycyghMSksdGhpcy5faHRtbDVBdWRpby5wYXVzZSgpLHRoaXMudXBkYXRlU3RhdGUoZC5ERUFEKSl9LGkucHJvdG90eXBlLmdldEVycm9yTWVzc2FnZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9lcnJvck1lc3NhZ2V9LGkucHJvdG90eXBlLmhhc1N0cmVhbVVybFByb3ZpZGVyPWZ1bmN0aW9uKCl7cmV0dXJuISF0aGlzLl9zdHJlYW1VcmxQcm92aWRlcn19LGZ1bmN0aW9uKHQsZSxuKXt2YXIgaSxyPW4oMSksbz1uKDUyKSxzPW4oNTgpLGE9bnVsbCx1PW4oMzYpLGg9e05FVzpcIm5ld1wiLFJFUVVFU1RFRDpcInJlcXVlc3RlZFwiLENPTVBMRVRFOlwiY29tcGxldGVcIixUSU1FT1VUOlwidGltZW91dFwiLEZPUkJJRERFTjpcImZvcmJpZGRlblwiLE5PVF9GT1VORDpcIm5vdC1mb3VuZFwiLFNFUlZFUl9FUlJPUjpcInNlcnZlci1lcnJvclwiLEZBSUxFRDpcImZhaWxlZFwifSxjPXtGSVJTVDpcIiNFWFRNM1VcIixQTEFZTElTVDpcIiNFWFQtWC1TVFJFQU0tSU5GOlwiLFNFR01FTlQ6XCIjRVhUSU5GOlwiLEVORF9UQUc6XCIjRVhULVgtRU5ETElTVFwiLEVOQ1JZUFRJT046XCIjRVhULVgtS0VZOlwifTt0LmV4cG9ydHM9aT1mdW5jdGlvbih0LGUpe3RoaXMuX2xvZ2dlcj10LHRoaXMuX2R1cmF0aW9uPTAsdGhpcy5zZXRVcmkoZSl9LGkuRXZlbnRzPXtQTEFZTElTVF9MT0FERUQ6XCJwbGF5bGlzdC1sb2FkZWRcIixQTEFZTElTVF9QQVJTRV9FUlJPUjpcInBsYXlsaXN0LXBhcnNlLWVycm9yXCIsUExBWUxJU1RfRkFJTEVEOlwicGxheWxpc3QtZmFpbGVkXCIsU0VHTUVOVF9MT0FERUQ6XCJzZWdtZW50LWxvYWRlZFwiLFNFR01FTlRfUFJPR1JFU1M6XCJzZWdtZW50LXByb2dyZXNzXCIsU0VHTUVOVF9GQUlMRUQ6XCJzZWdtZW50LWZhaWxlZFwiLFNFR01FTlRfQ0FOQ0VMRUQ6XCJzZWdtZW50LWNhbmNlbGVkXCJ9LGkuU3RhdHVzPWgscihpLnByb3RvdHlwZSx1KSxpLlNlZ21lbnQ9ZnVuY3Rpb24odCxlLG4saSxvKXtyKHRoaXMse3Rvb2xraXQ6dCx1cmk6ZSxzdGFydFBvc2l0aW9uOm4sZW5kUG9zaXRpb246bitpLGR1cmF0aW9uOmksaW5kZXg6byxkYXRhOm51bGwsc3RhdHVzOmguTkVXLGlzTGFzdDohMSx0aW1lc0ZhaWxlZDowLGxvYWRlZDowLHRvdGFsOi0xLGFib3J0ZWQ6ITEseGhyOm51bGwsbWltZVR5cGU6XCJhdWRpby9tcGVnXCJ9KSx0aGlzLl9sb2dnZXI9dC5fbG9nZ2VyfSxpLlNlZ21lbnQucHJvdG90eXBlLmNvbnRhaW5zVGltZT1mdW5jdGlvbih0KXtyZXR1cm4gdD49dGhpcy5zdGFydFBvc2l0aW9uJiZ0PD10aGlzLmVuZFBvc2l0aW9ufSxpLlNlZ21lbnQucHJvdG90eXBlLmlzQ29tcGxldGU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zdGF0dXM9PT1oLkNPTVBMRVRFfSxpLlNlZ21lbnQucHJvdG90eXBlLmhhc0ZhaWxlZD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnN0YXR1cz09PWguVElNRU9VVHx8dGhpcy5zdGF0dXM9PT1oLkZPUkJJRERFTnx8dGhpcy5zdGF0dXM9PT1oLk5PVF9GT1VORHx8dGhpcy5zdGF0dXM9PT1oLlNFUlZFUl9FUlJPUnx8dGhpcy5zdGF0dXM9PT1oLkZBSUxFRH0saS5TZWdtZW50LnByb3RvdHlwZS5pc05ldz1mdW5jdGlvbigpe3JldHVybiB0aGlzLnN0YXR1cz09PWguTkVXfSxpLlNlZ21lbnQucHJvdG90eXBlLmhhc0JlZW5SZXF1ZXN0ZWQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zdGF0dXM9PT1oLlJFUVVFU1RFRH0saS5TZWdtZW50LnByb3RvdHlwZS5zY2hlZHVsZVJldHJ5PWZ1bmN0aW9uKHQsZSxuKXt2YXIgaT10aGlzO3RoaXMuX3JldHJ5VGltZXI9d2luZG93LnNldFRpbWVvdXQoZnVuY3Rpb24oKXtlLmNhbGwobixpKX0sdCl9LGkuU2VnbWVudC5wcm90b3R5cGUuY2FuY2VsPWZ1bmN0aW9uKCl7dGhpcy5fbG9nZ2VyLmxvZyhcInNlZ21lbnQgY2FuY2VsbGVkLCBjbGVhcmluZyB0aW1lb3V0OiBcIit0aGlzLmluZGV4KSx3aW5kb3cuY2xlYXJUaW1lb3V0KHRoaXMuX3JldHJ5VGltZXIpLHRoaXMueGhyJiYodGhpcy5fbG9nZ2VyLmxvZyhcIndpbGwgYWJvcnQgJiByZXNldCBzZWdtZW50OiBcIit0aGlzLmluZGV4KSx0aGlzLnN0YXR1cz1oLk5FVyx0aGlzLmFib3J0ZWQ9ITAsdGhpcy5kYXRhPW51bGwsdGhpcy50aW1lc0ZhaWxlZD0wLHRoaXMueGhyLmFib3J0KCksdGhpcy54aHI9bnVsbCx0aGlzLnRvb2xraXQudHJpZ2dlcihpLkV2ZW50cy5TRUdNRU5UX0NBTkNFTEVELHRoaXMpKTtcbn0saS5wcm90b3R5cGUuc2V0VXJpPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuX3VyaT10O2UuaW5kZXhPZihcIj9cIik+LTEmJihlPWUuc3Vic3RyKDAsZS5pbmRleE9mKFwiP1wiKSkpLHRoaXMuX2Jhc2VVUkk9ZS5zdWJzdHIoMCxlLmxhc3RJbmRleE9mKFwiL1wiKSsxKX0saS5wcm90b3R5cGUudXBkYXRlUGxheWxpc3Q9ZnVuY3Rpb24oKXt2YXIgdD0hMSxlPW5ldyBYTUxIdHRwUmVxdWVzdDtlLm9wZW4oXCJHRVRcIix0aGlzLl91cmksITApLGUucmVzcG9uc2VUeXBlPVwidGV4dFwiLHRoaXMuX2xvZ2dlci5sb2coXCJkb3dubG9hZGluZyBwbGF5bGlzdFwiKTt2YXIgbj1mdW5jdGlvbihuKXt0fHwodD0hMCx0aGlzLnRyaWdnZXIoaS5FdmVudHMuUExBWUxJU1RfRkFJTEVELGUuc3RhdHVzKSl9LmJpbmQodGhpcyk7ZS5vbmxvYWQ9ZnVuY3Rpb24odCl7cmV0dXJuIDIwMCE9PWUuc3RhdHVzP3ZvaWQgbigpOih0aGlzLl9zZWdtZW50cz1bXSx0aGlzLl9kdXJhdGlvbj0wLHRoaXMuX3BhcnNlUGxheWxpc3QoZS5yZXNwb25zZVRleHQpPyh0aGlzLmdldExhc3RTZWdtZW50KCkuaXNMYXN0PSEwLHRoaXMuX2xvZ2dlci5sb2coXCJwbGF5bGlzdCBkb3dubG9hZCBjb21wbGV0ZVwiKSx2b2lkIHRoaXMuX3JldHJpZXZlRW5jcnlwdGlvbktleShmdW5jdGlvbigpe3RoaXMudHJpZ2dlcihpLkV2ZW50cy5QTEFZTElTVF9MT0FERUQpfSkpOih0aGlzLl9sb2dnZXIubG9nKFwiZXJyb3IgcGFyc2luZyBwbGF5bGlzdFwiKSx2b2lkIHRoaXMudHJpZ2dlcihpLkV2ZW50cy5QTEFZTElTVF9QQVJTRV9FUlJPUikpKX0uYmluZCh0aGlzKSxlLm9uZXJyb3I9ZnVuY3Rpb24odCl7bih0KX0uYmluZCh0aGlzKSxlLnNlbmQoKX0saS5wcm90b3R5cGUuX3BhcnNlUGxheWxpc3Q9ZnVuY3Rpb24odCl7Zm9yKHZhciBlLG4scixvPXQuc3BsaXQoXCJcXG5cIikscz0hMSxhPTAsdT0wO2E8by5sZW5ndGg7KWU9b1thKytdLDA9PT1lLmluZGV4T2YoYy5TRUdNRU5UKT8ocj0xZTMqTnVtYmVyKGUuc3Vic3RyKDgsZS5pbmRleE9mKFwiLFwiKS04KSksbj10aGlzLl9jcmVhdGVTZWdtZW50VVJMKG9bYV0pLHRoaXMuX2FkZFNlZ21lbnQobmV3IGkuU2VnbWVudCh0aGlzLG4sdGhpcy5fZHVyYXRpb24scix1KyspKSxhKyspOjA9PT1lLmluZGV4T2YoYy5FTkNSWVBUSU9OKT90aGlzLl9wYXJzZVBsYXlsaXN0RW5jcnlwdGlvbkhlYWRlcihlKTowPT09ZS5pbmRleE9mKGMuRU5EX1RBRykmJihzPSEwKTtyZXR1cm4hKDA9PT10aGlzLmdldE51bVNlZ21lbnRzKCl8fCFzKX0saS5wcm90b3R5cGUuX2FkZFNlZ21lbnQ9ZnVuY3Rpb24odCl7dGhpcy5fc2VnbWVudHMucHVzaCh0KSx0aGlzLl9kdXJhdGlvbis9dC5kdXJhdGlvbn0saS5wcm90b3R5cGUuX3BhcnNlUGxheWxpc3RFbmNyeXB0aW9uSGVhZGVyPWZ1bmN0aW9uKHQpe3ZhciBlLG4saSxyPXQuc3Vic3RyKGMuRU5DUllQVElPTi5sZW5ndGgpLnNwbGl0KFwiLFwiKTtpZihzKHIsZnVuY3Rpb24odCl7dC5pbmRleE9mKFwiTUVUSE9EXCIpPj0wP249dC5zcGxpdChcIj1cIilbMV06dC5pbmRleE9mKFwiVVJJXCIpPj0wP2U9dC5zcGxpdChcIj1cIilbMV06dC5pbmRleE9mKFwiSVZcIik+PTAmJihpPXQuc3BsaXQoXCI9XCIpWzFdKX0pLCEobiYmZSYmbi5sZW5ndGgmJmUubGVuZ3RoKSl0aHJvdyBuZXcgRXJyb3IoXCJGYWlsZWQgdG8gcGFyc2UgTTNVOCBlbmNyeXB0aW9uIGhlYWRlclwiKTtuPW4udHJpbSgpLGU9ZS50cmltKCkucmVwbGFjZSgvXCIvZyxcIlwiKSx0aGlzLl9lbmNyeXB0aW9uTWV0aG9kPW4sdGhpcy5fZW5jcnlwdGlvbktleVVyaT1lLGkmJmkubGVuZ3RoPyh0aGlzLl9lbmNyeXB0aW9uSXZIZXhTdHJpbmc9aS50cmltKCksdGhpcy5fcGFyc2VFbmNyeXB0aW9uSXZIZXhTdHJpbmcoKSk6dGhpcy5fZW5jcnlwdGlvbkl2PW51bGx9LGkucHJvdG90eXBlLl9wYXJzZUVuY3J5cHRpb25JdkhleFN0cmluZz1mdW5jdGlvbigpe3ZhciB0LGU9dGhpcy5fZW5jcnlwdGlvbkl2SGV4U3RyaW5nLnJlcGxhY2UoXCIweFwiLFwiXCIpLG49bmV3IFVpbnQxNkFycmF5KDgpLGk9MDtpZihlLmxlbmd0aCU0IT09MCl0aHJvdyBuZXcgRXJyb3IoXCJGYWlsZWQgdG8gcGFyc2UgTTNVOCBlbmNyeXB0aW9uIElWIChsZW5ndGggaXMgbm90IG11bHRpcGxlIG9mIDQpXCIpO2Zvcig7aTxlLmxlbmd0aDtpKz00KXtpZih0PXBhcnNlSW50KGUuc3Vic3RyKGksNCksMTYpLGlzTmFOKHQpKXRocm93IG5ldyBFcnJvcihcIkZhaWxlZCB0byBwYXJzZSBoZXggbnVtYmVyIGluIElWIHN0cmluZ1wiKTtuW2kvNF09dH10aGlzLl9lbmNyeXB0aW9uSXY9bn0saS5wcm90b3R5cGUuX2VuY3J5cHRpb25JdkZvclNlZ21lbnQ9ZnVuY3Rpb24odCl7dmFyIGU9bmV3IERhdGFWaWV3KG5ldyBBcnJheUJ1ZmZlcigxNikpO3JldHVybiBlLnNldFVpbnQzMigwLHQuaW5kZXgsITApLGUuYnVmZmVyfSxpLnByb3RvdHlwZS5fcmV0cmlldmVFbmNyeXB0aW9uS2V5PWZ1bmN0aW9uKHQpe2lmKHQpe2lmKCF0aGlzLl9lbmNyeXB0aW9uS2V5VXJpKXJldHVybiB2b2lkIHQuY2FsbCh0aGlzKTt2YXIgZT10aGlzLl9lbmNyeXB0aW9uS2V5VXJpLG49bmV3IFhNTEh0dHBSZXF1ZXN0O24ub3BlbihcIkdFVFwiLGUsITApLG4ucmVzcG9uc2VUeXBlPVwiYXJyYXlidWZmZXJcIixuLm9ubG9hZD1vKGZ1bmN0aW9uKGkpezIwMD09PW4uc3RhdHVzP3RoaXMuX2VuY3J5cHRpb25LZXk9bmV3IFVpbnQ4QXJyYXkobi5yZXNwb25zZSk6dGhpcy5fbG9nZ2VyLmxvZyhcIkZhaWxlZCB0byByZXRyaWV2ZSBlbmNyeXB0aW9uIGtleSBmcm9tIFwiK2UrXCIsIHJldHVybmVkIHN0YXR1cyBcIituLnN0YXR1cyksdC5jYWxsKHRoaXMpfSx0aGlzKSxuLnNlbmQoKSx0aGlzLl9sb2dnZXIubG9nKFwiRG93bmxvYWRpbmcgZW5jcnlwdGlvbiBrZXkgZnJvbSBcIitlKX19LGkucHJvdG90eXBlLl9yZW1vdmVFbmNyeXB0aW9uUGFkZGluZ0J5dGVzPWZ1bmN0aW9uKHQpe3ZhciBlPXQuZGF0YVt0LmRhdGEuYnl0ZUxlbmd0aC0xXTtlPyh0aGlzLl9sb2dnZXIubG9nKFwiRGV0ZWN0ZWQgUEtDUzcgcGFkZGluZyBsZW5ndGggb2YgXCIrZStcIiBieXRlcywgc2xpY2luZyBzZWdtZW50LlwiKSx0LmRhdGE9dC5kYXRhLnN1YmFycmF5KDAsdC5kYXRhLmJ5dGVMZW5ndGgtZSkpOnRoaXMuX2xvZ2dlci5sb2coXCJObyBwYWRkaW5nIGRldGVjdGVkIChsYXN0IGJ5dGUgaXMgemVybylcIil9LGkucHJvdG90eXBlLmRlY3J5cHRTZWdtZW50QUVTMTI4PWZ1bmN0aW9uKHQpe2lmKHRoaXMuX2xvZ2dlci5sb2coXCJEZWNyeXB0aW5nIEFFUy0xMjggY3lwaGVyZWQgc2VnbWVudCAuLi5cIiksIWEpdGhyb3cgbmV3IEVycm9yKFwiQUVTIGRlY3J5cHRpb24gbm90IGJ1aWx0LWluXCIpO3ZhciBlPWEuY2lwaGVyLmNyZWF0ZURlY2lwaGVyKFwiQUVTLUNCQ1wiLGEudXRpbC5jcmVhdGVCdWZmZXIodGhpcy5fZW5jcnlwdGlvbktleSkpLG49MCxpPXQuZGF0YS5ieXRlTGVuZ3RoLHI9dGhpcy5fZW5jcnlwdGlvbkl2fHx0aGlzLl9lbmNyeXB0aW9uSXZGb3JTZWdtZW50KHQpO2Zvcih0aGlzLl9sb2dnZXIubG9nKFwiVXNpbmcgSVYgLT5cIiksZS5zdGFydCh7aXY6YS51dGlsLmNyZWF0ZUJ1ZmZlcihyKX0pLGUudXBkYXRlKGEudXRpbC5jcmVhdGVCdWZmZXIodC5kYXRhKSksZS5maW5pc2goKSx0LmRhdGE9bmV3IFVpbnQ4QXJyYXkoaSk7aT5uO24rKyl0LmRhdGFbbl09ZS5vdXRwdXQuZ2V0Qnl0ZSgpO3RoaXMuX3JlbW92ZUVuY3J5cHRpb25QYWRkaW5nQnl0ZXModCl9LGkucHJvdG90eXBlLmlzQUVTMTI4RW5jcnlwdGVkPWZ1bmN0aW9uKCl7cmV0dXJuXCJBRVMtMTI4XCI9PT10aGlzLl9lbmNyeXB0aW9uTWV0aG9kfSxpLnByb3RvdHlwZS5nZXRFbmNyeXB0aW9uS2V5VXJpPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2VuY3J5cHRpb25LZXlVcml9LGkucHJvdG90eXBlLmdldEVuY3J5cHRpb25Jdj1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9lbmNyeXB0aW9uSXZ9LGkucHJvdG90eXBlLmdldEVuY3J5cHRpb25LZXk9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZW5jcnlwdGlvbktleX0saS5wcm90b3R5cGUuX2NyZWF0ZVNlZ21lbnRVUkw9ZnVuY3Rpb24odCl7cmV0dXJuXCJodHRwOi8vXCI9PT10LnN1YnN0cigwLDcpfHxcImh0dHBzOi8vXCI9PT10LnN1YnN0cigwLDgpfHxcIi9cIj09PXQuc3Vic3RyKDAsMSk/dDp0aGlzLl9iYXNlVVJJK3R9LGkucHJvdG90eXBlLl9oYW5kbGVMb2FkU2VnbWVudEZhaWx1cmU9ZnVuY3Rpb24odCxlLG4pe3QuYWJvcnRlZHx8KHRoaXMuX2xvZ2dlci5sb2coXCJzZWdtZW50IGFib3J0ZWQ6IFwiK3QuYWJvcnRlZCksdGhpcy5fbG9nZ2VyLmxvZyhcInNlZ21lbnQgbG9hZGluZyBmYWlsdXJlOiBIVFRQIHJlc3BvbnNlIHN0YXR1czogXCIrZS5zdGF0dXMpLDA9PT1lLnN0YXR1cz90LnN0YXR1cz1oLlRJTUVPVVQ6NDAzPT09ZS5zdGF0dXM/dC5zdGF0dXM9aC5GT1JCSURERU46NDA0PT09ZS5zdGF0dXM/dC5zdGF0dXM9aC5OT1RfRk9VTkQ6ZS5zdGF0dXM+PTUwMD90LnN0YXR1cz1oLlNFUlZFUl9FUlJPUjp0LnN0YXR1cz1oLkZBSUxFRCx0LnRpbWVzRmFpbGVkKyssdGhpcy50cmlnZ2VyKGkuRXZlbnRzLlNFR01FTlRfRkFJTEVELHQpKX0saS5wcm90b3R5cGUubG9hZFNlZ21lbnQ9ZnVuY3Rpb24odCl7dmFyIGU9ITEsbj1uZXcgWE1MSHR0cFJlcXVlc3Qscj10LnVyaSxvPWZ1bmN0aW9uKGkpe2V8fChlPSEwLHRoaXMuX2hhbmRsZUxvYWRTZWdtZW50RmFpbHVyZSh0LG4saSkpfS5iaW5kKHRoaXMpOyh0Lmhhc0JlZW5SZXF1ZXN0ZWQoKXx8dC5pc0NvbXBsZXRlKCkpJiZ0aGlzLl9sb2dnZXIubG9nKFwic2VnbWVudCBjYW50IGJlIGxvYWRlZCwgcmVxdWVzdGVkOiBcIiwhIXQuaGFzQmVlblJlcXVlc3RlZCgpLFwiIGNvbXBsZXRlOiBcIix0LmlzQ29tcGxldGUoKSksbi5vcGVuKFwiR0VUXCIsciwhMCksbi5yZXNwb25zZVR5cGU9XCJhcnJheWJ1ZmZlclwiLG4ub25sb2FkPWZ1bmN0aW9uKCl7aWYoIXQuYWJvcnRlZCl7aWYoMjAwIT09bi5zdGF0dXMpcmV0dXJuIHZvaWQgbygpO3RoaXMuX2xvZ2dlci5sb2coXCJkb3dubG9hZCBvZiBzZWdtZW50IFwiK3QuaW5kZXgrXCIgY29tcGxldGVcIiksdC5zdGF0dXM9aC5DT01QTEVURSx0LmRhdGE9bmV3IFVpbnQ4QXJyYXkobi5yZXNwb25zZSksdC5kb3dubG9hZFRpbWU9RGF0ZS5ub3coKS10LmRvd25sb2FkU3RhcnRUaW1lLHRoaXMudHJpZ2dlcihpLkV2ZW50cy5TRUdNRU5UX0xPQURFRCx0KX19LmJpbmQodGhpcyksbi5vbnByb2dyZXNzPWZ1bmN0aW9uKGUpe3QuYWJvcnRlZHx8ZS5sb2FkZWQmJmUudG90YWwmJih0LmxvYWRlZD1lLmxvYWRlZCx0LnRvdGFsPWUudG90YWwsdGhpcy50cmlnZ2VyKGkuRXZlbnRzLlNFR01FTlRfUFJPR1JFU1MsdCkpfS5iaW5kKHRoaXMpLG4ub25lcnJvcj1mdW5jdGlvbih0KXtvKHQpfS5iaW5kKHRoaXMpLHRoaXMuX2xvZ2dlci5sb2coXCJyZXF1ZXN0aW5nIHNlZ21lbnQgXCIrdC5pbmRleCtcIiBmcm9tIFwiK3IpLHQueGhyPW4sdC5hYm9ydGVkPSExLHQuZG93bmxvYWRTdGFydFRpbWU9RGF0ZS5ub3coKSx0LnN0YXR1cz1oLlJFUVVFU1RFRCxuLnNlbmQoKX0saS5wcm90b3R5cGUuZ2V0U2VnbWVudD1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5fc2VnbWVudHMmJnRoaXMuX3NlZ21lbnRzW3RdP3RoaXMuX3NlZ21lbnRzW3RdOm51bGx9LGkucHJvdG90eXBlLmdldFNlZ21lbnRJbmRleEZvclRpbWU9ZnVuY3Rpb24odCl7dmFyIGUsbjtpZih0PnRoaXMuX2R1cmF0aW9ufHwwPnR8fCF0aGlzLl9zZWdtZW50c3x8MD09PXRoaXMuX3NlZ21lbnRzLmxlbmd0aClyZXR1cm4tMTtmb3IoZT1NYXRoLmZsb29yKHRoaXMuX3NlZ21lbnRzLmxlbmd0aCoodC90aGlzLl9kdXJhdGlvbikpLG49dGhpcy5fc2VnbWVudHNbZV07IShuLnN0YXJ0UG9zaXRpb248PXQmJm4uc3RhcnRQb3NpdGlvbituLmR1cmF0aW9uPnQpOyluLnN0YXJ0UG9zaXRpb24rbi5kdXJhdGlvbj49dD9lLS06ZSsrLG49dGhpcy5fc2VnbWVudHNbZV07cmV0dXJuIGV9LGkucHJvdG90eXBlLmdldFNlZ21lbnRGb3JUaW1lPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuZ2V0U2VnbWVudEluZGV4Rm9yVGltZSh0KTtyZXR1cm4gZT49MD90aGlzLl9zZWdtZW50c1tlXTpudWxsfSxpLnByb3RvdHlwZS5nZXREdXJhdGlvbj1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9kdXJhdGlvbn0saS5wcm90b3R5cGUuZ2V0TnVtU2VnbWVudHM9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fc2VnbWVudHMubGVuZ3RofSxpLnByb3RvdHlwZS5nZXRMYXN0U2VnbWVudD1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9zZWdtZW50cy5sZW5ndGg/dGhpcy5fc2VnbWVudHNbdGhpcy5fc2VnbWVudHMubGVuZ3RoLTFdOm51bGx9fSxmdW5jdGlvbih0LGUsbil7dmFyIGk9big1Mykscj1uKDU2KSxvPW4oNTcpLHM9MSxhPTMyLHU9byhmdW5jdGlvbih0LGUsbil7dmFyIG89cztpZihuLmxlbmd0aCl7dmFyIGg9cihuLHUucGxhY2Vob2xkZXIpO298PWF9cmV0dXJuIGkodCxvLGUsbixoKX0pO3UucGxhY2Vob2xkZXI9e30sdC5leHBvcnRzPXV9LGZ1bmN0aW9uKHQsZSxuKXsoZnVuY3Rpb24oZSl7ZnVuY3Rpb24gaSh0LGUsbil7Zm9yKHZhciBpPW4ubGVuZ3RoLHI9LTEsbz1QKHQubGVuZ3RoLWksMCkscz0tMSxhPWUubGVuZ3RoLHU9QXJyYXkoYStvKTsrK3M8YTspdVtzXT1lW3NdO2Zvcig7KytyPGk7KXVbbltyXV09dFtyXTtmb3IoO28tLTspdVtzKytdPXRbcisrXTtyZXR1cm4gdX1mdW5jdGlvbiByKHQsZSxuKXtmb3IodmFyIGk9LTEscj1uLmxlbmd0aCxvPS0xLHM9UCh0Lmxlbmd0aC1yLDApLGE9LTEsdT1lLmxlbmd0aCxoPUFycmF5KHMrdSk7KytvPHM7KWhbb109dFtvXTtmb3IodmFyIGM9bzsrK2E8dTspaFtjK2FdPWVbYV07Zm9yKDsrK2k8cjspaFtjK25baV1dPXRbbysrXTtyZXR1cm4gaH1mdW5jdGlvbiBvKHQsbil7ZnVuY3Rpb24gaSgpe3ZhciBvPXRoaXMmJnRoaXMhPT1lJiZ0aGlzIGluc3RhbmNlb2YgaT9yOnQ7cmV0dXJuIG8uYXBwbHkobixhcmd1bWVudHMpfXZhciByPXModCk7cmV0dXJuIGl9ZnVuY3Rpb24gcyh0KXtyZXR1cm4gZnVuY3Rpb24oKXt2YXIgZT1hcmd1bWVudHM7c3dpdGNoKGUubGVuZ3RoKXtjYXNlIDA6cmV0dXJuIG5ldyB0O2Nhc2UgMTpyZXR1cm4gbmV3IHQoZVswXSk7Y2FzZSAyOnJldHVybiBuZXcgdChlWzBdLGVbMV0pO2Nhc2UgMzpyZXR1cm4gbmV3IHQoZVswXSxlWzFdLGVbMl0pO2Nhc2UgNDpyZXR1cm4gbmV3IHQoZVswXSxlWzFdLGVbMl0sZVszXSk7Y2FzZSA1OnJldHVybiBuZXcgdChlWzBdLGVbMV0sZVsyXSxlWzNdLGVbNF0pO2Nhc2UgNjpyZXR1cm4gbmV3IHQoZVswXSxlWzFdLGVbMl0sZVszXSxlWzRdLGVbNV0pO2Nhc2UgNzpyZXR1cm4gbmV3IHQoZVswXSxlWzFdLGVbMl0sZVszXSxlWzRdLGVbNV0sZVs2XSl9dmFyIG49cCh0LnByb3RvdHlwZSksaT10LmFwcGx5KG4sZSk7cmV0dXJuIGYoaSk/aTpufX1mdW5jdGlvbiBhKHQsbixvLHUsaCxjLGYscCxULGIpe2Z1bmN0aW9uIEkoKXtmb3IodmFyIHk9YXJndW1lbnRzLmxlbmd0aCx2PXksRT1BcnJheSh5KTt2LS07KUVbdl09YXJndW1lbnRzW3ZdO2lmKHUmJihFPWkoRSx1LGgpKSxjJiYoRT1yKEUsYyxmKSksRHx8ayl7dmFyIHc9SS5wbGFjZWhvbGRlcix4PWcoRSx3KTtpZih5LT14Lmxlbmd0aCxiPnkpe3ZhciBDPXA/ZChwKTp2b2lkIDAsRj1QKGIteSwwKSxVPUQ/eDp2b2lkIDAsQj1EP3ZvaWQgMDp4LEg9RD9FOnZvaWQgMCxqPUQ/dm9pZCAwOkU7bnw9RD9TOkEsbiY9fihEP0E6UyksTXx8KG4mPX4oX3xtKSk7dmFyIEc9YSh0LG4sbyxILFUsaixCLEMsVCxGKTtyZXR1cm4gRy5wbGFjZWhvbGRlcj13LEd9fXZhciBZPU8/bzp0aGlzLFY9Uj9ZW3RdOnQ7cmV0dXJuIHAmJihFPWwoRSxwKSksTCYmVDxFLmxlbmd0aCYmKEUubGVuZ3RoPVQpLHRoaXMmJnRoaXMhPT1lJiZ0aGlzIGluc3RhbmNlb2YgSSYmKFY9Tnx8cyh0KSksVi5hcHBseShZLEUpfXZhciBMPW4mdyxPPW4mXyxSPW4mbSxEPW4mdixNPW4meSxrPW4mRSxOPVI/dm9pZCAwOnModCk7cmV0dXJuIEl9ZnVuY3Rpb24gdSh0LG4saSxyKXtmdW5jdGlvbiBvKCl7Zm9yKHZhciBuPS0xLHM9YXJndW1lbnRzLmxlbmd0aCxoPS0xLGM9ci5sZW5ndGgsbD1BcnJheShjK3MpOysraDxjOylsW2hdPXJbaF07Zm9yKDtzLS07KWxbaCsrXT1hcmd1bWVudHNbKytuXTt2YXIgZj10aGlzJiZ0aGlzIT09ZSYmdGhpcyBpbnN0YW5jZW9mIG8/dTp0O3JldHVybiBmLmFwcGx5KGE/aTp0aGlzLGwpfXZhciBhPW4mXyx1PXModCk7cmV0dXJuIG99ZnVuY3Rpb24gaCh0LGUsbixpLHIscyxoLGMpe3ZhciBsPWUmbTtpZighbCYmXCJmdW5jdGlvblwiIT10eXBlb2YgdCl0aHJvdyBuZXcgVHlwZUVycm9yKFQpO3ZhciBmPWk/aS5sZW5ndGg6MDtpZihmfHwoZSY9fihTfEEpLGk9cj12b2lkIDApLGYtPXI/ci5sZW5ndGg6MCxlJkEpe3ZhciBkPWkscD1yO2k9cj12b2lkIDB9dmFyIGc9W3QsZSxuLGkscixkLHAscyxoLGNdO2lmKGdbOV09bnVsbD09Yz9sPzA6dC5sZW5ndGg6UChjLWYsMCl8fDAsZT09Xyl2YXIgeT1vKGdbMF0sZ1syXSk7ZWxzZSB5PWUhPVMmJmUhPShffFMpfHxnWzRdLmxlbmd0aD9hLmFwcGx5KHZvaWQgMCxnKTp1LmFwcGx5KHZvaWQgMCxnKTtyZXR1cm4geX1mdW5jdGlvbiBjKHQsZSl7cmV0dXJuIHQ9XCJudW1iZXJcIj09dHlwZW9mIHR8fGIudGVzdCh0KT8rdDotMSxlPW51bGw9PWU/TDplLHQ+LTEmJnQlMT09MCYmZT50fWZ1bmN0aW9uIGwodCxlKXtmb3IodmFyIG49dC5sZW5ndGgsaT1JKGUubGVuZ3RoLG4pLHI9ZCh0KTtpLS07KXt2YXIgbz1lW2ldO3RbaV09YyhvLG4pP3Jbb106dm9pZCAwfXJldHVybiB0fWZ1bmN0aW9uIGYodCl7dmFyIGU9dHlwZW9mIHQ7cmV0dXJuISF0JiYoXCJvYmplY3RcIj09ZXx8XCJmdW5jdGlvblwiPT1lKX12YXIgZD1uKDU0KSxwPW4oNTUpLGc9big1NiksXz0xLG09Mix5PTQsdj04LEU9MTYsUz0zMixBPTY0LHc9MTI4LFQ9XCJFeHBlY3RlZCBhIGZ1bmN0aW9uXCIsYj0vXlxcZCskLyxQPU1hdGgubWF4LEk9TWF0aC5taW4sTD05MDA3MTk5MjU0NzQwOTkxO3QuZXhwb3J0cz1ofSkuY2FsbChlLGZ1bmN0aW9uKCl7cmV0dXJuIHRoaXN9KCkpfSxmdW5jdGlvbih0LGUpe2Z1bmN0aW9uIG4odCxlKXt2YXIgbj0tMSxpPXQubGVuZ3RoO2ZvcihlfHwoZT1BcnJheShpKSk7KytuPGk7KWVbbl09dFtuXTtyZXR1cm4gZX10LmV4cG9ydHM9bn0sZnVuY3Rpb24odCxlKXtmdW5jdGlvbiBuKHQpe3ZhciBlPXR5cGVvZiB0O3JldHVybiEhdCYmKFwib2JqZWN0XCI9PWV8fFwiZnVuY3Rpb25cIj09ZSl9dmFyIGk9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KCl7fXJldHVybiBmdW5jdGlvbihlKXtpZihuKGUpKXt0LnByb3RvdHlwZT1lO3ZhciBpPW5ldyB0O3QucHJvdG90eXBlPXZvaWQgMH1yZXR1cm4gaXx8e319fSgpO3QuZXhwb3J0cz1pfSxmdW5jdGlvbih0LGUpe2Z1bmN0aW9uIG4odCxlKXtmb3IodmFyIG49LTEscj10Lmxlbmd0aCxvPS0xLHM9W107KytuPHI7KXRbbl09PT1lJiYodFtuXT1pLHNbKytvXT1uKTtyZXR1cm4gc312YXIgaT1cIl9fbG9kYXNoX3BsYWNlaG9sZGVyX19cIjt0LmV4cG9ydHM9bn0sMTEsZnVuY3Rpb24odCxlLG4pe2Z1bmN0aW9uIGkodCxlKXtyZXR1cm4gZnVuY3Rpb24obixpLHIpe3JldHVyblwiZnVuY3Rpb25cIj09dHlwZW9mIGkmJnZvaWQgMD09PXImJmEobik/dChuLGkpOmUobixzKGksciwzKSl9fXZhciByPW4oNTkpLG89big2MCkscz1uKDY1KSxhPW4oNjQpLHU9aShyLG8pO3QuZXhwb3J0cz11fSxmdW5jdGlvbih0LGUpe2Z1bmN0aW9uIG4odCxlKXtmb3IodmFyIG49LTEsaT10Lmxlbmd0aDsrK248aSYmZSh0W25dLG4sdCkhPT0hMTspO3JldHVybiB0fXQuZXhwb3J0cz1ufSxbMTM0LDYxXSxbMTMyLDYyLDYzLDY0XSw1LDYsNyw5LGZ1bmN0aW9uKHQsZSxuKXt2YXIgaSxyPW4oMzYpLG89bigxNikscz1uKDQ3KS5iaW5kQWxsLGE9bigxKTt0LmV4cG9ydHM9aT1mdW5jdGlvbih0LGUpe3ModGhpcyxbXCJfb25NU0VJbml0XCIsXCJfb25NU0VEaXNwb3NlXCIsXCJfb25Tb3VyY2VCdWZmZXJVcGRhdGVcIl0pLHRoaXMubWltZVR5cGU9ZSx0aGlzLl9sb2dnZXI9dCx0aGlzLl9pc0J1ZmZlclByZXBhcmVkPSExLHRoaXMuX3NvdXJjZUJ1ZmZlclB0c09mZnNldD0wLHRoaXMuX3NlZ21lbnRzQXdhaXRpbmdBcHBlbmRhbmNlPVtdLHRoaXMuX2lzTm90UmVhZHk9ITAsdGhpcy5fc291cmNlQnVmZmVyPW51bGwsdGhpcy5fbWVkaWFTb3VyY2U9bmV3IE1lZGlhU291cmNlLHRoaXMuX21lZGlhU291cmNlLmFkZEV2ZW50TGlzdGVuZXIoXCJzb3VyY2VvcGVuXCIsdGhpcy5fb25NU0VJbml0LCExKSx0aGlzLl9tZWRpYVNvdXJjZS5hZGRFdmVudExpc3RlbmVyKFwic291cmNlY2xvc2VcIix0aGlzLl9vbk1TRURpc3Bvc2UsITEpLHRoaXMuX21lZGlhRWxlbT1vLmNyZWF0ZUF1ZGlvRWxlbWVudCgpLHRoaXMuX21lZGlhRWxlbS5zcmM9d2luZG93LlVSTC5jcmVhdGVPYmplY3RVUkwodGhpcy5fbWVkaWFTb3VyY2UpfSxpLkV2ZW50cz17U09VUkNFX1JFQURZOlwic291cmNlLXJlYWR5XCIsU09VUkNFX0RFU1RST1lFRDpcInNvdXJjZS1kZXN0cm95XCIsU09VUkNFX0VSUk9SOlwic291cmNlLWVycm9yXCIsU0VHTUVOVF9BUFBFTkRFRDpcInNlZ21lbnQtYXBwZW5kZWRcIn0sYShpLnByb3RvdHlwZSxyKSxhKGkucHJvdG90eXBlLHtfb25NU0VJbml0OmZ1bmN0aW9uKCl7dGhpcy5fbG9nZ2VyLmxvZyhcInNvdXJjZSBvcGVuIGhhbmRsZXJcIiksdGhpcy5faXNOb3RSZWFkeT0hMSx0aGlzLl9tZWRpYVNvdXJjZS5yZW1vdmVFdmVudExpc3RlbmVyKFwic291cmNlb3BlblwiLHRoaXMuX29uTVNFSW5pdCwhMSksdGhpcy5fc291cmNlQnVmZmVyPXRoaXMuX21lZGlhU291cmNlLmFkZFNvdXJjZUJ1ZmZlcih0aGlzLm1pbWVUeXBlKSx0aGlzLl9zb3VyY2VCdWZmZXIuYWRkRXZlbnRMaXN0ZW5lcihcInVwZGF0ZVwiLHRoaXMuX29uU291cmNlQnVmZmVyVXBkYXRlKSx0aGlzLnRyaWdnZXIoaS5FdmVudHMuU09VUkNFX1JFQURZKX0sX29uTVNFRGlzcG9zZTpmdW5jdGlvbigpe3RoaXMuX2lzTm90UmVhZHk9ITAsdGhpcy5fbG9nZ2VyLmxvZyhcInNvdXJjZSBkaXNwb3NlIGhhbmRsZXJcIiksdGhpcy5fbWVkaWFTb3VyY2UucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInNvdXJjZWNsb3NlXCIsdGhpcy5fb25NU0VEaXNwb3NlLCExKX0sX2FwcGVuZE5leHRTZWdtZW50OmZ1bmN0aW9uKHQpe3RyeXtpZih0aGlzLl9zb3VyY2VCdWZmZXIudXBkYXRpbmcpcmV0dXJuIHRoaXMuX2xvZ2dlci5sb2coXCJzb3VyY2UgYnVmZmVyIGlzIGJ1c3kgdXBkYXRpbmcgYWxyZWFkeSwgZW5xdWV1aW5nIGRhdGEgZm9yIGxhdGVyIGFwcGVuZGluZ1wiKSx2b2lkIHRoaXMuX3NlZ21lbnRzQXdhaXRpbmdBcHBlbmRhbmNlLnVuc2hpZnQodCk7dC5pc0xhc3QmJnRoaXMuX2xvZ2dlci5sb2coXCJhYm91dCB0byBhcHBlbmQgbGFzdCBzZWdtZW50XCIpLHRoaXMuX2N1cnJlbnRTZWdtZW50QXBwZW5kaW5nPXQsdGhpcy5fc291cmNlQnVmZmVyLnRpbWVzdGFtcE9mZnNldD10LnN0YXJ0UG9zaXRpb24vMWUzLHRoaXMuX3NvdXJjZUJ1ZmZlci5hcHBlbmRCdWZmZXIodC5kYXRhKSx0aGlzLl9sb2dnZXIubG9nKFwiYXBwZW5kaW5nIHNlZ21lbnQgXCIrdC5pbmRleCl9Y2F0Y2goZSl7dGhpcy5fbG9nZ2VyLmxvZyhcImVycm9yIHdoaWxlIGFwcGVuZGluZyB0byBTb3VyY2VCdWZmZXI6IFwiK2UubWVzc2FnZStcIilcIiksdGhpcy50cmlnZ2VyKGkuRXZlbnRzLlNPVVJDRV9FUlJPUixlKX19LF90cnlBcHBlbmRFb3M6ZnVuY3Rpb24oKXt0aGlzLl9sb2dnZXIubG9nKFwiYXR0ZW1wdGluZyB0byBmaW5hbGl6ZSBzdHJlYW1cIik7dHJ5e1wib3BlblwiIT09dGhpcy5fbWVkaWFTb3VyY2UucmVhZHlTdGF0ZXx8dGhpcy5fc291cmNlQnVmZmVyLnVwZGF0aW5nP3RoaXMuX2xvZ2dlci5sb2coXCJjb3VsZG4ndCBjYWxsIGVuZE9mU3RyZWFtIGJlY2F1c2UgU291cmNlQnVmZmVyIGlzIHN0aWxsIHVwZGF0aW5nLCB3ZSdsbCBjYWxsIGl0IG9uY2UgaXRzIGRvbmVcIik6KHRoaXMuX21lZGlhU291cmNlLmVuZE9mU3RyZWFtKCksdGhpcy5fbG9nZ2VyLmxvZyhcImNhbGxlZCBlbmRPZlN0cmVhbVwiKSl9Y2F0Y2godCl7dGhpcy5fbG9nZ2VyLmxvZyhcIlNvdXJjZUJ1ZmZlciBlbmRPZlN0cmVhbSgpIGNhbGwgZmFpbGVkIHdpdGggZXJyb3I6IFwiK3QubWVzc2FnZSksdGhpcy50cmlnZ2VyKGkuRXZlbnRzLlNPVVJDRV9FUlJPUix0KX19LF9vblNvdXJjZUJ1ZmZlclVwZGF0ZTpmdW5jdGlvbigpeyh0aGlzLl9jdXJyZW50U2VnbWVudEFwcGVuZGluZ3x8dGhpcy5fc291cmNlQnVmZmVyLnVwZGF0aW5nKSYmKHRoaXMuX2xvZ2dlci5sb2coXCJkb25lIHVwZGF0aW5nIFNvdXJjZUJ1ZmZlciB3aXRoIHNlZ21lbnQgXCIrdGhpcy5fY3VycmVudFNlZ21lbnRBcHBlbmRpbmcuaW5kZXgpLHRoaXMudHJpZ2dlcihpLkV2ZW50cy5TRUdNRU5UX0FQUEVOREVELHRoaXMuX2N1cnJlbnRTZWdtZW50QXBwZW5kaW5nKSx0aGlzLl9jdXJyZW50U2VnbWVudEFwcGVuZGluZy5pc0xhc3QmJih0aGlzLl9sb2dnZXIubG9nKFwid2FzIGxhc3Qgc2VnbWVudCwgc2V0dGluZyBvbiBFT1Mgb24gU291cmNlQnVmZmVyXCIpLHRoaXMuX3RyeUFwcGVuZEVvcygpKSx0aGlzLl9zZWdtZW50c0F3YWl0aW5nQXBwZW5kYW5jZS5sZW5ndGgmJiF0aGlzLl9zb3VyY2VCdWZmZXIudXBkYXRpbmcmJnRoaXMuX2FwcGVuZE5leHRTZWdtZW50KHRoaXMuX3NlZ21lbnRzQXdhaXRpbmdBcHBlbmRhbmNlLnBvcCgpKSl9LGFwcGVuZDpmdW5jdGlvbih0KXtpZighdGhpcy5zb3VyY2VJc1JlYWR5KCkpdGhyb3cgbmV3IEVycm9yKFwiTWVkaWFTb3VyY2UgaXMgbm90IHJlYWR5IHlldFwiKTt0aGlzLl9hcHBlbmROZXh0U2VnbWVudCh0KX0sbWVkaWE6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbWVkaWFFbGVtfSxzb3VyY2VJc1JlYWR5OmZ1bmN0aW9uKCl7cmV0dXJuIXRoaXMuX2lzTm90UmVhZHl9LGR1cmF0aW9uOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLl9tZWRpYVNvdXJjZS5kdXJhdGlvbj10LzFlMywxZTMqdGhpcy5fbWVkaWFTb3VyY2UuZHVyYXRpb259fSl9LGZ1bmN0aW9uKHQsZSxuKXt2YXIgaSxyPW4oNDcpLmNvbmNhdEJ1ZmZlcnNUb1VpbnQ4QXJyYXksbz1uKDEpLHM9bigzNiksYT1uKDY4KTt0LmV4cG9ydHM9aT1mdW5jdGlvbih0KXt0aGlzLmNvbmZpZz10LHRoaXMucmVzZXQoKSx0aGlzLnNlZ21lbnRzPVtdLHRoaXMucHVzaGVkSW5pdERhdGE9ITF9LG8oaS5wcm90b3R5cGUscyksaS5wcm90b3R5cGUucHJvY2Vzcz1mdW5jdGlvbih0KXtzd2l0Y2godGhpcy5zZWdtZW50cy5wdXNoKHQpLHRoaXMuY29uZmlnKXtjYXNlIGkuQ29uZmlncy5WT0lEOnRoaXMudHJpZ2dlcihcInNlZ21lbnRcIix0KTticmVhaztjYXNlIGkuQ29uZmlncy5NUDNfVE9fRk1QNDp0aGlzLnNyYy5lbnF1ZXVlKG5ldyBhLlVuaXQuVHJhbnNmZXIodC5kYXRhLFwiYmluYXJ5XCIpKSx0aGlzLnNyYy5lbnF1ZXVlKGEuVW5pdC5UcmFuc2Zlci5GbHVzaCgpKTticmVhaztkZWZhdWx0OnRocm93IG5ldyBFcnJvcihcIkNvbmZpZyBcIit0aGlzLmNvbmZpZytcIiBub3Qgc3VwcG9ydGVkXCIpfX0saS5wcm90b3R5cGUuZGVxdWV1ZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLnNlZ21lbnRzLnNoaWZ0KCl9LGkucHJvdG90eXBlLnJlc2V0PWZ1bmN0aW9uKCl7c3dpdGNoKHRoaXMuY29uZmlnKXtjYXNlIGkuQ29uZmlncy5WT0lEOmJyZWFrO2Nhc2UgaS5Db25maWdzLk1QM19UT19GTVA0OnRoaXMuZ290SW5pdERhdGE9ITEsdGhpcy5zcmM9bmV3IGEuVW5pdC5CYXNlUHVzaFNyYyx0aGlzLnBhcnNlcj1uZXcgYS5Vbml0cy5NUDNQYXJzZXIsdGhpcy5tdXhlcj1uZXcgYS5Vbml0cy5NUDRNdXgoYS5Vbml0cy5NUDRNdXguUHJvZmlsZXMuTVAzX0FVRElPX09OTFkpLHRoaXMuc2luaz1uZXcgYS5Vbml0LkJhc2VTaW5rLHRoaXMuc2luay5fb25EYXRhPWZ1bmN0aW9uKCl7dmFyIHQsZT10aGlzLnNpbmsuZGVxdWV1ZSgpLmRhdGE7cmV0dXJuIHRoaXMuZ290SW5pdERhdGE/KHQ9dGhpcy5kZXF1ZXVlKCksdC5taW1lVHlwZT1cImF1ZGlvL21wNFwiLHRoaXMuZ290SW5pdERhdGEmJiF0aGlzLnB1c2hlZEluaXREYXRhPyh0LmRhdGE9cih0aGlzLmluaXREYXRhLGUpLHRoaXMucHVzaGVkSW5pdERhdGE9ITApOnQuZGF0YT1lLHRoaXMudHJpZ2dlcihcInNlZ21lbnRcIix0KSx2b2lkIHRoaXMucmVzZXQoKSk6KHRoaXMuZ290SW5pdERhdGE9ITAsdm9pZCh0aGlzLmluaXREYXRhPWUpKX0uYmluZCh0aGlzKSxhLlVuaXQubGluayh0aGlzLnNyYyx0aGlzLnBhcnNlcix0aGlzLm11eGVyLHRoaXMuc2luayk7YnJlYWs7ZGVmYXVsdDp0aHJvdyBuZXcgRXJyb3IoXCJDb25maWcgXCIrdGhpcy5jb25maWcrXCIgbm90IHN1cHBvcnRlZFwiKX19LGkuQ29uZmlncz17Vk9JRDpcIlZPSURcIixNUDNfVE9fRk1QNDpcIk1QM19UT19GTVA0XCJ9fSxmdW5jdGlvbih0LGUsbil7dmFyIGkscj1uKDY5KSxvPW4oMTE1KSxzPW4oMTE4KSxhPW4oMTIxKSx1PW4oMTI0KSxoPW4oMTI1KTt0LmV4cG9ydHM9aT17VW5pdDpyLFVuaXRzOntGaWxlOmgsTVA0TXV4Om8sTVAzUGFyc2VyOnMsTVNFU2luazphLFhIUjp1fX19LGZ1bmN0aW9uKHQsZSxuKXsoZnVuY3Rpb24oZSl7dmFyIGkscixvLHMsYSx1LGgsYyxsLGYsZD1uKDc0KSxwPW4oNzYpLGc9big4NSksXz1uKDk2KSxtPW4oOTcpO3QuZXhwb3J0cz1pPWZ1bmN0aW9uKCl7Xy5jYWxsKHRoaXMpLHRoaXMuaW5wdXRzfHwodGhpcy5pbnB1dHM9W10pLHRoaXMub3V0cHV0c3x8KHRoaXMub3V0cHV0cz1bXSl9LGkuY3JlYXRlPWZ1bmN0aW9uKHQpe3JldHVybiBwKGkucHJvdG90eXBlLHQpfSxpLmNyZWF0ZUJhc2VTcmM9ZnVuY3Rpb24odCl7cmV0dXJuIHAodS5wcm90b3R5cGUsdCl9LGkuY3JlYXRlQmFzZVB1c2hTcmM9ZnVuY3Rpb24odCl7cmV0dXJuIHAoaC5wcm90b3R5cGUsdCl9LGkuY3JlYXRlQmFzZVNpbms9ZnVuY3Rpb24odCl7cmV0dXJuIHAoYy5wcm90b3R5cGUsdCl9LGkuY3JlYXRlQmFzZVRyYW5zZm9ybT1mdW5jdGlvbih0KXtyZXR1cm4gcChhLnByb3RvdHlwZSx0KX0saS5jcmVhdGVCYXNlUGFyc2VyPWZ1bmN0aW9uKHQpe3JldHVybiBwKGwucHJvdG90eXBlLHQpfSxpLmxpbms9ZnVuY3Rpb24odCxlKXtpZihhcmd1bWVudHMubGVuZ3RoPjIpcmV0dXJuIGkubGlua0FycmF5KGFyZ3VtZW50cyk7Zm9yKHZhciBuPTA7bjxNYXRoLm1pbih0Lm51bWJlck9mT3V0cygpLGUubnVtYmVyT2ZJbnMoKSk7bisrKXQub3V0KG4pLnBpcGUoZVtcImluXCJdKG4pKTtyZXR1cm4gZX0saS5saW5rQXJyYXk9ZnVuY3Rpb24odCl7dmFyIGUsbixyO2ZvcihyPTA7cjx0Lmxlbmd0aDtyKyspZT10W3JdLHQubGVuZ3RoPnIrMSYmKG49dFtyKzFdLGkubGluayhlLG4pKTtyZXR1cm4gbn07dmFyIHk9aS5FdmVudD17Q0hBSU46XCJjaGFpblwiLE5FRURfREFUQTpcIm5lZWQtZGF0YVwiLEZJTklTSDpcImZpbmlzaFwiLFBJUEU6XCJwaXBlXCIsVU5QSVBFOlwidW5waXBlXCIsRVJST1I6XCJlcnJvclwiLEVORDpcImVuZFwiLE9QRU46XCJvcGVuXCIsQ0xPU0U6XCJjbG9zZVwifTtpLnByb3RvdHlwZT1wKF8ucHJvdG90eXBlLHtjb25zdHJ1Y3RvcjppLFwiaW5cIjpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5pbnB1dHNbdF19LG91dDpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5vdXRwdXRzW3RdfSxudW1iZXJPZkluczpmdW5jdGlvbigpe3JldHVybiB0aGlzLmlucHV0cy5sZW5ndGh9LG51bWJlck9mT3V0czpmdW5jdGlvbigpe3JldHVybiB0aGlzLm91dHB1dHMubGVuZ3RofSxhZGQ6ZnVuY3Rpb24odCl7cmV0dXJuIHQgaW5zdGFuY2VvZiByP3RoaXMuYWRkSW5wdXQodCk6dCBpbnN0YW5jZW9mIG8mJnRoaXMuYWRkT3V0cHV0KHQpLHRoaXN9LHJlbW92ZTpmdW5jdGlvbih0KXt0IGluc3RhbmNlb2Ygcj90aGlzLnJlbW92ZUlucHV0KHQpOnQgaW5zdGFuY2VvZiBvJiZ0aGlzLnJlbW92ZU91dHB1dCh0KX0sYWRkSW5wdXQ6ZnVuY3Rpb24odCl7dGhpcy5faW5zdGFsbEV2ZW50Rm9yd2FyZGVyKHQseS5GSU5JU0gpLHRoaXMuX2luc3RhbGxFdmVudEZvcndhcmRlcih0LHkuT1BFTiksdGhpcy5faW5zdGFsbEV2ZW50Rm9yd2FyZGVyKHQseS5QSVBFKSx0aGlzLl9pbnN0YWxsRXZlbnRGb3J3YXJkZXIodCx5LlVOUElQRSksdGhpcy5faW5zdGFsbEV2ZW50Rm9yd2FyZGVyKHQseS5FUlJPUiksdGhpcy5faW5zdGFsbEV2ZW50Rm9yd2FyZGVyKHQseS5DSEFJTiksdGhpcy5pbnB1dHMucHVzaCh0KX0sYWRkT3V0cHV0OmZ1bmN0aW9uKHQpe3RoaXMuX2luc3RhbGxFdmVudEZvcndhcmRlcih0LHkuRU5EKSx0aGlzLl9pbnN0YWxsRXZlbnRGb3J3YXJkZXIodCx5Lk9QRU4pLHRoaXMuX2luc3RhbGxFdmVudEZvcndhcmRlcih0LHkuQ0xPU0UpLHRoaXMuX2luc3RhbGxFdmVudEZvcndhcmRlcih0LHkuRVJST1IpLHRoaXMuX2luc3RhbGxFdmVudEZvcndhcmRlcih0LHkuTkVFRF9EQVRBKSx0aGlzLm91dHB1dHMucHVzaCh0KX0scmVtb3ZlSW5wdXQ6ZnVuY3Rpb24odCl7cmVtb3ZlUHV0KHRoaXMuaW5wdXRzLHQpfSxyZW1vdmVPdXRwdXQ6ZnVuY3Rpb24odCl7cmVtb3ZlUHV0KHRoaXMub3V0cHV0cyx0KX0scmVtb3ZlUHV0OmZ1bmN0aW9uKHQsZSl7dC5zbGljZSgpLmZvckVhY2goZnVuY3Rpb24obixpKXtuPT1lJiZ0LnNwbGljZShpLDEpfSl9LF9pbnN0YWxsRXZlbnRGb3J3YXJkZXI6ZnVuY3Rpb24odCxlKXt0Lm9uKGUsZnVuY3Rpb24obil7dGhpcy5lbWl0KGUsdCxuKX0uYmluZCh0aGlzKSl9fSksaS5UcmFuc2Zlcj1zPWZ1bmN0aW9uKHQsbixpKXtufHwobj10IGluc3RhbmNlb2YgZT9cImJ1ZmZlclwiOnQgaW5zdGFuY2VvZiBTdHJpbmc/XCJ1dGY4XCI6XCJvYmplY3RcIiksdGhpcy5yZXNvbHZlZD0hMSx0aGlzLmRhdGE9dCx0aGlzLmVuY29kaW5nPW4sdGhpcy5kb25lQ2FsbGJhY2s9aX0scy5wcm90b3R5cGU9cChPYmplY3QucHJvdG90eXBlLHtjb25zdHJ1Y3RvcjpzLHJlc29sdmU6ZnVuY3Rpb24oKXt0aGlzLmRvbmVDYWxsYmFjayYmIXRoaXMucmVzb2x2ZWQmJih0aGlzLmRvbmVDYWxsYmFjaygpLHRoaXMucmVzb2x2ZWQ9ITApfSxzZXRGbHVzaGluZzpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5kYXRhLmZsdXNoPXQsdGhpc30sc2V0RW1wdHk6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuZGF0YS5lbXB0eT10LHRoaXN9fSkscy5GbHVzaD1mdW5jdGlvbigpe3JldHVybiBuZXcgcyh7fSxcImJpbmFyeVwiKS5zZXRGbHVzaGluZyghMCkuc2V0RW1wdHkoITApfSxzLkVPUz1mdW5jdGlvbigpe3JldHVybiBuZXcgcyhudWxsLFwiYmluYXJ5XCIpfSxpLklucHV0PXI9ZnVuY3Rpb24odCxlKXttLldyaXRhYmxlLnByb3RvdHlwZS5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMse29iamVjdE1vZGU6ITAsZGVjb2RlU3RyaW5nczohMX0pfSxyLnByb3RvdHlwZT1wKG0uV3JpdGFibGUucHJvdG90eXBlLHtjb25zdHJ1Y3RvcjpyLF93cml0ZTpmdW5jdGlvbih0LGUsbil7ZChcIl93cml0ZTogXCIrZSksdGhpcy5lbWl0KGkuRXZlbnQuQ0hBSU4sbmV3IHModCxlLG4pKX19KSxpLk91dHB1dD1vPWZ1bmN0aW9uKHQpe20uUmVhZGFibGUucHJvdG90eXBlLmNvbnN0cnVjdG9yLmNhbGwodGhpcyx7b2JqZWN0TW9kZTohMH0pLHRoaXMuX2RhdGFSZXF1ZXN0ZWQ9MCx0aGlzLl9zaG91bGRQdXNoTW9yZT0hMH0sby5lb3M9ZnVuY3Rpb24odCl7dC5wdXNoKG51bGwsXCJudWxsXCIpfSxvLnByb3RvdHlwZT1wKG0uUmVhZGFibGUucHJvdG90eXBlLHtjb25zdHJ1Y3RvcjpvLF9yZWFkOmZ1bmN0aW9uKHQpe3RoaXMuX2RhdGFSZXF1ZXN0ZWQrKyx0aGlzLmVtaXQoeS5ORUVEX0RBVEEsdGhpcyl9LHB1c2g6ZnVuY3Rpb24odCxlKXtyZXR1cm4gdGhpcy5fZGF0YVJlcXVlc3RlZC0tLHRoaXMuX3Nob3VsZFB1c2hNb3JlPW0uUmVhZGFibGUucHJvdG90eXBlLnB1c2guY2FsbCh0aGlzLHQsZSksdGhpcy5fc2hvdWxkUHVzaE1vcmV9LGlzUHVsbGluZzpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9kYXRhUmVxdWVzdGVkPjB9LGVvczpmdW5jdGlvbigpe20uUmVhZGFibGUucHJvdG90eXBlLnB1c2guY2FsbCh0aGlzLG51bGwsXCJudWxsXCIpfX0pLGkuQmFzZVRyYW5zZm9ybT1hPWZ1bmN0aW9uKCl7aS5wcm90b3R5cGUuY29uc3RydWN0b3IuYXBwbHkodGhpcyxhcmd1bWVudHMpLHRoaXMuYWRkKG5ldyByKS5hZGQobmV3IG8pLHRoaXMub24oeS5DSEFJTix0aGlzLl9vbkNoYWluLmJpbmQodGhpcykpLHRoaXMub24oeS5GSU5JU0gsdGhpcy5fb25GaW5pc2guYmluZCh0aGlzKSl9LGEucHJvdG90eXBlPXAoaS5wcm90b3R5cGUse2NvbnN0cnVjdG9yOmEsX29uQ2hhaW46ZnVuY3Rpb24odCxlKXt0aGlzLl90cmFuc2Zvcm0oZSksdGhpcy5vdXQoMCkucHVzaChlLmRhdGEsZS5lbmNvZGluZyksZS5yZXNvbHZlKCl9LF9vbkZpbmlzaDpmdW5jdGlvbih0KXtvLmVvcyh0aGlzLm91dCgwKSl9LF90cmFuc2Zvcm06ZnVuY3Rpb24odCl7fX0pLGkuQmFzZVNyYz11PWZ1bmN0aW9uKCl7aS5wcm90b3R5cGUuY29uc3RydWN0b3IuYXBwbHkodGhpcyxhcmd1bWVudHMpLHRoaXMuYWRkKG5ldyBvKSx0aGlzLm9uKHkuTkVFRF9EQVRBLHRoaXMuc3F1ZWV6ZS5iaW5kKHRoaXMpKX0sdS5wcm90b3R5cGU9cChpLnByb3RvdHlwZSx7Y29uc3RydWN0b3I6dSxzcXVlZXplOmZ1bmN0aW9uKCl7ZChcInNxdWVlemVcIik7dmFyIHQ9dGhpcy5fc291cmNlKCk7dCYmKHRoaXMub3V0KDApLnB1c2godC5kYXRhLHQuZW5jb2RpbmcpLHQucmVzb2x2ZSgpKX0sX3NvdXJjZTpmdW5jdGlvbigpe319KSxpLkJhc2VQdXNoU3JjPWg9ZnVuY3Rpb24oKXt1LnByb3RvdHlwZS5jb25zdHJ1Y3Rvci5hcHBseSh0aGlzLGFyZ3VtZW50cyksdGhpcy5fYnVmZmVyT3V0PVtdfSxoLnByb3RvdHlwZT1wKHUucHJvdG90eXBlLHtjb25zdHJ1Y3RvcjpoLF9zb3VyY2U6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fYnVmZmVyT3V0Lmxlbmd0aD90aGlzLl9idWZmZXJPdXQuc2hpZnQoKTpudWxsfSxlbnF1ZXVlOmZ1bmN0aW9uKHQpe3RoaXMuX2J1ZmZlck91dC5wdXNoKHQpLHRoaXMub3V0KDApLmlzUHVsbGluZyYmdGhpcy5vdXQoMCkuaXNQdWxsaW5nKCkmJnRoaXMuc3F1ZWV6ZSgpfX0pLGkuQmFzZVNpbms9Yz1mdW5jdGlvbigpe2kucHJvdG90eXBlLmNvbnN0cnVjdG9yLmFwcGx5KHRoaXMsYXJndW1lbnRzKSx0aGlzLmFkZChuZXcgciksdGhpcy5vbih5LkNIQUlOLHRoaXMuX29uQ2hhaW4uYmluZCh0aGlzKSksdGhpcy5fYnVmZmVySW49W119LGMucHJvdG90eXBlPXAoaS5wcm90b3R5cGUse2NvbnN0cnVjdG9yOmMsX29uQ2hhaW46ZnVuY3Rpb24odCxlKXtkKFwiQmFzZVNpbmsuX29uQ2hhaW46IFwiK2UuZW5jb2RpbmcpLHRoaXMuX2J1ZmZlckluLnB1c2goZSksdGhpcy5fb25EYXRhKCksZS5yZXNvbHZlKCl9LF9vbkRhdGE6ZnVuY3Rpb24oKXt9LGRlcXVldWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fYnVmZmVySW4ubGVuZ3RoP3RoaXMuX2J1ZmZlckluLnNoaWZ0KCk6bnVsbH19KSxpLkJhc2VQYXJzZXI9bD1mdW5jdGlvbigpe2gucHJvdG90eXBlLmNvbnN0cnVjdG9yLmFwcGx5KHRoaXMsYXJndW1lbnRzKSxjLnByb3RvdHlwZS5jb25zdHJ1Y3Rvci5hcHBseSh0aGlzLGFyZ3VtZW50cyksdGhpcy5vbihcImZpbmlzaFwiLHRoaXMuX29uRmluaXNoLmJpbmQodGhpcykpfSxnKGwucHJvdG90eXBlLGkucHJvdG90eXBlLF8ucHJvdG90eXBlLHUucHJvdG90eXBlLGgucHJvdG90eXBlLGMucHJvdG90eXBlLHtjb25zdHJ1Y3RvcjpsLF9vbkRhdGE6ZnVuY3Rpb24oKXt0aGlzLl9wYXJzZSh0aGlzLmRlcXVldWUoKSl9LF9vbkZpbmlzaDpmdW5jdGlvbigpe2QoXCJCYXNlUGFyc2VyLl9vbkZpbmlzaFwiKSxvLmVvcyh0aGlzLm91dCgwKSl9LF9wYXJzZTpmdW5jdGlvbih0KXt9fSksaS5JbnB1dFNlbGVjdG9yPWY9ZnVuY3Rpb24odCl7Zm9yKGEucHJvdG90eXBlLmNvbnN0cnVjdG9yLmFwcGx5KHRoaXMsYXJndW1lbnRzKSx0PSh0fHwxKS0xO3QtLSA+MDspdGhpcy5hZGQobmV3IHIpO3RoaXMuc2VsZWN0ZWRJbnB1dEluZGV4PTB9LGcoZi5wcm90b3R5cGUsYS5wcm90b3R5cGUse2NvbnN0cnVjdG9yOmYsX29uQ2hhaW46ZnVuY3Rpb24odCxlKXt2YXIgbj10aGlzW1wiaW5cIl0odGhpcy5zZWxlY3RlZElucHV0SW5kZXgpO3JldHVybiB0IT09bj92b2lkIGUucmVzb2x2ZSgpOih0aGlzLl90cmFuc2Zvcm0oZSksdGhpcy5vdXQoMCkucHVzaChlLmRhdGEsZS5lbmNvZGluZyksdm9pZCBlLnJlc29sdmUoKSl9LF9vbkZpbmlzaDpmdW5jdGlvbih0KXt2YXIgZT10aGlzW1wiaW5cIl0odGhpcy5zZWxlY3RlZElucHV0SW5kZXgpO3Q9PT1lJiZvLmVvcyh0aGlzLm91dCgwKSl9fSl9KS5jYWxsKGUsbig3MCkuQnVmZmVyKX0sZnVuY3Rpb24odCxlLG4peyhmdW5jdGlvbih0LGkpe2Z1bmN0aW9uIHIoKXtmdW5jdGlvbiB0KCl7fXRyeXt2YXIgZT1uZXcgVWludDhBcnJheSgxKTtyZXR1cm4gZS5mb289ZnVuY3Rpb24oKXtyZXR1cm4gNDJ9LGUuY29uc3RydWN0b3I9dCw0Mj09PWUuZm9vKCkmJmUuY29uc3RydWN0b3I9PT10JiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBlLnN1YmFycmF5JiYwPT09ZS5zdWJhcnJheSgxLDEpLmJ5dGVMZW5ndGh9Y2F0Y2gobil7cmV0dXJuITF9fWZ1bmN0aW9uIG8oKXtyZXR1cm4gdC5UWVBFRF9BUlJBWV9TVVBQT1JUPzIxNDc0ODM2NDc6MTA3Mzc0MTgyM31mdW5jdGlvbiB0KGUpe3JldHVybiB0aGlzIGluc3RhbmNlb2YgdD8odGhpcy5sZW5ndGg9MCx0aGlzLnBhcmVudD12b2lkIDAsXCJudW1iZXJcIj09dHlwZW9mIGU/cyh0aGlzLGUpOlwic3RyaW5nXCI9PXR5cGVvZiBlP2EodGhpcyxlLGFyZ3VtZW50cy5sZW5ndGg+MT9hcmd1bWVudHNbMV06XCJ1dGY4XCIpOnUodGhpcyxlKSk6YXJndW1lbnRzLmxlbmd0aD4xP25ldyB0KGUsYXJndW1lbnRzWzFdKTpuZXcgdChlKX1mdW5jdGlvbiBzKGUsbil7aWYoZT1nKGUsMD5uPzA6MHxfKG4pKSwhdC5UWVBFRF9BUlJBWV9TVVBQT1JUKWZvcih2YXIgaT0wO24+aTtpKyspZVtpXT0wO3JldHVybiBlfWZ1bmN0aW9uIGEodCxlLG4peyhcInN0cmluZ1wiIT10eXBlb2Ygbnx8XCJcIj09PW4pJiYobj1cInV0ZjhcIik7dmFyIGk9MHx5KGUsbik7cmV0dXJuIHQ9Zyh0LGkpLHQud3JpdGUoZSxuKSx0fWZ1bmN0aW9uIHUoZSxuKXtpZih0LmlzQnVmZmVyKG4pKXJldHVybiBoKGUsbik7aWYoJChuKSlyZXR1cm4gYyhlLG4pO2lmKG51bGw9PW4pdGhyb3cgbmV3IFR5cGVFcnJvcihcIm11c3Qgc3RhcnQgd2l0aCBudW1iZXIsIGJ1ZmZlciwgYXJyYXkgb3Igc3RyaW5nXCIpO2lmKFwidW5kZWZpbmVkXCIhPXR5cGVvZiBBcnJheUJ1ZmZlcil7aWYobi5idWZmZXIgaW5zdGFuY2VvZiBBcnJheUJ1ZmZlcilyZXR1cm4gbChlLG4pO2lmKG4gaW5zdGFuY2VvZiBBcnJheUJ1ZmZlcilyZXR1cm4gZihlLG4pfXJldHVybiBuLmxlbmd0aD9kKGUsbik6cChlLG4pfWZ1bmN0aW9uIGgodCxlKXt2YXIgbj0wfF8oZS5sZW5ndGgpO3JldHVybiB0PWcodCxuKSxlLmNvcHkodCwwLDAsbiksdH1mdW5jdGlvbiBjKHQsZSl7dmFyIG49MHxfKGUubGVuZ3RoKTt0PWcodCxuKTtmb3IodmFyIGk9MDtuPmk7aSs9MSl0W2ldPTI1NSZlW2ldO3JldHVybiB0fWZ1bmN0aW9uIGwodCxlKXt2YXIgbj0wfF8oZS5sZW5ndGgpO3Q9Zyh0LG4pO2Zvcih2YXIgaT0wO24+aTtpKz0xKXRbaV09MjU1JmVbaV07cmV0dXJuIHR9ZnVuY3Rpb24gZihlLG4pe3JldHVybiB0LlRZUEVEX0FSUkFZX1NVUFBPUlQ/KG4uYnl0ZUxlbmd0aCxlPXQuX2F1Z21lbnQobmV3IFVpbnQ4QXJyYXkobikpKTplPWwoZSxuZXcgVWludDhBcnJheShuKSksZX1mdW5jdGlvbiBkKHQsZSl7dmFyIG49MHxfKGUubGVuZ3RoKTt0PWcodCxuKTtmb3IodmFyIGk9MDtuPmk7aSs9MSl0W2ldPTI1NSZlW2ldO3JldHVybiB0fWZ1bmN0aW9uIHAodCxlKXt2YXIgbixpPTA7XCJCdWZmZXJcIj09PWUudHlwZSYmJChlLmRhdGEpJiYobj1lLmRhdGEsaT0wfF8obi5sZW5ndGgpKSx0PWcodCxpKTtmb3IodmFyIHI9MDtpPnI7cis9MSl0W3JdPTI1NSZuW3JdO3JldHVybiB0fWZ1bmN0aW9uIGcoZSxuKXt0LlRZUEVEX0FSUkFZX1NVUFBPUlQ/KGU9dC5fYXVnbWVudChuZXcgVWludDhBcnJheShuKSksZS5fX3Byb3RvX189dC5wcm90b3R5cGUpOihlLmxlbmd0aD1uLGUuX2lzQnVmZmVyPSEwKTt2YXIgaT0wIT09biYmbjw9dC5wb29sU2l6ZT4+PjE7cmV0dXJuIGkmJihlLnBhcmVudD1aKSxlfWZ1bmN0aW9uIF8odCl7aWYodD49bygpKXRocm93IG5ldyBSYW5nZUVycm9yKFwiQXR0ZW1wdCB0byBhbGxvY2F0ZSBCdWZmZXIgbGFyZ2VyIHRoYW4gbWF4aW11bSBzaXplOiAweFwiK28oKS50b1N0cmluZygxNikrXCIgYnl0ZXNcIik7cmV0dXJuIDB8dH1mdW5jdGlvbiBtKGUsbil7aWYoISh0aGlzIGluc3RhbmNlb2YgbSkpcmV0dXJuIG5ldyBtKGUsbik7dmFyIGk9bmV3IHQoZSxuKTtyZXR1cm4gZGVsZXRlIGkucGFyZW50LGl9ZnVuY3Rpb24geSh0LGUpe1wic3RyaW5nXCIhPXR5cGVvZiB0JiYodD1cIlwiK3QpO3ZhciBuPXQubGVuZ3RoO2lmKDA9PT1uKXJldHVybiAwO2Zvcih2YXIgaT0hMTs7KXN3aXRjaChlKXtjYXNlXCJhc2NpaVwiOmNhc2VcImJpbmFyeVwiOmNhc2VcInJhd1wiOmNhc2VcInJhd3NcIjpyZXR1cm4gbjtjYXNlXCJ1dGY4XCI6Y2FzZVwidXRmLThcIjpyZXR1cm4gWSh0KS5sZW5ndGg7Y2FzZVwidWNzMlwiOmNhc2VcInVjcy0yXCI6Y2FzZVwidXRmMTZsZVwiOmNhc2VcInV0Zi0xNmxlXCI6cmV0dXJuIDIqbjtjYXNlXCJoZXhcIjpyZXR1cm4gbj4+PjE7Y2FzZVwiYmFzZTY0XCI6cmV0dXJuIFcodCkubGVuZ3RoO2RlZmF1bHQ6aWYoaSlyZXR1cm4gWSh0KS5sZW5ndGg7ZT0oXCJcIitlKS50b0xvd2VyQ2FzZSgpLGk9ITB9fWZ1bmN0aW9uIHYodCxlLG4pe3ZhciBpPSExO2lmKGU9MHxlLG49dm9pZCAwPT09bnx8bj09PTEvMD90aGlzLmxlbmd0aDowfG4sdHx8KHQ9XCJ1dGY4XCIpLDA+ZSYmKGU9MCksbj50aGlzLmxlbmd0aCYmKG49dGhpcy5sZW5ndGgpLGU+PW4pcmV0dXJuXCJcIjtmb3IoOzspc3dpdGNoKHQpe2Nhc2VcImhleFwiOnJldHVybiBEKHRoaXMsZSxuKTtjYXNlXCJ1dGY4XCI6Y2FzZVwidXRmLThcIjpyZXR1cm4gSSh0aGlzLGUsbik7Y2FzZVwiYXNjaWlcIjpyZXR1cm4gTyh0aGlzLGUsbik7Y2FzZVwiYmluYXJ5XCI6cmV0dXJuIFIodGhpcyxlLG4pO2Nhc2VcImJhc2U2NFwiOnJldHVybiBQKHRoaXMsZSxuKTtjYXNlXCJ1Y3MyXCI6Y2FzZVwidWNzLTJcIjpjYXNlXCJ1dGYxNmxlXCI6Y2FzZVwidXRmLTE2bGVcIjpyZXR1cm4gTSh0aGlzLGUsbik7ZGVmYXVsdDppZihpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJVbmtub3duIGVuY29kaW5nOiBcIit0KTt0PSh0K1wiXCIpLnRvTG93ZXJDYXNlKCksaT0hMH19ZnVuY3Rpb24gRSh0LGUsbixpKXtuPU51bWJlcihuKXx8MDt2YXIgcj10Lmxlbmd0aC1uO2k/KGk9TnVtYmVyKGkpLGk+ciYmKGk9cikpOmk9cjt2YXIgbz1lLmxlbmd0aDtpZihvJTIhPT0wKXRocm93IG5ldyBFcnJvcihcIkludmFsaWQgaGV4IHN0cmluZ1wiKTtpPm8vMiYmKGk9by8yKTtmb3IodmFyIHM9MDtpPnM7cysrKXt2YXIgYT1wYXJzZUludChlLnN1YnN0cigyKnMsMiksMTYpO2lmKGlzTmFOKGEpKXRocm93IG5ldyBFcnJvcihcIkludmFsaWQgaGV4IHN0cmluZ1wiKTt0W24rc109YX1yZXR1cm4gc31mdW5jdGlvbiBTKHQsZSxuLGkpe3JldHVybiBLKFkoZSx0Lmxlbmd0aC1uKSx0LG4saSl9ZnVuY3Rpb24gQSh0LGUsbixpKXtyZXR1cm4gSyhWKGUpLHQsbixpKX1mdW5jdGlvbiB3KHQsZSxuLGkpe3JldHVybiBBKHQsZSxuLGkpfWZ1bmN0aW9uIFQodCxlLG4saSl7cmV0dXJuIEsoVyhlKSx0LG4saSl9ZnVuY3Rpb24gYih0LGUsbixpKXtyZXR1cm4gSyh6KGUsdC5sZW5ndGgtbiksdCxuLGkpfWZ1bmN0aW9uIFAodCxlLG4pe3JldHVybiAwPT09ZSYmbj09PXQubGVuZ3RoP3EuZnJvbUJ5dGVBcnJheSh0KTpxLmZyb21CeXRlQXJyYXkodC5zbGljZShlLG4pKX1mdW5jdGlvbiBJKHQsZSxuKXtuPU1hdGgubWluKHQubGVuZ3RoLG4pO2Zvcih2YXIgaT1bXSxyPWU7bj5yOyl7dmFyIG89dFtyXSxzPW51bGwsYT1vPjIzOT80Om8+MjIzPzM6bz4xOTE/MjoxO2lmKG4+PXIrYSl7dmFyIHUsaCxjLGw7c3dpdGNoKGEpe2Nhc2UgMToxMjg+byYmKHM9byk7YnJlYWs7Y2FzZSAyOnU9dFtyKzFdLDEyOD09PSgxOTImdSkmJihsPSgzMSZvKTw8Nnw2MyZ1LGw+MTI3JiYocz1sKSk7YnJlYWs7Y2FzZSAzOnU9dFtyKzFdLGg9dFtyKzJdLDEyOD09PSgxOTImdSkmJjEyOD09PSgxOTImaCkmJihsPSgxNSZvKTw8MTJ8KDYzJnUpPDw2fDYzJmgsbD4yMDQ3JiYoNTUyOTY+bHx8bD41NzM0MykmJihzPWwpKTticmVhaztjYXNlIDQ6dT10W3IrMV0saD10W3IrMl0sYz10W3IrM10sMTI4PT09KDE5MiZ1KSYmMTI4PT09KDE5MiZoKSYmMTI4PT09KDE5MiZjKSYmKGw9KDE1Jm8pPDwxOHwoNjMmdSk8PDEyfCg2MyZoKTw8Nnw2MyZjLGw+NjU1MzUmJjExMTQxMTI+bCYmKHM9bCkpfX1udWxsPT09cz8ocz02NTUzMyxhPTEpOnM+NjU1MzUmJihzLT02NTUzNixpLnB1c2gocz4+PjEwJjEwMjN8NTUyOTYpLHM9NTYzMjB8MTAyMyZzKSxpLnB1c2gocykscis9YX1yZXR1cm4gTChpKX1mdW5jdGlvbiBMKHQpe3ZhciBlPXQubGVuZ3RoO2lmKFE+PWUpcmV0dXJuIFN0cmluZy5mcm9tQ2hhckNvZGUuYXBwbHkoU3RyaW5nLHQpO2Zvcih2YXIgbj1cIlwiLGk9MDtlPmk7KW4rPVN0cmluZy5mcm9tQ2hhckNvZGUuYXBwbHkoU3RyaW5nLHQuc2xpY2UoaSxpKz1RKSk7cmV0dXJuIG59ZnVuY3Rpb24gTyh0LGUsbil7dmFyIGk9XCJcIjtuPU1hdGgubWluKHQubGVuZ3RoLG4pO2Zvcih2YXIgcj1lO24+cjtyKyspaSs9U3RyaW5nLmZyb21DaGFyQ29kZSgxMjcmdFtyXSk7cmV0dXJuIGl9ZnVuY3Rpb24gUih0LGUsbil7dmFyIGk9XCJcIjtuPU1hdGgubWluKHQubGVuZ3RoLG4pO2Zvcih2YXIgcj1lO24+cjtyKyspaSs9U3RyaW5nLmZyb21DaGFyQ29kZSh0W3JdKTtyZXR1cm4gaX1mdW5jdGlvbiBEKHQsZSxuKXt2YXIgaT10Lmxlbmd0aDsoIWV8fDA+ZSkmJihlPTApLCghbnx8MD5ufHxuPmkpJiYobj1pKTtmb3IodmFyIHI9XCJcIixvPWU7bj5vO28rKylyKz1HKHRbb10pO3JldHVybiByfWZ1bmN0aW9uIE0odCxlLG4pe2Zvcih2YXIgaT10LnNsaWNlKGUsbikscj1cIlwiLG89MDtvPGkubGVuZ3RoO28rPTIpcis9U3RyaW5nLmZyb21DaGFyQ29kZShpW29dKzI1NippW28rMV0pO3JldHVybiByfWZ1bmN0aW9uIGsodCxlLG4pe2lmKHQlMSE9PTB8fDA+dCl0aHJvdyBuZXcgUmFuZ2VFcnJvcihcIm9mZnNldCBpcyBub3QgdWludFwiKTtpZih0K2U+bil0aHJvdyBuZXcgUmFuZ2VFcnJvcihcIlRyeWluZyB0byBhY2Nlc3MgYmV5b25kIGJ1ZmZlciBsZW5ndGhcIil9ZnVuY3Rpb24gTihlLG4saSxyLG8scyl7aWYoIXQuaXNCdWZmZXIoZSkpdGhyb3cgbmV3IFR5cGVFcnJvcihcImJ1ZmZlciBtdXN0IGJlIGEgQnVmZmVyIGluc3RhbmNlXCIpO2lmKG4+b3x8cz5uKXRocm93IG5ldyBSYW5nZUVycm9yKFwidmFsdWUgaXMgb3V0IG9mIGJvdW5kc1wiKTtpZihpK3I+ZS5sZW5ndGgpdGhyb3cgbmV3IFJhbmdlRXJyb3IoXCJpbmRleCBvdXQgb2YgcmFuZ2VcIil9ZnVuY3Rpb24geCh0LGUsbixpKXswPmUmJihlPTY1NTM1K2UrMSk7Zm9yKHZhciByPTAsbz1NYXRoLm1pbih0Lmxlbmd0aC1uLDIpO28+cjtyKyspdFtuK3JdPShlJjI1NTw8OCooaT9yOjEtcikpPj4+OCooaT9yOjEtcil9ZnVuY3Rpb24gQyh0LGUsbixpKXswPmUmJihlPTQyOTQ5NjcyOTUrZSsxKTtmb3IodmFyIHI9MCxvPU1hdGgubWluKHQubGVuZ3RoLW4sNCk7bz5yO3IrKyl0W24rcl09ZT4+PjgqKGk/cjozLXIpJjI1NX1mdW5jdGlvbiBGKHQsZSxuLGkscixvKXtpZihlPnJ8fG8+ZSl0aHJvdyBuZXcgUmFuZ2VFcnJvcihcInZhbHVlIGlzIG91dCBvZiBib3VuZHNcIik7aWYobitpPnQubGVuZ3RoKXRocm93IG5ldyBSYW5nZUVycm9yKFwiaW5kZXggb3V0IG9mIHJhbmdlXCIpO2lmKDA+bil0aHJvdyBuZXcgUmFuZ2VFcnJvcihcImluZGV4IG91dCBvZiByYW5nZVwiKX1mdW5jdGlvbiBVKHQsZSxuLGkscil7cmV0dXJuIHJ8fEYodCxlLG4sNCwzLjQwMjgyMzQ2NjM4NTI4ODZlMzgsLTMuNDAyODIzNDY2Mzg1Mjg4NmUzOCksWC53cml0ZSh0LGUsbixpLDIzLDQpLG4rNH1mdW5jdGlvbiBCKHQsZSxuLGkscil7cmV0dXJuIHJ8fEYodCxlLG4sOCwxLjc5NzY5MzEzNDg2MjMxNTdlMzA4LC0xLjc5NzY5MzEzNDg2MjMxNTdlMzA4KSxYLndyaXRlKHQsZSxuLGksNTIsOCksbis4fWZ1bmN0aW9uIEgodCl7aWYodD1qKHQpLnJlcGxhY2UodHQsXCJcIiksdC5sZW5ndGg8MilyZXR1cm5cIlwiO2Zvcig7dC5sZW5ndGglNCE9PTA7KXQrPVwiPVwiO3JldHVybiB0fWZ1bmN0aW9uIGoodCl7cmV0dXJuIHQudHJpbT90LnRyaW0oKTp0LnJlcGxhY2UoL15cXHMrfFxccyskL2csXCJcIil9ZnVuY3Rpb24gRyh0KXtyZXR1cm4gMTY+dD9cIjBcIit0LnRvU3RyaW5nKDE2KTp0LnRvU3RyaW5nKDE2KX1mdW5jdGlvbiBZKHQsZSl7ZT1lfHwxLzA7Zm9yKHZhciBuLGk9dC5sZW5ndGgscj1udWxsLG89W10scz0wO2k+cztzKyspe2lmKG49dC5jaGFyQ29kZUF0KHMpLG4+NTUyOTUmJjU3MzQ0Pm4pe2lmKCFyKXtpZihuPjU2MzE5KXsoZS09Myk+LTEmJm8ucHVzaCgyMzksMTkxLDE4OSk7Y29udGludWV9aWYocysxPT09aSl7KGUtPTMpPi0xJiZvLnB1c2goMjM5LDE5MSwxODkpO2NvbnRpbnVlfXI9bjtjb250aW51ZX1pZig1NjMyMD5uKXsoZS09Myk+LTEmJm8ucHVzaCgyMzksMTkxLDE4OSkscj1uO2NvbnRpbnVlfW49KHItNTUyOTY8PDEwfG4tNTYzMjApKzY1NTM2fWVsc2UgciYmKGUtPTMpPi0xJiZvLnB1c2goMjM5LDE5MSwxODkpO2lmKHI9bnVsbCwxMjg+bil7aWYoKGUtPTEpPDApYnJlYWs7by5wdXNoKG4pfWVsc2UgaWYoMjA0OD5uKXtpZigoZS09Mik8MClicmVhaztvLnB1c2gobj4+NnwxOTIsNjMmbnwxMjgpfWVsc2UgaWYoNjU1MzY+bil7aWYoKGUtPTMpPDApYnJlYWs7by5wdXNoKG4+PjEyfDIyNCxuPj42JjYzfDEyOCw2MyZufDEyOCl9ZWxzZXtpZighKDExMTQxMTI+bikpdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBjb2RlIHBvaW50XCIpO2lmKChlLT00KTwwKWJyZWFrO28ucHVzaChuPj4xOHwyNDAsbj4+MTImNjN8MTI4LG4+PjYmNjN8MTI4LDYzJm58MTI4KX19cmV0dXJuIG99ZnVuY3Rpb24gVih0KXtmb3IodmFyIGU9W10sbj0wO248dC5sZW5ndGg7bisrKWUucHVzaCgyNTUmdC5jaGFyQ29kZUF0KG4pKTtyZXR1cm4gZX1mdW5jdGlvbiB6KHQsZSl7Zm9yKHZhciBuLGkscixvPVtdLHM9MDtzPHQubGVuZ3RoJiYhKChlLT0yKTwwKTtzKyspbj10LmNoYXJDb2RlQXQocyksaT1uPj44LHI9biUyNTYsby5wdXNoKHIpLG8ucHVzaChpKTtyZXR1cm4gb31mdW5jdGlvbiBXKHQpe3JldHVybiBxLnRvQnl0ZUFycmF5KEgodCkpfWZ1bmN0aW9uIEsodCxlLG4saSl7Zm9yKHZhciByPTA7aT5yJiYhKHIrbj49ZS5sZW5ndGh8fHI+PXQubGVuZ3RoKTtyKyspZVtyK25dPXRbcl07cmV0dXJuIHJ9LyohXG5cdFx0ICogVGhlIGJ1ZmZlciBtb2R1bGUgZnJvbSBub2RlLmpzLCBmb3IgdGhlIGJyb3dzZXIuXG5cdFx0ICpcblx0XHQgKiBAYXV0aG9yICAgRmVyb3NzIEFib3VraGFkaWplaCA8ZmVyb3NzQGZlcm9zcy5vcmc+IDxodHRwOi8vZmVyb3NzLm9yZz5cblx0XHQgKiBAbGljZW5zZSAgTUlUXG5cdFx0ICovXG52YXIgcT1uKDcxKSxYPW4oNzIpLCQ9big3Myk7ZS5CdWZmZXI9dCxlLlNsb3dCdWZmZXI9bSxlLklOU1BFQ1RfTUFYX0JZVEVTPTUwLHQucG9vbFNpemU9ODE5Mjt2YXIgWj17fTt0LlRZUEVEX0FSUkFZX1NVUFBPUlQ9dm9pZCAwIT09aS5UWVBFRF9BUlJBWV9TVVBQT1JUP2kuVFlQRURfQVJSQVlfU1VQUE9SVDpyKCksdC5UWVBFRF9BUlJBWV9TVVBQT1JUJiYodC5wcm90b3R5cGUuX19wcm90b19fPVVpbnQ4QXJyYXkucHJvdG90eXBlLHQuX19wcm90b19fPVVpbnQ4QXJyYXkpLHQuaXNCdWZmZXI9ZnVuY3Rpb24odCl7cmV0dXJuIShudWxsPT10fHwhdC5faXNCdWZmZXIpfSx0LmNvbXBhcmU9ZnVuY3Rpb24oZSxuKXtpZighdC5pc0J1ZmZlcihlKXx8IXQuaXNCdWZmZXIobikpdGhyb3cgbmV3IFR5cGVFcnJvcihcIkFyZ3VtZW50cyBtdXN0IGJlIEJ1ZmZlcnNcIik7aWYoZT09PW4pcmV0dXJuIDA7Zm9yKHZhciBpPWUubGVuZ3RoLHI9bi5sZW5ndGgsbz0wLHM9TWF0aC5taW4oaSxyKTtzPm8mJmVbb109PT1uW29dOykrK287cmV0dXJuIG8hPT1zJiYoaT1lW29dLHI9bltvXSkscj5pPy0xOmk+cj8xOjB9LHQuaXNFbmNvZGluZz1mdW5jdGlvbih0KXtzd2l0Y2goU3RyaW5nKHQpLnRvTG93ZXJDYXNlKCkpe2Nhc2VcImhleFwiOmNhc2VcInV0ZjhcIjpjYXNlXCJ1dGYtOFwiOmNhc2VcImFzY2lpXCI6Y2FzZVwiYmluYXJ5XCI6Y2FzZVwiYmFzZTY0XCI6Y2FzZVwicmF3XCI6Y2FzZVwidWNzMlwiOmNhc2VcInVjcy0yXCI6Y2FzZVwidXRmMTZsZVwiOmNhc2VcInV0Zi0xNmxlXCI6cmV0dXJuITA7ZGVmYXVsdDpyZXR1cm4hMX19LHQuY29uY2F0PWZ1bmN0aW9uKGUsbil7aWYoISQoZSkpdGhyb3cgbmV3IFR5cGVFcnJvcihcImxpc3QgYXJndW1lbnQgbXVzdCBiZSBhbiBBcnJheSBvZiBCdWZmZXJzLlwiKTtpZigwPT09ZS5sZW5ndGgpcmV0dXJuIG5ldyB0KDApO3ZhciBpO2lmKHZvaWQgMD09PW4pZm9yKG49MCxpPTA7aTxlLmxlbmd0aDtpKyspbis9ZVtpXS5sZW5ndGg7dmFyIHI9bmV3IHQobiksbz0wO2ZvcihpPTA7aTxlLmxlbmd0aDtpKyspe3ZhciBzPWVbaV07cy5jb3B5KHIsbyksbys9cy5sZW5ndGh9cmV0dXJuIHJ9LHQuYnl0ZUxlbmd0aD15LHQucHJvdG90eXBlLmxlbmd0aD12b2lkIDAsdC5wcm90b3R5cGUucGFyZW50PXZvaWQgMCx0LnByb3RvdHlwZS50b1N0cmluZz1mdW5jdGlvbigpe3ZhciB0PTB8dGhpcy5sZW5ndGg7cmV0dXJuIDA9PT10P1wiXCI6MD09PWFyZ3VtZW50cy5sZW5ndGg/SSh0aGlzLDAsdCk6di5hcHBseSh0aGlzLGFyZ3VtZW50cyl9LHQucHJvdG90eXBlLmVxdWFscz1mdW5jdGlvbihlKXtpZighdC5pc0J1ZmZlcihlKSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiQXJndW1lbnQgbXVzdCBiZSBhIEJ1ZmZlclwiKTtyZXR1cm4gdGhpcz09PWU/ITA6MD09PXQuY29tcGFyZSh0aGlzLGUpfSx0LnByb3RvdHlwZS5pbnNwZWN0PWZ1bmN0aW9uKCl7dmFyIHQ9XCJcIixuPWUuSU5TUEVDVF9NQVhfQllURVM7cmV0dXJuIHRoaXMubGVuZ3RoPjAmJih0PXRoaXMudG9TdHJpbmcoXCJoZXhcIiwwLG4pLm1hdGNoKC8uezJ9L2cpLmpvaW4oXCIgXCIpLHRoaXMubGVuZ3RoPm4mJih0Kz1cIiAuLi4gXCIpKSxcIjxCdWZmZXIgXCIrdCtcIj5cIn0sdC5wcm90b3R5cGUuY29tcGFyZT1mdW5jdGlvbihlKXtpZighdC5pc0J1ZmZlcihlKSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiQXJndW1lbnQgbXVzdCBiZSBhIEJ1ZmZlclwiKTtyZXR1cm4gdGhpcz09PWU/MDp0LmNvbXBhcmUodGhpcyxlKX0sdC5wcm90b3R5cGUuaW5kZXhPZj1mdW5jdGlvbihlLG4pe2Z1bmN0aW9uIGkodCxlLG4pe2Zvcih2YXIgaT0tMSxyPTA7bityPHQubGVuZ3RoO3IrKylpZih0W24rcl09PT1lWy0xPT09aT8wOnItaV0pe2lmKC0xPT09aSYmKGk9ciksci1pKzE9PT1lLmxlbmd0aClyZXR1cm4gbitpfWVsc2UgaT0tMTtyZXR1cm4tMX1pZihuPjIxNDc0ODM2NDc/bj0yMTQ3NDgzNjQ3Oi0yMTQ3NDgzNjQ4Pm4mJihuPS0yMTQ3NDgzNjQ4KSxuPj49MCwwPT09dGhpcy5sZW5ndGgpcmV0dXJuLTE7aWYobj49dGhpcy5sZW5ndGgpcmV0dXJuLTE7aWYoMD5uJiYobj1NYXRoLm1heCh0aGlzLmxlbmd0aCtuLDApKSxcInN0cmluZ1wiPT10eXBlb2YgZSlyZXR1cm4gMD09PWUubGVuZ3RoPy0xOlN0cmluZy5wcm90b3R5cGUuaW5kZXhPZi5jYWxsKHRoaXMsZSxuKTtpZih0LmlzQnVmZmVyKGUpKXJldHVybiBpKHRoaXMsZSxuKTtpZihcIm51bWJlclwiPT10eXBlb2YgZSlyZXR1cm4gdC5UWVBFRF9BUlJBWV9TVVBQT1JUJiZcImZ1bmN0aW9uXCI9PT1VaW50OEFycmF5LnByb3RvdHlwZS5pbmRleE9mP1VpbnQ4QXJyYXkucHJvdG90eXBlLmluZGV4T2YuY2FsbCh0aGlzLGUsbik6aSh0aGlzLFtlXSxuKTt0aHJvdyBuZXcgVHlwZUVycm9yKFwidmFsIG11c3QgYmUgc3RyaW5nLCBudW1iZXIgb3IgQnVmZmVyXCIpfSx0LnByb3RvdHlwZS5nZXQ9ZnVuY3Rpb24odCl7cmV0dXJuIGNvbnNvbGUubG9nKFwiLmdldCgpIGlzIGRlcHJlY2F0ZWQuIEFjY2VzcyB1c2luZyBhcnJheSBpbmRleGVzIGluc3RlYWQuXCIpLHRoaXMucmVhZFVJbnQ4KHQpfSx0LnByb3RvdHlwZS5zZXQ9ZnVuY3Rpb24odCxlKXtyZXR1cm4gY29uc29sZS5sb2coXCIuc2V0KCkgaXMgZGVwcmVjYXRlZC4gQWNjZXNzIHVzaW5nIGFycmF5IGluZGV4ZXMgaW5zdGVhZC5cIiksdGhpcy53cml0ZVVJbnQ4KHQsZSl9LHQucHJvdG90eXBlLndyaXRlPWZ1bmN0aW9uKHQsZSxuLGkpe2lmKHZvaWQgMD09PWUpaT1cInV0ZjhcIixuPXRoaXMubGVuZ3RoLGU9MDtlbHNlIGlmKHZvaWQgMD09PW4mJlwic3RyaW5nXCI9PXR5cGVvZiBlKWk9ZSxuPXRoaXMubGVuZ3RoLGU9MDtlbHNlIGlmKGlzRmluaXRlKGUpKWU9MHxlLGlzRmluaXRlKG4pPyhuPTB8bix2b2lkIDA9PT1pJiYoaT1cInV0ZjhcIikpOihpPW4sbj12b2lkIDApO2Vsc2V7dmFyIHI9aTtpPWUsZT0wfG4sbj1yfXZhciBvPXRoaXMubGVuZ3RoLWU7aWYoKHZvaWQgMD09PW58fG4+bykmJihuPW8pLHQubGVuZ3RoPjAmJigwPm58fDA+ZSl8fGU+dGhpcy5sZW5ndGgpdGhyb3cgbmV3IFJhbmdlRXJyb3IoXCJhdHRlbXB0IHRvIHdyaXRlIG91dHNpZGUgYnVmZmVyIGJvdW5kc1wiKTtpfHwoaT1cInV0ZjhcIik7Zm9yKHZhciBzPSExOzspc3dpdGNoKGkpe2Nhc2VcImhleFwiOnJldHVybiBFKHRoaXMsdCxlLG4pO2Nhc2VcInV0ZjhcIjpjYXNlXCJ1dGYtOFwiOnJldHVybiBTKHRoaXMsdCxlLG4pO2Nhc2VcImFzY2lpXCI6cmV0dXJuIEEodGhpcyx0LGUsbik7Y2FzZVwiYmluYXJ5XCI6cmV0dXJuIHcodGhpcyx0LGUsbik7Y2FzZVwiYmFzZTY0XCI6cmV0dXJuIFQodGhpcyx0LGUsbik7Y2FzZVwidWNzMlwiOmNhc2VcInVjcy0yXCI6Y2FzZVwidXRmMTZsZVwiOmNhc2VcInV0Zi0xNmxlXCI6cmV0dXJuIGIodGhpcyx0LGUsbik7ZGVmYXVsdDppZihzKXRocm93IG5ldyBUeXBlRXJyb3IoXCJVbmtub3duIGVuY29kaW5nOiBcIitpKTtpPShcIlwiK2kpLnRvTG93ZXJDYXNlKCkscz0hMH19LHQucHJvdG90eXBlLnRvSlNPTj1mdW5jdGlvbigpe3JldHVybnt0eXBlOlwiQnVmZmVyXCIsZGF0YTpBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbCh0aGlzLl9hcnJ8fHRoaXMsMCl9fTt2YXIgUT00MDk2O3QucHJvdG90eXBlLnNsaWNlPWZ1bmN0aW9uKGUsbil7dmFyIGk9dGhpcy5sZW5ndGg7ZT1+fmUsbj12b2lkIDA9PT1uP2k6fn5uLDA+ZT8oZSs9aSwwPmUmJihlPTApKTplPmkmJihlPWkpLDA+bj8obis9aSwwPm4mJihuPTApKTpuPmkmJihuPWkpLGU+biYmKG49ZSk7dmFyIHI7aWYodC5UWVBFRF9BUlJBWV9TVVBQT1JUKXI9dC5fYXVnbWVudCh0aGlzLnN1YmFycmF5KGUsbikpO2Vsc2V7dmFyIG89bi1lO3I9bmV3IHQobyx2b2lkIDApO2Zvcih2YXIgcz0wO28+cztzKyspcltzXT10aGlzW3MrZV19cmV0dXJuIHIubGVuZ3RoJiYoci5wYXJlbnQ9dGhpcy5wYXJlbnR8fHRoaXMpLHJ9LHQucHJvdG90eXBlLnJlYWRVSW50TEU9ZnVuY3Rpb24odCxlLG4pe3Q9MHx0LGU9MHxlLG58fGsodCxlLHRoaXMubGVuZ3RoKTtmb3IodmFyIGk9dGhpc1t0XSxyPTEsbz0wOysrbzxlJiYocio9MjU2KTspaSs9dGhpc1t0K29dKnI7cmV0dXJuIGl9LHQucHJvdG90eXBlLnJlYWRVSW50QkU9ZnVuY3Rpb24odCxlLG4pe3Q9MHx0LGU9MHxlLG58fGsodCxlLHRoaXMubGVuZ3RoKTtmb3IodmFyIGk9dGhpc1t0Ky0tZV0scj0xO2U+MCYmKHIqPTI1Nik7KWkrPXRoaXNbdCstLWVdKnI7cmV0dXJuIGl9LHQucHJvdG90eXBlLnJlYWRVSW50OD1mdW5jdGlvbih0LGUpe3JldHVybiBlfHxrKHQsMSx0aGlzLmxlbmd0aCksdGhpc1t0XX0sdC5wcm90b3R5cGUucmVhZFVJbnQxNkxFPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIGV8fGsodCwyLHRoaXMubGVuZ3RoKSx0aGlzW3RdfHRoaXNbdCsxXTw8OH0sdC5wcm90b3R5cGUucmVhZFVJbnQxNkJFPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIGV8fGsodCwyLHRoaXMubGVuZ3RoKSx0aGlzW3RdPDw4fHRoaXNbdCsxXX0sdC5wcm90b3R5cGUucmVhZFVJbnQzMkxFPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIGV8fGsodCw0LHRoaXMubGVuZ3RoKSwodGhpc1t0XXx0aGlzW3QrMV08PDh8dGhpc1t0KzJdPDwxNikrMTY3NzcyMTYqdGhpc1t0KzNdfSx0LnByb3RvdHlwZS5yZWFkVUludDMyQkU9ZnVuY3Rpb24odCxlKXtyZXR1cm4gZXx8ayh0LDQsdGhpcy5sZW5ndGgpLDE2Nzc3MjE2KnRoaXNbdF0rKHRoaXNbdCsxXTw8MTZ8dGhpc1t0KzJdPDw4fHRoaXNbdCszXSl9LHQucHJvdG90eXBlLnJlYWRJbnRMRT1mdW5jdGlvbih0LGUsbil7dD0wfHQsZT0wfGUsbnx8ayh0LGUsdGhpcy5sZW5ndGgpO2Zvcih2YXIgaT10aGlzW3RdLHI9MSxvPTA7KytvPGUmJihyKj0yNTYpOylpKz10aGlzW3Qrb10qcjtyZXR1cm4gcio9MTI4LGk+PXImJihpLT1NYXRoLnBvdygyLDgqZSkpLGl9LHQucHJvdG90eXBlLnJlYWRJbnRCRT1mdW5jdGlvbih0LGUsbil7dD0wfHQsZT0wfGUsbnx8ayh0LGUsdGhpcy5sZW5ndGgpO2Zvcih2YXIgaT1lLHI9MSxvPXRoaXNbdCstLWldO2k+MCYmKHIqPTI1Nik7KW8rPXRoaXNbdCstLWldKnI7cmV0dXJuIHIqPTEyOCxvPj1yJiYoby09TWF0aC5wb3coMiw4KmUpKSxvfSx0LnByb3RvdHlwZS5yZWFkSW50OD1mdW5jdGlvbih0LGUpe3JldHVybiBlfHxrKHQsMSx0aGlzLmxlbmd0aCksMTI4JnRoaXNbdF0/LTEqKDI1NS10aGlzW3RdKzEpOnRoaXNbdF19LHQucHJvdG90eXBlLnJlYWRJbnQxNkxFPWZ1bmN0aW9uKHQsZSl7ZXx8ayh0LDIsdGhpcy5sZW5ndGgpO3ZhciBuPXRoaXNbdF18dGhpc1t0KzFdPDw4O3JldHVybiAzMjc2OCZuPzQyOTQ5MDE3NjB8bjpufSx0LnByb3RvdHlwZS5yZWFkSW50MTZCRT1mdW5jdGlvbih0LGUpe2V8fGsodCwyLHRoaXMubGVuZ3RoKTt2YXIgbj10aGlzW3QrMV18dGhpc1t0XTw8ODtyZXR1cm4gMzI3Njgmbj80Mjk0OTAxNzYwfG46bn0sdC5wcm90b3R5cGUucmVhZEludDMyTEU9ZnVuY3Rpb24odCxlKXtyZXR1cm4gZXx8ayh0LDQsdGhpcy5sZW5ndGgpLHRoaXNbdF18dGhpc1t0KzFdPDw4fHRoaXNbdCsyXTw8MTZ8dGhpc1t0KzNdPDwyNH0sdC5wcm90b3R5cGUucmVhZEludDMyQkU9ZnVuY3Rpb24odCxlKXtyZXR1cm4gZXx8ayh0LDQsdGhpcy5sZW5ndGgpLHRoaXNbdF08PDI0fHRoaXNbdCsxXTw8MTZ8dGhpc1t0KzJdPDw4fHRoaXNbdCszXX0sdC5wcm90b3R5cGUucmVhZEZsb2F0TEU9ZnVuY3Rpb24odCxlKXtyZXR1cm4gZXx8ayh0LDQsdGhpcy5sZW5ndGgpLFgucmVhZCh0aGlzLHQsITAsMjMsNCl9LHQucHJvdG90eXBlLnJlYWRGbG9hdEJFPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIGV8fGsodCw0LHRoaXMubGVuZ3RoKSxYLnJlYWQodGhpcyx0LCExLDIzLDQpfSx0LnByb3RvdHlwZS5yZWFkRG91YmxlTEU9ZnVuY3Rpb24odCxlKXtyZXR1cm4gZXx8ayh0LDgsdGhpcy5sZW5ndGgpLFgucmVhZCh0aGlzLHQsITAsNTIsOCl9LHQucHJvdG90eXBlLnJlYWREb3VibGVCRT1mdW5jdGlvbih0LGUpe3JldHVybiBlfHxrKHQsOCx0aGlzLmxlbmd0aCksWC5yZWFkKHRoaXMsdCwhMSw1Miw4KX0sdC5wcm90b3R5cGUud3JpdGVVSW50TEU9ZnVuY3Rpb24odCxlLG4saSl7dD0rdCxlPTB8ZSxuPTB8bixpfHxOKHRoaXMsdCxlLG4sTWF0aC5wb3coMiw4Km4pLDApO3ZhciByPTEsbz0wO2Zvcih0aGlzW2VdPTI1NSZ0OysrbzxuJiYocio9MjU2KTspdGhpc1tlK29dPXQvciYyNTU7cmV0dXJuIGUrbn0sdC5wcm90b3R5cGUud3JpdGVVSW50QkU9ZnVuY3Rpb24odCxlLG4saSl7dD0rdCxlPTB8ZSxuPTB8bixpfHxOKHRoaXMsdCxlLG4sTWF0aC5wb3coMiw4Km4pLDApO3ZhciByPW4tMSxvPTE7Zm9yKHRoaXNbZStyXT0yNTUmdDstLXI+PTAmJihvKj0yNTYpOyl0aGlzW2Urcl09dC9vJjI1NTtyZXR1cm4gZStufSx0LnByb3RvdHlwZS53cml0ZVVJbnQ4PWZ1bmN0aW9uKGUsbixpKXtyZXR1cm4gZT0rZSxuPTB8bixpfHxOKHRoaXMsZSxuLDEsMjU1LDApLHQuVFlQRURfQVJSQVlfU1VQUE9SVHx8KGU9TWF0aC5mbG9vcihlKSksdGhpc1tuXT0yNTUmZSxuKzF9LHQucHJvdG90eXBlLndyaXRlVUludDE2TEU9ZnVuY3Rpb24oZSxuLGkpe3JldHVybiBlPStlLG49MHxuLGl8fE4odGhpcyxlLG4sMiw2NTUzNSwwKSx0LlRZUEVEX0FSUkFZX1NVUFBPUlQ/KHRoaXNbbl09MjU1JmUsdGhpc1tuKzFdPWU+Pj44KTp4KHRoaXMsZSxuLCEwKSxuKzJ9LHQucHJvdG90eXBlLndyaXRlVUludDE2QkU9ZnVuY3Rpb24oZSxuLGkpe3JldHVybiBlPStlLG49MHxuLGl8fE4odGhpcyxlLG4sMiw2NTUzNSwwKSx0LlRZUEVEX0FSUkFZX1NVUFBPUlQ/KHRoaXNbbl09ZT4+PjgsdGhpc1tuKzFdPTI1NSZlKTp4KHRoaXMsZSxuLCExKSxuKzJ9LHQucHJvdG90eXBlLndyaXRlVUludDMyTEU9ZnVuY3Rpb24oZSxuLGkpe3JldHVybiBlPStlLG49MHxuLGl8fE4odGhpcyxlLG4sNCw0Mjk0OTY3Mjk1LDApLHQuVFlQRURfQVJSQVlfU1VQUE9SVD8odGhpc1tuKzNdPWU+Pj4yNCx0aGlzW24rMl09ZT4+PjE2LHRoaXNbbisxXT1lPj4+OCx0aGlzW25dPTI1NSZlKTpDKHRoaXMsZSxuLCEwKSxuKzR9LHQucHJvdG90eXBlLndyaXRlVUludDMyQkU9ZnVuY3Rpb24oZSxuLGkpe3JldHVybiBlPStlLG49MHxuLGl8fE4odGhpcyxlLG4sNCw0Mjk0OTY3Mjk1LDApLHQuVFlQRURfQVJSQVlfU1VQUE9SVD8odGhpc1tuXT1lPj4+MjQsdGhpc1tuKzFdPWU+Pj4xNix0aGlzW24rMl09ZT4+PjgsdGhpc1tuKzNdPTI1NSZlKTpDKHRoaXMsZSxuLCExKSxuKzR9LHQucHJvdG90eXBlLndyaXRlSW50TEU9ZnVuY3Rpb24odCxlLG4saSl7aWYodD0rdCxlPTB8ZSwhaSl7dmFyIHI9TWF0aC5wb3coMiw4Km4tMSk7Tih0aGlzLHQsZSxuLHItMSwtcil9dmFyIG89MCxzPTEsYT0wPnQ/MTowO2Zvcih0aGlzW2VdPTI1NSZ0OysrbzxuJiYocyo9MjU2KTspdGhpc1tlK29dPSh0L3M+PjApLWEmMjU1O3JldHVybiBlK259LHQucHJvdG90eXBlLndyaXRlSW50QkU9ZnVuY3Rpb24odCxlLG4saSl7aWYodD0rdCxlPTB8ZSwhaSl7dmFyIHI9TWF0aC5wb3coMiw4Km4tMSk7Tih0aGlzLHQsZSxuLHItMSwtcil9dmFyIG89bi0xLHM9MSxhPTA+dD8xOjA7Zm9yKHRoaXNbZStvXT0yNTUmdDstLW8+PTAmJihzKj0yNTYpOyl0aGlzW2Urb109KHQvcz4+MCktYSYyNTU7cmV0dXJuIGUrbn0sdC5wcm90b3R5cGUud3JpdGVJbnQ4PWZ1bmN0aW9uKGUsbixpKXtyZXR1cm4gZT0rZSxuPTB8bixpfHxOKHRoaXMsZSxuLDEsMTI3LC0xMjgpLHQuVFlQRURfQVJSQVlfU1VQUE9SVHx8KGU9TWF0aC5mbG9vcihlKSksMD5lJiYoZT0yNTUrZSsxKSx0aGlzW25dPTI1NSZlLG4rMX0sdC5wcm90b3R5cGUud3JpdGVJbnQxNkxFPWZ1bmN0aW9uKGUsbixpKXtyZXR1cm4gZT0rZSxuPTB8bixpfHxOKHRoaXMsZSxuLDIsMzI3NjcsLTMyNzY4KSx0LlRZUEVEX0FSUkFZX1NVUFBPUlQ/KHRoaXNbbl09MjU1JmUsdGhpc1tuKzFdPWU+Pj44KTp4KHRoaXMsZSxuLCEwKSxuKzJ9LHQucHJvdG90eXBlLndyaXRlSW50MTZCRT1mdW5jdGlvbihlLG4saSl7cmV0dXJuIGU9K2Usbj0wfG4saXx8Tih0aGlzLGUsbiwyLDMyNzY3LC0zMjc2OCksdC5UWVBFRF9BUlJBWV9TVVBQT1JUPyh0aGlzW25dPWU+Pj44LHRoaXNbbisxXT0yNTUmZSk6eCh0aGlzLGUsbiwhMSksbisyfSx0LnByb3RvdHlwZS53cml0ZUludDMyTEU9ZnVuY3Rpb24oZSxuLGkpe3JldHVybiBlPStlLG49MHxuLGl8fE4odGhpcyxlLG4sNCwyMTQ3NDgzNjQ3LC0yMTQ3NDgzNjQ4KSx0LlRZUEVEX0FSUkFZX1NVUFBPUlQ/KHRoaXNbbl09MjU1JmUsdGhpc1tuKzFdPWU+Pj44LHRoaXNbbisyXT1lPj4+MTYsdGhpc1tuKzNdPWU+Pj4yNCk6Qyh0aGlzLGUsbiwhMCksbis0fSx0LnByb3RvdHlwZS53cml0ZUludDMyQkU9ZnVuY3Rpb24oZSxuLGkpe3JldHVybiBlPStlLG49MHxuLGl8fE4odGhpcyxlLG4sNCwyMTQ3NDgzNjQ3LC0yMTQ3NDgzNjQ4KSwwPmUmJihlPTQyOTQ5NjcyOTUrZSsxKSx0LlRZUEVEX0FSUkFZX1NVUFBPUlQ/KHRoaXNbbl09ZT4+PjI0LHRoaXNbbisxXT1lPj4+MTYsdGhpc1tuKzJdPWU+Pj44LHRoaXNbbiszXT0yNTUmZSk6Qyh0aGlzLGUsbiwhMSksbis0fSx0LnByb3RvdHlwZS53cml0ZUZsb2F0TEU9ZnVuY3Rpb24odCxlLG4pe3JldHVybiBVKHRoaXMsdCxlLCEwLG4pfSx0LnByb3RvdHlwZS53cml0ZUZsb2F0QkU9ZnVuY3Rpb24odCxlLG4pe3JldHVybiBVKHRoaXMsdCxlLCExLG4pfSx0LnByb3RvdHlwZS53cml0ZURvdWJsZUxFPWZ1bmN0aW9uKHQsZSxuKXtyZXR1cm4gQih0aGlzLHQsZSwhMCxuKX0sdC5wcm90b3R5cGUud3JpdGVEb3VibGVCRT1mdW5jdGlvbih0LGUsbil7cmV0dXJuIEIodGhpcyx0LGUsITEsbil9LHQucHJvdG90eXBlLmNvcHk9ZnVuY3Rpb24oZSxuLGkscil7aWYoaXx8KGk9MCkscnx8MD09PXJ8fChyPXRoaXMubGVuZ3RoKSxuPj1lLmxlbmd0aCYmKG49ZS5sZW5ndGgpLG58fChuPTApLHI+MCYmaT5yJiYocj1pKSxyPT09aSlyZXR1cm4gMDtpZigwPT09ZS5sZW5ndGh8fDA9PT10aGlzLmxlbmd0aClyZXR1cm4gMDtpZigwPm4pdGhyb3cgbmV3IFJhbmdlRXJyb3IoXCJ0YXJnZXRTdGFydCBvdXQgb2YgYm91bmRzXCIpO2lmKDA+aXx8aT49dGhpcy5sZW5ndGgpdGhyb3cgbmV3IFJhbmdlRXJyb3IoXCJzb3VyY2VTdGFydCBvdXQgb2YgYm91bmRzXCIpO2lmKDA+cil0aHJvdyBuZXcgUmFuZ2VFcnJvcihcInNvdXJjZUVuZCBvdXQgb2YgYm91bmRzXCIpO3I+dGhpcy5sZW5ndGgmJihyPXRoaXMubGVuZ3RoKSxlLmxlbmd0aC1uPHItaSYmKHI9ZS5sZW5ndGgtbitpKTt2YXIgbyxzPXItaTtpZih0aGlzPT09ZSYmbj5pJiZyPm4pZm9yKG89cy0xO28+PTA7by0tKWVbbytuXT10aGlzW28raV07ZWxzZSBpZigxZTM+c3x8IXQuVFlQRURfQVJSQVlfU1VQUE9SVClmb3Iobz0wO3M+bztvKyspZVtvK25dPXRoaXNbbytpXTtlbHNlIGUuX3NldCh0aGlzLnN1YmFycmF5KGksaStzKSxuKTtyZXR1cm4gc30sdC5wcm90b3R5cGUuZmlsbD1mdW5jdGlvbih0LGUsbil7aWYodHx8KHQ9MCksZXx8KGU9MCksbnx8KG49dGhpcy5sZW5ndGgpLGU+bil0aHJvdyBuZXcgUmFuZ2VFcnJvcihcImVuZCA8IHN0YXJ0XCIpO2lmKG4hPT1lJiYwIT09dGhpcy5sZW5ndGgpe2lmKDA+ZXx8ZT49dGhpcy5sZW5ndGgpdGhyb3cgbmV3IFJhbmdlRXJyb3IoXCJzdGFydCBvdXQgb2YgYm91bmRzXCIpO2lmKDA+bnx8bj50aGlzLmxlbmd0aCl0aHJvdyBuZXcgUmFuZ2VFcnJvcihcImVuZCBvdXQgb2YgYm91bmRzXCIpO3ZhciBpO2lmKFwibnVtYmVyXCI9PXR5cGVvZiB0KWZvcihpPWU7bj5pO2krKyl0aGlzW2ldPXQ7ZWxzZXt2YXIgcj1ZKHQudG9TdHJpbmcoKSksbz1yLmxlbmd0aDtmb3IoaT1lO24+aTtpKyspdGhpc1tpXT1yW2klb119cmV0dXJuIHRoaXN9fSx0LnByb3RvdHlwZS50b0FycmF5QnVmZmVyPWZ1bmN0aW9uKCl7aWYoXCJ1bmRlZmluZWRcIiE9dHlwZW9mIFVpbnQ4QXJyYXkpe2lmKHQuVFlQRURfQVJSQVlfU1VQUE9SVClyZXR1cm4gbmV3IHQodGhpcykuYnVmZmVyO2Zvcih2YXIgZT1uZXcgVWludDhBcnJheSh0aGlzLmxlbmd0aCksbj0wLGk9ZS5sZW5ndGg7aT5uO24rPTEpZVtuXT10aGlzW25dO3JldHVybiBlLmJ1ZmZlcn10aHJvdyBuZXcgVHlwZUVycm9yKFwiQnVmZmVyLnRvQXJyYXlCdWZmZXIgbm90IHN1cHBvcnRlZCBpbiB0aGlzIGJyb3dzZXJcIil9O3ZhciBKPXQucHJvdG90eXBlO3QuX2F1Z21lbnQ9ZnVuY3Rpb24oZSl7cmV0dXJuIGUuY29uc3RydWN0b3I9dCxlLl9pc0J1ZmZlcj0hMCxlLl9zZXQ9ZS5zZXQsZS5nZXQ9Si5nZXQsZS5zZXQ9Si5zZXQsZS53cml0ZT1KLndyaXRlLGUudG9TdHJpbmc9Si50b1N0cmluZyxlLnRvTG9jYWxlU3RyaW5nPUoudG9TdHJpbmcsZS50b0pTT049Si50b0pTT04sZS5lcXVhbHM9Si5lcXVhbHMsZS5jb21wYXJlPUouY29tcGFyZSxlLmluZGV4T2Y9Si5pbmRleE9mLGUuY29weT1KLmNvcHksZS5zbGljZT1KLnNsaWNlLGUucmVhZFVJbnRMRT1KLnJlYWRVSW50TEUsZS5yZWFkVUludEJFPUoucmVhZFVJbnRCRSxlLnJlYWRVSW50OD1KLnJlYWRVSW50OCxlLnJlYWRVSW50MTZMRT1KLnJlYWRVSW50MTZMRSxlLnJlYWRVSW50MTZCRT1KLnJlYWRVSW50MTZCRSxlLnJlYWRVSW50MzJMRT1KLnJlYWRVSW50MzJMRSxlLnJlYWRVSW50MzJCRT1KLnJlYWRVSW50MzJCRSxlLnJlYWRJbnRMRT1KLnJlYWRJbnRMRSxlLnJlYWRJbnRCRT1KLnJlYWRJbnRCRSxlLnJlYWRJbnQ4PUoucmVhZEludDgsZS5yZWFkSW50MTZMRT1KLnJlYWRJbnQxNkxFLGUucmVhZEludDE2QkU9Si5yZWFkSW50MTZCRSxlLnJlYWRJbnQzMkxFPUoucmVhZEludDMyTEUsZS5yZWFkSW50MzJCRT1KLnJlYWRJbnQzMkJFLGUucmVhZEZsb2F0TEU9Si5yZWFkRmxvYXRMRSxlLnJlYWRGbG9hdEJFPUoucmVhZEZsb2F0QkUsZS5yZWFkRG91YmxlTEU9Si5yZWFkRG91YmxlTEUsZS5yZWFkRG91YmxlQkU9Si5yZWFkRG91YmxlQkUsZS53cml0ZVVJbnQ4PUoud3JpdGVVSW50OCxlLndyaXRlVUludExFPUoud3JpdGVVSW50TEUsZS53cml0ZVVJbnRCRT1KLndyaXRlVUludEJFLGUud3JpdGVVSW50MTZMRT1KLndyaXRlVUludDE2TEUsZS53cml0ZVVJbnQxNkJFPUoud3JpdGVVSW50MTZCRSxlLndyaXRlVUludDMyTEU9Si53cml0ZVVJbnQzMkxFLGUud3JpdGVVSW50MzJCRT1KLndyaXRlVUludDMyQkUsZS53cml0ZUludExFPUoud3JpdGVJbnRMRSxlLndyaXRlSW50QkU9Si53cml0ZUludEJFLGUud3JpdGVJbnQ4PUoud3JpdGVJbnQ4LGUud3JpdGVJbnQxNkxFPUoud3JpdGVJbnQxNkxFLGUud3JpdGVJbnQxNkJFPUoud3JpdGVJbnQxNkJFLGUud3JpdGVJbnQzMkxFPUoud3JpdGVJbnQzMkxFLGUud3JpdGVJbnQzMkJFPUoud3JpdGVJbnQzMkJFLGUud3JpdGVGbG9hdExFPUoud3JpdGVGbG9hdExFLGUud3JpdGVGbG9hdEJFPUoud3JpdGVGbG9hdEJFLGUud3JpdGVEb3VibGVMRT1KLndyaXRlRG91YmxlTEUsZS53cml0ZURvdWJsZUJFPUoud3JpdGVEb3VibGVCRSxlLmZpbGw9Si5maWxsLGUuaW5zcGVjdD1KLmluc3BlY3QsZS50b0FycmF5QnVmZmVyPUoudG9BcnJheUJ1ZmZlcixlfTt2YXIgdHQ9L1teK1xcLzAtOUEtWmEtei1fXS9nfSkuY2FsbChlLG4oNzApLkJ1ZmZlcixmdW5jdGlvbigpe3JldHVybiB0aGlzfSgpKX0sZnVuY3Rpb24odCxlLG4pe3ZhciBpPVwiQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ejAxMjM0NTY3ODkrL1wiOyFmdW5jdGlvbih0KXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBlKHQpe3ZhciBlPXQuY2hhckNvZGVBdCgwKTtyZXR1cm4gZT09PXN8fGU9PT1sPzYyOmU9PT1hfHxlPT09Zj82Mzp1PmU/LTE6dSsxMD5lP2UtdSsyNisyNjpjKzI2PmU/ZS1jOmgrMjY+ZT9lLWgrMjY6dm9pZCAwfWZ1bmN0aW9uIG4odCl7ZnVuY3Rpb24gbih0KXtoW2wrK109dH12YXIgaSxyLHMsYSx1LGg7aWYodC5sZW5ndGglND4wKXRocm93IG5ldyBFcnJvcihcIkludmFsaWQgc3RyaW5nLiBMZW5ndGggbXVzdCBiZSBhIG11bHRpcGxlIG9mIDRcIik7dmFyIGM9dC5sZW5ndGg7dT1cIj1cIj09PXQuY2hhckF0KGMtMik/MjpcIj1cIj09PXQuY2hhckF0KGMtMSk/MTowLGg9bmV3IG8oMyp0Lmxlbmd0aC80LXUpLHM9dT4wP3QubGVuZ3RoLTQ6dC5sZW5ndGg7dmFyIGw9MDtmb3IoaT0wLHI9MDtzPmk7aSs9NCxyKz0zKWE9ZSh0LmNoYXJBdChpKSk8PDE4fGUodC5jaGFyQXQoaSsxKSk8PDEyfGUodC5jaGFyQXQoaSsyKSk8PDZ8ZSh0LmNoYXJBdChpKzMpKSxuKCgxNjcxMTY4MCZhKT4+MTYpLG4oKDY1MjgwJmEpPj44KSxuKDI1NSZhKTtyZXR1cm4gMj09PXU/KGE9ZSh0LmNoYXJBdChpKSk8PDJ8ZSh0LmNoYXJBdChpKzEpKT4+NCxuKDI1NSZhKSk6MT09PXUmJihhPWUodC5jaGFyQXQoaSkpPDwxMHxlKHQuY2hhckF0KGkrMSkpPDw0fGUodC5jaGFyQXQoaSsyKSk+PjIsbihhPj44JjI1NSksbigyNTUmYSkpLGh9ZnVuY3Rpb24gcih0KXtmdW5jdGlvbiBlKHQpe3JldHVybiBpLmNoYXJBdCh0KX1mdW5jdGlvbiBuKHQpe3JldHVybiBlKHQ+PjE4JjYzKStlKHQ+PjEyJjYzKStlKHQ+PjYmNjMpK2UoNjMmdCl9dmFyIHIsbyxzLGE9dC5sZW5ndGglMyx1PVwiXCI7Zm9yKHI9MCxzPXQubGVuZ3RoLWE7cz5yO3IrPTMpbz0odFtyXTw8MTYpKyh0W3IrMV08PDgpK3RbcisyXSx1Kz1uKG8pO3N3aXRjaChhKXtjYXNlIDE6bz10W3QubGVuZ3RoLTFdLHUrPWUobz4+MiksdSs9ZShvPDw0JjYzKSx1Kz1cIj09XCI7YnJlYWs7Y2FzZSAyOm89KHRbdC5sZW5ndGgtMl08PDgpK3RbdC5sZW5ndGgtMV0sdSs9ZShvPj4xMCksdSs9ZShvPj40JjYzKSx1Kz1lKG88PDImNjMpLHUrPVwiPVwifXJldHVybiB1fXZhciBvPVwidW5kZWZpbmVkXCIhPXR5cGVvZiBVaW50OEFycmF5P1VpbnQ4QXJyYXk6QXJyYXkscz1cIitcIi5jaGFyQ29kZUF0KDApLGE9XCIvXCIuY2hhckNvZGVBdCgwKSx1PVwiMFwiLmNoYXJDb2RlQXQoMCksaD1cImFcIi5jaGFyQ29kZUF0KDApLGM9XCJBXCIuY2hhckNvZGVBdCgwKSxsPVwiLVwiLmNoYXJDb2RlQXQoMCksZj1cIl9cIi5jaGFyQ29kZUF0KDApO3QudG9CeXRlQXJyYXk9bix0LmZyb21CeXRlQXJyYXk9cn0oZSl9LGZ1bmN0aW9uKHQsZSl7ZS5yZWFkPWZ1bmN0aW9uKHQsZSxuLGkscil7dmFyIG8scyxhPTgqci1pLTEsdT0oMTw8YSktMSxoPXU+PjEsYz0tNyxsPW4/ci0xOjAsZj1uPy0xOjEsZD10W2UrbF07Zm9yKGwrPWYsbz1kJigxPDwtYyktMSxkPj49LWMsYys9YTtjPjA7bz0yNTYqbyt0W2UrbF0sbCs9ZixjLT04KTtmb3Iocz1vJigxPDwtYyktMSxvPj49LWMsYys9aTtjPjA7cz0yNTYqcyt0W2UrbF0sbCs9ZixjLT04KTtpZigwPT09bylvPTEtaDtlbHNle2lmKG89PT11KXJldHVybiBzP05hTjooZD8tMToxKSooMS8wKTtzKz1NYXRoLnBvdygyLGkpLG8tPWh9cmV0dXJuKGQ/LTE6MSkqcypNYXRoLnBvdygyLG8taSl9LGUud3JpdGU9ZnVuY3Rpb24odCxlLG4saSxyLG8pe3ZhciBzLGEsdSxoPTgqby1yLTEsYz0oMTw8aCktMSxsPWM+PjEsZj0yMz09PXI/TWF0aC5wb3coMiwtMjQpLU1hdGgucG93KDIsLTc3KTowLGQ9aT8wOm8tMSxwPWk/MTotMSxnPTA+ZXx8MD09PWUmJjA+MS9lPzE6MDtmb3IoZT1NYXRoLmFicyhlKSxpc05hTihlKXx8ZT09PTEvMD8oYT1pc05hTihlKT8xOjAscz1jKToocz1NYXRoLmZsb29yKE1hdGgubG9nKGUpL01hdGguTE4yKSxlKih1PU1hdGgucG93KDIsLXMpKTwxJiYocy0tLHUqPTIpLGUrPXMrbD49MT9mL3U6ZipNYXRoLnBvdygyLDEtbCksZSp1Pj0yJiYocysrLHUvPTIpLHMrbD49Yz8oYT0wLHM9Yyk6cytsPj0xPyhhPShlKnUtMSkqTWF0aC5wb3coMixyKSxzKz1sKTooYT1lKk1hdGgucG93KDIsbC0xKSpNYXRoLnBvdygyLHIpLHM9MCkpO3I+PTg7dFtuK2RdPTI1NSZhLGQrPXAsYS89MjU2LHItPTgpO2ZvcihzPXM8PHJ8YSxoKz1yO2g+MDt0W24rZF09MjU1JnMsZCs9cCxzLz0yNTYsaC09OCk7dFtuK2QtcF18PTEyOCpnfX0sZnVuY3Rpb24odCxlKXt2YXIgbj1BcnJheS5pc0FycmF5LGk9T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZzt0LmV4cG9ydHM9bnx8ZnVuY3Rpb24odCl7cmV0dXJuISF0JiZcIltvYmplY3QgQXJyYXldXCI9PWkuY2FsbCh0KX19LGZ1bmN0aW9uKHQsZSxuKXt2YXIgaT1uKDc1KTt0LmV4cG9ydHM9ZnVuY3Rpb24oKXtpLmxvZ2dpbmdFbmFibGVkKCkmJmNvbnNvbGUubG9nLmFwcGx5KGNvbnNvbGUsYXJndW1lbnRzKX19LGZ1bmN0aW9uKHQsZSl7dmFyIG49ITE7dC5leHBvcnRzPXtsb2dnaW5nRW5hYmxlZDpmdW5jdGlvbih0KXtyZXR1cm4gdm9pZCAwIT09dCYmKG49dCksbn19fSxmdW5jdGlvbih0LGUsbil7ZnVuY3Rpb24gaSh0LGUsbil7dmFyIGk9byh0KTtyZXR1cm4gbiYmcyh0LGUsbikmJihlPXZvaWQgMCksZT9yKGksZSk6aX12YXIgcj1uKDc3KSxvPW4oODMpLHM9big4NCk7dC5leHBvcnRzPWl9LFsxMzEsNzgsNzldLDMsWzEzMiw4MCw4MSw4Ml0sNSw2LDcsNTUsMTAsWzEzMCw4Niw5Miw4OF0sWzEzMSw4Nyw4OF0sMyxbMTMyLDg5LDkwLDkxXSw1LDYsNyxbMTMzLDkzLDk0LDk1XSw5LDEwLDExLGZ1bmN0aW9uKHQsZSl7ZnVuY3Rpb24gbigpe3RoaXMuX2V2ZW50cz10aGlzLl9ldmVudHN8fHt9LHRoaXMuX21heExpc3RlbmVycz10aGlzLl9tYXhMaXN0ZW5lcnN8fHZvaWQgMH1mdW5jdGlvbiBpKHQpe3JldHVyblwiZnVuY3Rpb25cIj09dHlwZW9mIHR9ZnVuY3Rpb24gcih0KXtyZXR1cm5cIm51bWJlclwiPT10eXBlb2YgdH1mdW5jdGlvbiBvKHQpe3JldHVyblwib2JqZWN0XCI9PXR5cGVvZiB0JiZudWxsIT09dH1mdW5jdGlvbiBzKHQpe3JldHVybiB2b2lkIDA9PT10fXQuZXhwb3J0cz1uLG4uRXZlbnRFbWl0dGVyPW4sbi5wcm90b3R5cGUuX2V2ZW50cz12b2lkIDAsbi5wcm90b3R5cGUuX21heExpc3RlbmVycz12b2lkIDAsbi5kZWZhdWx0TWF4TGlzdGVuZXJzPTEwLG4ucHJvdG90eXBlLnNldE1heExpc3RlbmVycz1mdW5jdGlvbih0KXtpZighcih0KXx8MD50fHxpc05hTih0KSl0aHJvdyBUeXBlRXJyb3IoXCJuIG11c3QgYmUgYSBwb3NpdGl2ZSBudW1iZXJcIik7cmV0dXJuIHRoaXMuX21heExpc3RlbmVycz10LHRoaXN9LG4ucHJvdG90eXBlLmVtaXQ9ZnVuY3Rpb24odCl7dmFyIGUsbixyLGEsdSxoO2lmKHRoaXMuX2V2ZW50c3x8KHRoaXMuX2V2ZW50cz17fSksXCJlcnJvclwiPT09dCYmKCF0aGlzLl9ldmVudHMuZXJyb3J8fG8odGhpcy5fZXZlbnRzLmVycm9yKSYmIXRoaXMuX2V2ZW50cy5lcnJvci5sZW5ndGgpKXtpZihlPWFyZ3VtZW50c1sxXSxlIGluc3RhbmNlb2YgRXJyb3IpdGhyb3cgZTt0aHJvdyBUeXBlRXJyb3IoJ1VuY2F1Z2h0LCB1bnNwZWNpZmllZCBcImVycm9yXCIgZXZlbnQuJyl9aWYobj10aGlzLl9ldmVudHNbdF0scyhuKSlyZXR1cm4hMTtpZihpKG4pKXN3aXRjaChhcmd1bWVudHMubGVuZ3RoKXtjYXNlIDE6bi5jYWxsKHRoaXMpO2JyZWFrO2Nhc2UgMjpuLmNhbGwodGhpcyxhcmd1bWVudHNbMV0pO2JyZWFrO2Nhc2UgMzpuLmNhbGwodGhpcyxhcmd1bWVudHNbMV0sYXJndW1lbnRzWzJdKTticmVhaztkZWZhdWx0OmE9QXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLDEpLG4uYXBwbHkodGhpcyxhKX1lbHNlIGlmKG8obikpZm9yKGE9QXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLDEpLGg9bi5zbGljZSgpLHI9aC5sZW5ndGgsdT0wO3I+dTt1KyspaFt1XS5hcHBseSh0aGlzLGEpO3JldHVybiEwfSxuLnByb3RvdHlwZS5hZGRMaXN0ZW5lcj1mdW5jdGlvbih0LGUpe3ZhciByO2lmKCFpKGUpKXRocm93IFR5cGVFcnJvcihcImxpc3RlbmVyIG11c3QgYmUgYSBmdW5jdGlvblwiKTtyZXR1cm4gdGhpcy5fZXZlbnRzfHwodGhpcy5fZXZlbnRzPXt9KSx0aGlzLl9ldmVudHMubmV3TGlzdGVuZXImJnRoaXMuZW1pdChcIm5ld0xpc3RlbmVyXCIsdCxpKGUubGlzdGVuZXIpP2UubGlzdGVuZXI6ZSksdGhpcy5fZXZlbnRzW3RdP28odGhpcy5fZXZlbnRzW3RdKT90aGlzLl9ldmVudHNbdF0ucHVzaChlKTp0aGlzLl9ldmVudHNbdF09W3RoaXMuX2V2ZW50c1t0XSxlXTp0aGlzLl9ldmVudHNbdF09ZSxvKHRoaXMuX2V2ZW50c1t0XSkmJiF0aGlzLl9ldmVudHNbdF0ud2FybmVkJiYocj1zKHRoaXMuX21heExpc3RlbmVycyk/bi5kZWZhdWx0TWF4TGlzdGVuZXJzOnRoaXMuX21heExpc3RlbmVycyxyJiZyPjAmJnRoaXMuX2V2ZW50c1t0XS5sZW5ndGg+ciYmKHRoaXMuX2V2ZW50c1t0XS53YXJuZWQ9ITAsY29uc29sZS5lcnJvcihcIihub2RlKSB3YXJuaW5nOiBwb3NzaWJsZSBFdmVudEVtaXR0ZXIgbWVtb3J5IGxlYWsgZGV0ZWN0ZWQuICVkIGxpc3RlbmVycyBhZGRlZC4gVXNlIGVtaXR0ZXIuc2V0TWF4TGlzdGVuZXJzKCkgdG8gaW5jcmVhc2UgbGltaXQuXCIsdGhpcy5fZXZlbnRzW3RdLmxlbmd0aCksXCJmdW5jdGlvblwiPT10eXBlb2YgY29uc29sZS50cmFjZSYmY29uc29sZS50cmFjZSgpKSksdGhpc30sbi5wcm90b3R5cGUub249bi5wcm90b3R5cGUuYWRkTGlzdGVuZXIsbi5wcm90b3R5cGUub25jZT1mdW5jdGlvbih0LGUpe2Z1bmN0aW9uIG4oKXt0aGlzLnJlbW92ZUxpc3RlbmVyKHQsbikscnx8KHI9ITAsZS5hcHBseSh0aGlzLGFyZ3VtZW50cykpfWlmKCFpKGUpKXRocm93IFR5cGVFcnJvcihcImxpc3RlbmVyIG11c3QgYmUgYSBmdW5jdGlvblwiKTt2YXIgcj0hMTtyZXR1cm4gbi5saXN0ZW5lcj1lLHRoaXMub24odCxuKSx0aGlzfSxuLnByb3RvdHlwZS5yZW1vdmVMaXN0ZW5lcj1mdW5jdGlvbih0LGUpe3ZhciBuLHIscyxhO2lmKCFpKGUpKXRocm93IFR5cGVFcnJvcihcImxpc3RlbmVyIG11c3QgYmUgYSBmdW5jdGlvblwiKTtpZighdGhpcy5fZXZlbnRzfHwhdGhpcy5fZXZlbnRzW3RdKXJldHVybiB0aGlzO2lmKG49dGhpcy5fZXZlbnRzW3RdLHM9bi5sZW5ndGgscj0tMSxuPT09ZXx8aShuLmxpc3RlbmVyKSYmbi5saXN0ZW5lcj09PWUpZGVsZXRlIHRoaXMuX2V2ZW50c1t0XSx0aGlzLl9ldmVudHMucmVtb3ZlTGlzdGVuZXImJnRoaXMuZW1pdChcInJlbW92ZUxpc3RlbmVyXCIsdCxlKTtlbHNlIGlmKG8obikpe2ZvcihhPXM7YS0tID4wOylpZihuW2FdPT09ZXx8blthXS5saXN0ZW5lciYmblthXS5saXN0ZW5lcj09PWUpe3I9YTticmVha31pZigwPnIpcmV0dXJuIHRoaXM7MT09PW4ubGVuZ3RoPyhuLmxlbmd0aD0wLGRlbGV0ZSB0aGlzLl9ldmVudHNbdF0pOm4uc3BsaWNlKHIsMSksdGhpcy5fZXZlbnRzLnJlbW92ZUxpc3RlbmVyJiZ0aGlzLmVtaXQoXCJyZW1vdmVMaXN0ZW5lclwiLHQsZSl9cmV0dXJuIHRoaXN9LG4ucHJvdG90eXBlLnJlbW92ZUFsbExpc3RlbmVycz1mdW5jdGlvbih0KXt2YXIgZSxuO2lmKCF0aGlzLl9ldmVudHMpcmV0dXJuIHRoaXM7aWYoIXRoaXMuX2V2ZW50cy5yZW1vdmVMaXN0ZW5lcilyZXR1cm4gMD09PWFyZ3VtZW50cy5sZW5ndGg/dGhpcy5fZXZlbnRzPXt9OnRoaXMuX2V2ZW50c1t0XSYmZGVsZXRlIHRoaXMuX2V2ZW50c1t0XSx0aGlzO2lmKDA9PT1hcmd1bWVudHMubGVuZ3RoKXtmb3IoZSBpbiB0aGlzLl9ldmVudHMpXCJyZW1vdmVMaXN0ZW5lclwiIT09ZSYmdGhpcy5yZW1vdmVBbGxMaXN0ZW5lcnMoZSk7cmV0dXJuIHRoaXMucmVtb3ZlQWxsTGlzdGVuZXJzKFwicmVtb3ZlTGlzdGVuZXJcIiksdGhpcy5fZXZlbnRzPXt9LHRoaXN9aWYobj10aGlzLl9ldmVudHNbdF0saShuKSl0aGlzLnJlbW92ZUxpc3RlbmVyKHQsbik7ZWxzZSBpZihuKWZvcig7bi5sZW5ndGg7KXRoaXMucmVtb3ZlTGlzdGVuZXIodCxuW24ubGVuZ3RoLTFdKTtyZXR1cm4gZGVsZXRlIHRoaXMuX2V2ZW50c1t0XSx0aGlzfSxuLnByb3RvdHlwZS5saXN0ZW5lcnM9ZnVuY3Rpb24odCl7dmFyIGU7cmV0dXJuIGU9dGhpcy5fZXZlbnRzJiZ0aGlzLl9ldmVudHNbdF0/aSh0aGlzLl9ldmVudHNbdF0pP1t0aGlzLl9ldmVudHNbdF1dOnRoaXMuX2V2ZW50c1t0XS5zbGljZSgpOltdfSxuLnByb3RvdHlwZS5saXN0ZW5lckNvdW50PWZ1bmN0aW9uKHQpe2lmKHRoaXMuX2V2ZW50cyl7dmFyIGU9dGhpcy5fZXZlbnRzW3RdO2lmKGkoZSkpcmV0dXJuIDE7aWYoZSlyZXR1cm4gZS5sZW5ndGh9cmV0dXJuIDB9LG4ubGlzdGVuZXJDb3VudD1mdW5jdGlvbih0LGUpe3JldHVybiB0Lmxpc3RlbmVyQ291bnQoZSl9fSxmdW5jdGlvbih0LGUsbil7ZnVuY3Rpb24gaSgpe3IuY2FsbCh0aGlzKX10LmV4cG9ydHM9aTt2YXIgcj1uKDk2KS5FdmVudEVtaXR0ZXIsbz1uKDk4KTtvKGksciksaS5SZWFkYWJsZT1uKDk5KSxpLldyaXRhYmxlPW4oMTExKSxpLkR1cGxleD1uKDExMiksaS5UcmFuc2Zvcm09bigxMTMpLGkuUGFzc1Rocm91Z2g9bigxMTQpLGkuU3RyZWFtPWksaS5wcm90b3R5cGUucGlwZT1mdW5jdGlvbih0LGUpe2Z1bmN0aW9uIG4oZSl7dC53cml0YWJsZSYmITE9PT10LndyaXRlKGUpJiZoLnBhdXNlJiZoLnBhdXNlKCl9ZnVuY3Rpb24gaSgpe2gucmVhZGFibGUmJmgucmVzdW1lJiZoLnJlc3VtZSgpfWZ1bmN0aW9uIG8oKXtjfHwoYz0hMCx0LmVuZCgpKX1mdW5jdGlvbiBzKCl7Y3x8KGM9ITAsXCJmdW5jdGlvblwiPT10eXBlb2YgdC5kZXN0cm95JiZ0LmRlc3Ryb3koKSl9ZnVuY3Rpb24gYSh0KXtpZih1KCksMD09PXIubGlzdGVuZXJDb3VudCh0aGlzLFwiZXJyb3JcIikpdGhyb3cgdH1mdW5jdGlvbiB1KCl7aC5yZW1vdmVMaXN0ZW5lcihcImRhdGFcIixuKSx0LnJlbW92ZUxpc3RlbmVyKFwiZHJhaW5cIixpKSxoLnJlbW92ZUxpc3RlbmVyKFwiZW5kXCIsbyksaC5yZW1vdmVMaXN0ZW5lcihcImNsb3NlXCIscyksaC5yZW1vdmVMaXN0ZW5lcihcImVycm9yXCIsYSksdC5yZW1vdmVMaXN0ZW5lcihcImVycm9yXCIsYSksaC5yZW1vdmVMaXN0ZW5lcihcImVuZFwiLHUpLGgucmVtb3ZlTGlzdGVuZXIoXCJjbG9zZVwiLHUpLHQucmVtb3ZlTGlzdGVuZXIoXCJjbG9zZVwiLHUpfXZhciBoPXRoaXM7aC5vbihcImRhdGFcIixuKSx0Lm9uKFwiZHJhaW5cIixpKSx0Ll9pc1N0ZGlvfHxlJiZlLmVuZD09PSExfHwoaC5vbihcImVuZFwiLG8pLGgub24oXCJjbG9zZVwiLHMpKTt2YXIgYz0hMTtyZXR1cm4gaC5vbihcImVycm9yXCIsYSksdC5vbihcImVycm9yXCIsYSksaC5vbihcImVuZFwiLHUpLGgub24oXCJjbG9zZVwiLHUpLHQub24oXCJjbG9zZVwiLHUpLHQuZW1pdChcInBpcGVcIixoKSx0fX0sZnVuY3Rpb24odCxlKXtcImZ1bmN0aW9uXCI9PXR5cGVvZiBPYmplY3QuY3JlYXRlP3QuZXhwb3J0cz1mdW5jdGlvbih0LGUpe3Quc3VwZXJfPWUsdC5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShlLnByb3RvdHlwZSx7Y29uc3RydWN0b3I6e3ZhbHVlOnQsZW51bWVyYWJsZTohMSx3cml0YWJsZTohMCxjb25maWd1cmFibGU6ITB9fSl9OnQuZXhwb3J0cz1mdW5jdGlvbih0LGUpe3Quc3VwZXJfPWU7dmFyIG49ZnVuY3Rpb24oKXt9O24ucHJvdG90eXBlPWUucHJvdG90eXBlLHQucHJvdG90eXBlPW5ldyBuLHQucHJvdG90eXBlLmNvbnN0cnVjdG9yPXR9fSxmdW5jdGlvbih0LGUsbil7ZT10LmV4cG9ydHM9bigxMDApLGUuU3RyZWFtPW4oOTcpLGUuUmVhZGFibGU9ZSxlLldyaXRhYmxlPW4oMTA3KSxlLkR1cGxleD1uKDEwNiksZS5UcmFuc2Zvcm09bigxMDkpLGUuUGFzc1Rocm91Z2g9bigxMTApfSxmdW5jdGlvbih0LGUsbil7KGZ1bmN0aW9uKGUpe2Z1bmN0aW9uIGkodCxlKXt2YXIgaT1uKDEwNik7dD10fHx7fTt2YXIgcj10LmhpZ2hXYXRlck1hcmssbz10Lm9iamVjdE1vZGU/MTY6MTYzODQ7dGhpcy5oaWdoV2F0ZXJNYXJrPXJ8fDA9PT1yP3I6byx0aGlzLmhpZ2hXYXRlck1hcms9fn50aGlzLmhpZ2hXYXRlck1hcmssdGhpcy5idWZmZXI9W10sdGhpcy5sZW5ndGg9MCx0aGlzLnBpcGVzPW51bGwsdGhpcy5waXBlc0NvdW50PTAsdGhpcy5mbG93aW5nPW51bGwsdGhpcy5lbmRlZD0hMSx0aGlzLmVuZEVtaXR0ZWQ9ITEsdGhpcy5yZWFkaW5nPSExLHRoaXMuc3luYz0hMCx0aGlzLm5lZWRSZWFkYWJsZT0hMSx0aGlzLmVtaXR0ZWRSZWFkYWJsZT0hMSx0aGlzLnJlYWRhYmxlTGlzdGVuaW5nPSExLHRoaXMub2JqZWN0TW9kZT0hIXQub2JqZWN0TW9kZSxlIGluc3RhbmNlb2YgaSYmKHRoaXMub2JqZWN0TW9kZT10aGlzLm9iamVjdE1vZGV8fCEhdC5yZWFkYWJsZU9iamVjdE1vZGUpLHRoaXMuZGVmYXVsdEVuY29kaW5nPXQuZGVmYXVsdEVuY29kaW5nfHxcInV0ZjhcIix0aGlzLnJhbk91dD0hMSx0aGlzLmF3YWl0RHJhaW49MCx0aGlzLnJlYWRpbmdNb3JlPSExLHRoaXMuZGVjb2Rlcj1udWxsLHRoaXMuZW5jb2Rpbmc9bnVsbCx0LmVuY29kaW5nJiYoTHx8KEw9bigxMDgpLlN0cmluZ0RlY29kZXIpLHRoaXMuZGVjb2Rlcj1uZXcgTCh0LmVuY29kaW5nKSx0aGlzLmVuY29kaW5nPXQuZW5jb2RpbmcpfWZ1bmN0aW9uIHIodCl7cmV0dXJuIG4oMTA2KSx0aGlzIGluc3RhbmNlb2Ygcj8odGhpcy5fcmVhZGFibGVTdGF0ZT1uZXcgaSh0LHRoaXMpLHRoaXMucmVhZGFibGU9ITAsdm9pZCBQLmNhbGwodGhpcykpOm5ldyByKHQpfWZ1bmN0aW9uIG8odCxlLG4saSxyKXt2YXIgbz1oKGUsbik7aWYobyl0LmVtaXQoXCJlcnJvclwiLG8pO2Vsc2UgaWYoSS5pc051bGxPclVuZGVmaW5lZChuKSllLnJlYWRpbmc9ITEsZS5lbmRlZHx8Yyh0LGUpO2Vsc2UgaWYoZS5vYmplY3RNb2RlfHxuJiZuLmxlbmd0aD4wKWlmKGUuZW5kZWQmJiFyKXt2YXIgYT1uZXcgRXJyb3IoXCJzdHJlYW0ucHVzaCgpIGFmdGVyIEVPRlwiKTt0LmVtaXQoXCJlcnJvclwiLGEpfWVsc2UgaWYoZS5lbmRFbWl0dGVkJiZyKXt2YXIgYT1uZXcgRXJyb3IoXCJzdHJlYW0udW5zaGlmdCgpIGFmdGVyIGVuZCBldmVudFwiKTt0LmVtaXQoXCJlcnJvclwiLGEpfWVsc2UhZS5kZWNvZGVyfHxyfHxpfHwobj1lLmRlY29kZXIud3JpdGUobikpLHJ8fChlLnJlYWRpbmc9ITEpLGUuZmxvd2luZyYmMD09PWUubGVuZ3RoJiYhZS5zeW5jPyh0LmVtaXQoXCJkYXRhXCIsbiksdC5yZWFkKDApKTooZS5sZW5ndGgrPWUub2JqZWN0TW9kZT8xOm4ubGVuZ3RoLHI/ZS5idWZmZXIudW5zaGlmdChuKTplLmJ1ZmZlci5wdXNoKG4pLGUubmVlZFJlYWRhYmxlJiZsKHQpKSxkKHQsZSk7ZWxzZSByfHwoZS5yZWFkaW5nPSExKTtyZXR1cm4gcyhlKX1mdW5jdGlvbiBzKHQpe3JldHVybiF0LmVuZGVkJiYodC5uZWVkUmVhZGFibGV8fHQubGVuZ3RoPHQuaGlnaFdhdGVyTWFya3x8MD09PXQubGVuZ3RoKX1mdW5jdGlvbiBhKHQpe2lmKHQ+PVIpdD1SO2Vsc2V7dC0tO2Zvcih2YXIgZT0xOzMyPmU7ZTw8PTEpdHw9dD4+ZTt0Kyt9cmV0dXJuIHR9ZnVuY3Rpb24gdSh0LGUpe3JldHVybiAwPT09ZS5sZW5ndGgmJmUuZW5kZWQ/MDplLm9iamVjdE1vZGU/MD09PXQ/MDoxOmlzTmFOKHQpfHxJLmlzTnVsbCh0KT9lLmZsb3dpbmcmJmUuYnVmZmVyLmxlbmd0aD9lLmJ1ZmZlclswXS5sZW5ndGg6ZS5sZW5ndGg6MD49dD8wOih0PmUuaGlnaFdhdGVyTWFyayYmKGUuaGlnaFdhdGVyTWFyaz1hKHQpKSx0PmUubGVuZ3RoP2UuZW5kZWQ/ZS5sZW5ndGg6KGUubmVlZFJlYWRhYmxlPSEwLDApOnQpfWZ1bmN0aW9uIGgodCxlKXt2YXIgbj1udWxsO3JldHVybiBJLmlzQnVmZmVyKGUpfHxJLmlzU3RyaW5nKGUpfHxJLmlzTnVsbE9yVW5kZWZpbmVkKGUpfHx0Lm9iamVjdE1vZGV8fChuPW5ldyBUeXBlRXJyb3IoXCJJbnZhbGlkIG5vbi1zdHJpbmcvYnVmZmVyIGNodW5rXCIpKSxufWZ1bmN0aW9uIGModCxlKXtpZihlLmRlY29kZXImJiFlLmVuZGVkKXt2YXIgbj1lLmRlY29kZXIuZW5kKCk7biYmbi5sZW5ndGgmJihlLmJ1ZmZlci5wdXNoKG4pLGUubGVuZ3RoKz1lLm9iamVjdE1vZGU/MTpuLmxlbmd0aCl9ZS5lbmRlZD0hMCxsKHQpfWZ1bmN0aW9uIGwodCl7dmFyIG49dC5fcmVhZGFibGVTdGF0ZTtuLm5lZWRSZWFkYWJsZT0hMSxuLmVtaXR0ZWRSZWFkYWJsZXx8KE8oXCJlbWl0UmVhZGFibGVcIixuLmZsb3dpbmcpLG4uZW1pdHRlZFJlYWRhYmxlPSEwLG4uc3luYz9lLm5leHRUaWNrKGZ1bmN0aW9uKCl7Zih0KX0pOmYodCkpfWZ1bmN0aW9uIGYodCl7TyhcImVtaXQgcmVhZGFibGVcIiksdC5lbWl0KFwicmVhZGFibGVcIikseSh0KX1mdW5jdGlvbiBkKHQsbil7bi5yZWFkaW5nTW9yZXx8KG4ucmVhZGluZ01vcmU9ITAsZS5uZXh0VGljayhmdW5jdGlvbigpe3AodCxuKX0pKX1mdW5jdGlvbiBwKHQsZSl7Zm9yKHZhciBuPWUubGVuZ3RoOyFlLnJlYWRpbmcmJiFlLmZsb3dpbmcmJiFlLmVuZGVkJiZlLmxlbmd0aDxlLmhpZ2hXYXRlck1hcmsmJihPKFwibWF5YmVSZWFkTW9yZSByZWFkIDBcIiksdC5yZWFkKDApLG4hPT1lLmxlbmd0aCk7KW49ZS5sZW5ndGg7ZS5yZWFkaW5nTW9yZT0hMX1mdW5jdGlvbiBnKHQpe3JldHVybiBmdW5jdGlvbigpe3ZhciBlPXQuX3JlYWRhYmxlU3RhdGU7TyhcInBpcGVPbkRyYWluXCIsZS5hd2FpdERyYWluKSxlLmF3YWl0RHJhaW4mJmUuYXdhaXREcmFpbi0tLDA9PT1lLmF3YWl0RHJhaW4mJmIubGlzdGVuZXJDb3VudCh0LFwiZGF0YVwiKSYmKGUuZmxvd2luZz0hMCx5KHQpKX19ZnVuY3Rpb24gXyh0LG4pe24ucmVzdW1lU2NoZWR1bGVkfHwobi5yZXN1bWVTY2hlZHVsZWQ9ITAsZS5uZXh0VGljayhmdW5jdGlvbigpe20odCxuKX0pKX1mdW5jdGlvbiBtKHQsZSl7ZS5yZXN1bWVTY2hlZHVsZWQ9ITEsdC5lbWl0KFwicmVzdW1lXCIpLHkodCksZS5mbG93aW5nJiYhZS5yZWFkaW5nJiZ0LnJlYWQoMCl9ZnVuY3Rpb24geSh0KXt2YXIgZT10Ll9yZWFkYWJsZVN0YXRlO2lmKE8oXCJmbG93XCIsZS5mbG93aW5nKSxlLmZsb3dpbmcpZG8gdmFyIG49dC5yZWFkKCk7d2hpbGUobnVsbCE9PW4mJmUuZmxvd2luZyl9ZnVuY3Rpb24gdih0LGUpe3ZhciBuLGk9ZS5idWZmZXIscj1lLmxlbmd0aCxvPSEhZS5kZWNvZGVyLHM9ISFlLm9iamVjdE1vZGU7aWYoMD09PWkubGVuZ3RoKXJldHVybiBudWxsO2lmKDA9PT1yKW49bnVsbDtlbHNlIGlmKHMpbj1pLnNoaWZ0KCk7ZWxzZSBpZighdHx8dD49ciluPW8/aS5qb2luKFwiXCIpOlQuY29uY2F0KGksciksaS5sZW5ndGg9MDtlbHNlIGlmKHQ8aVswXS5sZW5ndGgpe3ZhciBhPWlbMF07bj1hLnNsaWNlKDAsdCksaVswXT1hLnNsaWNlKHQpfWVsc2UgaWYodD09PWlbMF0ubGVuZ3RoKW49aS5zaGlmdCgpO2Vsc2V7bj1vP1wiXCI6bmV3IFQodCk7Zm9yKHZhciB1PTAsaD0wLGM9aS5sZW5ndGg7Yz5oJiZ0PnU7aCsrKXt2YXIgYT1pWzBdLGw9TWF0aC5taW4odC11LGEubGVuZ3RoKTtvP24rPWEuc2xpY2UoMCxsKTphLmNvcHkobix1LDAsbCksbDxhLmxlbmd0aD9pWzBdPWEuc2xpY2UobCk6aS5zaGlmdCgpLHUrPWx9fXJldHVybiBufWZ1bmN0aW9uIEUodCl7dmFyIG49dC5fcmVhZGFibGVTdGF0ZTtpZihuLmxlbmd0aD4wKXRocm93IG5ldyBFcnJvcihcImVuZFJlYWRhYmxlIGNhbGxlZCBvbiBub24tZW1wdHkgc3RyZWFtXCIpO24uZW5kRW1pdHRlZHx8KG4uZW5kZWQ9ITAsZS5uZXh0VGljayhmdW5jdGlvbigpe24uZW5kRW1pdHRlZHx8MCE9PW4ubGVuZ3RofHwobi5lbmRFbWl0dGVkPSEwLHQucmVhZGFibGU9ITEsdC5lbWl0KFwiZW5kXCIpKX0pKX1mdW5jdGlvbiBTKHQsZSl7Zm9yKHZhciBuPTAsaT10Lmxlbmd0aDtpPm47bisrKWUodFtuXSxuKX1mdW5jdGlvbiBBKHQsZSl7Zm9yKHZhciBuPTAsaT10Lmxlbmd0aDtpPm47bisrKWlmKHRbbl09PT1lKXJldHVybiBuO3JldHVybi0xfXQuZXhwb3J0cz1yO3ZhciB3PW4oMTAyKSxUPW4oNzApLkJ1ZmZlcjtyLlJlYWRhYmxlU3RhdGU9aTt2YXIgYj1uKDk2KS5FdmVudEVtaXR0ZXI7Yi5saXN0ZW5lckNvdW50fHwoYi5saXN0ZW5lckNvdW50PWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHQubGlzdGVuZXJzKGUpLmxlbmd0aH0pO3ZhciBQPW4oOTcpLEk9bigxMDMpO0kuaW5oZXJpdHM9bigxMDQpO3ZhciBMLE89bigxMDUpO089TyYmTy5kZWJ1Z2xvZz9PLmRlYnVnbG9nKFwic3RyZWFtXCIpOmZ1bmN0aW9uKCl7fSxJLmluaGVyaXRzKHIsUCksci5wcm90b3R5cGUucHVzaD1mdW5jdGlvbih0LGUpe3ZhciBuPXRoaXMuX3JlYWRhYmxlU3RhdGU7cmV0dXJuIEkuaXNTdHJpbmcodCkmJiFuLm9iamVjdE1vZGUmJihlPWV8fG4uZGVmYXVsdEVuY29kaW5nLGUhPT1uLmVuY29kaW5nJiYodD1uZXcgVCh0LGUpLGU9XCJcIikpLG8odGhpcyxuLHQsZSwhMSl9LHIucHJvdG90eXBlLnVuc2hpZnQ9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5fcmVhZGFibGVTdGF0ZTtyZXR1cm4gbyh0aGlzLGUsdCxcIlwiLCEwKX0sci5wcm90b3R5cGUuc2V0RW5jb2Rpbmc9ZnVuY3Rpb24odCl7cmV0dXJuIEx8fChMPW4oMTA4KS5TdHJpbmdEZWNvZGVyKSx0aGlzLl9yZWFkYWJsZVN0YXRlLmRlY29kZXI9bmV3IEwodCksdGhpcy5fcmVhZGFibGVTdGF0ZS5lbmNvZGluZz10LHRoaXN9O3ZhciBSPTgzODg2MDg7ci5wcm90b3R5cGUucmVhZD1mdW5jdGlvbih0KXtPKFwicmVhZFwiLHQpO3ZhciBlPXRoaXMuX3JlYWRhYmxlU3RhdGUsbj10O2lmKCghSS5pc051bWJlcih0KXx8dD4wKSYmKGUuZW1pdHRlZFJlYWRhYmxlPSExKSwwPT09dCYmZS5uZWVkUmVhZGFibGUmJihlLmxlbmd0aD49ZS5oaWdoV2F0ZXJNYXJrfHxlLmVuZGVkKSlyZXR1cm4gTyhcInJlYWQ6IGVtaXRSZWFkYWJsZVwiLGUubGVuZ3RoLGUuZW5kZWQpLDA9PT1lLmxlbmd0aCYmZS5lbmRlZD9FKHRoaXMpOmwodGhpcyksbnVsbDtpZih0PXUodCxlKSwwPT09dCYmZS5lbmRlZClyZXR1cm4gMD09PWUubGVuZ3RoJiZFKHRoaXMpLG51bGw7dmFyIGk9ZS5uZWVkUmVhZGFibGU7TyhcIm5lZWQgcmVhZGFibGVcIixpKSwoMD09PWUubGVuZ3RofHxlLmxlbmd0aC10PGUuaGlnaFdhdGVyTWFyaykmJihpPSEwLE8oXCJsZW5ndGggbGVzcyB0aGFuIHdhdGVybWFya1wiLGkpKSwoZS5lbmRlZHx8ZS5yZWFkaW5nKSYmKGk9ITEsTyhcInJlYWRpbmcgb3IgZW5kZWRcIixpKSksaSYmKE8oXCJkbyByZWFkXCIpLGUucmVhZGluZz0hMCxlLnN5bmM9ITAsMD09PWUubGVuZ3RoJiYoZS5uZWVkUmVhZGFibGU9ITApLHRoaXMuX3JlYWQoZS5oaWdoV2F0ZXJNYXJrKSxlLnN5bmM9ITEpLGkmJiFlLnJlYWRpbmcmJih0PXUobixlKSk7dmFyIHI7cmV0dXJuIHI9dD4wP3YodCxlKTpudWxsLEkuaXNOdWxsKHIpJiYoZS5uZWVkUmVhZGFibGU9ITAsdD0wKSxlLmxlbmd0aC09dCwwIT09ZS5sZW5ndGh8fGUuZW5kZWR8fChlLm5lZWRSZWFkYWJsZT0hMCksbiE9PXQmJmUuZW5kZWQmJjA9PT1lLmxlbmd0aCYmRSh0aGlzKSxJLmlzTnVsbChyKXx8dGhpcy5lbWl0KFwiZGF0YVwiLHIpLHJ9LHIucHJvdG90eXBlLl9yZWFkPWZ1bmN0aW9uKHQpe3RoaXMuZW1pdChcImVycm9yXCIsbmV3IEVycm9yKFwibm90IGltcGxlbWVudGVkXCIpKX0sci5wcm90b3R5cGUucGlwZT1mdW5jdGlvbih0LG4pe2Z1bmN0aW9uIGkodCl7TyhcIm9udW5waXBlXCIpLHQ9PT1sJiZvKCl9ZnVuY3Rpb24gcigpe08oXCJvbmVuZFwiKSx0LmVuZCgpfWZ1bmN0aW9uIG8oKXtPKFwiY2xlYW51cFwiKSx0LnJlbW92ZUxpc3RlbmVyKFwiY2xvc2VcIix1KSx0LnJlbW92ZUxpc3RlbmVyKFwiZmluaXNoXCIsaCksdC5yZW1vdmVMaXN0ZW5lcihcImRyYWluXCIsXyksdC5yZW1vdmVMaXN0ZW5lcihcImVycm9yXCIsYSksdC5yZW1vdmVMaXN0ZW5lcihcInVucGlwZVwiLGkpLGwucmVtb3ZlTGlzdGVuZXIoXCJlbmRcIixyKSxsLnJlbW92ZUxpc3RlbmVyKFwiZW5kXCIsbyksbC5yZW1vdmVMaXN0ZW5lcihcImRhdGFcIixzKSwhZi5hd2FpdERyYWlufHx0Ll93cml0YWJsZVN0YXRlJiYhdC5fd3JpdGFibGVTdGF0ZS5uZWVkRHJhaW58fF8oKX1mdW5jdGlvbiBzKGUpe08oXCJvbmRhdGFcIik7dmFyIG49dC53cml0ZShlKTshMT09PW4mJihPKFwiZmFsc2Ugd3JpdGUgcmVzcG9uc2UsIHBhdXNlXCIsbC5fcmVhZGFibGVTdGF0ZS5hd2FpdERyYWluKSxsLl9yZWFkYWJsZVN0YXRlLmF3YWl0RHJhaW4rKyxsLnBhdXNlKCkpfWZ1bmN0aW9uIGEoZSl7TyhcIm9uZXJyb3JcIixlKSxjKCksdC5yZW1vdmVMaXN0ZW5lcihcImVycm9yXCIsYSksMD09PWIubGlzdGVuZXJDb3VudCh0LFwiZXJyb3JcIikmJnQuZW1pdChcImVycm9yXCIsZSl9ZnVuY3Rpb24gdSgpe3QucmVtb3ZlTGlzdGVuZXIoXCJmaW5pc2hcIixoKSxjKCl9ZnVuY3Rpb24gaCgpe08oXCJvbmZpbmlzaFwiKSx0LnJlbW92ZUxpc3RlbmVyKFwiY2xvc2VcIix1KSxjKCl9ZnVuY3Rpb24gYygpe08oXCJ1bnBpcGVcIiksbC51bnBpcGUodCl9dmFyIGw9dGhpcyxmPXRoaXMuX3JlYWRhYmxlU3RhdGU7c3dpdGNoKGYucGlwZXNDb3VudCl7Y2FzZSAwOmYucGlwZXM9dDticmVhaztjYXNlIDE6Zi5waXBlcz1bZi5waXBlcyx0XTticmVhaztkZWZhdWx0OmYucGlwZXMucHVzaCh0KX1mLnBpcGVzQ291bnQrPTEsTyhcInBpcGUgY291bnQ9JWQgb3B0cz0lalwiLGYucGlwZXNDb3VudCxuKTt2YXIgZD0oIW58fG4uZW5kIT09ITEpJiZ0IT09ZS5zdGRvdXQmJnQhPT1lLnN0ZGVycixwPWQ/cjpvO2YuZW5kRW1pdHRlZD9lLm5leHRUaWNrKHApOmwub25jZShcImVuZFwiLHApLHQub24oXCJ1bnBpcGVcIixpKTt2YXIgXz1nKGwpO3JldHVybiB0Lm9uKFwiZHJhaW5cIixfKSxsLm9uKFwiZGF0YVwiLHMpLHQuX2V2ZW50cyYmdC5fZXZlbnRzLmVycm9yP3codC5fZXZlbnRzLmVycm9yKT90Ll9ldmVudHMuZXJyb3IudW5zaGlmdChhKTp0Ll9ldmVudHMuZXJyb3I9W2EsdC5fZXZlbnRzLmVycm9yXTp0Lm9uKFwiZXJyb3JcIixhKSx0Lm9uY2UoXCJjbG9zZVwiLHUpLHQub25jZShcImZpbmlzaFwiLGgpLHQuZW1pdChcInBpcGVcIixsKSxmLmZsb3dpbmd8fChPKFwicGlwZSByZXN1bWVcIiksbC5yZXN1bWUoKSksdH0sci5wcm90b3R5cGUudW5waXBlPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuX3JlYWRhYmxlU3RhdGU7aWYoMD09PWUucGlwZXNDb3VudClyZXR1cm4gdGhpcztpZigxPT09ZS5waXBlc0NvdW50KXJldHVybiB0JiZ0IT09ZS5waXBlcz90aGlzOih0fHwodD1lLnBpcGVzKSxlLnBpcGVzPW51bGwsZS5waXBlc0NvdW50PTAsZS5mbG93aW5nPSExLHQmJnQuZW1pdChcInVucGlwZVwiLHRoaXMpLHRoaXMpO2lmKCF0KXt2YXIgbj1lLnBpcGVzLGk9ZS5waXBlc0NvdW50O2UucGlwZXM9bnVsbCxlLnBpcGVzQ291bnQ9MCxlLmZsb3dpbmc9ITE7Zm9yKHZhciByPTA7aT5yO3IrKyluW3JdLmVtaXQoXCJ1bnBpcGVcIix0aGlzKTtyZXR1cm4gdGhpc312YXIgcj1BKGUucGlwZXMsdCk7cmV0dXJuLTE9PT1yP3RoaXM6KGUucGlwZXMuc3BsaWNlKHIsMSksZS5waXBlc0NvdW50LT0xLDE9PT1lLnBpcGVzQ291bnQmJihlLnBpcGVzPWUucGlwZXNbMF0pLHQuZW1pdChcInVucGlwZVwiLHRoaXMpLHRoaXMpfSxyLnByb3RvdHlwZS5vbj1mdW5jdGlvbih0LG4pe3ZhciBpPVAucHJvdG90eXBlLm9uLmNhbGwodGhpcyx0LG4pO2lmKFwiZGF0YVwiPT09dCYmITEhPT10aGlzLl9yZWFkYWJsZVN0YXRlLmZsb3dpbmcmJnRoaXMucmVzdW1lKCksXCJyZWFkYWJsZVwiPT09dCYmdGhpcy5yZWFkYWJsZSl7dmFyIHI9dGhpcy5fcmVhZGFibGVTdGF0ZTtpZighci5yZWFkYWJsZUxpc3RlbmluZylpZihyLnJlYWRhYmxlTGlzdGVuaW5nPSEwLHIuZW1pdHRlZFJlYWRhYmxlPSExLHIubmVlZFJlYWRhYmxlPSEwLHIucmVhZGluZylyLmxlbmd0aCYmbCh0aGlzLHIpO2Vsc2V7dmFyIG89dGhpcztlLm5leHRUaWNrKGZ1bmN0aW9uKCl7TyhcInJlYWRhYmxlIG5leHR0aWNrIHJlYWQgMFwiKSxvLnJlYWQoMCl9KX19cmV0dXJuIGl9LHIucHJvdG90eXBlLmFkZExpc3RlbmVyPXIucHJvdG90eXBlLm9uLHIucHJvdG90eXBlLnJlc3VtZT1mdW5jdGlvbigpe3ZhciB0PXRoaXMuX3JlYWRhYmxlU3RhdGU7cmV0dXJuIHQuZmxvd2luZ3x8KE8oXCJyZXN1bWVcIiksdC5mbG93aW5nPSEwLHQucmVhZGluZ3x8KE8oXCJyZXN1bWUgcmVhZCAwXCIpLHRoaXMucmVhZCgwKSksXyh0aGlzLHQpKSx0aGlzfSxyLnByb3RvdHlwZS5wYXVzZT1mdW5jdGlvbigpe3JldHVybiBPKFwiY2FsbCBwYXVzZSBmbG93aW5nPSVqXCIsdGhpcy5fcmVhZGFibGVTdGF0ZS5mbG93aW5nKSwhMSE9PXRoaXMuX3JlYWRhYmxlU3RhdGUuZmxvd2luZyYmKE8oXCJwYXVzZVwiKSx0aGlzLl9yZWFkYWJsZVN0YXRlLmZsb3dpbmc9ITEsdGhpcy5lbWl0KFwicGF1c2VcIikpLHRoaXN9LHIucHJvdG90eXBlLndyYXA9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5fcmVhZGFibGVTdGF0ZSxuPSExLGk9dGhpczt0Lm9uKFwiZW5kXCIsZnVuY3Rpb24oKXtpZihPKFwid3JhcHBlZCBlbmRcIiksZS5kZWNvZGVyJiYhZS5lbmRlZCl7dmFyIHQ9ZS5kZWNvZGVyLmVuZCgpO3QmJnQubGVuZ3RoJiZpLnB1c2godCl9aS5wdXNoKG51bGwpfSksdC5vbihcImRhdGFcIixmdW5jdGlvbihyKXtpZihPKFwid3JhcHBlZCBkYXRhXCIpLGUuZGVjb2RlciYmKHI9ZS5kZWNvZGVyLndyaXRlKHIpKSxyJiYoZS5vYmplY3RNb2RlfHxyLmxlbmd0aCkpe3ZhciBvPWkucHVzaChyKTtvfHwobj0hMCx0LnBhdXNlKCkpfX0pO2Zvcih2YXIgciBpbiB0KUkuaXNGdW5jdGlvbih0W3JdKSYmSS5pc1VuZGVmaW5lZCh0aGlzW3JdKSYmKHRoaXNbcl09ZnVuY3Rpb24oZSl7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIHRbZV0uYXBwbHkodCxhcmd1bWVudHMpfX0ocikpO3ZhciBvPVtcImVycm9yXCIsXCJjbG9zZVwiLFwiZGVzdHJveVwiLFwicGF1c2VcIixcInJlc3VtZVwiXTtyZXR1cm4gUyhvLGZ1bmN0aW9uKGUpe3Qub24oZSxpLmVtaXQuYmluZChpLGUpKX0pLGkuX3JlYWQ9ZnVuY3Rpb24oZSl7TyhcIndyYXBwZWQgX3JlYWRcIixlKSxuJiYobj0hMSx0LnJlc3VtZSgpKX0saX0sci5fZnJvbUxpc3Q9dn0pLmNhbGwoZSxuKDEwMSkpfSxmdW5jdGlvbih0LGUpe2Z1bmN0aW9uIG4oKXtoPSExLHMubGVuZ3RoP3U9cy5jb25jYXQodSk6Yz0tMSx1Lmxlbmd0aCYmaSgpfWZ1bmN0aW9uIGkoKXtpZighaCl7dmFyIHQ9c2V0VGltZW91dChuKTtoPSEwO2Zvcih2YXIgZT11Lmxlbmd0aDtlOyl7Zm9yKHM9dSx1PVtdOysrYzxlOylzJiZzW2NdLnJ1bigpO2M9LTEsZT11Lmxlbmd0aH1zPW51bGwsaD0hMSxjbGVhclRpbWVvdXQodCl9fWZ1bmN0aW9uIHIodCxlKXt0aGlzLmZ1bj10LHRoaXMuYXJyYXk9ZX1mdW5jdGlvbiBvKCl7fXZhciBzLGE9dC5leHBvcnRzPXt9LHU9W10saD0hMSxjPS0xO2EubmV4dFRpY2s9ZnVuY3Rpb24odCl7dmFyIGU9bmV3IEFycmF5KGFyZ3VtZW50cy5sZW5ndGgtMSk7aWYoYXJndW1lbnRzLmxlbmd0aD4xKWZvcih2YXIgbj0xO248YXJndW1lbnRzLmxlbmd0aDtuKyspZVtuLTFdPWFyZ3VtZW50c1tuXTt1LnB1c2gobmV3IHIodCxlKSksMSE9PXUubGVuZ3RofHxofHxzZXRUaW1lb3V0KGksMCl9LHIucHJvdG90eXBlLnJ1bj1mdW5jdGlvbigpe3RoaXMuZnVuLmFwcGx5KG51bGwsdGhpcy5hcnJheSl9LGEudGl0bGU9XCJicm93c2VyXCIsYS5icm93c2VyPSEwLGEuZW52PXt9LGEuYXJndj1bXSxhLnZlcnNpb249XCJcIixhLnZlcnNpb25zPXt9LGEub249byxhLmFkZExpc3RlbmVyPW8sYS5vbmNlPW8sYS5vZmY9byxhLnJlbW92ZUxpc3RlbmVyPW8sYS5yZW1vdmVBbGxMaXN0ZW5lcnM9byxhLmVtaXQ9byxhLmJpbmRpbmc9ZnVuY3Rpb24odCl7dGhyb3cgbmV3IEVycm9yKFwicHJvY2Vzcy5iaW5kaW5nIGlzIG5vdCBzdXBwb3J0ZWRcIil9LGEuY3dkPWZ1bmN0aW9uKCl7cmV0dXJuXCIvXCJ9LGEuY2hkaXI9ZnVuY3Rpb24odCl7dGhyb3cgbmV3IEVycm9yKFwicHJvY2Vzcy5jaGRpciBpcyBub3Qgc3VwcG9ydGVkXCIpfSxhLnVtYXNrPWZ1bmN0aW9uKCl7cmV0dXJuIDB9fSxmdW5jdGlvbih0LGUpe3QuZXhwb3J0cz1BcnJheS5pc0FycmF5fHxmdW5jdGlvbih0KXtyZXR1cm5cIltvYmplY3QgQXJyYXldXCI9PU9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh0KX19LGZ1bmN0aW9uKHQsZSxuKXsoZnVuY3Rpb24odCl7ZnVuY3Rpb24gbih0KXtyZXR1cm4gQXJyYXkuaXNBcnJheT9BcnJheS5pc0FycmF5KHQpOlwiW29iamVjdCBBcnJheV1cIj09PV8odCl9ZnVuY3Rpb24gaSh0KXtyZXR1cm5cImJvb2xlYW5cIj09dHlwZW9mIHR9ZnVuY3Rpb24gcih0KXtyZXR1cm4gbnVsbD09PXR9ZnVuY3Rpb24gbyh0KXtyZXR1cm4gbnVsbD09dH1mdW5jdGlvbiBzKHQpe3JldHVyblwibnVtYmVyXCI9PXR5cGVvZiB0fWZ1bmN0aW9uIGEodCl7cmV0dXJuXCJzdHJpbmdcIj09dHlwZW9mIHR9ZnVuY3Rpb24gdSh0KXtyZXR1cm5cInN5bWJvbFwiPT10eXBlb2YgdH1mdW5jdGlvbiBoKHQpe3JldHVybiB2b2lkIDA9PT10fWZ1bmN0aW9uIGModCl7cmV0dXJuXCJbb2JqZWN0IFJlZ0V4cF1cIj09PV8odCl9ZnVuY3Rpb24gbCh0KXtyZXR1cm5cIm9iamVjdFwiPT10eXBlb2YgdCYmbnVsbCE9PXR9ZnVuY3Rpb24gZih0KXtyZXR1cm5cIltvYmplY3QgRGF0ZV1cIj09PV8odCl9ZnVuY3Rpb24gZCh0KXtyZXR1cm5cIltvYmplY3QgRXJyb3JdXCI9PT1fKHQpfHx0IGluc3RhbmNlb2YgRXJyb3J9ZnVuY3Rpb24gcCh0KXtyZXR1cm5cImZ1bmN0aW9uXCI9PXR5cGVvZiB0fWZ1bmN0aW9uIGcodCl7cmV0dXJuIG51bGw9PT10fHxcImJvb2xlYW5cIj09dHlwZW9mIHR8fFwibnVtYmVyXCI9PXR5cGVvZiB0fHxcInN0cmluZ1wiPT10eXBlb2YgdHx8XCJzeW1ib2xcIj09dHlwZW9mIHR8fFwidW5kZWZpbmVkXCI9PXR5cGVvZiB0fWZ1bmN0aW9uIF8odCl7cmV0dXJuIE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh0KX1lLmlzQXJyYXk9bixlLmlzQm9vbGVhbj1pLGUuaXNOdWxsPXIsZS5pc051bGxPclVuZGVmaW5lZD1vLGUuaXNOdW1iZXI9cyxlLmlzU3RyaW5nPWEsZS5pc1N5bWJvbD11LGUuaXNVbmRlZmluZWQ9aCxlLmlzUmVnRXhwPWMsZS5pc09iamVjdD1sLGUuaXNEYXRlPWYsZS5pc0Vycm9yPWQsZS5pc0Z1bmN0aW9uPXAsZS5pc1ByaW1pdGl2ZT1nLGUuaXNCdWZmZXI9dC5pc0J1ZmZlcn0pLmNhbGwoZSxuKDcwKS5CdWZmZXIpfSw5OCxmdW5jdGlvbih0LGUpe30sZnVuY3Rpb24odCxlLG4peyhmdW5jdGlvbihlKXtmdW5jdGlvbiBpKHQpe3JldHVybiB0aGlzIGluc3RhbmNlb2YgaT8odS5jYWxsKHRoaXMsdCksaC5jYWxsKHRoaXMsdCksdCYmdC5yZWFkYWJsZT09PSExJiYodGhpcy5yZWFkYWJsZT0hMSksdCYmdC53cml0YWJsZT09PSExJiYodGhpcy53cml0YWJsZT0hMSksdGhpcy5hbGxvd0hhbGZPcGVuPSEwLHQmJnQuYWxsb3dIYWxmT3Blbj09PSExJiYodGhpcy5hbGxvd0hhbGZPcGVuPSExKSx2b2lkIHRoaXMub25jZShcImVuZFwiLHIpKTpuZXcgaSh0KX1mdW5jdGlvbiByKCl7dGhpcy5hbGxvd0hhbGZPcGVufHx0aGlzLl93cml0YWJsZVN0YXRlLmVuZGVkfHxlLm5leHRUaWNrKHRoaXMuZW5kLmJpbmQodGhpcykpfWZ1bmN0aW9uIG8odCxlKXtmb3IodmFyIG49MCxpPXQubGVuZ3RoO2k+bjtuKyspZSh0W25dLG4pfXQuZXhwb3J0cz1pO3ZhciBzPU9iamVjdC5rZXlzfHxmdW5jdGlvbih0KXt2YXIgZT1bXTtmb3IodmFyIG4gaW4gdCllLnB1c2gobik7cmV0dXJuIGV9LGE9bigxMDMpO2EuaW5oZXJpdHM9bigxMDQpO3ZhciB1PW4oMTAwKSxoPW4oMTA3KTthLmluaGVyaXRzKGksdSksbyhzKGgucHJvdG90eXBlKSxmdW5jdGlvbih0KXtpLnByb3RvdHlwZVt0XXx8KGkucHJvdG90eXBlW3RdPWgucHJvdG90eXBlW3RdKX0pfSkuY2FsbChlLG4oMTAxKSl9LGZ1bmN0aW9uKHQsZSxuKXsoZnVuY3Rpb24oZSl7ZnVuY3Rpb24gaSh0LGUsbil7dGhpcy5jaHVuaz10LHRoaXMuZW5jb2Rpbmc9ZSx0aGlzLmNhbGxiYWNrPW59ZnVuY3Rpb24gcih0LGUpe3ZhciBpPW4oMTA2KTt0PXR8fHt9O3ZhciByPXQuaGlnaFdhdGVyTWFyayxvPXQub2JqZWN0TW9kZT8xNjoxNjM4NDt0aGlzLmhpZ2hXYXRlck1hcms9cnx8MD09PXI/cjpvLHRoaXMub2JqZWN0TW9kZT0hIXQub2JqZWN0TW9kZSxlIGluc3RhbmNlb2YgaSYmKHRoaXMub2JqZWN0TW9kZT10aGlzLm9iamVjdE1vZGV8fCEhdC53cml0YWJsZU9iamVjdE1vZGUpLHRoaXMuaGlnaFdhdGVyTWFyaz1+fnRoaXMuaGlnaFdhdGVyTWFyayx0aGlzLm5lZWREcmFpbj0hMSx0aGlzLmVuZGluZz0hMSx0aGlzLmVuZGVkPSExLHRoaXMuZmluaXNoZWQ9ITE7dmFyIHM9dC5kZWNvZGVTdHJpbmdzPT09ITE7dGhpcy5kZWNvZGVTdHJpbmdzPSFzLHRoaXMuZGVmYXVsdEVuY29kaW5nPXQuZGVmYXVsdEVuY29kaW5nfHxcInV0ZjhcIix0aGlzLmxlbmd0aD0wLHRoaXMud3JpdGluZz0hMSx0aGlzLmNvcmtlZD0wLHRoaXMuc3luYz0hMCx0aGlzLmJ1ZmZlclByb2Nlc3Npbmc9ITEsdGhpcy5vbndyaXRlPWZ1bmN0aW9uKHQpe2QoZSx0KX0sdGhpcy53cml0ZWNiPW51bGwsdGhpcy53cml0ZWxlbj0wLHRoaXMuYnVmZmVyPVtdLHRoaXMucGVuZGluZ2NiPTAsdGhpcy5wcmVmaW5pc2hlZD0hMSx0aGlzLmVycm9yRW1pdHRlZD0hMX1mdW5jdGlvbiBvKHQpe3ZhciBlPW4oMTA2KTtyZXR1cm4gdGhpcyBpbnN0YW5jZW9mIG98fHRoaXMgaW5zdGFuY2VvZiBlPyh0aGlzLl93cml0YWJsZVN0YXRlPW5ldyByKHQsdGhpcyksdGhpcy53cml0YWJsZT0hMCx2b2lkIHcuY2FsbCh0aGlzKSk6bmV3IG8odCl9ZnVuY3Rpb24gcyh0LG4saSl7dmFyIHI9bmV3IEVycm9yKFwid3JpdGUgYWZ0ZXIgZW5kXCIpO1xudC5lbWl0KFwiZXJyb3JcIixyKSxlLm5leHRUaWNrKGZ1bmN0aW9uKCl7aShyKX0pfWZ1bmN0aW9uIGEodCxuLGkscil7dmFyIG89ITA7aWYoIShBLmlzQnVmZmVyKGkpfHxBLmlzU3RyaW5nKGkpfHxBLmlzTnVsbE9yVW5kZWZpbmVkKGkpfHxuLm9iamVjdE1vZGUpKXt2YXIgcz1uZXcgVHlwZUVycm9yKFwiSW52YWxpZCBub24tc3RyaW5nL2J1ZmZlciBjaHVua1wiKTt0LmVtaXQoXCJlcnJvclwiLHMpLGUubmV4dFRpY2soZnVuY3Rpb24oKXtyKHMpfSksbz0hMX1yZXR1cm4gb31mdW5jdGlvbiB1KHQsZSxuKXtyZXR1cm4hdC5vYmplY3RNb2RlJiZ0LmRlY29kZVN0cmluZ3MhPT0hMSYmQS5pc1N0cmluZyhlKSYmKGU9bmV3IFMoZSxuKSksZX1mdW5jdGlvbiBoKHQsZSxuLHIsbyl7bj11KGUsbixyKSxBLmlzQnVmZmVyKG4pJiYocj1cImJ1ZmZlclwiKTt2YXIgcz1lLm9iamVjdE1vZGU/MTpuLmxlbmd0aDtlLmxlbmd0aCs9czt2YXIgYT1lLmxlbmd0aDxlLmhpZ2hXYXRlck1hcms7cmV0dXJuIGF8fChlLm5lZWREcmFpbj0hMCksZS53cml0aW5nfHxlLmNvcmtlZD9lLmJ1ZmZlci5wdXNoKG5ldyBpKG4scixvKSk6Yyh0LGUsITEscyxuLHIsbyksYX1mdW5jdGlvbiBjKHQsZSxuLGkscixvLHMpe2Uud3JpdGVsZW49aSxlLndyaXRlY2I9cyxlLndyaXRpbmc9ITAsZS5zeW5jPSEwLG4/dC5fd3JpdGV2KHIsZS5vbndyaXRlKTp0Ll93cml0ZShyLG8sZS5vbndyaXRlKSxlLnN5bmM9ITF9ZnVuY3Rpb24gbCh0LG4saSxyLG8pe2k/ZS5uZXh0VGljayhmdW5jdGlvbigpe24ucGVuZGluZ2NiLS0sbyhyKX0pOihuLnBlbmRpbmdjYi0tLG8ocikpLHQuX3dyaXRhYmxlU3RhdGUuZXJyb3JFbWl0dGVkPSEwLHQuZW1pdChcImVycm9yXCIscil9ZnVuY3Rpb24gZih0KXt0LndyaXRpbmc9ITEsdC53cml0ZWNiPW51bGwsdC5sZW5ndGgtPXQud3JpdGVsZW4sdC53cml0ZWxlbj0wfWZ1bmN0aW9uIGQodCxuKXt2YXIgaT10Ll93cml0YWJsZVN0YXRlLHI9aS5zeW5jLG89aS53cml0ZWNiO2lmKGYoaSksbilsKHQsaSxyLG4sbyk7ZWxzZXt2YXIgcz1tKHQsaSk7c3x8aS5jb3JrZWR8fGkuYnVmZmVyUHJvY2Vzc2luZ3x8IWkuYnVmZmVyLmxlbmd0aHx8Xyh0LGkpLHI/ZS5uZXh0VGljayhmdW5jdGlvbigpe3AodCxpLHMsbyl9KTpwKHQsaSxzLG8pfX1mdW5jdGlvbiBwKHQsZSxuLGkpe258fGcodCxlKSxlLnBlbmRpbmdjYi0tLGkoKSx2KHQsZSl9ZnVuY3Rpb24gZyh0LGUpezA9PT1lLmxlbmd0aCYmZS5uZWVkRHJhaW4mJihlLm5lZWREcmFpbj0hMSx0LmVtaXQoXCJkcmFpblwiKSl9ZnVuY3Rpb24gXyh0LGUpe2lmKGUuYnVmZmVyUHJvY2Vzc2luZz0hMCx0Ll93cml0ZXYmJmUuYnVmZmVyLmxlbmd0aD4xKXtmb3IodmFyIG49W10saT0wO2k8ZS5idWZmZXIubGVuZ3RoO2krKyluLnB1c2goZS5idWZmZXJbaV0uY2FsbGJhY2spO2UucGVuZGluZ2NiKyssYyh0LGUsITAsZS5sZW5ndGgsZS5idWZmZXIsXCJcIixmdW5jdGlvbih0KXtmb3IodmFyIGk9MDtpPG4ubGVuZ3RoO2krKyllLnBlbmRpbmdjYi0tLG5baV0odCl9KSxlLmJ1ZmZlcj1bXX1lbHNle2Zvcih2YXIgaT0wO2k8ZS5idWZmZXIubGVuZ3RoO2krKyl7dmFyIHI9ZS5idWZmZXJbaV0sbz1yLmNodW5rLHM9ci5lbmNvZGluZyxhPXIuY2FsbGJhY2ssdT1lLm9iamVjdE1vZGU/MTpvLmxlbmd0aDtpZihjKHQsZSwhMSx1LG8scyxhKSxlLndyaXRpbmcpe2krKzticmVha319aTxlLmJ1ZmZlci5sZW5ndGg/ZS5idWZmZXI9ZS5idWZmZXIuc2xpY2UoaSk6ZS5idWZmZXIubGVuZ3RoPTB9ZS5idWZmZXJQcm9jZXNzaW5nPSExfWZ1bmN0aW9uIG0odCxlKXtyZXR1cm4gZS5lbmRpbmcmJjA9PT1lLmxlbmd0aCYmIWUuZmluaXNoZWQmJiFlLndyaXRpbmd9ZnVuY3Rpb24geSh0LGUpe2UucHJlZmluaXNoZWR8fChlLnByZWZpbmlzaGVkPSEwLHQuZW1pdChcInByZWZpbmlzaFwiKSl9ZnVuY3Rpb24gdih0LGUpe3ZhciBuPW0odCxlKTtyZXR1cm4gbiYmKDA9PT1lLnBlbmRpbmdjYj8oeSh0LGUpLGUuZmluaXNoZWQ9ITAsdC5lbWl0KFwiZmluaXNoXCIpKTp5KHQsZSkpLG59ZnVuY3Rpb24gRSh0LG4saSl7bi5lbmRpbmc9ITAsdih0LG4pLGkmJihuLmZpbmlzaGVkP2UubmV4dFRpY2soaSk6dC5vbmNlKFwiZmluaXNoXCIsaSkpLG4uZW5kZWQ9ITB9dC5leHBvcnRzPW87dmFyIFM9big3MCkuQnVmZmVyO28uV3JpdGFibGVTdGF0ZT1yO3ZhciBBPW4oMTAzKTtBLmluaGVyaXRzPW4oMTA0KTt2YXIgdz1uKDk3KTtBLmluaGVyaXRzKG8sdyksby5wcm90b3R5cGUucGlwZT1mdW5jdGlvbigpe3RoaXMuZW1pdChcImVycm9yXCIsbmV3IEVycm9yKFwiQ2Fubm90IHBpcGUuIE5vdCByZWFkYWJsZS5cIikpfSxvLnByb3RvdHlwZS53cml0ZT1mdW5jdGlvbih0LGUsbil7dmFyIGk9dGhpcy5fd3JpdGFibGVTdGF0ZSxyPSExO3JldHVybiBBLmlzRnVuY3Rpb24oZSkmJihuPWUsZT1udWxsKSxBLmlzQnVmZmVyKHQpP2U9XCJidWZmZXJcIjplfHwoZT1pLmRlZmF1bHRFbmNvZGluZyksQS5pc0Z1bmN0aW9uKG4pfHwobj1mdW5jdGlvbigpe30pLGkuZW5kZWQ/cyh0aGlzLGksbik6YSh0aGlzLGksdCxuKSYmKGkucGVuZGluZ2NiKysscj1oKHRoaXMsaSx0LGUsbikpLHJ9LG8ucHJvdG90eXBlLmNvcms9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLl93cml0YWJsZVN0YXRlO3QuY29ya2VkKyt9LG8ucHJvdG90eXBlLnVuY29yaz1mdW5jdGlvbigpe3ZhciB0PXRoaXMuX3dyaXRhYmxlU3RhdGU7dC5jb3JrZWQmJih0LmNvcmtlZC0tLHQud3JpdGluZ3x8dC5jb3JrZWR8fHQuZmluaXNoZWR8fHQuYnVmZmVyUHJvY2Vzc2luZ3x8IXQuYnVmZmVyLmxlbmd0aHx8Xyh0aGlzLHQpKX0sby5wcm90b3R5cGUuX3dyaXRlPWZ1bmN0aW9uKHQsZSxuKXtuKG5ldyBFcnJvcihcIm5vdCBpbXBsZW1lbnRlZFwiKSl9LG8ucHJvdG90eXBlLl93cml0ZXY9bnVsbCxvLnByb3RvdHlwZS5lbmQ9ZnVuY3Rpb24odCxlLG4pe3ZhciBpPXRoaXMuX3dyaXRhYmxlU3RhdGU7QS5pc0Z1bmN0aW9uKHQpPyhuPXQsdD1udWxsLGU9bnVsbCk6QS5pc0Z1bmN0aW9uKGUpJiYobj1lLGU9bnVsbCksQS5pc051bGxPclVuZGVmaW5lZCh0KXx8dGhpcy53cml0ZSh0LGUpLGkuY29ya2VkJiYoaS5jb3JrZWQ9MSx0aGlzLnVuY29yaygpKSxpLmVuZGluZ3x8aS5maW5pc2hlZHx8RSh0aGlzLGksbil9fSkuY2FsbChlLG4oMTAxKSl9LGZ1bmN0aW9uKHQsZSxuKXtmdW5jdGlvbiBpKHQpe2lmKHQmJiF1KHQpKXRocm93IG5ldyBFcnJvcihcIlVua25vd24gZW5jb2Rpbmc6IFwiK3QpfWZ1bmN0aW9uIHIodCl7cmV0dXJuIHQudG9TdHJpbmcodGhpcy5lbmNvZGluZyl9ZnVuY3Rpb24gbyh0KXt0aGlzLmNoYXJSZWNlaXZlZD10Lmxlbmd0aCUyLHRoaXMuY2hhckxlbmd0aD10aGlzLmNoYXJSZWNlaXZlZD8yOjB9ZnVuY3Rpb24gcyh0KXt0aGlzLmNoYXJSZWNlaXZlZD10Lmxlbmd0aCUzLHRoaXMuY2hhckxlbmd0aD10aGlzLmNoYXJSZWNlaXZlZD8zOjB9dmFyIGE9big3MCkuQnVmZmVyLHU9YS5pc0VuY29kaW5nfHxmdW5jdGlvbih0KXtzd2l0Y2godCYmdC50b0xvd2VyQ2FzZSgpKXtjYXNlXCJoZXhcIjpjYXNlXCJ1dGY4XCI6Y2FzZVwidXRmLThcIjpjYXNlXCJhc2NpaVwiOmNhc2VcImJpbmFyeVwiOmNhc2VcImJhc2U2NFwiOmNhc2VcInVjczJcIjpjYXNlXCJ1Y3MtMlwiOmNhc2VcInV0ZjE2bGVcIjpjYXNlXCJ1dGYtMTZsZVwiOmNhc2VcInJhd1wiOnJldHVybiEwO2RlZmF1bHQ6cmV0dXJuITF9fSxoPWUuU3RyaW5nRGVjb2Rlcj1mdW5jdGlvbih0KXtzd2l0Y2godGhpcy5lbmNvZGluZz0odHx8XCJ1dGY4XCIpLnRvTG93ZXJDYXNlKCkucmVwbGFjZSgvWy1fXS8sXCJcIiksaSh0KSx0aGlzLmVuY29kaW5nKXtjYXNlXCJ1dGY4XCI6dGhpcy5zdXJyb2dhdGVTaXplPTM7YnJlYWs7Y2FzZVwidWNzMlwiOmNhc2VcInV0ZjE2bGVcIjp0aGlzLnN1cnJvZ2F0ZVNpemU9Mix0aGlzLmRldGVjdEluY29tcGxldGVDaGFyPW87YnJlYWs7Y2FzZVwiYmFzZTY0XCI6dGhpcy5zdXJyb2dhdGVTaXplPTMsdGhpcy5kZXRlY3RJbmNvbXBsZXRlQ2hhcj1zO2JyZWFrO2RlZmF1bHQ6cmV0dXJuIHZvaWQodGhpcy53cml0ZT1yKX10aGlzLmNoYXJCdWZmZXI9bmV3IGEoNiksdGhpcy5jaGFyUmVjZWl2ZWQ9MCx0aGlzLmNoYXJMZW5ndGg9MH07aC5wcm90b3R5cGUud3JpdGU9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPVwiXCI7dGhpcy5jaGFyTGVuZ3RoOyl7dmFyIG49dC5sZW5ndGg+PXRoaXMuY2hhckxlbmd0aC10aGlzLmNoYXJSZWNlaXZlZD90aGlzLmNoYXJMZW5ndGgtdGhpcy5jaGFyUmVjZWl2ZWQ6dC5sZW5ndGg7aWYodC5jb3B5KHRoaXMuY2hhckJ1ZmZlcix0aGlzLmNoYXJSZWNlaXZlZCwwLG4pLHRoaXMuY2hhclJlY2VpdmVkKz1uLHRoaXMuY2hhclJlY2VpdmVkPHRoaXMuY2hhckxlbmd0aClyZXR1cm5cIlwiO3Q9dC5zbGljZShuLHQubGVuZ3RoKSxlPXRoaXMuY2hhckJ1ZmZlci5zbGljZSgwLHRoaXMuY2hhckxlbmd0aCkudG9TdHJpbmcodGhpcy5lbmNvZGluZyk7dmFyIGk9ZS5jaGFyQ29kZUF0KGUubGVuZ3RoLTEpO2lmKCEoaT49NTUyOTYmJjU2MzE5Pj1pKSl7aWYodGhpcy5jaGFyUmVjZWl2ZWQ9dGhpcy5jaGFyTGVuZ3RoPTAsMD09PXQubGVuZ3RoKXJldHVybiBlO2JyZWFrfXRoaXMuY2hhckxlbmd0aCs9dGhpcy5zdXJyb2dhdGVTaXplLGU9XCJcIn10aGlzLmRldGVjdEluY29tcGxldGVDaGFyKHQpO3ZhciByPXQubGVuZ3RoO3RoaXMuY2hhckxlbmd0aCYmKHQuY29weSh0aGlzLmNoYXJCdWZmZXIsMCx0Lmxlbmd0aC10aGlzLmNoYXJSZWNlaXZlZCxyKSxyLT10aGlzLmNoYXJSZWNlaXZlZCksZSs9dC50b1N0cmluZyh0aGlzLmVuY29kaW5nLDAscik7dmFyIHI9ZS5sZW5ndGgtMSxpPWUuY2hhckNvZGVBdChyKTtpZihpPj01NTI5NiYmNTYzMTk+PWkpe3ZhciBvPXRoaXMuc3Vycm9nYXRlU2l6ZTtyZXR1cm4gdGhpcy5jaGFyTGVuZ3RoKz1vLHRoaXMuY2hhclJlY2VpdmVkKz1vLHRoaXMuY2hhckJ1ZmZlci5jb3B5KHRoaXMuY2hhckJ1ZmZlcixvLDAsbyksdC5jb3B5KHRoaXMuY2hhckJ1ZmZlciwwLDAsbyksZS5zdWJzdHJpbmcoMCxyKX1yZXR1cm4gZX0saC5wcm90b3R5cGUuZGV0ZWN0SW5jb21wbGV0ZUNoYXI9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPXQubGVuZ3RoPj0zPzM6dC5sZW5ndGg7ZT4wO2UtLSl7dmFyIG49dFt0Lmxlbmd0aC1lXTtpZigxPT1lJiZuPj41PT02KXt0aGlzLmNoYXJMZW5ndGg9MjticmVha31pZigyPj1lJiZuPj40PT0xNCl7dGhpcy5jaGFyTGVuZ3RoPTM7YnJlYWt9aWYoMz49ZSYmbj4+Mz09MzApe3RoaXMuY2hhckxlbmd0aD00O2JyZWFrfX10aGlzLmNoYXJSZWNlaXZlZD1lfSxoLnByb3RvdHlwZS5lbmQ9ZnVuY3Rpb24odCl7dmFyIGU9XCJcIjtpZih0JiZ0Lmxlbmd0aCYmKGU9dGhpcy53cml0ZSh0KSksdGhpcy5jaGFyUmVjZWl2ZWQpe3ZhciBuPXRoaXMuY2hhclJlY2VpdmVkLGk9dGhpcy5jaGFyQnVmZmVyLHI9dGhpcy5lbmNvZGluZztlKz1pLnNsaWNlKDAsbikudG9TdHJpbmcocil9cmV0dXJuIGV9fSxmdW5jdGlvbih0LGUsbil7ZnVuY3Rpb24gaSh0LGUpe3RoaXMuYWZ0ZXJUcmFuc2Zvcm09ZnVuY3Rpb24odCxuKXtyZXR1cm4gcihlLHQsbil9LHRoaXMubmVlZFRyYW5zZm9ybT0hMSx0aGlzLnRyYW5zZm9ybWluZz0hMSx0aGlzLndyaXRlY2I9bnVsbCx0aGlzLndyaXRlY2h1bms9bnVsbH1mdW5jdGlvbiByKHQsZSxuKXt2YXIgaT10Ll90cmFuc2Zvcm1TdGF0ZTtpLnRyYW5zZm9ybWluZz0hMTt2YXIgcj1pLndyaXRlY2I7aWYoIXIpcmV0dXJuIHQuZW1pdChcImVycm9yXCIsbmV3IEVycm9yKFwibm8gd3JpdGVjYiBpbiBUcmFuc2Zvcm0gY2xhc3NcIikpO2kud3JpdGVjaHVuaz1udWxsLGkud3JpdGVjYj1udWxsLHUuaXNOdWxsT3JVbmRlZmluZWQobil8fHQucHVzaChuKSxyJiZyKGUpO3ZhciBvPXQuX3JlYWRhYmxlU3RhdGU7by5yZWFkaW5nPSExLChvLm5lZWRSZWFkYWJsZXx8by5sZW5ndGg8by5oaWdoV2F0ZXJNYXJrKSYmdC5fcmVhZChvLmhpZ2hXYXRlck1hcmspfWZ1bmN0aW9uIG8odCl7aWYoISh0aGlzIGluc3RhbmNlb2YgbykpcmV0dXJuIG5ldyBvKHQpO2EuY2FsbCh0aGlzLHQpLHRoaXMuX3RyYW5zZm9ybVN0YXRlPW5ldyBpKHQsdGhpcyk7dmFyIGU9dGhpczt0aGlzLl9yZWFkYWJsZVN0YXRlLm5lZWRSZWFkYWJsZT0hMCx0aGlzLl9yZWFkYWJsZVN0YXRlLnN5bmM9ITEsdGhpcy5vbmNlKFwicHJlZmluaXNoXCIsZnVuY3Rpb24oKXt1LmlzRnVuY3Rpb24odGhpcy5fZmx1c2gpP3RoaXMuX2ZsdXNoKGZ1bmN0aW9uKHQpe3MoZSx0KX0pOnMoZSl9KX1mdW5jdGlvbiBzKHQsZSl7aWYoZSlyZXR1cm4gdC5lbWl0KFwiZXJyb3JcIixlKTt2YXIgbj10Ll93cml0YWJsZVN0YXRlLGk9dC5fdHJhbnNmb3JtU3RhdGU7aWYobi5sZW5ndGgpdGhyb3cgbmV3IEVycm9yKFwiY2FsbGluZyB0cmFuc2Zvcm0gZG9uZSB3aGVuIHdzLmxlbmd0aCAhPSAwXCIpO2lmKGkudHJhbnNmb3JtaW5nKXRocm93IG5ldyBFcnJvcihcImNhbGxpbmcgdHJhbnNmb3JtIGRvbmUgd2hlbiBzdGlsbCB0cmFuc2Zvcm1pbmdcIik7cmV0dXJuIHQucHVzaChudWxsKX10LmV4cG9ydHM9bzt2YXIgYT1uKDEwNiksdT1uKDEwMyk7dS5pbmhlcml0cz1uKDEwNCksdS5pbmhlcml0cyhvLGEpLG8ucHJvdG90eXBlLnB1c2g9ZnVuY3Rpb24odCxlKXtyZXR1cm4gdGhpcy5fdHJhbnNmb3JtU3RhdGUubmVlZFRyYW5zZm9ybT0hMSxhLnByb3RvdHlwZS5wdXNoLmNhbGwodGhpcyx0LGUpfSxvLnByb3RvdHlwZS5fdHJhbnNmb3JtPWZ1bmN0aW9uKHQsZSxuKXt0aHJvdyBuZXcgRXJyb3IoXCJub3QgaW1wbGVtZW50ZWRcIil9LG8ucHJvdG90eXBlLl93cml0ZT1mdW5jdGlvbih0LGUsbil7dmFyIGk9dGhpcy5fdHJhbnNmb3JtU3RhdGU7aWYoaS53cml0ZWNiPW4saS53cml0ZWNodW5rPXQsaS53cml0ZWVuY29kaW5nPWUsIWkudHJhbnNmb3JtaW5nKXt2YXIgcj10aGlzLl9yZWFkYWJsZVN0YXRlOyhpLm5lZWRUcmFuc2Zvcm18fHIubmVlZFJlYWRhYmxlfHxyLmxlbmd0aDxyLmhpZ2hXYXRlck1hcmspJiZ0aGlzLl9yZWFkKHIuaGlnaFdhdGVyTWFyayl9fSxvLnByb3RvdHlwZS5fcmVhZD1mdW5jdGlvbih0KXt2YXIgZT10aGlzLl90cmFuc2Zvcm1TdGF0ZTt1LmlzTnVsbChlLndyaXRlY2h1bmspfHwhZS53cml0ZWNifHxlLnRyYW5zZm9ybWluZz9lLm5lZWRUcmFuc2Zvcm09ITA6KGUudHJhbnNmb3JtaW5nPSEwLHRoaXMuX3RyYW5zZm9ybShlLndyaXRlY2h1bmssZS53cml0ZWVuY29kaW5nLGUuYWZ0ZXJUcmFuc2Zvcm0pKX19LGZ1bmN0aW9uKHQsZSxuKXtmdW5jdGlvbiBpKHQpe3JldHVybiB0aGlzIGluc3RhbmNlb2YgaT92b2lkIHIuY2FsbCh0aGlzLHQpOm5ldyBpKHQpfXQuZXhwb3J0cz1pO3ZhciByPW4oMTA5KSxvPW4oMTAzKTtvLmluaGVyaXRzPW4oMTA0KSxvLmluaGVyaXRzKGksciksaS5wcm90b3R5cGUuX3RyYW5zZm9ybT1mdW5jdGlvbih0LGUsbil7bihudWxsLHQpfX0sZnVuY3Rpb24odCxlLG4pe3QuZXhwb3J0cz1uKDEwNyl9LGZ1bmN0aW9uKHQsZSxuKXt0LmV4cG9ydHM9bigxMDYpfSxmdW5jdGlvbih0LGUsbil7dC5leHBvcnRzPW4oMTA5KX0sZnVuY3Rpb24odCxlLG4pe3QuZXhwb3J0cz1uKDExMCl9LGZ1bmN0aW9uKHQsZSxuKXsoZnVuY3Rpb24oZSl7dmFyIGkscj1uKDc0KSxvPW4oNjkpLHM9KG8uQmFzZVRyYW5zZm9ybSxvLkJhc2VQYXJzZXIpLGE9bigxMTYpO3QuZXhwb3J0cz1pPWZ1bmN0aW9uKHQsZSl7by5CYXNlUGFyc2VyLnByb3RvdHlwZS5jb25zdHJ1Y3Rvci5hcHBseSh0aGlzLGFyZ3VtZW50cyksdHx8KHQ9e2F1ZGlvVHJhY2tJZDotMSx2aWRlb1RyYWNrSWQ6LTEsdHJhY2tzOltdfSksdGhpcy5tdXhlcj1uZXcgYSh0KSx0aGlzLm11eGVyLm9uZGF0YT10aGlzLl9vbk1wNERhdGEuYmluZCh0aGlzKSx0aGlzLm11eGVyLm9uY29kZWNpbmZvPXRoaXMuX29uQ29kZWNJbmZvLmJpbmQodGhpcyksdGhpcy5fY29kZWNJbmZvPW51bGwsdGhpcy5fdGltZXN0YW1wPTAsZSYmKHRoaXMud29ya2VyPVwidW5kZWZpbmVkXCIhPXR5cGVvZiBXb3JrZXI/bmV3IFdvcmtlcihcIi9kaXN0L21wNC1tdXgtd29ya2VyLWJ1bmRsZS5qc1wiKTpudWxsKSx0aGlzLndvcmtlciYmKHRoaXMud29ya2VyLm9ubWVzc2FnZT1mdW5jdGlvbih0KXt0aGlzLl9vbk1wNERhdGEodC5kYXRhKX0uYmluZCh0aGlzKSx0aGlzLndvcmtlci5wb3N0TWVzc2FnZSh7bXA0TXV4UHJvZmlsZTp0fSkpfSxpLlByb2ZpbGVzPWEuUHJvZmlsZXMsaS5wcm90b3R5cGU9by5jcmVhdGVCYXNlUGFyc2VyKHtjb25zdHJ1Y3RvcjppLF9vbk1wNERhdGE6ZnVuY3Rpb24odCl7cihcIl9vbk1wNERhdGFcIiksdGhpcy5lbnF1ZXVlKG5ldyBvLlRyYW5zZmVyKG5ldyBlKHQpLFwiYnVmZmVyXCIpKX0sX29uQ29kZWNJbmZvOmZ1bmN0aW9uKHQpe3IoXCJDb2RlYyBpbmZvOiBcIit0KSx0aGlzLl9jb2RlY0luZm89dH0sX29uRmluaXNoOmZ1bmN0aW9uKHQpe3IoXCJNUDRNdXguX29uRmluaXNoXCIpLHRoaXMud29ya2VyP3RoaXMud29ya2VyLnBvc3RNZXNzYWdlKHtlb3M6ITB9KTp0aGlzLm11eGVyJiZ0aGlzLm11eGVyLmZsdXNoKCkscy5wcm90b3R5cGUuX29uRmluaXNoLmNhbGwodGhpcyx0KX0sX3BhcnNlOmZ1bmN0aW9uKHQpe3ZhciBlO3QuZGF0YSYmKGU9dGhpcy5fdGltZXN0YW1wPXQuZGF0YS50aW1lc3RhbXApLHQuZGF0YS5mbHVzaCYmKHRoaXMuX25lZWRGbHVzaD0hMCkscihcIlVuaXRNUDRNdXggVGltZXN0YW1wOiBcIit0aGlzLl90aW1lc3RhbXApLHIoXCJVbml0TVA0TXV4Ll9wYXJzZTogUGF5bG9hZCB0eXBlOiBcIit0eXBlb2YgdC5kYXRhKSx0aGlzLndvcmtlcj8odC5kYXRhLmVtcHR5fHx0aGlzLndvcmtlci5wb3N0TWVzc2FnZSh7ZGF0YTp0LmRhdGEsbWV0YTp0LmRhdGEubWV0YSx0aW1lc3RhbXA6ZSxwYWNrZXRUeXBlOmEuVFlQRV9BVURJT19QQUNLRVR9KSx0aGlzLl9uZWVkRmx1c2gmJih0aGlzLndvcmtlci5wb3N0TWVzc2FnZSh7ZW9zOiEwfSksdGhpcy5fbmVlZEZsdXNoPSExKSk6dGhpcy5tdXhlciYmKHQuZGF0YS5lbXB0eXx8dGhpcy5tdXhlci5wdXNoUGFja2V0KGEuVFlQRV9BVURJT19QQUNLRVQsbmV3IFVpbnQ4QXJyYXkodC5kYXRhKSxlLHQuZGF0YS5tZXRhKSx0aGlzLl9uZWVkRmx1c2gmJih0aGlzLm11eGVyLmZsdXNoKCksdGhpcy5fbmVlZEZsdXNoPSExKSl9fSl9KS5jYWxsKGUsbig3MCkuQnVmZmVyKX0sZnVuY3Rpb24odCxlLG4pe2Z1bmN0aW9uIGkodCl7Zm9yKHZhciBlPXQubGVuZ3RoPj4xLG49bmV3IFVpbnQ4QXJyYXkoZSksaT0wO2U+aTtpKyspbltpXT1wYXJzZUludCh0LnN1YnN0cigyKmksMiksMTYpO3JldHVybiBufWZ1bmN0aW9uIHIodCxlKXt2YXIgbixpPTAscj1zLlJBVztzd2l0Y2goZS5jb2RlY0lkKXtjYXNlIGw6dmFyIG89dFtpKytdO3I9byxuPTEwMjQ7YnJlYWs7Y2FzZSBjOnZhciB1PXRbaSsxXT4+MyYzLGY9dFtpKzFdPj4xJjM7bj0xPT09Zj8zPT09dT8xMTUyOjU3NjozPT09Zj8zODQ6MTE1Mn1yZXR1cm4gaW5mbz17Y29kZWNEZXNjcmlwdGlvbjpoW2UuY29kZWNJZF0sY29kZWNJZDplLmNvZGVjSWQsZGF0YTp0LnN1YmFycmF5KGkpLHJhdGU6ZS5zYW1wbGVSYXRlLHNpemU6ZS5zYW1wbGVTaXplLGNoYW5uZWxzOmUuY2hhbm5lbHMsc2FtcGxlczpuLHBhY2tldFR5cGU6cn0sYShcInBhcnNlZCBhdWRpbyBwYWNrZXQgd2l0aCAlZCBzYW1wbGVzXCIsbiksaW5mb31mdW5jdGlvbiBvKHQpe3ZhciBlPTAsbj10W2VdPj40LGk9MTUmdFtlXTtlKys7dmFyIHI9e2ZyYW1lVHlwZTpuLGNvZGVjSWQ6aSxjb2RlY0Rlc2NyaXB0aW9uOmRbaV19O3N3aXRjaChpKXtjYXNlIGc6dmFyIG89dFtlKytdO3IucGFja2V0VHlwZT1vLHIuY29tcG9zaXRpb25UaW1lPSh0W2VdPDwyNHx0W2UrMV08PDE2fHRbZSsyXTw8OCk+PjgsZSs9MzticmVhaztjYXNlIHA6ci5wYWNrZXRUeXBlPV8uTkFMVSxyLmhvcml6b250YWxPZmZzZXQ9dFtlXT4+NCYxNSxyLnZlcnRpY2FsT2Zmc2V0PTE1JnRbZV0sci5jb21wb3NpdGlvblRpbWU9MCxlKyt9cmV0dXJuIHIuZGF0YT10LnN1YmFycmF5KGUpLHJ9dmFyIHMsYT1uKDc0KSx1PW4oMTE3KSxoPVtcIlBDTVwiLFwiQURQQ01cIixcIk1QM1wiLFwiUENNIGxlXCIsXCJOZWxseW1vdXNlcjE2XCIsXCJOZWxseW1vdXNlcjhcIixcIk5lbGx5bW91c2VyXCIsXCJHLjcxMSBBLWxhd1wiLFwiRy43MTEgbXUtbGF3XCIsbnVsbCxcIkFBQ1wiLFwiU3BlZXhcIixcIk1QMyA4a2h6XCJdLGM9MixsPTEwOyFmdW5jdGlvbih0KXt0W3QuSEVBREVSPTBdPVwiSEVBREVSXCIsdFt0LlJBVz0xXT1cIlJBV1wifShzfHwocz17fSkpO3ZhciBmLGQ9W251bGwsXCJKUEVHXCIsXCJTb3JlbnNvblwiLFwiU2NyZWVuXCIsXCJWUDZcIixcIlZQNiBhbHBoYVwiLFwiU2NyZWVuMlwiLFwiQVZDXCJdLHA9NCxnPTc7IWZ1bmN0aW9uKHQpe3RbdC5LRVk9MV09XCJLRVlcIix0W3QuSU5ORVI9Ml09XCJJTk5FUlwiLHRbdC5ESVNQT1NBQkxFPTNdPVwiRElTUE9TQUJMRVwiLHRbdC5HRU5FUkFURUQ9NF09XCJHRU5FUkFURURcIix0W3QuSU5GTz01XT1cIklORk9cIn0oZnx8KGY9e30pKTt2YXIgXzshZnVuY3Rpb24odCl7dFt0LkhFQURFUj0wXT1cIkhFQURFUlwiLHRbdC5OQUxVPTFdPVwiTkFMVVwiLHRbdC5FTkQ9Ml09XCJFTkRcIn0oX3x8KF89e30pKTt2YXIgbSx5PTgsdj05LEU9ITA7IWZ1bmN0aW9uKHQpe3RbdC5DQU5fR0VORVJBVEVfSEVBREVSPTBdPVwiQ0FOX0dFTkVSQVRFX0hFQURFUlwiLHRbdC5ORUVEX0hFQURFUl9EQVRBPTFdPVwiTkVFRF9IRUFERVJfREFUQVwiLHRbdC5NQUlOX1BBQ0tFVFM9Ml09XCJNQUlOX1BBQ0tFVFNcIn0obXx8KG09e30pKTt2YXIgUz1mdW5jdGlvbigpe2Z1bmN0aW9uIHQodCl7dmFyIGU9dGhpczt0aGlzLm9uY29kZWNpbmZvPWZ1bmN0aW9uKHQpe3Rocm93IG5ldyBFcnJvcihcIk1QNE11eC5vbmNvZGVjaW5mbyBpcyBub3Qgc2V0XCIpfSx0aGlzLm9uZGF0YT1mdW5jdGlvbih0KXt0aHJvdyBuZXcgRXJyb3IoXCJNUDRNdXgub25kYXRhIGlzIG5vdCBzZXRcIil9LHRoaXMubWV0YWRhdGE9dCx0aGlzLnRyYWNrU3RhdGVzPXRoaXMubWV0YWRhdGEudHJhY2tzLm1hcChmdW5jdGlvbih0LG4pe3ZhciBpPXt0cmFja0lkOm4rMSx0cmFja0luZm86dCxjYWNoZWREdXJhdGlvbjowLHNhbXBsZXNQcm9jZXNzZWQ6MCxpbml0aWFsaXphdGlvbkRhdGE6W119O3JldHVybiBlLm1ldGFkYXRhLmF1ZGlvVHJhY2tJZD09PW4mJihlLmF1ZGlvVHJhY2tTdGF0ZT1pKSxlLm1ldGFkYXRhLnZpZGVvVHJhY2tJZD09PW4mJihlLnZpZGVvVHJhY2tTdGF0ZT1pKSxpfSx0aGlzKSx0aGlzLl9jaGVja0lmTmVlZEhlYWRlckRhdGEoKSx0aGlzLmZpbGVQb3M9MCx0aGlzLmNhY2hlZFBhY2tldHM9W10sdGhpcy5jaHVua0luZGV4PTB9cmV0dXJuIHQucHJvdG90eXBlLnB1c2hQYWNrZXQ9ZnVuY3Rpb24odCxlLG4saSl7c3dpdGNoKHRoaXMuc3RhdGU9PT1tLkNBTl9HRU5FUkFURV9IRUFERVImJnRoaXMuX3RyeUdlbmVyYXRlSGVhZGVyKCksdCl7Y2FzZSB5OnZhciBhPXRoaXMuYXVkaW9UcmFja1N0YXRlLHU9cihlLGkpO2lmKCFhfHxhLnRyYWNrSW5mby5jb2RlY0lkIT09dS5jb2RlY0lkKXRocm93IG5ldyBFcnJvcihcIlVuZXhwZWN0ZWQgYXVkaW8gcGFja2V0IGNvZGVjOiBcIit1LmNvZGVjRGVzY3JpcHRpb24pO3N3aXRjaCh1LmNvZGVjSWQpe2RlZmF1bHQ6dGhyb3cgbmV3IEVycm9yKFwiVW5zdXBwb3J0ZWQgYXVkaW8gY29kZWM6IFwiK3UuY29kZWNEZXNjcmlwdGlvbik7Y2FzZSBjOmJyZWFrO2Nhc2UgbDppZih1LnBhY2tldFR5cGU9PT1zLkhFQURFUilyZXR1cm4gdm9pZCBhLmluaXRpYWxpemF0aW9uRGF0YS5wdXNoKHUuZGF0YSl9dGhpcy5jYWNoZWRQYWNrZXRzLnB1c2goe3BhY2tldDp1LHRpbWVzdGFtcDpuLHRyYWNrSWQ6YS50cmFja0lkfSk7YnJlYWs7Y2FzZSB2OnZhciBoPXRoaXMudmlkZW9UcmFja1N0YXRlLGY9byhlKTtpZighaHx8aC50cmFja0luZm8uY29kZWNJZCE9PWYuY29kZWNJZCl0aHJvdyBuZXcgRXJyb3IoXCJVbmV4cGVjdGVkIHZpZGVvIHBhY2tldCBjb2RlYzogXCIrZi5jb2RlY0Rlc2NyaXB0aW9uKTtzd2l0Y2goZi5jb2RlY0lkKXtkZWZhdWx0OnRocm93IG5ldyBFcnJvcihcInVuc3VwcG9ydGVkIHZpZGVvIGNvZGVjOiBcIitmLmNvZGVjRGVzY3JpcHRpb24pO2Nhc2UgcDpicmVhaztjYXNlIGc6aWYoZi5wYWNrZXRUeXBlPT09Xy5IRUFERVIpcmV0dXJuIHZvaWQgaC5pbml0aWFsaXphdGlvbkRhdGEucHVzaChmLmRhdGEpfXRoaXMuY2FjaGVkUGFja2V0cy5wdXNoKHtwYWNrZXQ6Zix0aW1lc3RhbXA6bix0cmFja0lkOmgudHJhY2tJZH0pO2JyZWFrO2RlZmF1bHQ6dGhyb3cgbmV3IEVycm9yKFwidW5rbm93biBwYWNrZXQgdHlwZTogXCIrdCl9dGhpcy5zdGF0ZT09PW0uTkVFRF9IRUFERVJfREFUQSYmdGhpcy5fdHJ5R2VuZXJhdGVIZWFkZXIoKX0sdC5wcm90b3R5cGUuZmx1c2g9ZnVuY3Rpb24oKXt0aGlzLmNhY2hlZFBhY2tldHMubGVuZ3RoPjAmJnRoaXMuX2NodW5rKCl9LHQucHJvdG90eXBlLl9jaGVja0lmTmVlZEhlYWRlckRhdGE9ZnVuY3Rpb24oKXt0aGlzLnRyYWNrU3RhdGVzLnNvbWUoZnVuY3Rpb24odCl7cmV0dXJuIHQudHJhY2tJbmZvLmNvZGVjSWQ9PT1sfHx0LnRyYWNrSW5mby5jb2RlY0lkPT09Z30pP3RoaXMuc3RhdGU9bS5ORUVEX0hFQURFUl9EQVRBOnRoaXMuc3RhdGU9bS5DQU5fR0VORVJBVEVfSEVBREVSfSx0LnByb3RvdHlwZS5fdHJ5R2VuZXJhdGVIZWFkZXI9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLnRyYWNrU3RhdGVzLmV2ZXJ5KGZ1bmN0aW9uKHQpe3N3aXRjaCh0LnRyYWNrSW5mby5jb2RlY0lkKXtjYXNlIGw6Y2FzZSBnOnJldHVybiB0LmluaXRpYWxpemF0aW9uRGF0YS5sZW5ndGg+MDtkZWZhdWx0OnJldHVybiEwfX0pO2lmKHQpe2Zvcih2YXIgZT1bXCJpc29tXCJdLG49MSxyPTEsbz1bXSxzPTA7czx0aGlzLnRyYWNrU3RhdGVzLmxlbmd0aDtzKyspe3ZhciBhLGg9dGhpcy50cmFja1N0YXRlc1tzXSxmPWgudHJhY2tJbmZvO3N3aXRjaChmLmNvZGVjSWQpe2Nhc2UgbDp2YXIgZD1oLmluaXRpYWxpemF0aW9uRGF0YVswXTthPW5ldyB1LkF1ZGlvU2FtcGxlRW50cnkoXCJtcDRhXCIsbixmLmNoYW5uZWxzLGYuc2FtcGxlc2l6ZSxmLnNhbXBsZXJhdGUpO3ZhciBfPW5ldyBVaW50OEFycmF5KDQxK2QubGVuZ3RoKTtfLnNldChpKFwiMDAwMDAwMDAwMzgwODA4MFwiKSwwKSxfWzhdPTMyK2QubGVuZ3RoLF8uc2V0KGkoXCIwMDAyMDAwNDgwODA4MFwiKSw5KSxfWzE2XT0xOCtkLmxlbmd0aCxfLnNldChpKFwiNDAxNTAwMDAwMDAwMDBGQTAwMDAwMDAwMDAwNTgwODA4MFwiKSwxNyksX1szNF09ZC5sZW5ndGgsXy5zZXQoZCwzNSksXy5zZXQoaShcIjA2ODA4MDgwMDEwMlwiKSwzNStkLmxlbmd0aCksYS5vdGhlckJveGVzPVtuZXcgdS5SYXdUYWcoXCJlc2RzXCIsXyldO3ZhciB5PWRbMF0+PjM7aC5taW1lVHlwZUNvZGVjPVwibXA0YS40MC5cIit5O2JyZWFrO2Nhc2UgYzphPW5ldyB1LkF1ZGlvU2FtcGxlRW50cnkoXCIubXAzXCIsbixmLmNoYW5uZWxzLGYuc2FtcGxlc2l6ZSxmLnNhbXBsZXJhdGUpLGgubWltZVR5cGVDb2RlYz1cIm1wM1wiO2JyZWFrO2Nhc2UgZzp2YXIgdj1oLmluaXRpYWxpemF0aW9uRGF0YVswXTthPW5ldyB1LlZpZGVvU2FtcGxlRW50cnkoXCJhdmMxXCIscixmLndpZHRoLGYuaGVpZ2h0KSxhLm90aGVyQm94ZXM9W25ldyB1LlJhd1RhZyhcImF2Y0NcIix2KV07dmFyIEU9dlsxXTw8MTZ8dlsyXTw8OHx2WzNdO2gubWltZVR5cGVDb2RlYz1cImF2YzEuXCIrKDE2Nzc3MjE2fEUpLnRvU3RyaW5nKDE2KS5zdWJzdHIoMSksZS5wdXNoKFwiaXNvMlwiLFwiYXZjMVwiLFwibXA0MVwiKTticmVhaztjYXNlIHA6YT1uZXcgdS5WaWRlb1NhbXBsZUVudHJ5KFwiVlA2RlwiLHIsZi53aWR0aCxmLmhlaWdodCksYS5vdGhlckJveGVzPVtuZXcgdS5SYXdUYWcoXCJnbGJsXCIsaShcIjAwXCIpKV0saC5taW1lVHlwZUNvZGVjPVwiYXZjMS40MjAwMUVcIjticmVhaztkZWZhdWx0OnRocm93IG5ldyBFcnJvcihcIm5vdCBzdXBwb3J0ZWQgdHJhY2sgdHlwZVwiKX12YXIgUyxBPXUuVHJhY2tIZWFkZXJGbGFncy5UUkFDS19FTkFCTEVEfHUuVHJhY2tIZWFkZXJGbGFncy5UUkFDS19JTl9NT1ZJRTtoPT09dGhpcy5hdWRpb1RyYWNrU3RhdGU/Uz1uZXcgdS5UcmFja0JveChuZXcgdS5UcmFja0hlYWRlckJveChBLGgudHJhY2tJZCwtMSwwLDAsMSxzKSxuZXcgdS5NZWRpYUJveChuZXcgdS5NZWRpYUhlYWRlckJveChmLnRpbWVzY2FsZSwtMSxmLmxhbmd1YWdlKSxuZXcgdS5IYW5kbGVyQm94KFwic291blwiLFwiU291bmRIYW5kbGVyXCIpLG5ldyB1Lk1lZGlhSW5mb3JtYXRpb25Cb3gobmV3IHUuU291bmRNZWRpYUhlYWRlckJveCxuZXcgdS5EYXRhSW5mb3JtYXRpb25Cb3gobmV3IHUuRGF0YVJlZmVyZW5jZUJveChbbmV3IHUuRGF0YUVudHJ5VXJsQm94KHUuU0VMRl9DT05UQUlORURfREFUQV9SRUZFUkVOQ0VfRkxBRyldKSksbmV3IHUuU2FtcGxlVGFibGVCb3gobmV3IHUuU2FtcGxlRGVzY3JpcHRpb25Cb3goW2FdKSxuZXcgdS5SYXdUYWcoXCJzdHRzXCIsaShcIjAwMDAwMDAwMDAwMDAwMDBcIikpLG5ldyB1LlJhd1RhZyhcInN0c2NcIixpKFwiMDAwMDAwMDAwMDAwMDAwMFwiKSksbmV3IHUuUmF3VGFnKFwic3RzelwiLGkoXCIwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDBcIikpLG5ldyB1LlJhd1RhZyhcInN0Y29cIixpKFwiMDAwMDAwMDAwMDAwMDAwMFwiKSkpKSkpOmg9PT10aGlzLnZpZGVvVHJhY2tTdGF0ZSYmKFM9bmV3IHUuVHJhY2tCb3gobmV3IHUuVHJhY2tIZWFkZXJCb3goQSxoLnRyYWNrSWQsLTEsZi53aWR0aCxmLmhlaWdodCwwLHMpLG5ldyB1Lk1lZGlhQm94KG5ldyB1Lk1lZGlhSGVhZGVyQm94KGYudGltZXNjYWxlLC0xLGYubGFuZ3VhZ2UpLG5ldyB1LkhhbmRsZXJCb3goXCJ2aWRlXCIsXCJWaWRlb0hhbmRsZXJcIiksbmV3IHUuTWVkaWFJbmZvcm1hdGlvbkJveChuZXcgdS5WaWRlb01lZGlhSGVhZGVyQm94LG5ldyB1LkRhdGFJbmZvcm1hdGlvbkJveChuZXcgdS5EYXRhUmVmZXJlbmNlQm94KFtuZXcgdS5EYXRhRW50cnlVcmxCb3godS5TRUxGX0NPTlRBSU5FRF9EQVRBX1JFRkVSRU5DRV9GTEFHKV0pKSxuZXcgdS5TYW1wbGVUYWJsZUJveChuZXcgdS5TYW1wbGVEZXNjcmlwdGlvbkJveChbYV0pLG5ldyB1LlJhd1RhZyhcInN0dHNcIixpKFwiMDAwMDAwMDAwMDAwMDAwMFwiKSksbmV3IHUuUmF3VGFnKFwic3RzY1wiLGkoXCIwMDAwMDAwMDAwMDAwMDAwXCIpKSxuZXcgdS5SYXdUYWcoXCJzdHN6XCIsaShcIjAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMFwiKSksbmV3IHUuUmF3VGFnKFwic3Rjb1wiLGkoXCIwMDAwMDAwMDAwMDAwMDAwXCIpKSkpKSkpLG8ucHVzaChTKX12YXIgdz1uZXcgdS5Nb3ZpZUV4dGVuZHNCb3gobnVsbCxbbmV3IHUuVHJhY2tFeHRlbmRzQm94KDEsMSwwLDAsMCksbmV3IHUuVHJhY2tFeHRlbmRzQm94KDIsMSwwLDAsMCldLG51bGwpLFQ9bmV3IHUuQm94Q29udGFpbmVyQm94KFwidWRhdFwiLFtuZXcgdS5NZXRhQm94KG5ldyB1LlJhd1RhZyhcImhkbHJcIixpKFwiMDAwMDAwMDAwMDAwMDAwMDZENjQ2OTcyNjE3MDcwNkMwMDAwMDAwMDAwMDAwMDAwMDBcIikpLFtuZXcgdS5SYXdUYWcoXCJpbHN0XCIsaShcIjAwMDAwMDI1QTk3NDZGNkYwMDAwMDAxRDY0NjE3NDYxMDAwMDAwMDEwMDAwMDAwMDRDNjE3NjY2MzUzNDJFMzYzMzJFMzEzMDM0XCIpKV0pXSksYj1uZXcgdS5Nb3ZpZUhlYWRlckJveCgxZTMsMCx0aGlzLnRyYWNrU3RhdGVzLmxlbmd0aCsxKSxQPW5ldyB1Lk1vdmllQm94KGIsbyx3LFQpLEk9bmV3IHUuRmlsZVR5cGVCb3goXCJpc29tXCIsNTEyLGUpLEw9SS5sYXlvdXQoMCksTz1QLmxheW91dChMKSxSPW5ldyBVaW50OEFycmF5KEwrTyk7SS53cml0ZShSKSxQLndyaXRlKFIpLHRoaXMub25jb2RlY2luZm8odGhpcy50cmFja1N0YXRlcy5tYXAoZnVuY3Rpb24odCl7cmV0dXJuIHQubWltZVR5cGVDb2RlY30pKSx0aGlzLm9uZGF0YShSKSx0aGlzLmZpbGVQb3MrPVIubGVuZ3RoLHRoaXMuc3RhdGU9bS5NQUlOX1BBQ0tFVFN9fSx0LnByb3RvdHlwZS5fY2h1bms9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLmNhY2hlZFBhY2tldHM7aWYoRSYmdGhpcy52aWRlb1RyYWNrU3RhdGUpe2Zvcih2YXIgZT10Lmxlbmd0aC0xLG49dGhpcy52aWRlb1RyYWNrU3RhdGUudHJhY2tJZDtlPjAmJih0W2VdLnRyYWNrSWQhPT1ufHx0W2VdLnBhY2tldC5mcmFtZVR5cGUhPT1mLktFWSk7KWUtLTtlPjAmJih0PXQuc2xpY2UoMCxlKSl9aWYoMCE9PXQubGVuZ3RoKXtmb3IodmFyIGk9W10scj0wLG89W10scz1bXSxhPTA7YTx0aGlzLnRyYWNrU3RhdGVzLmxlbmd0aDthKyspe3ZhciBoPXRoaXMudHJhY2tTdGF0ZXNbYV0sZD1oLnRyYWNrSW5mbyxfPWgudHJhY2tJZCxtPXQuZmlsdGVyKGZ1bmN0aW9uKHQpe3JldHVybiB0LnRyYWNrSWQ9PT1ffSk7aWYoMCE9PW0ubGVuZ3RoKXt2YXIgeSx2LFMsQT1uZXcgdS5UcmFja0ZyYWdtZW50QmFzZU1lZGlhRGVjb2RlVGltZUJveChoLmNhY2hlZER1cmF0aW9uKTtzd2l0Y2gocy5wdXNoKHIpLGQuY29kZWNJZCl7Y2FzZSBsOmNhc2UgYzpTPVtdO2Zvcih2YXIgZT0wO2U8bS5sZW5ndGg7ZSsrKXt2YXIgdz1tW2VdLnBhY2tldCxUPU1hdGgucm91bmQody5zYW1wbGVzKmQudGltZXNjYWxlL2Quc2FtcGxlcmF0ZSk7aS5wdXNoKHcuZGF0YSkscis9dy5kYXRhLmxlbmd0aCxTLnB1c2goe2R1cmF0aW9uOlQsc2l6ZTp3LmRhdGEubGVuZ3RofSksaC5zYW1wbGVzUHJvY2Vzc2VkKz13LnNhbXBsZXN9dmFyIGI9dS5UcmFja0ZyYWdtZW50RmxhZ3MuREVGQVVMVF9TQU1QTEVfRkxBR1NfUFJFU0VOVDt5PW5ldyB1LlRyYWNrRnJhZ21lbnRIZWFkZXJCb3goYixfLDAsMCwwLDAsdS5TYW1wbGVGbGFncy5TQU1QTEVfREVQRU5EU19PTl9OT19PVEhFUlMpO3ZhciBQPXUuVHJhY2tSdW5GbGFncy5EQVRBX09GRlNFVF9QUkVTRU5UfHUuVHJhY2tSdW5GbGFncy5TQU1QTEVfRFVSQVRJT05fUFJFU0VOVHx1LlRyYWNrUnVuRmxhZ3MuU0FNUExFX1NJWkVfUFJFU0VOVDt2PW5ldyB1LlRyYWNrUnVuQm94KFAsUywwLDApLGguY2FjaGVkRHVyYXRpb249TWF0aC5yb3VuZChoLnNhbXBsZXNQcm9jZXNzZWQqZC50aW1lc2NhbGUvZC5zYW1wbGVyYXRlKTticmVhaztjYXNlIGc6Y2FzZSBwOlM9W107Zm9yKHZhciBJPWguc2FtcGxlc1Byb2Nlc3NlZCxMPUkqZC50aW1lc2NhbGUvZC5mcmFtZXJhdGUsTz1NYXRoLnJvdW5kKEwpLGU9MDtlPG0ubGVuZ3RoO2UrKyl7dmFyIFI9bVtlXS5wYWNrZXQ7SSsrO3ZhciBEPU1hdGgucm91bmQoSSpkLnRpbWVzY2FsZS9kLmZyYW1lcmF0ZSksTT1ELU87Tz1EO3ZhciBrPU1hdGgucm91bmQoSSpkLnRpbWVzY2FsZS9kLmZyYW1lcmF0ZStSLmNvbXBvc2l0aW9uVGltZSpkLnRpbWVzY2FsZS8xZTMpO2kucHVzaChSLmRhdGEpLHIrPVIuZGF0YS5sZW5ndGg7dmFyIE49Ui5mcmFtZVR5cGU9PT1mLktFWT91LlNhbXBsZUZsYWdzLlNBTVBMRV9ERVBFTkRTX09OX05PX09USEVSUzp1LlNhbXBsZUZsYWdzLlNBTVBMRV9ERVBFTkRTX09OX09USEVSfHUuU2FtcGxlRmxhZ3MuU0FNUExFX0lTX05PVF9TWU5DO1MucHVzaCh7ZHVyYXRpb246TSxzaXplOlIuZGF0YS5sZW5ndGgsZmxhZ3M6Tixjb21wb3NpdGlvblRpbWVPZmZzZXQ6ay1EfSl9dmFyIGI9dS5UcmFja0ZyYWdtZW50RmxhZ3MuREVGQVVMVF9TQU1QTEVfRkxBR1NfUFJFU0VOVDt5PW5ldyB1LlRyYWNrRnJhZ21lbnRIZWFkZXJCb3goYixfLDAsMCwwLDAsdS5TYW1wbGVGbGFncy5TQU1QTEVfREVQRU5EU19PTl9OT19PVEhFUlMpO3ZhciBQPXUuVHJhY2tSdW5GbGFncy5EQVRBX09GRlNFVF9QUkVTRU5UfHUuVHJhY2tSdW5GbGFncy5TQU1QTEVfRFVSQVRJT05fUFJFU0VOVHx1LlRyYWNrUnVuRmxhZ3MuU0FNUExFX1NJWkVfUFJFU0VOVHx1LlRyYWNrUnVuRmxhZ3MuU0FNUExFX0ZMQUdTX1BSRVNFTlR8dS5UcmFja1J1bkZsYWdzLlNBTVBMRV9DT01QT1NJVElPTl9USU1FX09GRlNFVDt2PW5ldyB1LlRyYWNrUnVuQm94KFAsUywwLDApLGguY2FjaGVkRHVyYXRpb249TyxoLnNhbXBsZXNQcm9jZXNzZWQ9STticmVhaztkZWZhdWx0OnRocm93IG5ldyBFcnJvcihcIlVuIGNvZGVjXCIpfXZhciB4PW5ldyB1LlRyYWNrRnJhZ21lbnRCb3goeSxBLHYpO28ucHVzaCh4KX19dGhpcy5jYWNoZWRQYWNrZXRzLnNwbGljZSgwLHQubGVuZ3RoKTtmb3IodmFyIEM9bmV3IHUuTW92aWVGcmFnbWVudEhlYWRlckJveCgrK3RoaXMuY2h1bmtJbmRleCksRj1uZXcgdS5Nb3ZpZUZyYWdtZW50Qm94KEMsbyksVT1GLmxheW91dCgwKSxCPW5ldyB1Lk1lZGlhRGF0YUJveChpKSxIPUIubGF5b3V0KFUpLGo9VSs4LGE9MDthPG8ubGVuZ3RoO2ErKylvW2FdLnJ1bi5kYXRhT2Zmc2V0PWorc1thXTt2YXIgRz1uZXcgVWludDhBcnJheShVK0gpO0Yud3JpdGUoRyksQi53cml0ZShHKSx0aGlzLm9uZGF0YShHKSx0aGlzLmZpbGVQb3MrPUcubGVuZ3RofX0sdH0oKTt0LmV4cG9ydHM9UyxTLk1QM19TT1VORF9DT0RFQ19JRD1jLFMuQUFDX1NPVU5EX0NPREVDX0lEPWwsUy5UWVBFX0FVRElPX1BBQ0tFVD15LFMuVFlQRV9WSURFT19QQUNLRVQ9dixTLlByb2ZpbGVzPXtNUDNfQVVESU9fT05MWTp7YXVkaW9UcmFja0lkOjAsdmlkZW9UcmFja0lkOi0xLHRyYWNrczpbe2NvZGVjSWQ6Uy5NUDNfU09VTkRfQ09ERUNfSUQsY2hhbm5lbHM6MixzYW1wbGVyYXRlOjQ0MTAwLHNhbXBsZXNpemU6MTYsdGltZXNjYWxlOjQ0MTAwfV19fX0sZnVuY3Rpb24odCxlKXtmdW5jdGlvbiBuKHQpe2Zvcih2YXIgZT1uZXcgVWludDhBcnJheSg0KnQubGVuZ3RoKSxuPTAsaT0wLHI9dC5sZW5ndGg7cj5pO2krKyl7dmFyIG89dC5jaGFyQ29kZUF0KGkpO2lmKDEyNz49byllW24rK109bztlbHNle2lmKG8+PTU1Mjk2JiY1NjMxOT49byl7dmFyIHM9dC5jaGFyQ29kZUF0KGkrMSk7cz49NTYzMjAmJjU3MzQzPj1zJiYobz0oKDEwMjMmbyk8PDEwKSsoMTAyMyZzKSs2NTUzNiwrK2kpfTAhPT0oNDI5Mjg3MDE0NCZvKT8oZVtuKytdPTI0OHxvPj4+MjQmMyxlW24rK109MTI4fG8+Pj4xOCY2MyxlW24rK109MTI4fG8+Pj4xMiY2MyxlW24rK109MTI4fG8+Pj42JjYzLGVbbisrXT0xMjh8NjMmbyk6MCE9PSg0Mjk0OTAxNzYwJm8pPyhlW24rK109MjQwfG8+Pj4xOCY3LGVbbisrXT0xMjh8bz4+PjEyJjYzLGVbbisrXT0xMjh8bz4+PjYmNjMsZVtuKytdPTEyOHw2MyZvKTowIT09KDQyOTQ5NjUyNDgmbyk/KGVbbisrXT0yMjR8bz4+PjEyJjE1LGVbbisrXT0xMjh8bz4+PjYmNjMsZVtuKytdPTEyOHw2MyZvKTooZVtuKytdPTE5MnxvPj4+NiYzMSxlW24rK109MTI4fDYzJm8pfX1yZXR1cm4gZS5zdWJhcnJheSgwLG4pfWZ1bmN0aW9uIGkodCl7Zm9yKHZhciBlPVtdLG49MTtuPGFyZ3VtZW50cy5sZW5ndGg7bisrKWVbbi0xXT1hcmd1bWVudHNbbl07cmV0dXJuIEFycmF5LnByb3RvdHlwZS5jb25jYXQuYXBwbHkodCxlKX1mdW5jdGlvbiByKHQsZSxuKXt0W2VdPW4+PjI0JjI1NSx0W2UrMV09bj4+MTYmMjU1LHRbZSsyXT1uPj44JjI1NSx0W2UrM109MjU1Jm59ZnVuY3Rpb24gbyh0KXtyZXR1cm4gdC5jaGFyQ29kZUF0KDApPDwyNHx0LmNoYXJDb2RlQXQoMSk8PDE2fHQuY2hhckNvZGVBdCgyKTw8OHx0LmNoYXJDb2RlQXQoMyl9ZnVuY3Rpb24gcyh0KXtyZXR1cm4odC1kKS8xZTN8MH1mdW5jdGlvbiBhKHQpe3JldHVybiA2NTUzNip0fDB9ZnVuY3Rpb24gdSh0KXtyZXR1cm4gMTA3Mzc0MTgyNCp0fDB9ZnVuY3Rpb24gaCh0KXtyZXR1cm4gMjU2KnR8MH1mdW5jdGlvbiBjKHQpe3JldHVybigzMSZ0LmNoYXJDb2RlQXQoMCkpPDwxMHwoMzEmdC5jaGFyQ29kZUF0KDEpKTw8NXwzMSZ0LmNoYXJDb2RlQXQoMil9dmFyIGwsZj10aGlzJiZ0aGlzLl9fZXh0ZW5kc3x8ZnVuY3Rpb24odCxlKXtmdW5jdGlvbiBuKCl7dGhpcy5jb25zdHJ1Y3Rvcj10fWZvcih2YXIgaSBpbiBlKWUuaGFzT3duUHJvcGVydHkoaSkmJih0W2ldPWVbaV0pO3QucHJvdG90eXBlPW51bGw9PT1lP09iamVjdC5jcmVhdGUoZSk6KG4ucHJvdG90eXBlPWUucHJvdG90eXBlLG5ldyBuKX07dC5leHBvcnRzPWw9e307dmFyIGQ9LTIwODI4NDQ4ZTUscD1bMSwwLDAsMCwxLDAsMCwwLDFdLGc9WzAsMCwwXSxfPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCh0LGUpe3RoaXMuYm94dHlwZT10LFwidXVpZFwiPT09dCYmKHRoaXMudXNlclR5cGU9ZSl9cmV0dXJuIHQucHJvdG90eXBlLmxheW91dD1mdW5jdGlvbih0KXt0aGlzLm9mZnNldD10O3ZhciBlPTg7cmV0dXJuIHRoaXMudXNlclR5cGUmJihlKz0xNiksdGhpcy5zaXplPWUsZX0sdC5wcm90b3R5cGUud3JpdGU9ZnVuY3Rpb24odCl7cmV0dXJuIHIodCx0aGlzLm9mZnNldCx0aGlzLnNpemUpLHIodCx0aGlzLm9mZnNldCs0LG8odGhpcy5ib3h0eXBlKSksdGhpcy51c2VyVHlwZT8odC5zZXQodGhpcy51c2VyVHlwZSx0aGlzLm9mZnNldCs4KSwyNCk6OH0sdC5wcm90b3R5cGUudG9VaW50OEFycmF5PWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5sYXlvdXQoMCksZT1uZXcgVWludDhBcnJheSh0KTtyZXR1cm4gdGhpcy53cml0ZShlKSxlfSx0fSgpO2wuQm94PV87dmFyIG09ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZShlLG4saSl7dm9pZCAwPT09biYmKG49MCksdm9pZCAwPT09aSYmKGk9MCksdC5jYWxsKHRoaXMsZSksdGhpcy52ZXJzaW9uPW4sdGhpcy5mbGFncz1pfXJldHVybiBmKGUsdCksZS5wcm90b3R5cGUubGF5b3V0PWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLnNpemU9dC5wcm90b3R5cGUubGF5b3V0LmNhbGwodGhpcyxlKSs0LHRoaXMuc2l6ZX0sZS5wcm90b3R5cGUud3JpdGU9ZnVuY3Rpb24oZSl7dmFyIG49dC5wcm90b3R5cGUud3JpdGUuY2FsbCh0aGlzLGUpO3JldHVybiByKGUsdGhpcy5vZmZzZXQrbix0aGlzLnZlcnNpb248PDI0fHRoaXMuZmxhZ3MpLG4rNH0sZX0oXyk7bC5GdWxsQm94PW07dmFyIHk9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZShlLG4saSl7dC5jYWxsKHRoaXMsXCJmdHlwZVwiKSx0aGlzLm1ham9yQnJhbmQ9ZSx0aGlzLm1pbm9yVmVyc2lvbj1uLHRoaXMuY29tcGF0aWJsZUJyYW5kcz1pfXJldHVybiBmKGUsdCksZS5wcm90b3R5cGUubGF5b3V0PWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLnNpemU9dC5wcm90b3R5cGUubGF5b3V0LmNhbGwodGhpcyxlKSs0KigyK3RoaXMuY29tcGF0aWJsZUJyYW5kcy5sZW5ndGgpLHRoaXMuc2l6ZX0sZS5wcm90b3R5cGUud3JpdGU9ZnVuY3Rpb24oZSl7dmFyIG49dGhpcyxpPXQucHJvdG90eXBlLndyaXRlLmNhbGwodGhpcyxlKTtyZXR1cm4gcihlLHRoaXMub2Zmc2V0K2ksbyh0aGlzLm1ham9yQnJhbmQpKSxyKGUsdGhpcy5vZmZzZXQraSs0LHRoaXMubWlub3JWZXJzaW9uKSxpKz04LHRoaXMuY29tcGF0aWJsZUJyYW5kcy5mb3JFYWNoKGZ1bmN0aW9uKHQpe3IoZSxuLm9mZnNldCtpLG8odCkpLGkrPTR9LHRoaXMpLGl9LGV9KF8pO2wuRmlsZVR5cGVCb3g9eTt2YXIgdj1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKGUsbil7dC5jYWxsKHRoaXMsZSksdGhpcy5jaGlsZHJlbj1ufXJldHVybiBmKGUsdCksZS5wcm90b3R5cGUubGF5b3V0PWZ1bmN0aW9uKGUpe3ZhciBuPXQucHJvdG90eXBlLmxheW91dC5jYWxsKHRoaXMsZSk7cmV0dXJuIHRoaXMuY2hpbGRyZW4uZm9yRWFjaChmdW5jdGlvbih0KXt0JiYobis9dC5sYXlvdXQoZStuKSl9KSx0aGlzLnNpemU9bn0sZS5wcm90b3R5cGUud3JpdGU9ZnVuY3Rpb24oZSl7dmFyIG49dC5wcm90b3R5cGUud3JpdGUuY2FsbCh0aGlzLGUpO3JldHVybiB0aGlzLmNoaWxkcmVuLmZvckVhY2goZnVuY3Rpb24odCl7dCYmKG4rPXQud3JpdGUoZSkpfSksbn0sZX0oXyk7bC5Cb3hDb250YWluZXJCb3g9djt2YXIgRT1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKGUsbixyLG8pe3QuY2FsbCh0aGlzLFwibW9vdlwiLGkoW2VdLG4sW3Isb10pKSx0aGlzLmhlYWRlcj1lLHRoaXMudHJhY2tzPW4sdGhpcy5leHRlbmRzQm94PXIsdGhpcy51c2VyRGF0YT1vfXJldHVybiBmKGUsdCksZX0odik7bC5Nb3ZpZUJveD1FO3ZhciBTPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoZSxuLGkscixvLHMsYSx1KXt2b2lkIDA9PT1yJiYocj0xKSx2b2lkIDA9PT1vJiYobz0xKSx2b2lkIDA9PT1zJiYocz1wKSx2b2lkIDA9PT1hJiYoYT1kKSx2b2lkIDA9PT11JiYodT1kKSx0LmNhbGwodGhpcyxcIm12aGRcIiwwLDApLHRoaXMudGltZXNjYWxlPWUsdGhpcy5kdXJhdGlvbj1uLHRoaXMubmV4dFRyYWNrSWQ9aSx0aGlzLnJhdGU9cix0aGlzLnZvbHVtZT1vLHRoaXMubWF0cml4PXMsdGhpcy5jcmVhdGlvblRpbWU9YSx0aGlzLm1vZGlmaWNhdGlvblRpbWU9dX1yZXR1cm4gZihlLHQpLGUucHJvdG90eXBlLmxheW91dD1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5zaXplPXQucHJvdG90eXBlLmxheW91dC5jYWxsKHRoaXMsZSkrMTYrNCsyKzIrOCszNisyNCs0LHRoaXMuc2l6ZX0sZS5wcm90b3R5cGUud3JpdGU9ZnVuY3Rpb24oZSl7dmFyIG49dC5wcm90b3R5cGUud3JpdGUuY2FsbCh0aGlzLGUpO3JldHVybiByKGUsdGhpcy5vZmZzZXQrbixzKHRoaXMuY3JlYXRpb25UaW1lKSkscihlLHRoaXMub2Zmc2V0K24rNCxzKHRoaXMubW9kaWZpY2F0aW9uVGltZSkpLHIoZSx0aGlzLm9mZnNldCtuKzgsdGhpcy50aW1lc2NhbGUpLHIoZSx0aGlzLm9mZnNldCtuKzEyLHRoaXMuZHVyYXRpb24pLG4rPTE2LHIoZSx0aGlzLm9mZnNldCtuLGEodGhpcy5yYXRlKSkscihlLHRoaXMub2Zmc2V0K24rNCxoKHRoaXMudm9sdW1lKTw8MTYpLHIoZSx0aGlzLm9mZnNldCtuKzgsMCkscihlLHRoaXMub2Zmc2V0K24rMTIsMCksbis9MTYscihlLHRoaXMub2Zmc2V0K24sYSh0aGlzLm1hdHJpeFswXSkpLHIoZSx0aGlzLm9mZnNldCtuKzQsYSh0aGlzLm1hdHJpeFsxXSkpLHIoZSx0aGlzLm9mZnNldCtuKzgsYSh0aGlzLm1hdHJpeFsyXSkpLHIoZSx0aGlzLm9mZnNldCtuKzEyLGEodGhpcy5tYXRyaXhbM10pKSxyKGUsdGhpcy5vZmZzZXQrbisxNixhKHRoaXMubWF0cml4WzRdKSkscihlLHRoaXMub2Zmc2V0K24rMjAsYSh0aGlzLm1hdHJpeFs1XSkpLHIoZSx0aGlzLm9mZnNldCtuKzI0LHUodGhpcy5tYXRyaXhbNl0pKSxyKGUsdGhpcy5vZmZzZXQrbisyOCx1KHRoaXMubWF0cml4WzddKSkscihlLHRoaXMub2Zmc2V0K24rMzIsdSh0aGlzLm1hdHJpeFs4XSkpLG4rPTM2LHIoZSx0aGlzLm9mZnNldCtuLDApLHIoZSx0aGlzLm9mZnNldCtuKzQsMCkscihlLHRoaXMub2Zmc2V0K24rOCwwKSxyKGUsdGhpcy5vZmZzZXQrbisxMiwwKSxyKGUsdGhpcy5vZmZzZXQrbisxNiwwKSxyKGUsdGhpcy5vZmZzZXQrbisyMCwwKSxuKz0yNCxyKGUsdGhpcy5vZmZzZXQrbix0aGlzLm5leHRUcmFja0lkKSxuKz00fSxlfShtKTtsLk1vdmllSGVhZGVyQm94PVMsZnVuY3Rpb24odCl7dFt0LlRSQUNLX0VOQUJMRUQ9MV09XCJUUkFDS19FTkFCTEVEXCIsdFt0LlRSQUNLX0lOX01PVklFPTJdPVwiVFJBQ0tfSU5fTU9WSUVcIix0W3QuVFJBQ0tfSU5fUFJFVklFVz00XT1cIlRSQUNLX0lOX1BSRVZJRVdcIn0obC5UcmFja0hlYWRlckZsYWdzfHwobC5UcmFja0hlYWRlckZsYWdzPXt9KSk7dmFyIEE9KGwuVHJhY2tIZWFkZXJGbGFncyxmdW5jdGlvbih0KXtmdW5jdGlvbiBlKGUsbixpLHIsbyxzLGEsdSxoLGMsbCl7dm9pZCAwPT09YSYmKGE9MCksdm9pZCAwPT09dSYmKHU9MCksdm9pZCAwPT09aCYmKGg9cCksdm9pZCAwPT09YyYmKGM9ZCksdm9pZCAwPT09bCYmKGw9ZCksdC5jYWxsKHRoaXMsXCJ0a2hkXCIsMCxlKSx0aGlzLnRyYWNrSWQ9bix0aGlzLmR1cmF0aW9uPWksdGhpcy53aWR0aD1yLHRoaXMuaGVpZ2h0PW8sdGhpcy52b2x1bWU9cyx0aGlzLmFsdGVybmF0ZUdyb3VwPWEsdGhpcy5sYXllcj11LHRoaXMubWF0cml4PWgsdGhpcy5jcmVhdGlvblRpbWU9Yyx0aGlzLm1vZGlmaWNhdGlvblRpbWU9bH1yZXR1cm4gZihlLHQpLGUucHJvdG90eXBlLmxheW91dD1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5zaXplPXQucHJvdG90eXBlLmxheW91dC5jYWxsKHRoaXMsZSkrMjArOCs2KzIrMzYrOCx0aGlzLnNpemV9LGUucHJvdG90eXBlLndyaXRlPWZ1bmN0aW9uKGUpe3ZhciBuPXQucHJvdG90eXBlLndyaXRlLmNhbGwodGhpcyxlKTtyZXR1cm4gcihlLHRoaXMub2Zmc2V0K24scyh0aGlzLmNyZWF0aW9uVGltZSkpLHIoZSx0aGlzLm9mZnNldCtuKzQscyh0aGlzLm1vZGlmaWNhdGlvblRpbWUpKSxyKGUsdGhpcy5vZmZzZXQrbis4LHRoaXMudHJhY2tJZCkscihlLHRoaXMub2Zmc2V0K24rMTIsMCkscihlLHRoaXMub2Zmc2V0K24rMTYsdGhpcy5kdXJhdGlvbiksbis9MjAscihlLHRoaXMub2Zmc2V0K24sMCkscihlLHRoaXMub2Zmc2V0K24rNCwwKSxyKGUsdGhpcy5vZmZzZXQrbis4LHRoaXMubGF5ZXI8PDE2fHRoaXMuYWx0ZXJuYXRlR3JvdXApLHIoZSx0aGlzLm9mZnNldCtuKzEyLGgodGhpcy52b2x1bWUpPDwxNiksbis9MTYscihlLHRoaXMub2Zmc2V0K24sYSh0aGlzLm1hdHJpeFswXSkpLHIoZSx0aGlzLm9mZnNldCtuKzQsYSh0aGlzLm1hdHJpeFsxXSkpLHIoZSx0aGlzLm9mZnNldCtuKzgsYSh0aGlzLm1hdHJpeFsyXSkpLHIoZSx0aGlzLm9mZnNldCtuKzEyLGEodGhpcy5tYXRyaXhbM10pKSxyKGUsdGhpcy5vZmZzZXQrbisxNixhKHRoaXMubWF0cml4WzRdKSkscihlLHRoaXMub2Zmc2V0K24rMjAsYSh0aGlzLm1hdHJpeFs1XSkpLHIoZSx0aGlzLm9mZnNldCtuKzI0LHUodGhpcy5tYXRyaXhbNl0pKSxyKGUsdGhpcy5vZmZzZXQrbisyOCx1KHRoaXMubWF0cml4WzddKSkscihlLHRoaXMub2Zmc2V0K24rMzIsdSh0aGlzLm1hdHJpeFs4XSkpLG4rPTM2LHIoZSx0aGlzLm9mZnNldCtuLGEodGhpcy53aWR0aCkpLHIoZSx0aGlzLm9mZnNldCtuKzQsYSh0aGlzLmhlaWdodCkpLG4rPTh9LGV9KG0pKTtsLlRyYWNrSGVhZGVyQm94PUE7dmFyIHc9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZShlLG4saSxyLG8pe3ZvaWQgMD09PWkmJihpPVwidW5rXCIpLHZvaWQgMD09PXImJihyPWQpLHZvaWQgMD09PW8mJihvPWQpLHQuY2FsbCh0aGlzLFwibWRoZFwiLDAsMCksdGhpcy50aW1lc2NhbGU9ZSx0aGlzLmR1cmF0aW9uPW4sdGhpcy5sYW5ndWFnZT1pLHRoaXMuY3JlYXRpb25UaW1lPXIsdGhpcy5tb2RpZmljYXRpb25UaW1lPW99cmV0dXJuIGYoZSx0KSxlLnByb3RvdHlwZS5sYXlvdXQ9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuc2l6ZT10LnByb3RvdHlwZS5sYXlvdXQuY2FsbCh0aGlzLGUpKzE2KzQsdGhpcy5zaXplfSxlLnByb3RvdHlwZS53cml0ZT1mdW5jdGlvbihlKXt2YXIgbj10LnByb3RvdHlwZS53cml0ZS5jYWxsKHRoaXMsZSk7cmV0dXJuIHIoZSx0aGlzLm9mZnNldCtuLHModGhpcy5jcmVhdGlvblRpbWUpKSxyKGUsdGhpcy5vZmZzZXQrbis0LHModGhpcy5tb2RpZmljYXRpb25UaW1lKSkscihlLHRoaXMub2Zmc2V0K24rOCx0aGlzLnRpbWVzY2FsZSkscihlLHRoaXMub2Zmc2V0K24rMTIsdGhpcy5kdXJhdGlvbikscihlLHRoaXMub2Zmc2V0K24rMTYsYyh0aGlzLmxhbmd1YWdlKTw8MTYpLG4rMjB9LGV9KG0pO2wuTWVkaWFIZWFkZXJCb3g9dzt2YXIgVD1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKGUsaSl7dC5jYWxsKHRoaXMsXCJoZGxyXCIsMCwwKSx0aGlzLmhhbmRsZXJUeXBlPWUsdGhpcy5uYW1lPWksdGhpcy5fZW5jb2RlZE5hbWU9bih0aGlzLm5hbWUpfXJldHVybiBmKGUsdCksZS5wcm90b3R5cGUubGF5b3V0PWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLnNpemU9dC5wcm90b3R5cGUubGF5b3V0LmNhbGwodGhpcyxlKSs4KzEyKyh0aGlzLl9lbmNvZGVkTmFtZS5sZW5ndGgrMSksdGhpcy5zaXplfSxlLnByb3RvdHlwZS53cml0ZT1mdW5jdGlvbihlKXt2YXIgbj10LnByb3RvdHlwZS53cml0ZS5jYWxsKHRoaXMsZSk7cmV0dXJuIHIoZSx0aGlzLm9mZnNldCtuLDApLHIoZSx0aGlzLm9mZnNldCtuKzQsbyh0aGlzLmhhbmRsZXJUeXBlKSkscihlLHRoaXMub2Zmc2V0K24rOCwwKSxyKGUsdGhpcy5vZmZzZXQrbisxMiwwKSxyKGUsdGhpcy5vZmZzZXQrbisxNiwwKSxuKz0yMCxlLnNldCh0aGlzLl9lbmNvZGVkTmFtZSx0aGlzLm9mZnNldCtuKSxlW3RoaXMub2Zmc2V0K24rdGhpcy5fZW5jb2RlZE5hbWUubGVuZ3RoXT0wLG4rPXRoaXMuX2VuY29kZWROYW1lLmxlbmd0aCsxfSxlfShtKTtsLkhhbmRsZXJCb3g9VDt2YXIgYj1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKGUpe3ZvaWQgMD09PWUmJihlPTApLHQuY2FsbCh0aGlzLFwic21oZFwiLDAsMCksdGhpcy5iYWxhbmNlPWV9cmV0dXJuIGYoZSx0KSxlLnByb3RvdHlwZS5sYXlvdXQ9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuc2l6ZT10LnByb3RvdHlwZS5sYXlvdXQuY2FsbCh0aGlzLGUpKzQsdGhpcy5zaXplfSxlLnByb3RvdHlwZS53cml0ZT1mdW5jdGlvbihlKXt2YXIgbj10LnByb3RvdHlwZS53cml0ZS5jYWxsKHRoaXMsZSk7cmV0dXJuIHIoZSx0aGlzLm9mZnNldCtuLGgodGhpcy5iYWxhbmNlKTw8MTYpLG4rNH0sZX0obSk7bC5Tb3VuZE1lZGlhSGVhZGVyQm94PWI7dmFyIFA9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZShlLG4pe3ZvaWQgMD09PWUmJihlPTApLHZvaWQgMD09PW4mJihuPWcpLHQuY2FsbCh0aGlzLFwidm1oZFwiLDAsMCksdGhpcy5ncmFwaGljc01vZGU9ZSx0aGlzLm9wQ29sb3I9bn1yZXR1cm4gZihlLHQpLGUucHJvdG90eXBlLmxheW91dD1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5zaXplPXQucHJvdG90eXBlLmxheW91dC5jYWxsKHRoaXMsZSkrOCx0aGlzLnNpemV9LGUucHJvdG90eXBlLndyaXRlPWZ1bmN0aW9uKGUpe3ZhciBuPXQucHJvdG90eXBlLndyaXRlLmNhbGwodGhpcyxlKTtyZXR1cm4gcihlLHRoaXMub2Zmc2V0K24sdGhpcy5ncmFwaGljc01vZGU8PDE2fHRoaXMub3BDb2xvclswXSkscihlLHRoaXMub2Zmc2V0K24rNCx0aGlzLm9wQ29sb3JbMV08PDE2fHRoaXMub3BDb2xvclsyXSksbis4fSxlfShtKTtsLlZpZGVvTWVkaWFIZWFkZXJCb3g9UCxsLlNFTEZfQ09OVEFJTkVEX0RBVEFfUkVGRVJFTkNFX0ZMQUc9MTt2YXIgST1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKGUsaSl7dm9pZCAwPT09aSYmKGk9bnVsbCksdC5jYWxsKHRoaXMsXCJ1cmwgXCIsMCxlKSx0aGlzLmxvY2F0aW9uPWksZSZsLlNFTEZfQ09OVEFJTkVEX0RBVEFfUkVGRVJFTkNFX0ZMQUd8fCh0aGlzLl9lbmNvZGVkTG9jYXRpb249bihpKSl9cmV0dXJuIGYoZSx0KSxlLnByb3RvdHlwZS5sYXlvdXQ9ZnVuY3Rpb24oZSl7dmFyIG49dC5wcm90b3R5cGUubGF5b3V0LmNhbGwodGhpcyxlKTtyZXR1cm4gdGhpcy5fZW5jb2RlZExvY2F0aW9uJiYobis9dGhpcy5fZW5jb2RlZExvY2F0aW9uLmxlbmd0aCsxKSx0aGlzLnNpemU9bn0sZS5wcm90b3R5cGUud3JpdGU9ZnVuY3Rpb24oZSl7dmFyIG49dC5wcm90b3R5cGUud3JpdGUuY2FsbCh0aGlzLGUpO3JldHVybiB0aGlzLl9lbmNvZGVkTG9jYXRpb24mJihlLnNldCh0aGlzLl9lbmNvZGVkTG9jYXRpb24sdGhpcy5vZmZzZXQrbiksZVt0aGlzLm9mZnNldCtuK3RoaXMuX2VuY29kZWRMb2NhdGlvbi5sZW5ndGhdPTAsbis9dGhpcy5fZW5jb2RlZExvY2F0aW9uLmxlbmd0aCksbn0sZX0obSk7bC5EYXRhRW50cnlVcmxCb3g9STt2YXIgTD1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKGUpe3QuY2FsbCh0aGlzLFwiZHJlZlwiLDAsMCksdGhpcy5lbnRyaWVzPWV9cmV0dXJuIGYoZSx0KSxlLnByb3RvdHlwZS5sYXlvdXQ9ZnVuY3Rpb24oZSl7dmFyIG49dC5wcm90b3R5cGUubGF5b3V0LmNhbGwodGhpcyxlKSs0O3JldHVybiB0aGlzLmVudHJpZXMuZm9yRWFjaChmdW5jdGlvbih0KXtuKz10LmxheW91dChlK24pfSksdGhpcy5zaXplPW59LGUucHJvdG90eXBlLndyaXRlPWZ1bmN0aW9uKGUpe3ZhciBuPXQucHJvdG90eXBlLndyaXRlLmNhbGwodGhpcyxlKTtyZXR1cm4gcihlLHRoaXMub2Zmc2V0K24sdGhpcy5lbnRyaWVzLmxlbmd0aCksdGhpcy5lbnRyaWVzLmZvckVhY2goZnVuY3Rpb24odCl7bis9dC53cml0ZShlKX0pLG59LGV9KG0pO2wuRGF0YVJlZmVyZW5jZUJveD1MO3ZhciBPPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoZSl7dC5jYWxsKHRoaXMsXCJkaW5mXCIsW2VdKSx0aGlzLmRhdGFSZWZlcmVuY2U9ZX1yZXR1cm4gZihlLHQpLGV9KHYpO2wuRGF0YUluZm9ybWF0aW9uQm94PU87dmFyIFI9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZShlKXt0LmNhbGwodGhpcyxcInN0c2RcIiwwLDApLHRoaXMuZW50cmllcz1lfXJldHVybiBmKGUsdCksZS5wcm90b3R5cGUubGF5b3V0PWZ1bmN0aW9uKGUpe3ZhciBuPXQucHJvdG90eXBlLmxheW91dC5jYWxsKHRoaXMsZSk7cmV0dXJuIG4rPTQsdGhpcy5lbnRyaWVzLmZvckVhY2goZnVuY3Rpb24odCl7bis9dC5sYXlvdXQoZStuKX0pLHRoaXMuc2l6ZT1ufSxlLnByb3RvdHlwZS53cml0ZT1mdW5jdGlvbihlKXt2YXIgbj10LnByb3RvdHlwZS53cml0ZS5jYWxsKHRoaXMsZSk7cmV0dXJuIHIoZSx0aGlzLm9mZnNldCtuLHRoaXMuZW50cmllcy5sZW5ndGgpLG4rPTQsdGhpcy5lbnRyaWVzLmZvckVhY2goZnVuY3Rpb24odCl7bis9dC53cml0ZShlKX0pLG59LGV9KG0pO2wuU2FtcGxlRGVzY3JpcHRpb25Cb3g9Ujt2YXIgRD1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKGUsbixpLHIsbyl7dC5jYWxsKHRoaXMsXCJzdGJsXCIsW2UsbixpLHIsb10pLHRoaXMuc2FtcGxlRGVzY3JpcHRpb25zPWUsdGhpcy50aW1lVG9TYW1wbGU9bix0aGlzLnNhbXBsZVRvQ2h1bms9aSx0aGlzLnNhbXBsZVNpemVzPXIsdGhpcy5jaHVua09mZnNldD1vfXJldHVybiBmKGUsdCksZX0odik7bC5TYW1wbGVUYWJsZUJveD1EO3ZhciBNPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoZSxuLGkpe3QuY2FsbCh0aGlzLFwibWluZlwiLFtlLG4saV0pLHRoaXMuaGVhZGVyPWUsdGhpcy5pbmZvPW4sdGhpcy5zYW1wbGVUYWJsZT1pfXJldHVybiBmKGUsdCksZX0odik7bC5NZWRpYUluZm9ybWF0aW9uQm94PU07dmFyIGs9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZShlLG4saSl7dC5jYWxsKHRoaXMsXCJtZGlhXCIsW2UsbixpXSksdGhpcy5oZWFkZXI9ZSx0aGlzLmhhbmRsZXI9bix0aGlzLmluZm89aX1yZXR1cm4gZihlLHQpLGV9KHYpO2wuTWVkaWFCb3g9azt2YXIgTj1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKGUsbil7dC5jYWxsKHRoaXMsXCJ0cmFrXCIsW2Usbl0pLHRoaXMuaGVhZGVyPWUsdGhpcy5tZWRpYT1ufXJldHVybiBmKGUsdCksZX0odik7bC5UcmFja0JveD1OO3ZhciB4PWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoZSxuLGkscixvKXt0LmNhbGwodGhpcyxcInRyZXhcIiwwLDApLHRoaXMudHJhY2tJZD1lLHRoaXMuZGVmYXVsdFNhbXBsZURlc2NyaXB0aW9uSW5kZXg9bix0aGlzLmRlZmF1bHRTYW1wbGVEdXJhdGlvbj1pLHRoaXMuZGVmYXVsdFNhbXBsZVNpemU9cix0aGlzLmRlZmF1bHRTYW1wbGVGbGFncz1vfXJldHVybiBmKGUsdCksZS5wcm90b3R5cGUubGF5b3V0PWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLnNpemU9dC5wcm90b3R5cGUubGF5b3V0LmNhbGwodGhpcyxlKSsyMCx0aGlzLnNpemV9LGUucHJvdG90eXBlLndyaXRlPWZ1bmN0aW9uKGUpe3ZhciBuPXQucHJvdG90eXBlLndyaXRlLmNhbGwodGhpcyxlKTtyZXR1cm4gcihlLHRoaXMub2Zmc2V0K24sdGhpcy50cmFja0lkKSxyKGUsdGhpcy5vZmZzZXQrbis0LHRoaXMuZGVmYXVsdFNhbXBsZURlc2NyaXB0aW9uSW5kZXgpLHIoZSx0aGlzLm9mZnNldCtuKzgsdGhpcy5kZWZhdWx0U2FtcGxlRHVyYXRpb24pLHIoZSx0aGlzLm9mZnNldCtuKzEyLHRoaXMuZGVmYXVsdFNhbXBsZVNpemUpLHIoZSx0aGlzLm9mZnNldCtuKzE2LHRoaXMuZGVmYXVsdFNhbXBsZUZsYWdzKSxuKzIwfSxlfShtKTtsLlRyYWNrRXh0ZW5kc0JveD14O3ZhciBDPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoZSxuLHIpe3QuY2FsbCh0aGlzLFwibXZleFwiLGkoW2VdLG4sW3JdKSksdGhpcy5oZWFkZXI9ZSx0aGlzLnRyYWNEZWZhdWx0cz1uLHRoaXMubGV2ZWxzPXJ9cmV0dXJuIGYoZSx0KSxlfSh2KTtsLk1vdmllRXh0ZW5kc0JveD1DO3ZhciBGPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoZSxuKXt0LmNhbGwodGhpcyxcIm1ldGFcIiwwLDApLHRoaXMuaGFuZGxlcj1lLHRoaXMub3RoZXJCb3hlcz1ufXJldHVybiBmKGUsdCksZS5wcm90b3R5cGUubGF5b3V0PWZ1bmN0aW9uKGUpe3ZhciBuPXQucHJvdG90eXBlLmxheW91dC5jYWxsKHRoaXMsZSk7cmV0dXJuIG4rPXRoaXMuaGFuZGxlci5sYXlvdXQoZStuKSx0aGlzLm90aGVyQm94ZXMuZm9yRWFjaChmdW5jdGlvbih0KXtuKz10LmxheW91dChlK24pfSksdGhpcy5zaXplPW59LGUucHJvdG90eXBlLndyaXRlPWZ1bmN0aW9uKGUpe3ZhciBuPXQucHJvdG90eXBlLndyaXRlLmNhbGwodGhpcyxlKTtyZXR1cm4gbis9dGhpcy5oYW5kbGVyLndyaXRlKGUpLHRoaXMub3RoZXJCb3hlcy5mb3JFYWNoKGZ1bmN0aW9uKHQpe24rPXQud3JpdGUoZSl9KSxufSxlfShtKTtsLk1ldGFCb3g9Rjt2YXIgVT1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKGUpe3QuY2FsbCh0aGlzLFwibWZoZFwiLDAsMCksdGhpcy5zZXF1ZW5jZU51bWJlcj1lfXJldHVybiBmKGUsdCksZS5wcm90b3R5cGUubGF5b3V0PWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLnNpemU9dC5wcm90b3R5cGUubGF5b3V0LmNhbGwodGhpcyxlKSs0LHRoaXMuc2l6ZX0sZS5wcm90b3R5cGUud3JpdGU9ZnVuY3Rpb24oZSl7dmFyIG49dC5wcm90b3R5cGUud3JpdGUuY2FsbCh0aGlzLGUpO3JldHVybiByKGUsdGhpcy5vZmZzZXQrbix0aGlzLnNlcXVlbmNlTnVtYmVyKSxuKzR9LGV9KG0pO2wuTW92aWVGcmFnbWVudEhlYWRlckJveD1VLGZ1bmN0aW9uKHQpe3RbdC5CQVNFX0RBVEFfT0ZGU0VUX1BSRVNFTlQ9MV09XCJCQVNFX0RBVEFfT0ZGU0VUX1BSRVNFTlRcIix0W3QuU0FNUExFX0RFU0NSSVBUSU9OX0lOREVYX1BSRVNFTlQ9Ml09XCJTQU1QTEVfREVTQ1JJUFRJT05fSU5ERVhfUFJFU0VOVFwiLHRbdC5ERUZBVUxUX1NBTVBMRV9EVVJBVElPTl9QUkVTRU5UPThdPVwiREVGQVVMVF9TQU1QTEVfRFVSQVRJT05fUFJFU0VOVFwiLHRbdC5ERUZBVUxUX1NBTVBMRV9TSVpFX1BSRVNFTlQ9MTZdPVwiREVGQVVMVF9TQU1QTEVfU0laRV9QUkVTRU5UXCIsdFt0LkRFRkFVTFRfU0FNUExFX0ZMQUdTX1BSRVNFTlQ9MzJdPVwiREVGQVVMVF9TQU1QTEVfRkxBR1NfUFJFU0VOVFwifShsLlRyYWNrRnJhZ21lbnRGbGFnc3x8KGwuVHJhY2tGcmFnbWVudEZsYWdzPXt9KSk7dmFyIEI9bC5UcmFja0ZyYWdtZW50RmxhZ3MsSD1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKGUsbixpLHIsbyxzLGEpe3QuY2FsbCh0aGlzLFwidGZoZFwiLDAsZSksdGhpcy50cmFja0lkPW4sdGhpcy5iYXNlRGF0YU9mZnNldD1pLHRoaXMuc2FtcGxlRGVzY3JpcHRpb25JbmRleD1yLHRoaXMuZGVmYXVsdFNhbXBsZUR1cmF0aW9uPW8sdGhpcy5kZWZhdWx0U2FtcGxlU2l6ZT1zLHRoaXMuZGVmYXVsdFNhbXBsZUZsYWdzPWF9cmV0dXJuIGYoZSx0KSxlLnByb3RvdHlwZS5sYXlvdXQ9ZnVuY3Rpb24oZSl7dmFyIG49dC5wcm90b3R5cGUubGF5b3V0LmNhbGwodGhpcyxlKSs0LGk9dGhpcy5mbGFncztyZXR1cm4gaSZCLkJBU0VfREFUQV9PRkZTRVRfUFJFU0VOVCYmKG4rPTgpLGkmQi5TQU1QTEVfREVTQ1JJUFRJT05fSU5ERVhfUFJFU0VOVCYmKG4rPTQpLGkmQi5ERUZBVUxUX1NBTVBMRV9EVVJBVElPTl9QUkVTRU5UJiYobis9NCksaSZCLkRFRkFVTFRfU0FNUExFX1NJWkVfUFJFU0VOVCYmKG4rPTQpLGkmQi5ERUZBVUxUX1NBTVBMRV9GTEFHU19QUkVTRU5UJiYobis9NCksdGhpcy5zaXplPW59LGUucHJvdG90eXBlLndyaXRlPWZ1bmN0aW9uKGUpe3ZhciBuPXQucHJvdG90eXBlLndyaXRlLmNhbGwodGhpcyxlKSxpPXRoaXMuZmxhZ3M7cmV0dXJuIHIoZSx0aGlzLm9mZnNldCtuLHRoaXMudHJhY2tJZCksbis9NCxpJkIuQkFTRV9EQVRBX09GRlNFVF9QUkVTRU5UJiYocihlLHRoaXMub2Zmc2V0K24sMCkscihlLHRoaXMub2Zmc2V0K24rNCx0aGlzLmJhc2VEYXRhT2Zmc2V0KSxuKz04KSxpJkIuU0FNUExFX0RFU0NSSVBUSU9OX0lOREVYX1BSRVNFTlQmJihyKGUsdGhpcy5vZmZzZXQrbix0aGlzLnNhbXBsZURlc2NyaXB0aW9uSW5kZXgpLG4rPTQpLGkmQi5ERUZBVUxUX1NBTVBMRV9EVVJBVElPTl9QUkVTRU5UJiYocihlLHRoaXMub2Zmc2V0K24sdGhpcy5kZWZhdWx0U2FtcGxlRHVyYXRpb24pLG4rPTQpLGkmQi5ERUZBVUxUX1NBTVBMRV9TSVpFX1BSRVNFTlQmJihyKGUsdGhpcy5vZmZzZXQrbix0aGlzLmRlZmF1bHRTYW1wbGVTaXplKSxuKz00KSxpJkIuREVGQVVMVF9TQU1QTEVfRkxBR1NfUFJFU0VOVCYmKHIoZSx0aGlzLm9mZnNldCtuLHRoaXMuZGVmYXVsdFNhbXBsZUZsYWdzKSxuKz00KSxufSxlfShtKTtsLlRyYWNrRnJhZ21lbnRIZWFkZXJCb3g9SDtcbnZhciBqPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoZSl7dC5jYWxsKHRoaXMsXCJ0ZmR0XCIsMCwwKSx0aGlzLmJhc2VNZWRpYURlY29kZVRpbWU9ZX1yZXR1cm4gZihlLHQpLGUucHJvdG90eXBlLmxheW91dD1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5zaXplPXQucHJvdG90eXBlLmxheW91dC5jYWxsKHRoaXMsZSkrNCx0aGlzLnNpemV9LGUucHJvdG90eXBlLndyaXRlPWZ1bmN0aW9uKGUpe3ZhciBuPXQucHJvdG90eXBlLndyaXRlLmNhbGwodGhpcyxlKTtyZXR1cm4gcihlLHRoaXMub2Zmc2V0K24sdGhpcy5iYXNlTWVkaWFEZWNvZGVUaW1lKSxuKzR9LGV9KG0pO2wuVHJhY2tGcmFnbWVudEJhc2VNZWRpYURlY29kZVRpbWVCb3g9ajt2YXIgRz1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKGUsbixpKXt0LmNhbGwodGhpcyxcInRyYWZcIixbZSxuLGldKSx0aGlzLmhlYWRlcj1lLHRoaXMuZGVjb2RlVGltZT1uLHRoaXMucnVuPWl9cmV0dXJuIGYoZSx0KSxlfSh2KTtsLlRyYWNrRnJhZ21lbnRCb3g9RyxmdW5jdGlvbih0KXt0W3QuSVNfTEVBRElOR19NQVNLPTIwMTMyNjU5Ml09XCJJU19MRUFESU5HX01BU0tcIix0W3QuU0FNUExFX0RFUEVORFNfT05fTUFTSz01MDMzMTY0OF09XCJTQU1QTEVfREVQRU5EU19PTl9NQVNLXCIsdFt0LlNBTVBMRV9ERVBFTkRTX09OX09USEVSPTE2Nzc3MjE2XT1cIlNBTVBMRV9ERVBFTkRTX09OX09USEVSXCIsdFt0LlNBTVBMRV9ERVBFTkRTX09OX05PX09USEVSUz0zMzU1NDQzMl09XCJTQU1QTEVfREVQRU5EU19PTl9OT19PVEhFUlNcIix0W3QuU0FNUExFX0lTX0RFUEVOREVEX09OX01BU0s9MTI1ODI5MTJdPVwiU0FNUExFX0lTX0RFUEVOREVEX09OX01BU0tcIix0W3QuU0FNUExFX0hBU19SRURVTkRBTkNZX01BU0s9MzE0NTcyOF09XCJTQU1QTEVfSEFTX1JFRFVOREFOQ1lfTUFTS1wiLHRbdC5TQU1QTEVfUEFERElOR19WQUxVRV9NQVNLPTkxNzUwNF09XCJTQU1QTEVfUEFERElOR19WQUxVRV9NQVNLXCIsdFt0LlNBTVBMRV9JU19OT1RfU1lOQz02NTUzNl09XCJTQU1QTEVfSVNfTk9UX1NZTkNcIix0W3QuU0FNUExFX0RFR1JBREFUSU9OX1BSSU9SSVRZX01BU0s9NjU1MzVdPVwiU0FNUExFX0RFR1JBREFUSU9OX1BSSU9SSVRZX01BU0tcIn0obC5TYW1wbGVGbGFnc3x8KGwuU2FtcGxlRmxhZ3M9e30pKSxsLlNhbXBsZUZsYWdzLCFmdW5jdGlvbih0KXt0W3QuREFUQV9PRkZTRVRfUFJFU0VOVD0xXT1cIkRBVEFfT0ZGU0VUX1BSRVNFTlRcIix0W3QuRklSU1RfU0FNUExFX0ZMQUdTX1BSRVNFTlQ9NF09XCJGSVJTVF9TQU1QTEVfRkxBR1NfUFJFU0VOVFwiLHRbdC5TQU1QTEVfRFVSQVRJT05fUFJFU0VOVD0yNTZdPVwiU0FNUExFX0RVUkFUSU9OX1BSRVNFTlRcIix0W3QuU0FNUExFX1NJWkVfUFJFU0VOVD01MTJdPVwiU0FNUExFX1NJWkVfUFJFU0VOVFwiLHRbdC5TQU1QTEVfRkxBR1NfUFJFU0VOVD0xMDI0XT1cIlNBTVBMRV9GTEFHU19QUkVTRU5UXCIsdFt0LlNBTVBMRV9DT01QT1NJVElPTl9USU1FX09GRlNFVD0yMDQ4XT1cIlNBTVBMRV9DT01QT1NJVElPTl9USU1FX09GRlNFVFwifShsLlRyYWNrUnVuRmxhZ3N8fChsLlRyYWNrUnVuRmxhZ3M9e30pKTt2YXIgWT1sLlRyYWNrUnVuRmxhZ3MsVj1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKGUsbixpLHIpe3QuY2FsbCh0aGlzLFwidHJ1blwiLDEsZSksdGhpcy5zYW1wbGVzPW4sdGhpcy5kYXRhT2Zmc2V0PWksdGhpcy5maXJzdFNhbXBsZUZsYWdzPXJ9cmV0dXJuIGYoZSx0KSxlLnByb3RvdHlwZS5sYXlvdXQ9ZnVuY3Rpb24oZSl7dmFyIG49dC5wcm90b3R5cGUubGF5b3V0LmNhbGwodGhpcyxlKSs0LGk9dGhpcy5zYW1wbGVzLmxlbmd0aCxyPXRoaXMuZmxhZ3M7cmV0dXJuIHImWS5EQVRBX09GRlNFVF9QUkVTRU5UJiYobis9NCksciZZLkZJUlNUX1NBTVBMRV9GTEFHU19QUkVTRU5UJiYobis9NCksciZZLlNBTVBMRV9EVVJBVElPTl9QUkVTRU5UJiYobis9NCppKSxyJlkuU0FNUExFX1NJWkVfUFJFU0VOVCYmKG4rPTQqaSksciZZLlNBTVBMRV9GTEFHU19QUkVTRU5UJiYobis9NCppKSxyJlkuU0FNUExFX0NPTVBPU0lUSU9OX1RJTUVfT0ZGU0VUJiYobis9NCppKSx0aGlzLnNpemU9bn0sZS5wcm90b3R5cGUud3JpdGU9ZnVuY3Rpb24oZSl7dmFyIG49dC5wcm90b3R5cGUud3JpdGUuY2FsbCh0aGlzLGUpLGk9dGhpcy5zYW1wbGVzLmxlbmd0aCxvPXRoaXMuZmxhZ3M7cihlLHRoaXMub2Zmc2V0K24saSksbis9NCxvJlkuREFUQV9PRkZTRVRfUFJFU0VOVCYmKHIoZSx0aGlzLm9mZnNldCtuLHRoaXMuZGF0YU9mZnNldCksbis9NCksbyZZLkZJUlNUX1NBTVBMRV9GTEFHU19QUkVTRU5UJiYocihlLHRoaXMub2Zmc2V0K24sdGhpcy5maXJzdFNhbXBsZUZsYWdzKSxuKz00KTtmb3IodmFyIHM9MDtpPnM7cysrKXt2YXIgYT10aGlzLnNhbXBsZXNbc107byZZLlNBTVBMRV9EVVJBVElPTl9QUkVTRU5UJiYocihlLHRoaXMub2Zmc2V0K24sYS5kdXJhdGlvbiksbis9NCksbyZZLlNBTVBMRV9TSVpFX1BSRVNFTlQmJihyKGUsdGhpcy5vZmZzZXQrbixhLnNpemUpLG4rPTQpLG8mWS5TQU1QTEVfRkxBR1NfUFJFU0VOVCYmKHIoZSx0aGlzLm9mZnNldCtuLGEuZmxhZ3MpLG4rPTQpLG8mWS5TQU1QTEVfQ09NUE9TSVRJT05fVElNRV9PRkZTRVQmJihyKGUsdGhpcy5vZmZzZXQrbixhLmNvbXBvc2l0aW9uVGltZU9mZnNldCksbis9NCl9cmV0dXJuIG59LGV9KG0pO2wuVHJhY2tSdW5Cb3g9Vjt2YXIgej1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKGUsbil7dC5jYWxsKHRoaXMsXCJtb29mXCIsaShbZV0sbikpLHRoaXMuaGVhZGVyPWUsdGhpcy50cmFmcz1ufXJldHVybiBmKGUsdCksZX0odik7bC5Nb3ZpZUZyYWdtZW50Qm94PXo7dmFyIFc9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZShlKXt0LmNhbGwodGhpcyxcIm1kYXRcIiksdGhpcy5jaHVua3M9ZX1yZXR1cm4gZihlLHQpLGUucHJvdG90eXBlLmxheW91dD1mdW5jdGlvbihlKXt2YXIgbj10LnByb3RvdHlwZS5sYXlvdXQuY2FsbCh0aGlzLGUpO3JldHVybiB0aGlzLmNodW5rcy5mb3JFYWNoKGZ1bmN0aW9uKHQpe24rPXQubGVuZ3RofSksdGhpcy5zaXplPW59LGUucHJvdG90eXBlLndyaXRlPWZ1bmN0aW9uKGUpe3ZhciBuPXRoaXMsaT10LnByb3RvdHlwZS53cml0ZS5jYWxsKHRoaXMsZSk7cmV0dXJuIHRoaXMuY2h1bmtzLmZvckVhY2goZnVuY3Rpb24odCl7ZS5zZXQodCxuLm9mZnNldCtpKSxpKz10Lmxlbmd0aH0sdGhpcyksaX0sZX0oXyk7bC5NZWRpYURhdGFCb3g9Vzt2YXIgSz1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKGUsbil7dC5jYWxsKHRoaXMsZSksdGhpcy5kYXRhUmVmZXJlbmNlSW5kZXg9bn1yZXR1cm4gZihlLHQpLGUucHJvdG90eXBlLmxheW91dD1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5zaXplPXQucHJvdG90eXBlLmxheW91dC5jYWxsKHRoaXMsZSkrOCx0aGlzLnNpemV9LGUucHJvdG90eXBlLndyaXRlPWZ1bmN0aW9uKGUpe3ZhciBuPXQucHJvdG90eXBlLndyaXRlLmNhbGwodGhpcyxlKTtyZXR1cm4gcihlLHRoaXMub2Zmc2V0K24sMCkscihlLHRoaXMub2Zmc2V0K24rNCx0aGlzLmRhdGFSZWZlcmVuY2VJbmRleCksbis4fSxlfShfKTtsLlNhbXBsZUVudHJ5PUs7dmFyIHE9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZShlLG4saSxyLG8scyl7dm9pZCAwPT09aSYmKGk9Miksdm9pZCAwPT09ciYmKHI9MTYpLHZvaWQgMD09PW8mJihvPTQ0MTAwKSx2b2lkIDA9PT1zJiYocz1udWxsKSx0LmNhbGwodGhpcyxlLG4pLHRoaXMuY2hhbm5lbENvdW50PWksdGhpcy5zYW1wbGVTaXplPXIsdGhpcy5zYW1wbGVSYXRlPW8sdGhpcy5vdGhlckJveGVzPXN9cmV0dXJuIGYoZSx0KSxlLnByb3RvdHlwZS5sYXlvdXQ9ZnVuY3Rpb24oZSl7dmFyIG49dC5wcm90b3R5cGUubGF5b3V0LmNhbGwodGhpcyxlKSsyMDtyZXR1cm4gdGhpcy5vdGhlckJveGVzJiZ0aGlzLm90aGVyQm94ZXMuZm9yRWFjaChmdW5jdGlvbih0KXtuKz10LmxheW91dChlK24pfSksdGhpcy5zaXplPW59LGUucHJvdG90eXBlLndyaXRlPWZ1bmN0aW9uKGUpe3ZhciBuPXQucHJvdG90eXBlLndyaXRlLmNhbGwodGhpcyxlKTtyZXR1cm4gcihlLHRoaXMub2Zmc2V0K24sMCkscihlLHRoaXMub2Zmc2V0K24rNCwwKSxyKGUsdGhpcy5vZmZzZXQrbis4LHRoaXMuY2hhbm5lbENvdW50PDwxNnx0aGlzLnNhbXBsZVNpemUpLHIoZSx0aGlzLm9mZnNldCtuKzEyLDApLHIoZSx0aGlzLm9mZnNldCtuKzE2LHRoaXMuc2FtcGxlUmF0ZTw8MTYpLG4rPTIwLHRoaXMub3RoZXJCb3hlcyYmdGhpcy5vdGhlckJveGVzLmZvckVhY2goZnVuY3Rpb24odCl7bis9dC53cml0ZShlKX0pLG59LGV9KEspO2wuQXVkaW9TYW1wbGVFbnRyeT1xLGwuQ09MT1JfTk9fQUxQSEFfVklERU9fU0FNUExFX0RFUFRIPTI0O3ZhciBYPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoZSxuLGkscixvLHMsYSx1LGgsYyl7aWYodm9pZCAwPT09byYmKG89XCJcIiksdm9pZCAwPT09cyYmKHM9NzIpLHZvaWQgMD09PWEmJihhPTcyKSx2b2lkIDA9PT11JiYodT0xKSx2b2lkIDA9PT1oJiYoaD1sLkNPTE9SX05PX0FMUEhBX1ZJREVPX1NBTVBMRV9ERVBUSCksdm9pZCAwPT09YyYmKGM9bnVsbCksdC5jYWxsKHRoaXMsZSxuKSx0aGlzLndpZHRoPWksdGhpcy5oZWlnaHQ9cix0aGlzLmNvbXByZXNzb3JOYW1lPW8sdGhpcy5ob3JpelJlc29sdXRpb249cyx0aGlzLnZlcnRSZXNvbHV0aW9uPWEsdGhpcy5mcmFtZUNvdW50PXUsdGhpcy5kZXB0aD1oLHRoaXMub3RoZXJCb3hlcz1jLG8ubGVuZ3RoPjMxKXRocm93IG5ldyBFcnJvcihcImludmFsaWQgY29tcHJlc3NvciBuYW1lXCIpfXJldHVybiBmKGUsdCksZS5wcm90b3R5cGUubGF5b3V0PWZ1bmN0aW9uKGUpe3ZhciBuPXQucHJvdG90eXBlLmxheW91dC5jYWxsKHRoaXMsZSkrMTYrMTIrNCsyKzMyKzIrMjtyZXR1cm4gdGhpcy5vdGhlckJveGVzJiZ0aGlzLm90aGVyQm94ZXMuZm9yRWFjaChmdW5jdGlvbih0KXtuKz10LmxheW91dChlK24pfSksdGhpcy5zaXplPW59LGUucHJvdG90eXBlLndyaXRlPWZ1bmN0aW9uKGUpe3ZhciBuPXQucHJvdG90eXBlLndyaXRlLmNhbGwodGhpcyxlKTtyKGUsdGhpcy5vZmZzZXQrbiwwKSxyKGUsdGhpcy5vZmZzZXQrbis0LDApLHIoZSx0aGlzLm9mZnNldCtuKzgsMCkscihlLHRoaXMub2Zmc2V0K24rMTIsMCksbis9MTYscihlLHRoaXMub2Zmc2V0K24sdGhpcy53aWR0aDw8MTZ8dGhpcy5oZWlnaHQpLHIoZSx0aGlzLm9mZnNldCtuKzQsYSh0aGlzLmhvcml6UmVzb2x1dGlvbikpLHIoZSx0aGlzLm9mZnNldCtuKzgsYSh0aGlzLnZlcnRSZXNvbHV0aW9uKSksbis9MTIscihlLHRoaXMub2Zmc2V0K24sMCkscihlLHRoaXMub2Zmc2V0K24rNCx0aGlzLmZyYW1lQ291bnQ8PDE2KSxuKz02LGVbdGhpcy5vZmZzZXQrbl09dGhpcy5jb21wcmVzc29yTmFtZS5sZW5ndGg7Zm9yKHZhciBpPTA7MzE+aTtpKyspZVt0aGlzLm9mZnNldCtuK2krMV09aTx0aGlzLmNvbXByZXNzb3JOYW1lLmxlbmd0aD8xMjcmdGhpcy5jb21wcmVzc29yTmFtZS5jaGFyQ29kZUF0KGkpOjA7cmV0dXJuIG4rPTMyLHIoZSx0aGlzLm9mZnNldCtuLHRoaXMuZGVwdGg8PDE2fDY1NTM1KSxuKz00LHRoaXMub3RoZXJCb3hlcyYmdGhpcy5vdGhlckJveGVzLmZvckVhY2goZnVuY3Rpb24odCl7bis9dC53cml0ZShlKX0pLG59LGV9KEspO2wuVmlkZW9TYW1wbGVFbnRyeT1YO3ZhciAkPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoZSxuKXt0LmNhbGwodGhpcyxlKSx0aGlzLmRhdGE9bn1yZXR1cm4gZihlLHQpLGUucHJvdG90eXBlLmxheW91dD1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5zaXplPXQucHJvdG90eXBlLmxheW91dC5jYWxsKHRoaXMsZSkrdGhpcy5kYXRhLmxlbmd0aCx0aGlzLnNpemV9LGUucHJvdG90eXBlLndyaXRlPWZ1bmN0aW9uKGUpe3ZhciBuPXQucHJvdG90eXBlLndyaXRlLmNhbGwodGhpcyxlKTtyZXR1cm4gZS5zZXQodGhpcy5kYXRhLHRoaXMub2Zmc2V0K24pLG4rdGhpcy5kYXRhLmxlbmd0aH0sZX0oXyk7bC5SYXdUYWc9JH0sZnVuY3Rpb24odCxlLG4peyhmdW5jdGlvbihlKXt2YXIgaSxyPW4oNzQpLG89big2OSkscz0oby5CYXNlVHJhbnNmb3JtLG4oMTE5KSk7bigxMjApLHQuZXhwb3J0cz1pPWZ1bmN0aW9uKCl7by5CYXNlUGFyc2VyLnByb3RvdHlwZS5jb25zdHJ1Y3Rvci5hcHBseSh0aGlzLGFyZ3VtZW50cyksdGhpcy5wYXJzZXI9bmV3IHMsdGhpcy5wYXJzZXIub25GcmFtZT10aGlzLl9vbk1wM0ZyYW1lLmJpbmQodGhpcyksdGhpcy5wYXJzZXIub25Ob2lzZT10aGlzLl9vbk5vaXNlLmJpbmQodGhpcyksdGhpcy5wYXJzZXIub25DbG9zZT10aGlzLl9vbkNsb3NlLmJpbmQodGhpcyksdGhpcy5fc2FtcGxlUmF0ZT0wLHRoaXMuX2JpdFJhdGU9MCx0aGlzLl90aW1lc3RhbXA9MH0saS5wcm90b3R5cGU9by5jcmVhdGVCYXNlUGFyc2VyKHtjb25zdHJ1Y3RvcjppLF9vbk1wM0ZyYW1lOmZ1bmN0aW9uKHQsbixpKXtyKFwiRm91bmQgZnJhbWUgbGVuZ3RoIFwiK3QubGVuZ3RoK1wiIGJpdFJhdGU9XCIrbitcIiwgc2FtcGxlUmF0ZT1cIitpKTt2YXIgcz1uZXcgZSh0KSxhPTExNTI7cy5tZXRhPXttaW1lVHlwZTpcImF1ZGlvL21wZWdcIixjb2RlY0lkOjIsY2hhbm5lbHM6MixiaXRSYXRlOm4sc2FtcGxlUmF0ZTppLHNhbXBsZVNpemU6MTZ9LHMuZHVyYXRpb249YSxzLnRpbWVzdGFtcD10aGlzLl90aW1lc3RhbXAsdGhpcy5lbnF1ZXVlKG5ldyBvLlRyYW5zZmVyKHMsXCJidWZmZXJcIikpLHRoaXMuX2JpdFJhdGU9bix0aGlzLl90aW1lc3RhbXArPWF9LF9vbk5vaXNlOmZ1bmN0aW9uKCl7cihcIm1wMyBoYXMgbm9pc2VcIil9LF9vbkNsb3NlOmZ1bmN0aW9uKCl7cihcInBhcnNlciBjbG9zZWRcIil9LF9wYXJzZTpmdW5jdGlvbih0KXtyZXR1cm4gcihcInBhcnNlIGNhbGxlZFwiKSx0LmRhdGEuZW1wdHk/KHIoXCJlbXB0eSB0cmFuc2ZlclwiKSx2b2lkIHRoaXMuZW5xdWV1ZSh0KSk6dm9pZCB0aGlzLnBhcnNlci5wdXNoKG5ldyBVaW50OEFycmF5KHQuZGF0YSkpfX0pfSkuY2FsbChlLG4oNzApLkJ1ZmZlcil9LGZ1bmN0aW9uKHQsZSxuKXt2YXIgaT1uKDc0KSxyPVszMiw2NCw5NiwxMjgsMTYwLDE5MiwyMjQsMjU2LDI4OCwzMjAsMzUyLDM4NCw0MTYsNDQ4LDMyLDQ4LDU2LDY0LDgwLDk2LDExMiwxMjgsMTYwLDE5MiwyMjQsMjU2LDMyMCwzODQsMzIsNDAsNDgsNTYsNjQsODAsOTYsMTEyLDEyOCwxNjAsMTkyLDIyNCwyNTYsMzIwLDMyLDQ4LDU2LDY0LDgwLDk2LDExMiwxMjgsMTQ0LDE2MCwxNzYsMTkyLDIyNCwyNTYsOCwxNiwyNCwzMiw0MCw0OCw1Niw2NCw4MCw5NiwxMTIsMTI4LDE0NCwxNjBdLG89WzQ0MTAwLDQ4ZTMsMzJlMywyMjA1MCwyNGUzLDE2ZTMsMTEwMjUsMTJlMyw4ZTNdLHM9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KCl7dGhpcy5idWZmZXI9bnVsbCx0aGlzLmJ1ZmZlclNpemU9MH1yZXR1cm4gdC5wcm90b3R5cGUucHVzaD1mdW5jdGlvbih0KXt2YXIgZTtpZih0aGlzLmJ1ZmZlclNpemU+MCl7dmFyIG49dC5sZW5ndGgrdGhpcy5idWZmZXJTaXplO2lmKCF0aGlzLmJ1ZmZlcnx8dGhpcy5idWZmZXIubGVuZ3RoPG4pe3ZhciByPW5ldyBVaW50OEFycmF5KG4pO3RoaXMuYnVmZmVyU2l6ZT4wJiZyLnNldCh0aGlzLmJ1ZmZlci5zdWJhcnJheSgwLHRoaXMuYnVmZmVyU2l6ZSkpLHRoaXMuYnVmZmVyPXJ9dGhpcy5idWZmZXIuc2V0KHQsdGhpcy5idWZmZXJTaXplKSx0aGlzLmJ1ZmZlclNpemU9bix0PXRoaXMuYnVmZmVyLGU9bn1lbHNlIGU9dC5sZW5ndGg7aShcInB1c2ggXCIrZSk7Zm9yKHZhciBvLHM9MDtlPnMmJihvPXRoaXMuX3BhcnNlKHQscyxlKSk+MDspcys9bzt2YXIgYT1lLXM7YT4wJiYoIXRoaXMuYnVmZmVyfHx0aGlzLmJ1ZmZlci5sZW5ndGg8YT90aGlzLmJ1ZmZlcj1uZXcgVWludDhBcnJheSh0LnN1YmFycmF5KHMsZSkpOnRoaXMuYnVmZmVyLnNldCh0LnN1YmFycmF5KHMsZSkpKSx0aGlzLmJ1ZmZlclNpemU9YX0sdC5wcm90b3R5cGUuX3BhcnNlPWZ1bmN0aW9uKHQsZSxuKXtpZihpKFwiX3BhcnNlXCIpLGUrMj5uKXJldHVybi0xO2lmKDI1NT09PXRbZV18fDIyND09PSgyMjQmdFtlKzFdKSl7aWYoZSsyND5uKXJldHVybi0xO3ZhciBzPXRbZSsxXT4+MyYzLGE9dFtlKzFdPj4xJjMsdT10W2UrMl0+PjQmMTUsaD10W2UrMl0+PjImMyxjPSEhKDImdFtlKzJdKTtpZigxIT09cyYmMCE9PXUmJjE1IT09dSYmMyE9PWgpe3ZhciBsPTM9PT1zPzMtYTozPT09YT8zOjQsZj0xZTMqclsxNCpsK3UtMV0sZD0zPT09cz8wOjI9PT1zPzE6MixwPW9bMypkK2hdLGc9Yz8xOjAsXz0zPT09YT8oMz09PXM/MTI6NikqZi9wK2c8PDI6KDM9PT1zPzE0NDo3MikqZi9wK2d8MDtyZXR1cm4gZStfPm4/LTE6KHRoaXMub25GcmFtZSYmKGkoXCJvbkZyYW1lXCIpLHRoaXMub25GcmFtZSh0LnN1YmFycmF5KGUsZStfKSxmLHApKSxfKX19Zm9yKHZhciBtPWUrMjtuPm07KXtpZigyNTU9PT10W20tMV0mJjIyND09PSgyMjQmdFttXSkpcmV0dXJuIHRoaXMub25Ob2lzZSYmdGhpcy5vbk5vaXNlKHQuc3ViYXJyYXkoZSxtLTEpKSxtLWUtMTttKyt9cmV0dXJuLTF9LHQucHJvdG90eXBlLmNsb3NlPWZ1bmN0aW9uKCl7dGhpcy5idWZmZXJTaXplPjAmJnRoaXMub25Ob2lzZSYmdGhpcy5vbk5vaXNlKHRoaXMuYnVmZmVyLnN1YmFycmF5KDAsdGhpcy5idWZmZXJTaXplKSksdGhpcy5idWZmZXI9bnVsbCx0aGlzLmJ1ZmZlclNpemU9MCx0aGlzLm9uQ2xvc2UmJnRoaXMub25DbG9zZSgpfSx0fSgpO3QuZXhwb3J0cz1zfSxmdW5jdGlvbih0LGUpe3ZhciBuPTFlOTt0LmV4cG9ydHM9e1RJTUVTQ0FMRV9TRUNPTkRTOm59fSxmdW5jdGlvbih0LGUsbil7dmFyIGkscj1uKDEyMiksbz1uKDY5KSxzPW8uQmFzZVNpbmssYT1uKDEyMyk7dC5leHBvcnRzPWk9ZnVuY3Rpb24odCl7aWYocy5wcm90b3R5cGUuY29uc3RydWN0b3IuY2FsbCh0aGlzKSwhci5oYXZlTWVkaWFTb3VyY2VTdXBwb3J0TWltZVR5cGUodCkpdGhyb3cgbmV3IEVycm9yKFwiTG9jYWwgTWVkaWFTb3VyY2UgZG9lc24ndCBzdXBwb3J0IHByb3ZpZGVkIE1JTUUgdHlwZTogXCIrdCk7dmFyIGU7ZT1hcmd1bWVudHMubGVuZ3RoPjE/QXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzKTp0IGluc3RhbmNlb2YgQXJyYXk/dDpbdF0sdGhpcy5taW1lVHlwZXM9ZSx0aGlzLm1lZGlhU291cmNlPW5ldyBNZWRpYVNvdXJjZSx0aGlzLm1zZVdyaXRlcj1uZXcgYSh0aGlzLm1lZGlhU291cmNlKSx0aGlzLmRhdGFTb3VyY2VzPVtdLHRoaXMuc2VsZWN0ZWREYXRhU291cmNlSW5kZXg9MCx0aGlzLm1pbWVUeXBlcy5mb3JFYWNoKGZ1bmN0aW9uKHQpe3ZhciBlPXttaW1lVHlwZTp0fTt0aGlzLm1zZVdyaXRlci5saXN0ZW4oZSksdGhpcy5kYXRhU291cmNlcy5wdXNoKGUpfS5iaW5kKHRoaXMpKX0saS5wcm90b3R5cGU9by5jcmVhdGVCYXNlU2luayh7Y29uc3RydWN0b3I6aSxfb25EYXRhOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5kYXRhU291cmNlc1t0aGlzLnNlbGVjdGVkRGF0YVNvdXJjZUluZGV4XTtpZighdHx8IXQub25EYXRhKXRocm93IG5ldyBFcnJvcihcIkRhdGFTb3VyY2UgaXMgbm90IGV4aXN0aW5nIG9yIGhhcyBubyBvbkRhdGEgZnVuY3Rpb24gZGVmaW5lZFwiKTt2YXIgZT10aGlzLmRlcXVldWUoKTtlJiZ0Lm9uRGF0YShlLmRhdGEpfSxnZXRNZWRpYVNvdXJjZVVybDpmdW5jdGlvbigpe3JldHVybiBVUkwuY3JlYXRlT2JqZWN0VVJMKHRoaXMubWVkaWFTb3VyY2UpfX0pfSxmdW5jdGlvbih0LGUpe3ZhciBuO3QuZXhwb3J0cz1uPXtoYXZlR2xvYmFsV2luZG93OmZ1bmN0aW9uKCl7cmV0dXJuXCJ1bmRlZmluZWRcIiE9dHlwZW9mIHdpbmRvd30saGF2ZU1lZGlhU291cmNlRXh0ZW5zaW9uczpmdW5jdGlvbigpe3JldHVybiBuLmhhdmVHbG9iYWxXaW5kb3coKSYmd2luZG93Lk1lZGlhU291cmNlfSxoYXZlTWVkaWFTb3VyY2VTdXBwb3J0TWltZVR5cGU6ZnVuY3Rpb24odCl7cmV0dXJuIG4uaGF2ZU1lZGlhU291cmNlRXh0ZW5zaW9ucygpJiZ3aW5kb3cuTWVkaWFTb3VyY2UuaXNUeXBlU3VwcG9ydGVkKHQpfX19LGZ1bmN0aW9uKHQsZSl7dmFyIG49ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KHQsZSl7dGhpcy5tZWRpYVNvdXJjZT10LHRoaXMuZGF0YVNvdXJjZT1lLHRoaXMuZGF0YVNvdXJjZS5vbkRhdGE9dGhpcy5wdXNoRGF0YS5iaW5kKHRoaXMpLHRoaXMudXBkYXRlRW5hYmxlZD0hMSx0aGlzLmJ1ZmZlcj1bXSx0aGlzLnNvdXJjZUJ1ZmZlcj1udWxsLHRoaXMuc291cmNlQnVmZmVyVXBkYXRlZEJvdW5kPW51bGx9cmV0dXJuIHQucHJvdG90eXBlLmFsbG93V3JpdGluZz1mdW5jdGlvbigpe3RoaXMudXBkYXRlRW5hYmxlZD0hMCx0aGlzLnVwZGF0ZSgpfSx0LnByb3RvdHlwZS5wdXNoRGF0YT1mdW5jdGlvbih0KXt0aGlzLmJ1ZmZlci5wdXNoKHQpLHRoaXMudXBkYXRlKCl9LHQucHJvdG90eXBlLnVwZGF0ZT1mdW5jdGlvbigpe2lmKHRoaXMudXBkYXRlRW5hYmxlZCYmMCE9PXRoaXMuYnVmZmVyLmxlbmd0aCl7dGhpcy5zb3VyY2VCdWZmZXJ8fCh0aGlzLnNvdXJjZUJ1ZmZlcj10aGlzLm1lZGlhU291cmNlLmFkZFNvdXJjZUJ1ZmZlcih0aGlzLmRhdGFTb3VyY2UubWltZVR5cGUpLHRoaXMuc291cmNlQnVmZmVyVXBkYXRlZEJvdW5kPXRoaXMuX3NvdXJjZUJ1ZmZlclVwZGF0ZWQuYmluZCh0aGlzKSx0aGlzLnNvdXJjZUJ1ZmZlci5hZGRFdmVudExpc3RlbmVyKFwidXBkYXRlXCIsdGhpcy5zb3VyY2VCdWZmZXJVcGRhdGVkQm91bmQpKSx0aGlzLnVwZGF0ZUVuYWJsZWQ9ITE7dmFyIHQ9dGhpcy5idWZmZXIuc2hpZnQoKTtpZihudWxsPT09dClyZXR1cm4gdm9pZCB0aGlzLnNvdXJjZUJ1ZmZlci5yZW1vdmVFdmVudExpc3RlbmVyKFwidXBkYXRlXCIsdGhpcy5zb3VyY2VCdWZmZXJVcGRhdGVkQm91bmQpO3QudGltZXN0YW1wJiYodGhpcy5zb3VyY2VCdWZmZXIudGltZXN0YW1wT2Zmc2V0PXQudGltZXN0YW1wLzFlOSksdGhpcy5zb3VyY2VCdWZmZXIuYXBwZW5kQnVmZmVyKHQpfX0sdC5wcm90b3R5cGUuX3NvdXJjZUJ1ZmZlclVwZGF0ZWQ9ZnVuY3Rpb24odCl7dGhpcy51cGRhdGVFbmFibGVkPSEwLHRoaXMudXBkYXRlKCl9LHQucHJvdG90eXBlLmZpbmlzaD1mdW5jdGlvbigpe3RoaXMuYnVmZmVyLnB1c2gobnVsbCksdGhpcy51cGRhdGUoKX0sdH0oKSxpPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCh0KXt0aGlzLmJ1ZmZlcldyaXRlcnM9W10sdGhpcy5tZWRpYVNvdXJjZT10LHRoaXMubWVkaWFTb3VyY2VPcGVuZWQ9ITEsdGhpcy5tZWRpYVNvdXJjZS5hZGRFdmVudExpc3RlbmVyKFwic291cmNlb3BlblwiLGZ1bmN0aW9uKHQpe3RoaXMubWVkaWFTb3VyY2VPcGVuZWQ9ITAsdGhpcy5idWZmZXJXcml0ZXJzLmZvckVhY2goZnVuY3Rpb24odCl7dC5hbGxvd1dyaXRpbmcoKX0pfS5iaW5kKHRoaXMpKSx0aGlzLm1lZGlhU291cmNlLmFkZEV2ZW50TGlzdGVuZXIoXCJzb3VyY2VlbmRcIixmdW5jdGlvbih0KXt0aGlzLm1lZGlhU291cmNlT3BlbmVkPSExfS5iaW5kKHRoaXMpKX1yZXR1cm4gdC5wcm90b3R5cGUubGlzdGVuPWZ1bmN0aW9uKHQpe3ZhciBlPW5ldyBuKHRoaXMubWVkaWFTb3VyY2UsdCk7dGhpcy5idWZmZXJXcml0ZXJzLnB1c2goZSksdGhpcy5tZWRpYVNvdXJjZU9wZW5lZCYmZS5hbGxvd1dyaXRpbmcoKX0sdH0oKTt0LmV4cG9ydHM9aX0sZnVuY3Rpb24odCxlLG4pe3ZhciBpLHIsbz1uKDY5KTtyPWZ1bmN0aW9uKHQpe28uQmFzZVB1c2hTcmMucHJvdG90eXBlLmNvbnN0cnVjdG9yLmNhbGwodGhpcyk7dmFyIGU9dGhpcy5yZXE9bmV3IFhNTEh0dHBSZXF1ZXN0O2Uub3BlbihcIkdFVFwiLHQsITApLGUucmVzcG9uc2VUeXBlPVwiYXJyYXlidWZmZXJcIixlLm9ubG9hZD1mdW5jdGlvbih0KXt0aGlzLmVucXVldWUobmV3IG8uVHJhbnNmZXIobmV3IFVpbnQ4QXJyYXkoZS5yZXNwb25zZSksXCJiaW5hcnlcIikpLHRoaXMuZW5xdWV1ZShuZXcgby5UcmFuc2ZlcihudWxsLFwiYmluYXJ5XCIpKX0uYmluZCh0aGlzKSxlLnNlbmQoKX0sci5wcm90b3R5cGU9by5jcmVhdGVCYXNlUHVzaFNyYyh7Y29uc3RydWN0b3I6cn0pLHQuZXhwb3J0cz1pPXtTcmM6cn19LGZ1bmN0aW9uKHQsZSxuKXt2YXIgaSxyLG8scz1uKDY5KSxhPW4oMTI2KTtuKDc2KSxyPWZ1bmN0aW9uKHQsZSl7cy5wcm90b3R5cGUuY29uc3RydWN0b3IuY2FsbCh0aGlzKTt2YXIgbj1hLmNyZWF0ZVJlYWRTdHJlYW0odCxlKTt0aGlzLm9uKFwiZW5kXCIsZnVuY3Rpb24oKXtuLmNsb3NlKCl9KSx0aGlzLmFkZE91dHB1dChuKX0sci5wcm90b3R5cGU9cy5jcmVhdGUoe2NvbnN0cnVjdG9yOnJ9KSxvPWZ1bmN0aW9uKHQsZSl7cy5wcm90b3R5cGUuY29uc3RydWN0b3IuY2FsbCh0aGlzKTt2YXIgbj1hLmNyZWF0ZVdyaXRlU3RyZWFtKHQsZSk7dGhpcy5vbihcImZpbmlzaFwiLGZ1bmN0aW9uKCl7bi5jbG9zZSgpfSksdGhpcy5hZGRJbnB1dChuKX0sby5wcm90b3R5cGU9cy5jcmVhdGUoe2NvbnN0cnVjdG9yOm99KSx0LmV4cG9ydHM9aT17U3JjOnIsU2luazpvfX0sZnVuY3Rpb24odCxlLG4pe3ZhciBpPW4oMTIyKTt0LmV4cG9ydHM9aS5oYXZlR2xvYmFsV2luZG93KCk/bmV3KG4oMTI3KSk6bighZnVuY3Rpb24oKXt2YXIgdD1uZXcgRXJyb3IoJ0Nhbm5vdCBmaW5kIG1vZHVsZSBcImZzXCInKTt0aHJvdyB0LmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsdH0oKSl9LGZ1bmN0aW9uKHQsZSxuKXt2YXIgaTtpPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCgpe3JldHVybiExfWZ1bmN0aW9uIGUodCl7cmV0dXJuISghKHQmJnQuZGF0YSBpbnN0YW5jZW9mIE9iamVjdCl8fG4odCkpfWZ1bmN0aW9uIG4odCl7cmV0dXJuISEodCYmdC5kYXRhIGluc3RhbmNlb2YgQXJyYXlCdWZmZXIpfWZ1bmN0aW9uIGkodCxuKXt2YXIgaSxyPXQubGVuZ3RoLG89bjtmb3IoaT0wO3I+aTsrK2kpe2lmKCFlKG8pKXRocm93IG5ldyBFcnJvcihcIkVOT0VOVFwiKTtvPW8uZGF0YVt0W2ldXX1yZXR1cm4gb31TdHJpbmcucHJvdG90eXBlLnRyaW18fCFmdW5jdGlvbigpe3ZhciB0PS9eW1xcc1xcdUZFRkZcXHhBMF0rfFtcXHNcXHVGRUZGXFx4QTBdKyQvZztTdHJpbmcucHJvdG90eXBlLnRyaW09ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5yZXBsYWNlKHQsXCJcIil9fSgpO3ZhciByPWZ1bmN0aW9uKCl7dmFyIHQ9RGF0ZS5ub3coKTt0aGlzLnJvb3Q9e210aW1lOnQsY3RpbWU6dCxhdGltZTp0LGRhdGE6e319fTtyZXR1cm4gci5wcm90b3R5cGUuam9pbj1mdW5jdGlvbigpe3ZhciB0PVtdLGU9YXJndW1lbnRzfHxbXTtyZXR1cm4gdD10aGlzLnBhcnNlKEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGUpLmpvaW4oXCIvXCIpKSwoXCIvXCI9PT1lWzBdWzBdP1wiL1wiOlwiXCIpK3Quam9pbihcIi9cIil9LHIucHJvdG90eXBlLnBhcnNlPWZ1bmN0aW9uKHQpe3ZhciBlPVtdO3JldHVybiB0PXR8fFwiL1wiLHQuc3BsaXQoL1xcLysvKS5mb3JFYWNoKGZ1bmN0aW9uKHQpe3Q9dC50cmltKCksdC5sZW5ndGgmJlwiLlwiIT09dCYmKFwiLi5cIj09PXQ/ZS5wb3AoKTplLnB1c2godCkpfSksZX0sci5wcm90b3R5cGUuZmlsZVNpemVTST1mdW5jdGlvbih0LGUsbixpLHIpe3JldHVybihlPU1hdGgsbj1lLmxvZyxpPTFlMyxyPW4odCkvbihpKXwwLHQvZS5wb3coaSxyKSkudG9GaXhlZChyPzI6MCkrXCIgXCIrKHI/XCJrTUdUUEVaWVwiWy0tcl0rXCJCXCI6XCJCeXRlc1wiKX0sci5wcm90b3R5cGUuZmlsZVNpemVJRUM9ZnVuY3Rpb24odCxlLG4saSxyKXtyZXR1cm4oZT1NYXRoLG49ZS5sb2csaT0xMDI0LHI9bih0KS9uKGkpfDAsdC9lLnBvdyhpLHIpKS50b0ZpeGVkKHI/MjowKStcIiBcIisocj9cIktNR1RQRVpZXCJbLS1yXStcImlCXCI6XCJCeXRlc1wiKX0sci5wcm90b3R5cGUuc3RhdFN5bmM9ZnVuY3Rpb24obil7dmFyIHI9dGhpcy5wYXJzZShuKSxvPWkocix0aGlzLnJvb3QpLHM9ZShvKTtpZighb3x8IW8uZGF0YSl0aHJvdyBuZXcgRXJyb3IoXCJFTk9FTlRcIik7cmV0dXJue3NpemU6cz9PYmplY3Qua2V5cyhvLmRhdGEpLmxlbmd0aDpvLmRhdGEuYnl0ZUxlbmd0aCxjdGltZTpuZXcgRGF0ZShvLmN0aW1lKSxtdGltZTpuZXcgRGF0ZShvLm10aW1lKSxhdGltZTpuZXcgRGF0ZShvLmF0aW1lKSxpc0ZpbGU6ZnVuY3Rpb24oKXtyZXR1cm4hc30saXNEaXJlY3Rvcnk6ZnVuY3Rpb24oKXtyZXR1cm4gc30saXNCbG9ja0RldmljZTp0LGlzQ2hhcmFjdGVyRGV2aWNlOnQsaXNTeW1ib2xpY0xpbms6dCxpc0ZJRk86dCxpc1NvY2tldDp0fX0sci5wcm90b3R5cGUuZXhpc3RzU3luYz1mdW5jdGlvbih0KXt2YXIgbixpPXRoaXMucGFyc2UodCkscj1pLmxlbmd0aCxvPXRoaXMucm9vdDtmb3Iobj0wO3I+bjsrK24pe2lmKCFlKG8pKXJldHVybiExO289by5kYXRhW2lbbl1dfXJldHVybiEhb30sci5wcm90b3R5cGUubWtkaXJTeW5jPWZ1bmN0aW9uKHQpe3ZhciBuPXRoaXMucGFyc2UodCkscj1pKG4uc2xpY2UoMCxuLmxlbmd0aC0xKSx0aGlzLnJvb3QpLG89RGF0ZS5ub3coKTtpZighbi5sZW5ndGh8fCFlKHIpKXRocm93IG5ldyBFcnJvcihcIkVOT0RJUlwiKTtyLmRhdGFbbltuLmxlbmd0aC0xXV09e2RhdGE6e30sY3RpbWU6byxtdGltZTpvLGF0aW1lOm99LHIubXRpbWU9b30sci5wcm90b3R5cGUubWtkaXJwU3luYz1mdW5jdGlvbih0KXt2YXIgcixvLHMsYT10aGlzLnBhcnNlKHQpLHU9YS5sZW5ndGg7aWYoIWEubGVuZ3RoKXRocm93IG5ldyBFcnJvcihcIkVOT0RJUlwiKTtmb3Iobz0wO3U+bzsrK28pe2lmKHI9YS5zbGljZSgwLG8rMSkscz1pKHIsdGhpcy5yb290KSxuKHMpKXRocm93IG5ldyBFcnJvcihcIkVOT0RJUlwiKTtlKHMpfHx0aGlzLm1rZGlyU3luYyhyLmpvaW4oXCIvXCIpKX19LHIucHJvdG90eXBlLnJlYWRkaXJTeW5jPWZ1bmN0aW9uKHQpe3ZhciBuPXRoaXMucGFyc2UodCkscj1pKG4sdGhpcy5yb290KTtpZighZShyKSl0aHJvdyBuZXcgRXJyb3IoXCJFTk9ESVJcIik7cmV0dXJuIHIuYXRpbWU9RGF0ZS5ub3coKSxPYmplY3Qua2V5cyhyLmRhdGEpfSxyLnByb3RvdHlwZS5ybWRpclN5bmM9ZnVuY3Rpb24odCl7dmFyIG49dGhpcy5wYXJzZSh0KSxyPWkobix0aGlzLnJvb3QpO2lmKGRpcm5hbWU9bi5wb3AoKSxwYXJlbnREaXI9aShuLHRoaXMucm9vdCksIWUocikpdGhyb3cgbmV3IEVycm9yKFwiRU5PRElSXCIpO2lmKE9iamVjdC5rZXlzKHIuZGF0YSkubGVuZ3RoKXRocm93IG5ldyBFcnJvcihcIkVOT1RFTVBUWVwiKTtkZWxldGUgcGFyZW50RGlyLmRhdGFbZGlybmFtZV0scGFyZW50RGlyLm10aW1lPURhdGUubm93KCl9LHIucHJvdG90eXBlLnJtcmZTeW5jPWZ1bmN0aW9uKHQpe3ZhciBuPXRoaXMucGFyc2UodCkscj1uLnBvcCgpLG89aShuLHRoaXMucm9vdCk7aWYoIWUobykpdGhyb3cgbmV3IEVycm9yKFwiRU5PRElSXCIpO3I/ZGVsZXRlIG8uZGF0YVtyXTpvLmRhdGE9e30sby5tdGltZT1EYXRlLm5vdygpfSxyLnByb3RvdHlwZS53cml0ZUZpbGVTeW5jPWZ1bmN0aW9uKHQsbixyKXt2YXIgbyxzLGE9dGhpcy5wYXJzZSh0KSx1PWEucG9wKCksaD10aGlzLmV4aXN0c1N5bmModCksYz1pKGEsdGhpcy5yb290KTtpZighZShjKSl0aHJvdyBuZXcgRXJyb3IoXCJFTk9ESVJcIik7aWYoIXUpdGhyb3cgbmV3IEVycm9yKFwiRUlOVkFMSURQQVRIXCIpO2lmKHI9cnx8e2VuY29kaW5nOiEwfSxcInN0cmluZ1wiPT10eXBlb2Ygbil7bz1uZXcgQXJyYXlCdWZmZXIoMipuLmxlbmd0aCk7Zm9yKHZhciBsPW5ldyBVaW50MTZBcnJheShvKSxmPTAsZD1uLmxlbmd0aDtkPmY7KytmKWxbZl09bi5jaGFyQ29kZUF0KGYpfWVsc2Ugbz1uO3M9RGF0ZS5ub3coKSxjLmRhdGFbdV09e2RhdGE6byxjdGltZTpzLG10aW1lOnMsYXRpbWU6c30saHx8KGMubXRpbWU9cyksYy5hdGltZT1zfSxyLnByb3RvdHlwZS5yZWFkRmlsZVN5bmM9ZnVuY3Rpb24odCxlKXt2YXIgcj10aGlzLnBhcnNlKHQpLG89aShyLHRoaXMucm9vdCksZT1lfHx7ZW5jb2Rpbmc6ITF9O2lmKCFuKG8pKXRocm93IG5ldyBFcnJvcihcIkVOT0VOVFwiKTtyZXR1cm4gby5hdGltZT1EYXRlLm5vdygpLGUuZW5jb2Rpbmc/U3RyaW5nLmZyb21DaGFyQ29kZS5hcHBseShudWxsLG5ldyBVaW50MTZBcnJheShvLmRhdGEpKTpvLmRhdGF9LHIucHJvdG90eXBlLnJlbmFtZVN5bmM9ZnVuY3Rpb24odCxuKXt2YXIgcj10aGlzLnBhcnNlKHQpLG89aShyLHRoaXMucm9vdCkscz1pKHIuc2xpY2UoMCxyLmxlbmd0aC0xKSx0aGlzLnJvb3QpLGE9cltyLmxlbmd0aC0xXSx1PXRoaXMucGFyc2UobiksaD1pKHUsdGhpcy5yb290KSxjPWkodS5zbGljZSgwLHUubGVuZ3RoLTEpLHRoaXMucm9vdCksbD11W3UubGVuZ3RoLTFdLGY9RGF0ZS5ub3coKTtpZighci5sZW5ndGh8fCF1Lmxlbmd0aCl0aHJvdyBuZXcgRXJyb3IoXCJFTk9FTlRcIik7aWYoIWUoc3x8IWUoYykpKXRocm93IG5ldyBFcnJvcihcIkVOT0RJUlwiKTtpZihoKXRocm93IG5ldyBFcnJvcihcIkVFWElTVFNcIik7Yy5kYXRhW2xdPWg9byxoLmN0aW1lPWYsYy5tdGltZT1mLGRlbGV0ZSBzLmRhdGFbYV0scy5tdGltZT1mfSxbXCJzdGF0XCIsXCJleGlzdHNcIixcInJlYWRkaXJcIixcIm1rZGlycFwiLFwibWtkaXJcIixcInJtZGlyXCIsXCJybXJmXCIsXCJ1bmxpbmtcIl0uZm9yRWFjaChmdW5jdGlvbih0KXtyLnByb3RvdHlwZVt0XT1mdW5jdGlvbihlLG4pe3RyeXt2YXIgaT10aGlzW3QrXCJTeW5jXCJdKGUpfWNhdGNoKHIpe3JldHVybiBuKHIpfXJldHVybiBuKG51bGwsaSl9fSksW1wid3JpdGVGaWxlXCIsXCJyZWFkRmlsZVwiXS5mb3JFYWNoKGZ1bmN0aW9uKHQpe3IucHJvdG90eXBlW3RdPWZ1bmN0aW9uKGUsbixpKXtpfHwoaT1uLG49dm9pZCAwKTt0cnl7dmFyIHI9dGhpc1t0K1wiU3luY1wiXShlLG4pfWNhdGNoKG8pe3JldHVybiBpKG8pfXJldHVybiBpKG51bGwscil9fSksW1wicmVuYW1lXCJdLmZvckVhY2goZnVuY3Rpb24odCl7ci5wcm90b3R5cGVbdF09ZnVuY3Rpb24oZSxuLGkpe3RyeXt2YXIgcj10aGlzW3QrXCJTeW5jXCJdKGUsbil9Y2F0Y2gobyl7cmV0dXJuIGkobyl9cmV0dXJuIGkobnVsbCxyKX19KSxyfS5jYWxsKGUsbixlLHQpLCEodm9pZCAwIT09aSYmKHQuZXhwb3J0cz1pKSl9LGZ1bmN0aW9uKHQsZSl7dmFyIG49e0hUVFA6XCJodHRwXCIsUlRNUDpcInJ0bXBcIixITFM6XCJobHNcIn07dC5leHBvcnRzPW59LGZ1bmN0aW9uKHQsZSl7dC5leHBvcnRzPXtBQUM6XCJhdWRpby9hYWNcIixNM1U4OlwiYXBwbGljYXRpb24veC1tcGVnVVJMXCIsSExTOlwiYXBwbGljYXRpb24vdm5kLmFwcGxlLm1wZWd1cmxcIixNUDRBOlwiYXVkaW8vbXA0XCIsTVAzOlwiYXVkaW8vbXBlZ1wiLE9HRzpcImF1ZGlvL29nZ1wiLFdBVjpcImF1ZGlvL3dhdlwiLFdFQk1BOlwiYXVkaW8vd2VibVwiLGdldFR5cGVCeUV4dGVuc2lvbjpmdW5jdGlvbih0KXt2YXIgZT17bXAzOnRoaXMuTVAzLGFhYzp0aGlzLkFBQyxtcDQ6dGhpcy5NUDRBLG1wNGE6dGhpcy5NUDRBLG9nZzp0aGlzLk9HRyxvZ2E6dGhpcy5PR0csb3B1czp0aGlzLk9HRyx3ZWJtOnRoaXMuV0VCTSx3YXY6dGhpcy5XQVYsbTN1ODp0aGlzLk0zVTh9O3JldHVybiBlW3RdfHxudWxsfX19LGZ1bmN0aW9uKHQsZSxuLGkscixvKXtmdW5jdGlvbiBzKHQsZSxuKXtmb3IodmFyIGk9LTEscj1oKGUpLG89ci5sZW5ndGg7KytpPG87KXt2YXIgcz1yW2ldLGE9dFtzXSx1PW4oYSxlW3NdLHMsdCxlKTsodT09PXU/dT09PWE6YSE9PWEpJiYodm9pZCAwIT09YXx8cyBpbiB0KXx8KHRbc109dSl9cmV0dXJuIHR9dmFyIGE9bihpKSx1PW4ociksaD1uKG8pLGM9dShmdW5jdGlvbih0LGUsbil7cmV0dXJuIG4/cyh0LGUsbik6YSh0LGUpfSk7dC5leHBvcnRzPWN9LGZ1bmN0aW9uKHQsZSxuLGkscil7ZnVuY3Rpb24gbyh0LGUpe3JldHVybiBudWxsPT1lP3Q6cyhlLGEoZSksdCl9dmFyIHM9bihpKSxhPW4ocik7dC5leHBvcnRzPW99LGZ1bmN0aW9uKHQsZSxuLGkscixvKXtmdW5jdGlvbiBzKHQpe3JldHVybiBmdW5jdGlvbihlKXtyZXR1cm4gbnVsbD09ZT92b2lkIDA6ZVt0XX19ZnVuY3Rpb24gYSh0KXtyZXR1cm4gbnVsbCE9dCYmaChTKHQpKX1mdW5jdGlvbiB1KHQsZSl7cmV0dXJuIHQ9XCJudW1iZXJcIj09dHlwZW9mIHR8fF8udGVzdCh0KT8rdDotMSxlPW51bGw9PWU/RTplLHQ+LTEmJnQlMT09MCYmZT50fWZ1bmN0aW9uIGgodCl7cmV0dXJuXCJudW1iZXJcIj09dHlwZW9mIHQmJnQ+LTEmJnQlMT09MCYmRT49dH1mdW5jdGlvbiBjKHQpe2Zvcih2YXIgZT1mKHQpLG49ZS5sZW5ndGgsaT1uJiZ0Lmxlbmd0aCxyPSEhaSYmaChpKSYmKGcodCl8fHAodCkpLG89LTEscz1bXTsrK288bjspe3ZhciBhPWVbb107KHImJnUoYSxpKXx8eS5jYWxsKHQsYSkpJiZzLnB1c2goYSl9cmV0dXJuIHN9ZnVuY3Rpb24gbCh0KXt2YXIgZT10eXBlb2YgdDtyZXR1cm4hIXQmJihcIm9iamVjdFwiPT1lfHxcImZ1bmN0aW9uXCI9PWUpfWZ1bmN0aW9uIGYodCl7aWYobnVsbD09dClyZXR1cm5bXTtsKHQpfHwodD1PYmplY3QodCkpO3ZhciBlPXQubGVuZ3RoO2U9ZSYmaChlKSYmKGcodCl8fHAodCkpJiZlfHwwO2Zvcih2YXIgbj10LmNvbnN0cnVjdG9yLGk9LTEscj1cImZ1bmN0aW9uXCI9PXR5cGVvZiBuJiZuLnByb3RvdHlwZT09PXQsbz1BcnJheShlKSxzPWU+MDsrK2k8ZTspb1tpXT1pK1wiXCI7Zm9yKHZhciBhIGluIHQpcyYmdShhLGUpfHxcImNvbnN0cnVjdG9yXCI9PWEmJihyfHwheS5jYWxsKHQsYSkpfHxvLnB1c2goYSk7cmV0dXJuIG99dmFyIGQ9bihpKSxwPW4ociksZz1uKG8pLF89L15cXGQrJC8sbT1PYmplY3QucHJvdG90eXBlLHk9bS5oYXNPd25Qcm9wZXJ0eSx2PWQoT2JqZWN0LFwia2V5c1wiKSxFPTkwMDcxOTkyNTQ3NDA5OTEsUz1zKFwibGVuZ3RoXCIpLEE9dj9mdW5jdGlvbih0KXt2YXIgZT1udWxsPT10P3ZvaWQgMDp0LmNvbnN0cnVjdG9yO3JldHVyblwiZnVuY3Rpb25cIj09dHlwZW9mIGUmJmUucHJvdG90eXBlPT09dHx8XCJmdW5jdGlvblwiIT10eXBlb2YgdCYmYSh0KT9jKHQpOmwodCk/dih0KTpbXX06Yzt0LmV4cG9ydHM9QX0sZnVuY3Rpb24odCxlLG4saSxyLG8pe2Z1bmN0aW9uIHModCl7cmV0dXJuIGgoZnVuY3Rpb24oZSxuKXt2YXIgaT0tMSxyPW51bGw9PWU/MDpuLmxlbmd0aCxvPXI+Mj9uW3ItMl06dm9pZCAwLHM9cj4yP25bMl06dm9pZCAwLGg9cj4xP25bci0xXTp2b2lkIDA7Zm9yKFwiZnVuY3Rpb25cIj09dHlwZW9mIG8/KG89YShvLGgsNSksci09Mik6KG89XCJmdW5jdGlvblwiPT10eXBlb2YgaD9oOnZvaWQgMCxyLT1vPzE6MCkscyYmdShuWzBdLG5bMV0scykmJihvPTM+cj92b2lkIDA6byxyPTEpOysraTxyOyl7dmFyIGM9bltpXTtjJiZ0KGUsYyxvKX1yZXR1cm4gZX0pfXZhciBhPW4oaSksdT1uKHIpLGg9bihvKTt0LmV4cG9ydHM9c30sZnVuY3Rpb24odCxlLG4saSl7ZnVuY3Rpb24gcih0LGUpe3JldHVybiBwKHQsZSxsKX1mdW5jdGlvbiBvKHQpe3JldHVybiBmdW5jdGlvbihlKXtyZXR1cm4gbnVsbD09ZT92b2lkIDA6ZVt0XX19ZnVuY3Rpb24gcyh0LGUpe3JldHVybiBmdW5jdGlvbihuLGkpe3ZhciByPW4/ZyhuKTowO2lmKCF1KHIpKXJldHVybiB0KG4saSk7Zm9yKHZhciBvPWU/cjotMSxzPWgobik7KGU/by0tOisrbzxyKSYmaShzW29dLG8scykhPT0hMTspO3JldHVybiBufX1mdW5jdGlvbiBhKHQpe3JldHVybiBmdW5jdGlvbihlLG4saSl7Zm9yKHZhciByPWgoZSksbz1pKGUpLHM9by5sZW5ndGgsYT10P3M6LTE7dD9hLS06KythPHM7KXt2YXIgdT1vW2FdO2lmKG4oclt1XSx1LHIpPT09ITEpYnJlYWt9cmV0dXJuIGV9fWZ1bmN0aW9uIHUodCl7cmV0dXJuXCJudW1iZXJcIj09dHlwZW9mIHQmJnQ+LTEmJnQlMT09MCYmZj49dH1mdW5jdGlvbiBoKHQpe3JldHVybiBjKHQpP3Q6T2JqZWN0KHQpfWZ1bmN0aW9uIGModCl7dmFyIGU9dHlwZW9mIHQ7cmV0dXJuISF0JiYoXCJvYmplY3RcIj09ZXx8XCJmdW5jdGlvblwiPT1lKX12YXIgbD1uKGkpLGY9OTAwNzE5OTI1NDc0MDk5MSxkPXMocikscD1hKCksZz1vKFwibGVuZ3RoXCIpO3QuZXhwb3J0cz1kfV0pKX0sZnVuY3Rpb24odCxlLG4pe3ZhciBpPW4oMjIpLHI9ZnVuY3Rpb24odCxlKXt2YXIgbj1lfHx7fSxyPW4uYnVmZmVyTGVufHw0MDk2LG89bi5udW1DaGFubmVsc3x8Mjt0aGlzLmNvbnRleHQ9dC5jb250ZXh0LHRoaXMubm9kZT0odGhpcy5jb250ZXh0LmNyZWF0ZVNjcmlwdFByb2Nlc3Nvcnx8dGhpcy5jb250ZXh0LmNyZWF0ZUphdmFTY3JpcHROb2RlKS5jYWxsKHRoaXMuY29udGV4dCxyLG8sbyk7dmFyIHM9bmV3IGk7cy5wb3N0TWVzc2FnZSh7Y29tbWFuZDpcImluaXRcIixjb25maWc6e3NhbXBsZVJhdGU6dGhpcy5jb250ZXh0LnNhbXBsZVJhdGUsbnVtQ2hhbm5lbHM6b319KTt2YXIgYSx1PSExO3RoaXMubm9kZS5vbmF1ZGlvcHJvY2Vzcz1mdW5jdGlvbih0KXtpZih1KXtmb3IodmFyIGU9W10sbj0wO28+bjtuKyspZS5wdXNoKHQuaW5wdXRCdWZmZXIuZ2V0Q2hhbm5lbERhdGEobikpO3MucG9zdE1lc3NhZ2Uoe2NvbW1hbmQ6XCJyZWNvcmRcIixidWZmZXI6ZX0pfX0sdGhpcy5jb25maWd1cmU9ZnVuY3Rpb24odCl7Zm9yKHZhciBlIGluIHQpdC5oYXNPd25Qcm9wZXJ0eShlKSYmKG5bZV09dFtlXSl9LHRoaXMucmVjb3JkPWZ1bmN0aW9uKCl7dT0hMH0sdGhpcy5zdG9wPWZ1bmN0aW9uKCl7dT0hMX0sdGhpcy5jbGVhcj1mdW5jdGlvbigpe3MucG9zdE1lc3NhZ2Uoe2NvbW1hbmQ6XCJjbGVhclwifSl9LHRoaXMuZ2V0QnVmZmVyPWZ1bmN0aW9uKHQpe2E9dHx8bi5jYWxsYmFjayxzLnBvc3RNZXNzYWdlKHtjb21tYW5kOlwiZ2V0QnVmZmVyXCJ9KX0sdGhpcy5leHBvcnRXQVY9ZnVuY3Rpb24odCxlKXtpZihhPXR8fG4uY2FsbGJhY2ssZT1lfHxuLnR5cGV8fFwiYXVkaW8vd2F2XCIsIWEpdGhyb3cgbmV3IEVycm9yKFwiQ2FsbGJhY2sgbm90IHNldFwiKTtzLnBvc3RNZXNzYWdlKHtjb21tYW5kOlwiZXhwb3J0V0FWXCIsdHlwZTplfSl9LHMub25tZXNzYWdlPWZ1bmN0aW9uKHQpe3ZhciBlPXQuZGF0YTthKGUpfSx0LmNvbm5lY3QodGhpcy5ub2RlKSx0aGlzLm5vZGUuY29ubmVjdCh0aGlzLmNvbnRleHQuZGVzdGluYXRpb24pfTtyLmZvcmNlRG93bmxvYWQ9ZnVuY3Rpb24odCxlKXt2YXIgbj0od2luZG93LlVSTHx8d2luZG93LndlYmtpdFVSTCkuY3JlYXRlT2JqZWN0VVJMKHQpLGk9d2luZG93LmRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJhXCIpO2kuaHJlZj1uLGkuZG93bmxvYWQ9ZXx8XCJvdXRwdXQud2F2XCI7dmFyIHI9ZG9jdW1lbnQuY3JlYXRlRXZlbnQoXCJFdmVudFwiKTtyLmluaXRFdmVudChcImNsaWNrXCIsITAsITApLGkuZGlzcGF0Y2hFdmVudChyKX0sdC5leHBvcnRzPXJ9LGZ1bmN0aW9uKHQsZSl7dC5leHBvcnRzPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoaSl7aWYobltpXSlyZXR1cm4gbltpXS5leHBvcnRzO3ZhciByPW5baV09e2V4cG9ydHM6e30saWQ6aSxsb2FkZWQ6ITF9O3JldHVybiB0W2ldLmNhbGwoci5leHBvcnRzLHIsci5leHBvcnRzLGUpLHIubG9hZGVkPSEwLHIuZXhwb3J0c312YXIgbj17fTtyZXR1cm4gZS5tPXQsZS5jPW4sZS5wPVwiXCIsZSgwKX0oW2Z1bmN0aW9uKHQsZSxuKXtmdW5jdGlvbiBpKCl7cmV0dXJuIHRoaXMuX2hvb2tzUGF1c2UuZXZlcnkoZnVuY3Rpb24odCl7cmV0dXJuIHQuY2FsbCgpfSl9ZnVuY3Rpb24gcih0KXt2YXIgZT10LnJlc291cmNlX2lkfHx0LmlkfHx0LmNpZDtpZighZSl0aHJvdyBuZXcgRXJyb3IoXCJZb3VyIG1vZGVsIHNob3VsZCBoYXZlIGEgdW5pcXVlIGBpZGAsIGBjaWRgIG9yIGByZXNvdXJjZV9pZGAgcHJvcGVydHlcIik7cmV0dXJuIGV9ZnVuY3Rpb24gbyh0KXtDPXQsdCYmKHguQXVkaW9NYW5hZ2VyU3RhdGVzPXQuU3RhdGVzKX1mdW5jdGlvbiBzKCl7dmFyIHQ9RygpO3JldHVybiBwLmNhbGwodGhpcywhMCkuZG9uZShmdW5jdGlvbihlKXt0LnJlc29sdmUoZS51cmwpfSkuZmFpbChmdW5jdGlvbigpe3QucmVqZWN0KCl9KSx0LnByb21pc2UoKX1mdW5jdGlvbiBhKHQpe3ZhciBlLG49dGhpcy5vcHRpb25zO3JldHVybiBlPXtpZDp0aGlzLmdldElkKCksc3JjOnQudXJsLGR1cmF0aW9uOiQucmVzdWx0KG4uZHVyYXRpb24pLHRpdGxlOnRoaXMub3B0aW9ucy50aXRsZSxtaW1lVHlwZTp0Lm1pbWVUeXBlLGZvcmNlU2luZ2xlOm4udXNlU2luZ2xlUGxheWVyfSxDLmNyZWF0ZUF1ZGlvUGxheWVyKGUse3N0cmVhbVVybFByb3ZpZGVyOnMuYmluZCh0aGlzKX0pfWZ1bmN0aW9uIHUodCxlKXt2YXIgbj1lP1wib25cIjpcIm9mZlwiO3Rbbl0oXCJzdGF0ZS1jaGFuZ2VcIixMLHRoaXMpW25dKFwicG9zaXRpb24tY2hhbmdlXCIsYyx0aGlzKVtuXShcIm1ldGFkYXRhXCIsaCx0aGlzKX1mdW5jdGlvbiBoKCl7dGhpcy50cmlnZ2VyKFkuTUVUQURBVEEpfWZ1bmN0aW9uIGMoKXt0aGlzLl9wcmV2UG9zaXRpb24hPT10aGlzLmN1cnJlbnRUaW1lKCkmJih0aGlzLnRyaWdnZXIoWS5USU1FKSx0aGlzLl9wcmV2UG9zaXRpb249dGhpcy5jdXJyZW50VGltZSgpKX1mdW5jdGlvbiBsKCl7dGhpcy5faW5pdEF1ZGlvRGVmZXImJih0aGlzLl9pbml0QXVkaW9EZWZlci5yZWplY3QoKSx0aGlzLl9pbml0QXVkaW9EZWZlcj1udWxsLHRoaXMuc3RyZWFtSW5mbz1udWxsKX1mdW5jdGlvbiBmKCl7bC5jYWxsKHRoaXMpLHRoaXMuY29udHJvbGxlciYmKHRoaXMuX3N0b3JlZFBvc2l0aW9uPXRoaXMuY3VycmVudFRpbWUoKSx0aGlzLmNvbnRyb2xsZXIua2lsbCgpLHRoaXMuY29udHJvbGxlcj1udWxsLHRoaXMudHJpZ2dlcihZLlJFU0VUKSl9ZnVuY3Rpb24gZCgpe3RoaXMuX3JlZ2lzdGVyUGxheXM9ITAsdGhpcy5wYXVzZSgpLHRoaXMudHJpZ2dlcihZLkZJTklTSCl9ZnVuY3Rpb24gcCh0KXt2YXIgZT1HKCksbj10aGlzLnN0cmVhbUluZm8mJiF0O3JldHVybiBuP2UucmVzb2x2ZSh0aGlzLnN0cmVhbUluZm8pOmcuY2FsbCh0aGlzKS5kb25lKGZ1bmN0aW9uKHQpe3ZhciBuPXEuY2hvb3NlUHJlZmVycmVkU3RyZWFtKHQsdGhpcy5vcHRpb25zKTtuP2UucmVzb2x2ZShuKToodGhpcy50cmlnZ2VyKFkuTk9fUFJPVE9DT0wpLEYud2FybihcIiglcykgQ291bGQgbm90IG1hdGNoIGEgcHJvdG9jb2wgb2YgZ2l2ZW4gbWVkaWEgZGVzY3JpcHRvciB0byBvbmUgb2YgdGhlIHN1cHBvcnRlZCBwcm90b2NvbHMgKCVzKSwgYWJvcnRpbmcgYXR0ZW1wdCB0byBwbGF5LlwiLHRoaXMuZ2V0SWQoKSx0aGlzLm9wdGlvbnMucHJvdG9jb2xzKSxlLnJlamVjdCgpKX0uYmluZCh0aGlzKSkuZmFpbChmdW5jdGlvbih0KXtGLndhcm4oXCIoJXMpIFN0cmVhbSByZXF1ZXN0IGZhaWxlZCB3aXRoIHN0YXR1czogJWRcIix0aGlzLmdldElkKCksdC5zdGF0dXMpLF8uY2FsbCh0aGlzLHQpLG0uY2FsbCh0aGlzLHQpLGUucmVqZWN0KCl9LmJpbmQodGhpcykpLGUucHJvbWlzZSgpfWZ1bmN0aW9uIGcoKXtpZih0aGlzLm9wdGlvbnMuc3RyZWFtVXJscyYmIXRoaXMuX3VzZWRQcmVmZXRjaFVybHMpe3ZhciB0LGU9RygpO3JldHVybiB0aGlzLl91c2VkUHJlZmV0Y2hVcmxzPSEwLHQ9JC5yZXN1bHQodGhpcy5vcHRpb25zLnN0cmVhbVVybHMpLGUucmVzb2x2ZSh0KSxlLnByb21pc2UoKX1yZXR1cm4gdGhpcy5hamF4KHt0eXBlOlwiR0VUXCIsdXJsOiQucmVzdWx0KHRoaXMub3B0aW9ucy5zdHJlYW1VcmxzRW5kcG9pbnQpLGRhdGFUeXBlOlwianNvblwiLGFzeW5jOnRoaXMub3B0aW9ucy5hc3luY0ZldGNoLHRpbWVvdXQ6dGhpcy5vcHRpb25zLmFzeW5jRmV0Y2g/bnQ6ZXR9KX1mdW5jdGlvbiBfKHQpe3ZhciBlPXQuc3RhdHVzPj00MDAmJi0xIT09KHQucmVzcG9uc2VUZXh0fHxcIlwiKS5pbmRleE9mKFwiZ2VvX2Jsb2NrZWRcIik7ZSYmdGhpcy50cmlnZ2VyKFkuR0VPX0JMT0NLRUQpfWZ1bmN0aW9uIG0odCl7MD09PXQuc3RhdHVzJiZ0aGlzLnRyaWdnZXIoWS5OT19DT05ORUNUSU9OKX1mdW5jdGlvbiB5KCl7cmV0dXJuIHRoaXMuY29udHJvbGxlciYmdGhpcy5jb250cm9sbGVyLmdldENhcGFiaWxpdGllcyYmdGhpcy5jb250cm9sbGVyLmdldENhcGFiaWxpdGllcygpP3RoaXMuY29udHJvbGxlci5nZXRDYXBhYmlsaXRpZXMoKS5uZWVkc1VybFJlZnJlc2g6ITB9ZnVuY3Rpb24gdih0KXtpZigheS5jYWxsKHRoaXMpKXJldHVybiEwO3ZhciBlPXRoaXMuX2luaXRBdWRpb0RlZmVyJiZ0aGlzLl9pbml0QXVkaW9EZWZlci5zdGF0ZSgpLG49cS5zdHJlYW1WYWxpZEZvclBsYXlpbmdGcm9tKHRoaXMuc3RyZWFtSW5mbyx0KTtyZXR1cm4gdGhpcy5jb250cm9sbGVyJiZ0aGlzLmNvbnRyb2xsZXIuaGFzU3RyZWFtVXJsUHJvdmlkZXImJnRoaXMuY29udHJvbGxlci5oYXNTdHJlYW1VcmxQcm92aWRlcigpPyEwOmUmJihcInBlbmRpbmdcIj09PWV8fFwicmVzb2x2ZWRcIj09PWUmJm4pfWZ1bmN0aW9uIEUodCl7dCYmIXRoaXMuX2J1ZmZlcmluZ1RpbWVvdXQ/dGhpcy5fYnVmZmVyaW5nVGltZW91dD13aW5kb3cuc2V0VGltZW91dChmdW5jdGlvbigpe3RoaXMuX2lzQnVmZmVyaW5nPSEwLHRoaXMudHJpZ2dlcihZLkJVRkZFUlJJTkdfU1RBUlQpfS5iaW5kKHRoaXMpLGl0KTp0fHwodGhpcy5fYnVmZmVyaW5nVGltZW91dCYmKHdpbmRvdy5jbGVhclRpbWVvdXQodGhpcy5fYnVmZmVyaW5nVGltZW91dCksdGhpcy5fYnVmZmVyaW5nVGltZW91dD1udWxsKSx0aGlzLl9pc0J1ZmZlcmluZyYmKHRoaXMuX2lzQnVmZmVyaW5nPSExLHRoaXMudHJpZ2dlcihZLkJVRkZFUlJJTkdfRU5EKSkpfWZ1bmN0aW9uIFMoKXt0aGlzLm9mZihZLlRJTUUsdGhpcy5zZWVrVGltZUV2ZW50SGFuZGxlciksdGhpcy50cmlnZ2VyKFkuU0VFS0VEKSx0aGlzLnNlZWtUaW1lRXZlbnRIYW5kbGVyPW51bGx9ZnVuY3Rpb24gQSgpe3RoaXMuX2Vycm9yUmVjb3ZlcnlGbGFnc1Jlc2V0VGltZW91dD13aW5kb3cuc2V0VGltZW91dChmdW5jdGlvbigpe3RoaXMuX2Vycm9yUmVjb3ZlcnlUaW1lPW51bGwsdGhpcy5fZXJyb3JSZWNvdmVyeUNvdW50cz0wfS5iaW5kKHRoaXMpLGF0KX1mdW5jdGlvbiB3KCl7dGhpcy5fZXJyb3JSZWNvdmVyeUZsYWdzUmVzZXRUaW1lb3V0JiZ3aW5kb3cuY2xlYXJUaW1lb3V0KHRoaXMuX2Vycm9yUmVjb3ZlcnlGbGFnc1Jlc2V0VGltZW91dCl9ZnVuY3Rpb24gVCgpe3ZhciB0PXRoaXMuaXNQbGF5aW5nKCksZT1EYXRlLm5vdygpO3JldHVybiB3LmNhbGwodGhpcyksdGhpcy5fZXJyb3JSZWNvdmVyeVRpbWUmJnRoaXMuX2Vycm9yUmVjb3ZlcnlUaW1lK290PmUmJnRoaXMuX2Vycm9yUmVjb3ZlcnlDb3VudHM+c3Q/dm9pZCB0aGlzLnRyaWdnZXIoWS5BVURJT19FUlJPUix0aGlzKToodGhpcy5fZXJyb3JSZWNvdmVyeVRpbWU9RGF0ZS5ub3coKSx0aGlzLl9lcnJvclJlY292ZXJ5Q291bnRzKyssZi5jYWxsKHRoaXMpLHZvaWQodCYmdGhpcy5wbGF5KHtzZWVrOnRoaXMuY3VycmVudFRpbWUoKSx1c2VySW5pdGlhdGVkOiExfSkpKX1mdW5jdGlvbiBiKHQpe3RoaXMubG9nQXVkaW9FcnJvcih7ZXJyb3JfY29kZTp0LHByb3RvY29sOnRoaXMuc3RyZWFtSW5mbz90aGlzLnN0cmVhbUluZm8ucHJvdG9jb2w6dm9pZCAwLHBsYXllcl90eXBlOnRoaXMuY29udHJvbGxlcj90aGlzLmNvbnRyb2xsZXIuZ2V0VHlwZSgpOnZvaWQgMCxob3N0OnRoaXMuc3RyZWFtSW5mbz9YLmdldFVybEhvc3QodGhpcy5zdHJlYW1JbmZvLnVybCk6dm9pZCAwLHVybDp0aGlzLnN0cmVhbUluZm8/dGhpcy5zdHJlYW1JbmZvLnVybDp2b2lkIDB9KX1mdW5jdGlvbiBQKCl7dmFyIHQsZT1DLkVycm9ycztpZighdGhpcy5jb250cm9sbGVyKXJldHVybiBGLmVycm9yKFwiKCVzKSBDb250cm9sbGVyIGlzIG51bGwsIGFib3J0aW5nIGVycm9yIGhhbmRsZXIuXCIsdGhpcy5nZXRJZCgpLHRoaXMpLGIuY2FsbCh0aGlzLG51bGwpLHZvaWQgVC5jYWxsKHRoaXMpO3N3aXRjaCh0PXRoaXMuY29udHJvbGxlciYmdGhpcy5jb250cm9sbGVyLmdldEVycm9ySUQoKSxGLmVycm9yKFwiKCVzKSAlc1wiLHRoaXMuZ2V0SWQoKSx0aGlzLmNvbnRyb2xsZXIuZ2V0RXJyb3JNZXNzYWdlP3RoaXMuY29udHJvbGxlci5nZXRFcnJvck1lc3NhZ2UoKTpcIkNvbnRyb2xsZXIgZG9lcyBub3QgcHJvdmlkZSBnZXRFcnJvck1lc3NhZ2UoKVwiKSxEKHQsXCJNU0VcIixcIkdFTkVSSUNcIixcIkhUTUw1X0FVRElPX0RFQ09ERVwiLFwiSFRNTDVfQVVESU9fU1JDX05PVF9TVVBQT1JURURcIixcIkZMQVNIX1BST1hZXCIsXCJGTEFTSF9SVE1QX0NPTk5FQ1RfRkFJTEVEXCIsXCJGTEFTSF9SVE1QX0NBTk5PVF9QTEFZX1NUUkVBTVwiKSYmYi5jYWxsKHRoaXMsdCksdCl7Y2FzZSBlLkZMQVNIX1BST1hZX0NBTlRfTE9BRF9GTEFTSDp0aGlzLnRyaWdnZXIoWS5GTEFTSF9OT1RfTE9BREVEKTticmVhaztjYXNlIGUuRkxBU0hfUFJPWFlfRkxBU0hfQkxPQ0tFRDp0aGlzLnRyaWdnZXIoWS5GTEFTSF9CTE9DSyk7YnJlYWs7Y2FzZSBlLkZMQVNIX1JUTVBfQ09OTkVDVF9GQUlMRUQ6JC53aXRob3V0KHRoaXMub3B0aW9ucy5wcm90b2NvbHMsVy5SVE1QKTtjYXNlIGUuRkxBU0hfUlRNUF9DQU5OT1RfUExBWV9TVFJFQU06Y2FzZSBlLkZMQVNIX1JUTVBfQ09OTkVDVF9DTE9TRUQ6Y2FzZSBlLkhUTUw1X0FVRElPX05FVFdPUks6Y2FzZSBlLkhUTUw1X0FVRElPX0FCT1JURUQ6Y2FzZSBlLkhUTUw1X0FVRElPX0RFQ09ERTpjYXNlIGUuSFRNTDVfQVVESU9fU1JDX05PVF9TVVBQT1JURUQ6Y2FzZSBlLkdFTkVSSUNfQVVESU9fRU5ERURfRUFSTFk6Y2FzZSBlLk1TRV9CQURfT0JKRUNUX1NUQVRFOmNhc2UgZS5NU0VfTk9UX1NVUFBPUlRFRDpjYXNlIGUuTVNFX01QM19OT1RfU1VQUE9SVEVEOmNhc2UgZS5NU0VfSExTX05PVF9WQUxJRF9QTEFZTElTVDpjYXNlIGUuTVNFX0hMU19QTEFZTElTVF9OT1RfRk9VTkQ6Y2FzZSBlLk1TRV9ITFNfU0VHTUVOVF9OT1RfRk9VTkQ6VC5jYWxsKHRoaXMpO2JyZWFrO2Nhc2UgZS5HRU5FUklDX0FVRElPX09WRVJSVU46ZC5jYWxsKHRoaXMpO2JyZWFrO2RlZmF1bHQ6Ri5lcnJvcihcIiglcykgVW5oYW5kbGVkIGF1ZGlvIGVycm9yIGNvZGU6ICVzXCIsdGhpcy5nZXRJZCgpLHQsdGhpcyl9fWZ1bmN0aW9uIEkodCxlKXtzd2l0Y2godGhpcy5vcHRpb25zLmRlYnVnJiZPLmNhbGwodGhpcyx0LGUpLHQpe2Nhc2UgWS5QQVVTRTp0aGlzLl9pc1BsYXlpbmc9ITEsdGhpcy5faXNQbGF5QWN0aW9uUXVldWVkPSExO2JyZWFrO2Nhc2UgWS5QTEFZOnZhciBuPWU7dGhpcy50b2dnbGVNdXRlKEoubXV0ZWQpLHRoaXMuc2V0Vm9sdW1lKEoudm9sdW1lKSx0aGlzLl9pc1BsYXlpbmc9ITEsdGhpcy5faXNQbGF5QWN0aW9uUXVldWVkPSEwLHRoaXMuX3VzZXJJbml0aWF0ZWRQbGF5PXZvaWQgMCE9PW4udXNlckluaXRpYXRlZD8hIW4udXNlckluaXRpYXRlZDohMCxNLmNhbGwodGhpcyk7YnJlYWs7Y2FzZSBZLlBMQVlfU1RBUlQ6dGhpcy5faXNQbGF5aW5nPSEwLHRoaXMuX2lzUGxheUFjdGlvblF1ZXVlZD0hMSx0aGlzLl9yZWdpc3RlclBsYXlzJiZ0aGlzLnJlZ2lzdGVyUGxheSgpO2JyZWFrO2Nhc2UgWS5CVUZGRVJSSU5HX1NUQVJUOmNhc2UgWS5TRUVLOnRoaXMuX2lzUGxheWluZyYmKHRoaXMuX2lzUGxheWluZz0hMSx0aGlzLl9pc1BsYXlBY3Rpb25RdWV1ZWQ9ITApO2JyZWFrO2Nhc2UgWS5CVUZGRVJSSU5HX0VORDpjYXNlIFkuU0VFS0VEOnRoaXMuX2lzUGxheUFjdGlvblF1ZXVlZCYmKHRoaXMuX2lzUGxheWluZz0hMCx0aGlzLl9pc1BsYXlBY3Rpb25RdWV1ZWQ9ITEpO2JyZWFrO2Nhc2UgWS5OT19DT05ORUNUSU9OOnRoaXMuX2hhc05vQ29ubmVjdGlvbj0hMCx0aGlzLl9ub0Nvbm5lY3Rpb25TaW5jZT1EYXRlLm5vdygpO2JyZWFrO2Nhc2UgWS5OT19TVFJFQU1TOnRoaXMucGF1c2UoKSxFLmNhbGwodGhpcywhMSksbC5jYWxsKHRoaXMpLE4uY2FsbCh0aGlzKTticmVhaztjYXNlIFkuU1RSRUFNUzp0aGlzLl9ub0Nvbm5lY3Rpb25TaW5jZT1udWxsLHRoaXMuX2hhc05vQ29ubmVjdGlvbj0hMTticmVhaztjYXNlIFkuT05MSU5FOmsuY2FsbCh0aGlzKTticmVhaztjYXNlIFkuT0ZGTElORTp9fWZ1bmN0aW9uIEwodCl7dmFyIGU9Qy5TdGF0ZXMsbj1DLkVycm9ycztzd2l0Y2godCl7Y2FzZSBlLklETEU6Ui5jYWxsKHRoaXMpLHRoaXMuY29udHJvbGxlciYmdGhpcy5jb250cm9sbGVyLmdldEVycm9ySUQoKT09PW4uRkxBU0hfUFJPWFlfRkxBU0hfQkxPQ0tFRCYmdGhpcy50cmlnZ2VyKFkuRkxBU0hfVU5CTE9DSyk7YnJlYWs7Y2FzZSBlLlBBVVNFRDpSLmNhbGwodGhpcyksRS5jYWxsKHRoaXMsITEpLHRoaXMuc2Vla1RpbWVFdmVudEhhbmRsZXImJnRoaXMuaXNQYXVzZWQoKSYmUy5jYWxsKHRoaXMpLHRoaXMuaXNQbGF5aW5nKCkmJnRoaXMudHJpZ2dlcihZLlBBVVNFLHtwb3NpdGlvbjp0aGlzLmN1cnJlbnRUaW1lKCl9KTticmVhaztjYXNlIGUuUExBWUlORzpSLmNhbGwodGhpcyksRS5jYWxsKHRoaXMsITEpLEEuY2FsbCh0aGlzKSx0aGlzLnRyaWdnZXIoWS5QTEFZX1JFU1VNRSk7YnJlYWs7Y2FzZSBlLkxPQURJTkc6Y2FzZSBlLlNFRUtJTkc6Ui5jYWxsKHRoaXMpLEUuY2FsbCh0aGlzLCEwKTticmVhaztjYXNlIGUuRU5ERUQ6Ui5jYWxsKHRoaXMpLGQuY2FsbCh0aGlzKTticmVhaztjYXNlIGUuRVJST1I6RS5jYWxsKHRoaXMsITEpLFAuY2FsbCh0aGlzKX10aGlzLnRyaWdnZXIoWS5TVEFURV9DSEFOR0UsdCl9ZnVuY3Rpb24gTyh0LGUpe3ZhciBuPXRoaXMub3B0aW9ucy50aXRsZTtuPW4mJm4ubGVuZ3RoP1wiIFtcIituLnJlcGxhY2UoL1xccy9nLFwiXCIpLnN1YnN0cigwLDYpK1wiXVwiOlwiXCIsdD09PVkuU1RBVEVfQ0hBTkdFP0YoXCIoJXMpJXMgRXZlbnQ6ICVzICglcylcIix0aGlzLmdldElkKCksbix0LGUpOnQhPT1ZLlRJTUV8fHRoaXMuX2xvZ2dlZFRpbWU/dCE9PVkuVElNRSYmRihcIiglcyklcyBFdmVudDogJXNcIix0aGlzLmdldElkKCksbix0KTpGKFwiKCVzKSVzIEV2ZW50OiAlcyAlZG1zXCIsdGhpcy5nZXRJZCgpLG4sdCx0aGlzLmN1cnJlbnRUaW1lKCkpLHRoaXMuX2xvZ2dlZFRpbWU9dD09PVkuVElNRX1mdW5jdGlvbiBSKCl7dGhpcy5faW5pdEF1ZGlvRGVmZXImJnRoaXMuX2luaXRBdWRpb0RlZmVyLnJlc29sdmUoKX1mdW5jdGlvbiBEKHQpe3JldHVybiB2b2lkIDA9PT1DLkVycm9yc1t0XT8hMTpBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsMSkuc29tZShmdW5jdGlvbihlKXtyZXR1cm4gMD09PXQuaW5kZXhPZihlKX0pfWZ1bmN0aW9uIE0oKXtmdW5jdGlvbiB0KCl7dmFyIHQ9d2luZG93Lm5hdmlnYXRvci5vbkxpbmU7RihcIk5hdmlnYXRvciBgb25MaW5lYCBzdGF0dXMgaXMgbm93OiBcIit0KSx3aW5kb3cuc2V0VGltZW91dChmdW5jdGlvbigpe3dpbmRvdy5uYXZpZ2F0b3Iub25MaW5lPT09dCYmdGhpcy50cmlnZ2VyKHQ/WS5PTkxJTkU6WS5PRkZMSU5FKX0uYmluZCh0aGlzKSw1MDApfXRoaXMuX29ubGluZUV2ZW50c1JlZ2lzdGVyZWR8fCh0aGlzLl9vbmxpbmVFdmVudHNSZWdpc3RlcmVkPSEwLHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwib25saW5lXCIsdC5iaW5kKHRoaXMpKSx3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcIm9mZmxpbmVcIix0LmJpbmQodGhpcykpKX1mdW5jdGlvbiBrKCl7aWYodGhpcy5oYXNOb0Nvbm5lY3Rpb24oKSYmdGhpcy5faXNQbGF5UmV0cnlRdWV1ZWQpe3ZhciB0PURhdGUubm93KCktdGhpcy5fbm9Db25uZWN0aW9uU2luY2U7dGhpcy5faXNQbGF5UmV0cnlRdWV1ZWQ9ITAsdDx0aGlzLm9wdGlvbnMucmV0cnlBZnRlck5vQ29ubmVjdGlvbkV2ZW50VGltZW91dCYmdGhpcy5wbGF5KHt1c2VySW5pdGlhdGVkOiExfSl9fWZ1bmN0aW9uIE4oKXt0aGlzLmhhc05vQ29ubmVjdGlvbigpJiYhdGhpcy5fdXNlckluaXRpYXRlZFBsYXkmJih0aGlzLl9pc1BsYXlSZXRyeVF1ZXVlZD0hMCl9dmFyIHgsQyxGLFU9bigxKSxCPW4oNiksSD1uKDgpLGo9big5KSxHPW4oMikuRGVmZXJyZWQsWT1uKDcpLFY9bigxNCksej1uKDEwKSxXPW4oMTUpLEs9bigxNikscT1uKDE4KSxYPW4oMTIpLCQ9bigxMyksWj1uKDE5KSxRPXt9LEo9e211dGVkOiExLHZvbHVtZToxfSx0dD17c291bmRJZDpRLGR1cmF0aW9uOlEsdGl0bGU6bnVsbCxyZWdpc3RlckVuZHBvaW50OlEsc3RyZWFtVXJsc0VuZHBvaW50OlEscmVzb3VyY2VJZDohMSxkZWJ1ZzohMSxhc3luY0ZldGNoOiEwLHVzZVNpbmdsZVBsYXllcjohMCxwcm90b2NvbHM6W1cuSExTLFcuUlRNUCxXLkhUVFBdLGV4dGVuc2lvbnM6W1YuTVAzXSxtYXhCaXRyYXRlOjEvMCxtZWRpYVNvdXJjZUVuYWJsZWQ6ITEsbXNlRmlyZWZveDohMSxtc2VTYWZhcmk6ITEsZXZlbnRMb2dnZXI6bnVsbCxsb2dFcnJvcnM6ITAsbG9nUGVyZm9ybWFuY2U6ITAsYWpheDpudWxsLHJldHJ5QWZ0ZXJOb0Nvbm5lY3Rpb25FdmVudFRpbWVvdXQ6NmU0LGZhZGVPdXRPblBhdXNlOiExLGZhZGVPdXRBbGdvOlouVm9sdW1lQXV0b21hdG9yLkFsZ29zLkVhc2VJbk91dH0sZXQ9NmUzLG50PTZlMyxpdD00MDAscnQ9NmU0LG90PTZlMyxzdD0zLGF0PTNlNCx1dD1bXTt4PXQuZXhwb3J0cz1mdW5jdGlvbih0LGUpe2lmKDE9PT1hcmd1bWVudHMubGVuZ3RoP2U9dDp4LnNldEF1ZGlvTWFuYWdlcih0KSwhQyl0aHJvdyBuZXcgRXJyb3IoXCJTQ0F1ZGlvOiBBdWRpb01hbmFnZXIgaW5zdGFuY2UgbXVzdCBiZSBzZXQgd2l0aCBgU0NBdWRpby5zZXRBdWRpb01hbmFnZXIoKWAgb3IgcGFzc2VkIHZpYSB0aGUgY29uc3RydWN0b3JcIik7dGhpcy5vcHRpb25zPSQuZXh0ZW5kKHt9LHR0LGUpO3ZhciBuPU9iamVjdC5rZXlzKHRoaXMub3B0aW9ucykuZmlsdGVyKGZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLm9wdGlvbnNbdF09PT1RfSx0aGlzKTtpZihuLmxlbmd0aCl0aHJvdyBuZXcgRXJyb3IoXCJTQ0F1ZGlvOiBwYXNzIGludG8gY29uc3RydWN0b3IgdGhlIGZvbGxvd2luZyBvcHRpb25zOiBcIituLmpvaW4oXCIsIFwiKSk7Sy5wcmlvcml0aXplQW5kRmlsdGVyKHRoaXMub3B0aW9ucyksdGhpcy5jb250cm9sbGVyPW51bGwsdGhpcy5zdHJlYW1JbmZvPW51bGwsdGhpcy5fdXNlckluaXRpYXRlZFBsYXk9dGhpcy5fcmVnaXN0ZXJQbGF5cz0hMCx0aGlzLl9yZWdpc3RlckNvdW50cz10aGlzLl9lcnJvclJlY292ZXJ5Q291bnRzPTAsdGhpcy5faXNQbGF5QWN0aW9uUXVldWVkPXRoaXMuX29ubGluZUV2ZW50c1JlZ2lzdGVyZWQ9dGhpcy5fdXNlZFByZWZldGNoVXJscz10aGlzLl9pc1BsYXlpbmc9dGhpcy5faXNCdWZmZXJpbmc9dGhpcy5faGFzTm9Db25uZWN0aW9uPSExLHRoaXMuX2luaXRBdWRpb0RlZmVyPXRoaXMuX2V4cGlyYXRpb25UaW1lb3V0PXRoaXMuX2J1ZmZlcmluZ1RpbWVvdXQ9dGhpcy5fZXJyb3JSZWNvdmVyeVRpbWU9dGhpcy5fZXJyb3JSZWNvdmVyeUZsYWdzUmVzZXRUaW1lb3V0PXRoaXMuX3N0b3JlZFBvc2l0aW9uPXRoaXMuX3ByZXZQb3NpdGlvbj10aGlzLl9ub0Nvbm5lY3Rpb25TaW5jZT1udWxsLHRoaXMub3B0aW9ucy5kZWJ1ZyYmKHRoaXMuX2xvZ2dlZFRpbWU9ITEpLHRoaXMuX21vZGVsTGlzdGVuZXJzPXt9LHRoaXMuX2hvb2tzUGF1c2U9W10sdGhpcy5hdWRpb1BlcmZNb25pdG9yPW5ldyBIKHRoaXMsdGhpcy5sb2dBdWRpb1BlcmZvcm1hbmNlLmJpbmQodGhpcykpLHRoaXMuYXVkaW9Mb2dnZXI9bmV3IEIodGhpcyksdGhpcy52b2x1bWVBdXRvbWF0b3I9bmV3IFouVm9sdW1lQXV0b21hdG9yKHRoaXMpLEY9Rnx8aihlLmRlYnVnLFwic2NhdWRpb1wiKX0sJC5leHRlbmQoeC5wcm90b3R5cGUseix7Y29uc3RydWN0b3I6eCxpbml0QXVkaW86ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5faW5pdEF1ZGlvRGVmZXJ8fCh0aGlzLl9pbml0QXVkaW9EZWZlcj1HKCkscC5jYWxsKHRoaXMpLmRvbmUoZnVuY3Rpb24odCl7dmFyIGU9ITA7dGhpcy5zdHJlYW1JbmZvJiYoZT0hMSksdGhpcy5zdHJlYW1JbmZvPXQsZSYmdGhpcy50cmlnZ2VyKFkuU1RSRUFNUyksdGhpcy5jb250cm9sbGVyPWEuY2FsbCh0aGlzLHQpLHUuY2FsbCh0aGlzLHRoaXMuY29udHJvbGxlciwhMCksTC5jYWxsKHRoaXMsdGhpcy5jb250cm9sbGVyLmdldFN0YXRlKCkpfS5iaW5kKHRoaXMpKS5mYWlsKGZ1bmN0aW9uKCl7dGhpcy50cmlnZ2VyKFkuTk9fU1RSRUFNUyl9LmJpbmQodGhpcykpLHRoaXMuX2luaXRBdWRpb0RlZmVyLmRvbmUoZnVuY3Rpb24oKXt0aGlzLnRyaWdnZXIoWS5DUkVBVEVEKX0uYmluZCh0aGlzKSkpLHRoaXMuX2luaXRBdWRpb0RlZmVyLnByb21pc2UoKX0scmVnaXN0ZXJQbGF5OmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5vcHRpb25zLnNvdW5kSWQsZT0hMTtyZXR1cm4tMT09PXV0LmluZGV4T2YodCkmJih1dC5wdXNoKHQpLHdpbmRvdy5zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7dmFyIGU9dXQuaW5kZXhPZih0KTtlPi0xJiZ1dC5zcGxpY2UoZSwxKX0scnQpLHRoaXMuYWpheCh7dHlwZTpcIlBPU1RcIix1cmw6JC5yZXN1bHQodGhpcy5vcHRpb25zLnJlZ2lzdGVyRW5kcG9pbnQpLGRhdGFUeXBlOlwianNvblwifSksdGhpcy5fcmVnaXN0ZXJDb3VudHMrKyx0aGlzLl9yZWdpc3RlclBsYXlzPSExLHRoaXMudHJpZ2dlcihZLlJFR0lTVEVSRUQpLGU9ITApLGV9LHRvZ2dsZTpmdW5jdGlvbigpe1xudGhpc1t0aGlzLmlzUGF1c2VkKCk/XCJwbGF5XCI6XCJwYXVzZVwiXSgpfSxwbGF5OmZ1bmN0aW9uKHQpe3ZhciBlO2lmKHQmJm51bGwhPXQuc2VlayllPXQuc2VlaztlbHNle2lmKHRoaXMuaXNQbGF5aW5nKCkpcmV0dXJuO2U9dGhpcy5jdXJyZW50VGltZSgpfXQ9JC5leHRlbmQoe30sdCx7cG9zaXRpb246ZX0pLHRoaXMudHJpZ2dlcihZLlBMQVksdCksdi5jYWxsKHRoaXMsZSl8fChmLmNhbGwodGhpcyksdGhpcy5faXNQbGF5QWN0aW9uUXVldWVkPSEwKSx0aGlzLmluaXRBdWRpbygpLmRvbmUoZnVuY3Rpb24oKXt0aGlzLl9pc1BsYXlBY3Rpb25RdWV1ZWQmJih0aGlzLl9zdG9yZWRQb3NpdGlvbj1udWxsLHRoaXMudHJpZ2dlcihZLlBMQVlfU1RBUlQsdCksdGhpcy5jb250cm9sbGVyJiZ0aGlzLmNvbnRyb2xsZXIucGxheShlKSl9LmJpbmQodGhpcykpLEUuY2FsbCh0aGlzLCEwKX0scGF1c2U6ZnVuY3Rpb24odCl7dGhpcy5pc1BhdXNlZCgpfHwodD0kLmV4dGVuZCh7fSx0LHtwb3NpdGlvbjp0aGlzLmN1cnJlbnRUaW1lKCl9KSxpLmNhbGwodGhpcykmJih0aGlzLnRyaWdnZXIoWS5QQVVTRSx0KSx0aGlzLmNvbnRyb2xsZXImJnRoaXMuY29udHJvbGxlci5wYXVzZSgpKSl9LHJlZ2lzdGVySG9vazpmdW5jdGlvbih0LGUpe3N3aXRjaCh0KXtjYXNlXCJwYXVzZVwiOnRoaXMuX2hvb2tzUGF1c2UucHVzaChlKTticmVhaztkZWZhdWx0OnRocm93IG5ldyBFcnJvcihcImNhbmB0IHJlZ2lzdGVyIGhvb2sgZm9yIFwiK3QpfX0sZ2V0TGlzdGVuVGltZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmF1ZGlvTG9nZ2VyP3RoaXMuYXVkaW9Mb2dnZXIuZ2V0TGlzdGVuVGltZSgpOjB9LGRpc3Bvc2U6ZnVuY3Rpb24oKXt0aGlzLmF1ZGlvTG9nZ2VyPW51bGwsdGhpcy5hdWRpb1BlcmZNb25pdG9yPW51bGwsJC53aXRob3V0KHV0LHRoaXMub3B0aW9ucy5zb3VuZElkKSx3aW5kb3cuY2xlYXJUaW1lb3V0KHRoaXMuX2J1ZmZlcmluZ1RpbWVvdXQpLGwuY2FsbCh0aGlzKSx0aGlzLmNvbnRyb2xsZXImJih0aGlzLmNvbnRyb2xsZXIua2lsbCgpLHRoaXMuY29udHJvbGxlcj1udWxsKSxkZWxldGUgdGhpcy5jb250cm9sbGVyLHRoaXMudHJpZ2dlcihZLkRFU1RST1lFRCksdGhpcy5vZmYoKX0sc2VlazpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5jb250cm9sbGVyP3Q+PSQucmVzdWx0KHRoaXMub3B0aW9ucy5kdXJhdGlvbik/dm9pZCBkLmNhbGwodGhpcyk6KHRoaXMuc2Vla1RpbWVFdmVudEhhbmRsZXImJnRoaXMub2ZmKFkuVElNRSx0aGlzLnNlZWtUaW1lRXZlbnRIYW5kbGVyKSx0aGlzLnNlZWtUaW1lRXZlbnRIYW5kbGVyPSQuYWZ0ZXIoMixmdW5jdGlvbigpe1MuY2FsbCh0aGlzKX0uYmluZCh0aGlzKSksdGhpcy5vbihZLlRJTUUsdGhpcy5zZWVrVGltZUV2ZW50SGFuZGxlciksdGhpcy50cmlnZ2VyKFkuU0VFSyx7ZnJvbTp0aGlzLmN1cnJlbnRUaW1lKCksdG86dH0pLHRoaXMuaXNQbGF5aW5nKCkmJiF2LmNhbGwodGhpcyx0KT8oZi5jYWxsKHRoaXMpLHZvaWQgdGhpcy5wbGF5KHtzZWVrOnR9KSk6dm9pZCB0aGlzLmNvbnRyb2xsZXIuc2Vlayh0KSk6dm9pZCAwfSxzZWVrUmVsYXRpdmU6ZnVuY3Rpb24odCl7dGhpcy5jb250cm9sbGVyJiZ0aGlzLnNlZWsodGhpcy5jdXJyZW50VGltZSgpK3QpfSxjdXJyZW50VGltZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9zdG9yZWRQb3NpdGlvbj90aGlzLl9zdG9yZWRQb3NpdGlvbjp0aGlzLmNvbnRyb2xsZXI/dGhpcy5jb250cm9sbGVyLmdldEN1cnJlbnRQb3NpdGlvbigpOjB9LGxvYWRQcm9ncmVzczpmdW5jdGlvbigpe3ZhciB0PTA7cmV0dXJuIHRoaXMuY29udHJvbGxlciYmKHQ9dGhpcy5jb250cm9sbGVyLmdldExvYWRlZFBvc2l0aW9uKCkvdGhpcy5jb250cm9sbGVyLmdldER1cmF0aW9uKCksdD10Pj0uOTk/MTp0KSx0fSxidWZmZXJlZDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmNvbnRyb2xsZXImJnRoaXMuY29udHJvbGxlci5nZXREdXJhdGlvbigpfHwwfSxpc1BhdXNlZDpmdW5jdGlvbigpe3JldHVybiF0aGlzLmlzUGxheWluZygpfSxpc0J1ZmZlcmluZzpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9pc0J1ZmZlcmluZ30saXNQbGF5aW5nOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2lzUGxheUFjdGlvblF1ZXVlZHx8dGhpcy5faXNQbGF5aW5nfSxpc0xvYWRpbmc6ZnVuY3Rpb24oKXtyZXR1cm4hKCF0aGlzLmNvbnRyb2xsZXJ8fHRoaXMuY29udHJvbGxlci5nZXRTdGF0ZSgpIT09Qy5TdGF0ZXMuTE9BRElORyl9LGhhc05vQ29ubmVjdGlvbjpmdW5jdGlvbigpe3JldHVybiEhdGhpcy5faGFzTm9Db25uZWN0aW9ufSxoYXNTdHJlYW1JbmZvOmZ1bmN0aW9uKCl7cmV0dXJuISF0aGlzLnN0cmVhbUluZm99LHRvZ2dsZU11dGU6ZnVuY3Rpb24odCl7eC50b2dnbGVNdXRlKHQpfSxpc011dGVkOmZ1bmN0aW9uKCl7cmV0dXJuIHguaXNNdXRlZCgpfSxzZXRWb2x1bWU6ZnVuY3Rpb24odCl7eC5zZXRWb2x1bWUodCl9LGdldFZvbHVtZTpmdW5jdGlvbigpe3JldHVybiB4LmdldFZvbHVtZSgpfSxsb2dBdWRpb1BlcmZvcm1hbmNlOmZ1bmN0aW9uKHQpe3RoaXMuZ2V0RXZlbnRMb2dnZXIoKSYmdGhpcy5vcHRpb25zLmxvZ1BlcmZvcm1hbmNlJiZ0aGlzLmdldEV2ZW50TG9nZ2VyKCkuYXVkaW9QZXJmb3JtYW5jZSh0KX0sbG9nQXVkaW9FcnJvcjpmdW5jdGlvbih0KXt0aGlzLmdldEV2ZW50TG9nZ2VyKCkmJnRoaXMub3B0aW9ucy5sb2dFcnJvcnMmJnRoaXMuZ2V0RXZlbnRMb2dnZXIoKS5hdWRpb0Vycm9yKHQpfSxnZXRBdWRpb01hbmFnZXJTdGF0ZXM6ZnVuY3Rpb24oKXtyZXR1cm4gQy5TdGF0ZXN9LGdldElkOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMub3B0aW9ucy5yZXNvdXJjZUlkfHx0aGlzLm9wdGlvbnMuc291bmRJZH0sZ2V0RXZlbnRMb2dnZXI6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5vcHRpb25zLmV2ZW50TG9nZ2VyfSxyZWdpc3Rlck1vZGVsRXZlbnRMaXN0ZW5lcjpmdW5jdGlvbih0LGUpe3ZhciBuPXIodCk7aWYodGhpcy5fbW9kZWxMaXN0ZW5lcnNbbl0pdGhyb3cgbmV3IEVycm9yKFwiRGF0YSBtb2RlbCBpcyBhbHJlYWR5IHJlZ2lzdGVyZWQgKGZvcmdvdCB0byB1bnJlZ2lzdGVyIGl0IG9yIHJlZ2lzdGVyaW5nIHR3aWNlPylcIik7dGhpcy5fbW9kZWxMaXN0ZW5lcnNbbl09ZT1lLmJpbmQodGhpcyx0KSx0aGlzLm9uKFwiYWxsXCIsZSl9LHVucmVnaXN0ZXJNb2RlbEV2ZW50TGlzdGVuZXI6ZnVuY3Rpb24odCl7dmFyIGU9cih0KTt0aGlzLl9tb2RlbExpc3RlbmVyc1tlXSYmKHRoaXMub2ZmKFwiYWxsXCIsdGhpcy5fbW9kZWxMaXN0ZW5lcnNbZV0pLGRlbGV0ZSB0aGlzLl9tb2RlbExpc3RlbmVyc1tlXSl9LGFqYXg6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMub3B0aW9ucy5hamF4P3RoaXMub3B0aW9ucy5hamF4KHQpOlUodCl9LHRyaWdnZXI6ZnVuY3Rpb24odCxlKXtJLmNhbGwodGhpcyx0LGUpLHoudHJpZ2dlci5jYWxsKHRoaXMsdCxlKX19KSwkLmV4dGVuZCh4LHtnZXRTZXR0aW5nczpmdW5jdGlvbigpe3JldHVybiBKfSxzZXRTZXR0aW5nczpmdW5jdGlvbih0KXskLmV4dGVuZChKLHQpfSxzZXRBdWRpb01hbmFnZXI6byxzZXRBdWRpb01hbmFnZXJPbmNlOiQub25jZShvKSx0b2dnbGVNdXRlOmZ1bmN0aW9uKHQpe0oubXV0ZWQ9dm9pZCAwPT09dD8hSi5tdXRlZDohIXQsQyYmQy5zZXRWb2x1bWUoSi5tdXRlZD8wOjEpfSxpc011dGVkOmZ1bmN0aW9uKCl7cmV0dXJuIEoubXV0ZWR9LHNldFZvbHVtZTpmdW5jdGlvbih0KXtKLnZvbHVtZT12b2lkIDA9PT10PzE6dCxDJiZDLnNldFZvbHVtZShKLnZvbHVtZSl9LGdldFZvbHVtZTpmdW5jdGlvbigpe3JldHVybiBKLnZvbHVtZX0sRXh0ZW5zaW9uczpWLFByb3RvY29sczpXLEV2ZW50czpZLEJVRkZFUl9ERUxBWTppdCxQTEFZX1JFR0lTVFJBVElPTl9USU1FT1VUOnJ0fSl9LGZ1bmN0aW9uKHQsZSxuKXt2YXIgaT1uKDIpLkRlZmVycmVkLHI9NDt0LmV4cG9ydHM9ZnVuY3Rpb24odCl7dmFyIGUsbixvLHMsYSx1LGgsYzt0JiYobz10LmRhdGF8fG51bGwsbj10LnVybHx8XCJcIixlPXQudHlwZXx8XCJHRVRcIixzPXQuZGF0YVR5cGV8fFwidGV4dFwiLGE9dC5hc3luYyx1PXQudGltZW91dCxoPXQuYmVmb3JlU2VuZHx8bnVsbCk7dmFyIGw9aSgpO2E9YSE9PSExO3ZhciBmPW5ldyBYTUxIdHRwUmVxdWVzdDtyZXR1cm4gZi5vcGVuKGUsbixhKSxhJiYoZi5yZXNwb25zZVR5cGU9XCJ0ZXh0XCIpLGgmJmgoZiksZi5vbnJlYWR5c3RhdGVjaGFuZ2U9ZnVuY3Rpb24oKXtpZihmLnJlYWR5U3RhdGU9PT1yKWlmKGNsZWFyVGltZW91dChjKSwwIT09Zi5zdGF0dXMmJmYuc3RhdHVzPDQwMCl7dmFyIHQ9Zi5yZXNwb25zZVRleHQ7aWYoXCJqc29uXCI9PT1zKXRyeXt0PUpTT04ucGFyc2UodCl9Y2F0Y2goZSl7cmV0dXJuIHZvaWQgbC5yZWplY3QoZil9bC5yZXNvbHZlKHQpfWVsc2UgbC5yZWplY3QoZil9LG51bGwhPXUmJihjPXNldFRpbWVvdXQoZnVuY3Rpb24oKXtmLnJlYWR5U3RhdGUhPT1yJiYoZi5hYm9ydCgpLGwucmVqZWN0KGYpKX0sdSkpLGYuc2VuZChvKSxsLnByb21pc2UoKX19LGZ1bmN0aW9uKHQsZSxuKXt0LmV4cG9ydHM9bigzKX0sZnVuY3Rpb24odCxlLG4pey8qIVxuXHRcdCoganF1ZXJ5LWRlZmVycmVkXG5cdFx0KiBDb3B5cmlnaHQoYykgMjAxMSBIaWRkZW4gPHp6ZGhpZGRlbkBnbWFpbC5jb20+XG5cdFx0KiBNSVQgTGljZW5zZWRcblx0XHQqL1xudmFyIGk9dC5leHBvcnRzPW4oNCkscj1BcnJheS5wcm90b3R5cGUuc2xpY2U7aS5leHRlbmQoe0RlZmVycmVkOmZ1bmN0aW9uKHQpe3ZhciBlPVtbXCJyZXNvbHZlXCIsXCJkb25lXCIsaS5DYWxsYmFja3MoXCJvbmNlIG1lbW9yeVwiKSxcInJlc29sdmVkXCJdLFtcInJlamVjdFwiLFwiZmFpbFwiLGkuQ2FsbGJhY2tzKFwib25jZSBtZW1vcnlcIiksXCJyZWplY3RlZFwiXSxbXCJub3RpZnlcIixcInByb2dyZXNzXCIsaS5DYWxsYmFja3MoXCJtZW1vcnlcIildXSxuPVwicGVuZGluZ1wiLHI9e3N0YXRlOmZ1bmN0aW9uKCl7cmV0dXJuIG59LGFsd2F5czpmdW5jdGlvbigpe3JldHVybiBvLmRvbmUoYXJndW1lbnRzKS5mYWlsKGFyZ3VtZW50cyksdGhpc30sdGhlbjpmdW5jdGlvbigpe3ZhciB0PWFyZ3VtZW50cztyZXR1cm4gaS5EZWZlcnJlZChmdW5jdGlvbihuKXtpLmVhY2goZSxmdW5jdGlvbihlLHIpe3ZhciBzPXJbMF0sYT10W2VdO29bclsxXV0oaS5pc0Z1bmN0aW9uKGEpP2Z1bmN0aW9uKCl7dmFyIHQ9YS5hcHBseSh0aGlzLGFyZ3VtZW50cyk7dCYmaS5pc0Z1bmN0aW9uKHQucHJvbWlzZSk/dC5wcm9taXNlKCkuZG9uZShuLnJlc29sdmUpLmZhaWwobi5yZWplY3QpLnByb2dyZXNzKG4ubm90aWZ5KTpuW3MrXCJXaXRoXCJdKHRoaXM9PT1vP246dGhpcyxbdF0pfTpuW3NdKX0pLHQ9bnVsbH0pLnByb21pc2UoKX0scHJvbWlzZTpmdW5jdGlvbih0KXtyZXR1cm4gbnVsbCE9dD9pLmV4dGVuZCh0LHIpOnJ9fSxvPXt9O3JldHVybiByLnBpcGU9ci50aGVuLGkuZWFjaChlLGZ1bmN0aW9uKHQsaSl7dmFyIHM9aVsyXSxhPWlbM107cltpWzFdXT1zLmFkZCxhJiZzLmFkZChmdW5jdGlvbigpe249YX0sZVsxXnRdWzJdLmRpc2FibGUsZVsyXVsyXS5sb2NrKSxvW2lbMF1dPXMuZmlyZSxvW2lbMF0rXCJXaXRoXCJdPXMuZmlyZVdpdGh9KSxyLnByb21pc2UobyksdCYmdC5jYWxsKG8sbyksb30sd2hlbjpmdW5jdGlvbih0KXt2YXIgZSxuLG8scz0wLGE9ci5jYWxsKGFyZ3VtZW50cyksdT1hLmxlbmd0aCxoPTEhPT11fHx0JiZpLmlzRnVuY3Rpb24odC5wcm9taXNlKT91OjAsYz0xPT09aD90OmkuRGVmZXJyZWQoKSxsPWZ1bmN0aW9uKHQsbixpKXtyZXR1cm4gZnVuY3Rpb24obyl7blt0XT10aGlzLGlbdF09YXJndW1lbnRzLmxlbmd0aD4xP3IuY2FsbChhcmd1bWVudHMpOm8saT09PWU/Yy5ub3RpZnlXaXRoKG4saSk6LS1ofHxjLnJlc29sdmVXaXRoKG4saSl9fTtpZih1PjEpZm9yKGU9bmV3IEFycmF5KHUpLG49bmV3IEFycmF5KHUpLG89bmV3IEFycmF5KHUpO3U+cztzKyspYVtzXSYmaS5pc0Z1bmN0aW9uKGFbc10ucHJvbWlzZSk/YVtzXS5wcm9taXNlKCkuZG9uZShsKHMsbyxhKSkuZmFpbChjLnJlamVjdCkucHJvZ3Jlc3MobChzLG4sZSkpOi0taDtyZXR1cm4gaHx8Yy5yZXNvbHZlV2l0aChvLGEpLGMucHJvbWlzZSgpfX0pfSxmdW5jdGlvbih0LGUsbil7ZnVuY3Rpb24gaSh0KXt2YXIgZT1zW3RdPXt9O3JldHVybiByLmVhY2godC5zcGxpdChvKSxmdW5jdGlvbih0LG4pe2Vbbl09ITB9KSxlfXZhciByPXQuZXhwb3J0cz1uKDUpLG89L1xccysvLHM9e307ci5DYWxsYmFja3M9ZnVuY3Rpb24odCl7dD1cInN0cmluZ1wiPT10eXBlb2YgdD9zW3RdfHxpKHQpOnIuZXh0ZW5kKHt9LHQpO3ZhciBlLG4sbyxhLHUsaCxjPVtdLGw9IXQub25jZSYmW10sZj1mdW5jdGlvbihpKXtmb3IoZT10Lm1lbW9yeSYmaSxuPSEwLGg9YXx8MCxhPTAsdT1jLmxlbmd0aCxvPSEwO2MmJnU+aDtoKyspaWYoY1toXS5hcHBseShpWzBdLGlbMV0pPT09ITEmJnQuc3RvcE9uRmFsc2Upe2U9ITE7YnJlYWt9bz0hMSxjJiYobD9sLmxlbmd0aCYmZihsLnNoaWZ0KCkpOmU/Yz1bXTpkLmRpc2FibGUoKSl9LGQ9e2FkZDpmdW5jdGlvbigpe2lmKGMpe3ZhciBuPWMubGVuZ3RoOyFmdW5jdGlvbiBpKGUpe3IuZWFjaChlLGZ1bmN0aW9uKGUsbil7dmFyIG89ci50eXBlKG4pO1wiZnVuY3Rpb25cIj09PW8/dC51bmlxdWUmJmQuaGFzKG4pfHxjLnB1c2gobik6biYmbi5sZW5ndGgmJlwic3RyaW5nXCIhPT1vJiZpKG4pfSl9KGFyZ3VtZW50cyksbz91PWMubGVuZ3RoOmUmJihhPW4sZihlKSl9cmV0dXJuIHRoaXN9LHJlbW92ZTpmdW5jdGlvbigpe3JldHVybiBjJiZyLmVhY2goYXJndW1lbnRzLGZ1bmN0aW9uKHQsZSl7Zm9yKHZhciBuOyhuPXIuaW5BcnJheShlLGMsbikpPi0xOyljLnNwbGljZShuLDEpLG8mJih1Pj1uJiZ1LS0saD49biYmaC0tKX0pLHRoaXN9LGhhczpmdW5jdGlvbih0KXtyZXR1cm4gci5pbkFycmF5KHQsYyk+LTF9LGVtcHR5OmZ1bmN0aW9uKCl7cmV0dXJuIGM9W10sdGhpc30sZGlzYWJsZTpmdW5jdGlvbigpe3JldHVybiBjPWw9ZT12b2lkIDAsdGhpc30sZGlzYWJsZWQ6ZnVuY3Rpb24oKXtyZXR1cm4hY30sbG9jazpmdW5jdGlvbigpe3JldHVybiBsPXZvaWQgMCxlfHxkLmRpc2FibGUoKSx0aGlzfSxsb2NrZWQ6ZnVuY3Rpb24oKXtyZXR1cm4hbH0sZmlyZVdpdGg6ZnVuY3Rpb24odCxlKXtyZXR1cm4gZT1lfHxbXSxlPVt0LGUuc2xpY2U/ZS5zbGljZSgpOmVdLCFjfHxuJiYhbHx8KG8/bC5wdXNoKGUpOmYoZSkpLHRoaXN9LGZpcmU6ZnVuY3Rpb24oKXtyZXR1cm4gZC5maXJlV2l0aCh0aGlzLGFyZ3VtZW50cyksdGhpc30sZmlyZWQ6ZnVuY3Rpb24oKXtyZXR1cm4hIW59fTtyZXR1cm4gZH19LGZ1bmN0aW9uKHQsZSl7ZnVuY3Rpb24gbih0KXtyZXR1cm4gbnVsbD09dD9TdHJpbmcodCk6Y1toLmNhbGwodCldfHxcIm9iamVjdFwifWZ1bmN0aW9uIGkodCl7cmV0dXJuXCJmdW5jdGlvblwiPT09dS50eXBlKHQpfWZ1bmN0aW9uIHIodCl7cmV0dXJuXCJhcnJheVwiPT09dS50eXBlKHQpfWZ1bmN0aW9uIG8odCxlLG4pe3ZhciByLG89MCxzPXQubGVuZ3RoLGE9dm9pZCAwPT09c3x8aSh0KTtpZihuKWlmKGEpe2ZvcihyIGluIHQpaWYoZS5hcHBseSh0W3JdLG4pPT09ITEpYnJlYWt9ZWxzZSBmb3IoO3M+byYmZS5hcHBseSh0W28rK10sbikhPT0hMTspO2Vsc2UgaWYoYSl7Zm9yKHIgaW4gdClpZihlLmNhbGwodFtyXSxyLHRbcl0pPT09ITEpYnJlYWt9ZWxzZSBmb3IoO3M+byYmZS5jYWxsKHRbb10sbyx0W28rK10pIT09ITE7KTtyZXR1cm4gdH1mdW5jdGlvbiBzKHQpe3JldHVybiEoIXR8fFwib2JqZWN0XCIhPT11LnR5cGUodCkpfWZ1bmN0aW9uIGEoKXt2YXIgdCxlLG4saSxyLG8scz1hcmd1bWVudHNbMF18fHt9LGE9MSxoPWFyZ3VtZW50cy5sZW5ndGgsYz0hMTtmb3IoXCJib29sZWFuXCI9PXR5cGVvZiBzJiYoYz1zLHM9YXJndW1lbnRzWzFdfHx7fSxhPTIpLFwib2JqZWN0XCI9PXR5cGVvZiBzfHx1LmlzRnVuY3Rpb24ocyl8fChzPXt9KSxoPT09YSYmKHM9dGhpcywtLWEpO2g+YTthKyspaWYobnVsbCE9KHQ9YXJndW1lbnRzW2FdKSlmb3IoZSBpbiB0KW49c1tlXSxpPXRbZV0scyE9PWkmJihjJiZpJiYodS5pc1BsYWluT2JqZWN0KGkpfHwocj11LmlzQXJyYXkoaSkpKT8ocj8ocj0hMSxvPW4mJnUuaXNBcnJheShuKT9uOltdKTpvPW4mJnUuaXNQbGFpbk9iamVjdChuKT9uOnt9LHNbZV09dS5leHRlbmQoYyxvLGkpKTp2b2lkIDAhPT1pJiYoc1tlXT1pKSk7cmV0dXJuIHN9dmFyIHU9dC5leHBvcnRzPXt0eXBlOm4saXNBcnJheTpyLGlzRnVuY3Rpb246aSxpc1BsYWluT2JqZWN0OnMsZWFjaDpvLGV4dGVuZDphLG5vb3A6ZnVuY3Rpb24oKXt9fSxoPU9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcsYz17fTtcIkJvb2xlYW4gTnVtYmVyIFN0cmluZyBGdW5jdGlvbiBBcnJheSBEYXRlIFJlZ0V4cCBPYmplY3RcIi5zcGxpdChcIiBcIikuZm9yRWFjaChmdW5jdGlvbih0KXtjW1wiW29iamVjdCBcIit0K1wiXVwiXT10LnRvTG93ZXJDYXNlKCl9KX0sZnVuY3Rpb24odCxlLG4pe2Z1bmN0aW9uIGkodCl7dGhpcy5saXN0ZW5UaW1lKz10LmZyb20tdGhpcy5jdXJyZW50VGltZSx0aGlzLmN1cnJlbnRUaW1lPXQudG99ZnVuY3Rpb24gcih0KXt0aGlzLmxpc3RlblRpbWUrPXQucG9zaXRpb24tdGhpcy5jdXJyZW50VGltZSx0aGlzLmN1cnJlbnRUaW1lPXQucG9zaXRpb259ZnVuY3Rpb24gbyh0KXt0aGlzLmN1cnJlbnRUaW1lPXQucG9zaXRpb259dmFyIHMsYT1uKDcpO3M9dC5leHBvcnRzPWZ1bmN0aW9uKHQpe3RoaXMuc2NBdWRpbz10LHRoaXMubGlzdGVuVGltZT0wLHRoaXMuY3VycmVudFRpbWU9MCx0aGlzLnNjQXVkaW8ub24oYS5TRUVLLGksdGhpcykub24oYS5QTEFZX1NUQVJULG8sdGhpcykub24oYS5QQVVTRSxyLHRoaXMpfSxzLnByb3RvdHlwZT17Y29uc3RydWN0b3I6cyxnZXRMaXN0ZW5UaW1lOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubGlzdGVuVGltZSt0aGlzLnNjQXVkaW8uY3VycmVudFRpbWUoKS10aGlzLmN1cnJlbnRUaW1lfX19LGZ1bmN0aW9uKHQsZSl7dmFyIG49e0NSRUFURUQ6XCJjcmVhdGVkXCIsU1RBVEVfQ0hBTkdFOlwic3RhdGUtY2hhbmdlXCIsREVTVFJPWUVEOlwiZGVzdHJveWVkXCIsUExBWTpcInBsYXlcIixQTEFZX1NUQVJUOlwicGxheS1zdGFydFwiLFBMQVlfUkVTVU1FOlwicGxheS1yZXN1bWVcIixNRVRBREFUQTpcIm1ldGFkYXRhXCIsUEFVU0U6XCJwYXVzZVwiLEZJTklTSDpcImZpbmlzaFwiLFJFU0VUOlwicmVzZXRcIixTRUVLOlwic2Vla1wiLFNFRUtFRDpcInNlZWtlZFwiLEdFT19CTE9DS0VEOlwiZ2VvX2Jsb2NrZWRcIixCVUZGRVJSSU5HX1NUQVJUOlwiYnVmZmVyaW5nX3N0YXJ0XCIsQlVGRkVSUklOR19FTkQ6XCJidWZmZXJpbmdfZW5kXCIsRkxBU0hfTk9UX0xPQURFRDpcImZsYXNoX25vdF9sb2FkZWRcIixGTEFTSF9CTE9DSzpcImZsYXNoX2Jsb2NrZWRcIixGTEFTSF9VTkJMT0NLOlwiZmxhc2hfdW5ibG9ja2VkXCIsQVVESU9fRVJST1I6XCJhdWRpb19lcnJvclwiLFRJTUU6XCJ0aW1lXCIsTk9fU1RSRUFNUzpcIm5vX3N0cmVhbXNcIixTVFJFQU1TOlwic3RyZWFtc1wiLE5PX1BST1RPQ09MOlwibm9fcHJvdG9jb2xcIixOT19DT05ORUNUSU9OOlwibm9fY29ubmVjdGlvblwiLFJFR0lTVEVSRUQ6XCJyZWdpc3RlcmVkXCIsT05MSU5FOlwib25saW5lXCIsT0ZGTElORTpcIm9mZmxpbmVcIn07dC5leHBvcnRzPW59LGZ1bmN0aW9uKHQsZSxuKXtmdW5jdGlvbiBpKCl7cmV0dXJuIHRoaXMuc2NBdWRpby5jb250cm9sbGVyP3RoaXMuY29udHJvbGxlcj92b2lkIG0ud2FybihcIiglcykgU2V0dXAgd2FzIGNhbGxlZCB3aGlsZSBpdCB3YXMgYWxyZWFkeSBpbml0aWFsaXplZCAocmV0dXJuZWQgd2l0aCBhIG5vLW9wKVwiLHRoaXMuc2NBdWRpby5nZXRJZCgpKToobShcIiglcykgSW5pdGlhbGl6ZWRcIix0aGlzLnNjQXVkaW8uZ2V0SWQoKSksdGhpcy5jb250cm9sbGVyPXRoaXMuc2NBdWRpby5jb250cm9sbGVyLHRoaXMucHJvdG9jb2w9dGhpcy5zY0F1ZGlvLnN0cmVhbUluZm8ucHJvdG9jb2wsdm9pZCh0aGlzLmhvc3Q9Uy5nZXRVcmxIb3N0KHRoaXMuc2NBdWRpby5zdHJlYW1JbmZvLnVybCkpKTp2b2lkIG0ud2FybihcIkNhbsK0dCBpbml0aWFsaXplIHdoZW4gY29udHJvbGxlciBpcyBudWxsXCIpfWZ1bmN0aW9uIHIoKXt0aGlzLmNvbnRyb2xsZXImJihtKFwiKCVzKSBSZXNldFwiLHRoaXMuc2NBdWRpby5nZXRJZCgpKSx0aGlzLmNvbnRyb2xsZXI9dGhpcy5wcm90b2NvbD10aGlzLmhvc3Q9bnVsbCx0aGlzLnRpbWVUb1BsYXlNZWFzdXJlZD0hMSl9ZnVuY3Rpb24gbyh0KXt2YXIgZT10aGlzLnNjQXVkaW8uZ2V0QXVkaW9NYW5hZ2VyU3RhdGVzKCk7dD09PWUuTE9BRElORz90aGlzLnRpbWVUb1BsYXlNZWFzdXJlZCYmZi5jYWxsKHRoaXMpOkEuaXNOdWxsKHRoaXMuYnVmZmVyaW5nU3RhcnRUaW1lKXx8ZC5jYWxsKHRoaXMpfWZ1bmN0aW9uIHMoKXt0aGlzLm1ldGFkYXRhTG9hZFN0YXJ0VGltZT1EYXRlLm5vdygpfWZ1bmN0aW9uIGEoKXtyZXR1cm4gQS5pc051bGwodGhpcy5tZXRhZGF0YUxvYWRTdGFydFRpbWUpP3ZvaWQgbS53YXJuKFwiKCVzKSBvbk1ldGFkYXRhRW5kIHdhcyBjYWxsZWQgd2l0aG91dCBvbk1ldGFkYXRhU3RhcnQgYmVpbmcgY2FsbGVkIGJlZm9yZS5cIix0aGlzLnNjQXVkaW8uZ2V0SWQoKSk6KHRoaXMubG9nKHt0eXBlOlwibWV0YWRhdGFcIixsYXRlbmN5OkRhdGUubm93KCktdGhpcy5tZXRhZGF0YUxvYWRTdGFydFRpbWV9KSx2b2lkKHRoaXMubWV0YWRhdGFMb2FkU3RhcnRUaW1lPW51bGwpKX1mdW5jdGlvbiB1KCl7dGhpcy5wbGF5Q2xpY2tUaW1lPURhdGUubm93KCl9ZnVuY3Rpb24gaCgpe2lmKCF0aGlzLnRpbWVUb1BsYXlNZWFzdXJlZCl7aWYoQS5pc051bGwodGhpcy5wbGF5Q2xpY2tUaW1lKSlyZXR1cm4gdm9pZCBtLndhcm4oXCIoJXMpIG9uUGxheVJlc3VtZSB3YXMgY2FsbGVkIHdpdGhvdXQgb25QbGF5U3RhcnQgYmVpbmcgY2FsbGVkIGJlZm9yZS5cIix0aGlzLnNjQXVkaW8uZ2V0SWQoKSk7dGhpcy5sb2coe3R5cGU6XCJwbGF5XCIsbGF0ZW5jeTpEYXRlLm5vdygpLXRoaXMucGxheUNsaWNrVGltZX0pLHRoaXMucGxheUNsaWNrVGltZT1udWxsLHRoaXMudGltZVRvUGxheU1lYXN1cmVkPSEwfX1mdW5jdGlvbiBjKCl7dGhpcy5zY0F1ZGlvLmlzUGF1c2VkKCl8fCh0aGlzLnNlZWtTdGFydFRpbWU9RGF0ZS5ub3coKSl9ZnVuY3Rpb24gbCgpe2lmKCF0aGlzLnNjQXVkaW8uaXNQYXVzZWQoKSl7aWYoQS5pc051bGwodGhpcy5zZWVrU3RhcnRUaW1lKSlyZXR1cm4gdm9pZCBtLndhcm4oXCIoJXMpIG9uU2Vla0VuZCB3YXMgY2FsbGVkIHdpdGhvdXQgb25TZWVrU3RhcnQgYmVpbmcgY2FsbGVkIGJlZm9yZS5cIix0aGlzLnNjQXVkaW8uZ2V0SWQoKSk7dGhpcy5sb2coe3R5cGU6XCJzZWVrXCIsbGF0ZW5jeTpEYXRlLm5vdygpLXRoaXMuc2Vla1N0YXJ0VGltZX0pLHRoaXMuc2Vla1N0YXJ0VGltZT1udWxsfX1mdW5jdGlvbiBmKCl7dGhpcy5idWZmZXJpbmdTdGFydFRpbWV8fCh0aGlzLmJ1ZmZlcmluZ1N0YXJ0VGltZT1EYXRlLm5vdygpKX1mdW5jdGlvbiBkKCl7cmV0dXJuIEEuaXNOdWxsKHRoaXMuYnVmZmVyaW5nU3RhcnRUaW1lKT92b2lkIG0ud2FybihcIiglcykgb25CdWZmZXJpbmdFbmQgd2FzIGNhbGxlZCB3aXRob3V0IG9uQnVmZmVyaW5nU3RhcnQgYmVpbmcgY2FsbGVkIGJlZm9yZS5cIix0aGlzLnNjQXVkaW8uZ2V0SWQoKSk6KHAuY2FsbCh0aGlzKSx2b2lkKHRoaXMuYnVmZmVyaW5nU3RhcnRUaW1lPW51bGwpKX1mdW5jdGlvbiBwKCl7QS5pc051bGwodGhpcy5idWZmZXJpbmdTdGFydFRpbWUpfHwoQS5pc051bGwodGhpcy5idWZmZXJpbmdUaW1lQWNjdW11bGF0ZWQpJiYodGhpcy5idWZmZXJpbmdUaW1lQWNjdW11bGF0ZWQ9MCksdGhpcy5idWZmZXJpbmdUaW1lQWNjdW11bGF0ZWQrPURhdGUubm93KCktdGhpcy5idWZmZXJpbmdTdGFydFRpbWUpfWZ1bmN0aW9uIGcoKXtwLmNhbGwodGhpcyksQS5pc051bGwodGhpcy5idWZmZXJpbmdUaW1lQWNjdW11bGF0ZWQpfHwodGhpcy5sb2coe3R5cGU6XCJidWZmZXJcIixsYXRlbmN5OnRoaXMuYnVmZmVyaW5nVGltZUFjY3VtdWxhdGVkfSksdGhpcy5idWZmZXJpbmdTdGFydFRpbWU9dGhpcy5idWZmZXJpbmdUaW1lQWNjdW11bGF0ZWQ9bnVsbCl9dmFyIF8sbSx5PW4oOSksdj1uKDcpLEU9bigxMCksUz1uKDEyKSxBPW4oMTMpO189dC5leHBvcnRzPWZ1bmN0aW9uKHQsZSl7dGhpcy5zY0F1ZGlvPXQsdGhpcy5sb2dGbj1lLHRoaXMuY29udHJvbGxlcj1udWxsLHRoaXMucmVzZXQoKSxtPW18fHkodC5vcHRpb25zLmRlYnVnLFwiYXVkaW9wZXJmXCIpLHQub24odi5DUkVBVEVELGksdGhpcykub24odi5SRVNFVCxyLHRoaXMpLm9uKHYuREVTVFJPWUVELHIsdGhpcykub24odi5TRUVLLGMsdGhpcykub24odi5TRUVLRUQsbCx0aGlzKS5vbih2LlBMQVksdSx0aGlzKS5vbih2LlBMQVlfU1RBUlQscyx0aGlzKS5vbih2LlBMQVlfUkVTVU1FLGgsdGhpcykub24odi5QQVVTRSxnLHRoaXMpLm9uKHYuRklOSVNILGcsdGhpcykub24odi5TVEFURV9DSEFOR0Usbyx0aGlzKS5vbih2Lk1FVEFEQVRBLGEsdGhpcyl9LEEuZXh0ZW5kKF8ucHJvdG90eXBlLEUse2NvbnN0cnVjdG9yOl8sbG9nOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmNvbnRyb2xsZXI/KEEuZXh0ZW5kKHQse3Byb3RvY29sOnRoaXMucHJvdG9jb2wsaG9zdDp0aGlzLmhvc3QscGxheWVydHlwZTp0aGlzLmNvbnRyb2xsZXIuZ2V0VHlwZSgpfSksbShcIiglcykgJXMgbGF0ZW5jeTogJWQgcHJvdG9jb2w6ICVzIGhvc3Q6ICVzIHBsYXllcnR5cGU6ICVzXCIsdGhpcy5zY0F1ZGlvLmdldElkKCksdC50eXBlLHQubGF0ZW5jeSx0LnByb3RvY29sLHQuaG9zdCx0LnBsYXllcnR5cGUpLHZvaWQgdGhpcy5sb2dGbih0KSk6dm9pZCBtLndhcm4oXCIoJXMpIE1vbml0b3IgbG9nIHdhcyBjYWxsZWQgd2hpbGUgY29udHJvbGxlciBpcyBudWxsIChyZXR1cm5lZCB3aXRoIGEgbm8tb3ApXCIsdGhpcy5zY0F1ZGlvLmdldElkKCkpfSxyZXNldDpmdW5jdGlvbigpe3RoaXMuYnVmZmVyaW5nU3RhcnRUaW1lPXRoaXMuYnVmZmVyaW5nVGltZUFjY3VtdWxhdGVkPXRoaXMucGxheUNsaWNrVGltZT10aGlzLnNlZWtTdGFydFRpbWU9dGhpcy5tZXRhZGF0YUxvYWRTdGFydFRpbWU9bnVsbCx0aGlzLnRpbWVUb1BsYXlNZWFzdXJlZD0hMX19KX0sZnVuY3Rpb24odCxlKXtmdW5jdGlvbiBuKCl7ZnVuY3Rpb24gdCh0LG4pe2Zvcih2YXIgaSxyPWFyZ3VtZW50cy5sZW5ndGgsbz1BcnJheShyPjI/ci0yOjApLHM9MjtyPnM7cysrKW9bcy0yXT1hcmd1bWVudHNbc107XCJzdHJpbmdcIj09dHlwZW9mIG4/bj1cIiBcIituOihvLnVuc2hpZnQobiksbj1cIlwiKSwoaT13aW5kb3cuY29uc29sZSlbdF0uYXBwbHkoaSxbZSgpK1wiIHxcIitjK1wiJWNcIituXS5jb25jYXQobCxvKSl9ZnVuY3Rpb24gZSgpe3ZhciB0PW5ldyBEYXRlLGU9bnVsbD09PWg/MDp0LWg7cmV0dXJuIGg9K3QsXCIlY1wiK3IodC5nZXRIb3VycygpKStcIjpcIityKHQuZ2V0TWludXRlcygpKStcIjpcIityKHQuZ2V0U2Vjb25kcygpKStcIi5cIitpKHQuZ2V0TWlsbGlzZWNvbmRzKCksXCIwXCIsMykrXCIlYyAoJWNcIitpKFwiK1wiK2UrXCJtc1wiLFwiIFwiLDgpK1wiJWMpXCJ9dmFyIG49YXJndW1lbnRzLmxlbmd0aDw9MHx8dm9pZCAwPT09YXJndW1lbnRzWzBdPyEwOmFyZ3VtZW50c1swXSxvPWFyZ3VtZW50cy5sZW5ndGg8PTF8fHZvaWQgMD09PWFyZ3VtZW50c1sxXT9cIlwiOmFyZ3VtZW50c1sxXTtpZighbilyZXR1cm4gczt2YXIgaD1udWxsLGM9YShvKSxsPVtcImNvbG9yOiBncmVlblwiLFwiY29sb3I6IGdyZXlcIixcImNvbG9yOiBibHVlXCIsXCJjb2xvcjogZ3JleVwiLHUobyksXCJcIl0sZj10LmJpbmQobnVsbCxcImxvZ1wiKTtyZXR1cm4gZi5sb2c9ZixbXCJpbmZvXCIsXCJ3YXJuXCIsXCJlcnJvclwiXS5mb3JFYWNoKGZ1bmN0aW9uKGUpe2ZbZV09dC5iaW5kKG51bGwsZSl9KSxmfWZ1bmN0aW9uIGkodCxlLG4pe3JldHVybiBvKGUsbi0oXCJcIit0KS5sZW5ndGgpK3R9ZnVuY3Rpb24gcih0KXtyZXR1cm4gaSh0LFwiMFwiLDIpfWZ1bmN0aW9uIG8odCxlKXtyZXR1cm4gZT4wP25ldyBBcnJheShlKzEpLmpvaW4odCk6XCJcIn1mdW5jdGlvbiBzKCl7fWZ1bmN0aW9uIGEodCl7cmV0dXJuIHQ/XCIlY1wiK3Q6XCIlY1wifXQuZXhwb3J0cz1uLHMubG9nPXMuaW5mbz1zLndhcm49cy5lcnJvcj1zO3ZhciB1PWZ1bmN0aW9uKCl7dmFyIHQ9W1wiIzUxNjEzQ1wiLFwiIzQ0Nzg0OFwiLFwiIzQ4NkU1RlwiLFwiIzc4NzQ0NFwiLFwiIzZFNjY0RVwiXSxlPTA7cmV0dXJuIGZ1bmN0aW9uKG4pe3JldHVybiBuP1wiYmFja2dyb3VuZC1jb2xvcjpcIit0W2UrKyV0Lmxlbmd0aF0rXCI7Y29sb3I6I2ZmZjtib3JkZXItcmFkaXVzOjNweDtwYWRkaW5nOjJweCA0cHg7Zm9udC1mYW1pbHk6c2Fucy1zZXJpZjt0ZXh0LXRyYW5zZm9ybTp1cHBlcmNhc2U7Zm9udC1zaXplOjlweDttYXJnaW46MCA0cHhcIjpcIlwifX0oKX0sZnVuY3Rpb24odCxlLG4pe3QuZXhwb3J0cz1uKDExKX0sZnVuY3Rpb24odCxlLG4peyFmdW5jdGlvbigpe2Z1bmN0aW9uIG4oKXtyZXR1cm57a2V5czpPYmplY3Qua2V5c3x8ZnVuY3Rpb24odCl7aWYoXCJvYmplY3RcIiE9dHlwZW9mIHQmJlwiZnVuY3Rpb25cIiE9dHlwZW9mIHR8fG51bGw9PT10KXRocm93IG5ldyBUeXBlRXJyb3IoXCJrZXlzKCkgY2FsbGVkIG9uIGEgbm9uLW9iamVjdFwiKTt2YXIgZSxuPVtdO2ZvcihlIGluIHQpdC5oYXNPd25Qcm9wZXJ0eShlKSYmKG5bbi5sZW5ndGhdPWUpO3JldHVybiBufSx1bmlxdWVJZDpmdW5jdGlvbih0KXt2YXIgZT0rK2ErXCJcIjtyZXR1cm4gdD90K2U6ZX0saGFzOmZ1bmN0aW9uKHQsZSl7cmV0dXJuIG8uY2FsbCh0LGUpfSxlYWNoOmZ1bmN0aW9uKHQsZSxuKXtpZihudWxsIT10KWlmKHImJnQuZm9yRWFjaD09PXIpdC5mb3JFYWNoKGUsbik7ZWxzZSBpZih0Lmxlbmd0aD09PSt0Lmxlbmd0aClmb3IodmFyIGk9MCxvPXQubGVuZ3RoO28+aTtpKyspZS5jYWxsKG4sdFtpXSxpLHQpO2Vsc2UgZm9yKHZhciBzIGluIHQpdGhpcy5oYXModCxzKSYmZS5jYWxsKG4sdFtzXSxzLHQpfSxvbmNlOmZ1bmN0aW9uKHQpe3ZhciBlLG49ITE7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIG4/ZToobj0hMCxlPXQuYXBwbHkodGhpcyxhcmd1bWVudHMpLHQ9bnVsbCxlKX19fX12YXIgaSxyPUFycmF5LnByb3RvdHlwZS5mb3JFYWNoLG89T2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eSxzPUFycmF5LnByb3RvdHlwZS5zbGljZSxhPTAsdT1uKCk7aT17b246ZnVuY3Rpb24odCxlLG4pe2lmKCFjKHRoaXMsXCJvblwiLHQsW2Usbl0pfHwhZSlyZXR1cm4gdGhpczt0aGlzLl9ldmVudHN8fCh0aGlzLl9ldmVudHM9e30pO3ZhciBpPXRoaXMuX2V2ZW50c1t0XXx8KHRoaXMuX2V2ZW50c1t0XT1bXSk7cmV0dXJuIGkucHVzaCh7Y2FsbGJhY2s6ZSxjb250ZXh0Om4sY3R4Om58fHRoaXN9KSx0aGlzfSxvbmNlOmZ1bmN0aW9uKHQsZSxuKXtpZighYyh0aGlzLFwib25jZVwiLHQsW2Usbl0pfHwhZSlyZXR1cm4gdGhpczt2YXIgaT10aGlzLHI9dS5vbmNlKGZ1bmN0aW9uKCl7aS5vZmYodCxyKSxlLmFwcGx5KHRoaXMsYXJndW1lbnRzKX0pO3JldHVybiByLl9jYWxsYmFjaz1lLHRoaXMub24odCxyLG4pfSxvZmY6ZnVuY3Rpb24odCxlLG4pe3ZhciBpLHIsbyxzLGEsaCxsLGY7aWYoIXRoaXMuX2V2ZW50c3x8IWModGhpcyxcIm9mZlwiLHQsW2Usbl0pKXJldHVybiB0aGlzO2lmKCF0JiYhZSYmIW4pcmV0dXJuIHRoaXMuX2V2ZW50cz17fSx0aGlzO2ZvcihzPXQ/W3RdOnUua2V5cyh0aGlzLl9ldmVudHMpLGE9MCxoPXMubGVuZ3RoO2g+YTthKyspaWYodD1zW2FdLG89dGhpcy5fZXZlbnRzW3RdKXtpZih0aGlzLl9ldmVudHNbdF09aT1bXSxlfHxuKWZvcihsPTAsZj1vLmxlbmd0aDtmPmw7bCsrKXI9b1tsXSwoZSYmZSE9PXIuY2FsbGJhY2smJmUhPT1yLmNhbGxiYWNrLl9jYWxsYmFja3x8biYmbiE9PXIuY29udGV4dCkmJmkucHVzaChyKTtpLmxlbmd0aHx8ZGVsZXRlIHRoaXMuX2V2ZW50c1t0XX1yZXR1cm4gdGhpc30sdHJpZ2dlcjpmdW5jdGlvbih0KXtpZighdGhpcy5fZXZlbnRzKXJldHVybiB0aGlzO3ZhciBlPXMuY2FsbChhcmd1bWVudHMsMSk7aWYoIWModGhpcyxcInRyaWdnZXJcIix0LGUpKXJldHVybiB0aGlzO3ZhciBuPXRoaXMuX2V2ZW50c1t0XSxpPXRoaXMuX2V2ZW50cy5hbGw7cmV0dXJuIG4mJmwobixlKSxpJiZsKGksYXJndW1lbnRzKSx0aGlzfSxzdG9wTGlzdGVuaW5nOmZ1bmN0aW9uKHQsZSxuKXt2YXIgaT10aGlzLl9saXN0ZW5lcnM7aWYoIWkpcmV0dXJuIHRoaXM7dmFyIHI9IWUmJiFuO1wib2JqZWN0XCI9PXR5cGVvZiBlJiYobj10aGlzKSx0JiYoKGk9e30pW3QuX2xpc3RlbmVySWRdPXQpO2Zvcih2YXIgbyBpbiBpKWlbb10ub2ZmKGUsbix0aGlzKSxyJiZkZWxldGUgdGhpcy5fbGlzdGVuZXJzW29dO3JldHVybiB0aGlzfX07dmFyIGg9L1xccysvLGM9ZnVuY3Rpb24odCxlLG4saSl7aWYoIW4pcmV0dXJuITA7aWYoXCJvYmplY3RcIj09dHlwZW9mIG4pe2Zvcih2YXIgciBpbiBuKXRbZV0uYXBwbHkodCxbcixuW3JdXS5jb25jYXQoaSkpO3JldHVybiExfWlmKGgudGVzdChuKSl7Zm9yKHZhciBvPW4uc3BsaXQoaCkscz0wLGE9by5sZW5ndGg7YT5zO3MrKyl0W2VdLmFwcGx5KHQsW29bc11dLmNvbmNhdChpKSk7cmV0dXJuITF9cmV0dXJuITB9LGw9ZnVuY3Rpb24odCxlKXt2YXIgbixpPS0xLHI9dC5sZW5ndGgsbz1lWzBdLHM9ZVsxXSxhPWVbMl07c3dpdGNoKGUubGVuZ3RoKXtjYXNlIDA6Zm9yKDsrK2k8cjspKG49dFtpXSkuY2FsbGJhY2suY2FsbChuLmN0eCk7cmV0dXJuO2Nhc2UgMTpmb3IoOysraTxyOykobj10W2ldKS5jYWxsYmFjay5jYWxsKG4uY3R4LG8pO3JldHVybjtjYXNlIDI6Zm9yKDsrK2k8cjspKG49dFtpXSkuY2FsbGJhY2suY2FsbChuLmN0eCxvLHMpO3JldHVybjtjYXNlIDM6Zm9yKDsrK2k8cjspKG49dFtpXSkuY2FsbGJhY2suY2FsbChuLmN0eCxvLHMsYSk7cmV0dXJuO2RlZmF1bHQ6Zm9yKDsrK2k8cjspKG49dFtpXSkuY2FsbGJhY2suYXBwbHkobi5jdHgsZSl9fSxmPXtsaXN0ZW5UbzpcIm9uXCIsbGlzdGVuVG9PbmNlOlwib25jZVwifTt1LmVhY2goZixmdW5jdGlvbih0LGUpe2lbZV09ZnVuY3Rpb24oZSxuLGkpe3ZhciByPXRoaXMuX2xpc3RlbmVyc3x8KHRoaXMuX2xpc3RlbmVycz17fSksbz1lLl9saXN0ZW5lcklkfHwoZS5fbGlzdGVuZXJJZD11LnVuaXF1ZUlkKFwibFwiKSk7cmV0dXJuIHJbb109ZSxcIm9iamVjdFwiPT10eXBlb2YgbiYmKGk9dGhpcyksZVt0XShuLGksdGhpcyksdGhpc319KSxpLmJpbmQ9aS5vbixpLnVuYmluZD1pLm9mZixpLm1peGluPWZ1bmN0aW9uKHQpe3ZhciBlPVtcIm9uXCIsXCJvbmNlXCIsXCJvZmZcIixcInRyaWdnZXJcIixcInN0b3BMaXN0ZW5pbmdcIixcImxpc3RlblRvXCIsXCJsaXN0ZW5Ub09uY2VcIixcImJpbmRcIixcInVuYmluZFwiXTtyZXR1cm4gdS5lYWNoKGUsZnVuY3Rpb24oZSl7dFtlXT10aGlzW2VdfSx0aGlzKSx0fSxcInVuZGVmaW5lZFwiIT10eXBlb2YgdCYmdC5leHBvcnRzJiYoZT10LmV4cG9ydHM9aSksZS5CYWNrYm9uZUV2ZW50cz1pfSh0aGlzKX0sZnVuY3Rpb24odCxlKXt2YXIgbj17Z2V0VXJsUGFyYW1zOmZ1bmN0aW9uKHQpe3ZhciBlPXt9LG49dC5pbmRleE9mKFwiP1wiKTtyZXR1cm4gbj4tMSYmdC5zdWJzdHIobisxKS5zcGxpdChcIiZcIikuZm9yRWFjaChmdW5jdGlvbih0KXt2YXIgbj10LnNwbGl0KFwiPVwiKTtlW25bMF1dPW5bMV19KSxlfSxnZXRVcmxIb3N0OmZ1bmN0aW9uKHQpe3ZhciBlLG49dC5zcGxpdChcIi8vXCIpO3JldHVybiBlPW5bMF09PT10P25bMF0uc3BsaXQoXCIvXCIpWzBdOm5bMV0/blsxXS5zcGxpdChcIi9cIilbMF06XCJcIn19O3QuZXhwb3J0cz1ufSxmdW5jdGlvbih0LGUpe3ZhciBuPXtleHRlbmQ6ZnVuY3Rpb24odCl7dmFyIGU9QXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLDEpO3JldHVybiBlLmZvckVhY2goZnVuY3Rpb24oZSl7aWYoZSlmb3IodmFyIG4gaW4gZSllLmhhc093blByb3BlcnR5KG4pJiYodFtuXT1lW25dKX0pLHR9LGVhY2g6ZnVuY3Rpb24odCxlLG4pe09iamVjdC5rZXlzKHQpLmZvckVhY2goZnVuY3Rpb24oaSl7ZS5jYWxsKG58fG51bGwsdFtpXSxpKX0pfSx3aXRob3V0OmZ1bmN0aW9uKHQsZSl7dmFyIG49dC5pbmRleE9mKGUpO24+LTEmJnQuc3BsaWNlKG4sMSl9LHJlc3VsdDpmdW5jdGlvbih0KXt2YXIgZT10O3JldHVybiBuLmlzRnVuY3Rpb24oZSkmJihlPXQoKSksZX0saXNGdW5jdGlvbjpmdW5jdGlvbih0KXtyZXR1cm5cImZ1bmN0aW9uXCI9PXR5cGVvZiB0fSxhZnRlcjpmdW5jdGlvbih0LGUpe3JldHVybiBmdW5jdGlvbigpe3JldHVybi0tdDwxP2UuYXBwbHkodGhpcyxhcmd1bWVudHMpOnZvaWQgMH19LGlzTnVsbDpmdW5jdGlvbih0KXtyZXR1cm4gbnVsbD09PXR9LG9uY2U6ZnVuY3Rpb24odCl7dmFyIGUsbj0hMTtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gbj9lOihuPSEwLHZvaWQoZT10LmFwcGx5KHRoaXMsYXJndW1lbnRzKSkpfX19O3QuZXhwb3J0cz1ufSxmdW5jdGlvbih0LGUpe3ZhciBuPXtBQUM6XCJhYWNcIixNUDM6XCJtcDNcIixPR0c6XCJvZ2dcIixPUFVTOlwib3B1c1wiLFdBVjpcIndhdlwifTt0LmV4cG9ydHM9bn0sZnVuY3Rpb24odCxlKXt2YXIgbj17SFRUUDpcImh0dHBcIixSVE1QOlwicnRtcFwiLEhMUzpcImhsc1wifTt0LmV4cG9ydHM9bn0sZnVuY3Rpb24odCxlLG4pe2Z1bmN0aW9uIGkodCl7cmV0dXJuIGguc3VwcG9ydHNNZWRpYVNvdXJjZUV4dGVuc2lvbnMoKSYmdC5tZWRpYVNvdXJjZUVuYWJsZWQmJihoLmlzQ2hyb21lKCkmJmguZ2V0Q2hyb21lVmVyc2lvbigpPj0zNXx8aC5pc0ZpcmVmb3goKSYmdC5tc2VGaXJlZm94fHxoLmlzU2FmYXJpKCkmJnQubXNlU2FmYXJpKX1mdW5jdGlvbiByKHQpe3JldHVybiBmdW5jdGlvbihlKXt2YXIgbj0hMTtzd2l0Y2goZSl7Y2FzZSB1LlJUTVA6bj1oLnN1cHBvcnRzRmxhc2goKTticmVhaztjYXNlIHUuSFRUUDpuPWguc3VwcG9ydHNIVE1MNUF1ZGlvKCl8fGguc3VwcG9ydHNGbGFzaCgpO2JyZWFrO2Nhc2UgdS5ITFM6bj1pKHQpfXJldHVybiBufX1mdW5jdGlvbiBvKHQpe3JldHVybiBoLmlzU2FmYXJpKCl8fGguaXNGaXJlZm94KCk/W3UuSExTLHUuSFRUUCx1LlJUTVBdOnR9ZnVuY3Rpb24gcyh0KXt0LnByb3RvY29scz1vKHQucHJvdG9jb2xzKS5maWx0ZXIocih0KSl9dmFyIGEsdT1uKDE1KSxoPW4oMTcpO2E9e3ByaW9yaXRpemVBbmRGaWx0ZXI6c30sdC5leHBvcnRzPWF9LGZ1bmN0aW9uKHQsZSl7ZnVuY3Rpb24gbih0KXtyZXR1cm4gdC50ZXN0KHdpbmRvdy5uYXZpZ2F0b3IudXNlckFnZW50LnRvTG93ZXJDYXNlKCkpfWZ1bmN0aW9uIGkodCxlKXt0cnl7cmV0dXJuIHdpbmRvdy5uYXZpZ2F0b3IudXNlckFnZW50LnRvTG93ZXJDYXNlKCkubWF0Y2godClbZV19Y2F0Y2gobil7cmV0dXJuIG51bGx9fWZ1bmN0aW9uIHIoKXt0cnl7cmV0dXJuIHBhcnNlSW50KGkoL2Nocm9tKGV8aXVtKVxcLyhbMC05XSspXFwuLywyKSwxMCl9Y2F0Y2godCl7cmV0dXJuIE5hTn19ZnVuY3Rpb24gbygpe3JldHVybiFoKCkmJm4oL3NhZmFyaS8pfWZ1bmN0aW9uIHMoKXtyZXR1cm4gbygpJiZuKC92ZXJzaW9uXFwvN1xcLjEvKX1mdW5jdGlvbiBhKCl7cmV0dXJuIG8oKSYmbigvdmVyc2lvblxcLzgvKSYmIW4oL3ZlcnNpb25cXC84MC8pfWZ1bmN0aW9uIHUoKXtyZXR1cm4gbygpJiZuKC92ZXJzaW9uXFwvOVxcLi8pfWZ1bmN0aW9uIGgoKXtyZXR1cm4gbigvY2hyb20oZXxpdW0pLyl9ZnVuY3Rpb24gYygpe3JldHVybiBuKC9maXJlZm94Lyl9ZnVuY3Rpb24gbCgpe3JldHVybiEhd2luZG93Lk1lZGlhU291cmNlJiYod2luZG93Lk1lZGlhU291cmNlLmlzVHlwZVN1cHBvcnRlZChcImF1ZGlvL21wZWdcIil8fHdpbmRvdy5NZWRpYVNvdXJjZS5pc1R5cGVTdXBwb3J0ZWQoXCJhdWRpby9tcDRcIikpfWZ1bmN0aW9uIGYoKXt0cnl7cmV0dXJuIHdpbmRvdy5oYXNPd25Qcm9wZXJ0eShcIkF1ZGlvXCIpJiYhIShuZXcgd2luZG93LkF1ZGlvKS5jYW5QbGF5VHlwZShcImF1ZGlvL21wZWdcIil9Y2F0Y2godCl7cmV0dXJuITF9fWZ1bmN0aW9uIGQoKXt0cnl7dmFyIHQ9bygpJiZuKC92ZXJzaW9uXFwvNVxcLjAvKSxlPXdpbmRvdy5oYXNPd25Qcm9wZXJ0eShcIkF1ZGlvXCIpJiYoISEobmV3IHdpbmRvdy5BdWRpbykuY2FuUGxheVR5cGUoJ2F1ZGlvL3gtbXBlZ1VSTDsgY29kZWNzPVwibXAzXCInKXx8ISEobmV3IHdpbmRvdy5BdWRpbykuY2FuUGxheVR5cGUoJ3ZuZC5hcHBsZS5tcGVnVVJMOyBjb2RlY3M9XCJtcDNcIicpKTtyZXR1cm4hdCYmZX1jYXRjaChpKXtyZXR1cm4hMX19ZnVuY3Rpb24gcCgpe3JldHVybiBfKGcoKSk+PXl9ZnVuY3Rpb24gZygpe3ZhciB0LGUsbixpO2lmKFwidW5kZWZpbmVkXCIhPXR5cGVvZiB3aW5kb3cuQWN0aXZlWE9iamVjdCl0cnl7aT1uZXcgd2luZG93LkFjdGl2ZVhPYmplY3QoXCJTaG9ja3dhdmVGbGFzaC5TaG9ja3dhdmVGbGFzaFwiKSxpJiYodD1pLkdldFZhcmlhYmxlKFwiJHZlcnNpb25cIikpfWNhdGNoKHIpe3Q9bnVsbH1lbHNlIHdpbmRvdy5uYXZpZ2F0b3ImJndpbmRvdy5uYXZpZ2F0b3IucGx1Z2lucyYmd2luZG93Lm5hdmlnYXRvci5wbHVnaW5zLmxlbmd0aD4wJiYobj1cImFwcGxpY2F0aW9uL3gtc2hvY2t3YXZlLWZsYXNoXCIsZT13aW5kb3cubmF2aWdhdG9yLm1pbWVUeXBlcyxlJiZlW25dJiZlW25dLmVuYWJsZWRQbHVnaW4mJmVbbl0uZW5hYmxlZFBsdWdpbi5kZXNjcmlwdGlvbiYmKHQ9ZVtuXS5lbmFibGVkUGx1Z2luLmRlc2NyaXB0aW9uKSk7cmV0dXJuIHR9ZnVuY3Rpb24gXyh0KXtpZighdClyZXR1cm4gMDt2YXIgZT10Lm1hdGNoKC9cXGRcXFMrLylbMF0ucmVwbGFjZSgvLC9nLFwiLlwiKS5zcGxpdChcIi5cIik7cmV0dXJuIHBhcnNlRmxvYXQoW2VbMF0sZVsxXV0uam9pbihcIi5cIikpfHwwfXZhciBtLHk9OTttPXtmbGFzaFBsdWdpbjpnLGlzU2FmYXJpOm8saXNTYWZhcmk3MTpzLGlzU2FmYXJpODphLGlzU2FmYXJpOTp1LGlzQ2hyb21lOmgsZ2V0Q2hyb21lVmVyc2lvbjpyLGlzRmlyZWZveDpjLHN1cHBvcnRzTmF0aXZlSExTQXVkaW86ZCxzdXBwb3J0c0hUTUw1QXVkaW86ZixzdXBwb3J0c0ZsYXNoOnAsc3VwcG9ydHNNZWRpYVNvdXJjZUV4dGVuc2lvbnM6bH0sdC5leHBvcnRzPW19LGZ1bmN0aW9uKHQsZSxuKXtmdW5jdGlvbiBpKHQpe3ZhciBlPWYuZ2V0VXJsSG9zdCh0KTtyZXR1cm4gcC5ldmVyeShmdW5jdGlvbih0KXtyZXR1cm4gMCE9PWUuaW5kZXhPZih0KX0pfWZ1bmN0aW9uIHIodCxlKXtyZXR1cm4hKHQ9PT1jLkhMUyYmIWkoZSkpfWZ1bmN0aW9uIG8odCxlKXtpZighdClyZXR1cm4hMTt2YXIgbj10Lmlzc3VlZEF0K3ModC5wcm90b2NvbCx0LmR1cmF0aW9uKTtyZXR1cm4gYSh0LnByb3RvY29sKT9EYXRlLm5vdygpK3QuZHVyYXRpb24tKGV8fDApPG46RGF0ZS5ub3coKTxufWZ1bmN0aW9uIHModCxlKXt2YXIgbj1hKHQpO3JldHVybiBnKyhuP2wucmVzdWx0KGUpOjApfWZ1bmN0aW9uIGEodCl7cmV0dXJuIHQ9PT1jLkhUVFB8fHQ9PT1jLkhMU31mdW5jdGlvbiB1KHQsZSl7ZnVuY3Rpb24gbih0KXtyZXR1cm4tMSp0fWZ1bmN0aW9uIGkodCxlKXtyZXR1cm4gTWF0aC5hYnMoZS1tKS1NYXRoLmFicyh0LW0pfXZhciBvLHMsYSx1LGgsYyxmLGQscCxnLF89e30sbT1lLm1heEJpdHJhdGUseT1lLnByb3RvY29scyx2PWUuZXh0ZW5zaW9ucztmb3IobC5lYWNoKHQsZnVuY3Rpb24odCxlKXt2YXIgbj1lLnNwbGl0KFwiX1wiKSxpPW5bMF0scj1uWzFdLG89blsyXTtfW2ldPV9baV18fHt9LF9baV1bcl09X1tpXVtyXXx8e30sX1tpXVtyXVtvXT10fSksaD0wLGM9eS5sZW5ndGg7Yz5oOysraClmb3IodT15W2hdLGQ9MCxwPXYubGVuZ3RoO3A+ZDsrK2QpaWYoZj12W2RdLF9bdV0mJl9bdV1bZl0pe2lmKG89T2JqZWN0LmtleXMoX1t1XVtmXSkubWFwKE51bWJlcikuc29ydChuKSxzPW09PT0xLzAsYT1tPT09LSgxLzApLG09c3x8YT9vW3M/XCJwb3BcIjpcInNoaWZ0XCJdKCk6by5zb3J0KGkpLnBvcCgpLGc9X1t1XVtmXVttXSwhcih1LGcpKWNvbnRpbnVlO3JldHVybnt1cmw6ZyxiaXRyYXRlOm0scHJvdG9jb2w6dSxleHRlbnNpb246Zixpc3N1ZWRBdDpEYXRlLm5vdygpLGR1cmF0aW9uOmwucmVzdWx0KGUuZHVyYXRpb24pfX1yZXR1cm4gbnVsbH12YXIgaCxjPW4oMTUpLGw9bigxMyksZj1uKDEyKSxkPS45LHA9W10sZz1NYXRoLmZsb29yKDEyZTQqZCk7aD17Y2hvb3NlUHJlZmVycmVkU3RyZWFtOnUsc3RyZWFtVmFsaWRGb3JQbGF5aW5nRnJvbTpvfSx0LmV4cG9ydHM9aH0sZnVuY3Rpb24odCxlLG4pe3ZhciBpLHIsbz1uKDcpLHM9bigxMyksYT17TGluZWFyOjAsRWFzZU91dDoxLEVhc2VJbk91dDoyfSx1PTYwMCxoPTI1O3QuZXhwb3J0cz1pPXt9LGkuVm9sdW1lQXV0b21hdG9yPXI9ZnVuY3Rpb24odCl7dGhpcy5zY0F1ZGlvPXQsdGhpcy5mYWRlT3V0QWxnbz10aGlzLnNjQXVkaW8ub3B0aW9ucy5mYWRlT3V0QWxnbyx0aGlzLmZhZGVPdXRUaW1lcj1udWxsLHRoaXMuaW5pdGlhbFZvbHVtZT12b2lkIDAsdGhpcy5zY0F1ZGlvLm9wdGlvbnMuZmFkZU91dE9uUGF1c2UmJnIuaXNTdXBwb3J0ZWQoKSYmKHRoaXMuc2NBdWRpby5vbihvLlBMQVksdGhpcy5vblBsYXksdGhpcyksdGhpcy5zY0F1ZGlvLnJlZ2lzdGVySG9vayhcInBhdXNlXCIsdGhpcy5ob29rUGF1c2UuYmluZCh0aGlzKSkpfSxpLlZvbHVtZUF1dG9tYXRvci5pc1N1cHBvcnRlZD1mdW5jdGlvbigpe3ZhciB0PW5ldyB3aW5kb3cuQXVkaW8sZT10LnZvbHVtZSxuPTA9PT1lPzE6ZS8yO3JldHVybiB0LnZvbHVtZT1uLHQudm9sdW1lPT09bn0saS5Wb2x1bWVBdXRvbWF0b3IuQWxnb3M9YSxzLmV4dGVuZChyLnByb3RvdHlwZSx7ZmFkZU91dEFuZFBhdXNlOmZ1bmN0aW9uKCl7dmFyIHQ9RGF0ZS5ub3coKSxlPWZ1bmN0aW9uKCl7dmFyIG4saT0oRGF0ZS5ub3coKS10KS91LHI9dGhpcy5pbml0aWFsVm9sdW1lO2lmKGk+PTEpdGhpcy5zY0F1ZGlvLmNvbnRyb2xsZXImJnRoaXMuc2NBdWRpby5jb250cm9sbGVyLnBhdXNlKCksdGhpcy5jYW5jZWxGYWRlb3V0KCk7ZWxzZXtzd2l0Y2godGhpcy5mYWRlT3V0QWxnbyl7Y2FzZSBhLkxpbmVhcjpuPXIqKDEtaSk7YnJlYWs7Y2FzZSBhLkVhc2VPdXQ6bj1yKigxLygxMCooaSsuMSkpLS4wNSk7YnJlYWs7Y2FzZSBhLkVhc2VJbk91dDpkZWZhdWx0Om49ciooTWF0aC5jb3MoaSpNYXRoLlBJKS8yKy41KX10aGlzLnNjQXVkaW8uc2V0Vm9sdW1lKG4pLHdpbmRvdy5jbGVhclRpbWVvdXQodGhpcy5mYWRlT3V0VGltZXIpLHRoaXMuZmFkZU91dFRpbWVyPXdpbmRvdy5zZXRUaW1lb3V0KGUsaCl9fS5iaW5kKHRoaXMpO3RoaXMuaW5pdGlhbFZvbHVtZT10aGlzLnNjQXVkaW8uZ2V0Vm9sdW1lKCksZSgpfSxjYW5jZWxGYWRlb3V0OmZ1bmN0aW9uKCl7dGhpcy5mYWRlT3V0VGltZXImJih3aW5kb3cuY2xlYXJUaW1lb3V0KHRoaXMuZmFkZU91dFRpbWVyKSx0aGlzLmZhZGVPdXRUaW1lcj1udWxsLHRoaXMuc2NBdWRpby5zZXRWb2x1bWUodGhpcy5pbml0aWFsVm9sdW1lKSx0aGlzLmluaXRpYWxWb2x1bWU9dm9pZCAwKX0saG9va1BhdXNlOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmZhZGVPdXRBbmRQYXVzZSgpLCExfSxvblBsYXk6ZnVuY3Rpb24oKXt0aGlzLmNhbmNlbEZhZGVvdXQoKX19KX1dKX0sZnVuY3Rpb24odCxlKXt9XSl9KTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXNkay5qcy5tYXBcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vc291bmRjbG91ZC9zZGsuanNcbi8vIG1vZHVsZSBpZCA9IDBcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiaW1wb3J0IFRvYXN0IGZyb20gJy4uL2NvbnRyb2xzL3RvYXN0JztcclxuXHJcbmNsYXNzIFV0aWxzIHtcclxuXHJcbiAgICAgLyoqXHJcbiAgICAgKiBTaW1wbGUgZnVuY3Rpb24gdG8gY29udmVydCBtaWxsaXNlY29uZHMgdG8gYSBzdHJpbmcgd2l0aCBtaW51dGVzIGFuZCBzZWNvbmRzXHJcbiAgICAgKiBAcGFyYW0geyppbnR9IG1pbGxpcyAtIHRpbWUgaW4gbWlsbGlzZWNvbmRzXHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBjb252ZXJ0TWlsbGlzZWNvbmRzVG9EaWdpdGFsQ2xvY2sobXMpIHtcclxuICAgICAgICBsZXQgaG91cnMgPSBNYXRoLmZsb29yKG1zIC8gMzYwMDAwMCksIC8vIDEgSG91ciA9IDM2MDAwIE1pbGxpc2Vjb25kc1xyXG4gICAgICAgIG1pbnV0ZXMgPSBNYXRoLmZsb29yKChtcyAlIDM2MDAwMDApIC8gNjAwMDApLCAvLyAxIE1pbnV0ZXMgPSA2MDAwMCBNaWxsaXNlY29uZHNcclxuICAgICAgICBzZWNvbmRzID0gTWF0aC5mbG9vcigoKG1zICUgMzYwMDAwKSAlIDYwMDAwKSAvIDEwMDApIC8vIDEgU2Vjb25kID0gMTAwMCBNaWxsaXNlY29uZHNcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBob3VycyA6IGhvdXJzLFxyXG4gICAgICAgICAgICBtaW51dGVzIDogbWludXRlcyxcclxuICAgICAgICAgICAgc2Vjb25kcyA6IHNlY29uZHMsXHJcbiAgICAgICAgICAgIGNsb2NrIDogKChob3VycyA9PT0gMCkgPyAnJyA6IGhvdXJzICsgJzonKSArIChtaW51dGVzIDwgMTAgJiYgaG91cnMgPiAwID8gJzAnIDogJycpICsgbWludXRlcyArICc6JyArIChzZWNvbmRzIDwgMTAgPyAnMCcgOiAnJykgKyBzZWNvbmRzXHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEdyYWIgYSByYW5kb20gaW1hZ2Ugd2hlbiBhIHNvbmcgZG9lcyBub3QgaGF2ZSBjb3ZlciBhcnQuXHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBmZXRjaFJhbmRvbUltYWdlKCkge1xyXG4gICAgICAgIGxldCBpID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogNDA1MCkgKyAxO1xyXG4gICAgICAgIHJldHVybiBgaHR0cDovL2ltZy5pbmZpbml0eW5ld3RhYi5jb20vd2FsbHBhcGVyLyR7aX0uanBnYDtcclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgc2hvd1RvYXN0KG1lc3NhZ2UpIHtcclxuICAgICAgICB0aGlzLnRvYXN0Q29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3RvYXN0Q29udGFpbmVyJyk7XHJcbiAgICAgICAgdGhpcy50b2FzdENvbnRhaW5lci5pbm5lckhUTUwgPSBUb2FzdChtZXNzYWdlLCAnJyk7XHJcbiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHsgXHJcbiAgICAgICAgICAgICQoJyN0b2FzdCcpLmFkZENsYXNzKCdzaG93bicpO1xyXG4gICAgICAgIH0sIDUwMCk7XHJcbiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHsgLy8gSGlkZSB0b2FzdFxyXG4gICAgICAgICAgICAkKCcjdG9hc3QnKS5yZW1vdmVDbGFzcygnc2hvd24nKTtcclxuICAgICAgICB9LCAzMDAwKTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgVXRpbHM7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9wdWJsaWMvanMvdXRpbHMuanNcbi8vIG1vZHVsZSBpZCA9IDFcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwibW9kdWxlLmV4cG9ydHMgPSB7XG5cdFwiY2xpZW50X2lkXCI6IFwiMnQ5bG9OUUg5MGt6SmNzRkNPRGRpZ3hmcDMyNWFxNHpcIixcblx0XCJjbGllbnRfc2VjcmV0XCI6IFwiYTA1a1NNNDE4eG5ocFN2UFZQWHpRQlJqbU8xczhHV1dcIlxufTtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL2NvbnN0cy1zZWMuanNvblxuLy8gbW9kdWxlIGlkID0gMlxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJjbGFzcyBTZXR0aW5ncyB7XHJcblxyXG4gICAgc3RhdGljIGxvYWRQcmVmcygpIHtcclxuICAgICAgICB0aGlzLmRpc2FibGVBbmltYXRpb25zQ1NTID0gXCI8c3R5bGUgaWQ9J2Rpc2FibGVBbmltYXRpb25zJz4qIHt0cmFuc2l0aW9uOiBub25lICFpbXBvcnRhbnQ7IC13ZWJraXQtdHJhbnNpdGlvbjogbm9uZTsgIWltcG9ydGFudH08L3N0eWxlPlwiO1xyXG4gICAgICAgIHRoaXMuZGlzYWJsZUJsdXJDU1MgPSBcIjxzdHlsZSBpZD0nZGlzYWJsZUJsdXInPiNoaXN0SXRlbUJnIHstd2Via2l0LWZpbHRlcjogYnJpZ2h0bmVzcyguNSkgIWltcG9ydGFudDtmaWx0ZXI6IGJyaWdodG5lc3MoLjUpICFpbXBvcnRhbnQ7IH0gI2JhY2tncm91bmQgey13ZWJraXQtZmlsdGVyOiBicmlnaHRuZXNzKC44KSAhaW1wb3J0YW50O2ZpbHRlcjogYnJpZ2h0bmVzcyguOCkgIWltcG9ydGFudDsgfTwvc3R5bGU+XCJcclxuICAgICAgICBcclxuICAgICAgICAvLyBEZWZhdWx0IHNldHRpbmdzIG9iamVjdFxyXG4gICAgICAgIHRoaXMuX3NldHRpbmdzID0ge1xyXG4gICAgICAgICAgICBkaXNhYmxlQW5pbWF0aW9uczogZmFsc2UsXHJcbiAgICAgICAgICAgIGRpc2FibGVCbHVyOiBmYWxzZSxcclxuICAgICAgICAgICAgcGxheWVyVm9sdW1lOiAxMDBcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5fc2V0dGluZ3MuZGlzYWJsZUFuaW1hdGlvbnMgPSB0aGlzLmdldFByZWYoJ2Rpc2FibGVBbmltYXRpb25zJykgfHwgZmFsc2U7XHJcbiAgICAgICAgdGhpcy5fc2V0dGluZ3MuZGlzYWJsZUJsdXIgPSB0aGlzLmdldFByZWYoJ2Rpc2FibGVCbHVyJykgfHwgZmFsc2U7XHJcbiAgICAgICAgdGhpcy5fc2V0dGluZ3MucGxheWVyVm9sdW1lID0gdGhpcy5nZXRQcmVmKCdwbGF5ZXJWb2x1bWUnKSB8fCAxMDA7XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIHN0b3JlUHJlZihuYW1lLCB2YWx1ZSkge1xyXG4gICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKG5hbWUsIHZhbHVlKTtcclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgZ2V0UHJlZihuYW1lKSB7XHJcbiAgICAgICAgcmV0dXJuIGxvY2FsU3RvcmFnZS5nZXRJdGVtKG5hbWUpO1xyXG4gICAgfVxyXG5cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgU2V0dGluZ3M7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9wdWJsaWMvanMvc2V0dGluZ3MuanNcbi8vIG1vZHVsZSBpZCA9IDNcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiaW1wb3J0IGNvbnN0cyBmcm9tICcuLi8uLi9jb25zdHMtc2VjLmpzb24nO1xyXG5cclxubGV0IFNDID0gcmVxdWlyZSgnc291bmRjbG91ZCcpO1xyXG5cclxuY2xhc3MgQ2hhcnRJdGVtIHtcclxuICAgIGNvbnN0cnVjdG9yKHBsYXllciwgdGl0bGUsIGFydGlzdCwga2luZCwgZ2VucmUsIGxpbWl0LCBhcnQpIHtcclxuICAgICAgICB0aGlzLl9wbGF5ZXIgPSBwbGF5ZXI7XHJcbiAgICAgICAgdGhpcy5fdGl0bGUgPSB0aXRsZTtcclxuICAgICAgICB0aGlzLl9hcnRpc3QgPSBhcnRpc3Q7XHJcbiAgICAgICAgdGhpcy5fa2luZCA9IGtpbmQ7XHJcbiAgICAgICAgdGhpcy5fZ2VucmUgPSBnZW5yZTtcclxuICAgICAgICB0aGlzLl9saW1pdCA9IGxpbWl0O1xyXG4gICAgICAgIHRoaXMuX2FydCA9IGFydDtcclxuXHJcbiAgICAgICAgdGhpcy5jaGFydEl0ZW0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICB0aGlzLmNoYXJ0SXRlbS5jbGFzc05hbWUgPSAnY29sLTQnO1xyXG4gICAgICAgIC8vIHRoaXMuY2hhcnRJdGVtLnNldEF0dHJpYnV0ZSgnZGF0YS1nZW5yZScsIHRoaXMuX2dlbnJlKTtcclxuICAgICAgICAvLyB0aGlzLmNoYXJ0SXRlbS5zZXRBdHRyaWJ1dGUoJ2RhdGEtbGltaXQnLCB0aGlzLl9saW1pdCk7XHJcbiAgICAgICAgdGhpcy5iaW5kRXZlbnRzKCk7XHJcbiAgICAgICAgbGV0IHRlbXBJbm5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICAgIHRlbXBJbm5lci5pbm5lckhUTUwgPSBgXHJcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY2hhcnQtaXRlbSBjYXJkXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNhcmQtY29udGFpbmVyXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjYXJkLWltYWdlXCIgc3R5bGU9XCJiYWNrZ3JvdW5kLWltYWdlOiB1cmwoJHthcnR9KTtcIj48L2Rpdj5cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJ0aXRsZS1jb250YWluZXJcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzPVwidGl0bGVcIj4ke3RoaXMuX3RpdGxlfTwvcD48c3BhbiBjbGFzcz1cInN1YnRpdGxlXCI+QnkgU291bmRDbG91ZDwvc3Bhbj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgYDtcclxuICAgICAgICB0aGlzLmNoYXJ0SXRlbS5hcHBlbmRDaGlsZCh0ZW1wSW5uZXIpOyAvLyBNdXN0IHVzZSB0aGlzIG1ldGhvZCB0byBwcmVzZXJ2ZSBsaXN0ZW5lcnNcclxuICAgIH1cclxuXHJcbiAgICByZW5kZXIoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuY2hhcnRJdGVtO1xyXG4gICAgfVxyXG5cclxuICAgIGJpbmRFdmVudHMoKSB7XHJcbiAgICAgICAgdGhpcy5jaGFydEl0ZW0uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLl9wbGF5ZXIuZ2V0VHJhY2tzRnJvbUNoYXJ0cyh0aGlzLl9raW5kLCB0aGlzLl9nZW5yZSwgdGhpcy5fbGltaXQpO1xyXG4gICAgICAgICAgICB0aGlzLl9wbGF5ZXIuc2VhcmNoRGlhbG9nLmhpZGVTZWFyY2hEaWFsb2coKTtcclxuICAgICAgICAgICAgdGhpcy5fcGxheWVyLmNoYXJ0c0RpYWxvZy5oaWRlQ2hhcnRzKCk7XHJcbiAgICAgICAgfSwgZmFsc2UpO1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBDaGFydEl0ZW07XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9wdWJsaWMvY29udHJvbHMvY2hhcnRpdGVtLmpzXG4vLyBtb2R1bGUgaWQgPSA0XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsImNvbnN0IFRvYXN0ID0gKHRleHQsIHNob3duKSA9PiAoXHJcbiAgICBgXHJcbiAgICAgICAgPGRpdiBjbGFzcz1cInRvYXN0ICR7c2hvd259XCIgaWQ9XCJ0b2FzdFwiPlxyXG4gICAgICAgICAgICA8cCBjbGFzcz1cInRleHQtY2VudGVyXCI+JHt0ZXh0fTwvcD5cclxuICAgICAgICA8L2Rpdj5cclxuICAgIGBcclxuKTtcclxuZXhwb3J0IGRlZmF1bHQgVG9hc3RcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3B1YmxpYy9jb250cm9scy90b2FzdC5qc1xuLy8gbW9kdWxlIGlkID0gNVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJpbXBvcnQgY29uc3RzIGZyb20gJy4uLy4uL2NvbnN0cy1zZWMuanNvbic7XHJcbmltcG9ydCBIaXN0SXRlbSBmcm9tICcuLi9jb250cm9scy9IaXN0SXRlbSc7XHJcbmltcG9ydCBTb25nSW5mbyBmcm9tICcuLi9jb250cm9scy9zb25naW5mbyc7XHJcbmltcG9ydCBXYXZlRm9ybSBmcm9tICcuLi9jb250cm9scy93YXZlZm9ybSc7XHJcbmltcG9ydCBSZXF1ZXN0IGZyb20gJy4vcmVxdWVzdCc7XHJcbmltcG9ydCBTZWFyY2hEaWFsb2cgZnJvbSAnLi4vY29udHJvbHMvc2VhcmNoJztcclxuaW1wb3J0IFRvYXN0IGZyb20gJy4uL2NvbnRyb2xzL3RvYXN0JztcclxuaW1wb3J0IERhc2hib2FyZCBmcm9tICcuLi9jb250cm9scy9kYXNoYm9hcmQnO1xyXG5pbXBvcnQgVXRpbHMgZnJvbSAnLi91dGlscyc7XHJcbmltcG9ydCBTZXR0aW5ncyBmcm9tICcuL3NldHRpbmdzJztcclxuaW1wb3J0IENoYXJ0cyBmcm9tICcuLi9jb250cm9scy9jaGFydHMnXHJcblxyXG5jb25zdCBTQyA9IHJlcXVpcmUoJ3NvdW5kY2xvdWQnKTsgLy8gSW1wb3J0IG5vZGUgbW9kdWxlXHJcblxyXG4vLyBTb3VuZGNsb3VkIFByb3BlcnRpZXMgXHJcblxyXG4vLyBPbGRlc3QgcmFuZ2UgKGFyb3VuZCAyMDA3IG9ud2FyZClcclxuY29uc3QgUkFORF9DT1VOVCA9IDkwMDAwO1xyXG5jb25zdCBPRkZTRVQgPSAwO1xyXG5cclxuLy8gR29pbmcgZnJvbSAyMDEwXHJcbmNvbnN0IFJBTkRfQ09VTlRfMSA9IDcwMDAwMDA7XHJcbmNvbnN0IE9GRlNFVF8xID0gMzAwMDAwMDtcclxuXHJcbi8vIE1vcmUgUmVjZW50XHJcbmNvbnN0IFJBTkRfQ09VTlRfMiA9IDkwMDAwMDAwO1xyXG5jb25zdCBPRkZTRVRfMiA9IDEwMDAwMDAwO1xyXG5cclxuLy8gVGhlIGZyZXNoIHN0dWZmXHJcbmNvbnN0IFJBTkRfQ09VTlRfMyA9IDMwMDAwMDAwMDtcclxuY29uc3QgT0ZGU0VUXzMgPSAxMDAwMDAwMDA7XHJcblxyXG4vLyBXaWRnZXQgUGFyYW1ldGVyc1xyXG4vL2NvbnN0IFdJREdFVF9QQVJBTVMgPSAnJmxpa2luZz1mYWxzZSZzaG93X2FydHdvcms9ZmFsc2Umc2hvd19jb21tZW50cz1mYWxzZSZzaG93X3BsYXljb3VudD1mYWxzZSZ2aXN1YWw9ZmFsc2UnO1xyXG5jb25zdCBXSURHRVRfUEFSQU1TID0gJyc7XHJcblxyXG5jbGFzcyBQbGF5ZXIge1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogU2V0cyB1cCB0aGUgdGhlIGFwcGxpY2F0aW9uIHZhcmlhYmxlcyBhbmQgaG9va2luZyBldmVudHMgdG8gY29udHJvbHMuXHJcbiAgICAgKi9cclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIC8vIEluaXRpYWxpemUgdmFyaWFibGVzXHJcbiAgICAgICAgdGhpcy5oaXN0b3J5ID0gW107XHJcbiAgICAgICAgdGhpcy5xdWV1ZSA9IFtdOyAvLyBGb3IgdHJhY2tzIHBsYXlpbmcgbmV4dFxyXG4gICAgICAgIHRoaXMuaXNQbGF5aW5nID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5jdXJQbGF5ZXIgPSBudWxsO1xyXG4gICAgICAgIHRoaXMuY3VyUG9zaXRpb24gPSAwO1xyXG4gICAgICAgIHRoaXMud2F2ZWZvcm0gPSBudWxsO1xyXG4gICAgICAgIHRoaXMuaXNSZXBlYXRpbmcgPSBmYWxzZTsgLy8gRm9yIHJlcGVhdGluZyBzb25nc1xyXG4gICAgICAgIHRoaXMuaGFzQmVlbkZldGNoZWQgPSBmYWxzZTsgLy8gVXNlZCB0byBzdG9wIGR1cGxpY2F0ZXMgZHVyaW5nIHJlY3Vyc2lvblxyXG4gICAgICAgIHRoaXMudGltZXJVcGRhdGUgPSAwO1xyXG4gICAgICAgIHRoaXMuaXNQbGF5bGlzdCA9IGZhbHNlOyAvLyBDaGVjayBpZiB3ZSBhcmUgcGxheWluZyBhIHBsYXlsaXN0LlxyXG4gICAgICAgIHRoaXMuc2V0Q3VySW5kZXggPSAwOyAvLyBUaGUgY3VycmVudCBpbmRleCBvZiB0aGUgc29uZyBpbiB0aGUgcGxheWxpc3RcclxuICAgICAgICB0aGlzLnNldFRyYWNrQ291bnQgPSAwOyAvLyBUaGlzIGhvbGRzIHRoZSBudW1iZXIgb2YgdHJhY2tzIGluIHRoZSBwbGF5bGlzdCBzbyB3ZSBjYW4gdGVsbCB3aGVuIHdlIGhhdmUgcmVhY2hlZCB0aGUgZW5kLlxyXG4gICAgICAgIHRoaXMuc2h1ZmZsZVF1ZXVlID0gZmFsc2U7IC8vIFNob3VsZCB0aGUgcXVldWUgYmUgc2h1ZmZsZWQgd2hlbiB3ZSBnZXQgYSBsaXN0IG9mIHRyYWNrcztcclxuICAgICAgICB0aGlzLnF1ZXVlTnVtID0gMTIwOyAvLyBIb3cgbWFueSByZXN1bHRzIHRvIGFkZCB0byB0aGUgcXVldWVcclxuXHJcbiAgICAgICAgdGhpcy5zZWVraW5nRm9yd2FyZCA9IGZhbHNlOyAvLyBXb3JrIGFyb3VuZCBmb3IgdGhlIGJ1ZyBpbiBQUk9HUkVTUyBldmVudFxyXG5cclxuICAgICAgICAvLyBFeHBlcmltZW50YWwgQVBJIHYyIEVuZHBvaW50XHJcbiAgICAgICAgdGhpcy5TT1VORENMT1VEX0FQSV9WMiA9ICdodHRwczovL2FwaS12Mi5zb3VuZGNsb3VkLmNvbS8nO1xyXG5cclxuICAgICAgICAvLyBXaWRnZXQgUHJvcHNcclxuICAgICAgICB0aGlzLndpZGdldFRyYWNrID0ge1xyXG4gICAgICAgICAgICBjb3ZlcjogJycsXHJcbiAgICAgICAgICAgIHRpdGxlOiAnJyxcclxuICAgICAgICAgICAgaWQ6IDAsXHJcbiAgICAgICAgICAgIGFydGlzdDogJycsXHJcbiAgICAgICAgICAgIHBlcm1hbGlua191cmw6ICcnLFxyXG4gICAgICAgICAgICBkZXNjcmlwdGlvbjogJycsXHJcbiAgICAgICAgICAgIGNyZWF0ZWRfYXQ6ICcnLFxyXG4gICAgICAgICAgICBkdXJhdGlvbjogMCxcclxuICAgICAgICAgICAgY3VycmVudFBvc2l0aW9uOiAwXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgLy8gQmluZCBwYWdlIGVsZW1lbnRzIFxyXG4gICAgICAgIHRoaXMuYmluZENvbnRyb2xFbGVtZW50cygpO1xyXG4gICAgICAgIHRoaXMuYmluZENvbnRyb2xFdmVudHMoKTtcclxuXHJcbiAgICAgICAgLy8gSW5pdGlhbGl6ZSBTZWFyY2ggZGlhbG9nXHJcbiAgICAgICAgdGhpcy5zZWFyY2hEaWFsb2cgPSBuZXcgU2VhcmNoRGlhbG9nKHRoaXMpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIEluaXRpYWxpemUgdGhlIGRhc2hib2FyZCwgYWxzbyBpbml0aWFsaXplcyBzZXR0aW5nc1xyXG4gICAgICAgIHRoaXMuZGFzaGJvYXJkID0gbmV3IERhc2hib2FyZCh0aGlzKTtcclxuXHJcbiAgICAgICAgLy8gSW5pdGlhbGl6ZSB0aGUgY2hhcnRzXHJcbiAgICAgICAgdGhpcy5jaGFydHNEaWFsb2cgPSBuZXcgQ2hhcnRzKHRoaXMpO1xyXG5cclxuICAgICAgICAvLyBTZXR0aW5ncyBhbHJlYWR5IEluaXRpYWxpemVkXHJcbiAgICAgICAgaWYgKEpTT04ucGFyc2UoU2V0dGluZ3MuZ2V0UHJlZignZGlzYWJsZUFuaW1hdGlvbnMnKSkpIHtcclxuICAgICAgICAgICAgJChTZXR0aW5ncy5kaXNhYmxlQW5pbWF0aW9uc0NTUykuYXBwZW5kVG8oXCJoZWFkXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoSlNPTi5wYXJzZShTZXR0aW5ncy5nZXRQcmVmKCdkaXNhYmxlQmx1cicpKSkge1xyXG4gICAgICAgICAgICAkKFNldHRpbmdzLmRpc2FibGVCbHVyQ1NTKS5hcHBlbmRUbyhcImhlYWRcIik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBMb2FkIGEgdHJhY2sgd2hlbiB0aGUgYXBwIGlzIGxvYWRlZCAodGFrZSB1cmwgcGFyYW0gaW50byBhY2NvdW50KS5cclxuICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnd2lkZ2V0dGVzdCcpLnNldEF0dHJpYnV0ZSgnc3JjJywgJ2h0dHBzOi8vdy5zb3VuZGNsb3VkLmNvbS9wbGF5ZXIvP3VybD1odHRwcyUzQS8vYXBpLnNvdW5kY2xvdWQuY29tL3RyYWNrcy8xNzAyMDIxNTEnICsgV0lER0VUX1BBUkFNUyk7XHJcbiAgICAgICAgbGV0IGlmcmFtZUlEID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3dpZGdldHRlc3QnKTtcclxuICAgICAgICB0aGlzLmN1clBsYXllciA9IFNDLldpZGdldChpZnJhbWVJRCk7XHJcbiAgICAgICAgLy8gVXBkYXRlIHRoZSBwbGF5ZXJcclxuICAgICAgICB0aGlzLmJpbmRXaWRnZXRFdmVudHModGhpcy5jdXJQbGF5ZXIpOyAvLyBCaW5kIGV2ZW50IGhhbmRsZXJzIGZvciB3aWRnZXQuXHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gQ2hlY2sgZm9yIHBhcmFtcyBhbmQgdGhlbiBkZWNpZGUgd2hhdCB0byBwbGF5XHJcbiAgICAgICAgdGhpcy5jaGVja1BhcmFtc0FuZEZldGNoKCk7XHJcblxyXG4gICAgICAgIGNvbnNvbGUubG9nKCdjb25zdHJ1Y3QgZG9uZScpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQmluZHMgdGhlIHBhZ2UgZWxlbWVudHMgdG8gSlMgb2JqZWN0cyBzbyB3ZSBjYW4gYWNjZXNzIHRoZW0gaW4gb3RoZXIgZnVuY3Rpb25zLlxyXG4gICAgICovXHJcbiAgICBiaW5kQ29udHJvbEVsZW1lbnRzKCkge1xyXG4gICAgICAgIHRoaXMubWFpblBsYXllciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzb25nQ29udGFpbmVyJyk7XHJcbiAgICAgICAgdGhpcy5wbGF5QnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3BsYXktYnRuJyk7XHJcbiAgICAgICAgdGhpcy5oaXN0Q29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2hpc3RDb250YWluZXInKTtcclxuICAgICAgICB0aGlzLmJ0bkZmID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NlZWstZnctYnRuJyk7XHJcbiAgICAgICAgdGhpcy5idG5CayA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzZWVrLWJrLWJ0bicpO1xyXG4gICAgICAgIHRoaXMuYnRuU2VhcmNoID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2N1c3RvbS1idG4nKTtcclxuICAgICAgICB0aGlzLmJ0blJlcGVhdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyZXBlYXQtYnRuJyk7XHJcbiAgICAgICAgdGhpcy5idG5EYXNoYm9hcmQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZGFzaGJvYXJkLWJ0bicpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQmluZHMgY29tcG9uZW50cyBvbiB0aGUgcGFnZSB0byBjb21tYW5kcyBvbiBhY3Rpb24uXHJcbiAgICAgKi9cclxuICAgIGJpbmRDb250cm9sRXZlbnRzKCkge1xyXG4gICAgICAgIHRoaXMucGxheUJ0bi5vbmNsaWNrID0gKGUpID0+IHtcclxuICAgICAgICAgICAgLy8gaWYgKHRoaXMuY3VyUGxheWVyID09PSBudWxsICYmICF0aGlzLmlzUGxheWluZylcclxuICAgICAgICAgICAgLy8gICAgIHRoaXMudXBkYXRlU3RyZWFtKHRoaXMuZ2V0UmFuZG9tVHJhY2soKSk7XHJcbiAgICAgICAgICAgIHRoaXMudG9nZ2xlUGxheSgpO1xyXG5cclxuICAgICAgICAgICAgLy8gQ2hlY2sgaWYgc29uZyB0aXRsZSBtYXRjaGVzIHRpdGxlIGluIGFwcFxyXG4gICAgICAgICAgICBpZiAoJCgnI3NvbmdUaXRsZScpLnZhbHVlICE9PSB0aGlzLmN1clBsYXllci50aXRsZSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jdXJQbGF5ZXIuZ2V0Q3VycmVudFNvdW5kKChzb25nKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy51cGRhdGVTb25nSW5mbyhzb25nKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBFdmVudCBoYW5kbGVyIGZvciBzZWVraW5nIGZvcndhcmQgLyBmZXRjaCBuZXcgc29uZ1xyXG4gICAgICAgIHRoaXMuYnRuRmYub25jbGljayA9IChlKSA9PiB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLnF1ZXVlLmxlbmd0aCA+IDAgfHwgdGhpcy5pc1BsYXlsaXN0KSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNlZWtGb3J3YXJkKCk7IC8vIFNlZWsgZm9yd2FyZCBpbiBxdWV1ZVxyXG4gICAgICAgICAgICB9IGVsc2UgeyAvLyBFbHNlIGp1c3QgbG9hZCBhbm90aGVyIHNvbmdcclxuICAgICAgICAgICAgICAgIHRoaXMuZmV0Y2hOZXh0KCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIEV2ZW50IGhhbmRsZXIgZm9yIHNlZWtpbmcgYmFja1xyXG4gICAgICAgIHRoaXMuYnRuQmsub25jbGljayA9IChlKSA9PiB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmN1clBvc2l0aW9uID4gMTAwMDApIHsgLy8gSWYgdGhlIHNvbmcgaXMgcGFzdCAxMCBzZWNvbmRzLCByZXNldCBzb25nIGJhY2sgdG8gYmVnaW5uaW5nIChsaWtlIGluIFNwb3RpZnkpXHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlc3RhcnRTb25nKCk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7IC8vIEVsc2UsIGdvIHRvIHRoZSBsYXN0IHNvbmdcclxuICAgICAgICAgICAgICAgIHRoaXMuc2Vla0JhY2soKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gRXZlbnQgaGFuZGxlciB0byBwbGF5IGN1c3RvbSBzb25nXHJcbiAgICAgICAgdGhpcy5idG5TZWFyY2gub25jbGljayA9IChlKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuc2VhcmNoRGlhbG9nLnRvZ2dsZVNlYXJjaERpYWxvZygpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICAvLyBFdmVudCBoYW5kbGVyIGZvciByZXBlYXRzXHJcbiAgICAgICAgdGhpcy5idG5SZXBlYXQub25jbGljayA9IChlKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuaXNSZXBlYXRpbmcgPSAhdGhpcy5pc1JlcGVhdGluZzsgLy8gVG9nZ2xlIHRoZSB2YWx1ZVxyXG4gICAgICAgICAgICBpZiAodGhpcy5pc1JlcGVhdGluZykge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5idG5SZXBlYXQuc3R5bGUuY29sb3IgPSAnI2ZmMjE2MCc7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmJ0blJlcGVhdC5zdHlsZS5jb2xvciA9ICdpbmhlcml0JztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gRXZlbnQgaGFuZGxlciB0byBzaG93IGRhc2hib2FyZFxyXG4gICAgICAgIHRoaXMuYnRuRGFzaGJvYXJkLm9uY2xpY2sgPSAoZSkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLmRhc2hib2FyZC50b2dnbGVEYXNoYm9hcmQoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIEJpbmQga2V5Ym9hcmQgc2hvcnRjdXRzXHJcbiAgICAgICAgZG9jdW1lbnQub25rZXlkb3duID0gKGUpID0+IHtcclxuICAgICAgICAgICAgaWYgKGUua2V5Q29kZSA9PSAzMikge1xyXG4gICAgICAgICAgICAgICAgLy8gc3BhY2Uga2V5IHRvIHRvZ2dsZSBwbGF5YmFja1xyXG4gICAgICAgICAgICAgICAgdmFyIHRhZyA9IGUudGFyZ2V0LnRhZ05hbWUudG9Mb3dlckNhc2UoKTtcclxuICAgICAgICAgICAgICAgIGlmICh0YWcgIT0gJ2lucHV0JykgLy8gSWdub3JlIHRoZSBzZWFyY2ggZmllbGRcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnRvZ2dsZVBsYXkoKTtcclxuXHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZS5zaGlmdEtleSAmJiBlLmtleUNvZGUgPT0gMzgpIHtcclxuICAgICAgICAgICAgICAgIC8vIHNoaWZ0IHVwXHJcbiAgICAgICAgICAgICAgICB0aGlzLnZvbHVtZVVwKDEwKTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChlLnNoaWZ0S2V5ICYmIGUua2V5Q29kZSA9PSA0MCkge1xyXG4gICAgICAgICAgICAgICAgLy8gc2hpZnQgZG93blxyXG4gICAgICAgICAgICAgICAgdGhpcy52b2x1bWVEb3duKDEwKTtcclxuXHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZS5zaGlmdEtleSAmJiBlLmtleUNvZGUgPT0gNjYpIHtcclxuICAgICAgICAgICAgICAgIGxldCBpZCA9IHByb21wdChcIkVudGVyIHNvbmcgaWQuXCIpO1xyXG4gICAgICAgICAgICAgICAgaWYgKGlkID09IG51bGwpXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG5cclxuICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd3aWRnZXR0ZXN0Jykuc2V0QXR0cmlidXRlKCdzcmMnLCBgaHR0cHM6Ly93LnNvdW5kY2xvdWQuY29tL3BsYXllci8/dXJsPWh0dHBzJTNBLy9hcGkuc291bmRjbG91ZC5jb20vdHJhY2tzLyR7aWR9YCArIFdJREdFVF9QQVJBTVMpO1xyXG4gICAgICAgICAgICAgICAgbGV0IGlmcmFtZUlEID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3dpZGdldHRlc3QnKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuY3VyUGxheWVyID0gU0MuV2lkZ2V0KGlmcmFtZUlEKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuY3VyUGxheWVyLmxvYWQoYGh0dHBzJTNBLy9hcGkuc291bmRjbG91ZC5jb20vdHJhY2tzLyR7aWR9YCArIFdJREdFVF9QQVJBTVMpO1xyXG4gICAgICAgICAgICAgICAgLy8gVXBkYXRlIHRoZSBwbGF5ZXJcclxuICAgICAgICAgICAgICAgIHRoaXMuYmluZFdpZGdldEV2ZW50cyh0aGlzLmN1clBsYXllcik7IC8vIEJpbmQgZXZlbnQgaGFuZGxlcnMgZm9yIHdpZGdldC5cclxuICAgICAgICAgICAgICAgIHRoaXMudG9nZ2xlUGxheSgpO1xyXG4gICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB0aGlzLmxvYWRXaWRnZXRTb25nKHRoaXMuY3VyUGxheWVyKSwgMTAwMCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQXR0ZW1wdHMgdG8gbG9hZCBpbmZvcm1hdGlvbiBhc3NvY2lhdGVkIHRvIHRoZSB3aWRnZXQgdG8gbG9jYWwgdmFycyBhbmQgZGlzcGxheXMgdGhlbVxyXG4gICAgICogQHBhcmFtIHtTb3VuZENsb3VkV2lkZ2V0fSB3aWRnZXQgLSB3aWRnZXQgbG9hZGVkIGJ5IEFQSVxyXG4gICAgICovXHJcbiAgICBsb2FkV2lkZ2V0U29uZyh3aWRnZXQpIHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnbG9hZHdpZGdldHNvbmcgY2FsbGVkJyk7XHJcbiAgICAgICAgICAgIHRoaXMud2F2ZWZvcm0gPSBudWxsOyAvLyBSZXNldCB0aGUgcmVmZXJlbmNlXHJcbiAgICAgICAgICAgIHdpZGdldC5nZXRDdXJyZW50U291bmQoKHNvbmcpID0+IHtcclxuICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2coc29uZyk7XHJcbiAgICAgICAgICAgICAgICBsZXQgcm5kSW1nID0gVXRpbHMuZmV0Y2hSYW5kb21JbWFnZSgpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVTb25nSW5mbyhzb25nKTtcclxuXHJcbiAgICAgICAgICAgICAgICAvLyBTZXQgdGhlIHZvbHVtZSAocGxheWVyIGFsd2F5cyByZXNldHMgdG8gMTAwIGFnYWluKVxyXG4gICAgICAgICAgICAgICAgdGhpcy5zZXRWb2x1bWUoU2V0dGluZ3MuZ2V0UHJlZigncGxheWVyVm9sdW1lJykpO1xyXG5cclxuICAgICAgICAgICAgICAgIGxldCBmb3VuZCA9IGZhbHNlOyAvLyBCb29sZWFuIHRvIHNlZSBpZiB0aGUgc29uZyBleGlzdHNcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmhpc3RvcnkubGVuZ3RoID4gMCB8fCB0aGlzLnF1ZXVlLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgc29uZ0xpc3QgPSB0aGlzLmhpc3RvcnkuY29uY2F0KHRoaXMucXVldWUpOyAvLyBVc2UgdGhpcyB0byBwcmV2ZW50IGFkZGluZyBhbnkgZHVwbGljYXRlc1xyXG4gICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc29uZ0xpc3QubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNvbmdMaXN0W2ldLnRyYWNrLmlkID09PSBzb25nLmlkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3VuZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoIWZvdW5kKSB7IC8vIEFwcGVuZCB0aGUgc29uZyBpZiBub3QgZm91bmRcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5oaXN0b3J5LnB1c2goe2lkOiBzb25nLmlkLCB0cmFjazogc29uZ30pOyAvLyBQdXNoIHRoZSB0cmFjayBzbyBpdCBjYW4gYmUgcmVwbGF5ZWQgZnJvbSBoaXN0b3J5LiBcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGggPSBuZXcgSGlzdEl0ZW0oKHNvbmcuYXJ0d29ya191cmwgPT09IG51bGwgPyBybmRJbWcgOiBzb25nLmFydHdvcmtfdXJsKSwgc29uZywgdGhpcywgXCJqYXZhc2NyaXB0OmFsZXJ0KCdEb3dubG9hZCBsaW5rIHVuYXZhaWxhYmxlJyk7XCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmhpc3RDb250YWluZXIuYXBwZW5kQ2hpbGQoaC5yZW5kZXIoKSk7IC8vIEFwcGVuZCB0byBoaXN0b3J5XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAkKCcuYWN0aW9uLWJhci1pdGVtJykuY2xpY2soKGUpID0+IHsgLy8gU3RvcCBidXR0b24gY2xpY2tzIGZyb20gdHJpZ2dlcmluZyBwbGF5aW5nIHRoZSBzb25nXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaGlzdG9yeS5wdXNoKHtpZDogc29uZy5pZCwgdHJhY2s6IHNvbmd9KTsgLy8gUHVzaCB0aGUgdHJhY2sgc28gaXQgY2FuIGJlIHJlcGxheWVkIGZyb20gaGlzdG9yeS4gXHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IGggPSBuZXcgSGlzdEl0ZW0oKHNvbmcuYXJ0d29ya191cmwgPT09IG51bGwgPyBybmRJbWcgOiBzb25nLmFydHdvcmtfdXJsKSwgc29uZywgdGhpcywgXCJqYXZhc2NyaXB0OmFsZXJ0KCdEb3dubG9hZCBsaW5rIHVuYXZhaWxhYmxlJyk7XCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaGlzdENvbnRhaW5lci5hcHBlbmRDaGlsZChoLnJlbmRlcigpKTsgLy8gQXBwZW5kIHRvIGhpc3RvcnlcclxuICAgICAgICAgICAgICAgICAgICAkKCcuYWN0aW9uLWJhci1pdGVtJykuY2xpY2soKGUpID0+IHsgLy8gU3RvcCBidXR0b24gY2xpY2tzIGZyb20gdHJpZ2dlcmluZyBwbGF5aW5nIHRoZSBzb25nXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgdGhpcy5oYXNCZWVuRmV0Y2hlZCA9IGZhbHNlOyAvLyBSZXNldFxyXG5cclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdnZXRjdXJyZW50c291bmQgZG9uZScpO1xyXG4gICAgICAgICAgICB9LCAoZXJyKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIubWVzc2FnZSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgLy8gVXBkYXRlIHRoZSBwbGF5IHN0YXRlXHJcbiAgICAgICAgICAgIHRoaXMudG9nZ2xlUGxheVN0YXRlKHRydWUpO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfSBjYXRjaCAoZXgpIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coZXgubWVzc2FnZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHVwZGF0ZVNvbmdJbmZvKHNvbmcpIHtcclxuICAgICAgICBjb25zb2xlLmxvZygnZ2V0Y3VycmVudHNvdW5kIHN0YXJ0Jyk7XHJcbiAgICAgICAgaWYgKCAvQW5kcm9pZHx3ZWJPU3xpUGhvbmV8aVBhZHxpUG9kfEJsYWNrQmVycnl8SUVNb2JpbGV8T3BlcmEgTWluaS9pLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCkpIHsgLy8gQXR0ZW1wdCB0byBmaXggb24gbW9iaWxlIGRldmljZXNcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIFNvcnJ5IGNhbm5vdCBhdXRvIHBsYXkgb24gbW9iaWxlID1fKFxyXG4gICAgICAgICAgICAvLyBodHRwczovL3N0YWNrb3ZlcmZsb3cuY29tL3F1ZXN0aW9ucy8yNjA2NjA2Mi9hdXRvcGxheS1odG1sNS1hdWRpby1wbGF5ZXItb24tbW9iaWxlLWJyb3dzZXJzXHJcbiAgICAgICAgICAgIC8vIE5lZWQgdG8gdXNlIHRyaWNrLlxyXG4gICAgICAgICAgICAvLyB3aWRnZXQucGxheSgpO1xyXG4gICAgICAgICAgICAvLyBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgLy8gICAgICAgICAkKCcjcGxheS1idG4nKS50cmlnZ2VyKCdjbGljaycpOyAvLyBDYW5ub3QgZml4IGF1dG9wbGF5IGlzc3VlLCBidXQgbm93IHVzZXJzIGNhbiBwbGF5IHRoZSB0cmFjayB3aXRoIDEgdGFwIG9mIHRoZSBwbGF5IGJ1dHRvbiBpbnN0ZWFkIG8gc2V2ZXJhbCAoYnVnIGZpeClcclxuICAgICAgICAgICAgLy8gICAgICAgICBjb25zb2xlLmxvZygndGVzdCBwbGF5JylcclxuICAgICAgICAgICAgLy8gICAgIH0sIDIwMDApO1xyXG4gICAgICAgICAgICAvLyB0aGlzLnRvZ2dsZVBsYXlTdGF0ZSh0cnVlKTtcclxuICAgICAgICAgICAgLy90aGlzLmN1clBsYXllci5wbGF5KCk7IC8vIEV4dHJhIGNhbGwgZm9yIGZvcmNpbmcgYXV0byBwbGF5aW5nIGluIG1vYmlsZVxyXG5cclxuICAgICAgICAgICAgLy8gQW5kcm9pZCBhcHAgd29ya2Fyb3VuZCBodHRwczovL2RldmVsb3Blci5hbmRyb2lkLmNvbS9yZWZlcmVuY2UvYW5kcm9pZC93ZWJraXQvV2ViU2V0dGluZ3MuaHRtbFxyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmN1clBsYXllci5wbGF5KCk7IC8vIFBsYXkgbm9ybWFsbHkgb24gbm9uIG1vYmlsZVxyXG4gICAgICAgIHRoaXMudG9nZ2xlUGxheVN0YXRlKHRydWUpO1xyXG5cclxuICAgICAgICB0aGlzLmlzUGxheWluZyA9IHRydWU7XHJcbiAgICAgICAgbGV0IHJuZEltZyA9IFV0aWxzLmZldGNoUmFuZG9tSW1hZ2UoKTtcclxuICAgICAgICB0aGlzLndpZGdldFRyYWNrLmNvdmVyID0gc29uZy5hcnR3b3JrX3VybDtcclxuICAgICAgICB0aGlzLndpZGdldFRyYWNrLnRpdGxlID0gc29uZy50aXRsZTtcclxuICAgICAgICB0aGlzLndpZGdldFRyYWNrLmlkID0gc29uZy5pZDtcclxuICAgICAgICB0aGlzLndpZGdldFRyYWNrLmFydGlzdCA9IHNvbmcudXNlci51c2VybmFtZSB8fCAnTi9BJzsgLy8gU29tZSB0cmFja3MgZG9uJ3QgaGF2ZSBhIHVzZXJubWUgYXNzb2NpYXRlZFxyXG4gICAgICAgIHRoaXMud2lkZ2V0VHJhY2sucGVybWFsaW5rX3VybCA9IHNvbmcucGVybWFsaW5rX3VybDtcclxuICAgICAgICB0aGlzLndpZGdldFRyYWNrLmRlc2NyaXB0aW9uID0gc29uZy5kZXNjcmlwdGlvbiB8fCAnTi9BJztcclxuICAgICAgICB0aGlzLndpZGdldFRyYWNrLmNyZWF0ZWRfYXQgPSBzb25nLmNyZWF0ZWRfYXQ7XHJcbiAgICAgICAgdGhpcy53aWRnZXRUcmFjay5kdXJhdGlvbiA9IHNvbmcuZHVyYXRpb24gfHwgJ04vQSc7XHJcbiAgICAgICAgdGhpcy53aWRnZXRUcmFjay5jdXJyZW50UG9zaXRpb24gPSAwO1xyXG5cclxuICAgICAgICBkb2N1bWVudC50aXRsZSA9IGBcXHUyNUI2ICAgTmltYnVzIC0gJHt0aGlzLndpZGdldFRyYWNrLnRpdGxlfWA7XHJcblxyXG4gICAgICAgIC8vIENyZWF0ZSB0YWcgbGlzdFxyXG4gICAgICAgIGxldCB0YWdCdG5zID0gYGA7XHJcbiAgICAgICAgbGV0IHRhZ0NvbGxlY3Rpb24gPSBzb25nLnRhZ19saXN0O1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIEdldCB0YWdzIHRoYXQgYXJlIGluc2lkZSBxdW90ZXMgYWxyZWFkeSAodHJlYXQgbXVsdGlwbGUgd29yZHMgYXMgMSB0YWcpXHJcbiAgICAgICAgbGV0IHF1b3RlZFRhZ3MgPSBzb25nLnRhZ19saXN0Lm1hdGNoKC8oW1wiJ10pKD86KD89KFxcXFw/KSlcXDIuKSo/XFwxL2cpO1xyXG5cclxuICAgICAgICAvLyBDbGVhbiB0aGUgb3JpZ2luYWwgbGlzdFxyXG4gICAgICAgIHRhZ0NvbGxlY3Rpb24gPSB0YWdDb2xsZWN0aW9uLnJlcGxhY2UoLyhbXCInXSkoPzooPz0oXFxcXD8pKVxcMi4pKj9cXDEvZywgJycpOyAvLyBSZW1vdmUgYWxsIGRvdWJsZSBxdW90ZWQgZW50cmllc1xyXG4gICAgICAgIHRhZ0NvbGxlY3Rpb24gPSB0YWdDb2xsZWN0aW9uLnNwbGl0KCcgJyk7XHJcbiAgICAgICAgdGFnQ29sbGVjdGlvbiA9IHRhZ0NvbGxlY3Rpb24uY29uY2F0KHF1b3RlZFRhZ3MpO1xyXG5cclxuICAgICAgICBpZiAoc29uZy50YWdfbGlzdCAhPT0gJycpIHtcclxuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0YWdDb2xsZWN0aW9uLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgdGFnTmFtZSA9IHRhZ0NvbGxlY3Rpb25baV07XHJcbiAgICAgICAgICAgICAgICBpZiAodGFnTmFtZSAhPT0gJycgJiYgdGFnTmFtZSAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRhZ05hbWUgPSB0YWdOYW1lLnJlcGxhY2UoL1xcXCIvZywgJycpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRhZ0J0bnMgKz0gYDxhIGhyZWY9XCJodHRwczovL3NvdW5kY2xvdWQuY29tL3RhZ3MvJHt0YWdOYW1lfVwiIHRhcmdldD1cIl9ibGFua1wiPjxidXR0b24gY2xhc3M9XCJidG4tdHJhbnNwYXJlbnRcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgIyR7dGFnTmFtZX1cclxuICAgICAgICAgICAgICAgICAgICA8L2J1dHRvbj48L2E+XHJcbiAgICAgICAgICAgICAgICAgICAgYDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5tYWluUGxheWVyLmlubmVySFRNTCA9IFNvbmdJbmZvKChzb25nLmFydHdvcmtfdXJsID09PSBudWxsID8gc29uZy51c2VyLmF2YXRhcl91cmwgOiBzb25nLmFydHdvcmtfdXJsLnJlcGxhY2UoJ2xhcmdlJywgJ3Q1MDB4NTAwJykpLCBzb25nLCB0YWdCdG5zLCBcImphdmFzY3JpcHQ6YWxlcnQoJ1B1cmNoYXNlIGxpbmsgdW5hdmFpbGFibGUnKTtcIik7XHJcbiAgICAgICAgLy90aGlzLmN1clRyYWNrLnRyYWNrID0gdHJhY2s7XHJcbiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2JhY2tncm91bmQnKS5zdHlsZS5iYWNrZ3JvdW5kSW1hZ2UgPSAndXJsKCcgKyAoc29uZy5hcnR3b3JrX3VybCA9PT0gbnVsbCA/IHJuZEltZyA6IHNvbmcuYXJ0d29ya191cmwucmVwbGFjZSgnbGFyZ2UnLCAndDUwMHg1MDAnKSkgKyAnKSc7XHJcblxyXG4gICAgICAgIC8vIEFkZCBsaXN0ZW5lciBmb3IgZmxpcENvbnRhaW5lclxyXG4gICAgICAgIHRoaXMuZmxpcENvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmbGlwQ29udGFpbmVyJyk7XHJcbiAgICAgICAgdGhpcy5mbGlwQ29udGFpbmVyLm9uY2xpY2sgPSAoZSkgPT4ge1xyXG4gICAgICAgICAgICAkKCcjZmxpcENvbnRhaW5lcicpLnRvZ2dsZUNsYXNzKCdmbGlwcGVkJyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLnZvbHVtZVNsaWRlciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd2b2x1bWVTbGlkZXInKTtcclxuXHJcbiAgICAgICAgdGhpcy52b2x1bWVTbGlkZXIuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgKCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLnNldFZvbHVtZSh0aGlzLnZvbHVtZVNsaWRlci52YWx1ZSk7XHJcbiAgICAgICAgfSwgZmFsc2UpO1xyXG5cclxuICAgICAgICAvLyBBc3luYyBtZXRob2QgdG8gYnVpbGQgd2F2ZWZvcm1cclxuICAgICAgICAoYXN5bmMgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIGxldCByZXEgPSBuZXcgUmVxdWVzdCgpOyAvLyBDb25zdHJ1Y3QgaXRcclxuICAgICAgICAgICAgbGV0IGRhdGEgPSBhd2FpdCByZXEuZ2V0SlNPTihzb25nLndhdmVmb3JtX3VybCk7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKHNvbmcud2F2ZWZvcm1fdXJsKTtcclxuXHJcbiAgICAgICAgICAgIC8vIERyYXcgdGhlIHdhdmVmb3JtXHJcbiAgICAgICAgICAgIGNvbnN0IHdhdmVGb3JtQ29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLndhdmVmb3JtJyk7XHJcbiAgICAgICAgICAgIGlmICghdGhpcy53YXZlZm9ybSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy53YXZlZm9ybSA9IG5ldyBXYXZlRm9ybSh7XHJcbiAgICAgICAgICAgICAgICBjb250YWluZXI6IHdhdmVGb3JtQ29udGFpbmVyLFxyXG4gICAgICAgICAgICAgICAgYXVkaW86IHRoaXMuY3VyUGxheWVyLFxyXG4gICAgICAgICAgICAgICAgZHVyYXRpb246IHNvbmcuZHVyYXRpb24sXHJcbiAgICAgICAgICAgICAgICBkYXRhOiBkYXRhLnNhbXBsZXMsXHJcbiAgICAgICAgICAgICAgICBwZWFrV2lkdGg6IDIsXHJcbiAgICAgICAgICAgICAgICBwZWFrU3BhY2U6IDEsXHJcbiAgICAgICAgICAgICAgICByZXNwb25zaXZlOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgbW91c2VPdmVyRXZlbnRzOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgbW91c2VDbGlja0V2ZW50czogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIGNvbG9yOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZDogXCJyZ2JhKDE0MCwgMTQwLCAxNDAsIDAuNylcIixcclxuICAgICAgICAgICAgICAgICAgICBmb290ZXI6IFwicmdiYSg5MCwgOTAsIDkwLCAwLjYpXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgZm9vdGVyUGxheWJhY2s6IFwiIzVkMTgzNVwiLFxyXG4gICAgICAgICAgICAgICAgICAgIGhvdmVyR3JhZGllbnQ6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZnJvbTogXCIjZDkxZTUzXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRvOiBcIiNkOTFlNTNcIlxyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgcGxheWJhY2tHcmFkaWVudDoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmcm9tOiBcIiNkOTFlNTNcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgdG86IFwiI2Q5MWU1M1wiXHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICBob3ZlclBsYXliYWNrR3JhZGllbnQ6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZnJvbTogXCIjZmYyMTYwXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRvOiBcIiNmZjIxNjBcIlxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgYXdhaXQgd2F2ZWZvcm0udXBkYXRlV2F2ZWZvcm1EYXRhKGRhdGEuc2FtcGxlcyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIH0pLmJpbmQodGhpcykoKTtcclxuXHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBUaGUgc3RhcnRpbmcgcG9pbnQgb2YgdGhlIGFwcGxpY2F0aW9uIGNhbGxlZCBieSBhcHAuanMuIFRoaXMgaW5pdGFsaXplcyB0aGUgU291bmRDbG91ZCBBUEkuXHJcbiAgICAgKi9cclxuICAgIHN0YXJ0KCkge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIFNDLmluaXRpYWxpemUoe1xyXG4gICAgICAgICAgICAgICAgY2xpZW50X2lkOiBjb25zdHMuY2xpZW50X2lkXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ0Vycm9yIGluaXRpYWxpemluZyBTb3VuZENsb3VkIEFQSS4gU3RhY2sgdHJhY2U6ICcgKyBlLnRvU3RyaW5nKCkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zb2xlLmxvZygnU291bmRDbG91ZCBBUEkgaW5pdGFsaXplZCEnKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEJpbmQgZXZlbnQgaGFuZGxlcnMgdG8gdGhlIHdpZGdldFxyXG4gICAgICogQHBhcmFtIHtTb3VuZENsb3VkV2lkZ2V0fSB3aWRnZXQgLSB3aWRnZXQgbG9hZGVkIGZyb20gQVBJXHJcbiAgICAgKi9cclxuICAgIGJpbmRXaWRnZXRFdmVudHMod2lkZ2V0KSB7XHJcbiAgICAgICAgdGhpcy5jdXJQbGF5ZXIgPSB3aWRnZXQ7XHJcbiAgICAgICAgd2lkZ2V0LmJpbmQoU0MuV2lkZ2V0LkV2ZW50cy5SRUFEWSwgKGUpID0+IHtcclxuXHJcbiAgICAgICAgICAgIC8vIEJpbmQgd2hlbiB0aGUgc29uZyBpcyBwbGF5aW5nXHJcbiAgICAgICAgICAgIHdpZGdldC5iaW5kKFNDLldpZGdldC5FdmVudHMuUExBWV9QUk9HUkVTUywgKGUpID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMuY3VyUG9zaXRpb24gPSBlLmN1cnJlbnRQb3NpdGlvbjtcclxuICAgICAgICAgICAgICAgIGxldCBjdXJUaW1lU3RyID0gVXRpbHMuY29udmVydE1pbGxpc2Vjb25kc1RvRGlnaXRhbENsb2NrKGUuY3VycmVudFBvc2l0aW9uKS5jbG9jaztcclxuICAgICAgICAgICAgICAgIGxldCB0b3RhbFRpbWVTdHIgPSBVdGlscy5jb252ZXJ0TWlsbGlzZWNvbmRzVG9EaWdpdGFsQ2xvY2sodGhpcy53aWRnZXRUcmFjay5kdXJhdGlvbikuY2xvY2s7XHJcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY3VyVGltZScpLmlubmVyVGV4dCA9IGAke2N1clRpbWVTdHJ9IC8gJHt0b3RhbFRpbWVTdHJ9YDtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgLy8gRm9yIHNvbWUgcmVhc29uIEZJTklTSCBldmVudCBubyBsb25nZXIgZmlyZXMgd2hlbiBjaGFuZ2luZyBzb25ncyBpbiBwbGF5bGlzdCwgbWFudWFsIG92ZXJyaWRlIGhlcmVcclxuICAgICAgICAgICAgICAgIGlmIChlLmN1cnJlbnRQb3NpdGlvbiA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmlzUGxheWxpc3QgJiYgIXRoaXMuaXNSZXBlYXRpbmcgJiYgIXRoaXMuc2Vla2luZ0ZvcndhcmQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5sb2FkV2lkZ2V0U29uZyh0aGlzLmN1clBsYXllcik7IC8vIFVwZGF0ZSB0cmFjayBpbmZvIHRvIHRoZSBuZXh0IHNvbmcgaW4gdGhlIHBsYXlsaXN0XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLmlzUGxheWxpc3QgJiYgdGhpcy5pc1JlcGVhdGluZyAmJiAhdGhpcy5zZWVraW5nRm9yd2FyZCkgeyAvLyBSZXBsYXkgc2V0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY3VyUGxheWVyLnBhdXNlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jdXJQbGF5ZXIucHJldigpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5sb2FkV2lkZ2V0U29uZyh0aGlzLmN1clBsYXllcik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sIDUwMCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLnNlZWtpbmdGb3J3YXJkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY3VyUGxheWVyLnNlZWtUbygxKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7dGhpcy5zZWVraW5nRm9yd2FyZCA9IGZhbHNlLCA1MDB9KTsgLy8gUHJldmVudCB0aGlzIGV2ZW50IGZyb20gZmlyaW5nIG1vcmUgdGhhbiBvbmNlLlxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAvLyBCaW5kIHdoZW4gdGhlIHNvbmcgaGFzIGZpbmlzaGVkXHJcbiAgICAgICAgICAgIHdpZGdldC5iaW5kKFNDLldpZGdldC5FdmVudHMuRklOSVNILCAoZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgLy8gV2hlbiB0aGUgc29uZyBmaW5pc2hlcywgd2UgbmVlZCB0byBmaW5kIGEgbmV3IHNvbmcgdG8gcGxheS5cclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdmaW5pc2hlZCcpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5pc1BsYXlpbmcgPSBmYWxzZTtcclxuXHJcbiAgICAgICAgICAgICAgICAvLyBDaGVjayBpZiB1c2VyIGlzIHBsYXlpbmcgYSBwbGF5bGlzdFxyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuaXNQbGF5bGlzdCAmJiAhdGhpcy5pc1JlcGVhdGluZykge1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBvbGRTb25nSUQgPSB0aGlzLndpZGdldFRyYWNrLmlkO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMudG9nZ2xlUGxheSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMubG9hZFdpZGdldFNvbmcodGhpcy5jdXJQbGF5ZXIpOyAvLyBVcGRhdGUgdHJhY2sgaW5mbyB0byB0aGUgbmV4dCBzb25nIGluIHRoZSBwbGF5bGlzdFxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaXNQbGF5aW5nID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIENoZWNrIGlmIHdlIGhhdmUgcmVhY2hlZCB0aGUgZW5kIG9mIHRoZSBwbGF5bGlzdFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAob2xkU29uZ0lEID09PSB0aGlzLndpZGdldFRyYWNrLmlkKSB7IC8vIElmIHRoZSBsYXN0IHNvbmcgd2UgcGxheWVkIGhhcyB0aGUgc2FtZSBJRCBhcyB0aGUgbmV3IG9uZSwgZmV0Y2ggYSBuZXcgc29uZy4gKFNvdW5kQ2xvdWQgZW5kcyB1cCBsb29waW5nIHRoZSBsYXN0IHNvbmcgYWdhaW4pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmlzUGxheWxpc3QgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0Q3VySW5kZXggPSAwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRUcmFja0NvdW50ID0gMDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZmV0Y2hOZXh0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlc3RhcnRTb25nKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnRvZ2dsZVBsYXkoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY3VyUGxheWVyLnBsYXkoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0sIDIwMCk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIC8vIENoZWNrIGlmIHJlcGVhdCBpcyBvbiBmaXJzdC4gVE9ETzogTWFrZSBpdCB3b3JrIHdpdGggcGxheWxpc3RzXHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5pc1JlcGVhdGluZykge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmlzUGxheWxpc3QpIHsgLy8gSWYgd2UgYXJlIHJlcGVhdGluZyBpbiBhIHBsYXlsaXN0LCB3ZSBuZWVkIHRvIGdvIGJhY2sgdG8gcHJldmlvdXMgc29uZyBzaW5jZSB0aGUgQVBJIHByZWxvYWRzIHRoZSBuZXh0IG9uZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlc3RhcnRTb25nKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY3VyUGxheWVyLnBhdXNlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY3VyUGxheWVyLnBhdXNlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQodGhpcy5jdXJQbGF5ZXIucHJldigpLCAyMDApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gRWxzZSB3ZSBjYW4ganVzdCByZXN0YXJ0IHRoZSBzb25nIChBUEkgZG9lcyBub3QgcHJlbG9hZCBzb25nKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlc3RhcnRTb25nKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudG9nZ2xlUGxheSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAvLyBDaGVjayBpZiB0aGUgcXVldWUgaXMgbm90IGVtcHR5IGFuZCBwbGF5IHdoYXRldmVyIHNvbmcgdGhhdCBpcyBuZXh0IGluIHRoZSBxdWV1ZVxyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMucXVldWUubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBuZXh0U29uZyA9IHRoaXMucXVldWUucG9wKCk7IC8vIFBvcCB0aGUgbmV4dCBzb25nXHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChuZXh0U29uZykgeyAvLyBJZiBub3QgbnVsbFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmN1clBsYXllci5sb2FkKG5leHRTb25nLnRyYWNrLnBlcm1hbGlua191cmwpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHRoaXMubG9hZFdpZGdldFNvbmcodGhpcy5jdXJQbGF5ZXIpLCAyMDAwKTsgLy8gVXBkYXRlIHBsYXllciBpbmZvLCBzb25nIHdpbGwgYmUgYWRkZWQgdG8gaGlzdG9yeSBoZXJlXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICghdGhpcy5oYXNCZWVuRmV0Y2hlZCkgeyAvLyBJZiB3ZSBoYXZlIGZldGNoZWQgYSBzb25nIGFscmVhZHksIGRvIG5vdCBmZXRjaCBhbm90aGVyIG9uZS5cclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmZldGNoTmV4dCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaGFzQmVlbkZldGNoZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIC8vIEJpbmQgcGxheSBzdGF0ZSBldmVudFxyXG4gICAgICAgICAgICB3aWRnZXQuYmluZChTQy5XaWRnZXQuRXZlbnRzLlBMQVksIChlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnRvZ2dsZVBsYXlTdGF0ZSh0cnVlKTtcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAvLyBCaW5kIHBhdXNlIHN0YXRlIGV2ZW50XHJcbiAgICAgICAgICAgIHdpZGdldC5iaW5kKFNDLldpZGdldC5FdmVudHMuUEFVU0UsIChlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnRvZ2dsZVBsYXlTdGF0ZShmYWxzZSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgLy8gVGhyb3cgZXJyb3IgaW4gY2FzZSB1c2VyIGVudGVycyBpbnZhbGlkIFVSTFxyXG4gICAgICAgICAgICB3aWRnZXQuYmluZChTQy5XaWRnZXQuRXZlbnRzLkVSUk9SLCAoZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgYWxlcnQoJ0Vycm9yLCB1bmFibGUgdG8gbG9hZCByZXNvdXJjZS4nKTtcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogVGhpcyBmdW5jdGlvbiBpcyBkZXNpZ25lZCB0byBnZXQgYSByYW5kb20gdHJhY2sgZnJvbSBTb3VuZENsb3VkXHJcbiAgICAgKi9cclxuICAgIGdldFJhbmRvbVRyYWNrKCkge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIC8vIENob29zZSB0byB1c2Ugb2xkIHRyYWNrIGlkcyBvciBuZXcgdHJhY2sgaWRzXHJcbiAgICAgICAgICAgIGxldCBjaG9vc2VJZCA9IChNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAxMCkpO1xyXG4gICAgICAgICAgICBsZXQgdHJhY2tJZCA9IDA7XHJcblxyXG4gICAgICAgICAgICAvLyBHZW5lcmF0ZSByYW5kb20gc29uZyBpZC4gR2l2ZSBzbGlnaHQgcHJlZmVyZW5jZSB0byBuZXdlciB0cmFja3MgXHJcbiAgICAgICAgICAgIGlmIChjaG9vc2VJZCA+IDQpIHtcclxuICAgICAgICAgICAgICAgIHRyYWNrSWQgPSBNYXRoLmZsb29yKChNYXRoLnJhbmRvbSgpICogUkFORF9DT1VOVF8zKSArIE9GRlNFVF8zKTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChjaG9vc2VJZCA+IDIpIHtcclxuICAgICAgICAgICAgICAgIHRyYWNrSWQgPSBNYXRoLmZsb29yKChNYXRoLnJhbmRvbSgpICogUkFORF9DT1VOVF8yKSArIE9GRlNFVF8yKTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChjaG9vc2VJZCA+IDEpIHtcclxuICAgICAgICAgICAgICAgIHRyYWNrSWQgPSBNYXRoLmZsb29yKChNYXRoLnJhbmRvbSgpICogUkFORF9DT1VOVF8xKSArIE9GRlNFVF8xKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRyYWNrSWQgPSBNYXRoLmZsb29yKChNYXRoLnJhbmRvbSgpICogUkFORF9DT1VOVCkgKyBPRkZTRVQpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnaW4gaWQnKTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiB0cmFja0lkO1xyXG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ2dldFJhbmRvbVRyYWNrKCkgLSAnICsgZS50b1N0cmluZygpKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBFeHRyYWN0cyBhZGRyZXNzIHBhcmFtdGVycyBieSBuYW1lIGFuZCBsb2FkcyB0aGUgYXBwcm9wcmlhdGUgY29udGVudC5cclxuICAgICAqIFxyXG4gICAgICogXHJcbiAgICAgKiBAbWVtYmVyb2YgUGxheWVyXHJcbiAgICAgKi9cclxuICAgIGNoZWNrUGFyYW1zQW5kRmV0Y2goKSB7XHJcbiAgICAgICAgLy8gRmV0Y2ggcGFyYW0gdmFsdWVzIGlmIHByZXNlbnRcclxuICAgICAgICBsZXQgaWQgPSB0aGlzLmdldFVSTFBhcmFtc0J5TmFtZSgnaWQnLCB3aW5kb3cubG9jYXRpb24uaHJlZik7XHJcbiAgICAgICAgbGV0IHVybCA9IHRoaXMuZ2V0VVJMUGFyYW1zQnlOYW1lKCd1cmwnLCB3aW5kb3cubG9jYXRpb24uaHJlZik7XHJcblxyXG4gICAgICAgIC8vIERvIG5vdCBmZXRjaCBhIHJhbmRvbSBzb25nIGlmIGFuIGlkIHdhcyBhbHJlYWR5IHByb3ZpZGVkXHJcbiAgICAgICAgaWYgKGlkKSAvLyBpZCB0YWtlcyB0YWtlcyBwcmVjZWRlbmNlXHJcbiAgICAgICAgICAgIHRoaXMuc3RyZWFtU29uZyhpZCk7XHJcbiAgICAgICAgZWxzZSBpZiAodXJsKVxyXG4gICAgICAgICAgICB0aGlzLmN1clBsYXllci5sb2FkKHVybCk7IC8vIExvYWQgdGhlIHNvbmcgYnkgdXJsIChXaWRnZXQgQVBJIHRha2VzIGNhcmUgb2YgdGhlIHJlc3QpXHJcbiAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICB0aGlzLmZldGNoTmV4dCgpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogVXBkYXRlIHRoZSBVSSBjb250cm9scyBmb3Igd2hlbiB0aGUgc29uZyBpcyBwbGF5aW5nXHJcbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IHBsYXlpbmcgLSBpZiB0aGUgc29uZyBpcyBwbGF5aW5nIG9yIG5vdFxyXG4gICAgICovXHJcbiAgICB0b2dnbGVQbGF5U3RhdGUocGxheWluZykge1xyXG4gICAgICAgIGlmIChwbGF5aW5nKSB7XHJcbiAgICAgICAgICAgIHRoaXMucGxheUJ0bi5pbm5lckhUTUwgPSAnPGkgY2xhc3M9XCJmYSBmYS1wYXVzZVwiIGFyaWEtaGlkZGVuPVwidHJ1ZVwiPjwvaT4nO1xyXG4gICAgICAgICAgICBkb2N1bWVudC50aXRsZSA9IGBcXHUyNUI2ICAgTmltYnVzIC0gJHt0aGlzLndpZGdldFRyYWNrLnRpdGxlfWA7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5wbGF5QnRuLmlubmVySFRNTCA9ICc8aSBjbGFzcz1cImZhIGZhLXBsYXlcIiBhcmlhLWhpZGRlbj1cInRydWVcIj48L2k+JztcclxuICAgICAgICAgICAgZG9jdW1lbnQudGl0bGUgPSBgXFx1MjNGOCAgIE5pbWJ1cyAtICR7dGhpcy53aWRnZXRUcmFjay50aXRsZX1gO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyBVVElMIGZ1bmN0aW9uc1xyXG4gICAgLyoqXHJcbiAgICAgKiBTZWVrIHRvIG5leHQgc29uZyBpbiBxdWV1ZVxyXG4gICAgICovXHJcbiAgICBzZWVrRm9yd2FyZCgpIHtcclxuICAgICAgICAvLyBJZiB3ZSBhcmUgaW4gcGxheWxpc3QgbW9kZSwgcGxheSB0aGUgbmV4dCBzb25nIGluIHRoZSBwbGF5bGlzdCBhbmQgZG8gbm90IGZldGNoIGEgbmV3IHNvbmdcclxuICAgICAgICBpZiAodGhpcy5pc1BsYXlsaXN0KSB7XHJcbiAgICAgICAgICAgIGxldCBuZXh0U29uZ0lEID0gdGhpcy53aWRnZXRUcmFjay5pZDtcclxuICAgICAgICAgICAgdGhpcy5zZWVraW5nRm9yd2FyZCA9IHRydWU7XHJcbiAgICAgICAgICAgIHRoaXMucmVzdGFydFNvbmcoKTtcclxuICAgICAgICAgICAgdGhpcy5jdXJQbGF5ZXIucGF1c2UoKTtcclxuICAgICAgICAgICAgdGhpcy5jdXJQbGF5ZXIucGF1c2UoKTsgLy8gV2lkZ2V0IG5vdCByZWFsbHkgcmVzcG9uc2l2ZSB3aGVuIHVzZXIgZ29lcyBiYWNrIGFuZCBmb3J0aCBxdWlja2x5XHJcbiAgICAgICAgICAgIHNldFRpbWVvdXQodGhpcy5jdXJQbGF5ZXIubmV4dCgpLCAyMDApO1xyXG4gICAgICAgICAgICB0aGlzLnJlc3RhcnRTb25nKCk7IC8vIFNlZW1zIHdlaXJkIHRvIGNhbGwgcmVzdGFydFNvbmcoKSBzbyBtYW55IHRpbWVzLCBidXQgdGhpcyBpcyB1c2VkIHRvIHJlc2V0IHRoZSBzb25ncyBhbmQgYXZvaWQgdGhlIHdlaXJkIGJ1ZyB3aGVyZSB0aGUgcGxheWVyIHBsYXlzIDIgc29uZ3Mgc2ltdWxhdGVub3VzbHkuXHJcbiAgICAgICAgICAgIHRoaXMuY3VyUGxheWVyLnBsYXkoKTtcclxuICAgICAgICAgICAgdGhpcy5jdXJQbGF5ZXIucGF1c2UoKTsgLy8gU2FtZSBpbnRlcnJ1cHRlZCBQcm9taXNlIGlzc3VlIGZyb20gQVBJXHJcbiAgICAgICAgICAgIHRoaXMuY3VyUGxheWVyLnBsYXkoKTtcclxuICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmxvYWRXaWRnZXRTb25nKHRoaXMuY3VyUGxheWVyKTtcclxuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHRoaXMud2lkZ2V0VHJhY2suaWQgKyAnIC0gJyArIG5leHRTb25nSUQpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLndpZGdldFRyYWNrLmlkID09PSBuZXh0U29uZ0lEKSB7IC8vIElmIHdlIGhhdmUgcmVhY2hlZCB0aGUgZW5kIG9mIHRoZSBwbGF5bGlzdFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmlzUGxheWxpc3QgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRDdXJJbmRleCA9IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0VHJhY2tDb3VudCA9IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZmV0Y2hOZXh0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSwgMjAwKTtcclxuXHJcbiAgICAgICAgICAgIH0sIDIwMCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgbGV0IG5leHRTb25nID0gdGhpcy5xdWV1ZS5wb3AoKTsgLy8gUG9wIHRoZSBuZXh0IHNvbmdcclxuXHJcbiAgICAgICAgICAgIGlmIChuZXh0U29uZykgeyAvLyBJZiBub3QgbnVsbFxyXG4gICAgICAgICAgICAgICAgdGhpcy5jdXJQbGF5ZXIubG9hZChuZXh0U29uZy50cmFjay5wZXJtYWxpbmtfdXJsKTtcclxuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gdGhpcy5sb2FkV2lkZ2V0U29uZyh0aGlzLmN1clBsYXllciksIDIwMDApOyAvLyBVcGRhdGUgcGxheWVyIGluZm8sIHdpbGwgYWRkIHNvbmcgdG8gaGlzdG9yeVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmV3aW5kIHRvIHByZXZpb3VzIHNvbmdcclxuICAgICAqL1xyXG4gICAgc2Vla0JhY2soKSB7XHJcbiAgICAgICAgLy8gdGhpcy5pc1BsYXlsaXN0ID0gZmFsc2U7IC8vIEV4aXQgcGxheWxpc3QgbW9kZSBzbyB3ZSBkb24ndCBlbmQgdXAgc3R1Y2sgaW4gYSBsb29wIHdpdGggc29uZ3NcclxuICAgICAgICAvLyBJZiB3ZSBhcmUgaW4gYSBwbGF5bGlzdCwgc2ltcGx5IG1vdmUgYmFjayB0byB0aGUgcHJldmlvdXMgc29uZ1xyXG4gICAgICAgIGlmICh0aGlzLmlzUGxheWxpc3QpIHtcclxuICAgICAgICAgICAgbGV0IGxhc3RTb25nSUQgPSB0aGlzLndpZGdldFRyYWNrLmlkO1xyXG4gICAgICAgICAgICB0aGlzLnJlc3RhcnRTb25nKCk7XHJcbiAgICAgICAgICAgIHRoaXMuY3VyUGxheWVyLnBhdXNlKCk7XHJcbiAgICAgICAgICAgIHRoaXMuY3VyUGxheWVyLnBhdXNlKCk7XHJcbiAgICAgICAgICAgIHNldFRpbWVvdXQodGhpcy5jdXJQbGF5ZXIucHJldigpLCAyMDApOyAvLyBQbGF5ZXIgbm90IGNvb3BlcmF0aW5nIHdpdGggYXN5bmNcclxuICAgICAgICAgICAgdGhpcy5yZXN0YXJ0U29uZygpOyAvLyBTZWVtcyB3ZWlyZCB0byBjYWxsIHJlc3RhcnRTb25nKCkgc28gbWFueSB0aW1lcywgYnV0IHRoaXMgaXMgdXNlZCB0byByZXNldCB0aGUgc29uZ3MgYW5kIGF2b2lkIHRoZSB3ZWlyZCBidWcgd2hlcmUgdGhlIHBsYXllciBwbGF5cyAyIHNvbmdzIHNpbXVsYXRlbm91c2x5LlxyXG4gICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMubG9hZFdpZGdldFNvbmcodGhpcy5jdXJQbGF5ZXIpO1xyXG4gICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2codGhpcy53aWRnZXRUcmFjay5pZCArICcgLSAnICsgbGFzdFNvbmdJRCk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMud2lkZ2V0VHJhY2suaWQgPT09IGxhc3RTb25nSUQpIHsgLy8gSWYgd2UgaGF2ZSByZWFjaGVkIHRoZSBiZWdpbm5pbmcgb2YgdGhlIHBsYXlsaXN0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubG9hZFByZXZpb3VzU29uZygpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0sIDIwMCk7IC8vIE5lZWRlZCB0byBiZSBkb25lIHRvIGFsbG93IHRpbWUgZm9yIGFzeW5jIHJlcXVlc3QgdG8gY29tcGxldGUgaW4gbG9hZFdpZGdldFNvbmcoKVxyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIH0sIDIwMCk7XHJcbiAgICAgICAgICAgIHRoaXMuY3VyUGxheWVyLnBsYXkoKTtcclxuICAgICAgICAgICAgdGhpcy5jdXJQbGF5ZXIucGF1c2UoKTsgLy8gU2FtZSBpbnRlcnJ1cHRlZCBQcm9taXNlIGlzc3VlIGZyb20gQVBJXHJcbiAgICAgICAgICAgIHRoaXMuY3VyUGxheWVyLnBsYXkoKTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zb2xlLmxvZygnbm90IHBsYXlsaXN0Jyk7XHJcblxyXG4gICAgICAgIHRoaXMubG9hZFByZXZpb3VzU29uZygpO1xyXG4gICAgfVxyXG5cclxuICAgIGxvYWRQcmV2aW91c1NvbmcoKSB7XHJcbiAgICAgICAgdGhpcy5pc1BsYXlsaXN0ID0gZmFsc2U7XHJcblxyXG4gICAgICAgICAvLyBQb3AgY3VycmVudCBzb25nIGFuZCBhZGQgaXQgdG8gcXVldWUgc28gaXQgaXMgb3VyIG5leHQgc29uZ1xyXG4gICAgICAgIHRoaXMucXVldWUucHVzaCh0aGlzLmhpc3RvcnkucG9wKCkpO1xyXG4gICAgICAgIGxldCBwcmV2U29uZyA9IHRoaXMuaGlzdG9yeVt0aGlzLmhpc3RvcnkubGVuZ3RoIC0gMV0udHJhY2s7XHJcblxyXG4gICAgICAgIGlmIChwcmV2U29uZykgeyAvLyBJZiBub3QgbnVsbFxyXG4gICAgICAgICAgICB0aGlzLmN1clBsYXllci5sb2FkKHByZXZTb25nLnBlcm1hbGlua191cmwpO1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhwcmV2U29uZy5wZXJtYWxpbmtfdXJsKTtcclxuICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB0aGlzLmxvYWRXaWRnZXRTb25nKHRoaXMuY3VyUGxheWVyKSwgMjAwMCk7IC8vIFVwZGF0ZSBwbGF5ZXIgaW5mb1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFJlc2V0cyB0aGUgc29uZyBiYWNrIHRvIDBcclxuICAgICAqL1xyXG4gICAgcmVzdGFydFNvbmcoKSB7XHJcbiAgICAgICAgdGhpcy5jdXJQbGF5ZXIuc2Vla1RvKDApO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogSW5jcmVhc2VzIHRoZSB2b2x1bWUgd2l0aCB0aGUgbWF4aW11bSBib3VuZCBiZWluZyAxMDAuXHJcbiAgICAgKiBAcGFyYW0ge2Zsb2F0fSBvZmZzZXQgLSBob3cgbXVjaCB0byBpbmNyZWFzZSB0aGUgdm9sdW1lIGJ5XHJcbiAgICAgKi9cclxuICAgIHZvbHVtZVVwKG9mZnNldCkge1xyXG4gICAgICAgIHRoaXMuY3VyUGxheWVyLmdldFZvbHVtZSgodm9sKSA9PiB7XHJcbiAgICAgICAgICAgIGxldCBuZXdWb2wgPSBNYXRoLm1pbigxMDAsIHZvbCArIG9mZnNldCk7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0Vm9sdW1lKG5ld1ZvbCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBMb3dlcnMgdGhlIHZvbHVtZSBieSBvZmZzZXQgd2l0aCB0aGUgbWluaW11bSBib3VuZCBiZWluZyAwLlxyXG4gICAgICogQHBhcmFtIHtmbG9hdH0gb2Zmc2V0IC0gaG93IG11Y2ggdG8gbG93ZXIgdGhlIHZvbHVtZSBieVxyXG4gICAgICovXHJcbiAgICB2b2x1bWVEb3duKG9mZnNldCkge1xyXG4gICAgICAgIHRoaXMuY3VyUGxheWVyLmdldFZvbHVtZSgodm9sKSA9PiB7XHJcbiAgICAgICAgICAgIGxldCBuZXdWb2wgPSBNYXRoLm1heCgwLCB2b2wgLSBvZmZzZXQpO1xyXG4gICAgICAgICAgICB0aGlzLnNldFZvbHVtZShuZXdWb2wpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogU2V0cyB0aGUgdm9sdW1lIG9mIHRoZSBwbGF5ZXIgd2hpbGUgdXBkYXRpbmcgVUkgY29tcG9uZW50cyBhbmQgdXNlciBzZXR0aW5nLlxyXG4gICAgICogXHJcbiAgICAgKiBAcGFyYW0ge051bWJlcn0gdm9sIC0gdm9sdW1lIGxldmVsXHJcbiAgICAgKiBcclxuICAgICAqIEBtZW1iZXJvZiBQbGF5ZXJcclxuICAgICAqIFxyXG4gICAgICovXHJcbiAgICBzZXRWb2x1bWUodm9sKSB7XHJcbiAgICAgICAgdGhpcy5jdXJQbGF5ZXIuc2V0Vm9sdW1lKHZvbCk7XHJcbiAgICAgICAgdGhpcy52b2x1bWVTbGlkZXIudmFsdWUgPSB2b2w7XHJcbiAgICAgICAgU2V0dGluZ3Muc3RvcmVQcmVmKCdwbGF5ZXJWb2x1bWUnLCB2b2wpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogVXBkYXRlcyBjb250cm9scyB0byBzaG93IHRoYXQgdGhlIHNvbmcgaXMgaW4gcHJvZ3Jlc3MuXHJcbiAgICAgKi9cclxuICAgIHRvZ2dsZVBsYXkoKSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLmlzUGxheWluZykge1xyXG4gICAgICAgICAgICAvLyBOdWFuY2VkIGJ1dCBhZGRzIHRoYXQgJ2JyZWFrJyBpbiB0aGUgc291bmQgc28geW91IGtub3cgaXQgd2FzIHByZXNzZWQganVzdCBpbiBjYXNlIGlzUGxheWluZyBpcyB0aGUgd3JvbmcgdmFsdWVcclxuICAgICAgICAgICAgdGhpcy5jdXJQbGF5ZXIucGxheSgpOyBcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ2lzUGxheWluZyA9IHRydWUnKTtcclxuICAgICAgICAgICAgdGhpcy5pc1BsYXlpbmcgPSB0cnVlO1xyXG4gICAgICAgICAgICAvLyB0aGlzLm1haW5QbGF5ZXIuaW5uZXJIVE1MID0gU29uZ0luZm8oKHRoaXMuY3VyVHJhY2sudHJhY2suYXJ0d29ya191cmwgPT09IG51bGwgPyAnLi4vaW1nL2NkLnBuZycgOiB0aGlzLmN1clRyYWNrLnRyYWNrLmFydHdvcmtfdXJsLnJlcGxhY2UoJ2xhcmdlJywgJ3Q1MDB4NTAwJykpLCB0aGlzLmN1clRyYWNrLnRyYWNrKTtcclxuICAgICAgICAgICAgLy8gVXBkYXRlIHBsYXkgc3RhdGVcclxuICAgICAgICAgICAgdGhpcy50b2dnbGVQbGF5U3RhdGUodHJ1ZSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5jdXJQbGF5ZXIucGF1c2UoKTtcclxuXHJcbiAgICAgICAgICAgIC8vIFVwZGF0ZSBwbGF5IHN0YXRlXHJcbiAgICAgICAgICAgIHRoaXMudG9nZ2xlUGxheVN0YXRlKGZhbHNlKTtcclxuICAgICAgICAgICAgdGhpcy5pc1BsYXlpbmcgPSBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBGZXRjaCB0aGUgbmV4dCBzb25nIGFuZCB2ZXJpZnkgdGhhdCB0aGUgc29uZyBleGlzdHMgKG5vbiA0MDQpLlxyXG4gICAgICovXHJcbiAgICBmZXRjaE5leHQoKSB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ1F1ZXVlIGxlbmd0aCAtICcgKyB0aGlzLnF1ZXVlLmxlbmd0aCk7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLnF1ZXVlLmxlbmd0aCA+IDApIHsgLy8gRmlyc3QgY2hlY2sgaWYgdGhlIHF1ZXVlIGlzIG5vbi1lbXB0eVxyXG4gICAgICAgICAgICAgICAgbGV0IG5leHRTb25nID0gdGhpcy5xdWV1ZS5wb3AoKTsgLy8gUG9wIHRoZSBuZXh0IHNvbmdcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAobmV4dFNvbmcpIHsgLy8gSWYgbm90IG51bGxcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmhpc3RvcnkucHVzaCh7aWQ6IG5leHRTb25nLmlkLCB0cmFjazogbmV4dFNvbmd9KTsgLy8gQWRkIGl0IHRvIGhpc3RvcnlcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmN1clBsYXllci5sb2FkKG5leHRTb25nLnBlcm1hbGlua191cmwpO1xyXG4gICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gdGhpcy5sb2FkV2lkZ2V0U29uZyh0aGlzLmN1clBsYXllciksIDIwMDApOyAvLyBVcGRhdGUgcGxheWVyIGluZm9cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIHsgLy8gSWYgdGhlIHF1ZXVlIGlzIGVtcHR5LCBmZXRjaCBhIG5ldyBzb25nXHJcbiAgICAgICAgICAgICAgICB0aGlzLmN1clBsYXllci5wYXVzZSgpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yZXN0YXJ0U29uZygpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnZmV0Y2hOZXh0JyArIGUudG9TdHJpbmcoKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGxldCBpZCA9IHRoaXMuZ2V0UmFuZG9tVHJhY2soKTsgLy8gV29ya3MgZm9yIHRyYWNrcyB3aXRoIDQwMyBlcnJvcnMgaW4gb3RoZXIgQVBJXHJcblxyXG4gICAgICAgIFNDLmdldCgnL3RyYWNrcy8nICsgaWQpLnRoZW4oKHRyYWNrKSA9PiB7IC8vIENoZWNrIGlmIHRoZXJlIGFyZSByZXN1bHRzXHJcbiAgICAgICAgICAgIC8vIFJlYWxseSBqdXN0IGRlc2lnbmVkIHRvIGNoZWNrIGlmIHRoZSBzb25nIGFjdHVhbGx5IGV4aXN0c1xyXG4gICAgICAgICAgIHRoaXMuc3RyZWFtU29uZyhpZCk7XHJcbiAgICAgICAgfSwgKGVycikgPT4ge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIuc3RhdHVzKTtcclxuICAgICAgICAgICAgLy8gaWYgKGVyci5zdGF0dXMgPT09IDApIHsgLy8gSW52YWxpZCBBUEkga2V5XHJcbiAgICAgICAgICAgIC8vICAgICBjb25zb2xlLmxvZygnMC80MDEgVW5hdXRob3JpemVkLiBQb3NzaWJsZSBJbnZhbGlkIFNvdW5kQ2xvdWQga2V5JylcclxuICAgICAgICAgICAgLy8gICAgIHRocm93ICcwLzQwMSBVbmF1dGhvcml6ZWQuIFBvc3NpYmxlIEludmFsaWQgU291bmRDbG91ZCBrZXknXHJcbiAgICAgICAgICAgIC8vIH1cclxuICAgICAgICAgICAgaWYgKGVyci5zdGF0dXMgPT09IDQwMykgeyAvLyBQbGF5IHRoZSBzb25nIGFueXdheSBldmVuIGlmIHRoaXMgQVBJIHJlcXVpZXN0IHJldHVybnMgYSBmb3JiaWRkZW4gcmVxdWVzdCAoU291bmRjbG91ZCBwcm9ibGVtKVxyXG4gICAgICAgICAgICAgICAgdGhpcy5zdHJlYW1Tb25nKGlkKTtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyBJZiB0aGVyZSBpcyBubyBzb25nIHdpdGggdGhlIGFzc29jaWF0ZWQgSUQsIGZldGNoIGEgbmV3IG9uZS5cclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ3RyYWNrIGZldGNoIGZhaWwnICsgaWQpO1xyXG4gICAgICAgICAgICB0aGlzLmZldGNoTmV4dCgpO1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygndHJhY2sgZmV0Y2ggZmFpbCBwb3N0JyArIGlkKTtcclxuICAgICAgICB9KS5jYXRjaCgoZXJyKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGVyci5zdGF0dXMpO1xyXG4gICAgICAgICAgICBpZiAoZXJyLnN0YXR1cyA9PT0gMCkgeyAvLyBJbnZhbGlkIEFQSSBrZXlcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCcwLzQwMSBVbmF1dGhvcml6ZWQuIFBvc3NpYmxlIEludmFsaWQgU291bmRDbG91ZCBrZXknKVxyXG4gICAgICAgICAgICAgICAgdGhyb3cgJzAvNDAxIFVuYXV0aG9yaXplZC4gUG9zc2libGUgSW52YWxpZCBTb3VuZENsb3VkIGtleSc7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGVyci5zdGF0dXMgPT09IDQwMykgeyAvLyBQbGF5IHRoZSBzb25nIGFueXdheSBldmVuIGlmIHRoaXMgQVBJIHJlcXVpZXN0IHJldHVybnMgYSBmb3JiaWRkZW4gcmVxdWVzdCAoU291bmRjbG91ZCBwcm9ibGVtKVxyXG4gICAgICAgICAgICAgICAgdGhpcy5zdHJlYW1Tb25nKGlkKTtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyBJZiB0aGVyZSBpcyBubyBzb25nIHdpdGggdGhlIGFzc29jaWF0ZWQgSUQsIGZldGNoIGEgbmV3IG9uZS5cclxuICAgICAgICAgICAgdGhpcy5mZXRjaE5leHQoKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFN0cmVhbSB0aGUgc29uZyB3aGVuIGEgdmFsaWQgaWQgaXMgZm91bmRcclxuICAgICAqIEBwYXJhbSB7aW50fSBpZCAtIGhvbGRzIHRoZSBzb25nIGlkXHJcbiAgICAgKi9cclxuICAgIHN0cmVhbVNvbmcoaWQpIHtcclxuICAgICAgICBjb25zb2xlLmxvZygndHJhY2sgZmV0Y2ggc3VjY2VzcyAnICsgaWQpO1xyXG4gICAgICAgIHRoaXMuY3VyUGxheWVyLmxvYWQoYGh0dHBzJTNBLy9hcGkuc291bmRjbG91ZC5jb20vdHJhY2tzLyR7aWR9YCArIFdJREdFVF9QQVJBTVMpO1xyXG4gICAgICAgIHRoaXMudG9nZ2xlUGxheVN0YXRlKHRydWUpO1xyXG4gICAgICAgIHNldFRpbWVvdXQoKCkgPT4gdGhpcy5sb2FkV2lkZ2V0U29uZyh0aGlzLmN1clBsYXllciksIDIwMDApO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogRmluZCB0aGUgc29uZyBiYXNlZCBvbiB1c2VyIGVudGVyZWQga2V5d29yZHMsIGxpa2UgJ0knbSBGZWVsaW5nIEx1Y2t5JyBvbiBHb29nbGUuXHJcbiAgICAgKiBcclxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBxdWVyeSAtIHNlYXJjaCB0ZXJtcyB0byBmaW5kIHNvbmdcclxuICAgICAqIFxyXG4gICAgICogQG1lbWJlcm9mIFBsYXllclxyXG4gICAgICovXHJcbiAgICBnZXRUcmFja0J5S2V5V29yZChxdWVyeSkge1xyXG4gICAgICAgIC8vIEdldCBhIGxpc3Qgb2Ygc29uZ3MgYnkgdGhlIHNlYXJjaCBxdWVyeSBhbmQgcGxheSBmaXJzdCBjaG9pY2VcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBTQy5nZXQoJy90cmFja3MnLCB7cTogcXVlcnl9KS50aGVuKCh0cmFja3MpID0+IHtcclxuICAgICAgICAgICAgICAgIGlmICh0cmFja3MubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIExvYWQgdGhlIGZpcnN0IHNvbmdcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmN1clBsYXllci5sb2FkKHRyYWNrc1swXS5wZXJtYWxpbmtfdXJsKTsgLy8gVGhlIFwiSSdtIGZlZWxpbmcgbHVja3kgcGFydCBvZiB0aGUgc2VhcmNoXCJcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnZ2V0VHJhY2tCeUtleVdvcmQgRXJyb3IgLSAnICsgZS5tZXNzYWdlKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBGZXRjaGVzIHRyYWNrcyBieSBhIGxpc3Qgb2YgdGFncyBmcm9tIHRoZSB1c2VyIHNlcGFyYXRlZCBieSBjb21tYXMuXHJcbiAgICAgKiBcclxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSB0YWdMaXN0IC0gYSBzdHJpbmcgd2l0aCB0YWdzIHNlcGFyYXRlZCBieSBjb21tYXNcclxuICAgICAqIFxyXG4gICAgICogQG1lbWJlcm9mIFBsYXllclxyXG4gICAgICovXHJcbiAgICBnZXRUcmFja3NCeVRhZ3ModGFnTGlzdCkge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIC8vIENyZWF0ZSBvcHRpb25zIG9iamVjdCB0byBob2xkIHdoYXQgd2Ugd2FudCB0byBzZWFyY2ggZm9yXHJcbiAgICAgICAgICAgIGxldCBvcHRpb25zID0ge1xyXG4gICAgICAgICAgICAgICAgdGFnczogdGFnTGlzdCxcclxuICAgICAgICAgICAgICAgIGxpbWl0OiB0aGlzLnF1ZXVlTnVtXHJcbiAgICAgICAgICAgIH0gLy8gVE9ETzogQWxsb3cgdG8gbW9kaWZ5IGxpbWl0IGxhdGVyXHJcblxyXG4gICAgICAgICAgICBTQy5nZXQoJy90cmFja3MnLCBvcHRpb25zKS50aGVuKCh0cmFja3MpID0+IHtcclxuICAgICAgICAgICAgICAgIGlmICh0cmFja3MubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHRyYWNrcyk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGxldCB0cmFja0NvbGxlY3Rpb24gPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnNodWZmbGVRdWV1ZSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgdHJhY2tDb2xsZWN0aW9uID0gdGhpcy5zaHVmZmxlVHJhY2tzKHRyYWNrcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0cmFja0NvbGxlY3Rpb24gPSB0cmFja3MucmV2ZXJzZSgpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAvLyBRdWV1ZSBhbGwgdHJhY2tzIHRvIHRoZSBxdWV1ZSBvZiB0aGUgdXNlcidzIHBsYXlsaXN0LiBOb3RlIHRoYXQgcXVldWUgaXMgYWN0dWFsbHkgYWN0aW5nIGxpa2UgYSBzdGFjayBzaW5jZSB3ZSB1c2UgcHVzaCgpIGFuZCBwb3AoKVxyXG4gICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdHJhY2tDb2xsZWN0aW9uLmxlbmd0aCAtIDE7IGkrKykgeyAvLyBTa2lwIHRoZSBmaXJzdCBvbmUgc2luY2Ugd2UgYXJlIGFscmVhZHkgcGxheWluZyBpdCBhdCB0aGlzIHBvaW50IChuZWVkIHRvIHN1YnRyYWN0IHVwcGVyIGJvdW5kIGJ5IDEgc2luY2Ugd2Ugd2FudCB0byBleGNsdWRlIHRoZSBmaXJzdCB0cmFjayBmcm9tIHRoZSByZXZlcnNlZCBhcnJheSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5xdWV1ZS5wdXNoKHtpZDogdHJhY2tDb2xsZWN0aW9uW2ldLmlkLCB0cmFjazogdHJhY2tDb2xsZWN0aW9uW2ldfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHRyYWNrc1tpXS50aXRsZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAvLyBMb2FkIHRoZSBzb25nXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jdXJQbGF5ZXIubG9hZCh0cmFja0NvbGxlY3Rpb25bdHJhY2tDb2xsZWN0aW9uLmxlbmd0aCAtIDFdLnBlcm1hbGlua191cmwpO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gRGlzcGxheSB0b2FzdCBtZXNzYWdlIHdoZW4gZG9uZVxyXG4gICAgICAgICAgICAgICAgICAgIFV0aWxzLnNob3dUb2FzdChgJHt0cmFja3MubGVuZ3RofSB0cmFja3MgYWRkZWQgdG8gdGhlIHF1ZXVlLmApO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBVdGlscy5zaG93VG9hc3QoJ1NlYXJjaCByZXR1cm5lZCBubyByZXN1bHRzLiBQbGVhc2UgdHJ5IGFnYWluLicpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdnZXRUcmFja3NCeVRhZ3MgRXJyb3IgLSAnICsgZS5tZXNzYWdlKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBTZWFyY2hlcyBmb3IgYSBwbGF5bGlzdCBieSBrZXl3b3JkLlxyXG4gICAgICogXHJcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gcXVlcnkgLSBuYW1lIG9mIHRoZSBwbGF5bGlzdFxyXG4gICAgICogXHJcbiAgICAgKiBAbWVtYmVyb2YgUGxheWVyXHJcbiAgICAgKi9cclxuICAgIGdldFNldEJ5S2V5V29yZChxdWVyeSkge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIFNDLmdldCgnL3BsYXlsaXN0cycsIHtxOiBxdWVyeX0pLnRoZW4oKHNldHMpID0+IHtcclxuICAgICAgICAgICAgICAgIGlmIChzZXRzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5zaHVmZmxlUXVldWUpIHsgLy8gSWYgd2Ugd2FudCB0byBzaHVmZmxlIHRoZSByZXN1bHRzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIExvYWQgdGhlIHNldFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgcmVzSW5kZXggPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAoc2V0cy5sZW5ndGggKyAxKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY3VyUGxheWVyLmxvYWQoc2V0c1tyZXNJbmRleF0ucGVybWFsaW5rX3VybCk7IC8vIFRoZSBcIkknbSBmZWVsaW5nIGx1Y2t5IHBhcnQgb2YgdGhlIHNlYXJjaFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0VHJhY2tDb3VudCA9IHNldHNbcmVzSW5kZXhdLnRyYWNrX2NvdW50O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBVdGlscy5zaG93VG9hc3QoYE5vdyBwbGF5aW5nICR7c2V0c1tyZXNJbmRleF0udGl0bGV9ICgke3RoaXMuc2V0VHJhY2tDb3VudH0gc29uZ3MpYClcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBMb2FkIHRoZSBzZXRcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jdXJQbGF5ZXIubG9hZChzZXRzWzBdLnBlcm1hbGlua191cmwpOyAvLyBUaGUgXCJJJ20gZmVlbGluZyBsdWNreSBwYXJ0IG9mIHRoZSBzZWFyY2hcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNldFRyYWNrQ291bnQgPSBzZXRzWzBdLnRyYWNrX2NvdW50O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBVdGlscy5zaG93VG9hc3QoYE5vdyBwbGF5aW5nICR7c2V0c1swXS50aXRsZX0gKCR7dGhpcy5zZXRUcmFja0NvdW50fSBzb25ncylgKVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnZ2V0U2V0QnlLZXlXb3JkIEVycm9yIC0gJyArIGUubWVzc2FnZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogU2VhcmNoZXMgZm9yIHRoZSBmaXJzdCBxdWV1ZU51bSBzb25ncyBieSBhIHVzZXIuXHJcbiAgICAgKiBcclxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSB1c2VyIC0gdXNlcm5hbWUgb2YgdGhlIHVzZXJcclxuICAgICAqIFxyXG4gICAgICogQG1lbWJlcm9mIFBsYXllclxyXG4gICAgICovXHJcbiAgICBnZXRUcmFja3NCeVVzZXIodXNlcikge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIFNDLnJlc29sdmUoYGh0dHBzOi8vc291bmRjbG91ZC5jb20vJHt1c2VyfWApLnRoZW4oKHJlc3BvbnNlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIENyZWF0ZSBvcHRpb25zIG9iamVjdCB0byBob2xkIHdoYXQgd2Ugd2FudCB0byBzZWFyY2ggZm9yXHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IG9wdGlvbnMgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxpbWl0OiB0aGlzLnF1ZXVlTnVtXHJcbiAgICAgICAgICAgICAgICAgICAgfSAvLyBUT0RPOiBBbGxvdyB0byBtb2RpZnkgbGltaXQgbGF0ZXJcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgU0MuZ2V0KGAvdXNlcnMvJHtyZXNwb25zZS5pZH0vdHJhY2tzYCwgb3B0aW9ucykudGhlbigodHJhY2tzKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHRyYWNrcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0cmFja3MubGVuZ3RoID4gMCkge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCB0cmFja0NvbGxlY3Rpb24gPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuc2h1ZmZsZVF1ZXVlKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyYWNrQ29sbGVjdGlvbiA9IHRoaXMuc2h1ZmZsZVRyYWNrcyh0cmFja3MpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyYWNrQ29sbGVjdGlvbiA9IHRyYWNrcy5yZXZlcnNlKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gUXVldWUgYWxsIHRyYWNrcyB0byB0aGUgcXVldWUgb2YgdGhlIHVzZXIncyBwbGF5bGlzdC4gTm90ZSB0aGF0IHF1ZXVlIGlzIGFjdHVhbGx5IGFjdGluZyBsaWtlIGEgc3RhY2sgc2luY2Ugd2UgdXNlIHB1c2goKSBhbmQgcG9wKClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdHJhY2tDb2xsZWN0aW9uLmxlbmd0aCAtIDE7IGkrKykgeyAvLyBTa2lwIHRoZSBmaXJzdCBvbmUgc2luY2Ugd2UgYXJlIGFscmVhZHkgcGxheWluZyBpdCBhdCB0aGlzIHBvaW50IChuZWVkIHRvIHN1YnRyYWN0IHVwcGVyIGJvdW5kIGJ5IDEgc2luY2Ugd2Ugd2FudCB0byBleGNsdWRlIHRoZSBmaXJzdCB0cmFjayBmcm9tIHRoZSByZXZlcnNlZCBhcnJheSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnF1ZXVlLnB1c2goe2lkOiB0cmFja0NvbGxlY3Rpb25baV0uaWQsIHRyYWNrOiB0cmFja0NvbGxlY3Rpb25baV19KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyh0cmFja3NbaV0udGl0bGUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBMb2FkIHRoZSBzb25nXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmN1clBsYXllci5sb2FkKHRyYWNrQ29sbGVjdGlvblt0cmFja0NvbGxlY3Rpb24ubGVuZ3RoIC0gMV0ucGVybWFsaW5rX3VybCk7IC8vIFRvcCBvZiB0aGUgcmVzdWx0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gRGlzcGxheSB0b2FzdCBtZXNzYWdlIHdoZW4gZG9uZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgVXRpbHMuc2hvd1RvYXN0KGAke3RyYWNrcy5sZW5ndGh9IHRyYWNrcyBhZGRlZCB0byB0aGUgcXVldWUuYCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBVdGlscy5zaG93VG9hc3QoJ1NlYXJjaCByZXR1cm5lZCBubyByZXN1bHRzLiBQbGVhc2UgdHJ5IGFnYWluLicpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ2dldFNvbmdzQnlVc2VyIEVycm9yIC0gJyArIGUubWVzc2FnZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogU2VhcmNoZXMgZm9yIHNvbmdzIGJ5IGdlbnJlcyAoc3RyaW5nIG9mIGdlbnJlcyBzZXBhcmF0ZWQgYnkgY29tbWFzKVxyXG4gICAgICogXHJcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gZ2VucmVMaXN0IC0gY29tbWEgc2VwYXJhdGVkIGxpc3Qgb2YgZ2VucmVzXHJcbiAgICAgKiBcclxuICAgICAqIEBtZW1iZXJvZiBQbGF5ZXJcclxuICAgICAqL1xyXG4gICAgZ2V0VHJhY2tzQnlHZW5yZXMoZ2VucmVMaXN0KSB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgLy8gQ3JlYXRlIG9wdGlvbnMgb2JqZWN0IHRvIGhvbGQgd2hhdCB3ZSB3YW50IHRvIHNlYXJjaCBmb3JcclxuICAgICAgICAgICAgbGV0IG9wdGlvbnMgPSB7XHJcbiAgICAgICAgICAgICAgICBnZW5yZXM6IGdlbnJlTGlzdCxcclxuICAgICAgICAgICAgICAgIGxpbWl0OiB0aGlzLnF1ZXVlTnVtXHJcbiAgICAgICAgICAgIH0gLy8gVE9ETzogQWxsb3cgdG8gbW9kaWZ5IGxpbWl0IGxhdGVyXHJcblxyXG4gICAgICAgICAgICBTQy5nZXQoJy90cmFja3MnLCBvcHRpb25zKS50aGVuKCh0cmFja3MpID0+IHtcclxuICAgICAgICAgICAgICAgIGlmICh0cmFja3MubGVuZ3RoID4gMCkge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBsZXQgdHJhY2tDb2xsZWN0aW9uID0gbnVsbDtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5zaHVmZmxlUXVldWUpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyYWNrQ29sbGVjdGlvbiA9IHRoaXMuc2h1ZmZsZVRyYWNrcyh0cmFja3MpO1xyXG4gICAgICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgICAgICAgICAgdHJhY2tDb2xsZWN0aW9uID0gdHJhY2tzLnJldmVyc2UoKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gUXVldWUgYWxsIHRyYWNrcyB0byB0aGUgcXVldWUgb2YgdGhlIHVzZXIncyBwbGF5bGlzdC4gTm90ZSB0aGF0IHF1ZXVlIGlzIGFjdHVhbGx5IGFjdGluZyBsaWtlIGEgc3RhY2sgc2luY2Ugd2UgdXNlIHB1c2goKSBhbmQgcG9wKClcclxuICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRyYWNrQ29sbGVjdGlvbi5sZW5ndGggLSAxOyBpKyspIHsgLy8gU2tpcCB0aGUgZmlyc3Qgb25lIHNpbmNlIHdlIGFyZSBhbHJlYWR5IHBsYXlpbmcgaXQgYXQgdGhpcyBwb2ludCAobmVlZCB0byBzdWJ0cmFjdCB1cHBlciBib3VuZCBieSAxIHNpbmNlIHdlIHdhbnQgdG8gZXhjbHVkZSB0aGUgZmlyc3QgdHJhY2sgZnJvbSB0aGUgcmV2ZXJzZWQgYXJyYXkpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucXVldWUucHVzaCh7aWQ6IHRyYWNrQ29sbGVjdGlvbltpXS5pZCwgdHJhY2s6IHRyYWNrQ29sbGVjdGlvbltpXX0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gTG9hZCB0aGUgc29uZ1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY3VyUGxheWVyLmxvYWQodHJhY2tDb2xsZWN0aW9uW3RyYWNrQ29sbGVjdGlvbi5sZW5ndGggLSAxXS5wZXJtYWxpbmtfdXJsKTtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIC8vIERpc3BsYXkgdG9hc3QgbWVzc2FnZSB3aGVuIGRvbmVcclxuICAgICAgICAgICAgICAgICAgICBVdGlscy5zaG93VG9hc3QoYCR7dHJhY2tzLmxlbmd0aH0gdHJhY2tzIGFkZGVkIHRvIHRoZSBxdWV1ZS5gKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgVXRpbHMuc2hvd1RvYXN0KCdTZWFyY2ggcmV0dXJuZWQgbm8gcmVzdWx0cy4gUGxlYXNlIHRyeSBhZ2Fpbi4nKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnZ2V0U29uZ3NCeUdlbnJlcyBFcnJvciAtICcgKyBlLm1lc3NhZ2UpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIENoZWNrcyBpZiBzb25nIGhpc3RvcnkgY29udGFpbnMgYSBzb25nIGJ5IGlkLlxyXG4gICAgICogXHJcbiAgICAgKiBAcGFyYW0ge051bWJlcn0gaWQgLSBpZCBvZiB0aGUgc29uZyB3ZSBhcmUgbG9va2luZyBmb3IuXHJcbiAgICAgKiBAcmV0dXJucyB7Qm9vbGVhbn1cclxuICAgICAqIFxyXG4gICAgICogQG1lbWJlcm9mIFBsYXllclxyXG4gICAgICovXHJcbiAgICBoaXN0b3J5Q29udGFpbnNJZChpZCkge1xyXG4gICAgICAgIGxldCBmb3VuZCA9IGZhbHNlO1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5oaXN0b3J5Lmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmhpc3RvcnlbaV0uaWQgPT09IGlkKSB7XHJcbiAgICAgICAgICAgICAgICBmb3VuZCA9IHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgICAgIHJldHVybiBmb3VuZDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEV4dHJhY3RzIHRoZSB1cmwgcGFyYW1zIHRvIHBsYXkgc3BlY2lmaWMgdHJhY2tzIG9uIGxvYWQuXHJcbiAgICAgKiBcclxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBuYW1lIC0gbmFtZSBvZiB0aGUgcGFyYW1cclxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSB1cmwgLSBjdXJyZW50IGFkZHJlc3MgbG9hZGVkIGJ5IHRoZSB1c2VyXHJcbiAgICAgKiBAcmV0dXJucyBcclxuICAgICAqIFxyXG4gICAgICogQG1lbWJlcm9mIFBsYXllclxyXG4gICAgICovXHJcbiAgICBnZXRVUkxQYXJhbXNCeU5hbWUobmFtZSwgdXJsKSB7XHJcbiAgICAgICAgaWYgKCF1cmwpIHVybCA9IHdpbmRvdy5sb2NhdGlvbi5ocmVmO1xyXG4gICAgICAgIG5hbWUgPSBuYW1lLnJlcGxhY2UoL1tcXFtcXF1dL2csIFwiXFxcXCQmXCIpO1xyXG4gICAgICAgIHZhciByZWdleCA9IG5ldyBSZWdFeHAoXCJbPyZdXCIgKyBuYW1lICsgXCIoPShbXiYjXSopfCZ8I3wkKVwiKSxcclxuICAgICAgICAgICAgcmVzdWx0cyA9IHJlZ2V4LmV4ZWModXJsKTtcclxuICAgICAgICBpZiAoIXJlc3VsdHMpIHJldHVybiBudWxsO1xyXG4gICAgICAgIGlmICghcmVzdWx0c1syXSkgcmV0dXJuICcnO1xyXG4gICAgICAgIHJldHVybiBkZWNvZGVVUklDb21wb25lbnQocmVzdWx0c1syXS5yZXBsYWNlKC9cXCsvZywgXCIgXCIpKTtcclxuICAgIH1cclxuXHJcbiAgICBzaHVmZmxlVHJhY2tzKHRyYWNrcykge1xyXG4gICAgICAgIGxldCB0ZW1wID0gbnVsbDtcclxuICAgICAgICBjb25zb2xlLmxvZygnc2h1ZmZsaW5nIHRyYWNrcycpO1xyXG4gICAgICAgIC8vIFVzaW5nIGluIHBsYWNlIER1cnN0ZW5mZWxkIHNodWZmbGVcclxuICAgICAgICBmb3IgKGxldCBpID0gdHJhY2tzLmxlbmd0aCAtIDE7IGkgPiAwOyBpIC0tKSB7XHJcbiAgICAgICAgICAgIGxldCBqID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogKGkrMSkpOyAvLyBHZW5lcmF0ZSBhIHJhbmRvbSBpbmRleCBbMC4uLmldXHJcbiAgICAgICAgICAgIHRlbXAgPSB0cmFja3NbaV07IC8vIFN0YXJ0IHN3YXBwaW5nXHJcbiAgICAgICAgICAgIHRyYWNrc1tpXSA9IHRyYWNrc1tqXTtcclxuICAgICAgICAgICAgdHJhY2tzW2pdID0gdGVtcDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiB0cmFja3M7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0VHJhY2tzRnJvbUNoYXJ0cyhfa2luZCwgX2dlbnJlcywgX2xpbWl0LCAkX3BhcnRpdGlvbiA9IDEpIHtcclxuICAgICAgICAvLyBraW5kPXRvcCZnZW5yZT1zb3VuZGNsb3VkJTNBZ2VucmVzJTNBYWxsLW11c2ljJmxpbWl0PTUwXHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgLy8gbGV0IG9SZXEgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTsgLy9OZXcgcmVxdWVzdCBvYmplY3RcclxuICAgICAgICAgICAgLy8gb1JlcS5vbmxvYWQgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgLy8gICAgIC8vIENhbGxiYWNrXHJcbiAgICAgICAgICAgIC8vICAgICBsZXQgc29uZ3MgPSBKU09OLnBhcnNlKHRoaXMucmVzcG9uc2VUZXh0KTtcclxuICAgICAgICAgICAgLy8gICAgIGNvbnNvbGUubG9nKHNvbmdzKTtcclxuICAgICAgICAgICAgLy8gICAgIGNvbnNvbGUubG9nKHRoaXMucXVldWUpO1xyXG4gICAgICAgICAgICAvLyB9O1xyXG4gICAgICAgICAgICAvLyBvUmVxLm9wZW4oXCJnZXRcIiwgYGh0dHA6Ly9wb2xhcml0eS54MTAubXgvdGVzdC5waHA/a2luZD0ke19raW5kfSZnZW5yZT0ke19nZW5yZXN9JmxpbWl0PSR7X2xpbWl0fSZsaW5rZWRfcGFydGl0aW9uaW5nPSR7JF9wYXJ0aXRpb259JmNsaWVudF9pZD0ke2NvbnN0cy5jbGllbnRfaWR9YCwgdHJ1ZSk7XHJcbiAgICAgICAgICAgIC8vIC8vICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF4gRG9uJ3QgYmxvY2sgdGhlIHJlc3Qgb2YgdGhlIGV4ZWN1dGlvbi5cclxuICAgICAgICAgICAgLy8gLy8gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBEb24ndCB3YWl0IHVudGlsIHRoZSByZXF1ZXN0IGZpbmlzaGVzIHRvIFxyXG4gICAgICAgICAgICAvLyAvLyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlLlxyXG4gICAgICAgICAgICAvLyBvUmVxLnNlbmQoKTtcclxuICAgICAgICAgICAgLy8gLy8gY29uc29sZS5sb2coYGh0dHBzOi8vYXBpLXYyLnNvdW5kY2xvdWQuY29tL2NoYXJ0cz9raW5kPSR7X2tpbmR9JmdlbnJlPSR7X2dlbnJlc30mbGltaXQ9JHtfbGltaXR9JmxpbmtlZF9wYXJ0aXRpb25pbmc9JHskX3BhcnRpdGlvbn0mY2xpZW50X2lkPSR7Y29uc3RzLmNsaWVudF9pZH1gKTtcclxuICAgICAgICAgICAgLy8gLy8gbGV0IHJlcSA9IG5ldyBSZXF1ZXN0KCk7IC8vIENvbnN0cnVjdCBpdFxyXG4gICAgICAgICAgICAvLyAvLyBsZXQgdHJhY2tzID0gYXdhaXQgcmVxLmdldEpTT04oYGh0dHBzOi8vYXBpLXYyLnNvdW5kY2xvdWQuY29tL2NoYXJ0cz9raW5kPSR7X2tpbmR9JmdlbnJlPSR7X2dlbnJlc30mbGltaXQ9JHtfbGltaXR9JmxpbmtlZF9wYXJ0aXRpb25pbmc9JHskX3BhcnRpdGlvbn0mY2xpZW50X2lkPSR7Y29uc3RzLmNsaWVudF9pZH1gKTtcclxuXHJcbiAgICAgICAgICAgICQuYWpheCh7XHJcbiAgICAgICAgICAgICAgICB1cmw6ICdodHRwOi8vcG9sYXJpdHkueDEwLm14L25pbWJ1cy9jaGFydHMucGhwJywgLy9UaGlzIGlzIHRoZSBjdXJyZW50IGRvY1xyXG4gICAgICAgICAgICAgICAgdHlwZTogXCJHRVRcIixcclxuICAgICAgICAgICAgICAgIGRhdGFUeXBlOidqc29uJywgLy8gYWRkIGpzb24gZGF0YXR5cGUgdG8gZ2V0IGpzb25cclxuICAgICAgICAgICAgICAgIGRhdGE6ICh7XHJcbiAgICAgICAgICAgICAgICAgICAga2luZDogX2tpbmQsXHJcbiAgICAgICAgICAgICAgICAgICAgZ2VucmU6IF9nZW5yZXMsXHJcbiAgICAgICAgICAgICAgICAgICAgbGltaXQ6IF9saW1pdCxcclxuICAgICAgICAgICAgICAgICAgICBsaW5rZWRfcGFydGl0aW9uaW5nOiAkX3BhcnRpdGlvbixcclxuICAgICAgICAgICAgICAgICAgICBjbGllbnRfaWQ6IGNvbnN0cy5jbGllbnRfaWRcclxuICAgICAgICAgICAgICAgIH0pLFxyXG4gICAgICAgICAgICAgICAgc3VjY2VzczogKGRhdGEpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgdHJhY2tDb2xsZWN0aW9uID0gbnVsbDtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5zaHVmZmxlUXVldWUpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyYWNrQ29sbGVjdGlvbiA9IHRoaXMuc2h1ZmZsZVRyYWNrcyhkYXRhLmNvbGxlY3Rpb24pO1xyXG4gICAgICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgICAgICAgICAgdHJhY2tDb2xsZWN0aW9uID0gZGF0YS5jb2xsZWN0aW9uLnJldmVyc2UoKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0cmFja0NvbGxlY3Rpb24ubGVuZ3RoIC0gMTsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucXVldWUucHVzaCh7aWQ6IHRyYWNrQ29sbGVjdGlvbltpXS50cmFjay5pZCwgdHJhY2s6IHRyYWNrQ29sbGVjdGlvbltpXS50cmFja30pOyAvLyBUaGlzIG5lZWRzIHRoZSB0cmFjayBpZGVudGlmaWVyXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyh0cmFja0NvbGxlY3Rpb24pO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgLy8gTG9hZCB0aGUgc29uZ1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY3VyUGxheWVyLmxvYWQodHJhY2tDb2xsZWN0aW9uW3RyYWNrQ29sbGVjdGlvbi5sZW5ndGggLSAxXS50cmFjay5wZXJtYWxpbmtfdXJsKTtcclxuICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHRoaXMubG9hZFdpZGdldFNvbmcodGhpcy5jdXJQbGF5ZXIpLCAxMDAwKTtcclxuICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAvLyBEaXNwbGF5IHRvYXN0IG1lc3NhZ2Ugd2hlbiBkb25lXHJcbiAgICAgICAgICAgICAgICAgICAgVXRpbHMuc2hvd1RvYXN0KGAke3RyYWNrQ29sbGVjdGlvbi5sZW5ndGh9IHRyYWNrcyBhZGRlZCB0byB0aGUgcXVldWUuYCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pOyAgXHJcbiAgICAgICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnZ2V0VHJhY2tzRnJvbUNoYXJ0cyBFcnJvciAtICcgKyBlLm1lc3NhZ2UpOyBcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IFBsYXllcjtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3B1YmxpYy9qcy9wbGF5ZXIuanNcbi8vIG1vZHVsZSBpZCA9IDZcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiaW1wb3J0IGNvbnN0cyBmcm9tICcuLi8uLi9jb25zdHMtc2VjLmpzb24nO1xyXG5cclxubGV0IFNDID0gcmVxdWlyZSgnc291bmRjbG91ZCcpO1xyXG5cclxuY2xhc3MgSGlzdEl0ZW0ge1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKGJnLCB0cmFjaywgcGxheWVyLCBlcnJvckRvd25sb2FkQ2FsbGJhY2spIHtcclxuICAgICAgICB0aGlzLl9iZyA9IGJnO1xyXG4gICAgICAgIHRoaXMuX3RyYWNrID0gdHJhY2s7XHJcbiAgICAgICAgdGhpcy5fZXJyb3JEb3dubG9hZENhbGxiYWNrID0gZXJyb3JEb3dubG9hZENhbGxiYWNrO1xyXG5cclxuICAgICAgICB0aGlzLmhpc3RJdGVtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICAgICAgdGhpcy5oaXN0SXRlbS5jbGFzc05hbWUgPSAnY2FyZCc7XHJcbiAgICAgICAgdGhpcy5oaXN0SXRlbS5zZXRBdHRyaWJ1dGUoJ2lkJywgJ2hpc3RJdGVtJyk7XHJcbiAgICAgICAgdGhpcy5oaXN0SXRlbS5zZXRBdHRyaWJ1dGUoJ2RhdGEtaWQnLCB0cmFjay5pZCk7XHJcbiAgICAgICAgdGhpcy5oaXN0SXRlbS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XHJcbiAgICAgICAgICAgIHBsYXllci5zdHJlYW1Tb25nKHRyYWNrLmlkKTtcclxuICAgICAgICB9LCBmYWxzZSk7XHJcbiAgICAgICAgbGV0IHRlbXBJbm5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICAgIHRlbXBJbm5lci5pbm5lckhUTUwgPSBgXHJcbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjYXJkXCIgZGF0YS1pZD1cIiR7dGhpcy5fdHJhY2suaWR9XCI+XHJcbiAgICAgICAgICAgICAgICA8ZGl2IGlkPVwiaGlzdEl0ZW1CZ1wiIGNsYXNzPVwiYmctaW1hZ2VcIiBzdHlsZT1cImJhY2tncm91bmQtaW1hZ2U6IHVybCgnJHt0aGlzLl9iZ30nKVwiPjwvZGl2PlxyXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInBsYXllci1jb250ZW50IG92ZXJsYXlcIj5cclxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwicm93IGxldmVsXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJsZXZlbC1sZWZ0XCIgc3R5bGU9XCJwb3NpdGlvbjpyZWxhdGl2ZTtcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbWcgc3JjPVwiJHt0aGlzLl90cmFjay5hcnR3b3JrX3VybCA9PT0gbnVsbCA/IHRoaXMuX3RyYWNrLnVzZXIuYXZhdGFyX3VybCA6IHRoaXMuX3RyYWNrLmFydHdvcmtfdXJsfVwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJoaXN0LXBsYXkgY2VudGVyXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGkgY2xhc3M9XCJmYSBmYS1wbGF5IGNlbnRlci1hbHRcIiBhcmlhLWhpZGRlbj1cInRydWVcIj48L2k+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3NwYW4+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZGVzY1wiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3M9XCJ0aXRsZVwiPiR7dGhpcy5fdHJhY2sudGl0bGV9PC9wPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3M9XCJzdWJ0aXRsZVwiPiR7dGhpcy5fdHJhY2sudXNlci51c2VybmFtZX08L3A+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzcz1cInN1YnRpdGxlXCI+JHt0aGlzLl90cmFjay5nZW5yZSB8fCAnTi9BJ308L3A+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwicm93IG92ZXJsYXlcIj5cclxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiYWN0aW9uLWJhciBjZW50ZXIgbm8tcGFkZGluZ1wiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiYWN0aW9uLWJhci1pdGVtXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YSBocmVmPVwiJHt0aGlzLl90cmFjay5kb3dubG9hZGFibGUgPT09IGZhbHNlID8gdGhpcy5fZXJyb3JEb3dubG9hZENhbGxiYWNrIDogYGh0dHBzOi8vYXBpLnNvdW5kY2xvdWQuY29tL3RyYWNrcy8ke3RoaXMuX3RyYWNrLmlkfS9kb3dubG9hZD9jbGllbnRfaWQ9JHtjb25zdHMuY2xpZW50X2lkfWB9XCIgdGFyZ2V0PVwiX2JsYW5rXCI+PGJ1dHRvbiBjbGFzcz1cImJ0bi10cmFuc3BhcmVudFwiPkRvd25sb2FkPC9idXR0b24+PC9hPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImFjdGlvbi1iYXItaXRlbVwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGEgaHJlZj1cIiR7dGhpcy5fdHJhY2sucGVybWFsaW5rX3VybH1cIiB0YXJnZXQ9XCJfYmxhbmtcIj48YnV0dG9uIGNsYXNzPVwiYnRuLXRyYW5zcGFyZW50XCI+VmlldzwvYnV0dG9uPjwvYT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgYDtcclxuICAgICAgICB0aGlzLmhpc3RJdGVtLmFwcGVuZENoaWxkKHRlbXBJbm5lcik7IC8vIE11c3QgdXNlIHRoaXMgbWV0aG9kIHRvIHByZXNlcnZlIGxpc3RlbmVyc1xyXG4gICAgfVxyXG5cclxuICAgIHJlbmRlcigpIHtcclxuICAgICAgICAgcmV0dXJuIHRoaXMuaGlzdEl0ZW07IC8vIENhbm5vdCByZXR1cm4gaW5uZXJIVE1MIHNpbmNlIHRoYXQgcmVtb3ZlcyBhbGwgbGlzdGVuZXJzXHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IEhpc3RJdGVtXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9wdWJsaWMvY29udHJvbHMvSGlzdEl0ZW0uanNcbi8vIG1vZHVsZSBpZCA9IDdcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiaW1wb3J0IENoYXJ0SXRlbSBmcm9tICcuL2NoYXJ0aXRlbSc7XHJcblxyXG5jbGFzcyBDaGFydHMge1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKHBsYXllcikge1xyXG4gICAgICAgIHRoaXMuX3BsYXllciA9IHBsYXllcjtcclxuICAgICAgICB0aGlzLmlzU2hvd24gPSBmYWxzZTtcclxuICAgICAgICB0aGlzLnJlbmRlcigpO1xyXG4gICAgICAgIHRoaXMuYmluZEV2ZW50cygpO1xyXG5cclxuICAgICAgICAvLyBMb2FkIHRoZSBjaGFydHNcclxuICAgICAgICBsZXQgYyA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5jaGFydENvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNhbGxDaGFydHMnKTtcclxuICAgICAgICAkLmFqYXgoe1xyXG4gICAgICAgICAgICB1cmw6ICdodHRwOi8vcG9sYXJpdHkueDEwLm14L25pbWJ1cy9jaGFydHMuanNvbicsXHJcbiAgICAgICAgICAgIHR5cGU6IFwiR0VUXCIsXHJcbiAgICAgICAgICAgIGRhdGFUeXBlOidqc29uJywgXHJcbiAgICAgICAgICAgIHN1Y2Nlc3M6IChkYXRhKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGRhdGEuY29sbGVjdGlvbi5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgIGMgPSBuZXcgQ2hhcnRJdGVtKHRoaXMuX3BsYXllciwgZGF0YS5jb2xsZWN0aW9uW2ldLmNoYXJ0LnRpdGxlLCBkYXRhLmNvbGxlY3Rpb25baV0uY2hhcnQuYXV0aG9yLCBkYXRhLmNvbGxlY3Rpb25baV0uY2hhcnQua2luZCwgZGF0YS5jb2xsZWN0aW9uW2ldLmNoYXJ0LmdlbnJlX3VybCwgZGF0YS5jb2xsZWN0aW9uW2ldLmNoYXJ0LmxpbWl0LCBkYXRhLmNvbGxlY3Rpb25baV0uY2hhcnQuaW1hZ2VfdXJsKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmNoYXJ0Q29udGFpbmVyLmFwcGVuZENoaWxkKGMucmVuZGVyKCkpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgcmVuZGVyKCkge1xyXG4gICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNjaGFydE1vZGFsQ29udGFpbmVyJykuaW5uZXJIVE1MICs9IGBcclxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cImhlcm8tYm9keVwiPlxyXG4gICAgICAgICAgICAgICAgPGRpdiBpZD1cImNoYXJ0c0Nsb3NlQnV0dG9uXCIgY2xhc3M9XCJkaWFsb2ctY2xvc2UtYnRuIGxpbmstYnRuXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJpY29uXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxpIGNsYXNzPVwiZmEgZmEtdGltZXNcIiBhcmlhLWhpZGRlbj1cInRydWVcIj48L2k+XHJcbiAgICAgICAgICAgICAgICAgICAgPC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY29udGVudFwiPlxyXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJyb3dcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPGgzIGNsYXNzPVwid2hpdGVcIj5DaGFydHM8L2gzPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwicm93XCIgaWQ9XCJhbGxDaGFydHNcIj5cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgIGA7XHJcbiAgICB9XHJcblxyXG4gICAgYmluZEV2ZW50cygpIHtcclxuICAgICAgICB0aGlzLmNoYXJ0c0Nsb3NlQnV0dG9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NoYXJ0c0Nsb3NlQnV0dG9uJyk7XHJcblxyXG4gICAgICAgIC8vIEV2ZW50IGhhbmRsZXIgZm9yIGNsb3NlIGJ1dHRvbiBmb3Igc2VhcmNoIGRpYWxvZ1xyXG4gICAgICAgIHRoaXMuY2hhcnRzQ2xvc2VCdXR0b24ub25jbGljayA9IChlKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuaGlkZUNoYXJ0cygpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICB0b2dnbGVDaGFydHMoKSB7XHJcbiAgICAgICAgLy8gU2Nyb2xsIHRvIHRvcCB0byBzaG93IHRoZSBzZWFyY2ggZGlhbG9nXHJcbiAgICAgICAgd2luZG93LnNjcm9sbFRvKDAsIDApO1xyXG5cclxuICAgICAgICB0aGlzLmlzU2hvd24gPSAhdGhpcy5pc1Nob3duO1xyXG4gICAgICAgIGlmICh0aGlzLmlzU2hvd24pIHtcclxuICAgICAgICAgICAgJCgnI2NoYXJ0TW9kYWxDb250YWluZXInKS5hZGRDbGFzcygnc2hvd24nKTtcclxuICAgICAgICAgICAgaWYgKCQod2luZG93KS53aWR0aCgpIDw9IDc2OClcclxuICAgICAgICAgICAgICAgICQoJ2JvZHknKS5jc3MoeydvdmVyZmxvdy15JzogJ2hpZGRlbid9KTtcclxuICAgICAgICAgICAgLy9pZiAod2luZG93LmlubmVyV2lkdGggPiA3NjgpIHtcclxuICAgICAgICAgICAgICAgICQoJyNwbGF5ZXJIZXJvJykuYWRkQ2xhc3MoJ3VuZm9jdXNlZCcpO1xyXG4gICAgICAgICAgICAvL31cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAvLyBSZXNldCBkaWFsb2cgKG11c3QgcGxhY2UgdXAgaGVyZSB0byBhY2NvdW50IGZvciBpbnZhbGlkIGlucHV0KVxyXG4gICAgICAgICAgICAkKCcjY2hhcnRNb2RhbENvbnRhaW5lcicpLnJlbW92ZUNsYXNzKCdzaG93bicpOyAvLyBIaWRlIHRoZSBzZWFyY2ggbW9kYWxcclxuICAgICAgICAgICAgaWYgKCQod2luZG93KS53aWR0aCgpIDw9IDc2OCkgLy8gRm9yIG1vYmlsZSBVSVxyXG4gICAgICAgICAgICAgICAgJCgnYm9keScpLmNzcyh7J292ZXJmbG93LXknOiAnc2Nyb2xsJ30pO1xyXG5cclxuICAgICAgICAgICAgLy9pZiAod2luZG93LmlubmVyV2lkdGggPiA3NjgpIHtcclxuICAgICAgICAgICAgICAgICQoJyNwbGF5ZXJIZXJvJykucmVtb3ZlQ2xhc3MoJ3VuZm9jdXNlZCcpO1xyXG4gICAgICAgICAgICAvL31cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG5cclxuICAgIGhpZGVDaGFydHMoKSB7XHJcbiAgICAgICAgLy8gUmVzZXQgZGlhbG9nIChtdXN0IHBsYWNlIHVwIGhlcmUgdG8gYWNjb3VudCBmb3IgaW52YWxpZCBpbnB1dClcclxuICAgICAgICAkKCcjY2hhcnRNb2RhbENvbnRhaW5lcicpLnJlbW92ZUNsYXNzKCdzaG93bicpOyAvLyBIaWRlIHRoZSBzZWFyY2ggbW9kYWxcclxuICAgICAgICBpZiAoJCh3aW5kb3cpLndpZHRoKCkgPD0gNzY4KSAvLyBGb3IgbW9iaWxlIFVJXHJcbiAgICAgICAgICAgICQoJ2JvZHknKS5jc3MoeydvdmVyZmxvdy15JzogJ3Njcm9sbCd9KTtcclxuICAgICAgICB0aGlzLmlzU2hvd24gPSBmYWxzZTtcclxuICAgICAgICAvL2lmICh3aW5kb3cuaW5uZXJXaWR0aCA+IDc2OCkge1xyXG4gICAgICAgICAgICAkKCcjcGxheWVySGVybycpLnJlbW92ZUNsYXNzKCd1bmZvY3VzZWQnKTtcclxuICAgICAgICAvL31cclxuICAgIH1cclxuXHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IENoYXJ0c1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vcHVibGljL2NvbnRyb2xzL2NoYXJ0cy5qc1xuLy8gbW9kdWxlIGlkID0gOFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJpbXBvcnQgUXVldWVJdGVtIGZyb20gJy4vcXVldWVpdGVtJztcclxuaW1wb3J0IFV0aWxzIGZyb20gJy4uL2pzL3V0aWxzJztcclxuaW1wb3J0IFNldHRpbmdzIGZyb20gJy4uL2pzL3NldHRpbmdzJztcclxuXHJcbmNsYXNzIERhc2hib2FyZCB7XHJcblxyXG4gICAgY29uc3RydWN0b3IocGxheWVyKSB7XHJcbiAgICAgICAgdGhpcy5fcGxheWVyID0gcGxheWVyO1xyXG4gICAgICAgIHRoaXMuaXNTaG93biA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMucXVldWVJdGVtQ291bnQgPSAwOyAvLyBDb3VudHMgbnVtYmVyIG9mIHNvbmdzIG9uIHF1ZXVlXHJcbiAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2Rhc2hib2FyZE1vZGFsQ29udGFpbmVyJykuaW5uZXJIVE1MICs9IHRoaXMucmVuZGVyKCk7XHJcbiAgICAgICAgdGhpcy5iaW5kRXZlbnRzKCk7XHJcbiAgICAgICAgU2V0dGluZ3MubG9hZFByZWZzKCk7IC8vIEluaXQgc2V0dGluZ3NcclxuICAgICAgICB0aGlzLnVwZGF0ZUNvbnRyb2xzKCk7IC8vIFVwZGF0ZSBzZXR0aW5ncyBjb250cm9sc1xyXG4gICAgfVxyXG5cclxuICAgIHJlbmRlcigpIHtcclxuICAgICAgICByZXR1cm4gYFxyXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwiaGVyby1ib2R5XCI+XHJcbiAgICAgICAgICAgICAgICA8ZGl2IGlkPVwiZGFzaGJvYXJkQ2xvc2VCdG5cIiBjbGFzcz1cImRpYWxvZy1jbG9zZS1idG4gbGluay1idG5cIj5cclxuICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cImljb25cIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPGkgY2xhc3M9XCJmYSBmYS10aW1lc1wiIGFyaWEtaGlkZGVuPVwidHJ1ZVwiPjwvaT5cclxuICAgICAgICAgICAgICAgICAgICA8L3NwYW4+XHJcbiAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgIDxkaXYgaWQ9XCJ0YWJzXCIgY2xhc3M9XCJjb250ZW50XCI+XHJcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInRhYi1jb250YWluZXIgdGFicy1jZW50ZXJcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPHVsPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxpIGNsYXNzPVwidGFiLWl0ZW0gc2VsZWN0ZWRcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YT5TZXR0aW5nczwvYT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvbGk+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGkgaWQ9XCJxdWV1ZVRhYlwiIGNsYXNzPVwidGFiLWl0ZW1cIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YT5RdWV1ZTwvYT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvbGk+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvdWw+XHJcbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInRhYnBhZ2Ugc2hvd25cIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPGgzPlNldHRpbmdzPC9oMz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImRpdmlkZXJcIj48L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInJvd1wiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInRvZ2dsZS1jb250YWluZXJcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cD5EaXNhYmxlIEFuaW1hdGlvbnM8L3A+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInRvZ2dsZS1zd2l0Y2hcIj48aW5wdXQgdHlwZT1cImNoZWNrYm94XCIgaWQ9XCJjaGtBbmltYXRpb25zXCIvPjxsYWJlbCBmb3I9XCJjaGtBbmltYXRpb25zXCI+PC9sYWJlbD48L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInRvZ2dsZS1jb250YWluZXJcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cD5EaXNhYmxlIEJsdXI8L3A+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInRvZ2dsZS1zd2l0Y2hcIj48aW5wdXQgdHlwZT1cImNoZWNrYm94XCIgaWQ9XCJjaGtCbHVyXCIvPjxsYWJlbCBmb3I9XCJjaGtCbHVyXCI+PC9sYWJlbD48L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwidGFicGFnZVwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwicm93IGxldmVsXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aDMgc3R5bGU9XCJmbGV4LWdyb3c6IDE7XCI+UXVldWU8L2gzPjxidXR0b24gaWQ9XCJidG5DbGVhclF1ZXVlXCIgY2xhc3M9XCJidG4tc21hbGwgYnRuLW5pbWJ1c1wiPkNsZWFyIFF1ZXVlPC9idXR0b24+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZGl2aWRlclwiPjwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8c3BhY2U+PC9zcGFjZT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBpZD1cInF1ZXVlQ29udGFpbmVyXCI+XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICBgO1xyXG4gICAgfVxyXG5cclxuICAgIGJpbmRFdmVudHMoKSB7XHJcbiAgICAgICAgdGhpcy5kYXNoYm9hcmRDbG9zZUJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkYXNoYm9hcmRDbG9zZUJ0bicpO1xyXG4gICAgICAgIHRoaXMucXVldWVUYWIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncXVldWVUYWInKTtcclxuICAgICAgICB0aGlzLnF1ZXVlQ29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3F1ZXVlQ29udGFpbmVyJyk7XHJcbiAgICAgICAgdGhpcy5idG5DbGVhclF1ZXVlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2J0bkNsZWFyUXVldWUnKTtcclxuXHJcbiAgICAgICAgdGhpcy5jaGtBbmltYXRpb25zID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Noa0FuaW1hdGlvbnMnKTtcclxuICAgICAgICB0aGlzLmNoa0JsdXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY2hrQmx1cicpO1xyXG5cclxuICAgICAgICAvLyBFdmVudCBoYW5kbGVyIGZvciBjbG9zZSBidXR0b24gZm9yIHNlYXJjaCBkaWFsb2dcclxuICAgICAgICB0aGlzLmRhc2hib2FyZENsb3NlQnRuLm9uY2xpY2sgPSAoZSkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLmhpZGVEYXNoYm9hcmQoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMucXVldWVUYWIub25jbGljayA9IChlKSA9PiB7XHJcbiAgICAgICAgICAgIC8vIFVwZGF0ZSBxdWV1ZSBpdGVtc1xyXG4gICAgICAgICAgICB0aGlzLnJlZnJlc2hRdWV1ZUNvbnRhaW5lcigpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gU2V0dGluZ3MgY29udHJvbHNcclxuICAgICAgICB0aGlzLmNoa0FuaW1hdGlvbnMub25jbGljayA9IChlKSA9PiB7XHJcbiAgICAgICAgICAgIFNldHRpbmdzLnN0b3JlUHJlZignZGlzYWJsZUFuaW1hdGlvbnMnLCB0aGlzLmNoa0FuaW1hdGlvbnMuY2hlY2tlZCk7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmNoa0FuaW1hdGlvbnMuY2hlY2tlZCAmJiAhZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJkaXNhYmxlQW5pbWF0aW9uc1wiKSkge1xyXG4gICAgICAgICAgICAgICAgJChTZXR0aW5ncy5kaXNhYmxlQW5pbWF0aW9uc0NTUykuYXBwZW5kVG8oXCJoZWFkXCIpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgJCgnI2Rpc2FibGVBbmltYXRpb25zJykucmVtb3ZlKCk7IC8vIFJlbW92ZSB0aGUgc3R5bGUgc2hlZXRcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5jaGtCbHVyLm9uY2xpY2sgPSAoZSkgPT4ge1xyXG4gICAgICAgICAgICBTZXR0aW5ncy5zdG9yZVByZWYoJ2Rpc2FibGVCbHVyJywgdGhpcy5jaGtCbHVyLmNoZWNrZWQpO1xyXG4gICAgICAgICAgICBpZiAodGhpcy5jaGtCbHVyLmNoZWNrZWQgJiYgIWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZGlzYWJsZUJsdXJcIikpIHtcclxuICAgICAgICAgICAgICAgICQoU2V0dGluZ3MuZGlzYWJsZUJsdXJDU1MpLmFwcGVuZFRvKFwiaGVhZFwiKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICQoJyNkaXNhYmxlQmx1cicpLnJlbW92ZSgpOyAvLyBSZW1vdmUgdGhlIHN0eWxlIHNoZWV0XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuYnRuQ2xlYXJRdWV1ZS5vbmNsaWNrID0gKGUpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5jbGVhclF1ZXVlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHVwZGF0ZUNvbnRyb2xzKCkge1xyXG5cclxuICAgICAgICAvLyBVcGRhdGUgc2V0dGluZ3MgY29udHJvbHNcclxuICAgICAgICB0aGlzLmNoa0FuaW1hdGlvbnMuY2hlY2tlZCA9IEpTT04ucGFyc2UoU2V0dGluZ3MuZ2V0UHJlZignZGlzYWJsZUFuaW1hdGlvbnMnKSk7XHJcbiAgICAgICAgdGhpcy5jaGtCbHVyLmNoZWNrZWQgPSBKU09OLnBhcnNlKFNldHRpbmdzLmdldFByZWYoJ2Rpc2FibGVCbHVyJykpO1xyXG4gICAgfVxyXG5cclxuICAgIHRvZ2dsZURhc2hib2FyZCgpIHtcclxuICAgICAgICAvLyBTY3JvbGwgdG8gdG9wIHRvIHNob3cgdGhlIHNlYXJjaCBkaWFsb2dcclxuICAgICAgICB3aW5kb3cuc2Nyb2xsVG8oMCwgMCk7XHJcblxyXG4gICAgICAgIHRoaXMuaXNTaG93biA9ICF0aGlzLmlzU2hvd247XHJcbiAgICAgICAgaWYgKHRoaXMuaXNTaG93bikge1xyXG4gICAgICAgICAgICAkKCcjZGFzaGJvYXJkTW9kYWxDb250YWluZXInKS5hZGRDbGFzcygnc2hvd24nKTtcclxuICAgICAgICAgICAgaWYgKCQod2luZG93KS53aWR0aCgpIDw9IDc2OClcclxuICAgICAgICAgICAgICAgICQoJ2JvZHknKS5jc3MoeydvdmVyZmxvdy15JzogJ2hpZGRlbid9KTtcclxuICAgICAgICAgICAgdGhpcy5yZWZyZXNoUXVldWVDb250YWluZXIoKTtcclxuICAgICAgICAgICAgLy9pZiAod2luZG93LmlubmVyV2lkdGggPiA3NjgpIHtcclxuICAgICAgICAgICAgICAgICQoJyNwbGF5ZXJIZXJvJykuYWRkQ2xhc3MoJ3VuZm9jdXNlZCcpO1xyXG4gICAgICAgICAgICAvL31cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAvLyBSZXNldCBkaWFsb2cgKG11c3QgcGxhY2UgdXAgaGVyZSB0byBhY2NvdW50IGZvciBpbnZhbGlkIGlucHV0KVxyXG4gICAgICAgICAgICAkKCcjZGFzaGJvYXJkTW9kYWxDb250YWluZXInKS5yZW1vdmVDbGFzcygnc2hvd24nKTsgLy8gSGlkZSB0aGUgc2VhcmNoIG1vZGFsXHJcbiAgICAgICAgICAgIGlmICgkKHdpbmRvdykud2lkdGgoKSA8PSA3NjgpIC8vIEZvciBtb2JpbGUgVUlcclxuICAgICAgICAgICAgICAgICQoJ2JvZHknKS5jc3MoeydvdmVyZmxvdy15JzogJ3Njcm9sbCd9KTtcclxuXHJcbiAgICAgICAgICAgIC8vaWYgKHdpbmRvdy5pbm5lcldpZHRoID4gNzY4KSB7XHJcbiAgICAgICAgICAgICAgICAkKCcjcGxheWVySGVybycpLnJlbW92ZUNsYXNzKCd1bmZvY3VzZWQnKTtcclxuICAgICAgICAgICAgLy99XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuXHJcbiAgICBoaWRlRGFzaGJvYXJkKCkge1xyXG4gICAgICAgIC8vIFJlc2V0IGRpYWxvZyAobXVzdCBwbGFjZSB1cCBoZXJlIHRvIGFjY291bnQgZm9yIGludmFsaWQgaW5wdXQpXHJcbiAgICAgICAgJCgnI2Rhc2hib2FyZE1vZGFsQ29udGFpbmVyJykucmVtb3ZlQ2xhc3MoJ3Nob3duJyk7IC8vIEhpZGUgdGhlIHNlYXJjaCBtb2RhbFxyXG4gICAgICAgIGlmICgkKHdpbmRvdykud2lkdGgoKSA8PSA3NjgpIC8vIEZvciBtb2JpbGUgVUlcclxuICAgICAgICAgICAgJCgnYm9keScpLmNzcyh7J292ZXJmbG93LXknOiAnc2Nyb2xsJ30pO1xyXG4gICAgICAgIHRoaXMuaXNTaG93biA9IGZhbHNlO1xyXG4gICAgICAgIC8vaWYgKHdpbmRvdy5pbm5lcldpZHRoID4gNzY4KSB7XHJcbiAgICAgICAgICAgICQoJyNwbGF5ZXJIZXJvJykucmVtb3ZlQ2xhc3MoJ3VuZm9jdXNlZCcpO1xyXG4gICAgICAgIC8vfVxyXG4gICAgfVxyXG4gICAgXHJcbiAgICByZWZyZXNoUXVldWVDb250YWluZXIoKSB7XHJcbiAgICAgICAgdGhpcy5xdWV1ZUNvbnRhaW5lci5pbm5lckhUTUwgPSBgPGRpdj48L2Rpdj5gOyAvLyBDbGVhciB0aGUgY29udGFpbmVyXHJcbiAgICAgICAgaWYgKHRoaXMuX3BsYXllci5xdWV1ZS5sZW5ndGggPiAwICkge1xyXG4gICAgICAgICAgICB0aGlzLnF1ZXVlSXRlbUNvdW50ID0gMDtcclxuICAgICAgICAgICAgbGV0IHEgPSBudWxsO1xyXG4gICAgICAgICAgICBsZXQgZnJhZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOztcclxuICAgICAgICAgICAgZm9yIChsZXQgaSA9IHRoaXMuX3BsYXllci5xdWV1ZS5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xyXG4gICAgICAgICAgICAgICAgcSA9IG5ldyBRdWV1ZUl0ZW0odGhpcy5fcGxheWVyLCB0aGlzLl9wbGF5ZXIucXVldWVbaV0udHJhY2spO1xyXG4gICAgICAgICAgICAgICAgZnJhZy5hcHBlbmRDaGlsZChxLnJlbmRlcigpKTtcclxuICAgICAgICAgICAgICAgIHRoaXMucXVldWVJdGVtQ291bnQgKz0gMTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLnF1ZXVlQ29udGFpbmVyLmFwcGVuZENoaWxkKGZyYWcpO1xyXG5cclxuICAgICAgICAgICAgJCgnLnF1ZXVlRGVsZXRlJykub24oJ2NsaWNrJywgKCkgPT4geyAvLyBBZGQgZXZlbnQgaGFuZGxlciBvbiBhbGwgdHJhY2tzLCBub3QgdGhlIG1vc3QgZWZmaWNpZW50OiBodHRwczovL3N0YWNrb3ZlcmZsb3cuY29tL3F1ZXN0aW9ucy8xMTI0ODg1NS9ob3ctZG8taS11c2UtanF1ZXJ5LWdldC10aGUtaWQtb2YtdGhlLWRpdi13aGljaC1oYXMtYmVlbi1jbGlja2VkLW9uXHJcbiAgICAgICAgICAgICAgICBsZXQgY3VySW5kZXggPSB0aGlzLl9wbGF5ZXIucXVldWUubWFwKCh0cmFjaykgPT4ge3JldHVybiBTdHJpbmcodHJhY2suaWQpfSkuaW5kZXhPZihTdHJpbmcoJChldmVudC5jdXJyZW50VGFyZ2V0KS5hdHRyKCdkYXRhLWlkJykpKTsgLy8gRmluZCB0aGUgc29uZydzIGlkIGFzc29jaWF0ZWQgd2l0aCB0aGlzIG9iamVjdCBpbiB0aGUgcXVldWVcclxuICAgICAgICAgICAgICAgIC8vIE5PVEU6IE11c3QgY29udmVydCBtYXBwZWQgdmFycyB0byBzdHJpbmcgb3Igc2FtZSBkYXRhdHlwZSBpbiBvcmRlciB0byBjaGVjayBmb3IgZXF1YWxpdHlcclxuICAgICAgICAgICAgICAgIGlmIChjdXJJbmRleCA9PT0gLTEpIHJldHVybjsgLy8gSW4gY2FzZSB3ZSBjb3VsZG4ndCBmaW5kIGl0LCB3aGljaCBpcyBhbiBlcnJvclxyXG4gICAgICAgICAgICAgICAgdGhpcy5fcGxheWVyLnF1ZXVlLnNwbGljZShjdXJJbmRleCwgMSk7IC8vIFJlbW92ZSB0aGUgZWxlbWVudFxyXG4gICAgICAgICAgICAgICAgdGhpcy5yZWZyZXNoUXVldWVDb250YWluZXIoKTsgLy8gVXBkYXRlIHRoZSBxdWV1ZSBjb250YWluZXJcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5xdWV1ZUl0ZW1Db3VudCA9IDA7XHJcbiAgICAgICAgICAgIC8vIE5vdGlmaWNhdGlvbiB0aGF0IHF1ZXVlIGlzIGVtcHR5XHJcbiAgICAgICAgICAgIHRoaXMucXVldWVDb250YWluZXIuaW5uZXJIVE1MID0gYDxkaXYgY2xhc3M9XCJ0ZXh0LWNlbnRlclwiPlxyXG4gICAgICAgICAgICAgICAgPGg2IGNsYXNzPVwibGlnaHRcIiBzdHlsZT1cImNvbG9yOiAjNzE3NTc5O1wiPlxyXG4gICAgICAgICAgICAgICAgTG9va3MgbGlrZSB5b3VyIHF1ZXVlIGlzIGVtcHR5LiBOaW1idXMgd2lsbCBjb250aW51ZSB0byBmZXRjaCBtdXNpYyBpbiB0aGUgYmFja2dyb3VuZC48L2g2PlxyXG4gICAgICAgICAgICA8L2Rpdj5gO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBjbGVhclF1ZXVlKCkge1xyXG4gICAgICAgIHRoaXMuX3BsYXllci5xdWV1ZSA9IFtdOyAvLyBDbGVhciB0aGUgcXVldWVcclxuICAgICAgICB0aGlzLnF1ZXVlQ29udGFpbmVyLmlubmVySFRNTCA9IGA8ZGl2IGNsYXNzPVwidGV4dC1jZW50ZXJcIj5cclxuICAgICAgICAgICAgICAgIDxoNiBjbGFzcz1cImxpZ2h0XCIgc3R5bGU9XCJjb2xvcjogIzcxNzU3OTtcIj5cclxuICAgICAgICAgICAgICAgIExvb2tzIGxpa2UgeW91ciBxdWV1ZSBpcyBlbXB0eS4gTmltYnVzIHdpbGwgY29udGludWUgdG8gZmV0Y2ggbXVzaWMgaW4gdGhlIGJhY2tncm91bmQuPC9oNj5cclxuICAgICAgICAgICAgPC9kaXY+YDtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgRGFzaGJvYXJkO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vcHVibGljL2NvbnRyb2xzL2Rhc2hib2FyZC5qc1xuLy8gbW9kdWxlIGlkID0gOVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJpbXBvcnQgVXRpbHMgZnJvbSAnLi4vanMvdXRpbHMnO1xyXG5cclxuY2xhc3MgUXVldWVJdGVtIHtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihwbGF5ZXIsIHRyYWNrKSB7XHJcbiAgICAgICAgdGhpcy5fcGxheWVyID0gcGxheWVyO1xyXG4gICAgICAgIHRoaXMuX3RyYWNrID0gdHJhY2s7XHJcblxyXG4gICAgICAgIHRoaXMucXVldWVJdGVtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICAgICAgdGhpcy5xdWV1ZUl0ZW0uaW5uZXJIVE1MID0gYFxyXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwicXVldWUtaXRlbVwiPlxyXG4gICAgICAgICAgICAgICAgPGg2IGNsYXNzPVwidGl0bGUgbGlnaHQgYnRuLXRvb2x0aXBcIiBkYXRhLXRvb2x0aXA9XCIke3RoaXMuX3RyYWNrLnRpdGxlfVwiPjxzcGFuPiR7dGhpcy5fdHJhY2sudGl0bGV9PC9zcGFuPjxkaXYgY2xhc3M9XCJwdWxsLXJpZ2h0XCI+JHtVdGlscy5jb252ZXJ0TWlsbGlzZWNvbmRzVG9EaWdpdGFsQ2xvY2sodGhpcy5fdHJhY2suZHVyYXRpb24pLmNsb2NrfTwvZGl2PjwvaDY+XHJcbiAgICAgICAgICAgICAgICA8cCBjbGFzcz1cInN1YnRpdGxlXCI+PHNwYW4+JHt0aGlzLl90cmFjay51c2VyLnVzZXJuYW1lfTwvc3Bhbj5cclxuICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cInF1ZXVlLWl0ZW0tYWN0aW9ucyBwdWxsLXJpZ2h0XCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxhIGhyZWY9XCIke3RoaXMuX3RyYWNrLnBlcm1hbGlua191cmx9XCIgdGFyZ2V0PVwiX2JsYW5rXCI+PHNwYW4gY2xhc3M9XCJpY29uXCI+PGkgY2xhc3M9XCJmYSBmYS1leHRlcm5hbC1saW5rLXNxdWFyZSBzbWFsbFwiIGFyaWEtaGlkZGVuPVwidHJ1ZVwiPjwvaT48L3NwYW4+PC9hPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cImljb24gcXVldWVEZWxldGVcIiBkYXRhLWlkPVwiJHt0aGlzLl90cmFjay5pZH1cIj48aSBjbGFzcz1cImZhIGZhLXRpbWVzIHNtYWxsXCIgYXJpYS1oaWRkZW49XCJ0cnVlXCI+PC9pPjwvc3Bhbj5cclxuICAgICAgICAgICAgICAgICAgICA8L3NwYW4+XHJcbiAgICAgICAgICAgICAgICA8L3A+XHJcbiAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgIGA7XHJcbiAgICB9XHJcblxyXG4gICAgcmVuZGVyKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnF1ZXVlSXRlbTtcclxuICAgIH1cclxuXHJcbiAgICBiaW5kRXZlbnRzKCkge1xyXG4gICAgICAgXHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IFF1ZXVlSXRlbTtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3B1YmxpYy9jb250cm9scy9xdWV1ZWl0ZW0uanNcbi8vIG1vZHVsZSBpZCA9IDEwXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsImltcG9ydCBDaGFydEl0ZW0gZnJvbSAnLi9jaGFydGl0ZW0nXHJcbmltcG9ydCBVdGlscyBmcm9tICcuLi9qcy91dGlscydcclxuXHJcbmxldCBTQyA9IHJlcXVpcmUoJ3NvdW5kY2xvdWQnKTtcclxuXHJcbmNsYXNzIFNlYXJjaCB7XHJcblxyXG4gICAgY29uc3RydWN0b3IocGxheWVyKSB7XHJcbiAgICAgICAgdGhpcy5fcGxheWVyID0gcGxheWVyO1xyXG4gICAgICAgIHRoaXMuaXNTaG93biA9IGZhbHNlO1xyXG4gICAgICAgIFxyXG4gICAgICAgIHRoaXMucmVuZGVyKCk7XHJcbiAgICAgICAgdGhpcy5iaW5kRXZlbnRzKCk7XHJcblxyXG4gICAgICAgIHRoaXMubG9hZENoYXJ0cygpO1xyXG4gICAgfVxyXG5cclxuICAgIHJlbmRlcigpIHtcclxuICAgICAgICAvLyBDcmVhdGUgdGhlIHNlYXJjaCBkaWFsb2cgaHRtbFxyXG4gICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNzZWFyY2hNb2RhbENvbnRhaW5lcicpLmlubmVySFRNTCArPSBgXHJcbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJoZXJvLWJvZHlcIj5cclxuICAgICAgICAgICAgICAgIDxkaXYgaWQ9XCJzZWFyY2hDbG9zZUJ0blwiIGNsYXNzPVwiZGlhbG9nLWNsb3NlLWJ0biBsaW5rLWJ0blwiPlxyXG4gICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwiaWNvblwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8aSBjbGFzcz1cImZhIGZhLXRpbWVzXCIgYXJpYS1oaWRkZW49XCJ0cnVlXCI+PC9pPlxyXG4gICAgICAgICAgICAgICAgICAgIDwvc3Bhbj5cclxuICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNvbnRlbnRcIj5cclxuICAgICAgICAgICAgICAgICAgICA8c3BhY2Ugc3R5bGU9XCJoZWlnaHQ6IDIwdmg7XCI+PC9zcGFjZT5cclxuICAgICAgICAgICAgICAgICAgICA8aDYgY2xhc3M9XCJ1cHBlcmNhc2VcIj5TZWFyY2ggZm9yIHNvbmdzLCA8c3BhbiBjbGFzcz1cInNlYXJjaC1pdGVtXCIgaWQ9XCJzZWFyY2hTZXRzXCI+c2V0czwvc3Bhbj4sIDxzcGFuIGNsYXNzPVwic2VhcmNoLWl0ZW1cIiBpZD1cInNlYXJjaFVzZXJcIj51c2Vyczwvc3Bhbj4sIDxzcGFuIGNsYXNzPVwic2VhcmNoLWl0ZW1cIiBpZD1cInNlYXJjaFRhZ3NcIj50YWdzPC9zcGFuPiwgYW5kIG1vcmU8L2g2PlxyXG4gICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPVwidGV4dFwiIHBsYWNlaG9sZGVyPVwic2VhcmNoXCIgaWQ9XCJzZWFyY2hGaWVsZFwiLz5cclxuICAgICAgICAgICAgICAgICAgICA8c3BhY2U+PC9zcGFjZT5cclxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwib3ZlcmZsb3ctY29udGFpbmVyXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJyb3cgbGV2ZWxcIiBpZD1cIm9wdGlvbnNDb250YWluZXJcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBjbGFzcz1cImJ1dHRvbi1zd2l0Y2ggYnRuLXRvb2x0aXBcIiBkYXRhLXRvb2x0aXA9XCJTaHVmZmxlIHRyYWNrcyBiZWZvcmUgYWRkaW5nIHRvIHF1ZXVlLlwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPVwiY2hlY2tib3hcIiBuYW1lPVwic2h1ZmZsZVwiIHZhbHVlPVwiU2h1ZmZsZVwiIGlkPVwiY2hrU2h1ZmZsZVwiLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cInVwcGVyY2FzZVwiPlNodWZmbGU8L3NwYW4+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2xhYmVsPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGNsYXNzPVwiYnV0dG9uLXN3aXRjaCBidG4tdG9vbHRpcFwiIGRhdGEtdG9vbHRpcD1cIk51bWJlciBvZiByZXN1bHRzIHRvIHF1ZXVlLlwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPVwiY2hlY2tib3hcIiBuYW1lPVwicmVzdWx0c1wiIHZhbHVlPVwicmVzdWx0c1wiIGlkPVwiY2hrTnVtYmVyXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gaWQ9XCJjaGtOdW1iZXJUZXh0XCIgY2xhc3M9XCJ1cHBlcmNhc2VcIj4xMjAgcmVzdWx0czwvc3Bhbj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvbGFiZWw+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgIDxzcGFjZSBjbGFzcz1cIngtbGFyZ2VcIj48L3NwYWNlPlxyXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJyb3dcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInJvdyBsZXZlbCB0b2dnbGUtY29udGFpbmVyXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aDMgY2xhc3M9XCJ3aGl0ZVwiPkZlYXR1cmVkPC9oMz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gaWQ9XCJjaGFydHMtYnRuXCIgY2xhc3M9XCJidG4tbmltYnVzXCI+VmlldyBBbGw8L2J1dHRvbj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJyb3cgZmxleCBleHBhbmRcIiBpZD1cImNoYXJ0Q29udGFpbmVyXCI+XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgYDtcclxuICAgIH1cclxuXHJcbiAgICBiaW5kRXZlbnRzKCkge1xyXG4gICAgICAgIHRoaXMuc2VhcmNoQ2xvc2VCdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2VhcmNoQ2xvc2VCdG4nKTtcclxuICAgICAgICB0aGlzLnNlYXJjaEZpZWxkID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NlYXJjaEZpZWxkJyk7XHJcbiAgICAgICAgdGhpcy5jaGtTaHVmZmxlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Noa1NodWZmbGUnKTtcclxuICAgICAgICB0aGlzLmNoa051bWJlciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjaGtOdW1iZXInKTtcclxuICAgICAgICB0aGlzLmJ0bkNoYXJ0cyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjaGFydHMtYnRuJyk7XHJcblxyXG4gICAgICAgIHRoaXMuc2VhcmNoU2V0cyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzZWFyY2hTZXRzJyk7XHJcbiAgICAgICAgdGhpcy5zZWFyY2hVc2VyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NlYXJjaFVzZXInKTtcclxuICAgICAgICB0aGlzLnNlYXJjaFRhZ3MgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2VhcmNoVGFncycpO1xyXG5cclxuICAgICAgICAvLyBCaW5kIHNlYXJjaCBmaWVsZCBrZXkgY29tYmluYXRpb25cclxuICAgICAgICB0aGlzLnNlYXJjaEZpZWxkLm9ua2V5ZG93biA9IChlKSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChlLmtleUNvZGUgPT09IDEzKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBFRElUOiBJZiB0aGUgcXVldWUgaXMgbm9uZW1wdHksIHByZXNlcnZlIHRoZSBxdWV1ZSBlbGVtZW50cyBhbmQganVzdCBpbnNlcnQgdGhlIHNvbmcgaW4gYmV0d2VlbiBoaXN0b3J5IGFuZCBxdWV1ZSAobm8gY29kZSlcclxuXHJcbiAgICAgICAgICAgICAgICAvLyBIaWRlIHRoZSBzZWFyY2ggZGlhbG9nXHJcbiAgICAgICAgICAgICAgICB0aGlzLmhpZGVTZWFyY2hEaWFsb2coKTtcclxuICAgICAgICAgICAgICAgIHRoaXMucHJvY2Vzc1NlYXJjaEZpZWxkKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGRvY3VtZW50Lm9ua2V5dXAgPSAoZSkgPT4ge1xyXG4gICAgICAgICAgICBpZiAoZS5rZXlDb2RlID09PSAyNykgeyAvLyBlc2NcclxuICAgICAgICAgICAgICAgIHRoaXMudG9nZ2xlU2VhcmNoRGlhbG9nKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIEV2ZW50IGhhbmRsZXIgZm9yIGNsb3NlIGJ1dHRvbiBmb3Igc2VhcmNoIGRpYWxvZ1xyXG4gICAgICAgIHRoaXMuc2VhcmNoQ2xvc2VCdG4ub25jbGljayA9IChlKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuaGlkZVNlYXJjaERpYWxvZygpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5jaGtTaHVmZmxlLm9uY2xpY2sgPSAoZSkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLl9wbGF5ZXIuc2h1ZmZsZVF1ZXVlID0gdGhpcy5jaGtTaHVmZmxlLmNoZWNrZWQ7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLmNoa051bWJlci5vbmNsaWNrID0gKGUpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5zZXRSZXN1bHRDb3VudCgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5zZWFyY2hTZXRzLm9uY2xpY2sgPSAoZSkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLnNlYXJjaEl0ZW1DbGljayh0aGlzLnNlYXJjaFNldHMpO1xyXG4gICAgICAgICAgICB0aGlzLnNlYXJjaEZpZWxkLmZvY3VzKCk7XHJcbiAgICAgICAgfSAgXHJcblxyXG4gICAgICAgIHRoaXMuc2VhcmNoVXNlci5vbmNsaWNrID0gKGUpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5zZWFyY2hJdGVtQ2xpY2sodGhpcy5zZWFyY2hVc2VyKTtcclxuICAgICAgICAgICAgdGhpcy5zZWFyY2hGaWVsZC5mb2N1cygpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5zZWFyY2hUYWdzLm9uY2xpY2sgPSAoZSkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLnNlYXJjaEl0ZW1DbGljayh0aGlzLnNlYXJjaFRhZ3MpO1xyXG4gICAgICAgICAgICB0aGlzLnNlYXJjaEZpZWxkLmZvY3VzKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBFdmVudCBoYW5kbGVyIHRvIHNob3cgdGhlIGNoYXJ0c1xyXG4gICAgICAgIHRoaXMuYnRuQ2hhcnRzLm9uY2xpY2sgPSAoZSkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLmhpZGVTZWFyY2hEaWFsb2coKTtcclxuICAgICAgICAgICAgdGhpcy5fcGxheWVyLmNoYXJ0c0RpYWxvZy50b2dnbGVDaGFydHMoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJvY2Vzc1NlYXJjaEZpZWxkKCkge1xyXG4gICAgICAgIC8vIENoZWNrIGlmIGlucHV0IGlzIGVtcHR5XHJcbiAgICAgICAgaWYgKHRoaXMuc2VhcmNoRmllbGQudmFsdWUubGVuZ3RoID09PSAwKVxyXG4gICAgICAgICAgICByZXR1cm47IC8vIEV4aXRcclxuXHJcbiAgICAgICAgbGV0IGlmcmFtZUlEID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3dpZGdldHRlc3QnKTtcclxuICAgICAgICB0aGlzLl9wbGF5ZXIuY3VyUGxheWVyID0gU0MuV2lkZ2V0KGlmcmFtZUlEKTtcclxuXHJcbiAgICAgICAgbGV0IHNlYXJjaFF1ZXJ5ID0gdGhpcy5zZWFyY2hGaWVsZC52YWx1ZS50b0xvd2VyQ2FzZSgpOyAvLyBBc3NpZ24gdGhlIHNlYXJjaCBxdWVyeVxyXG5cclxuICAgICAgICAvLyBEZXRlcm1pbmUgaW5wdXQgdHlwZVxyXG4gICAgICAgIGlmIChzZWFyY2hRdWVyeS5zdGFydHNXaXRoKCdodHRwJykgJiYgaXNOYU4oc2VhcmNoUXVlcnkpKSB7IC8vIENoZWNrIGlmIHRoaXMgaXMgYSB1cmxcclxuICAgICAgICAgICAgdGhpcy5fcGxheWVyLmlzUGxheWxpc3QgPSBmYWxzZTsgLy8gUmVzZXRcclxuICAgICAgICAgICAgaWYgKHNlYXJjaFF1ZXJ5LmluY2x1ZGVzKCdzZXRzJykpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX3BsYXllci5pc1BsYXlsaXN0ID0gdHJ1ZTtcclxuICAgICAgICAgICAgfSAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIHRoaXMuX3BsYXllci5jdXJQbGF5ZXIubG9hZChgJHtzZWFyY2hRdWVyeX1gKTtcclxuICAgICAgICB9IGVsc2UgaWYgKGlzTmFOKHNlYXJjaFF1ZXJ5KSkgeyAvLyBDaGVjayBpZiB0aGlzIGlzIGEgc3RyaW5nIHF1ZXJ5XHJcbiAgICAgICAgICAgIC8vIENoZWNrIHRhZ3NcclxuICAgICAgICAgICAgY29uc29sZS5sb2coc2VhcmNoUXVlcnkuc3RhcnRzV2l0aCgnc2V0OicpKTtcclxuICAgICAgICAgICAgaWYgKHNlYXJjaFF1ZXJ5LnN0YXJ0c1dpdGgoJ3BsYXlsaXN0OicpIHx8IHNlYXJjaFF1ZXJ5LnN0YXJ0c1dpdGgoJ3NldDonKSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fcGxheWVyLmdldFNldEJ5S2V5V29yZChzZWFyY2hRdWVyeS5zcGxpdCgnOicpWzFdLnRyaW0oKSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9wbGF5ZXIuaXNQbGF5bGlzdCA9IHRydWU7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoc2VhcmNoUXVlcnkuc3RhcnRzV2l0aCgndGFnOicpIHx8IHNlYXJjaFF1ZXJ5LnN0YXJ0c1dpdGgoJ3RhZ3M6JykpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX3BsYXllci5nZXRUcmFja3NCeVRhZ3Moc2VhcmNoUXVlcnkuc3BsaXQoJzonKVsxXS50cmltKCkpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fcGxheWVyLmlzUGxheWxpc3QgPSBmYWxzZTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChzZWFyY2hRdWVyeS5zdGFydHNXaXRoKCd1c2VyOicpKXtcclxuICAgICAgICAgICAgICAgIHRoaXMuX3BsYXllci5nZXRUcmFja3NCeVVzZXIoc2VhcmNoUXVlcnkuc3BsaXQoJzonKVsxXS50cmltKCkpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fcGxheWVyLmlzUGxheWxpc3QgPSBmYWxzZTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChzZWFyY2hRdWVyeS5zdGFydHNXaXRoKCdnZW5yZTonKSB8fCBzZWFyY2hRdWVyeS5zdGFydHNXaXRoKCdnZW5yZXM6JykpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX3BsYXllci5nZXRUcmFja3NCeUdlbnJlcyhzZWFyY2hRdWVyeS5zcGxpdCgnOicpWzFdLnRyaW0oKSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9wbGF5ZXIuaXNQbGF5bGlzdCA9IGZhbHNlO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fcGxheWVyLmdldFRyYWNrQnlLZXlXb3JkKHNlYXJjaFF1ZXJ5KTtcclxuICAgICAgICAgICAgICAgIHRoaXMuX3BsYXllci5pc1BsYXlsaXN0ID0gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2UgeyAvLyBNdXN0IGJlIGEgc29uZyBJRFxyXG4gICAgICAgICAgICB0aGlzLl9wbGF5ZXIuY3VyUGxheWVyLmxvYWQoYGh0dHBzJTNBLy9hcGkuc291bmRjbG91ZC5jb20vdHJhY2tzLyR7c2VhcmNoUXVlcnl9YCk7IC8vIEZvciBpZFxyXG4gICAgICAgICAgICB0aGlzLl9wbGF5ZXIuaXNQbGF5bGlzdCA9IGZhbHNlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgc2V0VGltZW91dCgoKSA9PiB0aGlzLl9wbGF5ZXIubG9hZFdpZGdldFNvbmcodGhpcy5fcGxheWVyLmN1clBsYXllciksIDIwMDApOyAvLyBOZWVkcyBsb25nZXIgZGVsYXkgdGltZSBzbyBpdCBwcmV2ZW50cyBzdGFsbGluZyAodHJhY2sgbm90IGF1dG8gcGxheWluZylcclxuICAgIH1cclxuXHJcbiAgICB0b2dnbGVTZWFyY2hEaWFsb2coKSB7XHJcbiAgICAgICAgLy8gU2Nyb2xsIHRvIHRvcCB0byBzaG93IHRoZSBzZWFyY2ggZGlhbG9nXHJcbiAgICAgICAgd2luZG93LnNjcm9sbFRvKDAsIDApO1xyXG5cclxuICAgICAgICB0aGlzLmlzU2hvd24gPSAhdGhpcy5pc1Nob3duO1xyXG4gICAgICAgIGlmICh0aGlzLmlzU2hvd24pIHtcclxuICAgICAgICAgICAgdGhpcy5zZWFyY2hGaWVsZC52YWx1ZSA9IFwiXCI7XHJcbiAgICAgICAgICAgIHRoaXMuc2VhcmNoRmllbGQuZm9jdXMoKTtcclxuICAgICAgICAgICAgJCgnI3NlYXJjaE1vZGFsQ29udGFpbmVyJykuYWRkQ2xhc3MoJ3Nob3duJyk7XHJcbiAgICAgICAgICAgIGlmICgkKHdpbmRvdykud2lkdGgoKSA8PSA3NjgpXHJcbiAgICAgICAgICAgICAgICAkKCdib2R5JykuY3NzKHsnb3ZlcmZsb3cteSc6ICdoaWRkZW4nfSk7XHJcblxyXG4gICAgICAgICAgICAvL2lmICh3aW5kb3cuaW5uZXJXaWR0aCA+IDc2OCkge1xyXG4gICAgICAgICAgICAgICAgJCgnI3BsYXllckhlcm8nKS5hZGRDbGFzcygndW5mb2N1c2VkJyk7XHJcbiAgICAgICAgICAgIC8vfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIC8vIFJlc2V0IGRpYWxvZyAobXVzdCBwbGFjZSB1cCBoZXJlIHRvIGFjY291bnQgZm9yIGludmFsaWQgaW5wdXQpXHJcbiAgICAgICAgICAgICQoJyNzZWFyY2hNb2RhbENvbnRhaW5lcicpLnJlbW92ZUNsYXNzKCdzaG93bicpOyAvLyBIaWRlIHRoZSBzZWFyY2ggbW9kYWxcclxuICAgICAgICAgICAgaWYgKCQod2luZG93KS53aWR0aCgpIDw9IDc2OCkgLy8gRm9yIG1vYmlsZSBVSVxyXG4gICAgICAgICAgICAgICAgJCgnYm9keScpLmNzcyh7J292ZXJmbG93LXknOiAnc2Nyb2xsJ30pO1xyXG5cclxuICAgICAgICAgICAgLy9pZiAod2luZG93LmlubmVyV2lkdGggPiA3NjgpIHtcclxuICAgICAgICAgICAgICAgICQoJyNwbGF5ZXJIZXJvJykucmVtb3ZlQ2xhc3MoJ3VuZm9jdXNlZCcpO1xyXG4gICAgICAgICAgICAvL31cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG5cclxuICAgIGhpZGVTZWFyY2hEaWFsb2coKSB7XHJcbiAgICAgICAgLy8gUmVzZXQgZGlhbG9nIChtdXN0IHBsYWNlIHVwIGhlcmUgdG8gYWNjb3VudCBmb3IgaW52YWxpZCBpbnB1dClcclxuICAgICAgICAkKCcjc2VhcmNoTW9kYWxDb250YWluZXInKS5yZW1vdmVDbGFzcygnc2hvd24nKTsgLy8gSGlkZSB0aGUgc2VhcmNoIG1vZGFsXHJcbiAgICAgICAgaWYgKCQod2luZG93KS53aWR0aCgpIDw9IDc2OCkgLy8gRm9yIG1vYmlsZSBVSVxyXG4gICAgICAgICAgICAkKCdib2R5JykuY3NzKHsnb3ZlcmZsb3cteSc6ICdzY3JvbGwnfSk7XHJcblxyXG4gICAgICAgIC8vaWYgKHdpbmRvdy5pbm5lcldpZHRoID4gNzY4KSB7XHJcbiAgICAgICAgICAgICQoJyNwbGF5ZXJIZXJvJykucmVtb3ZlQ2xhc3MoJ3VuZm9jdXNlZCcpO1xyXG4gICAgICAgIC8vfVxyXG4gICAgICAgIHRoaXMuaXNTaG93biA9IGZhbHNlO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFNlYXJjaCB0YWcgYnV0dG9uc1xyXG4gICAgc2VhcmNoSXRlbUNsaWNrKGVsZW1lbnQpIHtcclxuICAgICAgICBzd2l0Y2ggKGVsZW1lbnQuaWQpIHtcclxuICAgICAgICAgICAgY2FzZSAnc2VhcmNoU2V0cyc6XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNlYXJjaEZpZWxkLnZhbHVlID0gJ3NldDogJztcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlICdzZWFyY2hVc2VyJzpcclxuICAgICAgICAgICAgICAgIHRoaXMuc2VhcmNoRmllbGQudmFsdWUgPSAndXNlcjogJztcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlICdzZWFyY2hUYWdzJzpcclxuICAgICAgICAgICAgICAgIHRoaXMuc2VhcmNoRmllbGQudmFsdWUgPSAndGFnczogJztcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgc2V0UmVzdWx0Q291bnQoKSB7XHJcbiAgICAgICAgbGV0IGNvdW50ID0gcHJvbXB0KCdIb3cgbWFueSByZXN1bHRzIGRvIHlvdSB3YW50IHRvIHF1ZXVlPycpO1xyXG5cclxuICAgICAgICBpZiAoY291bnQgPT09IG51bGwgfHwgIWlzRmluaXRlKGNvdW50KSkge1xyXG4gICAgICAgICAgICBVdGlscy5zaG93VG9hc3QoJ1BsZWFzZSBlbnRlciBhIG51bWVyaWNhbCB2YWx1ZSBhbmQgdHJ5IGFnYWluLicpO1xyXG4gICAgICAgICAgICB0aGlzLmNoa051bWJlci5jaGVja2VkID0gZmFsc2U7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgJCgnI2Noa051bWJlclRleHQnKS50ZXh0KGAke2NvdW50fSByZXN1bHRzYCk7XHJcbiAgICAgICAgdGhpcy5fcGxheWVyLnF1ZXVlTnVtID0gY291bnQ7XHJcbiAgICB9XHJcblxyXG4gICAgbG9hZENoYXJ0cygpIHtcclxuICAgICAgICBsZXQgYyA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5jaGFydENvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNjaGFydENvbnRhaW5lcicpO1xyXG4gICAgICAgICQuYWpheCh7XHJcbiAgICAgICAgICAgIHVybDogJ2h0dHA6Ly9wb2xhcml0eS54MTAubXgvbmltYnVzL2ZlYXR1cmVkLmpzb24nLFxyXG4gICAgICAgICAgICB0eXBlOiBcIkdFVFwiLFxyXG4gICAgICAgICAgICBkYXRhVHlwZTonanNvbicsIFxyXG4gICAgICAgICAgICBzdWNjZXNzOiAoZGF0YSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBkYXRhLmNvbGxlY3Rpb24ubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICBjID0gbmV3IENoYXJ0SXRlbSh0aGlzLl9wbGF5ZXIsIGRhdGEuY29sbGVjdGlvbltpXS5jaGFydC50aXRsZSwgZGF0YS5jb2xsZWN0aW9uW2ldLmNoYXJ0LmF1dGhvciwgZGF0YS5jb2xsZWN0aW9uW2ldLmNoYXJ0LmtpbmQsIGRhdGEuY29sbGVjdGlvbltpXS5jaGFydC5nZW5yZV91cmwsIGRhdGEuY29sbGVjdGlvbltpXS5jaGFydC5saW1pdCwgZGF0YS5jb2xsZWN0aW9uW2ldLmNoYXJ0LmltYWdlX3VybCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jaGFydENvbnRhaW5lci5hcHBlbmRDaGlsZChjLnJlbmRlcigpKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIFxyXG4gICAgfVxyXG5cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgU2VhcmNoO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vcHVibGljL2NvbnRyb2xzL3NlYXJjaC5qc1xuLy8gbW9kdWxlIGlkID0gMTFcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiY29uc3QgU29uZ0luZm8gPSAobGFyZ2VBcnQsIHRyYWNrLCB0YWdzLCBlcnJvclB1cmNoYXNlKSA9PiAoXHJcbiAgICBgXHJcbiAgICAgICAgPGRpdiBjbGFzcz1cImNhcmQgbGV2ZWxcIj5cclxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNvbnRlbnQtbm8tcGFkZGluZyB0ZXh0LWNlbnRlclwiPlxyXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJyb3cgY2VudGVyXCIgaWQ9XCJhcnRDb250YWluZXJcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNvbC0xMiBuby1tYXJnaW4gbm8tcGFkZGluZ1wiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImZsaXBDb250YWluZXJcIiBpZD1cImZsaXBDb250YWluZXJcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW1nIGlkPVwic29uZ0FydFwiIHNyYz1cIiR7bGFyZ2VBcnR9XCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInNvbmctZGVzY1wiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY29udGVudC1uby1wYWRkaW5nXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwicm93IHRleHQtY2VudGVyXCIgaWQ9XCJkZXNjTmF2QmFyXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz1cImJ0bi10cmFuc3BhcmVudFwiIGlkPVwiZGVzYy1saWtlc1wiPjxpIGNsYXNzPVwiZmEgZmEtaGVhcnQgc21hbGxcIiBhcmlhLWhpZGRlbj1cInRydWVcIj48L2k+PHNwYW4+JHt0cmFjay5saWtlc19jb3VudH08L3NwYW4+PC9idXR0b24+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGEgaHJlZj1cIiR7dHJhY2sucGVybWFsaW5rX3VybCArICcvY29tbWVudHMnfVwiIHRhcmdldD1cIl9ibGFua1wiPjxidXR0b24gY2xhc3M9XCJidG4tdHJhbnNwYXJlbnRcIiBpZD1cImRlc2MtY29tbWVudHNcIj48aSBjbGFzcz1cImZhIGZhLWNvbW1lbnQgc21hbGxcIiBhcmlhLWhpZGRlbj1cInRydWVcIj48L2k+PHNwYW4+JHt0cmFjay5jb21tZW50X2NvdW50IHx8IDB9PC9zcGFuPjwvYnV0dG9uPjwvYT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPVwiYnRuLXRyYW5zcGFyZW50XCIgaWQ9XCJkZXNjLXJlcG9zdHNcIj48aSBjbGFzcz1cImZhIGZhLXJldHdlZXQgc21hbGxcIiBhcmlhLWhpZGRlbj1cInRydWVcIj48L2k+PHNwYW4+JHt0cmFjay5yZXBvc3RzX2NvdW50fTwvc3Bhbj48L2J1dHRvbj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YSBocmVmPVwiJHt0cmFjay51c2VyLnBlcm1hbGlua191cmx9XCIgdGFyZ2V0PVwiX2JsYW5rXCI+PGJ1dHRvbiBjbGFzcz1cImJ0bi10cmFuc3BhcmVudFwiIGlkPVwiZGVzYy11c2VyXCI+PGkgY2xhc3M9XCJmYSBmYS11c2VyIHNtYWxsXCIgYXJpYS1oaWRkZW49XCJ0cnVlXCI+PC9pPjxzcGFuPiR7dHJhY2sudXNlci51c2VybmFtZX08L3NwYW4+PC9idXR0b24+PC9hPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxhIGhyZWY9XCIke3RyYWNrLnVzZXIucHVyY2hhc2VfdXJsIHx8IGVycm9yUHVyY2hhc2V9XCIgdGFyZ2V0PVwiX2JsYW5rXCI+PGJ1dHRvbiBjbGFzcz1cImJ0bi10cmFuc3BhcmVudFwiIGlkPVwiZGVzYy1idXlcIj48aSBjbGFzcz1cImZhIGZhLXVzZCBzbWFsbFwiIGFyaWEtaGlkZGVuPVwidHJ1ZVwiPjwvaT48c3Bhbj5QdXJjaGFzZTwvc3Bhbj48L2J1dHRvbj48L2E+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJyb3cgdGV4dC1jZW50ZXJcIiBpZD1cImRlc2NTdGF0c1wiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwPkNyZWF0ZWQ6ICR7dHJhY2suY3JlYXRlZF9hdC5zcGxpdCgnVCcpWzBdLnJlcGxhY2UoLy0vZywgJyAvICcpfTwvcD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInJvd1wiIGlkPVwiZGVzY1RhZ3NcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAke3RhZ3N9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFjZSBjbGFzcz1cImxhcmdlXCI+PC9zcGFjZT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNvbnRlbnRcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwcmU+JHt0cmFjay5kZXNjcmlwdGlvbiB8fCAnTm8gZGVzY3JpcHRpb24gYXZhaWxhYmxlLid9PC9wcmU+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgIDxoNSBpZD1cInRyYWNrVGl0bGVcIiBjbGFzcz1cImxpZ2h0XCI+JHt0cmFjay50aXRsZX08L2g1PlxyXG4gICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzPVwidGl0bGUgdXBwZXJjYXNlXCIgaWQ9XCJ0cmFja1VzZXJcIj4ke3RyYWNrLnVzZXIudXNlcm5hbWV9PC9wPlxyXG4gICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzPVwic3VidGl0bGVcIiBpZD1cImN1clRpbWVcIj4wOjAwIC8gNDoyMDwvcD5cclxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwid2F2ZWZvcm1cIj48L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICA8c3BhY2U+PC9zcGFjZT5cclxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwibGV2ZWxcIiBpZD1cInZvbHVtZUNvbnRhaW5lclwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cImljb25cIj48aSBjbGFzcz1cImZhIGZhLXZvbHVtZS1vZmZcIiBhcmlhLWhpZGRlbj1cInRydWVcIj48L2k+PC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgaWQ9XCJ2b2x1bWVTbGlkZXJcIiB0eXBlPVwicmFuZ2VcIiBtaW49XCIwXCIgbWF4PVwiMTAwXCIgdmFsdWU9XCIwXCIgY2xhc3M9XCJyYW5nZVwiLz5cclxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICBgXHJcbik7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBTb25nSW5mb1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vcHVibGljL2NvbnRyb2xzL3NvbmdpbmZvLmpzXG4vLyBtb2R1bGUgaWQgPSAxMlxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvKipcclxuICogRHJhd3MgdGhlIHdhdmVmb3JtIGNvbXBvbmVudCBvZiB0aGUgcGxheWVyLlxyXG4gKi9cclxuaW1wb3J0IFNldHRpbmdzIGZyb20gJy4uL2pzL3NldHRpbmdzJztcclxubGV0IFNDID0gcmVxdWlyZSgnc291bmRjbG91ZCcpO1xyXG5cclxuY2xhc3MgV2F2ZUZvcm0ge1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQ29uc3RydWN0b3IgZm9yIHRoZSB3YXZlZm9ybVxyXG4gICAgICogQHBhcmFtIHtXYXZlRm9ybUNvbmZpZ30gLSB7XHJcbiAgICAgICAgICAgIGNvbnRhaW5lcjogSFRNTEVsZW1lbnQsXHJcbiAgICAgICAgICAgIGF1ZGlvOiBBdWRpbyxcclxuICAgICAgICAgICAgZGF0YTogQXJyYXksXHJcbiAgICAgICAgICAgIHBlYWtXaWR0aDogbnVtYmVyLFxyXG4gICAgICAgICAgICBwZWFrU3BhY2U6IG51bWJlcixcclxuICAgICAgICAgICAgcmVzcG9uc2l2ZTogYm9vbGVhbixcclxuICAgICAgICAgICAgbW91c2VPdmVyRXZlbnRzOiBib29sZWFuLFxyXG4gICAgICAgICAgICBjb2xvcjoge1xyXG4gICAgICAgICAgICAgICAgYmFja2dyb3VuZDogc3RyaW5nLFxyXG4gICAgICAgICAgICAgICAgZm9vdGVyOiBzdHJpbmcsXHJcbiAgICAgICAgICAgICAgICBmb290ZXJQbGF5YmFjazogc3RyaW5nLFxyXG4gICAgICAgICAgICAgICAgaG92ZXJHcmFkaWVudDoge1xyXG4gICAgICAgICAgICAgICAgICAgIGZyb206IHN0cmluZyxcclxuICAgICAgICAgICAgICAgICAgICB0bzogc3RyaW5nXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIHBsYXliYWNrR3JhZGllbnQ6IHtcclxuICAgICAgICAgICAgICAgICAgICBmcm9tOiBzdHJpbmcsXHJcbiAgICAgICAgICAgICAgICAgICAgdG86IHN0cmluZ1xyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICBob3ZlclBsYXliYWNrR3JhZGllbnQ6IHtcclxuICAgICAgICAgICAgICAgICAgICBmcm9tOiBzdHJpbmcsXHJcbiAgICAgICAgICAgICAgICAgICAgdG86IHN0cmluZ1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICovXHJcbiAgICBjb25zdHJ1Y3RvcihwYXJhbXMpIHtcclxuICAgICAgICB0aGlzLmN1cnJlbnRQb3NpdGlvbiA9IDA7XHJcbiAgICAgICAgdGhpcy5kdXJhdGlvbiA9IDA7XHJcbiAgICAgICAgdGhpcy5tb3VzZU92ZXIgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLmNhbnZhcyA9IG51bGw7XHJcblxyXG4gICAgICAgIHRoaXMud2F2ZUZvcm1GcmFtZSA9IDA7XHJcbiAgICAgICAgdGhpcy51cGRhdGVJbnRlcnZhbCA9IChTZXR0aW5ncy5nZXRQcmVmKCdiYXR0ZXJ5U2F2ZXInKSA/IDEwMCA6IDEwKTsgLy8gVXBkYXRlIGV2ZXJ5IHdoYXRldmVyIG1ldHJpYyBTQyB1c2VzXHJcblxyXG4gICAgICAgIC8vIENyZWF0ZSB0aGUgY29uZmlnIGZpbGUgZm9yIHRoZSB3YXZlZm9ybSBzZXR0aW5nc1xyXG4gICAgICAgIHRoaXMuY29uZmlnID0ge1xyXG4gICAgICAgICAgICBjb250YWluZXI6IG51bGwsXHJcbiAgICAgICAgICAgIGF1ZGlvOiBudWxsLFxyXG4gICAgICAgICAgICBkdXJhdGlvbjogMCxcclxuICAgICAgICAgICAgZGF0YTogbnVsbCxcclxuICAgICAgICAgICAgcGVha1dpZHRoOiAyLCAvLyBQaXhlbCB3aWR0aCBvZiB0aGUgdmVydGljYWwgbGluZXMgaW4gdGhlIHdhdmVmb3JtXHJcbiAgICAgICAgICAgIHBlYWtTcGFjZTogMiwgLy8gVGhlIHNwYWNlIGJldHdlZW4gdGhlIHBlYWtzIGluIHBpeGVsc1xyXG4gICAgICAgICAgICByZXNwb25zaXZlOiB0cnVlLFxyXG4gICAgICAgICAgICBtb3VzZU92ZXJFdmVudHM6IHRydWUsXHJcbiAgICAgICAgICAgIG1vdXNlQ2xpY2tFdmVudHM6IHRydWUsXHJcbiAgICAgICAgICAgIC8vIENvbG9yIGNvbmZpZ1xyXG4gICAgICAgICAgICBjb2xvcjoge1xyXG4gICAgICAgICAgICAgICAgYmFja2dyb3VuZDogXCIjOEM4QzhDXCIsXHJcbiAgICAgICAgICAgICAgICBmb290ZXI6IFwiI0IyQjJCMlwiLFxyXG4gICAgICAgICAgICAgICAgZm9vdGVyUGxheWJhY2s6IFwiI0ZGQUE4MFwiLFxyXG4gICAgICAgICAgICAgICAgaG92ZXJHcmFkaWVudDoge1xyXG4gICAgICAgICAgICAgICAgZnJvbTogXCIjRkY3MjAwXCIsXHJcbiAgICAgICAgICAgICAgICB0bzogXCIjREE0MjE4XCJcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBwbGF5YmFja0dyYWRpZW50OiB7XHJcbiAgICAgICAgICAgICAgICAgICAgZnJvbTogXCIjRkY3MjAwXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgdG86IFwiI0RBNDIxOFwiXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgaG92ZXJQbGF5YmFja0dyYWRpZW50OiB7XHJcbiAgICAgICAgICAgICAgICAgICAgZnJvbTogXCIjQUI1RDIwXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgdG86IFwiI0E4NDAyNFwiXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9OyAvLyBDb25maWcgb2JqZWN0IGVuZFxyXG5cclxuICAgICAgICBpZiAocGFyYW1zKSB7IC8vIENoZWNrIGlmIG5vdCBudWxsXHJcbiAgICAgICAgICAgIE9iamVjdC5hc3NpZ24odGhpcy5jb25maWcsIHBhcmFtcyk7IC8vIEVudW1lcmF0ZSB0aHJvdWdoIGZpZWxkcyBhbmQgYXNzaWduIHRoZW0gdG8gY29ycmVzcG9uZGluZyBmaWVsZHMgaW4gdGhpcy5jb25maWcgKFNpbWlsYXIgdG8gc2VyaWFsaXppbmcpXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBVcGRhdGUgZHVyYXRpb25cclxuICAgICAgICB0aGlzLmR1cmF0aW9uID0gdGhpcy5jb25maWcuZHVyYXRpb247XHJcblxyXG4gICAgICAgIHRoaXMuYnVpbGRDYW52YXMoKTtcclxuICAgICAgICB0aGlzLmJpbmRFdmVudHMoKTtcclxuICAgICAgICB0aGlzLmRyYXdXYXZlRm9ybSgpOyAvLyBEcmF3IHRoZSB3YXZlZm9ybVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQ3JlYXRlIHRoZSBjYW52YXNcclxuICAgICAqL1xyXG4gICAgYnVpbGRDYW52YXMoKSB7XHJcbiAgICAgICAgdGhpcy5jYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdjYW52YXMnKTsgLy8gQ3JlYXRlIHRoZSBjYW52YXMgZWxlbWVudFxyXG4gICAgICAgIHRoaXMuY29uZmlnLmNvbnRhaW5lci5hcHBlbmRDaGlsZCh0aGlzLmNhbnZhcyk7IC8vIFVwZGF0ZSB0aGUgY29udGFpbmVyIHRvIHRoZSBjYW52YXMgb2JqZWN0XHJcbiAgICAgICAgdGhpcy51cGRhdGVDYW52YXNTaXplKCk7XHJcbiAgICAgICAgdGhpcy5jdHggPSB0aGlzLmNhbnZhcy5nZXRDb250ZXh0KCcyZCcpO1xyXG4gICAgICAgIHRoaXMuY3R4LmxpbmVXaWR0aCA9IHRoaXMuY29uZmlnLnBlYWtXaWR0aDsgLy8gU2V0cyB0aGUgd2lkdGggb2YgZWFjaCB2ZXJ0aWNhbCBsaW5lIGluIHRoZSBjYW52YXMuXHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBCaW5kIHdhdmVmb3JtIGV2ZW50c1xyXG4gICAgICovXHJcbiAgICBiaW5kRXZlbnRzKCkge1xyXG4gICAgICAgIGlmICh0aGlzLmNvbmZpZy5yZXNwb25zaXZlKSAvLyBJZiB3YXZlZm9ybSBpcyByZXNwb25zaXZlLCByZXNpemUgd2l0aCBwYXJlbnQuXHJcbiAgICAgICAgICAgIHRoaXMub25SZXNpemVIYW5kbGVyKCk7XHJcblxyXG4gICAgICAgIGlmICh0aGlzLmNvbmZpZy5tb3VzZU92ZXJFdmVudHMpIHsgLy8gRW5hYmxlIG1vdXNlIG92ZXIvbGVhdmUgZXZlbnRzXHJcbiAgICAgICAgICAgIHRoaXMub25Nb3VzZU1vdmVIYW5kbGVyKCk7XHJcbiAgICAgICAgICAgIHRoaXMub25Nb3VzZUxlYXZlSGFuZGxlcigpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHRoaXMuY29uZmlnLm1vdXNlQ2xpY2tFdmVudHMpIC8vIEVuYWJsZSBtb3VzZSBjbGljayBoYW5kbGluZ1xyXG4gICAgICAgICAgICB0aGlzLm9uTW91c2VDbGlja0hhbmRsZXIoKTtcclxuICAgICAgICBcclxuICAgICAgICBpZiAodGhpcy5jb25maWcuYXVkaW8pIHsgLy8gVE9ETzogTmVlZCB0byBmaWd1cmUgb3V0IGhvdyB0byBiaW5kIHdpdGggd2lkZ2V0IEFQSSwgbm90IHJlZ3VsYXIgQVBJLlxyXG4gICAgICAgICAgICB0aGlzLm9uVGltZVVwZGF0ZUhhbmRsZXIoKTtcclxuICAgICAgICAgICAgdGhpcy5vbkNhblBsYXlIYW5kbGVyKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogRVZFTlQgSEFORExFUlNcclxuICAgICAqL1xyXG5cclxuICAgICAvKipcclxuICAgICAgKiBUaGlzIGZpcmVzIHdoZW4gdGhlIHdpZGdldCBpcyByZWFkeSBhbmQgdXBkYXRlcyB0aGUgd2F2ZWZvcm0gYnkgZHVyYXRpb24gYW5kIGN1cnJlbnQgdGltZS5cclxuICAgICAgKiBOT1RFOiBUaGlzIGV2ZW50IG1pZ2h0IG5vdCBiZSBmaXJlZC5cclxuICAgICAgKi9cclxuICAgIG9uQ2FuUGxheUhhbmRsZXIoKSB7XHJcbiAgICAgICAgLy8gUkVBRFkgc2lnbmFsIG1pZ2h0IG5vdCBiZSBuZWVkZWRcclxuICAgICAgICB0aGlzLmNvbmZpZy5hdWRpby5iaW5kKFNDLldpZGdldC5FdmVudHMuUkVBRFksIChlKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuY3VycmVudFBvc2l0aW9uID0gdGhpcy5jb25maWcuYXVkaW8uY3VycmVudFBvc2l0aW9uO1xyXG4gICAgICAgICAgICB0aGlzLmRyYXdXYXZlRm9ybSgpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogRXZlbnQgZmlyZWQgd2hlbiB0aW1lIHVwZGF0ZXMgaW4gdGhlIHdpZGdldCBvYmplY3RcclxuICAgICAqL1xyXG4gICAgb25UaW1lVXBkYXRlSGFuZGxlcigpIHtcclxuICAgICAgICB0aGlzLmNvbmZpZy5hdWRpby5iaW5kKFNDLldpZGdldC5FdmVudHMuUExBWV9QUk9HUkVTUywgKGUpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5jdXJyZW50UG9zaXRpb24gPSBlLmN1cnJlbnRQb3NpdGlvbjtcclxuICAgICAgICAgICAgdGhpcy53YXZlRm9ybUZyYW1lKys7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLndhdmVGb3JtRnJhbWUgJSB0aGlzLnVwZGF0ZUludGVydmFsID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmRyYXdXYXZlRm9ybSgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBVcGRhdGUgd2F2ZWZvcm0gY29sb3JzIGJhc2VkIG9uIG1vdXNlIGxvY2F0aW9uXHJcbiAgICAgKi9cclxuICAgIG9uTW91c2VNb3ZlSGFuZGxlcigpIHtcclxuICAgICAgICB0aGlzLmNhbnZhcy5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCBldmVudCA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMubW91c2VPdmVyID0gdGhpcy5nZXRNb3VzZVBvc2l0aW9uKGV2ZW50KTsgLy8gQXNzaWduIGNvb3JkcyB0byBtb3VzZU92ZXJcclxuICAgICAgICAgICAgdGhpcy5kcmF3V2F2ZUZvcm0oKTsgLy8gVXBkYXRlIHdhdmVmb3JtXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBIYW5kbGVzIHdoZW4gdGhlIG1vdXNlIGxlYXZlcyB0aGUgd2F2ZWZvcm0gYXJlYVxyXG4gICAgICovXHJcbiAgICBvbk1vdXNlTGVhdmVIYW5kbGVyKCkge1xyXG4gICAgICAgIHRoaXMuY2FudmFzLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbGVhdmUnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMubW91c2VPdmVyID0gbnVsbDtcclxuICAgICAgICAgICAgdGhpcy5kcmF3V2F2ZUZvcm0oKTsgLy8gVXBkYXRlIHdhdmVmb3JtXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBIYW5kbGVzIHRoZSBtb3VzZSBjbGlja1xyXG4gICAgICovXHJcbiAgICBvbk1vdXNlQ2xpY2tIYW5kbGVyKCkge1xyXG4gICAgICAgIHRoaXMuY2FudmFzLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZXZlbnQgPT4ge1xyXG4gICAgICAgICAgICAvLyBHZXQgbGVmdCBjbGljayBhbmQgdGltZSA+IDBcclxuICAgICAgICAgICAgaWYgKGV2ZW50LmJ1dHRvbiA9PT0gMCAmJiB0aGlzLmR1cmF0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgeCA9IGV2ZW50Lm9mZnNldFggfHwgZXZlbnQubGF5ZXJYO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmNvbmZpZy5hdWRpbykgeyAvLyBBdWRpbyBpcyBub3QgbnVsbFxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY29uZmlnLmN1cnJlbnRQb3NpdGlvbiA9IHBhcnNlSW50KHRoaXMuZHVyYXRpb24gLyAxMDAgKiAoeCAvICh0aGlzLmNvbmZpZy5jb250YWluZXIuY2xpZW50V2lkdGggLyAxMDApKSk7IC8vIFVwZGF0ZSB0aGUgdHJhY2sgcG9zaXRpb25cclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbmZpZy5hdWRpby5zZWVrVG8oTWF0aC5mbG9vcih0aGlzLmNvbmZpZy5jdXJyZW50UG9zaXRpb24pKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50VGltZSA9IHBhcnNlSW50KHRoaXMuZHVyYXRpb24gLyAxMDAgKiAoeCAvICh0aGlzLmNvbmZpZy5jb250YWluZXIuY2xpZW50V2lkdGggLyAxMDApKSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgdGhpcy5kcmF3V2F2ZUZvcm0oKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogR2V0IHRoZSBtb3VzZSBwb3NpdGlvbiByZWxhdGl2ZSB0byBjYW52YXMgbG9jYXRpb24uXHJcbiAgICAgKiBAcGFyYW0ge01vdXNlRXZlbnR9IGV2ZW50XHJcbiAgICAgKiBAcmV0dXJuIHt7eDogbnVtYmVyLCB5OiBudW1iZXJ9fVxyXG4gICAgICovXHJcbiAgICBnZXRNb3VzZVBvc2l0aW9uKGUpIHtcclxuICAgICAgICBsZXQgcmVjdCA9IHRoaXMuY2FudmFzLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIHg6IGV2ZW50LmNsaWVudFggLSByZWN0LmxlZnQsIC8vIEdldCB4IHBvc2l0aW9uIHJlbGF0aXZlIHRvIGNhbnZhcyBsZWZ0IGJvcmRlclxyXG4gICAgICAgICAgICB5OiBldmVudC5jbGllbnRZIC0gcmVjdC50b3AgLy8gR2V0IHkgcG9zaXRpb24gcmVsYXRpdmUgdG8gY2FudmFzIHRvcCBib3JkZXJcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogSGFuZGxlcyB3aGVuIHRoZSB3aW5kb3cgb2JqZWN0IHJlc2l6ZXMgdG8gcmVkcmF3IHRoZSB3YXZlZm9ybSBhY2NvcmRpbmcgdG8gdGhlIGNvbnRhaW5lciBzaXplLiBUaGlzIGlzIG9ubHkgcmVkcmF3biB3aGVuIHNpemVzIGFyZSBkaWZmZXJlbnQuXHJcbiAgICAgKi9cclxuICAgIG9uUmVzaXplSGFuZGxlcigpIHtcclxuICAgICAgICBsZXQgb2xkV2lkdGggPSB0aGlzLmNvbmZpZy5jb250YWluZXIuY2xpZW50V2lkdGg7IC8vIEdldCBkaW1lbnNpb25zIG9mIHRoZSBjb250YW5lciB0aGF0IGhvbGRzIHRoZSBjYW52YXNcclxuICAgICAgICBsZXQgb2xkSGVpZ2h0ID0gdGhpcy5jb25maWcuY29udGFpbmVyLmNsaWVudEhlaWdodDtcclxuXHJcbiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsICgpID0+IHtcclxuICAgICAgICAgICAgaWYgKG9sZFdpZHRoICE9PSB0aGlzLmNvbmZpZy5jb250YWluZXIuY2xpZW50V2lkdGggfHwgb2xkSGVpZ2h0ICE9PSB0aGlzLmNvbmZpZy5jb250YWluZXIuY2xpZW50SGVpZ2h0KSB7IFxyXG5cclxuICAgICAgICAgICAgICAgIC8vIFVwZGF0ZSB0cmFja2VkIHByZXZpb3VzIGRpbWVuc2lvbnMgb24gcmVzaXplXHJcbiAgICAgICAgICAgICAgICBvbGRXaWR0aCA9IHRoaXMuY29uZmlnLmNvbnRhaW5lci5jbGllbnRXaWR0aDtcclxuICAgICAgICAgICAgICAgIG9sZEhlaWdodCA9IHRoaXMuY29uZmlnLmNvbnRhaW5lci5jbGllbnRIZWlnaHQ7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZUNhbnZhc1NpemUoKTsgLy8gUmVmcmVzaCB0aGUgZGlzcGxheVxyXG4gICAgICAgICAgICAgICAgdGhpcy5kcmF3V2F2ZUZvcm0oKTsgLy8gRHJhdyBpdFxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBVcGRhdGUgdGhlIGNhbnZhcyBzaXplIHRvIG1hdGNoIHRoZSBjb250YWluZXIuIChQcm9iYWJseSBjb3VsZCBiZSByZXBsYWNlZCB3aXRoIENTUylcclxuICAgICAqL1xyXG4gICAgdXBkYXRlQ2FudmFzU2l6ZSgpIHtcclxuICAgICAgICB0aGlzLmNhbnZhcy53aWR0aCA9IHRoaXMuY29uZmlnLmNvbnRhaW5lci5jbGllbnRXaWR0aDtcclxuICAgICAgICB0aGlzLmNhbnZhcy5oZWlnaHQgPSB0aGlzLmNvbmZpZy5jb250YWluZXIuY2xpZW50SGVpZ2h0O1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogV0FWRUZPUk0gQ09MT1JJTkdcclxuICAgICAqL1xyXG5cclxuICAgICAvKipcclxuICAgICAgKiBDb25zdHJ1Y3QgYSBsaW5lYXIgZ3JhZGllbnQgb3ZlciB0aGUgd2F2ZWZvcm1cclxuICAgICAgKiBcclxuICAgICAgKiBAcGFyYW0ge251bWJlcn0geDFcclxuICAgICAgKiBAcGFyYW0ge251bWJlcn0geTEgXHJcbiAgICAgICogQHBhcmFtIHtudW1iZXJ9IHgyIFxyXG4gICAgICAqIEBwYXJhbSB7bnVtYmVyfSB5MiBcclxuICAgICAgKiBAcGFyYW0ge3tmcm9tOiBzdHJpbmcsIHRvOiBzdHJpbmd9fSBwYXJhbSAtIHBhcmFtIG9iamVjdCB0aGF0IGhvbGRzIHRoZSBjb2xvciB2YWx1ZXMgYXMgc3RyaW5ncy5cclxuICAgICAgKiBAcmV0dXJucyB7Q2FudmFzR3JhZGllbnR9XHJcbiAgICAgICpcclxuICAgICAgKiBAbWVtYmVyb2YgV2F2ZUZvcm1cclxuICAgICAgKi9cclxuICAgIGdldEdyYWRpZW50KHgxLCB5MSwgeDIsIHkyLCBwYXJhbSkge1xyXG4gICAgICAgIGxldCBncmFkaWVudCA9IHRoaXMuY3R4LmNyZWF0ZUxpbmVhckdyYWRpZW50KHgxLCB5MSwgeDIsIHkyKTtcclxuICAgICAgICBcclxuICAgICAgICAvLyBDb2xvciBzZWN0aW9ucyBvZiB0aGUgZ3JhZGllbnQgd2l0aCBjb2xvcnMgaW4gcGFyYW0uKiB3aGVyZSBpbmRleGVzIGluZGljYXRlIHN0YXJ0IGFuZCBlbmQgcG9zaXRpb25zLlxyXG4gICAgICAgIGdyYWRpZW50LmFkZENvbG9yU3RvcCgwLCBwYXJhbS5mcm9tKTtcclxuICAgICAgICBncmFkaWVudC5hZGRDb2xvclN0b3AoMSwgcGFyYW0udG8pO1xyXG5cclxuICAgICAgICByZXR1cm4gZ3JhZGllbnQ7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBDb25zdHJ1Y3QgYSBsaW5lYXIgZ3JhZGllbnQgb24gbW91c2UgaG92ZXJcclxuICAgICAqIFxyXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHgxIFxyXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHkxIFxyXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHgyIFxyXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHkyIFxyXG4gICAgICogQHJldHVybnMge0NhbnZhc0dyYWRpZW50fVxyXG4gICAgICogXHJcbiAgICAgKiBAbWVtYmVyb2YgV2F2ZUZvcm1cclxuICAgICAqL1xyXG4gICAgZ2V0SG92ZXJHcmFkaWVudCh4MSwgeTEsIHgyLCB5Mikge1xyXG4gICAgICAgIC8vIFJldHVybiBncmFkaWVudCB3aXRoIGhvdmVyZWQgY29sb3JzLlxyXG4gICAgICAgIHJldHVybiB0aGlzLmdldEdyYWRpZW50KHgxLCB5MSwgeDIsIHkyLCB7XHJcbiAgICAgICAgICAgIGZyb206IHRoaXMuY29uZmlnLmNvbG9yLmhvdmVyR3JhZGllbnQuZnJvbSxcclxuICAgICAgICAgICAgdG86IHRoaXMuY29uZmlnLmNvbG9yLmhvdmVyR3JhZGllbnQudG9cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIENvbnN0cnVjdCBhIGxpbmVhciBncmFkaWVudCBmb3IgcGxheWJhY2sgcGVha1xyXG4gICAgICogXHJcbiAgICAgKiBAcGFyYW0ge251bWJlcn0geDEgXHJcbiAgICAgKiBAcGFyYW0ge251bWJlcn0geTEgXHJcbiAgICAgKiBAcGFyYW0ge251bWJlcn0geDIgXHJcbiAgICAgKiBAcGFyYW0ge251bWJlcn0geTIgXHJcbiAgICAgKiBAcmV0dXJucyB7Q2FudmFzR3JhZGllbnR9XHJcbiAgICAgKiBcclxuICAgICAqIEBtZW1iZXJvZiBXYXZlRm9ybVxyXG4gICAgICovXHJcbiAgICBnZXRQbGF5QmFja0dyYWRpZW50KHgxLCB5MSwgeDIsIHkyKSB7XHJcbiAgICAgICAgLy8gUmV0dXJuIGdyYWRpZW50IHdpdGggcGxheWJhY2sgY29sb3JzIChpbiBwcm9ncmVzcyBjb2xvcnMpXHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0R3JhZGllbnQoeDEsIHkxLCB4MiwgeTIsIHtcclxuICAgICAgICAgICAgZnJvbTogdGhpcy5jb25maWcuY29sb3IucGxheWJhY2tHcmFkaWVudC5mcm9tLFxyXG4gICAgICAgICAgICB0bzogdGhpcy5jb25maWcuY29sb3IucGxheWJhY2tHcmFkaWVudC50b1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQ29uc3RydWN0IGxpbmVhciBncmFkaWVudCBmb3IgcGxheWJhY2sgY29sb3JzIG9uIG1vdXNlIGhvdmVyXHJcbiAgICAgKiBcclxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB4MSBcclxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB5MSBcclxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB4MiBcclxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB5MiBcclxuICAgICAqIEByZXR1cm5zIHtDYW52YXNHcmFkaWVudH1cclxuICAgICAqIFxyXG4gICAgICogQG1lbWJlcm9mIFdhdmVGb3JtXHJcbiAgICAgKi9cclxuICAgIGdldEhvdmVyUGxheUJhY2tHcmFkaWVudCh4MSwgeTEsIHgyLCB5Mikge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmdldEdyYWRpZW50KHgxLCB5MSwgeDIsIHkyLCB7XHJcbiAgICAgICAgICAgIGZyb206IHRoaXMuY29uZmlnLmNvbG9yLmhvdmVyUGxheWJhY2tHcmFkaWVudC5mcm9tLFxyXG4gICAgICAgICAgICB0bzogdGhpcy5jb25maWcuY29sb3IuaG92ZXJQbGF5YmFja0dyYWRpZW50LnRvIFxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogRHJhdyB0aGUgc3Ryb2tlIHN0eWxlIGFjY29yZGluZyB0byB0aGUgbW91c2UgcG9zaXRpb24uXHJcbiAgICAgKiBcclxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB4IFxyXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHkgXHJcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gbGluZUJyZWFrIFxyXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHBsYXliYWNrIFxyXG4gICAgICogQHJldHVybnMge2NvbmZpZ31cclxuICAgICAqIFxyXG4gICAgICogQG1lbWJlcm9mIFdhdmVGb3JtXHJcbiAgICAgKi9cclxuICAgIGdldENvbnRleHRTdHJva2VTdHlsZSh4LCB5LCBsaW5lQnJlYWssIHBsYXliYWNrKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuY29uZmlnLm1vdXNlT3ZlckV2ZW50cykgeyAvLyBVc2VkIHRvIGNoZWNrIGlmIHRoaXMgaXMgZW5hYmxlZCBpbiB0aGUgY29uZmlnc1xyXG4gICAgICAgICAgICBpZiAodGhpcy5tb3VzZU92ZXIgJiYgdGhpcy5tb3VzZU92ZXIueCA+PSB4KSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRIb3ZlckdyYWRpZW50KHgsIHksIHgsIGxpbmVCcmVhayk7IC8vIENvbG9yIHVudGlsIHRoZSBsaW5lIGJyZWFrLlxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIGlmIChwbGF5YmFjayA+PSB4KSB7IC8vIElmIHRoZSBzb25nIHByb2dyZXNzIGlzIGdyZWF0ZXIgdGhhbiB0aGUgeCB2YWx1ZVxyXG4gICAgICAgICAgICBpZiAodGhpcy5jb25maWcubW91c2VPdmVyRXZlbnRzKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5tb3VzZU92ZXIpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRIb3ZlclBsYXlCYWNrR3JhZGllbnQoeCwgeSwgeCwgbGluZUJyZWFrKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0UGxheUJhY2tHcmFkaWVudCh4LCB5ICx4LCBsaW5lQnJlYWspO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHRoaXMuY29uZmlnLmNvbG9yLmJhY2tncm91bmQ7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBEcmF3IHRoZSB3YXZlZm9ybSBjYW52YXMgb2JqZWN0LlxyXG4gICAgICogXHJcbiAgICAgKiBAbWVtYmVyb2YgV2F2ZUZvcm1cclxuICAgICAqL1xyXG4gICAgZHJhd1dhdmVGb3JtKCkge1xyXG4gICAgICAgIC8vIFBhcnNlIHdhdmVmb3JtIGZyb20gdXJsLCBleDogaHR0cHM6Ly93aXMuc25kY2RuLmNvbS9pdmFzaWoyRFFvcXpfbS5qc29uXHJcblxyXG4gICAgICAgIC8vIFdlIG5lZWQgdG8gY2FsY3VsYXRlIHRoZSBvZmZzZXQgb2YgaG93IG1hbnkgcGVha3Mgd2UgY2FuIGRpc3BsYXkuIElmIHRoZSB3YXZmb3JtIGlzIGF0IDEwMCUgd2lkdGgsIHdlIGNhbiBkaXNwbGF5IGFsbCwgYnV0IGlmIG5vdCwgd2UgbmVlZCB0byBzZWxlY3QgZXZlcnkgTiBwZWFrcyB0byBkcmF3LlxyXG4gICAgICAgIC8vIGRhdGEubGVuZ3RoIC0gbnVtYmVyIG9mIHBlYWtzIGluIHRoZSB3YXZlZm9ybVxyXG4gICAgICAgIC8vIGNvbmZpZy5wZWFrV2lkdGggLSBkZWZhdWx0IHNldCB0byAycHggaW4gY29uc3RyY3RvciAod2lkdGggaWYgaW5kaXZpZHVhbCBwZWFrKVxyXG4gICAgICAgIC8vIGNvbmlnLnBlYWtTcGFjZSAtIGRlZmF1bHQgc2V0IHRvIDFweCBpbiB0aGUgY29uc3RydWN0b3IgKHNwYWNlIGJldHdlZW4gcGVhaylcclxuICAgICAgICBsZXQgTiA9IHRoaXMuY29uZmlnLmRhdGEubGVuZ3RoIC8gdGhpcy5jb25maWcuY29udGFpbmVyLmNsaWVudFdpZHRoICogKHRoaXMuY29uZmlnLnBlYWtXaWR0aCArIHRoaXMuY29uZmlnLnBlYWtTcGFjZSk7XHJcblxyXG4gICAgICAgIGxldCBjb3VudCA9IE1hdGguZmxvb3IodGhpcy5jb25maWcuZGF0YS5sZW5ndGggLyBOKTsgLy8gQ291bnQgaG93IG1hbnkgcGVha3Mgd2Ugd2lsbCBkaXNwbGF5ICh0b3RhbCBwZWFrcyAvIGV2ZXJ5IE50aCBwZWFrIGJ5IHRoZSBhbW91bnQgb2YgcGl4ZWxzIHRoZXkgdXNlKVxyXG5cclxuICAgICAgICBsZXQgcGxheWJhY2sgPSAwO1xyXG5cclxuICAgICAgICAvLyBOZWVkcyBjaGVja2luZ1xyXG4gICAgICAgIGlmICghIXRoaXMuZHVyYXRpb24gJiYgdGhpcy5jdXJyZW50UG9zaXRpb24gPj0gMCkge1xyXG4gICAgICAgICAgICBwbGF5YmFjayA9IHRoaXMuY2FudmFzLndpZHRoIC8gdGhpcy5kdXJhdGlvbiAqIHRoaXMuY3VycmVudFBvc2l0aW9uO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5jdHguY2xlYXJSZWN0KDAsIDAsIHRoaXMuY3R4LmNhbnZhcy53aWR0aCwgdGhpcy5jdHguY2FudmFzLmhlaWdodCk7XHJcblxyXG4gICAgICAgIGZvciAobGV0IGkgPSAwLCB4ID0gMDsgaSA8IGNvdW50OyBpKyssIHggKz0gKHRoaXMuY29uZmlnLnBlYWtXaWR0aCArIHRoaXMuY29uZmlnLnBlYWtTcGFjZSkpIHsgLy8gSXRlcmF0ZSBvdmVyIGFsbCB0aGUgcGVha3MgaW4gdGhlIGRhdGEgYW5kIGRyYXcgdGhlbS4gSW5jcmVtZW50IGJ5IHRoZSBhbW91bnQgb2YgcGl4ZWxzIHRoZXkgdXNlICh4KS5cclxuICAgICAgICAgICAgLy8gQ2FsY3VsYXRlIHRoZSBoZWlnaHQgb2YgdGhhdCBwZWFrIHNvIHdlIGNhbiBkcmF3IHRoZSBsaW5lLlxyXG4gICAgICAgICAgICBsZXQgcGVha0hlaWdodCA9IHRoaXMuY2FudmFzLmhlaWdodCAvIDE0MCAqIHRoaXMuY29uZmlnLmRhdGFbTWF0aC5yb3VuZChpICogTildO1xyXG4gICAgICAgICAgICBsZXQgeSA9ICh0aGlzLmNhbnZhcy5oZWlnaHQgLyAyIC0gcGVha0hlaWdodCAvIDIpICogMS41O1xyXG5cclxuICAgICAgICAgICAgLy8gQ2FsY3VsYXRlIHRoZSBsaW5lIGJyZWFrIHdoaWNoIGlzIHRoZSAycHggbGluZSB5b3Ugc2VlIGN1dHRpbmcgYWNyb3NzIHRoZSB3YXZlZm9ybS5cclxuICAgICAgICAgICAgbGV0IGxpbmVCcmVhayA9IE1hdGguZmxvb3IodGhpcy5jYW52YXMuaGVpZ2h0IC8gMS4zMzMzMykgLSAxO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5jdHguc3Ryb2tlU3R5bGUgPSB0aGlzLmdldENvbnRleHRTdHJva2VTdHlsZSh4LCB5LCBsaW5lQnJlYWssIHBsYXliYWNrKTsgLy8gR2V0IHRoZSBncmFkaWVudCBjb2xvciB0byBkcmF3IHRoZSBsaW5lLiBIb3ZlcmVkIGV2ZW50cyBhbmQgb3RoZXIgZXZlbnRzIGFscmVhZHkgaGFuZGxlZCBpbnNpZGUgdGhlIG1ldGhvZC5cclxuXHJcbiAgICAgICAgICAgIHRoaXMuY3R4LmJlZ2luUGF0aCgpO1xyXG4gICAgICAgICAgICB0aGlzLmN0eC5tb3ZlVG8oeCwgeSk7XHJcbiAgICAgICAgICAgIHRoaXMuY3R4LmxpbmVUbyh4LCBsaW5lQnJlYWspOyAvLyBEcmF3IHRvIGJyZWFrXHJcbiAgICAgICAgICAgIHRoaXMuY3R4LnN0cm9rZSgpO1xyXG5cclxuICAgICAgICAgICAgLy8gRHJhdyB0aGUgcGVha3MgdW5kZXIgdGhlIGxpbmUgYnJlYWsuXHJcbiAgICAgICAgICAgIGlmIChwbGF5YmFjayA+PSB4KSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmN0eC5zdHJva2VTdHlsZSA9IHRoaXMuY29uZmlnLmNvbG9yLmZvb3RlclBsYXliYWNrOyAvLyBDb2xvcmVkIHBhcnQgb2YgdGhlIHBsYXliYWNrXHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmN0eC5zdHJva2VTdHlsZSA9IHRoaXMuY29uZmlnLmNvbG9yLmZvb3RlcjsgLy8gRGVmYXVsdCBjb2xvclxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB0aGlzLmN0eC5iZWdpblBhdGgoKTtcclxuICAgICAgICAgICAgdGhpcy5jdHgubW92ZVRvKHgsIGxpbmVCcmVhayArIDEpO1xyXG4gICAgICAgICAgICB0aGlzLmN0eC5saW5lVG8oeCwgcGVha0hlaWdodCArIHkpO1xyXG4gICAgICAgICAgICB0aGlzLmN0eC5zdHJva2UoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBTZXQgdGhlIGN1cnJlbnQgdHJhY2sgdGltZSBhbmQgcmVkcmF3IHRoZSB3YXZlZm9ybVxyXG4gICAgICogXHJcbiAgICAgKiBAcGFyYW0ge051bWJlcn0gY3VycmVudFBvc2l0aW9uIFxyXG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IGR1cmF0aW9uIFxyXG4gICAgICogXHJcbiAgICAgKiBAbWVtYmVyb2YgV2F2ZUZvcm1cclxuICAgICAqL1xyXG4gICAgc2V0UGxheUJhY2soY3VycmVudFBvc2l0aW9uLCBkdXJhdGlvbikge1xyXG4gICAgICAgIHRoaXMuY3VycmVudFBvc2l0aW9uID0gY3VycmVudFBvc2l0aW9uO1xyXG4gICAgICAgIHRoaXMuZHVyYXRpb24gPSBkdXJhdGlvbjtcclxuICAgICAgICB0aGlzLmRyYXdXYXZlRm9ybSgpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogVXBkYXRlIHRoZSBjdXJyZW50IGRhdGEgb2JqZWN0LlxyXG4gICAgICogXHJcbiAgICAgKiBAcGFyYW0ge0RhdGF9IGRhdGEgXHJcbiAgICAgKiBcclxuICAgICAqIEBtZW1iZXJvZiBXYXZlRm9ybVxyXG4gICAgICovXHJcbiAgICBhc3luYyB1cGRhdGVXYXZlZm9ybURhdGEoZGF0YSkge1xyXG4gICAgICAgIHRoaXMuY29uZmlnLmRhdGEgPSBkYXRhO1xyXG4gICAgICAgIHRoaXMudXBkYXRlSW50ZXJ2YWwgPSAoU2V0dGluZ3MuZ2V0UHJlZignYmF0dGVyeVNhdmVyJykgPyAxMDAgOiAxMCk7IFxyXG4gICAgICAgIHRoaXMuZHJhd1dhdmVGb3JtKCk7XHJcbiAgICB9XHJcblxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBXYXZlRm9ybVxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vcHVibGljL2NvbnRyb2xzL3dhdmVmb3JtLmpzXG4vLyBtb2R1bGUgaWQgPSAxM1xuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvLyBJbml0aWFsaXplIHRoZSBTb3VuZENsb3VkIFBsYXllciBvYmplY3RcclxuaW1wb3J0IFBsYXllciBmcm9tICcuL3BsYXllcidcclxuXHJcbndpbmRvdy5vbmxvYWQgPSAoKSA9PiB7XHJcbiAgICBjb25zdCBzY19wbGF5ZXIgPSBuZXcgUGxheWVyKCk7XHJcbiAgICBzY19wbGF5ZXIuc3RhcnQoKTtcclxuXHJcbiAgICB2YXIgbXlUYWJzID0gdGFicyh7XHJcbiAgICAgICAgZWw6ICcjdGFicycsXHJcbiAgICAgICAgdGFiTmF2aWdhdGlvbkxpbmtzOiAnLnRhYi1pdGVtJyxcclxuICAgICAgICB0YWJDb250ZW50Q29udGFpbmVyczogJy50YWJwYWdlJ1xyXG4gICAgfSk7XHJcbiAgICBteVRhYnMuaW5pdCgpO1xyXG59XHJcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vcHVibGljL2pzL2FwcC5qc1xuLy8gbW9kdWxlIGlkID0gMTRcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiLyoqXHJcbiAqIERlc2lnbmVkIHRvIGZldGNoIGRhdGEgdXNpbmcgWE1MSHR0cC5cclxuICovXHJcbmNsYXNzIFJlcXVlc3Qge1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQ3JlYXRlcyBhbiBpbnN0YW5jZSBvZiBSZXF1ZXN0LlxyXG4gICAgICogXHJcbiAgICAgKiBAbWVtYmVyb2YgUmVxdWVzdFxyXG4gICAgICovXHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICBjb25zb2xlLmxvZygnSW5pdCBSZXF1ZXN0IHNlcnZpY2UnKTtcclxuICAgIH1cclxuXHJcbiAgICBnZXQodXJsKSB7XHJcbiAgICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHhociA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xyXG4gICAgICAgICAgICB4aHIuYWRkRXZlbnRMaXN0ZW5lcihcImxvYWRcIiwgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5zdGF0dXMgPj0gMjAwICYmIHRoaXMuc3RhdHVzIDwgMzAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSh0aGlzLnJlc3BvbnNlVGV4dCk7IC8vIFJlc29sdmUgb24gdmFsaWQgcmVzcG9uc2VcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVqZWN0KHRoaXMpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIHhoci5hZGRFdmVudExpc3RlbmVyKFwiZXJyb3JcIiwgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICByZWplY3QodGhpcyk7IC8vIFJlamVjdCBvbiBlcnJvclxyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIHhoci5vcGVuKCdHRVQnLCB1cmwsIHRydWUpO1xyXG4gICAgICAgICAgICB4aHIuc2VuZCgpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogR2V0IHRoZSBKU09OIGRhdGEgZm9yIHRoZSB3YXZlZm9ybVxyXG4gICAgICogXHJcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gdXJsIFxyXG4gICAgICogQHJldHVybnMgLSBXYXZlRm9ybSBKU09OIG9iamVjdFxyXG4gICAgICovXHJcbiAgICBhc3luYyBnZXRKU09OKHVybCkge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIHJldHVybiBKU09OLnBhcnNlKGF3YWl0IHRoaXMuZ2V0KHVybCkpO1xyXG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coZSk7XHJcbiAgICAgICAgICAgIHJldHVybiBbXTsgLy8gUmV0dXJuIG51bGxcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IFJlcXVlc3RcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3B1YmxpYy9qcy9yZXF1ZXN0LmpzXG4vLyBtb2R1bGUgaWQgPSAxNVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwic291cmNlUm9vdCI6IiJ9