/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId])
/******/ 			return installedModules[moduleId].exports;
/******/
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// identity function for calling harmony imports with the correct context
/******/ 	__webpack_require__.i = function(value) { return value; };
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, {
/******/ 				configurable: false,
/******/ 				enumerable: true,
/******/ 				get: getter
/******/ 			});
/******/ 		}
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = 13);
/******/ })
/************************************************************************/
/******/ ([
/* 0 */
/***/ (function(module, exports, __webpack_require__) {

!function(t,e){if(true)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var n=e();for(var i in n)("object"==typeof exports?exports:t)[i]=n[i]}}(this,function(){return function(t){function e(i){if(n[i])return n[i].exports;var r=n[i]={exports:{},id:i,loaded:!1};return t[i].call(r.exports,r,r.exports,e),r.loaded=!0,r.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){(function(e){"use strict";var i=n(4),r=n(8),o=n(2),s=n(9),a=n(1).Promise,u=n(15),h=n(16);t.exports=e.SC={initialize:function(){var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];o.set("oauth_token",t.oauth_token),o.set("client_id",t.client_id),o.set("redirect_uri",t.redirect_uri),o.set("baseURL",t.baseURL),o.set("connectURL",t.connectURL)},get:function(t,e){return i.request("GET",t,e)},post:function(t,e){return i.request("POST",t,e)},put:function(t,e){return i.request("PUT",t,e)},"delete":function(t){return i.request("DELETE",t)},upload:function(t){return i.upload(t)},connect:function(t){return s(t)},isConnected:function(){return void 0!==o.get("oauth_token")},oEmbed:function(t,e){return i.oEmbed(t,e)},resolve:function(t){return i.resolve(t)},Recorder:u,Promise:a,stream:function(t,e){return h(t,e)},connectCallback:function(){r.notifyDialog(this.location)}}}).call(e,function(){return this}())},function(t,e,n){var i;(function(t,r,o,s){/*!
	 * @overview es6-promise - a tiny implementation of Promises/A+.
	 * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
	 * @license   Licensed under MIT license
	 *            See https://raw.githubusercontent.com/jakearchibald/es6-promise/master/LICENSE
	 * @version   2.3.0
	 */
(function(){"use strict";function a(t){return"function"==typeof t||"object"==typeof t&&null!==t}function u(t){return"function"==typeof t}function h(t){return"object"==typeof t&&null!==t}function c(t){q=t}function l(t){Q=t}function f(){var e=t.nextTick,n=t.versions.node.match(/^(?:(\d+)\.)?(?:(\d+)\.)?(\*|\d+)$/);return Array.isArray(n)&&"0"===n[1]&&"10"===n[2]&&(e=r),function(){e(m)}}function d(){return function(){K(m)}}function p(){var t=0,e=new et(m),n=document.createTextNode("");return e.observe(n,{characterData:!0}),function(){n.data=t=++t%2}}function g(){var t=new MessageChannel;return t.port1.onmessage=m,function(){t.port2.postMessage(0)}}function _(){return function(){setTimeout(m,1)}}function m(){for(var t=0;Z>t;t+=2){var e=rt[t],n=rt[t+1];e(n),rt[t]=void 0,rt[t+1]=void 0}Z=0}function y(){try{var t=n(26);return K=t.runOnLoop||t.runOnContext,d()}catch(e){return _()}}function v(){}function E(){return new TypeError("You cannot resolve a promise with itself")}function S(){return new TypeError("A promises callback cannot return that same promise.")}function A(t){try{return t.then}catch(e){return ut.error=e,ut}}function w(t,e,n,i){try{t.call(e,n,i)}catch(r){return r}}function T(t,e,n){Q(function(t){var i=!1,r=w(n,e,function(n){i||(i=!0,e!==n?I(t,n):O(t,n))},function(e){i||(i=!0,R(t,e))},"Settle: "+(t._label||" unknown promise"));!i&&r&&(i=!0,R(t,r))},t)}function b(t,e){e._state===st?O(t,e._result):e._state===at?R(t,e._result):D(e,void 0,function(e){I(t,e)},function(e){R(t,e)})}function P(t,e){if(e.constructor===t.constructor)b(t,e);else{var n=A(e);n===ut?R(t,ut.error):void 0===n?O(t,e):u(n)?T(t,e,n):O(t,e)}}function I(t,e){t===e?R(t,E()):a(e)?P(t,e):O(t,e)}function L(t){t._onerror&&t._onerror(t._result),M(t)}function O(t,e){t._state===ot&&(t._result=e,t._state=st,0!==t._subscribers.length&&Q(M,t))}function R(t,e){t._state===ot&&(t._state=at,t._result=e,Q(L,t))}function D(t,e,n,i){var r=t._subscribers,o=r.length;t._onerror=null,r[o]=e,r[o+st]=n,r[o+at]=i,0===o&&t._state&&Q(M,t)}function M(t){var e=t._subscribers,n=t._state;if(0!==e.length){for(var i,r,o=t._result,s=0;s<e.length;s+=3)i=e[s],r=e[s+n],i?x(n,i,r,o):r(o);t._subscribers.length=0}}function k(){this.error=null}function N(t,e){try{return t(e)}catch(n){return ht.error=n,ht}}function x(t,e,n,i){var r,o,s,a,h=u(n);if(h){if(r=N(n,i),r===ht?(a=!0,o=r.error,r=null):s=!0,e===r)return void R(e,S())}else r=i,s=!0;e._state!==ot||(h&&s?I(e,r):a?R(e,o):t===st?O(e,r):t===at&&R(e,r))}function C(t,e){try{e(function(e){I(t,e)},function(e){R(t,e)})}catch(n){R(t,n)}}function F(t,e){var n=this;n._instanceConstructor=t,n.promise=new t(v),n._validateInput(e)?(n._input=e,n.length=e.length,n._remaining=e.length,n._init(),0===n.length?O(n.promise,n._result):(n.length=n.length||0,n._enumerate(),0===n._remaining&&O(n.promise,n._result))):R(n.promise,n._validationError())}function U(t){return new ct(this,t).promise}function B(t){function e(t){I(r,t)}function n(t){R(r,t)}var i=this,r=new i(v);if(!$(t))return R(r,new TypeError("You must pass an array to race.")),r;for(var o=t.length,s=0;r._state===ot&&o>s;s++)D(i.resolve(t[s]),void 0,e,n);return r}function H(t){var e=this;if(t&&"object"==typeof t&&t.constructor===e)return t;var n=new e(v);return I(n,t),n}function j(t){var e=this,n=new e(v);return R(n,t),n}function G(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function Y(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function V(t){this._id=gt++,this._state=void 0,this._result=void 0,this._subscribers=[],v!==t&&(u(t)||G(),this instanceof V||Y(),C(this,t))}function z(){var t;if("undefined"!=typeof o)t=o;else if("undefined"!=typeof self)t=self;else try{t=Function("return this")()}catch(e){throw new Error("polyfill failed because global object is unavailable in this environment")}var n=t.Promise;n&&"[object Promise]"===Object.prototype.toString.call(n.resolve())&&!n.cast||(t.Promise=_t)}var W;W=Array.isArray?Array.isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)};var K,q,X,$=W,Z=0,Q=({}.toString,function(t,e){rt[Z]=t,rt[Z+1]=e,Z+=2,2===Z&&(q?q(m):X())}),J="undefined"!=typeof window?window:void 0,tt=J||{},et=tt.MutationObserver||tt.WebKitMutationObserver,nt="undefined"!=typeof t&&"[object process]"==={}.toString.call(t),it="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,rt=new Array(1e3);X=nt?f():et?p():it?g():void 0===J?y():_();var ot=void 0,st=1,at=2,ut=new k,ht=new k;F.prototype._validateInput=function(t){return $(t)},F.prototype._validationError=function(){return new Error("Array Methods must be provided an Array")},F.prototype._init=function(){this._result=new Array(this.length)};var ct=F;F.prototype._enumerate=function(){for(var t=this,e=t.length,n=t.promise,i=t._input,r=0;n._state===ot&&e>r;r++)t._eachEntry(i[r],r)},F.prototype._eachEntry=function(t,e){var n=this,i=n._instanceConstructor;h(t)?t.constructor===i&&t._state!==ot?(t._onerror=null,n._settledAt(t._state,e,t._result)):n._willSettleAt(i.resolve(t),e):(n._remaining--,n._result[e]=t)},F.prototype._settledAt=function(t,e,n){var i=this,r=i.promise;r._state===ot&&(i._remaining--,t===at?R(r,n):i._result[e]=n),0===i._remaining&&O(r,i._result)},F.prototype._willSettleAt=function(t,e){var n=this;D(t,void 0,function(t){n._settledAt(st,e,t)},function(t){n._settledAt(at,e,t)})};var lt=U,ft=B,dt=H,pt=j,gt=0,_t=V;V.all=lt,V.race=ft,V.resolve=dt,V.reject=pt,V._setScheduler=c,V._setAsap=l,V._asap=Q,V.prototype={constructor:V,then:function(t,e){var n=this,i=n._state;if(i===st&&!t||i===at&&!e)return this;var r=new this.constructor(v),o=n._result;if(i){var s=arguments[i-1];Q(function(){x(i,r,s,o)})}else D(n,r,t,e);return r},"catch":function(t){return this.then(null,t)}};var mt=z,yt={Promise:_t,polyfill:mt};n(19).amd?(i=function(){return yt}.call(e,n,e,s),!(void 0!==i&&(s.exports=i))):"undefined"!=typeof s&&s.exports?s.exports=yt:"undefined"!=typeof this&&(this.ES6Promise=yt),mt()}).call(this)}).call(e,n(6),n(3).setImmediate,function(){return this}(),n(20)(t))},function(t,e){"use strict";var n={oauth_token:void 0,baseURL:"https://api.soundcloud.com",connectURL:"//connect.soundcloud.com",client_id:void 0,redirect_uri:void 0};t.exports={get:function(t){return n[t]},set:function(t,e){e&&(n[t]=e)}}},function(t,e,n){(function(t,i){function r(t,e){this._id=t,this._clearFn=e}var o=n(6).nextTick,s=Function.prototype.apply,a=Array.prototype.slice,u={},h=0;e.setTimeout=function(){return new r(s.call(setTimeout,window,arguments),clearTimeout)},e.setInterval=function(){return new r(s.call(setInterval,window,arguments),clearInterval)},e.clearTimeout=e.clearInterval=function(t){t.close()},r.prototype.unref=r.prototype.ref=function(){},r.prototype.close=function(){this._clearFn.call(window,this._id)},e.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},e.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},e._unrefActive=e.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;e>=0&&(t._idleTimeoutId=setTimeout(function(){t._onTimeout&&t._onTimeout()},e))},e.setImmediate="function"==typeof t?t:function(t){var n=h++,i=arguments.length<2?!1:a.call(arguments,1);return u[n]=!0,o(function(){u[n]&&(i?t.apply(null,i):t.call(null),e.clearImmediate(n))}),n},e.clearImmediate="function"==typeof i?i:function(t){delete u[t]}}).call(e,n(3).setImmediate,n(3).clearImmediate)},function(t,e,n){(function(e){"use strict";var i=n(2),r=n(17),o=n(1).Promise,s=function(t,n,i,r){var s=void 0,a=new o(function(o){var a=e.FormData&&i instanceof FormData;s=new XMLHttpRequest,s.upload&&s.upload.addEventListener("progress",r),s.open(t,n,!0),a||s.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),s.onreadystatechange=function(){4===s.readyState&&o({responseText:s.responseText,request:s})},s.send(i)});return a.request=s,a},a=function(t){var e=t.responseText,n=t.request,i=void 0,r=void 0;try{r=JSON.parse(e)}catch(o){}return r?r.errors&&(i={message:""},r.errors[0]&&r.errors[0].error_message&&(i={message:r.errors[0].error_message})):i=n?{message:"HTTP Error: "+n.status}:{message:"Unknown error"},i&&(i.status=n.status),{json:r,error:i}},u=function c(t,e,n,i){var r=s(t,e,n,i),o=r.then(function(t){var e=t.responseText,n=t.request,i=a({responseText:e,request:n});if(i.json&&"302 - Found"===i.json.status)return c("GET",i.json.location,null);if(200!==n.status&&i.error)throw i.error;return i.json});return o.request=r.request,o},h=function(t,e,n){Object.keys(e).forEach(function(i){n?t.append(i,e[i]):t[i]=e[i]})};t.exports={request:function(t,n){var o=arguments.length<=2||void 0===arguments[2]?{}:arguments[2],s=arguments.length<=3||void 0===arguments[3]?function(){}:arguments[3],a=i.get("oauth_token"),c=i.get("client_id"),l={},f=e.FormData&&o instanceof FormData,d=void 0,p=void 0;return l.format="json",a?l.oauth_token=a:l.client_id=c,h(o,l,f),"GET"!==t&&(d=f?o:r.encode(o),o={oauth_token:a}),n="/"!==n[0]?"/"+n:n,p=""+i.get("baseURL")+n+"?"+r.encode(o),u(t,p,d,s)},oEmbed:function(t){var e=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],n=e.element;delete e.element,e.url=t;var i="https://soundcloud.com/oembed.json?"+r.encode(e);return u("GET",i,null).then(function(t){return n&&t.html&&(n.innerHTML=t.html),t})},upload:function(){var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],e=t.asset_data||t.file,n=i.get("oauth_token")&&t.title&&e;if(!n)return new o(function(t,e){e({status:0,error_message:"oauth_token needs to be present and title and asset_data / file passed as parameters"})});var r=Object.keys(t),s=new FormData;return r.forEach(function(e){var n=t[e];"file"===e&&(e="asset_data",n=t.file),s.append("track["+e+"]",n)}),this.request("POST","/tracks",s,t.progress)},resolve:function(t){return this.request("GET","/resolve",{url:t,_status_code_map:{302:200}})}}}).call(e,function(){return this}())},function(t,e){"use strict";var n={};t.exports={get:function(t){return n[t]},set:function(t,e){n[t]=e}}},function(t,e){function n(){h&&s&&(h=!1,s.length?u=s.concat(u):c=-1,u.length&&i())}function i(){if(!h){var t=setTimeout(n);h=!0;for(var e=u.length;e;){for(s=u,u=[];++c<e;)s&&s[c].run();c=-1,e=u.length}s=null,h=!1,clearTimeout(t)}}function r(t,e){this.fun=t,this.array=e}function o(){}var s,a=t.exports={},u=[],h=!1,c=-1;a.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];u.push(new r(t,e)),1!==u.length||h||setTimeout(i,0)},r.prototype.run=function(){this.fun.apply(null,this.array)},a.title="browser",a.browser=!0,a.env={},a.argv=[],a.version="",a.versions={},a.on=o,a.addListener=o,a.once=o,a.off=o,a.removeListener=o,a.removeAllListeners=o,a.emit=o,a.binding=function(t){throw new Error("process.binding is not supported")},a.cwd=function(){return"/"},a.chdir=function(t){throw new Error("process.chdir is not supported")},a.umask=function(){return 0}},function(t,e,n){"use strict";var i=n(18);e.extract=function(t){return t.split("?")[1]||""},e.parse=function(t){return"string"!=typeof t?{}:(t=t.trim().replace(/^(\?|#|&)/,""),t?t.split("&").reduce(function(t,e){var n=e.replace(/\+/g," ").split("="),i=n.shift(),r=n.length>0?n.join("="):void 0;return i=decodeURIComponent(i),r=void 0===r?null:decodeURIComponent(r),t.hasOwnProperty(i)?Array.isArray(t[i])?t[i].push(r):t[i]=[t[i],r]:t[i]=r,t},{}):{})},e.stringify=function(t){return t?Object.keys(t).sort().map(function(e){var n=t[e];return Array.isArray(n)?n.sort().map(function(t){return i(e)+"="+i(t)}).join("&"):i(e)+"="+i(n)}).filter(function(t){return t.length>0}).join("&"):""}},function(t,e,n){"use strict";var i=n(7),r=n(5);t.exports={notifyDialog:function(t){var e=i.parse(t.search),n=i.parse(t.hash),o={oauth_token:e.access_token||n.access_token,dialog_id:e.state||n.state,error:e.error||n.error,error_description:e.error_description||n.error_description},s=r.get(o.dialog_id);s&&s.handleConnectResponse(o)}}},function(t,e,n){"use strict";var i=n(2),r=n(11),o=n(1).Promise,s=function(t){return i.set("oauth_token",t.oauth_token),t};t.exports=function(){var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],e=i.get("oauth_token");if(e)return new o(function(t){t({oauth_token:e})});var n={client_id:t.client_id||i.get("client_id"),redirect_uri:t.redirect_uri||i.get("redirect_uri"),response_type:"code_and_token",scope:t.scope||"non-expiring",display:"popup"};if(!n.client_id||!n.redirect_uri)throw new Error("Options client_id and redirect_uri must be passed");var a=new r(n);return a.open().then(s)}},function(t,e,n){"use strict";var i=n(1).Promise;t.exports=function(){var t={};return t.promise=new i(function(e,n){t.resolve=e,t.reject=n}),t}},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=n(10),s=n(5),a=n(12),u=n(7),h="SoundCloud_Dialog",c=function(){return[h,Math.ceil(1e6*Math.random()).toString(16)].join("_")},l=function(t){return"https://soundcloud.com/connect?"+u.stringify(t)},f=function(){function t(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];i(this,t),this.id=c(),this.options=e,this.options.state=this.id,this.width=456,this.height=510,this.deferred=o()}return r(t,[{key:"open",value:function(){var t=l(this.options);return this.popup=a.open(t,this.width,this.height),s.set(this.id,this),this.deferred.promise}},{key:"handleConnectResponse",value:function(t){var e=t.error;e?this.deferred.reject(t):this.deferred.resolve(t),this.popup.close()}}]),t}();t.exports=f},function(t,e){"use strict";t.exports={open:function(t,e,n){var i={},r=void 0;return i.location=1,i.width=e,i.height=n,i.left=window.screenX+(window.outerWidth-e)/2,i.top=window.screenY+(window.outerHeight-n)/2,i.toolbar="no",i.scrollbars="yes",r=Object.keys(i).map(function(t){return t+"="+i[t]}).join(", "),window.open(t,i.name,r)}}},function(t,e){(function(e){"use strict";var n=e.AudioContext||e.webkitAudioContext,i=null;t.exports=function(){return i?i:i=new n}}).call(e,function(){return this}())},function(t,e){(function(e){"use strict";var n=e.navigator.getUserMedia||e.navigator.webkitGetUserMedia||e.navigator.mozGetUserMedia;t.exports=function(t,i,r){n.call(e.navigator,t,i,r)}}).call(e,function(){return this}())},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=n(13),s=n(14),a=n(1).Promise,u=n(24),h=function(){var t=this,e=this.context;return new a(function(n,i){t.source?t.source instanceof AudioNode?n(t.source):i(new Error("source needs to be an instance of AudioNode")):s({audio:!0},function(i){t.stream=i,t.source=e.createMediaStreamSource(i),n(t.source)}.bind(t),i)})},c=function(){function t(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];i(this,t),this.context=e.context||o(),this._recorder=null,this.source=e.source,this.stream=null}return r(t,[{key:"start",value:function(){var t=this;return h.call(this).then(function(e){return t._recorder=new u(e),t._recorder.record(),e})}},{key:"stop",value:function(){if(this._recorder&&this._recorder.stop(),this.stream)if(this.stream.stop)this.stream.stop();else if(this.stream.getTracks){var t=this.stream.getTracks()[0];t&&t.stop()}}},{key:"getBuffer",value:function(){var t=this;return new a(function(e,n){t._recorder?t._recorder.getBuffer(function(n){var i=t.context.sampleRate,r=t.context.createBuffer(2,n[0].length,i);r.getChannelData(0).set(n[0]),r.getChannelData(1).set(n[1]),e(r)}.bind(t)):n(new Error("Nothing has been recorded yet."))})}},{key:"getWAV",value:function(){var t=this;return new a(function(e,n){t._recorder?t._recorder.exportWAV(function(t){e(t)}):n(new Error("Nothing has been recorded yet."))})}},{key:"play",value:function(){var t=this;return this.getBuffer().then(function(e){var n=t.context.createBufferSource();return n.buffer=e,n.connect(t.context.destination),n.start(0),n})}},{key:"saveAs",value:function(t){return this.getWAV().then(function(e){u.forceDownload(e,t)})}},{key:"delete",value:function(){this._recorder&&(this._recorder.stop(),this._recorder.clear(),this._recorder=null),this.stream&&this.stream.stop()}}]),t}();t.exports=c},function(t,e,n){"use strict";var i=n(4),r=n(23),o=new r({flashAudioPath:"https://connect.soundcloud.com/sdk/flashAudio.swf"}),s=n(2),a=n(25);t.exports=function(t,e){var n=e?{secret_token:e}:{};return i.request("GET",t,n).then(function(t){var n=s.get("baseURL"),i=s.get("client_id"),r=n+"/tracks/"+t.id+"/streams?client_id="+i,u=n+"/tracks/"+t.id+"/plays?client_id="+i;return e&&(r+="&secret_token="+e,u+="&secret_token="+e),new a(o,{soundId:t.id,duration:t.duration,streamUrlsEndpoint:r,registerEndpoint:u})})}},function(t,e){t.exports={encode:function(t,e){function n(t){return t.filter(function(t){return"string"==typeof t&&t.length}).join("&")}function i(t){var e=Object.keys(t);return l?e.sort():e}function r(t,e){var r=":name[:prop]";return n(i(e).map(function(n){return s(r.replace(/:name/,t).replace(/:prop/,n),e[n])}))}function o(t,e){var i=":name[]";return n(e.map(function(e){return s(i.replace(/:name/,t),e)}))}function s(t,e){var n=/%20/g,i=encodeURIComponent,s=typeof e,a=null;return Array.isArray(e)?a=o(t,e):"string"===s?a=i(t)+"="+u(e):"number"===s?a=i(t)+"="+i(e).replace(n,"+"):"boolean"===s?a=i(t)+"="+e:"object"===s&&(null!==e?a=r(t,e):c||(a=i(t)+"=null")),a}function a(t){return"%"+("0"+t.charCodeAt(0).toString(16)).slice(-2).toUpperCase()}function u(t){return t.replace(/[^ !'()~\*]*/g,encodeURIComponent).replace(/ /g,"+").replace(/[!'()~\*]/g,a)}var h="object"==typeof e?e:{},c=h.ignorenull||!1,l=h.sorted||!1;return n(i(t).map(function(e){return s(e,t[e])}))}}},function(t,e){"use strict";t.exports=function(t){return encodeURIComponent(t).replace(/[!'()*]/g,function(t){return"%"+t.charCodeAt(0).toString(16).toUpperCase()})}},function(t,e){t.exports=function(){throw new Error("define cannot be used indirect")}},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children=[],t.webpackPolyfill=1),t}},function(t,e){var n=window.URL||window.webkitURL;t.exports=function(t,e){try{try{var i;try{var r=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder;i=new r,i.append(t),i=i.getBlob()}catch(o){i=new Blob([t])}return new Worker(n.createObjectURL(i))}catch(o){return new Worker("data:application/javascript,"+encodeURIComponent(t))}}catch(o){return new Worker(e)}}},function(t,e,n){t.exports=function(){return n(21)('!function(t){function n(r){if(e[r])return e[r].exports;var a=e[r]={exports:{},id:r,loaded:!1};return t[r].call(a.exports,a,a.exports,n),a.loaded=!0,a.exports}var e={};return n.m=t,n.c=e,n.p="",n(0)}([function(t,n){(function(t){function n(t){h=t.sampleRate,v=t.numChannels,s()}function e(t){for(var n=0;v>n;n++)p[n].push(t[n]);g+=t[0].length}function r(t){for(var n=[],e=0;v>e;e++)n.push(i(p[e],g));if(2===v)var r=f(n[0],n[1]);else var r=n[0];var a=l(r),o=new Blob([a],{type:t});this.postMessage(o)}function a(){for(var t=[],n=0;v>n;n++)t.push(i(p[n],g));this.postMessage(t)}function o(){g=0,p=[],s()}function s(){for(var t=0;v>t;t++)p[t]=[]}function i(t,n){for(var e=new Float32Array(n),r=0,a=0;a<t.length;a++)e.set(t[a],r),r+=t[a].length;return e}function f(t,n){for(var e=t.length+n.length,r=new Float32Array(e),a=0,o=0;e>a;)r[a++]=t[o],r[a++]=n[o],o++;return r}function c(t,n,e){for(var r=0;r<e.length;r++,n+=2){var a=Math.max(-1,Math.min(1,e[r]));t.setInt16(n,0>a?32768*a:32767*a,!0)}}function u(t,n,e){for(var r=0;r<e.length;r++)t.setUint8(n+r,e.charCodeAt(r))}function l(t){var n=new ArrayBuffer(44+2*t.length),e=new DataView(n);return u(e,0,"RIFF"),e.setUint32(4,36+2*t.length,!0),u(e,8,"WAVE"),u(e,12,"fmt "),e.setUint32(16,16,!0),e.setUint16(20,1,!0),e.setUint16(22,v,!0),e.setUint32(24,h,!0),e.setUint32(28,4*h,!0),e.setUint16(32,2*v,!0),e.setUint16(34,16,!0),u(e,36,"data"),e.setUint32(40,2*t.length,!0),c(e,44,t),e}var h,v,g=0,p=[];t.onmessage=function(t){switch(t.data.command){case"init":n(t.data.config);break;case"record":e(t.data.buffer);break;case"exportWAV":r(t.data.type);break;case"getBuffer":a();break;case"clear":o()}}}).call(n,function(){return this}())}]);\n//# sourceMappingURL=9f9aac32c9a7432b5555.worker.js.map',n.p+"9f9aac32c9a7432b5555.worker.js")}},function(t,e){t.exports=function(t){function e(i){if(n[i])return n[i].exports;var r=n[i]={exports:{},id:i,loaded:!1};return t[i].call(r.exports,r,r.exports,e),r.loaded=!0,r.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}(function(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))switch(typeof t[e]){case"function":break;case"object":t[e]=function(e){var n=e.slice(1),i=t[e[0]];return function(t,e,r){i.apply(this,[t,e,r].concat(n))}}(t[e]);break;default:t[e]=t[t[e]]}return t}([function(t,e,n){var i,r=n(1),o=n(12),s=n(14),a=n(38),u=n(43),h=n(39),c=n(16),l=n(42),f=n(128),d=n(129);t.exports=i=function(t){t=t||{},this._players={},this._volume=1,this._mute=!1,this.States=a,this.Errors=u,this._settings=o({},t,i.defaults)},i.MimeTypes=d,i.Protocols=f,i.Events=h,i.States=a,i.Errors=u,i.BrowserUtils=c,i.defaults={flashAudioPath:"flashAudio.swf",flashLoadTimeout:2e3,flashObjectID:"flashAudioObject",audioObjectID:"html5AudioObject",updateInterval:300,bufferTime:8e3,bufferingDelay:800,streamUrlProvider:null,debug:!1},i.capabilities=l.names,i.createDefaultMediaDescriptor=function(t,e,n){if(!t||!e||!e.length)throw new Error("invalid input to create media descriptor");return n||(n=0),{id:t,src:e,duration:n,forceSingle:!1,forceFlash:!1,forceHTML5:!1,forceCustomHLS:!1,mimeType:void 0}},i.prototype.getAudioPlayer=function(t){return this._players[t]},i.prototype.hasAudioPlayer=function(t){return void 0!==this._players[t]},i.prototype.removeAudioPlayer=function(t){this.hasAudioPlayer(t)&&delete this._players[t]},i.prototype.setVolume=function(t){t=Math.min(1,t),this._volume=Math.max(0,t);for(var e in this._players)this._players.hasOwnProperty(e)&&this._players[e].setVolume(this._volume)},i.prototype.getVolume=function(){return this._volume},i.prototype.setMute=function(t){this._muted=t;for(var e in this._players)this._players.hasOwnProperty(e)&&this._players[e].setMute(this._muted)},i.prototype.getMute=function(){return this._muted},i.prototype.createAudioPlayer=function(t,e){var n,i=r({},this._settings,e);if(!t)throw"AudioManager: No media descriptor object passed, can`t build any player";if(t.id||(t.id=Math.floor(1e10*Math.random()).toString()+(new Date).getTime().toString()),!t.src)throw new Error("AudioManager: You need to pass a valid media source URL");if(!this._players[t.id]){if(n=s.createAudioPlayer(t,i),!n)throw new Error("AudioManager: No player could be created from the given descriptor");this._players[t.id]=n}return this._players[t.id].setVolume(this._volume),this._players[t.id].setMute(this._muted),this._players[t.id].on(h.STATE_CHANGE,this._onStateChange,this),this._players[t.id]},i.prototype._onStateChange=function(t,e){e.getState()===a.DEAD&&this.removeAudioPlayer(e.getId())}},[130,2,8,4],[131,3,4],function(t,e){function n(t,e,n){n||(n={});for(var i=-1,r=e.length;++i<r;){var o=e[i];n[o]=t[o]}return n}t.exports=n},[132,5,6,7],function(t,e){function n(t){return!!t&&"object"==typeof t}function i(t,e){var n=null==t?void 0:t[e];return s(n)?n:void 0}function r(t){return o(t)&&f.call(t)==a}function o(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function s(t){return null==t?!1:r(t)?d.test(c.call(t)):n(t)&&u.test(t)}var a="[object Function]",u=/^\[object .+?Constructor\]$/,h=Object.prototype,c=Function.prototype.toString,l=h.hasOwnProperty,f=h.toString,d=RegExp("^"+c.call(l).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");t.exports=i},function(t,e){function n(t){return!!t&&"object"==typeof t}function i(t){return function(e){return null==e?void 0:e[t]}}function r(t){return null!=t&&o(l(t))}function o(t){return"number"==typeof t&&t>-1&&t%1==0&&c>=t}function s(t){return n(t)&&r(t)&&u.call(t,"callee")&&!h.call(t,"callee")}var a=Object.prototype,u=a.hasOwnProperty,h=a.propertyIsEnumerable,c=9007199254740991,l=i("length");t.exports=s},function(t,e){function n(t){return!!t&&"object"==typeof t}function i(t,e){var n=null==t?void 0:t[e];return a(n)?n:void 0}function r(t){return"number"==typeof t&&t>-1&&t%1==0&&m>=t}function o(t){return s(t)&&p.call(t)==h}function s(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function a(t){return null==t?!1:o(t)?g.test(f.call(t)):n(t)&&c.test(t)}var u="[object Array]",h="[object Function]",c=/^\[object .+?Constructor\]$/,l=Object.prototype,f=Function.prototype.toString,d=l.hasOwnProperty,p=l.toString,g=RegExp("^"+f.call(d).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),_=i(Array,"isArray"),m=9007199254740991,y=_||function(t){return n(t)&&r(t.length)&&p.call(t)==u};t.exports=y},[133,9,10,11],function(t,e){function n(t,e,n){if("function"!=typeof t)return i;if(void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 3:return function(n,i,r){return t.call(e,n,i,r)};case 4:return function(n,i,r,o){return t.call(e,n,i,r,o)};case 5:return function(n,i,r,o,s){return t.call(e,n,i,r,o,s)}}return function(){return t.apply(e,arguments)}}function i(t){return t}t.exports=n},function(t,e){function n(t){return function(e){return null==e?void 0:e[t]}}function i(t){return null!=t&&s(c(t))}function r(t,e){return t="number"==typeof t||u.test(t)?+t:-1,e=null==e?h:e,t>-1&&t%1==0&&e>t}function o(t,e,n){if(!a(n))return!1;var o=typeof e;if("number"==o?i(n)&&r(e,n.length):"string"==o&&e in n){var s=n[e];return t===t?t===s:s!==s}return!1}function s(t){return"number"==typeof t&&t>-1&&t%1==0&&h>=t}function a(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}var u=/^\d+$/,h=9007199254740991,c=n("length");t.exports=o},function(t,e){function n(t,e){if("function"!=typeof t)throw new TypeError(i);return e=r(void 0===e?t.length-1:+e||0,0),function(){for(var n=arguments,i=-1,o=r(n.length-e,0),s=Array(o);++i<o;)s[i]=n[e+i];switch(e){case 0:return t.call(this,s);case 1:return t.call(this,n[0],s);case 2:return t.call(this,n[0],n[1],s)}var a=Array(e+1);for(i=-1;++i<e;)a[i]=n[i];return a[e]=s,t.apply(this,a)}}var i="Expected a function",r=Math.max;t.exports=n},function(t,e,n){function i(t,e){return void 0===t?e:t}function r(t,e){return s(function(n){var i=n[0];return null==i?i:(n.push(e),t.apply(void 0,n))})}var o=n(1),s=n(13),a=r(o,i);t.exports=a},11,function(t,e,n){t.exports=n(15)},function(t,e,n){var i,r=n(16),o=n(17),s=n(45),a=n(49),u=n(46),h=n(48),c=n(50),l=n(129);t.exports=i=function(){},i.createAudioPlayer=function(t,e){var n;if(n=t.src.split(":")[0],("rtmp"===n||"rtmpt"===n||t.forceFlash)&&!t.forceHTML5)return new o(t,e);if(t.mimeType=i.getMimeType(t),t.mimeType===l.M3U8){if(r.isMSESupportMPEG()||r.isMSESupportMP4())return new c(t,e);if(r.isNativeHlsSupported()&&!t.forceCustomHLS)return r.isMobile()||t.forceSingle?new a(t,e):new s(t,e)}else{if(r.supportHTML5Audio()&&r.canPlayType(t.mimeType)||t.forceHTML5)return r.isMobile()||t.forceSingle?new h(t,e):new u(t,e);if(t.mimeType===l.MP3)return new o(t,e)}return null},i.getMimeType=function(t){if(t.mimeType)return t.mimeType;var e=t.src.split("?")[0];return e=e.substring(e.lastIndexOf(".")+1,e.length),l.getTypeByExtension(e)}},function(t,e){function n(){return!(!window.MediaSource&&!window.WebKitMediaSource)}t.exports={supportHTML5Audio:function(){var t;try{if(window.HTMLAudioElement&&"undefined"!=typeof Audio)return t=new Audio,!0}catch(e){return!1}},createAudioElement:function(){var t=document.createElement("audio");return t.setAttribute("msAudioCategory","BackgroundCapableMedia"),t.mozAudioChannelType="content",t},isMobile:function(t){var e=window.navigator.userAgent,n=["mobile","iPhone","iPad","iPod","Android","Skyfire"];return n.some(function(t){return t=new RegExp(t,"i"),t.test(e)})},isIE10Mobile:function(){return/IEmobile\/10\.0/gi.test(navigator.userAgent)},canPlayType:function(t){var e=document.createElement("audio");return!!(e&&e.canPlayType&&e.canPlayType(t).match(/maybe|probably/i))},isNativeHlsSupported:function(){var t,e,n,i=navigator.userAgent,r=["iPhone","iPad","iPod"];return t=function(t){return t.test(i)},e=!t(/chrome/i)&&!t(/opera/i)&&t(/safari/i),n=r.some(function(e){return t(new RegExp(e,"i"))}),n||e},isMSESupported:n,isMSESupportMPEG:function(){return n()&&MediaSource.isTypeSupported("audio/mpeg")},isMSESupportMP4:function(){return n()&&MediaSource.isTypeSupported("audio/mp4")}}},function(t,e,n){function i(t,e){a.call(this,"FlashAudioProxy",t,e),i.players[t.id]=this,this._errorMessage=null,this._errorID=null,this._volume=1,this._muted=!1,i.creatingFlashAudio||(i.flashAudio?this._createFlashAudio():i.createFlashObject(e))}var r=n(1),o=n(18),s=n(29),a=n(35),u=n(39),h=n(43),c=n(38),l=n(44);t.exports=i,r(i.prototype,a.prototype),i.players={},i.createFlashObject=function(t){i.creatingFlashAudio=!0,i.containerElement=document.createElement("div"),i.containerElement.setAttribute("id",t.flashObjectID+"-container"),i.flashElementTarget=document.createElement("div"),i.flashElementTarget.setAttribute("id",t.flashObjectID+"-target"),i.containerElement.appendChild(i.flashElementTarget),document.body.appendChild(i.containerElement);var e=function(e){if(e.success)i.flashAudio=document.getElementById(t.flashObjectID),window.setTimeout(function(){if(i.flashAudio&&!("PercentLoaded"in i.flashAudio))for(var t in i.players)i.players.hasOwnProperty(t)&&(i.players[t]._errorID=h.FLASH_PROXY_FLASH_BLOCKED,i.players[t]._errorMessage="Flash object blocked",i.players[t]._setState(c.ERROR),i.players[t]._logger.type=i.players[t].getType(),i.players[t]._logger.log(i.players[t]._errorMessage))},t.flashLoadTimeout),i.flashAudio.triggerEvent=function(t,e){i.players[t]._triggerEvent(e)},i.flashAudio.onPositionChange=function(t,e,n,r){i.players[t]._onPositionChange(e,n,r)},i.flashAudio.onDebug=function(t,e,n){i.players[t]._logger.type=e,i.players[t]._logger.log(n)},i.flashAudio.onStateChange=function(t,e){i.players[t]._setState(e),e===c.DEAD&&delete i.players[t]},i.flashAudio.onInit=function(t){i.creatingFlashAudio=!1,o(s(i.players),"_createFlashAudio")};else for(var n in i.players)i.players.hasOwnProperty(n)&&(i.players[n]._errorID=h.FLASH_PROXY_CANT_LOAD_FLASH,i.players[n]._errorMessage="Cannot create flash object",i.players[n]._setState(c.ERROR))};document.getElementById(t.flashObjectID)||l.embedSWF(t.flashAudioPath,t.flashObjectID+"-target","1","1","9.0.24","",{json:encodeURIComponent(JSON.stringify(t))},{allowscriptaccess:"always"},{id:t.flashObjectID,tabIndex:"-1"},e)},i._ready=function(){return i.flashAudio&&!i.creatingFlashAudio},i.prototype._createFlashAudio=function(){i.flashAudio.createAudio(this.getDescriptor()),this._state=i.flashAudio.getState(this.getId()),this.setVolume(this._volume),this.setMute(this._muted)},i.prototype._triggerEvent=function(t){this._logger.log("Flash element triggered event: "+t),this.trigger(t,this)},i.prototype._setState=function(t){this._state!==t&&(this._state=t,this.trigger(u.STATE_CHANGE,t,this))},i.prototype._onPositionChange=function(t,e,n){this.trigger(u.POSITION_CHANGE,t,e,n,this)},i.prototype.getType=function(){return i._ready()?i.flashAudio.getType(this.getId()):this._type},i.prototype.getContainerElement=function(){
return i.containerElement},i.prototype.play=function(t){if(i._ready()){if(this.getState()===c.PAUSED)return void this.resume();t=void 0===t?0:t,i.flashAudio.playAudio(this.getId(),t)}},i.prototype.pause=function(){i._ready()&&i.flashAudio.pauseAudio(this.getId())},i.prototype.seek=function(t){i._ready()&&i.flashAudio.seekAudio(this.getId(),t)},i.prototype.resume=function(){i._ready()&&i.flashAudio.resumeAudio(this.getId())},i.prototype.setVolume=function(t){this._volume=t,i._ready()&&i.flashAudio.setVolume(this.getId(),t)},i.prototype.getVolume=function(){return i._ready()?i.flashAudio.getVolume(this.getId()):this._volume},i.prototype.setMute=function(t){this._muted=t,i._ready()&&i.flashAudio.setMute(this.getId(),t)},i.prototype.getMute=function(){return i._ready()?i.flashAudio.getMute(this.getId()):this._muted},i.prototype.getState=function(){return this._state},i.prototype.getCurrentPosition=function(){return i._ready()?i.flashAudio.getCurrentPosition(this.getId()):0},i.prototype.getLoadedPosition=function(){return i._ready()?i.flashAudio.getLoadedPosition(this.getId()):0},i.prototype.getDuration=function(){return i._ready()?i.flashAudio.getDuration(this.getId()):0},i.prototype.kill=function(){return i._ready()?void i.flashAudio.killAudio(this.getId()):0},i.prototype.getErrorMessage=function(){return this._errorMessage?this._errorMessage:i.flashAudio.getErrorMessage(this.getId())},i.prototype.getErrorID=function(){return this._errorID?this._errorID:i.flashAudio.getErrorID(this.getId())},i.prototype.getLevelNum=function(){return i._ready()?i.flashAudio.getLevelNum(this.getId()):0},i.prototype.getLevel=function(){return i._ready()?i.flashAudio.getLevel(this.getId()):0},i.prototype.setLevel=function(t){return i._ready()?i.flashAudio.setLevel(this.getId(),t):0}},function(t,e,n){function i(t){return function(e){return null==e?void 0:e[t]}}function r(t){return null!=t&&s(_(t))}function o(t,e){var n=typeof t;if("string"==n&&p.test(t)||"number"==n)return!0;if(l(t))return!1;var i=!d.test(t);return i||null!=e&&t in a(e)}function s(t){return"number"==typeof t&&t>-1&&t%1==0&&g>=t}function a(t){return u(t)?t:Object(t)}function u(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}var h=n(19),c=n(24),l=n(23),f=n(28),d=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\n\\]|\\.)*?\1)\]/,p=/^\w*$/,g=9007199254740991,_=i("length"),m=f(function(t,e,n){var i=-1,s="function"==typeof e,a=o(e),u=r(t)?Array(t.length):[];return h(t,function(t){var r=s?e:a&&null!=t?t[e]:void 0;u[++i]=r?r.apply(t,n):c(t,e,n)}),u});t.exports=m},[134,20],[132,21,22,23],5,6,7,function(t,e,n){function i(t,e,n){null==t||r(e,t)||(e=c(e),t=1==e.length?t:u(t,h(e,0,-1)),e=s(e));var i=null==t?t:t[e];return null==i?void 0:i.apply(t,n)}function r(t,e){var n=typeof t;if("string"==n&&d.test(t)||"number"==n)return!0;if(l(t))return!1;var i=!f.test(t);return i||null!=e&&t in o(e)}function o(t){return a(t)?t:Object(t)}function s(t){var e=t?t.length:0;return e?t[e-1]:void 0}function a(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}var u=n(25),h=n(26),c=n(27),l=n(23),f=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\n\\]|\\.)*?\1)\]/,d=/^\w*$/;t.exports=i},function(t,e){function n(t,e,n){if(null!=t){void 0!==n&&n in i(t)&&(e=[n]);for(var r=0,o=e.length;null!=t&&o>r;)t=t[e[r++]];return r&&r==o?t:void 0}}function i(t){return r(t)?t:Object(t)}function r(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}t.exports=n},function(t,e){function n(t,e,n){var i=-1,r=t.length;e=null==e?0:+e||0,0>e&&(e=-e>r?0:r+e),n=void 0===n||n>r?r:+n||0,0>n&&(n+=r),r=e>n?0:n-e>>>0,e>>>=0;for(var o=Array(r);++i<r;)o[i]=t[i+e];return o}t.exports=n},function(t,e,n){function i(t){return null==t?"":t+""}function r(t){if(o(t))return t;var e=[];return i(t).replace(s,function(t,n,i,r){e.push(i?r.replace(a,"$1"):n||t)}),e}var o=n(23),s=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\n\\]|\\.)*?)\2)\]/g,a=/\\(\\)?/g;t.exports=r},11,function(t,e,n){function i(t){return r(t,o(t))}var r=n(30),o=n(31);t.exports=i},function(t,e){function n(t,e){for(var n=-1,i=e.length,r=Array(i);++n<i;)r[n]=t[e[n]];return r}t.exports=n},[132,32,33,34],5,6,7,function(t,e,n){function i(t,e,n,i){this._type=t,this._id=e.id,this._descriptor=e,this._settings=n,this._currentPosition=this._loadedPosition=this._duration=0,this._capabilities=r({},h.createDefaults(),i),this._logger=new u(this.getType(),this.getId(),e.title,n);try{h.validate(this.getCapabilities())}catch(o){return this.getLogger().log("Bad caps: "+o),void this.updateState(s.ERROR)}this.updateState(s.INITIALIZE)}var r=n(1),o=n(36),s=n(38),a=n(39),u=n(40),h=n(42);t.exports=i,r(i.prototype,o),i.prototype.canPlay=function(){return!1},i.prototype.getCapabilities=function(){return this._capabilities},i.prototype.getLogger=function(){return this._logger},i.prototype.getSettings=function(){return this._settings},i.prototype.getDescriptor=function(){return this._descriptor},i.prototype.getType=function(){return this._type},i.prototype.getId=function(){return this._id+""},i.prototype.beforeStateChange=function(t,e){return!0},i.prototype.notifyStateChange=function(t,e){return!0},i.prototype.afterStateChange=function(t,e){},i.prototype.updateState=function(t){var e=this._state;e!==t&&e!==s.DEAD&&this.beforeStateChange(e,t)&&(this._state=t,this._logger.log('state changed "'+this.getState()+'", position: '+this.getCurrentPosition()+", duration: "+this.getDuration()),this.notifyStateChange(e,t)&&this.trigger(a.STATE_CHANGE,t,this),this.afterStateChange(e,t))},i.prototype.getState=function(){return this._state},i.prototype._isInOneOfStates=function(){for(var t in arguments)if(arguments[t]===this.getState())return!0;return!1},i.prototype.getCurrentPosition=function(){return this._currentPosition},i.prototype.getLoadedPosition=function(){return this._loadedPosition},i.prototype.getDuration=function(){return this._duration}},function(t,e,n){t.exports=n(37)},function(t,e,n){!function(){function n(){return{keys:Object.keys||function(t){if("object"!=typeof t&&"function"!=typeof t||null===t)throw new TypeError("keys() called on a non-object");var e,n=[];for(e in t)t.hasOwnProperty(e)&&(n[n.length]=e);return n},uniqueId:function(t){var e=++a+"";return t?t+e:e},has:function(t,e){return o.call(t,e)},each:function(t,e,n){if(null!=t)if(r&&t.forEach===r)t.forEach(e,n);else if(t.length===+t.length)for(var i=0,o=t.length;o>i;i++)e.call(n,t[i],i,t);else for(var s in t)this.has(t,s)&&e.call(n,t[s],s,t)},once:function(t){var e,n=!1;return function(){return n?e:(n=!0,e=t.apply(this,arguments),t=null,e)}}}}var i,r=Array.prototype.forEach,o=Object.prototype.hasOwnProperty,s=Array.prototype.slice,a=0,u=n();i={on:function(t,e,n){if(!c(this,"on",t,[e,n])||!e)return this;this._events||(this._events={});var i=this._events[t]||(this._events[t]=[]);return i.push({callback:e,context:n,ctx:n||this}),this},once:function(t,e,n){if(!c(this,"once",t,[e,n])||!e)return this;var i=this,r=u.once(function(){i.off(t,r),e.apply(this,arguments)});return r._callback=e,this.on(t,r,n)},off:function(t,e,n){var i,r,o,s,a,h,l,f;if(!this._events||!c(this,"off",t,[e,n]))return this;if(!t&&!e&&!n)return this._events={},this;for(s=t?[t]:u.keys(this._events),a=0,h=s.length;h>a;a++)if(t=s[a],o=this._events[t]){if(this._events[t]=i=[],e||n)for(l=0,f=o.length;f>l;l++)r=o[l],(e&&e!==r.callback&&e!==r.callback._callback||n&&n!==r.context)&&i.push(r);i.length||delete this._events[t]}return this},trigger:function(t){if(!this._events)return this;var e=s.call(arguments,1);if(!c(this,"trigger",t,e))return this;var n=this._events[t],i=this._events.all;return n&&l(n,e),i&&l(i,arguments),this},stopListening:function(t,e,n){var i=this._listeners;if(!i)return this;var r=!e&&!n;"object"==typeof e&&(n=this),t&&((i={})[t._listenerId]=t);for(var o in i)i[o].off(e,n,this),r&&delete this._listeners[o];return this}};var h=/\s+/,c=function(t,e,n,i){if(!n)return!0;if("object"==typeof n){for(var r in n)t[e].apply(t,[r,n[r]].concat(i));return!1}if(h.test(n)){for(var o=n.split(h),s=0,a=o.length;a>s;s++)t[e].apply(t,[o[s]].concat(i));return!1}return!0},l=function(t,e){var n,i=-1,r=t.length,o=e[0],s=e[1],a=e[2];switch(e.length){case 0:for(;++i<r;)(n=t[i]).callback.call(n.ctx);return;case 1:for(;++i<r;)(n=t[i]).callback.call(n.ctx,o);return;case 2:for(;++i<r;)(n=t[i]).callback.call(n.ctx,o,s);return;case 3:for(;++i<r;)(n=t[i]).callback.call(n.ctx,o,s,a);return;default:for(;++i<r;)(n=t[i]).callback.apply(n.ctx,e)}},f={listenTo:"on",listenToOnce:"once"};u.each(f,function(t,e){i[e]=function(e,n,i){var r=this._listeners||(this._listeners={}),o=e._listenerId||(e._listenerId=u.uniqueId("l"));return r[o]=e,"object"==typeof n&&(i=this),e[t](n,i,this),this}}),i.bind=i.on,i.unbind=i.off,i.mixin=function(t){var e=["on","once","off","trigger","stopListening","listenTo","listenToOnce","bind","unbind"];return u.each(e,function(e){t[e]=this[e]},this),t},"undefined"!=typeof t&&t.exports&&(e=t.exports=i),e.BackboneEvents=i}(this)},function(t,e){t.exports={PLAYING:"playing",LOADING:"loading",SEEKING:"seeking",PAUSED:"paused",ERROR:"error",IDLE:"idle",INITIALIZE:"initialize",ENDED:"ended",DEAD:"dead"}},function(t,e){t.exports={POSITION_CHANGE:"position-change",STATE_CHANGE:"state-change",DATA:"data",NETWORK_TIMEOUT:"network-timeout",METADATA:"metadata"}},function(t,e,n){var i,r=n(41),o=null;t.exports=function(t,e,n,s){if(!i&&(i=r(!!s.debug,"audiomanager"),o)){var a=i;i=function(){a(o(arguments[0]+"%s",Array.prototype.slice.call(arguments,1)))}}return n=n&&n.length?" ["+n.replace(/\s/g,"").substr(0,6)+"]":"",{log:i.bind(null,"%s (%s)%s",t,e,n)}}},function(t,e){function n(){function t(t,n){for(var i,r=arguments.length,o=Array(r>2?r-2:0),s=2;r>s;s++)o[s-2]=arguments[s];"string"==typeof n?n=" "+n:(o.unshift(n),n=""),(i=window.console)[t].apply(i,[e()+" |"+c+"%c"+n].concat(l,o))}function e(){var t=new Date,e=null===h?0:t-h;return h=+t,"%c"+r(t.getHours())+":"+r(t.getMinutes())+":"+r(t.getSeconds())+"."+i(t.getMilliseconds(),"0",3)+"%c (%c"+i("+"+e+"ms"," ",8)+"%c)"}var n=arguments.length<=0||void 0===arguments[0]?!0:arguments[0],o=arguments.length<=1||void 0===arguments[1]?"":arguments[1];if(!n)return s;var h=null,c=a(o),l=["color: green","color: grey","color: blue","color: grey",u(o),""],f=t.bind(null,"log");return f.log=f,["info","warn","error"].forEach(function(e){f[e]=t.bind(null,e)}),f}function i(t,e,n){return o(e,n-(""+t).length)+t}function r(t){return i(t,"0",2)}function o(t,e){return e>0?new Array(e+1).join(t):""}function s(){}function a(t){return t?"%c"+t:"%c"}t.exports=n,s.log=s.info=s.warn=s.error=s;var u=function(){var t=["#51613C","#447848","#486E5F","#787444","#6E664E"],e=0;return function(n){return n?"background-color:"+t[e++%t.length]+";color:#fff;border-radius:3px;padding:2px 4px;font-family:sans-serif;text-transform:uppercase;font-size:9px;margin:0 4px":""}}()},function(t,e){function n(t){for(var e in r)if(r.hasOwnProperty(e)&&void 0===t[r[e]])throw new Error("Caps lack required field: "+e);if(!(t[r.PROTOCOLS]instanceof Array))throw new Error("Caps protocols must be an array");if(!(t[r.MIMETYPES]instanceof Array))throw new Error("Caps mimetypes must be an array");return!0}function i(){var t={};return t[r.MIMETYPES]=[],t[r.PROTOCOLS]=[],t[r.AUDIO_ONLY]=!0,t[r.CAN_SEEK_ALWAYS]=!0,t[r.NEEDS_URL_REFRESH]=!0,t}var r={MIMETYPES:"mimetypes",PROTOCOLS:"protocols",AUDIO_ONLY:"audioOnly",CAN_SEEK_ALWAYS:"canSeekAlways",NEEDS_URL_REFRESH:"needsUrlRefresh"},o={createDefaults:i,names:r,validate:n};t.exports=o},function(t,e){t.exports={FLASH_HLS_PLAYLIST_NOT_FOUND:"HLS_PLAYLIST_NOT_FOUND",FLASH_HLS_PLAYLIST_SECURITY_ERROR:"HLS_SECURITY_ERROR",FLASH_HLS_NOT_VALID_PLAYLIST:"HLS_NOT_VALID_PLAYLIST",FLASH_HLS_NO_TS_IN_PLAYLIST:"HLS_NO_TS_IN_PLAYLIST",FLASH_HLS_NO_PLAYLIST_IN_MANIFEST:"HLS_NO_PLAYLIST_IN_MANIFEST",FLASH_HLS_TS_IS_CORRUPT:"HLS_TS_IS_CORRUPT",FLASH_HLS_FLV_TAG_CORRUPT:"HLS_FLV_TAG_CORRUPT",FLASH_HTTP_FILE_NOT_FOUND:"HTTP_FILE_NOT_FOUND",FLASH_RTMP_CONNECT_FAILED:"RTMP_CONNECT_FAILED",FLASH_RTMP_CONNECT_CLOSED:"RTMP_CONNECT_CLOSED",FLASH_RTMP_CANNOT_PLAY_STREAM:"RTMP_CANNOT_PLAY_STREAM",FLASH_PROXY_CANT_LOAD_FLASH:"CANT_LOAD_FLASH",FLASH_PROXY_FLASH_BLOCKED:"FLASH_PROXY_FLASH_BLOCKED",GENERIC_AUDIO_ENDED_EARLY:"GENERIC_AUDIO_ENDED_EARLY",GENERIC_AUDIO_OVERRUN:"GENERIC_AUDIO_OVERRUN",HTML5_AUDIO_ABORTED:"HTML5_AUDIO_ABORTED",HTML5_AUDIO_NETWORK:"HTML5_AUDIO_NETWORK",HTML5_AUDIO_DECODE:"HTML5_AUDIO_DECODE",HTML5_AUDIO_SRC_NOT_SUPPORTED:"HTML5_AUDIO_SRC_NOT_SUPPORTED",MSE_BAD_OBJECT_STATE:"MSE_BAD_OBJECT_STATE",MSE_NOT_SUPPORTED:"MSE_NOT_SUPPORTED",MSE_MP3_NOT_SUPPORTED:"MSE_MP3_NOT_SUPPORTED",MSE_HLS_NOT_VALID_PLAYLIST:"MSE_HLS_NOT_VALID_PLAYLIST",MSE_HLS_PLAYLIST_NOT_FOUND:"MSE_HLS_PLAYLIST_NOT_FOUND",MSE_HLS_SEGMENT_NOT_FOUND:"MSE_HLS_SEGMENT_NOT_FOUND"}},function(t,e){function n(){if(!q&&document.getElementsByTagName("body")[0]){try{var t,e=v("span");e.style.display="none",t=j.getElementsByTagName("body")[0].appendChild(e),t.parentNode.removeChild(t),t=null,e=null}catch(n){return}q=!0;for(var i=V.length,r=0;i>r;r++)V[r]()}}function i(t){q?t():V[V.length]=t}function r(t){if(typeof H.addEventListener!=k)H.addEventListener("load",t,!1);else if(typeof j.addEventListener!=k)j.addEventListener("load",t,!1);else if(typeof H.attachEvent!=k)S(H,"onload",t);else if("function"==typeof H.onload){var e=H.onload;H.onload=function(){e(),t()}}else H.onload=t}function o(){var t=j.getElementsByTagName("body")[0],e=v(N);e.setAttribute("style","visibility: hidden;"),e.setAttribute("type",F);var n=t.appendChild(e);if(n){var i=0;!function r(){if(typeof n.GetVariable!=k)try{var o=n.GetVariable("$version");o&&(o=o.split(" ")[1].split(","),Q.pv=[E(o[0]),E(o[1]),E(o[2])])}catch(a){Q.pv=[8,0,0]}else if(10>i)return i++,void window.setTimeout(r,10);t.removeChild(e),n=null,s()}()}else s()}function s(){var t=z.length;if(t>0)for(var e=0;t>e;e++){var n=z[e].id,i=z[e].callbackFn,r={success:!1,id:n};if(Q.pv[0]>0){var o=y(n);if(o)if(!A(z[e].swfVersion)||Q.wk&&Q.wk<312)if(z[e].expressInstall&&u()){var s={};s.data=z[e].expressInstall,s.width=o.getAttribute("width")||"0",s.height=o.getAttribute("height")||"0",o.getAttribute("class")&&(s.styleclass=o.getAttribute("class")),o.getAttribute("align")&&(s.align=o.getAttribute("align"));for(var l={},f=o.getElementsByTagName("param"),d=f.length,p=0;d>p;p++)"movie"!==f[p].getAttribute("name").toLowerCase()&&(l[f[p].getAttribute("name")]=f[p].getAttribute("value"));h(s,l,n,i)}else c(o),i&&i(r);else T(n,!0),i&&(r.success=!0,r.ref=a(n),r.id=n,i(r))}else if(T(n,!0),i){var g=a(n);g&&typeof g.SetVariable!=k&&(r.success=!0,r.ref=g,r.id=g.id),i(r)}}}function a(t){var e=null,n=y(t);return n&&"OBJECT"===n.nodeName.toUpperCase()&&(e=typeof n.SetVariable!==k?n:n.getElementsByTagName(N)[0]||n),e}function u(){return!X&&A("6.0.65")&&(Q.win||Q.mac)&&!(Q.wk&&Q.wk<312)}function h(t,e,n,i){var r=y(n);if(n=m(n),X=!0,O=i||null,R={success:!1,id:n},r){"OBJECT"===r.nodeName.toUpperCase()?(I=l(r),L=null):(I=r,L=n),t.id=U,(typeof t.width==k||!/%$/.test(t.width)&&E(t.width)<310)&&(t.width="310"),(typeof t.height==k||!/%$/.test(t.height)&&E(t.height)<137)&&(t.height="137");var o=Q.ie?"ActiveX":"PlugIn",s="MMredirectURL="+encodeURIComponent(H.location.toString().replace(/&/g,"%26"))+"&MMplayerType="+o+"&MMdoctitle="+encodeURIComponent(j.title.slice(0,47)+" - Flash Player Installation");if(typeof e.flashvars!=k?e.flashvars+="&"+s:e.flashvars=s,Q.ie&&4!==r.readyState){var a=v("div");n+="SWFObjectNew",a.setAttribute("id",n),r.parentNode.insertBefore(a,r),r.style.display="none",g(r)}d(t,e,n)}}function c(t){if(Q.ie&&4!==t.readyState){t.style.display="none";var e=v("div");t.parentNode.insertBefore(e,t),e.parentNode.replaceChild(l(t),e),g(t)}else t.parentNode.replaceChild(l(t),t)}function l(t){var e=v("div");if(Q.win&&Q.ie)e.innerHTML=t.innerHTML;else{var n=t.getElementsByTagName(N)[0];if(n){var i=n.childNodes;if(i)for(var r=i.length,o=0;r>o;o++)1===i[o].nodeType&&"PARAM"===i[o].nodeName||8===i[o].nodeType||e.appendChild(i[o].cloneNode(!0))}}return e}function f(t,e){var n=v("div");return n.innerHTML="<object classid='clsid:D27CDB6E-AE6D-11cf-96B8-444553540000'><param name='movie' value='"+t+"'>"+e+"</object>",n.firstChild}function d(t,e,n){var i,r=y(n);if(n=m(n),Q.wk&&Q.wk<312)return i;if(r){var o,s,a,u=v(Q.ie?"div":N);typeof t.id==k&&(t.id=n);for(a in e)e.hasOwnProperty(a)&&"movie"!==a.toLowerCase()&&p(u,a,e[a]);Q.ie&&(u=f(t.data,u.innerHTML));for(o in t)t.hasOwnProperty(o)&&(s=o.toLowerCase(),"styleclass"===s?u.setAttribute("class",t[o]):"classid"!==s&&"data"!==s&&u.setAttribute(o,t[o]));Q.ie?W[W.length]=t.id:(u.setAttribute("type",F),u.setAttribute("data",t.data)),r.parentNode.replaceChild(u,r),i=u}return i}function p(t,e,n){var i=v("param");i.setAttribute("name",e),i.setAttribute("value",n),t.appendChild(i)}function g(t){var e=y(t);e&&"OBJECT"===e.nodeName.toUpperCase()&&(Q.ie?(e.style.display="none",function n(){if(4===e.readyState){for(var t in e)"function"==typeof e[t]&&(e[t]=null);e.parentNode.removeChild(e)}else window.setTimeout(n,10)}()):e.parentNode.removeChild(e))}function _(t){return t&&t.nodeType&&1===t.nodeType}function m(t){return _(t)?t.id:t}function y(t){if(_(t))return t;var e=null;try{e=j.getElementById(t)}catch(n){}return e}function v(t){return j.createElement(t)}function E(t){return parseInt(t,10)}function S(t,e,n){t.attachEvent(e,n),K[K.length]=[t,e,n]}function A(t){t+="";var e=Q.pv,n=t.split(".");return n[0]=E(n[0]),n[1]=E(n[1])||0,n[2]=E(n[2])||0,e[0]>n[0]||e[0]===n[0]&&e[1]>n[1]||e[0]===n[0]&&e[1]===n[1]&&e[2]>=n[2]}function w(t,e,n,i){var r=j.getElementsByTagName("head")[0];if(r){var o="string"==typeof n?n:"screen";if(i&&(D=null,M=null),!D||M!==o){var s=v("style");s.setAttribute("type","text/css"),s.setAttribute("media",o),D=r.appendChild(s),Q.ie&&typeof j.styleSheets!=k&&j.styleSheets.length>0&&(D=j.styleSheets[j.styleSheets.length-1]),M=o}D&&(typeof D.addRule!=k?D.addRule(t,e):typeof j.createTextNode!=k&&D.appendChild(j.createTextNode(t+" {"+e+"}")))}}function T(t,e){if($){var n=e?"visible":"hidden",i=y(t);q&&i?i.style.visibility=n:"string"==typeof t&&w("#"+t,"visibility:"+n)}}function b(t){var e=/[\\\"<>\.;]/,n=null!=e.exec(t);return n&&typeof encodeURIComponent!=k?encodeURIComponent(t):t}/*!    SWFObject v2.3.20130521 <http://github.com/swfobject/swfobject>
		    is released under the MIT License <http://www.opensource.org/licenses/mit-license.php>
		*/
var P,I,L,O,R,D,M,k="undefined",N="object",x="Shockwave Flash",C="ShockwaveFlash.ShockwaveFlash",F="application/x-shockwave-flash",U="SWFObjectExprInst",B="onreadystatechange",H=window,j=document,G=navigator,Y=!1,V=[],z=[],W=[],K=[],q=!1,X=!1,$=!0,Z=!1,Q=function(){var t=typeof j.getElementById!=k&&typeof j.getElementsByTagName!=k&&typeof j.createElement!=k,e=G.userAgent.toLowerCase(),n=G.platform.toLowerCase(),i=n?/win/.test(n):/win/.test(e),r=n?/mac/.test(n):/mac/.test(e),o=/webkit/.test(e)?parseFloat(e.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):!1,s="Microsoft Internet Explorer"===G.appName,a=[0,0,0],u=null;if(typeof G.plugins!=k&&typeof G.plugins[x]==N)u=G.plugins[x].description,u&&typeof G.mimeTypes!=k&&G.mimeTypes[F]&&G.mimeTypes[F].enabledPlugin&&(Y=!0,s=!1,u=u.replace(/^.*\s+(\S+\s+\S+$)/,"$1"),a[0]=E(u.replace(/^(.*)\..*$/,"$1")),a[1]=E(u.replace(/^.*\.(.*)\s.*$/,"$1")),a[2]=/[a-zA-Z]/.test(u)?E(u.replace(/^.*[a-zA-Z]+(.*)$/,"$1")):0);else if(typeof H.ActiveXObject!=k)try{var h=new ActiveXObject(C);h&&(u=h.GetVariable("$version"),u&&(s=!0,u=u.split(" ")[1].split(","),a=[E(u[0]),E(u[1]),E(u[2])]))}catch(c){}return{w3:t,pv:a,wk:o,ie:s,win:i,mac:r}}();!function(){Q.w3&&((typeof j.readyState!=k&&("complete"===j.readyState||"interactive"===j.readyState)||typeof j.readyState==k&&(j.getElementsByTagName("body")[0]||j.body))&&n(),q||(typeof j.addEventListener!=k&&j.addEventListener("DOMContentLoaded",n,!1),Q.ie&&(j.attachEvent(B,function t(){"complete"===j.readyState&&(j.detachEvent(B,t),n())}),H===top&&!function e(){if(!q){try{j.documentElement.doScroll("left")}catch(t){return void window.setTimeout(e,0)}n()}}()),Q.wk&&!function i(){return q?void 0:/loaded|complete/.test(j.readyState)?void n():void window.setTimeout(i,0)}()))}(),V[0]=function(){Y?o():s()},function(){Q.ie&&window.attachEvent("onunload",function(){for(var t=K.length,e=0;t>e;e++)K[e][0].detachEvent(K[e][1],K[e][2]);for(var n=W.length,i=0;n>i;i++)g(W[i]);for(var r in Q)Q[r]=null;Q=null;for(var o in P)P[o]=null;P=null})}(),t.exports=P={registerObject:function(t,e,n,i){if(Q.w3&&t&&e){var r={};r.id=t,r.swfVersion=e,r.expressInstall=n,r.callbackFn=i,z[z.length]=r,T(t,!1)}else i&&i({success:!1,id:t})},getObjectById:function(t){return Q.w3?a(t):void 0},embedSWF:function(t,e,n,r,o,s,a,c,l,f){var p=m(e),g={success:!1,id:p};Q.w3&&!(Q.wk&&Q.wk<312)&&t&&e&&n&&r&&o?(T(p,!1),i(function(){n+="",r+="";var i={};if(l&&typeof l===N)for(var _ in l)i[_]=l[_];i.data=t,i.width=n,i.height=r;var m={};if(c&&typeof c===N)for(var y in c)m[y]=c[y];if(a&&typeof a===N)for(var v in a)if(a.hasOwnProperty(v)){var E=Z?encodeURIComponent(v):v,S=Z?encodeURIComponent(a[v]):a[v];typeof m.flashvars!=k?m.flashvars+="&"+E+"="+S:m.flashvars=E+"="+S}if(A(o)){var w=d(i,m,e);i.id===p&&T(p,!0),g.success=!0,g.ref=w,g.id=w.id}else{if(s&&u())return i.data=s,void h(i,m,e,f);T(p,!0)}f&&f(g)})):f&&f(g)},switchOffAutoHideShow:function(){$=!1},enableUriEncoding:function(t){Z=typeof t===k?!0:t},ua:Q,getFlashPlayerVersion:function(){return{major:Q.pv[0],minor:Q.pv[1],release:Q.pv[2]}},hasFlashPlayerVersion:A,createSWF:function(t,e,n){return Q.w3?d(t,e,n):void 0},showExpressInstall:function(t,e,n,i){Q.w3&&u()&&h(t,e,n,i)},removeSWF:function(t){Q.w3&&g(t)},createCSS:function(t,e,n,i){Q.w3&&w(t,e,n,i)},addDomLoadEvent:i,addLoadEvent:r,getQueryParamValue:function(t){var e=j.location.search||j.location.hash;if(e){if(/\?/.test(e)&&(e=e.split("?")[1]),null==t)return b(e);for(var n=e.split("&"),i=0;i<n.length;i++)if(n[i].substring(0,n[i].indexOf("="))===t)return b(n[i].substring(n[i].indexOf("=")+1))}return""},expressInstallCallback:function(){if(X){var t=y(U);t&&I&&(t.parentNode.replaceChild(I,t),L&&(T(L,!0),Q.ie&&(I.style.display="block")),O&&O(R)),X=!1}},version:"2.3"}},function(t,e,n){function i(t,e,n,i){if(n!==s&&n!==o&&void 0!==n)throw new Error("Can not use the provided base class");this._baseclass=n||o,this._baseclass.call(this,t,e,i||"HLSAudioPlayer"),this._seekPosition=0}var r=n(1),o=n(46),s=n(48),a=n(38);t.exports=i,r(i.prototype,o.prototype),i.prototype.seek=function(t){this._baseclass.prototype.seek.apply(this,arguments),this._isInOneOfStates(a.LOADING,a.SEEKING)&&(this._seekPosition=t)},i.prototype.getCurrentPosition=function(){if(this._isInOneOfStates(a.LOADING)&&this._seekPosition>0)return this._seekPosition;if(this._isInOneOfStates(a.PLAYING,a.SEEKING)){if(this._seekPosition>=this._currentPosition)return this._seekPosition;this._seekPosition=0}return this._baseclass.prototype.getCurrentPosition.apply(this,arguments)}},function(t,e,n){function i(t,e,n){this._duration=0,this._currentPosition=0,this._loadedPosition=0,h.prototype.constructor.call(this,n||"HTML5AudioPlayer",t,e),this._isLoaded=!1,this._prevCurrentPosition=0,this._prevCheckTime=0,this._positionUpdateTimer=0,this._playRequested=!1,this._startFromPosition=0,this.getDescriptor().duration&&(this._duration=this.getDescriptor().duration),this._bindHandlers(),this._initMediaElement(),this.updateState(s.IDLE)}var r=n(1),o=n(47).bindAll,s=n(38),a=n(39),u=n(43),h=n(35),c=n(16);t.exports=i,r(i.prototype,h.prototype),i.MediaAPIEvents=["ended","play","playing","pause","seeking","waiting","seeked","error","loadeddata","loadedmetadata"],i.prototype.play=function(t){return this._isInOneOfStates(s.ERROR,s.DEAD)?void this._logger.log("play called but state is ERROR or DEAD"):(this._logger.log("play from "+t),this._startFromPosition=t||0,this._playRequested=!0,this._isInOneOfStates(s.PAUSED,s.ENDED)?void this.resume():(this.updateState(s.LOADING),this._html5Audio.readyState>0&&this._onLoadedMetadata(),this._html5Audio.readyState>1&&this._onLoaded(),void(this._isLoaded?this._playAfterLoaded():this.once(a.DATA,this._playAfterLoaded))))},i.prototype.pause=function(){this._isInOneOfStates(s.ERROR,s.DEAD)||(this._logger.log("pause"),this._playRequested=!1,this._html5Audio&&this._html5Audio.pause())},i.prototype.seek=function(t){var e,n=!1,i=t/1e3,r=this._html5Audio.seekable;if(!this._isInOneOfStates(s.ERROR,s.DEAD)){if(!this._isLoaded)return this.once(a.DATA,function(){this.seek(t)}),void this._logger.log("postponing seek for when loaded");if(c.isIE10Mobile)n=!0;else for(e=0;e<r.length;e++)if(i<=r.end(e)&&i>=r.start(e)){n=!0;break}if(!n)return void this._logger.log("can not seek");this._logger.log("seek"),this.updateState(s.SEEKING),this._html5Audio.currentTime=i,this._currentPosition=t,this._lastMediaClockCheck=null}},i.prototype.resume=function(){return this._isInOneOfStates(s.ERROR,s.DEAD)?void this._logger.log("resume called but state is ERROR or DEAD"):(this._logger.log("resume"),void(this.getState()===s.PAUSED?(this.updateState(s.PLAYING),this._html5Audio.play(this._html5Audio.currentTime)):this.getState()===s.ENDED&&this._html5Audio.play(0)))},i.prototype.setVolume=function(t){this._html5Audio&&(this._html5Audio.volume=t)},i.prototype.getVolume=function(){return this._html5Audio?this._html5Audio.volume:1},i.prototype.setMute=function(t){this._html5Audio&&(this._html5Audio.muted=t)},i.prototype.getMute=function(){return this._html5Audio?this._html5Audio.muted:!1},i.prototype.kill=function(){this._state!==s.DEAD&&(this._logger.log("killing ..."),this._resetPositionInterval(!1),this._playRequested=!1,this._toggleEventListeners(!1),this.pause(),delete this._html5Audio,this.updateState(s.DEAD),this._logger.log("dead"))},i.prototype.getErrorMessage=function(){return this._errorMessage},i.prototype.getErrorID=function(){return this._errorID},i.prototype._bindHandlers=function(){o(this,["_onPositionChange","_onHtml5MediaEvent","_onLoaded","_onLoadedMetadata"])},i.prototype._initMediaElement=function(){this._html5Audio=c.createAudioElement(),this._html5Audio.id=this.getSettings().audioObjectID+"_"+this.getId(),this._html5Audio.preload="auto",this._html5Audio.type=this.getDescriptor().mimeType,this._html5Audio.src=this.getDescriptor().src,this._html5Audio.load(),this._toggleEventListeners(!0)},i.prototype._playAfterLoaded=function(){this._playRequested&&(this._trySeekToStartPosition(),this._html5Audio.play())},i.prototype._isInOneOfStates=function(){for(var t in arguments)if(arguments[t]===this._state)return!0;return!1},i.prototype._toggleEventListeners=function(t){if(this._html5Audio){var e=t?"addEventListener":"removeEventListener";i.MediaAPIEvents.forEach(function(t){switch(t){case"loadeddata":this._html5Audio[e]("loadeddata",this._onLoaded);break;case"loadedmetadata":this._html5Audio[e]("loadedmetadata",this._onLoadedMetadata);break;default:this._html5Audio[e](t,this._onHtml5MediaEvent)}},this)}},i.prototype._trySeekToStartPosition=function(){var t;return this._startFromPosition>0&&(this._logger.log("seek to start position: "+this._startFromPosition),t=this._startFromPosition/1e3,this._html5Audio.currentTime=t,this._html5Audio.currentTime===t)?(this._lastMediaClockCheck=null,this._currentPosition=this._startFromPosition,this._startFromPosition=0,!0):!1},i.prototype._onLoaded=function(){this._logger.log("HTML5 media loadeddata event"),this.trigger(a.DATA,this)},i.prototype._onLoadedMetadata=function(){this._logger.log("HTML5 media loadedmetadata event"),(void 0===this._duration||0===this._duration)&&(this._duration=1e3*this._html5Audio.duration),this._loadedPosition=this._duration,this._isLoaded=!0,this.trigger(a.METADATA,this)},i.prototype._resetPositionInterval=function(t){window.clearInterval(this._positionUpdateTimer),t&&(this._positionUpdateTimer=window.setInterval(this._onPositionChange,this.getSettings().updateInterval))},i.prototype._onPositionChange=function(){if(!this._isInOneOfStates(s.DEAD)){var t;return Date.now(),this._currentPosition=1e3*this._html5Audio.currentTime,this.trigger(a.POSITION_CHANGE,this.getCurrentPosition(),this._loadedPosition,this._duration,this),this._isInOneOfStates(s.PLAYING,s.LOADING)?0!==this._duration&&(this._currentPosition>this._duration||this._currentPosition>this._loadedPosition&&!c.isIE10Mobile)?void this._onHtml5MediaEvent({type:"ended"}):this.getState()!==s.PLAYING||this._mediasHasProgressed()?void(this.getState()!==s.PLAYING&&this._mediasHasProgressed()&&this.updateState(s.PLAYING)):(this._logger.log("media clock check failed, playhead is not advancing anymore"),void this.updateState(s.LOADING)):void(this._state===s.SEEKING&&t>0&&this.updateState(s.PLAYING))}},i.prototype._mediasHasProgressed=function(){var t=!1,e=Date.now();if(this._lastMediaClockCheck){var n=e-this._lastMediaClockCheck,i=this._currentPosition-this._lastMediaClockValue;if(.1*n>i){if(0===i&&50>n)return!0;t=!0}}return this._lastMediaClockValue=this._currentPosition,this._lastMediaClockCheck=e,!t},i.prototype._onHtml5MediaEvent=function(t){switch(this._logger.log("HTML5 media event: "+t.type),t.type){case"playing":if(this._trySeekToStartPosition())break;this._onPositionChange(),this._resetPositionInterval(!0),this.updateState(s.PLAYING);break;case"pause":this._onPositionChange(),this._resetPositionInterval(!1),this.updateState(s.PAUSED);break;case"ended":this._currentPosition=this._loadedPosition=this._duration,this._resetPositionInterval(!1),this.updateState(s.ENDED);break;case"waiting":if(this.getState()===s.SEEKING)break;this.updateState(s.LOADING);break;case"seeking":this.updateState(s.SEEKING);break;case"seeked":this._html5Audio.paused?this.updateState(s.PAUSED):this.updateState(s.PLAYING),this._onPositionChange(t);break;case"error":this._error(this._html5AudioErrorCodeToErrorId(),!0)}},i.prototype._html5AudioErrorCodeToErrorId=function(){return{1:u.HTML5_AUDIO_ABORTED,2:u.HTML5_AUDIO_NETWORK,3:u.HTML5_AUDIO_DECODE,4:u.HTML5_AUDIO_SRC_NOT_SUPPORTED}[this._html5Audio.error.code]},i.prototype._error=function(t,e){var n="error: ";e&&(n="error (native): "),this._errorID=t,this._errorMessage=this._getErrorMessage(this._errorID),this._logger.log(n+this._errorID+" "+this._errorMessage),this.updateState(s.ERROR),this._toggleEventListeners(!1)},i.prototype._getErrorMessage=function(t){var e={};return e[u.HTML5_AUDIO_ABORTED]="The fetching process for the media resource was aborted by the user agent at the user's request.",e[u.HTML5_AUDIO_NETWORK]="A network error of some description caused the user agent to stop fetching the media resource, after the resource was established to be usable.",e[u.HTML5_AUDIO_DECODE]="An error of some description occurred while decoding the media resource, after the resource was established to be usable.",e[u.HTML5_AUDIO_SRC_NOT_SUPPORTED]="The media resource indicated by the src attribute was not suitable.",e[t]}},function(t,e){function n(t,e){var n=new Uint8Array(t.byteLength+e.byteLength);return n.set(new Uint8Array(t),0),n.set(new Uint8Array(e),t.byteLength),n}t.exports={bindAll:function(t,e){e.forEach(function(e){t[e]=t[e].bind(t)})},concatBuffersToUint8Array:n}},function(t,e,n){function i(t,e,n){u.prototype.constructor.call(this,t,e,n||"HTML5SingleAudioPlayer")}var r,o=n(1),s=n(16),a=n(39),u=n(46),h=n(38),c={};t.exports=i,o(i.prototype,u.prototype),i._onLoaded=function(t){i._pauseOthersAndForwardEvent("_onLoaded",t)},i._onLoadedMetadata=function(t){i._pauseOthersAndForwardEvent("_onLoadedMetadata",t)},i._onHtml5MediaEvent=function(t){i._pauseOthersAndForwardEvent("_onHtml5MediaEvent",t)},i._pauseOthersAndForwardEvent=function(t,e){Object.keys(c).forEach(function(n){var i=c[n];n===r?i[t](e):i.pause()})},i.prototype._initMediaElement=function(){i._html5Audio||(i._html5Audio=s.createAudioElement(),i._html5Audio.id=this.getSettings().audioObjectID+"_Single",u.prototype._toggleEventListeners.call(i,!0)),this._toggleEventListeners(!0),this._html5Audio=i._html5Audio,this._logger.log("initialized player for use with: "+this.getDescriptor().src)},i.prototype._toggleEventListeners=function(t){t?c[this.getId()]=this:delete c[this.getId()]},i.prototype.play=function(t){this._logger.log("singleton play at: "+t),(0===this._html5Audio.readyState||this.getDescriptor().src!==this._html5Audio.src)&&(this._logger.log("setting up audio element for use with: "+this.getDescriptor().src),r=this.getId(),this._isInOneOfStates(h.PAUSED)&&(this._logger.log("state was paused"),t=this._currentPosition||0),this._toggleEventListeners(!0),this._html5Audio.preload="auto",this._html5Audio.type=this.getDescriptor().mimeType,this._html5Audio.src=this.getDescriptor().src,this._html5Audio.load()),u.prototype.play.call(this,t)},i.prototype.resume=function(){return this._isInOneOfStates(h.ERROR,h.DEAD)?void 0:r!==this.getId()?void this.play(this._currentPosition):void u.prototype.resume.apply(this,arguments)},i.prototype.pause=function(){this._isInOneOfStates(h.ERROR,h.DEAD)||(this._logger.log("singleton pause"),r===this.getId()?u.prototype.pause.apply(this,arguments):(this._toggleEventListeners(!1),this._isInOneOfStates(h.PAUSED)||this.updateState(h.PAUSED),this._resetPositionInterval(!1)))},i.prototype.seek=function(t){return r!==this.getId()?(this._currentPosition=t,void this.trigger(a.POSITION_CHANGE,this._currentPosition,this._loadedPosition,this._duration,this)):void u.prototype.seek.apply(this,arguments)}},function(t,e,n){function i(t,e){o.call(this,t,e,s,"HLSSingleAudioPlayer")}var r=n(1),o=n(45),s=n(48);t.exports=i,r(i.prototype,s.prototype,o.prototype)},function(t,e,n){function i(t,e){return u.prototype.constructor.call(this,"HLSMSEPlayer",t,e,w()),o(this,["_onPositionChange","_onPlaylistLoaded","_onPlaylistFailed","_onSegmentLoaded","_onSegmentProgress","_onSegmentFailed","_onHtml5MediaEvent","_onLoadedData","_onLoadedMetadata","_onMediaSourceAppend","_onMediaSourceReady","_onMediaSourceDestroy","_onMediaSourceError"]),this._streamUrlProvider=this.getSettings().streamUrlProvider||null,this._minPreBufferLengthForPlayback=5e3,this._maxBufferLength=3e4,this._streamUrlRetryTimer=null,this._streamUrlTimesFailed=0,this._playlistRetryTimer=null,this._playlistTimesFailed=0,this._playlistRefreshInProgress=!1,this._isPlaylistLoaded=!1,this._loadOnInit=!1,this._schedulingSegmentIndex=-1,this._segmentsDownloading=[],this._nextSchedulingTimeout=null,this._mimeType=T(),this._mimeType?(this._mseToolkit=new l(this._logger,this._mimeType),this._mseToolkit.on(l.Events.SEGMENT_APPENDED,this._onMediaSourceAppend),this._mseToolkit.on(l.Events.SOURCE_READY,this._onMediaSourceReady),this._mseToolkit.on(l.Events.SOURCE_DESTROY,this._onMediaSourceDestroy),this._mseToolkit.on(l.Events.SOURCE_ERROR,this._onMediaSourceError),this._hlsToolkit=new c(this._logger,this.getDescriptor().src),this._hlsToolkit.on(c.Events.SEGMENT_LOADED,this._onSegmentLoaded),this._hlsToolkit.on(c.Events.SEGMENT_PROGRESS,this._onSegmentProgress),this._hlsToolkit.on(c.Events.SEGMENT_FAILED,this._onSegmentFailed),this._hlsToolkit.on(c.Events.PLAYLIST_LOADED,this._onPlaylistLoaded),this._hlsToolkit.on(c.Events.PLAYLIST_FAILED,this._onPlaylistFailed),this._hlsToolkit.on(c.Events.PLAYLIST_PARSE_ERROR,this._onPlaylistFailed),this._html5Audio=this._mseToolkit.media(),void this._toggleEventListeners(!0)):void this._error(a.MSE_NOT_SUPPORTED)}var r=n(1),o=n(47).bindAll,s=n(39),a=n(43),u=n(35),h=n(46),c=n(51),l=n(66),f=n(67),d=n(38),p=n(42),g=n(128),_=n(129),m=n(16),y=200,v=500,E=3,S=1e4,A=function(t){var e=t/E,n=v*(Math.pow(Math.E,e)/Math.E);return n+=Math.random()*y,n>S&&(n=S),n},w=function(){var t={};return t[p.names.PROTOCOLS]=[g.HLS],t[p.names.MIMETYPES]=[_.HLS,_.M3U8,_.MP3],t[p.names.NEEDS_URL_REFRESH]=!1,t},T=function(){return m.isMSESupportMPEG()&&!m.isNativeHlsSupported()?"audio/mpeg":m.isMSESupportMP4()?"audio/mp4":null};t.exports=i,r(i.prototype,u.prototype),i.prototype._onLoadedData=function(){this._logger.log("loadeddata event handler"),this.trigger(s.DATA)},i.prototype._onLoadedMetadata=function(){this._logger.log("loadedmetadata event handler")},i.prototype._mediasHasProgressed=function(){var t=!1,e=Date.now();if(this._lastMediaClockCheck){var n=e-this._lastMediaClockCheck,i=this._currentPosition-this._lastMediaClockValue;if(.1*n>i){if(0===i&&50>n)return!0;t=!0}}return this._lastMediaClockValue=this._currentPosition,this._lastMediaClockCheck=e,!t},i.prototype._onPositionChange=function(){return this._html5Audio&&this.getState()!==d.SEEKING?(this._currentPosition=1e3*this._html5Audio.currentTime,this.getState()!==d.PLAYING||this._mediasHasProgressed()?(this.getState()!==d.PLAYING&&this._mediasHasProgressed()&&this.updateState(d.PLAYING),this._triggerPositionEvent(),this._currentPosition>=this._duration?void this.updateState(d.ENDED):void 0):(this._logger.log("media clock check failed, playhead is not advancing anymore"),void this.updateState(d.LOADING))):void 0},i.prototype._onMediaSourceReady=function(){this.getDescriptor().duration&&(this._setDuration(this.getDescriptor().duration),this._logger.log("duration set from descriptor to "+this._duration)),this.updateState(d.IDLE),this._loadOnInit&&this._loadInitialPlaylist()},i.prototype._onMediaSourceDestroy=function(){this.kill()},i.prototype._onMediaSourceError=function(t){this._logger.log("MediaSource API error: "+t.message),this._error(a.MSE_BAD_OBJECT_STATE),this.kill()},i.prototype._onMediaSourceAppend=function(t){this._logger.log("segment appended: "+t.index),this.trigger(s.DATA,t),this._loadedPosition=t.endPosition,this._playRequested&&(this._logger.log("triggering playback after appending enough segments"),this._html5Audio.play(this._currentPosition))},i.prototype._onSegmentProgress=function(t){var e=Math.round(t.loaded/t.total*100);this._logger.log("segment "+t.index+" loaded "+t.loaded+" of "+t.total+" bytes ("+e+"%)"),this._loadedPosition=t.endPosition-t.duration*(t.loaded/t.total)},i.prototype._onSegmentLoaded=function(t){return this._mseToolkit.sourceIsReady()?void this._appendSegments():void this._logger.log("we have been disposed while loading a segment, noop")},i.prototype._onSegmentFailed=function(t){switch(this._logger.log("segment loading failed handler: "+t.status),t.status){case c.Status.NOT_FOUND:case c.Status.FORBIDDEN:this._cancelNextScheduling(),this._cancelAllInFlightRequests(),this._refreshPlaylist();break;case c.Status.TIMEOUT:this.trigger(s.NETWORK_TIMEOUT);case c.Status.SERVER_ERROR:if(t.aborted){this._logger.log("aborted segment has been prevented from being retried");break}t.scheduleRetry(A(t.timesFailed),this._hlsToolkit.loadSegment,this._hlsToolkit);break;case c.Status.FAILED:this._logger.log("WARNING: segment loading failed for unknown reason!");break;default:throw new Error("Invalid status on failed segment: "+t.status)}},i.prototype._onPlaylistLoaded=function(){return this._logger.log("playlist loaded handler"),this._mseToolkit.sourceIsReady()?(this._playlistRefreshInProgress&&(this._cancelNextScheduling(),this._runScheduling()),this._playlistRefreshInProgress=!1,this._playlistTimesFailed=0,this._isPlaylistLoaded=!0,this._inspectEncryptionData(),this._setDuration(this._hlsToolkit.getDuration()),this._logger.log("duration set from playlist info to "+this._duration),void this.trigger(s.METADATA)):void this._logger.log("we have been disposed while loading the playlist, noop")},i.prototype._onPlaylistFailed=function(t){return this._logger.log("playlist loading failed handler. HTTP status code is "+t),this._mseToolkit.sourceIsReady()?(this._logger.log("Playlist loading failed  "+this._playlistTimesFailed+" times before"),this._playlistTimesFailed++,this._playlistRetryTimer=window.setTimeout(function(){this.hasStreamUrlProvider()?this._refreshPlaylist():this._hlsToolkit.updatePlaylist()}.bind(this),A(this._playlistTimesFailed)),void(0===t&&this.trigger(s.NETWORK_TIMEOUT))):void this._logger.log("we have been disposed while loading the playlist, noop")},i.prototype.afterStateChange=function(t,e){switch(e){case d.PLAYING:this._runScheduling();break;case d.PAUSED:this._cancelNextScheduling()}},i.prototype._onHtml5MediaEvent=function(t){switch(this._logger.log('HTML5 media event "'+t.type+'"'),this._waitingToPause=!1,t.type){case"playing":this._playRequested=!1,this._triggerPositionEvent(),this._resetPositionTimer(!0),this.updateState(d.PLAYING);break;case"pause":this._triggerPositionEvent(),this._resetPositionTimer(!1),this.updateState(d.PAUSED);break;case"ended":this._currentPosition=this._loadedPosition=this._duration,this._triggerPositionEvent(),this._resetPositionTimer(!1),this.updateState(d.ENDED);break;case"waiting":if(this.getState()===d.SEEKING)break;this.updateState(d.LOADING);break;case"seeking":this._triggerPositionEvent(),this.updateState(d.SEEKING);break;case"seeked":this._html5Audio.paused?this.updateState(d.PAUSED):this.updateState(d.PLAYING),this._onPositionChange();break;case"error":this._error(this._html5AudioErrorCodeToErrorId(),!0)}},i.prototype._toggleEventListeners=function(t){if(this._html5Audio){var e=t?"addEventListener":"removeEventListener";h.MediaAPIEvents.forEach(function(t){switch(t){case"loadeddata":this._html5Audio[e]("loadeddata",this._onLoadedData);break;case"loadedmetadata":this._html5Audio[e]("loadedmetadata",this._onLoadedMetadata);break;case"timeupdate":default:this._html5Audio[e](t,this._onHtml5MediaEvent)}},this)}},i.prototype._loadInitialPlaylist=function(){this.updateState(d.LOADING),this._hlsToolkit.updatePlaylist()},i.prototype._refreshPlaylist=function(){this.hasStreamUrlProvider()&&(this._playlistRefreshfInProgress||(this._playlistRefreshInProgress=!0,this._streamUrlProvider().done(function(t){this._logger.log("got new M3u8 URL: "+t),this._streamUrlTimesFailed=0,this._hlsToolkit.setUri(t),this._hlsToolkit.updatePlaylist()}.bind(this)).fail(function(){this._logger.log("failed to retrieve stream URL :("),this._streamUrlRetryTimer=window.setTimeout(function(){this._playlistRefreshInProgress=!1,this._refreshPlaylist()}.bind(this),A(++this._streamUrlTimesFailed))}.bind(this))))},i.prototype._setDuration=function(t){this._duration=t;try{this._mseToolkit.duration(this._duration)}catch(e){this._onMediaSourceError(e)}},i.prototype._resetPositionTimer=function(t){window.clearInterval(this._positionUpdateTimer),t&&(this._positionUpdateTimer=window.setInterval(this._onPositionChange,this.getSettings().updateInterval))},i.prototype._triggerPositionEvent=function(){this.trigger(s.POSITION_CHANGE,this._currentPosition,this._loadedPosition,this._duration,this)},i.prototype._initTransmuxerOnce=function(t,e){if(!this._transmuxer){var n=this._mimeType!==t.mimeType?f.Configs.MP3_TO_FMP4:f.Configs.VOID;this._transmuxer=new f(n),this._transmuxer.on("segment",function(t){this._logger.log("transmuxed data ready, "+t.data.length+" bytes for segment "+t.index),e(t)}.bind(this))}},i.prototype._transmuxSegment=function(t,e){this._logger.log("transmuxing segment "+t.index),this._initTransmuxerOnce(t,e),this._transmuxer.process(t)},i.prototype._appendSegments=function(){var t=!0;this._segmentsDownloading.slice().forEach(function(e){e.isComplete()&&t?(this._decryptSegment(e),this._transmuxSegment(e,function(t){this._mseToolkit.append(t)}.bind(this)),this._segmentsDownloading.shift()):t=!1},this)},i.prototype._cancelNextScheduling=function(){this._logger.log("cancelling next scheduling"),window.clearTimeout(this._nextSchedulingTimeout),this._nextSchedulingTimeout=null},i.prototype._getBufferUntilTime=function(){return this._currentPosition+this._maxBufferLength},i.prototype._getCurrentSegment=function(){return this._schedulingSegmentIndex>0?this._hlsToolkit.getSegment(this._schedulingSegmentIndex):this._hlsToolkit.getSegmentForTime(this._currentPosition)},i.prototype._runScheduling=function(){function t(){var e=!1,n=this._getBufferUntilTime(),i=this._getCurrentSegment(),r=i?i.duration:Math.Infinity;if(this._logger.log("scheduling next requests, current buffer-until time: "+n+" ms"),!i)return void this._logger.log("no segment to schedule, closing loop");for(this._logger.log("current segment index: "+i.index);i.endPosition<=n;){if(this._logger.log("scheduling loop at "+this._currentPosition+" ms, current segment "+i.index),this._requestSegment(i),i.isLast){e=!0,this._logger.log("end of playlist reached");break}this._schedulingSegmentIndex=i.index+1,i=this._hlsToolkit.getSegment(this._schedulingSegmentIndex)}this._isInOneOfStates(d.DEAD,d.PAUSED)||e?(this._logger.log("not re-scheduling"),this._nextSchedulingTimeout=null):(this._logger.log("timing next check for more data in "+r+" ms"),this._nextSchedulingTimeout=window.setTimeout(t.bind(this),r))}this._nextSchedulingTimeout||t.call(this)},i.prototype._cancelAllInFlightRequests=function(){this._schedulingSegmentIndex=-1,this._segmentsDownloading.forEach(function(t){t.isComplete()||t.cancel()}),this._segmentsDownloading=[]},i.prototype._requestSegment=function(t){return this._segmentsDownloading.push(t),t.isComplete()?(this._logger.log("requested data is already loaded from segment "+t.index),void this._onSegmentLoaded(t)):t.hasBeenRequested()||t.hasFailed()?void this._logger.log("segment already in flight or failed (will retry): "+t.timesFailed+" times"):void this._hlsToolkit.loadSegment(t)},i.prototype._decryptSegment=function(t){this._hlsToolkit.isAES128Encrypted()&&this._hlsToolkit.decryptSegmentAES128(t)},i.prototype._inspectEncryptionData=function(){this._hlsToolkit.isAES128Encrypted()&&(this._logger.log("got key of byte length "+this._hlsToolkit.getEncryptionKey().byteLength),this._hlsToolkit.getEncryptionIv()?this._logger.log("got IV of byte length "+this._hlsToolkit.getEncryptionIv().byteLength):this._logger.log("no IV found in header, will use per-segment-index IV"))},i.prototype._html5AudioErrorCodeToErrorId=function(){return{1:a.HTML5_AUDIO_ABORTED,2:a.HTML5_AUDIO_NETWORK,3:a.HTML5_AUDIO_DECODE,4:a.HTML5_AUDIO_SRC_NOT_SUPPORTED}[this._html5Audio.error.code]},i.prototype._error=function(t,e){this._errorID=t,this._errorMessage=this._getErrorMessage(this._errorID),e&&this._html5Audio.error&&(this._errorMessage+=" (native message: "+this._html5Audio.error.message+")"),this._logger.log(this._errorID+" "+this._errorMessage),this.updateState(d.ERROR),this._toggleEventListeners(!1)},i.prototype._getErrorMessage=function(t){var e={};return e[a.MSE_NOT_SUPPORTED]="The browser does not support MediaSource API",e[a.MSE_BAD_OBJECT_STATE]="MediaSource API has thrown an exception",e[t]?"Error: "+t+" ("+e[t]+")":"Error: "+t},i.prototype.setVolume=function(t){this._html5Audio&&(this._html5Audio.volume=t)},i.prototype.getVolume=function(){return this._html5Audio?this._html5Audio.volume:1},i.prototype.setMute=function(t){this._html5Audio&&(this._html5Audio.muted=t)},i.prototype.getMute=function(){return this._html5Audio?this._html5Audio.muted:!1},i.prototype.getErrorID=function(){return this._errorID},i.prototype.play=function(t){return this._isInOneOfStates(d.ERROR,d.DEAD)?void this._logger.log("play called but state is ERROR or DEAD"):this._isInOneOfStates(d.IDLE,d.INITIALIZE)?(t=t||0,this._logger.log("play from "+t),this._playRequested=!0,this.seek(t),this.getState()===d.INITIALIZE?void(this._loadOnInit=!0):void this._loadInitialPlaylist()):void this.resume()},i.prototype.pause=function(){this._html5Audio&&(this._playRequested=!1,this._html5Audio.pause())},i.prototype.seek=function(t){if(!this._isInOneOfStates(d.ERROR,d.DEAD)){if(!this._isPlaylistLoaded)return void this.once(s.METADATA,function(){this.seek(t)}.bind(this));if(t>this._duration)return void this._logger.log("can not seek to position over duration");this._logger.log("seek to "+t+" ms"),this.updateState(d.SEEKING),this._lastMediaClockCheck=null,this._currentPosition=t;try{this._html5Audio.currentTime=t/1e3}catch(e){this._logger.log("error seeking: "+e.message)}this._cancelAllInFlightRequests(),this._cancelNextScheduling(),this._runScheduling()}},i.prototype.resume=function(){this._html5Audio&&(this._logger.log("resume from "+this._currentPosition),this._html5Audio.play(1e3*this._currentPosition))},i.prototype.kill=function(){this.getState()!==d.DEAD&&(this._logger.log("kill"),this._resetPositionTimer(!1),this._cancelNextScheduling(),this._cancelAllInFlightRequests(),window.clearTimeout(this._playlistRetryTimer),window.clearTimeout(this._streamUrlRetryTimer),this._playRequested=!1,this._toggleEventListeners(!1),this._html5Audio.pause(),this.updateState(d.DEAD))},i.prototype.getErrorMessage=function(){return this._errorMessage},i.prototype.hasStreamUrlProvider=function(){return!!this._streamUrlProvider}},function(t,e,n){var i,r=n(1),o=n(52),s=n(58),a=null,u=n(36),h={NEW:"new",REQUESTED:"requested",COMPLETE:"complete",TIMEOUT:"timeout",FORBIDDEN:"forbidden",NOT_FOUND:"not-found",SERVER_ERROR:"server-error",FAILED:"failed"},c={FIRST:"#EXTM3U",PLAYLIST:"#EXT-X-STREAM-INF:",SEGMENT:"#EXTINF:",END_TAG:"#EXT-X-ENDLIST",ENCRYPTION:"#EXT-X-KEY:"};t.exports=i=function(t,e){this._logger=t,this._duration=0,this.setUri(e)},i.Events={PLAYLIST_LOADED:"playlist-loaded",PLAYLIST_PARSE_ERROR:"playlist-parse-error",PLAYLIST_FAILED:"playlist-failed",SEGMENT_LOADED:"segment-loaded",SEGMENT_PROGRESS:"segment-progress",SEGMENT_FAILED:"segment-failed",SEGMENT_CANCELED:"segment-canceled"},i.Status=h,r(i.prototype,u),i.Segment=function(t,e,n,i,o){r(this,{toolkit:t,uri:e,startPosition:n,endPosition:n+i,duration:i,index:o,data:null,status:h.NEW,isLast:!1,timesFailed:0,loaded:0,total:-1,aborted:!1,xhr:null,mimeType:"audio/mpeg"}),this._logger=t._logger},i.Segment.prototype.containsTime=function(t){return t>=this.startPosition&&t<=this.endPosition},i.Segment.prototype.isComplete=function(){return this.status===h.COMPLETE},i.Segment.prototype.hasFailed=function(){return this.status===h.TIMEOUT||this.status===h.FORBIDDEN||this.status===h.NOT_FOUND||this.status===h.SERVER_ERROR||this.status===h.FAILED},i.Segment.prototype.isNew=function(){return this.status===h.NEW},i.Segment.prototype.hasBeenRequested=function(){return this.status===h.REQUESTED},i.Segment.prototype.scheduleRetry=function(t,e,n){var i=this;this._retryTimer=window.setTimeout(function(){e.call(n,i)},t)},i.Segment.prototype.cancel=function(){this._logger.log("segment cancelled, clearing timeout: "+this.index),window.clearTimeout(this._retryTimer),this.xhr&&(this._logger.log("will abort & reset segment: "+this.index),this.status=h.NEW,this.aborted=!0,this.data=null,this.timesFailed=0,this.xhr.abort(),this.xhr=null,this.toolkit.trigger(i.Events.SEGMENT_CANCELED,this));
},i.prototype.setUri=function(t){var e=this._uri=t;e.indexOf("?")>-1&&(e=e.substr(0,e.indexOf("?"))),this._baseURI=e.substr(0,e.lastIndexOf("/")+1)},i.prototype.updatePlaylist=function(){var t=!1,e=new XMLHttpRequest;e.open("GET",this._uri,!0),e.responseType="text",this._logger.log("downloading playlist");var n=function(n){t||(t=!0,this.trigger(i.Events.PLAYLIST_FAILED,e.status))}.bind(this);e.onload=function(t){return 200!==e.status?void n():(this._segments=[],this._duration=0,this._parsePlaylist(e.responseText)?(this.getLastSegment().isLast=!0,this._logger.log("playlist download complete"),void this._retrieveEncryptionKey(function(){this.trigger(i.Events.PLAYLIST_LOADED)})):(this._logger.log("error parsing playlist"),void this.trigger(i.Events.PLAYLIST_PARSE_ERROR)))}.bind(this),e.onerror=function(t){n(t)}.bind(this),e.send()},i.prototype._parsePlaylist=function(t){for(var e,n,r,o=t.split("\n"),s=!1,a=0,u=0;a<o.length;)e=o[a++],0===e.indexOf(c.SEGMENT)?(r=1e3*Number(e.substr(8,e.indexOf(",")-8)),n=this._createSegmentURL(o[a]),this._addSegment(new i.Segment(this,n,this._duration,r,u++)),a++):0===e.indexOf(c.ENCRYPTION)?this._parsePlaylistEncryptionHeader(e):0===e.indexOf(c.END_TAG)&&(s=!0);return!(0===this.getNumSegments()||!s)},i.prototype._addSegment=function(t){this._segments.push(t),this._duration+=t.duration},i.prototype._parsePlaylistEncryptionHeader=function(t){var e,n,i,r=t.substr(c.ENCRYPTION.length).split(",");if(s(r,function(t){t.indexOf("METHOD")>=0?n=t.split("=")[1]:t.indexOf("URI")>=0?e=t.split("=")[1]:t.indexOf("IV")>=0&&(i=t.split("=")[1])}),!(n&&e&&n.length&&e.length))throw new Error("Failed to parse M3U8 encryption header");n=n.trim(),e=e.trim().replace(/"/g,""),this._encryptionMethod=n,this._encryptionKeyUri=e,i&&i.length?(this._encryptionIvHexString=i.trim(),this._parseEncryptionIvHexString()):this._encryptionIv=null},i.prototype._parseEncryptionIvHexString=function(){var t,e=this._encryptionIvHexString.replace("0x",""),n=new Uint16Array(8),i=0;if(e.length%4!==0)throw new Error("Failed to parse M3U8 encryption IV (length is not multiple of 4)");for(;i<e.length;i+=4){if(t=parseInt(e.substr(i,4),16),isNaN(t))throw new Error("Failed to parse hex number in IV string");n[i/4]=t}this._encryptionIv=n},i.prototype._encryptionIvForSegment=function(t){var e=new DataView(new ArrayBuffer(16));return e.setUint32(0,t.index,!0),e.buffer},i.prototype._retrieveEncryptionKey=function(t){if(t){if(!this._encryptionKeyUri)return void t.call(this);var e=this._encryptionKeyUri,n=new XMLHttpRequest;n.open("GET",e,!0),n.responseType="arraybuffer",n.onload=o(function(i){200===n.status?this._encryptionKey=new Uint8Array(n.response):this._logger.log("Failed to retrieve encryption key from "+e+", returned status "+n.status),t.call(this)},this),n.send(),this._logger.log("Downloading encryption key from "+e)}},i.prototype._removeEncryptionPaddingBytes=function(t){var e=t.data[t.data.byteLength-1];e?(this._logger.log("Detected PKCS7 padding length of "+e+" bytes, slicing segment."),t.data=t.data.subarray(0,t.data.byteLength-e)):this._logger.log("No padding detected (last byte is zero)")},i.prototype.decryptSegmentAES128=function(t){if(this._logger.log("Decrypting AES-128 cyphered segment ..."),!a)throw new Error("AES decryption not built-in");var e=a.cipher.createDecipher("AES-CBC",a.util.createBuffer(this._encryptionKey)),n=0,i=t.data.byteLength,r=this._encryptionIv||this._encryptionIvForSegment(t);for(this._logger.log("Using IV ->"),e.start({iv:a.util.createBuffer(r)}),e.update(a.util.createBuffer(t.data)),e.finish(),t.data=new Uint8Array(i);i>n;n++)t.data[n]=e.output.getByte();this._removeEncryptionPaddingBytes(t)},i.prototype.isAES128Encrypted=function(){return"AES-128"===this._encryptionMethod},i.prototype.getEncryptionKeyUri=function(){return this._encryptionKeyUri},i.prototype.getEncryptionIv=function(){return this._encryptionIv},i.prototype.getEncryptionKey=function(){return this._encryptionKey},i.prototype._createSegmentURL=function(t){return"http://"===t.substr(0,7)||"https://"===t.substr(0,8)||"/"===t.substr(0,1)?t:this._baseURI+t},i.prototype._handleLoadSegmentFailure=function(t,e,n){t.aborted||(this._logger.log("segment aborted: "+t.aborted),this._logger.log("segment loading failure: HTTP response status: "+e.status),0===e.status?t.status=h.TIMEOUT:403===e.status?t.status=h.FORBIDDEN:404===e.status?t.status=h.NOT_FOUND:e.status>=500?t.status=h.SERVER_ERROR:t.status=h.FAILED,t.timesFailed++,this.trigger(i.Events.SEGMENT_FAILED,t))},i.prototype.loadSegment=function(t){var e=!1,n=new XMLHttpRequest,r=t.uri,o=function(i){e||(e=!0,this._handleLoadSegmentFailure(t,n,i))}.bind(this);(t.hasBeenRequested()||t.isComplete())&&this._logger.log("segment cant be loaded, requested: ",!!t.hasBeenRequested()," complete: ",t.isComplete()),n.open("GET",r,!0),n.responseType="arraybuffer",n.onload=function(){if(!t.aborted){if(200!==n.status)return void o();this._logger.log("download of segment "+t.index+" complete"),t.status=h.COMPLETE,t.data=new Uint8Array(n.response),t.downloadTime=Date.now()-t.downloadStartTime,this.trigger(i.Events.SEGMENT_LOADED,t)}}.bind(this),n.onprogress=function(e){t.aborted||e.loaded&&e.total&&(t.loaded=e.loaded,t.total=e.total,this.trigger(i.Events.SEGMENT_PROGRESS,t))}.bind(this),n.onerror=function(t){o(t)}.bind(this),this._logger.log("requesting segment "+t.index+" from "+r),t.xhr=n,t.aborted=!1,t.downloadStartTime=Date.now(),t.status=h.REQUESTED,n.send()},i.prototype.getSegment=function(t){return this._segments&&this._segments[t]?this._segments[t]:null},i.prototype.getSegmentIndexForTime=function(t){var e,n;if(t>this._duration||0>t||!this._segments||0===this._segments.length)return-1;for(e=Math.floor(this._segments.length*(t/this._duration)),n=this._segments[e];!(n.startPosition<=t&&n.startPosition+n.duration>t);)n.startPosition+n.duration>=t?e--:e++,n=this._segments[e];return e},i.prototype.getSegmentForTime=function(t){var e=this.getSegmentIndexForTime(t);return e>=0?this._segments[e]:null},i.prototype.getDuration=function(){return this._duration},i.prototype.getNumSegments=function(){return this._segments.length},i.prototype.getLastSegment=function(){return this._segments.length?this._segments[this._segments.length-1]:null}},function(t,e,n){var i=n(53),r=n(56),o=n(57),s=1,a=32,u=o(function(t,e,n){var o=s;if(n.length){var h=r(n,u.placeholder);o|=a}return i(t,o,e,n,h)});u.placeholder={},t.exports=u},function(t,e,n){(function(e){function i(t,e,n){for(var i=n.length,r=-1,o=P(t.length-i,0),s=-1,a=e.length,u=Array(a+o);++s<a;)u[s]=e[s];for(;++r<i;)u[n[r]]=t[r];for(;o--;)u[s++]=t[r++];return u}function r(t,e,n){for(var i=-1,r=n.length,o=-1,s=P(t.length-r,0),a=-1,u=e.length,h=Array(s+u);++o<s;)h[o]=t[o];for(var c=o;++a<u;)h[c+a]=e[a];for(;++i<r;)h[c+n[i]]=t[o++];return h}function o(t,n){function i(){var o=this&&this!==e&&this instanceof i?r:t;return o.apply(n,arguments)}var r=s(t);return i}function s(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var n=p(t.prototype),i=t.apply(n,e);return f(i)?i:n}}function a(t,n,o,u,h,c,f,p,T,b){function I(){for(var y=arguments.length,v=y,E=Array(y);v--;)E[v]=arguments[v];if(u&&(E=i(E,u,h)),c&&(E=r(E,c,f)),D||k){var w=I.placeholder,x=g(E,w);if(y-=x.length,b>y){var C=p?d(p):void 0,F=P(b-y,0),U=D?x:void 0,B=D?void 0:x,H=D?E:void 0,j=D?void 0:E;n|=D?S:A,n&=~(D?A:S),M||(n&=~(_|m));var G=a(t,n,o,H,U,j,B,C,T,F);return G.placeholder=w,G}}var Y=O?o:this,V=R?Y[t]:t;return p&&(E=l(E,p)),L&&T<E.length&&(E.length=T),this&&this!==e&&this instanceof I&&(V=N||s(t)),V.apply(Y,E)}var L=n&w,O=n&_,R=n&m,D=n&v,M=n&y,k=n&E,N=R?void 0:s(t);return I}function u(t,n,i,r){function o(){for(var n=-1,s=arguments.length,h=-1,c=r.length,l=Array(c+s);++h<c;)l[h]=r[h];for(;s--;)l[h++]=arguments[++n];var f=this&&this!==e&&this instanceof o?u:t;return f.apply(a?i:this,l)}var a=n&_,u=s(t);return o}function h(t,e,n,i,r,s,h,c){var l=e&m;if(!l&&"function"!=typeof t)throw new TypeError(T);var f=i?i.length:0;if(f||(e&=~(S|A),i=r=void 0),f-=r?r.length:0,e&A){var d=i,p=r;i=r=void 0}var g=[t,e,n,i,r,d,p,s,h,c];if(g[9]=null==c?l?0:t.length:P(c-f,0)||0,e==_)var y=o(g[0],g[2]);else y=e!=S&&e!=(_|S)||g[4].length?a.apply(void 0,g):u.apply(void 0,g);return y}function c(t,e){return t="number"==typeof t||b.test(t)?+t:-1,e=null==e?L:e,t>-1&&t%1==0&&e>t}function l(t,e){for(var n=t.length,i=I(e.length,n),r=d(t);i--;){var o=e[i];t[i]=c(o,n)?r[o]:void 0}return t}function f(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}var d=n(54),p=n(55),g=n(56),_=1,m=2,y=4,v=8,E=16,S=32,A=64,w=128,T="Expected a function",b=/^\d+$/,P=Math.max,I=Math.min,L=9007199254740991;t.exports=h}).call(e,function(){return this}())},function(t,e){function n(t,e){var n=-1,i=t.length;for(e||(e=Array(i));++n<i;)e[n]=t[n];return e}t.exports=n},function(t,e){function n(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}var i=function(){function t(){}return function(e){if(n(e)){t.prototype=e;var i=new t;t.prototype=void 0}return i||{}}}();t.exports=i},function(t,e){function n(t,e){for(var n=-1,r=t.length,o=-1,s=[];++n<r;)t[n]===e&&(t[n]=i,s[++o]=n);return s}var i="__lodash_placeholder__";t.exports=n},11,function(t,e,n){function i(t,e){return function(n,i,r){return"function"==typeof i&&void 0===r&&a(n)?t(n,i):e(n,s(i,r,3))}}var r=n(59),o=n(60),s=n(65),a=n(64),u=i(r,o);t.exports=u},function(t,e){function n(t,e){for(var n=-1,i=t.length;++n<i&&e(t[n],n,t)!==!1;);return t}t.exports=n},[134,61],[132,62,63,64],5,6,7,9,function(t,e,n){var i,r=n(36),o=n(16),s=n(47).bindAll,a=n(1);t.exports=i=function(t,e){s(this,["_onMSEInit","_onMSEDispose","_onSourceBufferUpdate"]),this.mimeType=e,this._logger=t,this._isBufferPrepared=!1,this._sourceBufferPtsOffset=0,this._segmentsAwaitingAppendance=[],this._isNotReady=!0,this._sourceBuffer=null,this._mediaSource=new MediaSource,this._mediaSource.addEventListener("sourceopen",this._onMSEInit,!1),this._mediaSource.addEventListener("sourceclose",this._onMSEDispose,!1),this._mediaElem=o.createAudioElement(),this._mediaElem.src=window.URL.createObjectURL(this._mediaSource)},i.Events={SOURCE_READY:"source-ready",SOURCE_DESTROYED:"source-destroy",SOURCE_ERROR:"source-error",SEGMENT_APPENDED:"segment-appended"},a(i.prototype,r),a(i.prototype,{_onMSEInit:function(){this._logger.log("source open handler"),this._isNotReady=!1,this._mediaSource.removeEventListener("sourceopen",this._onMSEInit,!1),this._sourceBuffer=this._mediaSource.addSourceBuffer(this.mimeType),this._sourceBuffer.addEventListener("update",this._onSourceBufferUpdate),this.trigger(i.Events.SOURCE_READY)},_onMSEDispose:function(){this._isNotReady=!0,this._logger.log("source dispose handler"),this._mediaSource.removeEventListener("sourceclose",this._onMSEDispose,!1)},_appendNextSegment:function(t){try{if(this._sourceBuffer.updating)return this._logger.log("source buffer is busy updating already, enqueuing data for later appending"),void this._segmentsAwaitingAppendance.unshift(t);t.isLast&&this._logger.log("about to append last segment"),this._currentSegmentAppending=t,this._sourceBuffer.timestampOffset=t.startPosition/1e3,this._sourceBuffer.appendBuffer(t.data),this._logger.log("appending segment "+t.index)}catch(e){this._logger.log("error while appending to SourceBuffer: "+e.message+")"),this.trigger(i.Events.SOURCE_ERROR,e)}},_tryAppendEos:function(){this._logger.log("attempting to finalize stream");try{"open"!==this._mediaSource.readyState||this._sourceBuffer.updating?this._logger.log("couldn't call endOfStream because SourceBuffer is still updating, we'll call it once its done"):(this._mediaSource.endOfStream(),this._logger.log("called endOfStream"))}catch(t){this._logger.log("SourceBuffer endOfStream() call failed with error: "+t.message),this.trigger(i.Events.SOURCE_ERROR,t)}},_onSourceBufferUpdate:function(){(this._currentSegmentAppending||this._sourceBuffer.updating)&&(this._logger.log("done updating SourceBuffer with segment "+this._currentSegmentAppending.index),this.trigger(i.Events.SEGMENT_APPENDED,this._currentSegmentAppending),this._currentSegmentAppending.isLast&&(this._logger.log("was last segment, setting on EOS on SourceBuffer"),this._tryAppendEos()),this._segmentsAwaitingAppendance.length&&!this._sourceBuffer.updating&&this._appendNextSegment(this._segmentsAwaitingAppendance.pop()))},append:function(t){if(!this.sourceIsReady())throw new Error("MediaSource is not ready yet");this._appendNextSegment(t)},media:function(){return this._mediaElem},sourceIsReady:function(){return!this._isNotReady},duration:function(t){return this._mediaSource.duration=t/1e3,1e3*this._mediaSource.duration}})},function(t,e,n){var i,r=n(47).concatBuffersToUint8Array,o=n(1),s=n(36),a=n(68);t.exports=i=function(t){this.config=t,this.reset(),this.segments=[],this.pushedInitData=!1},o(i.prototype,s),i.prototype.process=function(t){switch(this.segments.push(t),this.config){case i.Configs.VOID:this.trigger("segment",t);break;case i.Configs.MP3_TO_FMP4:this.src.enqueue(new a.Unit.Transfer(t.data,"binary")),this.src.enqueue(a.Unit.Transfer.Flush());break;default:throw new Error("Config "+this.config+" not supported")}},i.prototype.dequeue=function(){return this.segments.shift()},i.prototype.reset=function(){switch(this.config){case i.Configs.VOID:break;case i.Configs.MP3_TO_FMP4:this.gotInitData=!1,this.src=new a.Unit.BasePushSrc,this.parser=new a.Units.MP3Parser,this.muxer=new a.Units.MP4Mux(a.Units.MP4Mux.Profiles.MP3_AUDIO_ONLY),this.sink=new a.Unit.BaseSink,this.sink._onData=function(){var t,e=this.sink.dequeue().data;return this.gotInitData?(t=this.dequeue(),t.mimeType="audio/mp4",this.gotInitData&&!this.pushedInitData?(t.data=r(this.initData,e),this.pushedInitData=!0):t.data=e,this.trigger("segment",t),void this.reset()):(this.gotInitData=!0,void(this.initData=e))}.bind(this),a.Unit.link(this.src,this.parser,this.muxer,this.sink);break;default:throw new Error("Config "+this.config+" not supported")}},i.Configs={VOID:"VOID",MP3_TO_FMP4:"MP3_TO_FMP4"}},function(t,e,n){var i,r=n(69),o=n(115),s=n(118),a=n(121),u=n(124),h=n(125);t.exports=i={Unit:r,Units:{File:h,MP4Mux:o,MP3Parser:s,MSESink:a,XHR:u}}},function(t,e,n){(function(e){var i,r,o,s,a,u,h,c,l,f,d=n(74),p=n(76),g=n(85),_=n(96),m=n(97);t.exports=i=function(){_.call(this),this.inputs||(this.inputs=[]),this.outputs||(this.outputs=[])},i.create=function(t){return p(i.prototype,t)},i.createBaseSrc=function(t){return p(u.prototype,t)},i.createBasePushSrc=function(t){return p(h.prototype,t)},i.createBaseSink=function(t){return p(c.prototype,t)},i.createBaseTransform=function(t){return p(a.prototype,t)},i.createBaseParser=function(t){return p(l.prototype,t)},i.link=function(t,e){if(arguments.length>2)return i.linkArray(arguments);for(var n=0;n<Math.min(t.numberOfOuts(),e.numberOfIns());n++)t.out(n).pipe(e["in"](n));return e},i.linkArray=function(t){var e,n,r;for(r=0;r<t.length;r++)e=t[r],t.length>r+1&&(n=t[r+1],i.link(e,n));return n};var y=i.Event={CHAIN:"chain",NEED_DATA:"need-data",FINISH:"finish",PIPE:"pipe",UNPIPE:"unpipe",ERROR:"error",END:"end",OPEN:"open",CLOSE:"close"};i.prototype=p(_.prototype,{constructor:i,"in":function(t){return this.inputs[t]},out:function(t){return this.outputs[t]},numberOfIns:function(){return this.inputs.length},numberOfOuts:function(){return this.outputs.length},add:function(t){return t instanceof r?this.addInput(t):t instanceof o&&this.addOutput(t),this},remove:function(t){t instanceof r?this.removeInput(t):t instanceof o&&this.removeOutput(t)},addInput:function(t){this._installEventForwarder(t,y.FINISH),this._installEventForwarder(t,y.OPEN),this._installEventForwarder(t,y.PIPE),this._installEventForwarder(t,y.UNPIPE),this._installEventForwarder(t,y.ERROR),this._installEventForwarder(t,y.CHAIN),this.inputs.push(t)},addOutput:function(t){this._installEventForwarder(t,y.END),this._installEventForwarder(t,y.OPEN),this._installEventForwarder(t,y.CLOSE),this._installEventForwarder(t,y.ERROR),this._installEventForwarder(t,y.NEED_DATA),this.outputs.push(t)},removeInput:function(t){removePut(this.inputs,t)},removeOutput:function(t){removePut(this.outputs,t)},removePut:function(t,e){t.slice().forEach(function(n,i){n==e&&t.splice(i,1)})},_installEventForwarder:function(t,e){t.on(e,function(n){this.emit(e,t,n)}.bind(this))}}),i.Transfer=s=function(t,n,i){n||(n=t instanceof e?"buffer":t instanceof String?"utf8":"object"),this.resolved=!1,this.data=t,this.encoding=n,this.doneCallback=i},s.prototype=p(Object.prototype,{constructor:s,resolve:function(){this.doneCallback&&!this.resolved&&(this.doneCallback(),this.resolved=!0)},setFlushing:function(t){return this.data.flush=t,this},setEmpty:function(t){return this.data.empty=t,this}}),s.Flush=function(){return new s({},"binary").setFlushing(!0).setEmpty(!0)},s.EOS=function(){return new s(null,"binary")},i.Input=r=function(t,e){m.Writable.prototype.constructor.call(this,{objectMode:!0,decodeStrings:!1})},r.prototype=p(m.Writable.prototype,{constructor:r,_write:function(t,e,n){d("_write: "+e),this.emit(i.Event.CHAIN,new s(t,e,n))}}),i.Output=o=function(t){m.Readable.prototype.constructor.call(this,{objectMode:!0}),this._dataRequested=0,this._shouldPushMore=!0},o.eos=function(t){t.push(null,"null")},o.prototype=p(m.Readable.prototype,{constructor:o,_read:function(t){this._dataRequested++,this.emit(y.NEED_DATA,this)},push:function(t,e){return this._dataRequested--,this._shouldPushMore=m.Readable.prototype.push.call(this,t,e),this._shouldPushMore},isPulling:function(){return this._dataRequested>0},eos:function(){m.Readable.prototype.push.call(this,null,"null")}}),i.BaseTransform=a=function(){i.prototype.constructor.apply(this,arguments),this.add(new r).add(new o),this.on(y.CHAIN,this._onChain.bind(this)),this.on(y.FINISH,this._onFinish.bind(this))},a.prototype=p(i.prototype,{constructor:a,_onChain:function(t,e){this._transform(e),this.out(0).push(e.data,e.encoding),e.resolve()},_onFinish:function(t){o.eos(this.out(0))},_transform:function(t){}}),i.BaseSrc=u=function(){i.prototype.constructor.apply(this,arguments),this.add(new o),this.on(y.NEED_DATA,this.squeeze.bind(this))},u.prototype=p(i.prototype,{constructor:u,squeeze:function(){d("squeeze");var t=this._source();t&&(this.out(0).push(t.data,t.encoding),t.resolve())},_source:function(){}}),i.BasePushSrc=h=function(){u.prototype.constructor.apply(this,arguments),this._bufferOut=[]},h.prototype=p(u.prototype,{constructor:h,_source:function(){return this._bufferOut.length?this._bufferOut.shift():null},enqueue:function(t){this._bufferOut.push(t),this.out(0).isPulling&&this.out(0).isPulling()&&this.squeeze()}}),i.BaseSink=c=function(){i.prototype.constructor.apply(this,arguments),this.add(new r),this.on(y.CHAIN,this._onChain.bind(this)),this._bufferIn=[]},c.prototype=p(i.prototype,{constructor:c,_onChain:function(t,e){d("BaseSink._onChain: "+e.encoding),this._bufferIn.push(e),this._onData(),e.resolve()},_onData:function(){},dequeue:function(){return this._bufferIn.length?this._bufferIn.shift():null}}),i.BaseParser=l=function(){h.prototype.constructor.apply(this,arguments),c.prototype.constructor.apply(this,arguments),this.on("finish",this._onFinish.bind(this))},g(l.prototype,i.prototype,_.prototype,u.prototype,h.prototype,c.prototype,{constructor:l,_onData:function(){this._parse(this.dequeue())},_onFinish:function(){d("BaseParser._onFinish"),o.eos(this.out(0))},_parse:function(t){}}),i.InputSelector=f=function(t){for(a.prototype.constructor.apply(this,arguments),t=(t||1)-1;t-- >0;)this.add(new r);this.selectedInputIndex=0},g(f.prototype,a.prototype,{constructor:f,_onChain:function(t,e){var n=this["in"](this.selectedInputIndex);return t!==n?void e.resolve():(this._transform(e),this.out(0).push(e.data,e.encoding),void e.resolve())},_onFinish:function(t){var e=this["in"](this.selectedInputIndex);t===e&&o.eos(this.out(0))}})}).call(e,n(70).Buffer)},function(t,e,n){(function(t,i){function r(){function t(){}try{var e=new Uint8Array(1);return e.foo=function(){return 42},e.constructor=t,42===e.foo()&&e.constructor===t&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(n){return!1}}function o(){return t.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function t(e){return this instanceof t?(this.length=0,this.parent=void 0,"number"==typeof e?s(this,e):"string"==typeof e?a(this,e,arguments.length>1?arguments[1]:"utf8"):u(this,e)):arguments.length>1?new t(e,arguments[1]):new t(e)}function s(e,n){if(e=g(e,0>n?0:0|_(n)),!t.TYPED_ARRAY_SUPPORT)for(var i=0;n>i;i++)e[i]=0;return e}function a(t,e,n){("string"!=typeof n||""===n)&&(n="utf8");var i=0|y(e,n);return t=g(t,i),t.write(e,n),t}function u(e,n){if(t.isBuffer(n))return h(e,n);if($(n))return c(e,n);if(null==n)throw new TypeError("must start with number, buffer, array or string");if("undefined"!=typeof ArrayBuffer){if(n.buffer instanceof ArrayBuffer)return l(e,n);if(n instanceof ArrayBuffer)return f(e,n)}return n.length?d(e,n):p(e,n)}function h(t,e){var n=0|_(e.length);return t=g(t,n),e.copy(t,0,0,n),t}function c(t,e){var n=0|_(e.length);t=g(t,n);for(var i=0;n>i;i+=1)t[i]=255&e[i];return t}function l(t,e){var n=0|_(e.length);t=g(t,n);for(var i=0;n>i;i+=1)t[i]=255&e[i];return t}function f(e,n){return t.TYPED_ARRAY_SUPPORT?(n.byteLength,e=t._augment(new Uint8Array(n))):e=l(e,new Uint8Array(n)),e}function d(t,e){var n=0|_(e.length);t=g(t,n);for(var i=0;n>i;i+=1)t[i]=255&e[i];return t}function p(t,e){var n,i=0;"Buffer"===e.type&&$(e.data)&&(n=e.data,i=0|_(n.length)),t=g(t,i);for(var r=0;i>r;r+=1)t[r]=255&n[r];return t}function g(e,n){t.TYPED_ARRAY_SUPPORT?(e=t._augment(new Uint8Array(n)),e.__proto__=t.prototype):(e.length=n,e._isBuffer=!0);var i=0!==n&&n<=t.poolSize>>>1;return i&&(e.parent=Z),e}function _(t){if(t>=o())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o().toString(16)+" bytes");return 0|t}function m(e,n){if(!(this instanceof m))return new m(e,n);var i=new t(e,n);return delete i.parent,i}function y(t,e){"string"!=typeof t&&(t=""+t);var n=t.length;if(0===n)return 0;for(var i=!1;;)switch(e){case"ascii":case"binary":case"raw":case"raws":return n;case"utf8":case"utf-8":return Y(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return W(t).length;default:if(i)return Y(t).length;e=(""+e).toLowerCase(),i=!0}}function v(t,e,n){var i=!1;if(e=0|e,n=void 0===n||n===1/0?this.length:0|n,t||(t="utf8"),0>e&&(e=0),n>this.length&&(n=this.length),e>=n)return"";for(;;)switch(t){case"hex":return D(this,e,n);case"utf8":case"utf-8":return I(this,e,n);case"ascii":return O(this,e,n);case"binary":return R(this,e,n);case"base64":return P(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return M(this,e,n);default:if(i)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),i=!0}}function E(t,e,n,i){n=Number(n)||0;var r=t.length-n;i?(i=Number(i),i>r&&(i=r)):i=r;var o=e.length;if(o%2!==0)throw new Error("Invalid hex string");i>o/2&&(i=o/2);for(var s=0;i>s;s++){var a=parseInt(e.substr(2*s,2),16);if(isNaN(a))throw new Error("Invalid hex string");t[n+s]=a}return s}function S(t,e,n,i){return K(Y(e,t.length-n),t,n,i)}function A(t,e,n,i){return K(V(e),t,n,i)}function w(t,e,n,i){return A(t,e,n,i)}function T(t,e,n,i){return K(W(e),t,n,i)}function b(t,e,n,i){return K(z(e,t.length-n),t,n,i)}function P(t,e,n){return 0===e&&n===t.length?q.fromByteArray(t):q.fromByteArray(t.slice(e,n))}function I(t,e,n){n=Math.min(t.length,n);for(var i=[],r=e;n>r;){var o=t[r],s=null,a=o>239?4:o>223?3:o>191?2:1;if(n>=r+a){var u,h,c,l;switch(a){case 1:128>o&&(s=o);break;case 2:u=t[r+1],128===(192&u)&&(l=(31&o)<<6|63&u,l>127&&(s=l));break;case 3:u=t[r+1],h=t[r+2],128===(192&u)&&128===(192&h)&&(l=(15&o)<<12|(63&u)<<6|63&h,l>2047&&(55296>l||l>57343)&&(s=l));break;case 4:u=t[r+1],h=t[r+2],c=t[r+3],128===(192&u)&&128===(192&h)&&128===(192&c)&&(l=(15&o)<<18|(63&u)<<12|(63&h)<<6|63&c,l>65535&&1114112>l&&(s=l))}}null===s?(s=65533,a=1):s>65535&&(s-=65536,i.push(s>>>10&1023|55296),s=56320|1023&s),i.push(s),r+=a}return L(i)}function L(t){var e=t.length;if(Q>=e)return String.fromCharCode.apply(String,t);for(var n="",i=0;e>i;)n+=String.fromCharCode.apply(String,t.slice(i,i+=Q));return n}function O(t,e,n){var i="";n=Math.min(t.length,n);for(var r=e;n>r;r++)i+=String.fromCharCode(127&t[r]);return i}function R(t,e,n){var i="";n=Math.min(t.length,n);for(var r=e;n>r;r++)i+=String.fromCharCode(t[r]);return i}function D(t,e,n){var i=t.length;(!e||0>e)&&(e=0),(!n||0>n||n>i)&&(n=i);for(var r="",o=e;n>o;o++)r+=G(t[o]);return r}function M(t,e,n){for(var i=t.slice(e,n),r="",o=0;o<i.length;o+=2)r+=String.fromCharCode(i[o]+256*i[o+1]);return r}function k(t,e,n){if(t%1!==0||0>t)throw new RangeError("offset is not uint");if(t+e>n)throw new RangeError("Trying to access beyond buffer length")}function N(e,n,i,r,o,s){if(!t.isBuffer(e))throw new TypeError("buffer must be a Buffer instance");if(n>o||s>n)throw new RangeError("value is out of bounds");if(i+r>e.length)throw new RangeError("index out of range")}function x(t,e,n,i){0>e&&(e=65535+e+1);for(var r=0,o=Math.min(t.length-n,2);o>r;r++)t[n+r]=(e&255<<8*(i?r:1-r))>>>8*(i?r:1-r)}function C(t,e,n,i){0>e&&(e=4294967295+e+1);for(var r=0,o=Math.min(t.length-n,4);o>r;r++)t[n+r]=e>>>8*(i?r:3-r)&255}function F(t,e,n,i,r,o){if(e>r||o>e)throw new RangeError("value is out of bounds");if(n+i>t.length)throw new RangeError("index out of range");if(0>n)throw new RangeError("index out of range")}function U(t,e,n,i,r){return r||F(t,e,n,4,3.4028234663852886e38,-3.4028234663852886e38),X.write(t,e,n,i,23,4),n+4}function B(t,e,n,i,r){return r||F(t,e,n,8,1.7976931348623157e308,-1.7976931348623157e308),X.write(t,e,n,i,52,8),n+8}function H(t){if(t=j(t).replace(tt,""),t.length<2)return"";for(;t.length%4!==0;)t+="=";return t}function j(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function G(t){return 16>t?"0"+t.toString(16):t.toString(16)}function Y(t,e){e=e||1/0;for(var n,i=t.length,r=null,o=[],s=0;i>s;s++){if(n=t.charCodeAt(s),n>55295&&57344>n){if(!r){if(n>56319){(e-=3)>-1&&o.push(239,191,189);continue}if(s+1===i){(e-=3)>-1&&o.push(239,191,189);continue}r=n;continue}if(56320>n){(e-=3)>-1&&o.push(239,191,189),r=n;continue}n=(r-55296<<10|n-56320)+65536}else r&&(e-=3)>-1&&o.push(239,191,189);if(r=null,128>n){if((e-=1)<0)break;o.push(n)}else if(2048>n){if((e-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(65536>n){if((e-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(1114112>n))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function V(t){for(var e=[],n=0;n<t.length;n++)e.push(255&t.charCodeAt(n));return e}function z(t,e){for(var n,i,r,o=[],s=0;s<t.length&&!((e-=2)<0);s++)n=t.charCodeAt(s),i=n>>8,r=n%256,o.push(r),o.push(i);return o}function W(t){return q.toByteArray(H(t))}function K(t,e,n,i){for(var r=0;i>r&&!(r+n>=e.length||r>=t.length);r++)e[r+n]=t[r];return r}/*!
		 * The buffer module from node.js, for the browser.
		 *
		 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
		 * @license  MIT
		 */
var q=n(71),X=n(72),$=n(73);e.Buffer=t,e.SlowBuffer=m,e.INSPECT_MAX_BYTES=50,t.poolSize=8192;var Z={};t.TYPED_ARRAY_SUPPORT=void 0!==i.TYPED_ARRAY_SUPPORT?i.TYPED_ARRAY_SUPPORT:r(),t.TYPED_ARRAY_SUPPORT&&(t.prototype.__proto__=Uint8Array.prototype,t.__proto__=Uint8Array),t.isBuffer=function(t){return!(null==t||!t._isBuffer)},t.compare=function(e,n){if(!t.isBuffer(e)||!t.isBuffer(n))throw new TypeError("Arguments must be Buffers");if(e===n)return 0;for(var i=e.length,r=n.length,o=0,s=Math.min(i,r);s>o&&e[o]===n[o];)++o;return o!==s&&(i=e[o],r=n[o]),r>i?-1:i>r?1:0},t.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"raw":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},t.concat=function(e,n){if(!$(e))throw new TypeError("list argument must be an Array of Buffers.");if(0===e.length)return new t(0);var i;if(void 0===n)for(n=0,i=0;i<e.length;i++)n+=e[i].length;var r=new t(n),o=0;for(i=0;i<e.length;i++){var s=e[i];s.copy(r,o),o+=s.length}return r},t.byteLength=y,t.prototype.length=void 0,t.prototype.parent=void 0,t.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?I(this,0,t):v.apply(this,arguments)},t.prototype.equals=function(e){if(!t.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e?!0:0===t.compare(this,e)},t.prototype.inspect=function(){var t="",n=e.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(t+=" ... ")),"<Buffer "+t+">"},t.prototype.compare=function(e){if(!t.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e?0:t.compare(this,e)},t.prototype.indexOf=function(e,n){function i(t,e,n){for(var i=-1,r=0;n+r<t.length;r++)if(t[n+r]===e[-1===i?0:r-i]){if(-1===i&&(i=r),r-i+1===e.length)return n+i}else i=-1;return-1}if(n>2147483647?n=2147483647:-2147483648>n&&(n=-2147483648),n>>=0,0===this.length)return-1;if(n>=this.length)return-1;if(0>n&&(n=Math.max(this.length+n,0)),"string"==typeof e)return 0===e.length?-1:String.prototype.indexOf.call(this,e,n);if(t.isBuffer(e))return i(this,e,n);if("number"==typeof e)return t.TYPED_ARRAY_SUPPORT&&"function"===Uint8Array.prototype.indexOf?Uint8Array.prototype.indexOf.call(this,e,n):i(this,[e],n);throw new TypeError("val must be string, number or Buffer")},t.prototype.get=function(t){return console.log(".get() is deprecated. Access using array indexes instead."),this.readUInt8(t)},t.prototype.set=function(t,e){return console.log(".set() is deprecated. Access using array indexes instead."),this.writeUInt8(t,e)},t.prototype.write=function(t,e,n,i){if(void 0===e)i="utf8",n=this.length,e=0;else if(void 0===n&&"string"==typeof e)i=e,n=this.length,e=0;else if(isFinite(e))e=0|e,isFinite(n)?(n=0|n,void 0===i&&(i="utf8")):(i=n,n=void 0);else{var r=i;i=e,e=0|n,n=r}var o=this.length-e;if((void 0===n||n>o)&&(n=o),t.length>0&&(0>n||0>e)||e>this.length)throw new RangeError("attempt to write outside buffer bounds");i||(i="utf8");for(var s=!1;;)switch(i){case"hex":return E(this,t,e,n);case"utf8":case"utf-8":return S(this,t,e,n);case"ascii":return A(this,t,e,n);case"binary":return w(this,t,e,n);case"base64":return T(this,t,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return b(this,t,e,n);default:if(s)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),s=!0}},t.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var Q=4096;t.prototype.slice=function(e,n){var i=this.length;e=~~e,n=void 0===n?i:~~n,0>e?(e+=i,0>e&&(e=0)):e>i&&(e=i),0>n?(n+=i,0>n&&(n=0)):n>i&&(n=i),e>n&&(n=e);var r;if(t.TYPED_ARRAY_SUPPORT)r=t._augment(this.subarray(e,n));else{var o=n-e;r=new t(o,void 0);for(var s=0;o>s;s++)r[s]=this[s+e]}return r.length&&(r.parent=this.parent||this),r},t.prototype.readUIntLE=function(t,e,n){t=0|t,e=0|e,n||k(t,e,this.length);for(var i=this[t],r=1,o=0;++o<e&&(r*=256);)i+=this[t+o]*r;return i},t.prototype.readUIntBE=function(t,e,n){t=0|t,e=0|e,n||k(t,e,this.length);for(var i=this[t+--e],r=1;e>0&&(r*=256);)i+=this[t+--e]*r;return i},t.prototype.readUInt8=function(t,e){return e||k(t,1,this.length),this[t]},t.prototype.readUInt16LE=function(t,e){return e||k(t,2,this.length),this[t]|this[t+1]<<8},t.prototype.readUInt16BE=function(t,e){return e||k(t,2,this.length),this[t]<<8|this[t+1]},t.prototype.readUInt32LE=function(t,e){return e||k(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},t.prototype.readUInt32BE=function(t,e){return e||k(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},t.prototype.readIntLE=function(t,e,n){t=0|t,e=0|e,n||k(t,e,this.length);for(var i=this[t],r=1,o=0;++o<e&&(r*=256);)i+=this[t+o]*r;return r*=128,i>=r&&(i-=Math.pow(2,8*e)),i},t.prototype.readIntBE=function(t,e,n){t=0|t,e=0|e,n||k(t,e,this.length);for(var i=e,r=1,o=this[t+--i];i>0&&(r*=256);)o+=this[t+--i]*r;return r*=128,o>=r&&(o-=Math.pow(2,8*e)),o},t.prototype.readInt8=function(t,e){return e||k(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},t.prototype.readInt16LE=function(t,e){e||k(t,2,this.length);var n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},t.prototype.readInt16BE=function(t,e){e||k(t,2,this.length);var n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},t.prototype.readInt32LE=function(t,e){return e||k(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},t.prototype.readInt32BE=function(t,e){return e||k(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},t.prototype.readFloatLE=function(t,e){return e||k(t,4,this.length),X.read(this,t,!0,23,4)},t.prototype.readFloatBE=function(t,e){return e||k(t,4,this.length),X.read(this,t,!1,23,4)},t.prototype.readDoubleLE=function(t,e){return e||k(t,8,this.length),X.read(this,t,!0,52,8)},t.prototype.readDoubleBE=function(t,e){return e||k(t,8,this.length),X.read(this,t,!1,52,8)},t.prototype.writeUIntLE=function(t,e,n,i){t=+t,e=0|e,n=0|n,i||N(this,t,e,n,Math.pow(2,8*n),0);var r=1,o=0;for(this[e]=255&t;++o<n&&(r*=256);)this[e+o]=t/r&255;return e+n},t.prototype.writeUIntBE=function(t,e,n,i){t=+t,e=0|e,n=0|n,i||N(this,t,e,n,Math.pow(2,8*n),0);var r=n-1,o=1;for(this[e+r]=255&t;--r>=0&&(o*=256);)this[e+r]=t/o&255;return e+n},t.prototype.writeUInt8=function(e,n,i){return e=+e,n=0|n,i||N(this,e,n,1,255,0),t.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[n]=255&e,n+1},t.prototype.writeUInt16LE=function(e,n,i){return e=+e,n=0|n,i||N(this,e,n,2,65535,0),t.TYPED_ARRAY_SUPPORT?(this[n]=255&e,this[n+1]=e>>>8):x(this,e,n,!0),n+2},t.prototype.writeUInt16BE=function(e,n,i){return e=+e,n=0|n,i||N(this,e,n,2,65535,0),t.TYPED_ARRAY_SUPPORT?(this[n]=e>>>8,this[n+1]=255&e):x(this,e,n,!1),n+2},t.prototype.writeUInt32LE=function(e,n,i){return e=+e,n=0|n,i||N(this,e,n,4,4294967295,0),t.TYPED_ARRAY_SUPPORT?(this[n+3]=e>>>24,this[n+2]=e>>>16,this[n+1]=e>>>8,this[n]=255&e):C(this,e,n,!0),n+4},t.prototype.writeUInt32BE=function(e,n,i){return e=+e,n=0|n,i||N(this,e,n,4,4294967295,0),t.TYPED_ARRAY_SUPPORT?(this[n]=e>>>24,this[n+1]=e>>>16,this[n+2]=e>>>8,this[n+3]=255&e):C(this,e,n,!1),n+4},t.prototype.writeIntLE=function(t,e,n,i){if(t=+t,e=0|e,!i){var r=Math.pow(2,8*n-1);N(this,t,e,n,r-1,-r)}var o=0,s=1,a=0>t?1:0;for(this[e]=255&t;++o<n&&(s*=256);)this[e+o]=(t/s>>0)-a&255;return e+n},t.prototype.writeIntBE=function(t,e,n,i){if(t=+t,e=0|e,!i){var r=Math.pow(2,8*n-1);N(this,t,e,n,r-1,-r)}var o=n-1,s=1,a=0>t?1:0;for(this[e+o]=255&t;--o>=0&&(s*=256);)this[e+o]=(t/s>>0)-a&255;return e+n},t.prototype.writeInt8=function(e,n,i){return e=+e,n=0|n,i||N(this,e,n,1,127,-128),t.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),0>e&&(e=255+e+1),this[n]=255&e,n+1},t.prototype.writeInt16LE=function(e,n,i){return e=+e,n=0|n,i||N(this,e,n,2,32767,-32768),t.TYPED_ARRAY_SUPPORT?(this[n]=255&e,this[n+1]=e>>>8):x(this,e,n,!0),n+2},t.prototype.writeInt16BE=function(e,n,i){return e=+e,n=0|n,i||N(this,e,n,2,32767,-32768),t.TYPED_ARRAY_SUPPORT?(this[n]=e>>>8,this[n+1]=255&e):x(this,e,n,!1),n+2},t.prototype.writeInt32LE=function(e,n,i){return e=+e,n=0|n,i||N(this,e,n,4,2147483647,-2147483648),t.TYPED_ARRAY_SUPPORT?(this[n]=255&e,this[n+1]=e>>>8,this[n+2]=e>>>16,this[n+3]=e>>>24):C(this,e,n,!0),n+4},t.prototype.writeInt32BE=function(e,n,i){return e=+e,n=0|n,i||N(this,e,n,4,2147483647,-2147483648),0>e&&(e=4294967295+e+1),t.TYPED_ARRAY_SUPPORT?(this[n]=e>>>24,this[n+1]=e>>>16,this[n+2]=e>>>8,this[n+3]=255&e):C(this,e,n,!1),n+4},t.prototype.writeFloatLE=function(t,e,n){return U(this,t,e,!0,n)},t.prototype.writeFloatBE=function(t,e,n){return U(this,t,e,!1,n)},t.prototype.writeDoubleLE=function(t,e,n){return B(this,t,e,!0,n)},t.prototype.writeDoubleBE=function(t,e,n){return B(this,t,e,!1,n)},t.prototype.copy=function(e,n,i,r){if(i||(i=0),r||0===r||(r=this.length),n>=e.length&&(n=e.length),n||(n=0),r>0&&i>r&&(r=i),r===i)return 0;if(0===e.length||0===this.length)return 0;if(0>n)throw new RangeError("targetStart out of bounds");if(0>i||i>=this.length)throw new RangeError("sourceStart out of bounds");if(0>r)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-n<r-i&&(r=e.length-n+i);var o,s=r-i;if(this===e&&n>i&&r>n)for(o=s-1;o>=0;o--)e[o+n]=this[o+i];else if(1e3>s||!t.TYPED_ARRAY_SUPPORT)for(o=0;s>o;o++)e[o+n]=this[o+i];else e._set(this.subarray(i,i+s),n);return s},t.prototype.fill=function(t,e,n){if(t||(t=0),e||(e=0),n||(n=this.length),e>n)throw new RangeError("end < start");if(n!==e&&0!==this.length){if(0>e||e>=this.length)throw new RangeError("start out of bounds");if(0>n||n>this.length)throw new RangeError("end out of bounds");var i;if("number"==typeof t)for(i=e;n>i;i++)this[i]=t;else{var r=Y(t.toString()),o=r.length;for(i=e;n>i;i++)this[i]=r[i%o]}return this}},t.prototype.toArrayBuffer=function(){if("undefined"!=typeof Uint8Array){if(t.TYPED_ARRAY_SUPPORT)return new t(this).buffer;for(var e=new Uint8Array(this.length),n=0,i=e.length;i>n;n+=1)e[n]=this[n];return e.buffer}throw new TypeError("Buffer.toArrayBuffer not supported in this browser")};var J=t.prototype;t._augment=function(e){return e.constructor=t,e._isBuffer=!0,e._set=e.set,e.get=J.get,e.set=J.set,e.write=J.write,e.toString=J.toString,e.toLocaleString=J.toString,e.toJSON=J.toJSON,e.equals=J.equals,e.compare=J.compare,e.indexOf=J.indexOf,e.copy=J.copy,e.slice=J.slice,e.readUIntLE=J.readUIntLE,e.readUIntBE=J.readUIntBE,e.readUInt8=J.readUInt8,e.readUInt16LE=J.readUInt16LE,e.readUInt16BE=J.readUInt16BE,e.readUInt32LE=J.readUInt32LE,e.readUInt32BE=J.readUInt32BE,e.readIntLE=J.readIntLE,e.readIntBE=J.readIntBE,e.readInt8=J.readInt8,e.readInt16LE=J.readInt16LE,e.readInt16BE=J.readInt16BE,e.readInt32LE=J.readInt32LE,e.readInt32BE=J.readInt32BE,e.readFloatLE=J.readFloatLE,e.readFloatBE=J.readFloatBE,e.readDoubleLE=J.readDoubleLE,e.readDoubleBE=J.readDoubleBE,e.writeUInt8=J.writeUInt8,e.writeUIntLE=J.writeUIntLE,e.writeUIntBE=J.writeUIntBE,e.writeUInt16LE=J.writeUInt16LE,e.writeUInt16BE=J.writeUInt16BE,e.writeUInt32LE=J.writeUInt32LE,e.writeUInt32BE=J.writeUInt32BE,e.writeIntLE=J.writeIntLE,e.writeIntBE=J.writeIntBE,e.writeInt8=J.writeInt8,e.writeInt16LE=J.writeInt16LE,e.writeInt16BE=J.writeInt16BE,e.writeInt32LE=J.writeInt32LE,e.writeInt32BE=J.writeInt32BE,e.writeFloatLE=J.writeFloatLE,e.writeFloatBE=J.writeFloatBE,e.writeDoubleLE=J.writeDoubleLE,e.writeDoubleBE=J.writeDoubleBE,e.fill=J.fill,e.inspect=J.inspect,e.toArrayBuffer=J.toArrayBuffer,e};var tt=/[^+\/0-9A-Za-z-_]/g}).call(e,n(70).Buffer,function(){return this}())},function(t,e,n){var i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";!function(t){"use strict";function e(t){var e=t.charCodeAt(0);return e===s||e===l?62:e===a||e===f?63:u>e?-1:u+10>e?e-u+26+26:c+26>e?e-c:h+26>e?e-h+26:void 0}function n(t){function n(t){h[l++]=t}var i,r,s,a,u,h;if(t.length%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var c=t.length;u="="===t.charAt(c-2)?2:"="===t.charAt(c-1)?1:0,h=new o(3*t.length/4-u),s=u>0?t.length-4:t.length;var l=0;for(i=0,r=0;s>i;i+=4,r+=3)a=e(t.charAt(i))<<18|e(t.charAt(i+1))<<12|e(t.charAt(i+2))<<6|e(t.charAt(i+3)),n((16711680&a)>>16),n((65280&a)>>8),n(255&a);return 2===u?(a=e(t.charAt(i))<<2|e(t.charAt(i+1))>>4,n(255&a)):1===u&&(a=e(t.charAt(i))<<10|e(t.charAt(i+1))<<4|e(t.charAt(i+2))>>2,n(a>>8&255),n(255&a)),h}function r(t){function e(t){return i.charAt(t)}function n(t){return e(t>>18&63)+e(t>>12&63)+e(t>>6&63)+e(63&t)}var r,o,s,a=t.length%3,u="";for(r=0,s=t.length-a;s>r;r+=3)o=(t[r]<<16)+(t[r+1]<<8)+t[r+2],u+=n(o);switch(a){case 1:o=t[t.length-1],u+=e(o>>2),u+=e(o<<4&63),u+="==";break;case 2:o=(t[t.length-2]<<8)+t[t.length-1],u+=e(o>>10),u+=e(o>>4&63),u+=e(o<<2&63),u+="="}return u}var o="undefined"!=typeof Uint8Array?Uint8Array:Array,s="+".charCodeAt(0),a="/".charCodeAt(0),u="0".charCodeAt(0),h="a".charCodeAt(0),c="A".charCodeAt(0),l="-".charCodeAt(0),f="_".charCodeAt(0);t.toByteArray=n,t.fromByteArray=r}(e)},function(t,e){e.read=function(t,e,n,i,r){var o,s,a=8*r-i-1,u=(1<<a)-1,h=u>>1,c=-7,l=n?r-1:0,f=n?-1:1,d=t[e+l];for(l+=f,o=d&(1<<-c)-1,d>>=-c,c+=a;c>0;o=256*o+t[e+l],l+=f,c-=8);for(s=o&(1<<-c)-1,o>>=-c,c+=i;c>0;s=256*s+t[e+l],l+=f,c-=8);if(0===o)o=1-h;else{if(o===u)return s?NaN:(d?-1:1)*(1/0);s+=Math.pow(2,i),o-=h}return(d?-1:1)*s*Math.pow(2,o-i)},e.write=function(t,e,n,i,r,o){var s,a,u,h=8*o-r-1,c=(1<<h)-1,l=c>>1,f=23===r?Math.pow(2,-24)-Math.pow(2,-77):0,d=i?0:o-1,p=i?1:-1,g=0>e||0===e&&0>1/e?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,s=c):(s=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-s))<1&&(s--,u*=2),e+=s+l>=1?f/u:f*Math.pow(2,1-l),e*u>=2&&(s++,u/=2),s+l>=c?(a=0,s=c):s+l>=1?(a=(e*u-1)*Math.pow(2,r),s+=l):(a=e*Math.pow(2,l-1)*Math.pow(2,r),s=0));r>=8;t[n+d]=255&a,d+=p,a/=256,r-=8);for(s=s<<r|a,h+=r;h>0;t[n+d]=255&s,d+=p,s/=256,h-=8);t[n+d-p]|=128*g}},function(t,e){var n=Array.isArray,i=Object.prototype.toString;t.exports=n||function(t){return!!t&&"[object Array]"==i.call(t)}},function(t,e,n){var i=n(75);t.exports=function(){i.loggingEnabled()&&console.log.apply(console,arguments)}},function(t,e){var n=!1;t.exports={loggingEnabled:function(t){return void 0!==t&&(n=t),n}}},function(t,e,n){function i(t,e,n){var i=o(t);return n&&s(t,e,n)&&(e=void 0),e?r(i,e):i}var r=n(77),o=n(83),s=n(84);t.exports=i},[131,78,79],3,[132,80,81,82],5,6,7,55,10,[130,86,92,88],[131,87,88],3,[132,89,90,91],5,6,7,[133,93,94,95],9,10,11,function(t,e){function n(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function i(t){return"function"==typeof t}function r(t){return"number"==typeof t}function o(t){return"object"==typeof t&&null!==t}function s(t){return void 0===t}t.exports=n,n.EventEmitter=n,n.prototype._events=void 0,n.prototype._maxListeners=void 0,n.defaultMaxListeners=10,n.prototype.setMaxListeners=function(t){if(!r(t)||0>t||isNaN(t))throw TypeError("n must be a positive number");return this._maxListeners=t,this},n.prototype.emit=function(t){var e,n,r,a,u,h;if(this._events||(this._events={}),"error"===t&&(!this._events.error||o(this._events.error)&&!this._events.error.length)){if(e=arguments[1],e instanceof Error)throw e;throw TypeError('Uncaught, unspecified "error" event.')}if(n=this._events[t],s(n))return!1;if(i(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:a=Array.prototype.slice.call(arguments,1),n.apply(this,a)}else if(o(n))for(a=Array.prototype.slice.call(arguments,1),h=n.slice(),r=h.length,u=0;r>u;u++)h[u].apply(this,a);return!0},n.prototype.addListener=function(t,e){var r;if(!i(e))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",t,i(e.listener)?e.listener:e),this._events[t]?o(this._events[t])?this._events[t].push(e):this._events[t]=[this._events[t],e]:this._events[t]=e,o(this._events[t])&&!this._events[t].warned&&(r=s(this._maxListeners)?n.defaultMaxListeners:this._maxListeners,r&&r>0&&this._events[t].length>r&&(this._events[t].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[t].length),"function"==typeof console.trace&&console.trace())),this},n.prototype.on=n.prototype.addListener,n.prototype.once=function(t,e){function n(){this.removeListener(t,n),r||(r=!0,e.apply(this,arguments))}if(!i(e))throw TypeError("listener must be a function");var r=!1;return n.listener=e,this.on(t,n),this},n.prototype.removeListener=function(t,e){var n,r,s,a;if(!i(e))throw TypeError("listener must be a function");if(!this._events||!this._events[t])return this;if(n=this._events[t],s=n.length,r=-1,n===e||i(n.listener)&&n.listener===e)delete this._events[t],this._events.removeListener&&this.emit("removeListener",t,e);else if(o(n)){for(a=s;a-- >0;)if(n[a]===e||n[a].listener&&n[a].listener===e){r=a;break}if(0>r)return this;1===n.length?(n.length=0,delete this._events[t]):n.splice(r,1),this._events.removeListener&&this.emit("removeListener",t,e)}return this},n.prototype.removeAllListeners=function(t){var e,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[t]&&delete this._events[t],this;if(0===arguments.length){for(e in this._events)"removeListener"!==e&&this.removeAllListeners(e);return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[t],i(n))this.removeListener(t,n);else if(n)for(;n.length;)this.removeListener(t,n[n.length-1]);return delete this._events[t],this},n.prototype.listeners=function(t){var e;return e=this._events&&this._events[t]?i(this._events[t])?[this._events[t]]:this._events[t].slice():[]},n.prototype.listenerCount=function(t){if(this._events){var e=this._events[t];if(i(e))return 1;if(e)return e.length}return 0},n.listenerCount=function(t,e){return t.listenerCount(e)}},function(t,e,n){function i(){r.call(this)}t.exports=i;var r=n(96).EventEmitter,o=n(98);o(i,r),i.Readable=n(99),i.Writable=n(111),i.Duplex=n(112),i.Transform=n(113),i.PassThrough=n(114),i.Stream=i,i.prototype.pipe=function(t,e){function n(e){t.writable&&!1===t.write(e)&&h.pause&&h.pause()}function i(){h.readable&&h.resume&&h.resume()}function o(){c||(c=!0,t.end())}function s(){c||(c=!0,"function"==typeof t.destroy&&t.destroy())}function a(t){if(u(),0===r.listenerCount(this,"error"))throw t}function u(){h.removeListener("data",n),t.removeListener("drain",i),h.removeListener("end",o),h.removeListener("close",s),h.removeListener("error",a),t.removeListener("error",a),h.removeListener("end",u),h.removeListener("close",u),t.removeListener("close",u)}var h=this;h.on("data",n),t.on("drain",i),t._isStdio||e&&e.end===!1||(h.on("end",o),h.on("close",s));var c=!1;return h.on("error",a),t.on("error",a),h.on("end",u),h.on("close",u),t.on("close",u),t.emit("pipe",h),t}},function(t,e){"function"==typeof Object.create?t.exports=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(t,e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}},function(t,e,n){e=t.exports=n(100),e.Stream=n(97),e.Readable=e,e.Writable=n(107),e.Duplex=n(106),e.Transform=n(109),e.PassThrough=n(110)},function(t,e,n){(function(e){function i(t,e){var i=n(106);t=t||{};var r=t.highWaterMark,o=t.objectMode?16:16384;this.highWaterMark=r||0===r?r:o,this.highWaterMark=~~this.highWaterMark,this.buffer=[],this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.objectMode=!!t.objectMode,e instanceof i&&(this.objectMode=this.objectMode||!!t.readableObjectMode),this.defaultEncoding=t.defaultEncoding||"utf8",this.ranOut=!1,this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(L||(L=n(108).StringDecoder),this.decoder=new L(t.encoding),this.encoding=t.encoding)}function r(t){return n(106),this instanceof r?(this._readableState=new i(t,this),this.readable=!0,void P.call(this)):new r(t)}function o(t,e,n,i,r){var o=h(e,n);if(o)t.emit("error",o);else if(I.isNullOrUndefined(n))e.reading=!1,e.ended||c(t,e);else if(e.objectMode||n&&n.length>0)if(e.ended&&!r){var a=new Error("stream.push() after EOF");t.emit("error",a)}else if(e.endEmitted&&r){var a=new Error("stream.unshift() after end event");t.emit("error",a)}else!e.decoder||r||i||(n=e.decoder.write(n)),r||(e.reading=!1),e.flowing&&0===e.length&&!e.sync?(t.emit("data",n),t.read(0)):(e.length+=e.objectMode?1:n.length,r?e.buffer.unshift(n):e.buffer.push(n),e.needReadable&&l(t)),d(t,e);else r||(e.reading=!1);return s(e)}function s(t){return!t.ended&&(t.needReadable||t.length<t.highWaterMark||0===t.length)}function a(t){if(t>=R)t=R;else{t--;for(var e=1;32>e;e<<=1)t|=t>>e;t++}return t}function u(t,e){return 0===e.length&&e.ended?0:e.objectMode?0===t?0:1:isNaN(t)||I.isNull(t)?e.flowing&&e.buffer.length?e.buffer[0].length:e.length:0>=t?0:(t>e.highWaterMark&&(e.highWaterMark=a(t)),t>e.length?e.ended?e.length:(e.needReadable=!0,0):t)}function h(t,e){var n=null;return I.isBuffer(e)||I.isString(e)||I.isNullOrUndefined(e)||t.objectMode||(n=new TypeError("Invalid non-string/buffer chunk")),n}function c(t,e){if(e.decoder&&!e.ended){var n=e.decoder.end();n&&n.length&&(e.buffer.push(n),e.length+=e.objectMode?1:n.length)}e.ended=!0,l(t)}function l(t){var n=t._readableState;n.needReadable=!1,n.emittedReadable||(O("emitReadable",n.flowing),n.emittedReadable=!0,n.sync?e.nextTick(function(){f(t)}):f(t))}function f(t){O("emit readable"),t.emit("readable"),y(t)}function d(t,n){n.readingMore||(n.readingMore=!0,e.nextTick(function(){p(t,n)}))}function p(t,e){for(var n=e.length;!e.reading&&!e.flowing&&!e.ended&&e.length<e.highWaterMark&&(O("maybeReadMore read 0"),t.read(0),n!==e.length);)n=e.length;e.readingMore=!1}function g(t){return function(){var e=t._readableState;O("pipeOnDrain",e.awaitDrain),e.awaitDrain&&e.awaitDrain--,0===e.awaitDrain&&b.listenerCount(t,"data")&&(e.flowing=!0,y(t))}}function _(t,n){n.resumeScheduled||(n.resumeScheduled=!0,e.nextTick(function(){m(t,n)}))}function m(t,e){e.resumeScheduled=!1,t.emit("resume"),y(t),e.flowing&&!e.reading&&t.read(0)}function y(t){var e=t._readableState;if(O("flow",e.flowing),e.flowing)do var n=t.read();while(null!==n&&e.flowing)}function v(t,e){var n,i=e.buffer,r=e.length,o=!!e.decoder,s=!!e.objectMode;if(0===i.length)return null;if(0===r)n=null;else if(s)n=i.shift();else if(!t||t>=r)n=o?i.join(""):T.concat(i,r),i.length=0;else if(t<i[0].length){var a=i[0];n=a.slice(0,t),i[0]=a.slice(t)}else if(t===i[0].length)n=i.shift();else{n=o?"":new T(t);for(var u=0,h=0,c=i.length;c>h&&t>u;h++){var a=i[0],l=Math.min(t-u,a.length);o?n+=a.slice(0,l):a.copy(n,u,0,l),l<a.length?i[0]=a.slice(l):i.shift(),u+=l}}return n}function E(t){var n=t._readableState;if(n.length>0)throw new Error("endReadable called on non-empty stream");n.endEmitted||(n.ended=!0,e.nextTick(function(){n.endEmitted||0!==n.length||(n.endEmitted=!0,t.readable=!1,t.emit("end"))}))}function S(t,e){for(var n=0,i=t.length;i>n;n++)e(t[n],n)}function A(t,e){for(var n=0,i=t.length;i>n;n++)if(t[n]===e)return n;return-1}t.exports=r;var w=n(102),T=n(70).Buffer;r.ReadableState=i;var b=n(96).EventEmitter;b.listenerCount||(b.listenerCount=function(t,e){return t.listeners(e).length});var P=n(97),I=n(103);I.inherits=n(104);var L,O=n(105);O=O&&O.debuglog?O.debuglog("stream"):function(){},I.inherits(r,P),r.prototype.push=function(t,e){var n=this._readableState;return I.isString(t)&&!n.objectMode&&(e=e||n.defaultEncoding,e!==n.encoding&&(t=new T(t,e),e="")),o(this,n,t,e,!1)},r.prototype.unshift=function(t){var e=this._readableState;return o(this,e,t,"",!0)},r.prototype.setEncoding=function(t){return L||(L=n(108).StringDecoder),this._readableState.decoder=new L(t),this._readableState.encoding=t,this};var R=8388608;r.prototype.read=function(t){O("read",t);var e=this._readableState,n=t;if((!I.isNumber(t)||t>0)&&(e.emittedReadable=!1),0===t&&e.needReadable&&(e.length>=e.highWaterMark||e.ended))return O("read: emitReadable",e.length,e.ended),0===e.length&&e.ended?E(this):l(this),null;if(t=u(t,e),0===t&&e.ended)return 0===e.length&&E(this),null;var i=e.needReadable;O("need readable",i),(0===e.length||e.length-t<e.highWaterMark)&&(i=!0,O("length less than watermark",i)),(e.ended||e.reading)&&(i=!1,O("reading or ended",i)),i&&(O("do read"),e.reading=!0,e.sync=!0,0===e.length&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1),i&&!e.reading&&(t=u(n,e));var r;return r=t>0?v(t,e):null,I.isNull(r)&&(e.needReadable=!0,t=0),e.length-=t,0!==e.length||e.ended||(e.needReadable=!0),n!==t&&e.ended&&0===e.length&&E(this),I.isNull(r)||this.emit("data",r),r},r.prototype._read=function(t){this.emit("error",new Error("not implemented"))},r.prototype.pipe=function(t,n){function i(t){O("onunpipe"),t===l&&o()}function r(){O("onend"),t.end()}function o(){O("cleanup"),t.removeListener("close",u),t.removeListener("finish",h),t.removeListener("drain",_),t.removeListener("error",a),t.removeListener("unpipe",i),l.removeListener("end",r),l.removeListener("end",o),l.removeListener("data",s),!f.awaitDrain||t._writableState&&!t._writableState.needDrain||_()}function s(e){O("ondata");var n=t.write(e);!1===n&&(O("false write response, pause",l._readableState.awaitDrain),l._readableState.awaitDrain++,l.pause())}function a(e){O("onerror",e),c(),t.removeListener("error",a),0===b.listenerCount(t,"error")&&t.emit("error",e)}function u(){t.removeListener("finish",h),c()}function h(){O("onfinish"),t.removeListener("close",u),c()}function c(){O("unpipe"),l.unpipe(t)}var l=this,f=this._readableState;switch(f.pipesCount){case 0:f.pipes=t;break;case 1:f.pipes=[f.pipes,t];break;default:f.pipes.push(t)}f.pipesCount+=1,O("pipe count=%d opts=%j",f.pipesCount,n);var d=(!n||n.end!==!1)&&t!==e.stdout&&t!==e.stderr,p=d?r:o;f.endEmitted?e.nextTick(p):l.once("end",p),t.on("unpipe",i);var _=g(l);return t.on("drain",_),l.on("data",s),t._events&&t._events.error?w(t._events.error)?t._events.error.unshift(a):t._events.error=[a,t._events.error]:t.on("error",a),t.once("close",u),t.once("finish",h),t.emit("pipe",l),f.flowing||(O("pipe resume"),l.resume()),t},r.prototype.unpipe=function(t){var e=this._readableState;if(0===e.pipesCount)return this;if(1===e.pipesCount)return t&&t!==e.pipes?this:(t||(t=e.pipes),e.pipes=null,e.pipesCount=0,e.flowing=!1,t&&t.emit("unpipe",this),this);if(!t){var n=e.pipes,i=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=!1;for(var r=0;i>r;r++)n[r].emit("unpipe",this);return this}var r=A(e.pipes,t);return-1===r?this:(e.pipes.splice(r,1),e.pipesCount-=1,1===e.pipesCount&&(e.pipes=e.pipes[0]),t.emit("unpipe",this),this)},r.prototype.on=function(t,n){var i=P.prototype.on.call(this,t,n);if("data"===t&&!1!==this._readableState.flowing&&this.resume(),"readable"===t&&this.readable){var r=this._readableState;if(!r.readableListening)if(r.readableListening=!0,r.emittedReadable=!1,r.needReadable=!0,r.reading)r.length&&l(this,r);else{var o=this;e.nextTick(function(){O("readable nexttick read 0"),o.read(0)})}}return i},r.prototype.addListener=r.prototype.on,r.prototype.resume=function(){var t=this._readableState;return t.flowing||(O("resume"),t.flowing=!0,t.reading||(O("resume read 0"),this.read(0)),_(this,t)),this},r.prototype.pause=function(){return O("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(O("pause"),this._readableState.flowing=!1,this.emit("pause")),this},r.prototype.wrap=function(t){var e=this._readableState,n=!1,i=this;t.on("end",function(){if(O("wrapped end"),e.decoder&&!e.ended){var t=e.decoder.end();t&&t.length&&i.push(t)}i.push(null)}),t.on("data",function(r){if(O("wrapped data"),e.decoder&&(r=e.decoder.write(r)),r&&(e.objectMode||r.length)){var o=i.push(r);o||(n=!0,t.pause())}});for(var r in t)I.isFunction(t[r])&&I.isUndefined(this[r])&&(this[r]=function(e){return function(){return t[e].apply(t,arguments)}}(r));var o=["error","close","destroy","pause","resume"];return S(o,function(e){t.on(e,i.emit.bind(i,e))}),i._read=function(e){O("wrapped _read",e),n&&(n=!1,t.resume())},i},r._fromList=v}).call(e,n(101))},function(t,e){function n(){h=!1,s.length?u=s.concat(u):c=-1,u.length&&i()}function i(){if(!h){var t=setTimeout(n);h=!0;for(var e=u.length;e;){for(s=u,u=[];++c<e;)s&&s[c].run();c=-1,e=u.length}s=null,h=!1,clearTimeout(t)}}function r(t,e){this.fun=t,this.array=e}function o(){}var s,a=t.exports={},u=[],h=!1,c=-1;a.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];u.push(new r(t,e)),1!==u.length||h||setTimeout(i,0)},r.prototype.run=function(){this.fun.apply(null,this.array)},a.title="browser",a.browser=!0,a.env={},a.argv=[],a.version="",a.versions={},a.on=o,a.addListener=o,a.once=o,a.off=o,a.removeListener=o,a.removeAllListeners=o,a.emit=o,a.binding=function(t){throw new Error("process.binding is not supported")},a.cwd=function(){return"/"},a.chdir=function(t){throw new Error("process.chdir is not supported")},a.umask=function(){return 0}},function(t,e){t.exports=Array.isArray||function(t){return"[object Array]"==Object.prototype.toString.call(t)}},function(t,e,n){(function(t){function n(t){return Array.isArray?Array.isArray(t):"[object Array]"===_(t)}function i(t){return"boolean"==typeof t}function r(t){return null===t}function o(t){return null==t}function s(t){return"number"==typeof t}function a(t){return"string"==typeof t}function u(t){return"symbol"==typeof t}function h(t){return void 0===t}function c(t){return"[object RegExp]"===_(t)}function l(t){return"object"==typeof t&&null!==t}function f(t){return"[object Date]"===_(t)}function d(t){return"[object Error]"===_(t)||t instanceof Error}function p(t){return"function"==typeof t}function g(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||"undefined"==typeof t}function _(t){return Object.prototype.toString.call(t)}e.isArray=n,e.isBoolean=i,e.isNull=r,e.isNullOrUndefined=o,e.isNumber=s,e.isString=a,e.isSymbol=u,e.isUndefined=h,e.isRegExp=c,e.isObject=l,e.isDate=f,e.isError=d,e.isFunction=p,e.isPrimitive=g,e.isBuffer=t.isBuffer}).call(e,n(70).Buffer)},98,function(t,e){},function(t,e,n){(function(e){function i(t){return this instanceof i?(u.call(this,t),h.call(this,t),t&&t.readable===!1&&(this.readable=!1),t&&t.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,t&&t.allowHalfOpen===!1&&(this.allowHalfOpen=!1),void this.once("end",r)):new i(t)}function r(){this.allowHalfOpen||this._writableState.ended||e.nextTick(this.end.bind(this))}function o(t,e){for(var n=0,i=t.length;i>n;n++)e(t[n],n)}t.exports=i;var s=Object.keys||function(t){var e=[];for(var n in t)e.push(n);return e},a=n(103);a.inherits=n(104);var u=n(100),h=n(107);a.inherits(i,u),o(s(h.prototype),function(t){i.prototype[t]||(i.prototype[t]=h.prototype[t])})}).call(e,n(101))},function(t,e,n){(function(e){function i(t,e,n){this.chunk=t,this.encoding=e,this.callback=n}function r(t,e){var i=n(106);t=t||{};var r=t.highWaterMark,o=t.objectMode?16:16384;this.highWaterMark=r||0===r?r:o,this.objectMode=!!t.objectMode,e instanceof i&&(this.objectMode=this.objectMode||!!t.writableObjectMode),this.highWaterMark=~~this.highWaterMark,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;var s=t.decodeStrings===!1;this.decodeStrings=!s,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(t){d(e,t)},this.writecb=null,this.writelen=0,this.buffer=[],this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1}function o(t){var e=n(106);return this instanceof o||this instanceof e?(this._writableState=new r(t,this),this.writable=!0,void w.call(this)):new o(t)}function s(t,n,i){var r=new Error("write after end");
t.emit("error",r),e.nextTick(function(){i(r)})}function a(t,n,i,r){var o=!0;if(!(A.isBuffer(i)||A.isString(i)||A.isNullOrUndefined(i)||n.objectMode)){var s=new TypeError("Invalid non-string/buffer chunk");t.emit("error",s),e.nextTick(function(){r(s)}),o=!1}return o}function u(t,e,n){return!t.objectMode&&t.decodeStrings!==!1&&A.isString(e)&&(e=new S(e,n)),e}function h(t,e,n,r,o){n=u(e,n,r),A.isBuffer(n)&&(r="buffer");var s=e.objectMode?1:n.length;e.length+=s;var a=e.length<e.highWaterMark;return a||(e.needDrain=!0),e.writing||e.corked?e.buffer.push(new i(n,r,o)):c(t,e,!1,s,n,r,o),a}function c(t,e,n,i,r,o,s){e.writelen=i,e.writecb=s,e.writing=!0,e.sync=!0,n?t._writev(r,e.onwrite):t._write(r,o,e.onwrite),e.sync=!1}function l(t,n,i,r,o){i?e.nextTick(function(){n.pendingcb--,o(r)}):(n.pendingcb--,o(r)),t._writableState.errorEmitted=!0,t.emit("error",r)}function f(t){t.writing=!1,t.writecb=null,t.length-=t.writelen,t.writelen=0}function d(t,n){var i=t._writableState,r=i.sync,o=i.writecb;if(f(i),n)l(t,i,r,n,o);else{var s=m(t,i);s||i.corked||i.bufferProcessing||!i.buffer.length||_(t,i),r?e.nextTick(function(){p(t,i,s,o)}):p(t,i,s,o)}}function p(t,e,n,i){n||g(t,e),e.pendingcb--,i(),v(t,e)}function g(t,e){0===e.length&&e.needDrain&&(e.needDrain=!1,t.emit("drain"))}function _(t,e){if(e.bufferProcessing=!0,t._writev&&e.buffer.length>1){for(var n=[],i=0;i<e.buffer.length;i++)n.push(e.buffer[i].callback);e.pendingcb++,c(t,e,!0,e.length,e.buffer,"",function(t){for(var i=0;i<n.length;i++)e.pendingcb--,n[i](t)}),e.buffer=[]}else{for(var i=0;i<e.buffer.length;i++){var r=e.buffer[i],o=r.chunk,s=r.encoding,a=r.callback,u=e.objectMode?1:o.length;if(c(t,e,!1,u,o,s,a),e.writing){i++;break}}i<e.buffer.length?e.buffer=e.buffer.slice(i):e.buffer.length=0}e.bufferProcessing=!1}function m(t,e){return e.ending&&0===e.length&&!e.finished&&!e.writing}function y(t,e){e.prefinished||(e.prefinished=!0,t.emit("prefinish"))}function v(t,e){var n=m(t,e);return n&&(0===e.pendingcb?(y(t,e),e.finished=!0,t.emit("finish")):y(t,e)),n}function E(t,n,i){n.ending=!0,v(t,n),i&&(n.finished?e.nextTick(i):t.once("finish",i)),n.ended=!0}t.exports=o;var S=n(70).Buffer;o.WritableState=r;var A=n(103);A.inherits=n(104);var w=n(97);A.inherits(o,w),o.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe. Not readable."))},o.prototype.write=function(t,e,n){var i=this._writableState,r=!1;return A.isFunction(e)&&(n=e,e=null),A.isBuffer(t)?e="buffer":e||(e=i.defaultEncoding),A.isFunction(n)||(n=function(){}),i.ended?s(this,i,n):a(this,i,t,n)&&(i.pendingcb++,r=h(this,i,t,e,n)),r},o.prototype.cork=function(){var t=this._writableState;t.corked++},o.prototype.uncork=function(){var t=this._writableState;t.corked&&(t.corked--,t.writing||t.corked||t.finished||t.bufferProcessing||!t.buffer.length||_(this,t))},o.prototype._write=function(t,e,n){n(new Error("not implemented"))},o.prototype._writev=null,o.prototype.end=function(t,e,n){var i=this._writableState;A.isFunction(t)?(n=t,t=null,e=null):A.isFunction(e)&&(n=e,e=null),A.isNullOrUndefined(t)||this.write(t,e),i.corked&&(i.corked=1,this.uncork()),i.ending||i.finished||E(this,i,n)}}).call(e,n(101))},function(t,e,n){function i(t){if(t&&!u(t))throw new Error("Unknown encoding: "+t)}function r(t){return t.toString(this.encoding)}function o(t){this.charReceived=t.length%2,this.charLength=this.charReceived?2:0}function s(t){this.charReceived=t.length%3,this.charLength=this.charReceived?3:0}var a=n(70).Buffer,u=a.isEncoding||function(t){switch(t&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}},h=e.StringDecoder=function(t){switch(this.encoding=(t||"utf8").toLowerCase().replace(/[-_]/,""),i(t),this.encoding){case"utf8":this.surrogateSize=3;break;case"ucs2":case"utf16le":this.surrogateSize=2,this.detectIncompleteChar=o;break;case"base64":this.surrogateSize=3,this.detectIncompleteChar=s;break;default:return void(this.write=r)}this.charBuffer=new a(6),this.charReceived=0,this.charLength=0};h.prototype.write=function(t){for(var e="";this.charLength;){var n=t.length>=this.charLength-this.charReceived?this.charLength-this.charReceived:t.length;if(t.copy(this.charBuffer,this.charReceived,0,n),this.charReceived+=n,this.charReceived<this.charLength)return"";t=t.slice(n,t.length),e=this.charBuffer.slice(0,this.charLength).toString(this.encoding);var i=e.charCodeAt(e.length-1);if(!(i>=55296&&56319>=i)){if(this.charReceived=this.charLength=0,0===t.length)return e;break}this.charLength+=this.surrogateSize,e=""}this.detectIncompleteChar(t);var r=t.length;this.charLength&&(t.copy(this.charBuffer,0,t.length-this.charReceived,r),r-=this.charReceived),e+=t.toString(this.encoding,0,r);var r=e.length-1,i=e.charCodeAt(r);if(i>=55296&&56319>=i){var o=this.surrogateSize;return this.charLength+=o,this.charReceived+=o,this.charBuffer.copy(this.charBuffer,o,0,o),t.copy(this.charBuffer,0,0,o),e.substring(0,r)}return e},h.prototype.detectIncompleteChar=function(t){for(var e=t.length>=3?3:t.length;e>0;e--){var n=t[t.length-e];if(1==e&&n>>5==6){this.charLength=2;break}if(2>=e&&n>>4==14){this.charLength=3;break}if(3>=e&&n>>3==30){this.charLength=4;break}}this.charReceived=e},h.prototype.end=function(t){var e="";if(t&&t.length&&(e=this.write(t)),this.charReceived){var n=this.charReceived,i=this.charBuffer,r=this.encoding;e+=i.slice(0,n).toString(r)}return e}},function(t,e,n){function i(t,e){this.afterTransform=function(t,n){return r(e,t,n)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null}function r(t,e,n){var i=t._transformState;i.transforming=!1;var r=i.writecb;if(!r)return t.emit("error",new Error("no writecb in Transform class"));i.writechunk=null,i.writecb=null,u.isNullOrUndefined(n)||t.push(n),r&&r(e);var o=t._readableState;o.reading=!1,(o.needReadable||o.length<o.highWaterMark)&&t._read(o.highWaterMark)}function o(t){if(!(this instanceof o))return new o(t);a.call(this,t),this._transformState=new i(t,this);var e=this;this._readableState.needReadable=!0,this._readableState.sync=!1,this.once("prefinish",function(){u.isFunction(this._flush)?this._flush(function(t){s(e,t)}):s(e)})}function s(t,e){if(e)return t.emit("error",e);var n=t._writableState,i=t._transformState;if(n.length)throw new Error("calling transform done when ws.length != 0");if(i.transforming)throw new Error("calling transform done when still transforming");return t.push(null)}t.exports=o;var a=n(106),u=n(103);u.inherits=n(104),u.inherits(o,a),o.prototype.push=function(t,e){return this._transformState.needTransform=!1,a.prototype.push.call(this,t,e)},o.prototype._transform=function(t,e,n){throw new Error("not implemented")},o.prototype._write=function(t,e,n){var i=this._transformState;if(i.writecb=n,i.writechunk=t,i.writeencoding=e,!i.transforming){var r=this._readableState;(i.needTransform||r.needReadable||r.length<r.highWaterMark)&&this._read(r.highWaterMark)}},o.prototype._read=function(t){var e=this._transformState;u.isNull(e.writechunk)||!e.writecb||e.transforming?e.needTransform=!0:(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform))}},function(t,e,n){function i(t){return this instanceof i?void r.call(this,t):new i(t)}t.exports=i;var r=n(109),o=n(103);o.inherits=n(104),o.inherits(i,r),i.prototype._transform=function(t,e,n){n(null,t)}},function(t,e,n){t.exports=n(107)},function(t,e,n){t.exports=n(106)},function(t,e,n){t.exports=n(109)},function(t,e,n){t.exports=n(110)},function(t,e,n){(function(e){var i,r=n(74),o=n(69),s=(o.BaseTransform,o.BaseParser),a=n(116);t.exports=i=function(t,e){o.BaseParser.prototype.constructor.apply(this,arguments),t||(t={audioTrackId:-1,videoTrackId:-1,tracks:[]}),this.muxer=new a(t),this.muxer.ondata=this._onMp4Data.bind(this),this.muxer.oncodecinfo=this._onCodecInfo.bind(this),this._codecInfo=null,this._timestamp=0,e&&(this.worker="undefined"!=typeof Worker?new Worker("/dist/mp4-mux-worker-bundle.js"):null),this.worker&&(this.worker.onmessage=function(t){this._onMp4Data(t.data)}.bind(this),this.worker.postMessage({mp4MuxProfile:t}))},i.Profiles=a.Profiles,i.prototype=o.createBaseParser({constructor:i,_onMp4Data:function(t){r("_onMp4Data"),this.enqueue(new o.Transfer(new e(t),"buffer"))},_onCodecInfo:function(t){r("Codec info: "+t),this._codecInfo=t},_onFinish:function(t){r("MP4Mux._onFinish"),this.worker?this.worker.postMessage({eos:!0}):this.muxer&&this.muxer.flush(),s.prototype._onFinish.call(this,t)},_parse:function(t){var e;t.data&&(e=this._timestamp=t.data.timestamp),t.data.flush&&(this._needFlush=!0),r("UnitMP4Mux Timestamp: "+this._timestamp),r("UnitMP4Mux._parse: Payload type: "+typeof t.data),this.worker?(t.data.empty||this.worker.postMessage({data:t.data,meta:t.data.meta,timestamp:e,packetType:a.TYPE_AUDIO_PACKET}),this._needFlush&&(this.worker.postMessage({eos:!0}),this._needFlush=!1)):this.muxer&&(t.data.empty||this.muxer.pushPacket(a.TYPE_AUDIO_PACKET,new Uint8Array(t.data),e,t.data.meta),this._needFlush&&(this.muxer.flush(),this._needFlush=!1))}})}).call(e,n(70).Buffer)},function(t,e,n){function i(t){for(var e=t.length>>1,n=new Uint8Array(e),i=0;e>i;i++)n[i]=parseInt(t.substr(2*i,2),16);return n}function r(t,e){var n,i=0,r=s.RAW;switch(e.codecId){case l:var o=t[i++];r=o,n=1024;break;case c:var u=t[i+1]>>3&3,f=t[i+1]>>1&3;n=1===f?3===u?1152:576:3===f?384:1152}return info={codecDescription:h[e.codecId],codecId:e.codecId,data:t.subarray(i),rate:e.sampleRate,size:e.sampleSize,channels:e.channels,samples:n,packetType:r},a("parsed audio packet with %d samples",n),info}function o(t){var e=0,n=t[e]>>4,i=15&t[e];e++;var r={frameType:n,codecId:i,codecDescription:d[i]};switch(i){case g:var o=t[e++];r.packetType=o,r.compositionTime=(t[e]<<24|t[e+1]<<16|t[e+2]<<8)>>8,e+=3;break;case p:r.packetType=_.NALU,r.horizontalOffset=t[e]>>4&15,r.verticalOffset=15&t[e],r.compositionTime=0,e++}return r.data=t.subarray(e),r}var s,a=n(74),u=n(117),h=["PCM","ADPCM","MP3","PCM le","Nellymouser16","Nellymouser8","Nellymouser","G.711 A-law","G.711 mu-law",null,"AAC","Speex","MP3 8khz"],c=2,l=10;!function(t){t[t.HEADER=0]="HEADER",t[t.RAW=1]="RAW"}(s||(s={}));var f,d=[null,"JPEG","Sorenson","Screen","VP6","VP6 alpha","Screen2","AVC"],p=4,g=7;!function(t){t[t.KEY=1]="KEY",t[t.INNER=2]="INNER",t[t.DISPOSABLE=3]="DISPOSABLE",t[t.GENERATED=4]="GENERATED",t[t.INFO=5]="INFO"}(f||(f={}));var _;!function(t){t[t.HEADER=0]="HEADER",t[t.NALU=1]="NALU",t[t.END=2]="END"}(_||(_={}));var m,y=8,v=9,E=!0;!function(t){t[t.CAN_GENERATE_HEADER=0]="CAN_GENERATE_HEADER",t[t.NEED_HEADER_DATA=1]="NEED_HEADER_DATA",t[t.MAIN_PACKETS=2]="MAIN_PACKETS"}(m||(m={}));var S=function(){function t(t){var e=this;this.oncodecinfo=function(t){throw new Error("MP4Mux.oncodecinfo is not set")},this.ondata=function(t){throw new Error("MP4Mux.ondata is not set")},this.metadata=t,this.trackStates=this.metadata.tracks.map(function(t,n){var i={trackId:n+1,trackInfo:t,cachedDuration:0,samplesProcessed:0,initializationData:[]};return e.metadata.audioTrackId===n&&(e.audioTrackState=i),e.metadata.videoTrackId===n&&(e.videoTrackState=i),i},this),this._checkIfNeedHeaderData(),this.filePos=0,this.cachedPackets=[],this.chunkIndex=0}return t.prototype.pushPacket=function(t,e,n,i){switch(this.state===m.CAN_GENERATE_HEADER&&this._tryGenerateHeader(),t){case y:var a=this.audioTrackState,u=r(e,i);if(!a||a.trackInfo.codecId!==u.codecId)throw new Error("Unexpected audio packet codec: "+u.codecDescription);switch(u.codecId){default:throw new Error("Unsupported audio codec: "+u.codecDescription);case c:break;case l:if(u.packetType===s.HEADER)return void a.initializationData.push(u.data)}this.cachedPackets.push({packet:u,timestamp:n,trackId:a.trackId});break;case v:var h=this.videoTrackState,f=o(e);if(!h||h.trackInfo.codecId!==f.codecId)throw new Error("Unexpected video packet codec: "+f.codecDescription);switch(f.codecId){default:throw new Error("unsupported video codec: "+f.codecDescription);case p:break;case g:if(f.packetType===_.HEADER)return void h.initializationData.push(f.data)}this.cachedPackets.push({packet:f,timestamp:n,trackId:h.trackId});break;default:throw new Error("unknown packet type: "+t)}this.state===m.NEED_HEADER_DATA&&this._tryGenerateHeader()},t.prototype.flush=function(){this.cachedPackets.length>0&&this._chunk()},t.prototype._checkIfNeedHeaderData=function(){this.trackStates.some(function(t){return t.trackInfo.codecId===l||t.trackInfo.codecId===g})?this.state=m.NEED_HEADER_DATA:this.state=m.CAN_GENERATE_HEADER},t.prototype._tryGenerateHeader=function(){var t=this.trackStates.every(function(t){switch(t.trackInfo.codecId){case l:case g:return t.initializationData.length>0;default:return!0}});if(t){for(var e=["isom"],n=1,r=1,o=[],s=0;s<this.trackStates.length;s++){var a,h=this.trackStates[s],f=h.trackInfo;switch(f.codecId){case l:var d=h.initializationData[0];a=new u.AudioSampleEntry("mp4a",n,f.channels,f.samplesize,f.samplerate);var _=new Uint8Array(41+d.length);_.set(i("0000000003808080"),0),_[8]=32+d.length,_.set(i("00020004808080"),9),_[16]=18+d.length,_.set(i("40150000000000FA000000000005808080"),17),_[34]=d.length,_.set(d,35),_.set(i("068080800102"),35+d.length),a.otherBoxes=[new u.RawTag("esds",_)];var y=d[0]>>3;h.mimeTypeCodec="mp4a.40."+y;break;case c:a=new u.AudioSampleEntry(".mp3",n,f.channels,f.samplesize,f.samplerate),h.mimeTypeCodec="mp3";break;case g:var v=h.initializationData[0];a=new u.VideoSampleEntry("avc1",r,f.width,f.height),a.otherBoxes=[new u.RawTag("avcC",v)];var E=v[1]<<16|v[2]<<8|v[3];h.mimeTypeCodec="avc1."+(16777216|E).toString(16).substr(1),e.push("iso2","avc1","mp41");break;case p:a=new u.VideoSampleEntry("VP6F",r,f.width,f.height),a.otherBoxes=[new u.RawTag("glbl",i("00"))],h.mimeTypeCodec="avc1.42001E";break;default:throw new Error("not supported track type")}var S,A=u.TrackHeaderFlags.TRACK_ENABLED|u.TrackHeaderFlags.TRACK_IN_MOVIE;h===this.audioTrackState?S=new u.TrackBox(new u.TrackHeaderBox(A,h.trackId,-1,0,0,1,s),new u.MediaBox(new u.MediaHeaderBox(f.timescale,-1,f.language),new u.HandlerBox("soun","SoundHandler"),new u.MediaInformationBox(new u.SoundMediaHeaderBox,new u.DataInformationBox(new u.DataReferenceBox([new u.DataEntryUrlBox(u.SELF_CONTAINED_DATA_REFERENCE_FLAG)])),new u.SampleTableBox(new u.SampleDescriptionBox([a]),new u.RawTag("stts",i("0000000000000000")),new u.RawTag("stsc",i("0000000000000000")),new u.RawTag("stsz",i("000000000000000000000000")),new u.RawTag("stco",i("0000000000000000")))))):h===this.videoTrackState&&(S=new u.TrackBox(new u.TrackHeaderBox(A,h.trackId,-1,f.width,f.height,0,s),new u.MediaBox(new u.MediaHeaderBox(f.timescale,-1,f.language),new u.HandlerBox("vide","VideoHandler"),new u.MediaInformationBox(new u.VideoMediaHeaderBox,new u.DataInformationBox(new u.DataReferenceBox([new u.DataEntryUrlBox(u.SELF_CONTAINED_DATA_REFERENCE_FLAG)])),new u.SampleTableBox(new u.SampleDescriptionBox([a]),new u.RawTag("stts",i("0000000000000000")),new u.RawTag("stsc",i("0000000000000000")),new u.RawTag("stsz",i("000000000000000000000000")),new u.RawTag("stco",i("0000000000000000"))))))),o.push(S)}var w=new u.MovieExtendsBox(null,[new u.TrackExtendsBox(1,1,0,0,0),new u.TrackExtendsBox(2,1,0,0,0)],null),T=new u.BoxContainerBox("udat",[new u.MetaBox(new u.RawTag("hdlr",i("00000000000000006D6469726170706C000000000000000000")),[new u.RawTag("ilst",i("00000025A9746F6F0000001D6461746100000001000000004C61766635342E36332E313034"))])]),b=new u.MovieHeaderBox(1e3,0,this.trackStates.length+1),P=new u.MovieBox(b,o,w,T),I=new u.FileTypeBox("isom",512,e),L=I.layout(0),O=P.layout(L),R=new Uint8Array(L+O);I.write(R),P.write(R),this.oncodecinfo(this.trackStates.map(function(t){return t.mimeTypeCodec})),this.ondata(R),this.filePos+=R.length,this.state=m.MAIN_PACKETS}},t.prototype._chunk=function(){var t=this.cachedPackets;if(E&&this.videoTrackState){for(var e=t.length-1,n=this.videoTrackState.trackId;e>0&&(t[e].trackId!==n||t[e].packet.frameType!==f.KEY);)e--;e>0&&(t=t.slice(0,e))}if(0!==t.length){for(var i=[],r=0,o=[],s=[],a=0;a<this.trackStates.length;a++){var h=this.trackStates[a],d=h.trackInfo,_=h.trackId,m=t.filter(function(t){return t.trackId===_});if(0!==m.length){var y,v,S,A=new u.TrackFragmentBaseMediaDecodeTimeBox(h.cachedDuration);switch(s.push(r),d.codecId){case l:case c:S=[];for(var e=0;e<m.length;e++){var w=m[e].packet,T=Math.round(w.samples*d.timescale/d.samplerate);i.push(w.data),r+=w.data.length,S.push({duration:T,size:w.data.length}),h.samplesProcessed+=w.samples}var b=u.TrackFragmentFlags.DEFAULT_SAMPLE_FLAGS_PRESENT;y=new u.TrackFragmentHeaderBox(b,_,0,0,0,0,u.SampleFlags.SAMPLE_DEPENDS_ON_NO_OTHERS);var P=u.TrackRunFlags.DATA_OFFSET_PRESENT|u.TrackRunFlags.SAMPLE_DURATION_PRESENT|u.TrackRunFlags.SAMPLE_SIZE_PRESENT;v=new u.TrackRunBox(P,S,0,0),h.cachedDuration=Math.round(h.samplesProcessed*d.timescale/d.samplerate);break;case g:case p:S=[];for(var I=h.samplesProcessed,L=I*d.timescale/d.framerate,O=Math.round(L),e=0;e<m.length;e++){var R=m[e].packet;I++;var D=Math.round(I*d.timescale/d.framerate),M=D-O;O=D;var k=Math.round(I*d.timescale/d.framerate+R.compositionTime*d.timescale/1e3);i.push(R.data),r+=R.data.length;var N=R.frameType===f.KEY?u.SampleFlags.SAMPLE_DEPENDS_ON_NO_OTHERS:u.SampleFlags.SAMPLE_DEPENDS_ON_OTHER|u.SampleFlags.SAMPLE_IS_NOT_SYNC;S.push({duration:M,size:R.data.length,flags:N,compositionTimeOffset:k-D})}var b=u.TrackFragmentFlags.DEFAULT_SAMPLE_FLAGS_PRESENT;y=new u.TrackFragmentHeaderBox(b,_,0,0,0,0,u.SampleFlags.SAMPLE_DEPENDS_ON_NO_OTHERS);var P=u.TrackRunFlags.DATA_OFFSET_PRESENT|u.TrackRunFlags.SAMPLE_DURATION_PRESENT|u.TrackRunFlags.SAMPLE_SIZE_PRESENT|u.TrackRunFlags.SAMPLE_FLAGS_PRESENT|u.TrackRunFlags.SAMPLE_COMPOSITION_TIME_OFFSET;v=new u.TrackRunBox(P,S,0,0),h.cachedDuration=O,h.samplesProcessed=I;break;default:throw new Error("Un codec")}var x=new u.TrackFragmentBox(y,A,v);o.push(x)}}this.cachedPackets.splice(0,t.length);for(var C=new u.MovieFragmentHeaderBox(++this.chunkIndex),F=new u.MovieFragmentBox(C,o),U=F.layout(0),B=new u.MediaDataBox(i),H=B.layout(U),j=U+8,a=0;a<o.length;a++)o[a].run.dataOffset=j+s[a];var G=new Uint8Array(U+H);F.write(G),B.write(G),this.ondata(G),this.filePos+=G.length}},t}();t.exports=S,S.MP3_SOUND_CODEC_ID=c,S.AAC_SOUND_CODEC_ID=l,S.TYPE_AUDIO_PACKET=y,S.TYPE_VIDEO_PACKET=v,S.Profiles={MP3_AUDIO_ONLY:{audioTrackId:0,videoTrackId:-1,tracks:[{codecId:S.MP3_SOUND_CODEC_ID,channels:2,samplerate:44100,samplesize:16,timescale:44100}]}}},function(t,e){function n(t){for(var e=new Uint8Array(4*t.length),n=0,i=0,r=t.length;r>i;i++){var o=t.charCodeAt(i);if(127>=o)e[n++]=o;else{if(o>=55296&&56319>=o){var s=t.charCodeAt(i+1);s>=56320&&57343>=s&&(o=((1023&o)<<10)+(1023&s)+65536,++i)}0!==(4292870144&o)?(e[n++]=248|o>>>24&3,e[n++]=128|o>>>18&63,e[n++]=128|o>>>12&63,e[n++]=128|o>>>6&63,e[n++]=128|63&o):0!==(4294901760&o)?(e[n++]=240|o>>>18&7,e[n++]=128|o>>>12&63,e[n++]=128|o>>>6&63,e[n++]=128|63&o):0!==(4294965248&o)?(e[n++]=224|o>>>12&15,e[n++]=128|o>>>6&63,e[n++]=128|63&o):(e[n++]=192|o>>>6&31,e[n++]=128|63&o)}}return e.subarray(0,n)}function i(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return Array.prototype.concat.apply(t,e)}function r(t,e,n){t[e]=n>>24&255,t[e+1]=n>>16&255,t[e+2]=n>>8&255,t[e+3]=255&n}function o(t){return t.charCodeAt(0)<<24|t.charCodeAt(1)<<16|t.charCodeAt(2)<<8|t.charCodeAt(3)}function s(t){return(t-d)/1e3|0}function a(t){return 65536*t|0}function u(t){return 1073741824*t|0}function h(t){return 256*t|0}function c(t){return(31&t.charCodeAt(0))<<10|(31&t.charCodeAt(1))<<5|31&t.charCodeAt(2)}var l,f=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)};t.exports=l={};var d=-20828448e5,p=[1,0,0,0,1,0,0,0,1],g=[0,0,0],_=function(){function t(t,e){this.boxtype=t,"uuid"===t&&(this.userType=e)}return t.prototype.layout=function(t){this.offset=t;var e=8;return this.userType&&(e+=16),this.size=e,e},t.prototype.write=function(t){return r(t,this.offset,this.size),r(t,this.offset+4,o(this.boxtype)),this.userType?(t.set(this.userType,this.offset+8),24):8},t.prototype.toUint8Array=function(){var t=this.layout(0),e=new Uint8Array(t);return this.write(e),e},t}();l.Box=_;var m=function(t){function e(e,n,i){void 0===n&&(n=0),void 0===i&&(i=0),t.call(this,e),this.version=n,this.flags=i}return f(e,t),e.prototype.layout=function(e){return this.size=t.prototype.layout.call(this,e)+4,this.size},e.prototype.write=function(e){var n=t.prototype.write.call(this,e);return r(e,this.offset+n,this.version<<24|this.flags),n+4},e}(_);l.FullBox=m;var y=function(t){function e(e,n,i){t.call(this,"ftype"),this.majorBrand=e,this.minorVersion=n,this.compatibleBrands=i}return f(e,t),e.prototype.layout=function(e){return this.size=t.prototype.layout.call(this,e)+4*(2+this.compatibleBrands.length),this.size},e.prototype.write=function(e){var n=this,i=t.prototype.write.call(this,e);return r(e,this.offset+i,o(this.majorBrand)),r(e,this.offset+i+4,this.minorVersion),i+=8,this.compatibleBrands.forEach(function(t){r(e,n.offset+i,o(t)),i+=4},this),i},e}(_);l.FileTypeBox=y;var v=function(t){function e(e,n){t.call(this,e),this.children=n}return f(e,t),e.prototype.layout=function(e){var n=t.prototype.layout.call(this,e);return this.children.forEach(function(t){t&&(n+=t.layout(e+n))}),this.size=n},e.prototype.write=function(e){var n=t.prototype.write.call(this,e);return this.children.forEach(function(t){t&&(n+=t.write(e))}),n},e}(_);l.BoxContainerBox=v;var E=function(t){function e(e,n,r,o){t.call(this,"moov",i([e],n,[r,o])),this.header=e,this.tracks=n,this.extendsBox=r,this.userData=o}return f(e,t),e}(v);l.MovieBox=E;var S=function(t){function e(e,n,i,r,o,s,a,u){void 0===r&&(r=1),void 0===o&&(o=1),void 0===s&&(s=p),void 0===a&&(a=d),void 0===u&&(u=d),t.call(this,"mvhd",0,0),this.timescale=e,this.duration=n,this.nextTrackId=i,this.rate=r,this.volume=o,this.matrix=s,this.creationTime=a,this.modificationTime=u}return f(e,t),e.prototype.layout=function(e){return this.size=t.prototype.layout.call(this,e)+16+4+2+2+8+36+24+4,this.size},e.prototype.write=function(e){var n=t.prototype.write.call(this,e);return r(e,this.offset+n,s(this.creationTime)),r(e,this.offset+n+4,s(this.modificationTime)),r(e,this.offset+n+8,this.timescale),r(e,this.offset+n+12,this.duration),n+=16,r(e,this.offset+n,a(this.rate)),r(e,this.offset+n+4,h(this.volume)<<16),r(e,this.offset+n+8,0),r(e,this.offset+n+12,0),n+=16,r(e,this.offset+n,a(this.matrix[0])),r(e,this.offset+n+4,a(this.matrix[1])),r(e,this.offset+n+8,a(this.matrix[2])),r(e,this.offset+n+12,a(this.matrix[3])),r(e,this.offset+n+16,a(this.matrix[4])),r(e,this.offset+n+20,a(this.matrix[5])),r(e,this.offset+n+24,u(this.matrix[6])),r(e,this.offset+n+28,u(this.matrix[7])),r(e,this.offset+n+32,u(this.matrix[8])),n+=36,r(e,this.offset+n,0),r(e,this.offset+n+4,0),r(e,this.offset+n+8,0),r(e,this.offset+n+12,0),r(e,this.offset+n+16,0),r(e,this.offset+n+20,0),n+=24,r(e,this.offset+n,this.nextTrackId),n+=4},e}(m);l.MovieHeaderBox=S,function(t){t[t.TRACK_ENABLED=1]="TRACK_ENABLED",t[t.TRACK_IN_MOVIE=2]="TRACK_IN_MOVIE",t[t.TRACK_IN_PREVIEW=4]="TRACK_IN_PREVIEW"}(l.TrackHeaderFlags||(l.TrackHeaderFlags={}));var A=(l.TrackHeaderFlags,function(t){function e(e,n,i,r,o,s,a,u,h,c,l){void 0===a&&(a=0),void 0===u&&(u=0),void 0===h&&(h=p),void 0===c&&(c=d),void 0===l&&(l=d),t.call(this,"tkhd",0,e),this.trackId=n,this.duration=i,this.width=r,this.height=o,this.volume=s,this.alternateGroup=a,this.layer=u,this.matrix=h,this.creationTime=c,this.modificationTime=l}return f(e,t),e.prototype.layout=function(e){return this.size=t.prototype.layout.call(this,e)+20+8+6+2+36+8,this.size},e.prototype.write=function(e){var n=t.prototype.write.call(this,e);return r(e,this.offset+n,s(this.creationTime)),r(e,this.offset+n+4,s(this.modificationTime)),r(e,this.offset+n+8,this.trackId),r(e,this.offset+n+12,0),r(e,this.offset+n+16,this.duration),n+=20,r(e,this.offset+n,0),r(e,this.offset+n+4,0),r(e,this.offset+n+8,this.layer<<16|this.alternateGroup),r(e,this.offset+n+12,h(this.volume)<<16),n+=16,r(e,this.offset+n,a(this.matrix[0])),r(e,this.offset+n+4,a(this.matrix[1])),r(e,this.offset+n+8,a(this.matrix[2])),r(e,this.offset+n+12,a(this.matrix[3])),r(e,this.offset+n+16,a(this.matrix[4])),r(e,this.offset+n+20,a(this.matrix[5])),r(e,this.offset+n+24,u(this.matrix[6])),r(e,this.offset+n+28,u(this.matrix[7])),r(e,this.offset+n+32,u(this.matrix[8])),n+=36,r(e,this.offset+n,a(this.width)),r(e,this.offset+n+4,a(this.height)),n+=8},e}(m));l.TrackHeaderBox=A;var w=function(t){function e(e,n,i,r,o){void 0===i&&(i="unk"),void 0===r&&(r=d),void 0===o&&(o=d),t.call(this,"mdhd",0,0),this.timescale=e,this.duration=n,this.language=i,this.creationTime=r,this.modificationTime=o}return f(e,t),e.prototype.layout=function(e){return this.size=t.prototype.layout.call(this,e)+16+4,this.size},e.prototype.write=function(e){var n=t.prototype.write.call(this,e);return r(e,this.offset+n,s(this.creationTime)),r(e,this.offset+n+4,s(this.modificationTime)),r(e,this.offset+n+8,this.timescale),r(e,this.offset+n+12,this.duration),r(e,this.offset+n+16,c(this.language)<<16),n+20},e}(m);l.MediaHeaderBox=w;var T=function(t){function e(e,i){t.call(this,"hdlr",0,0),this.handlerType=e,this.name=i,this._encodedName=n(this.name)}return f(e,t),e.prototype.layout=function(e){return this.size=t.prototype.layout.call(this,e)+8+12+(this._encodedName.length+1),this.size},e.prototype.write=function(e){var n=t.prototype.write.call(this,e);return r(e,this.offset+n,0),r(e,this.offset+n+4,o(this.handlerType)),r(e,this.offset+n+8,0),r(e,this.offset+n+12,0),r(e,this.offset+n+16,0),n+=20,e.set(this._encodedName,this.offset+n),e[this.offset+n+this._encodedName.length]=0,n+=this._encodedName.length+1},e}(m);l.HandlerBox=T;var b=function(t){function e(e){void 0===e&&(e=0),t.call(this,"smhd",0,0),this.balance=e}return f(e,t),e.prototype.layout=function(e){return this.size=t.prototype.layout.call(this,e)+4,this.size},e.prototype.write=function(e){var n=t.prototype.write.call(this,e);return r(e,this.offset+n,h(this.balance)<<16),n+4},e}(m);l.SoundMediaHeaderBox=b;var P=function(t){function e(e,n){void 0===e&&(e=0),void 0===n&&(n=g),t.call(this,"vmhd",0,0),this.graphicsMode=e,this.opColor=n}return f(e,t),e.prototype.layout=function(e){return this.size=t.prototype.layout.call(this,e)+8,this.size},e.prototype.write=function(e){var n=t.prototype.write.call(this,e);return r(e,this.offset+n,this.graphicsMode<<16|this.opColor[0]),r(e,this.offset+n+4,this.opColor[1]<<16|this.opColor[2]),n+8},e}(m);l.VideoMediaHeaderBox=P,l.SELF_CONTAINED_DATA_REFERENCE_FLAG=1;var I=function(t){function e(e,i){void 0===i&&(i=null),t.call(this,"url ",0,e),this.location=i,e&l.SELF_CONTAINED_DATA_REFERENCE_FLAG||(this._encodedLocation=n(i))}return f(e,t),e.prototype.layout=function(e){var n=t.prototype.layout.call(this,e);return this._encodedLocation&&(n+=this._encodedLocation.length+1),this.size=n},e.prototype.write=function(e){var n=t.prototype.write.call(this,e);return this._encodedLocation&&(e.set(this._encodedLocation,this.offset+n),e[this.offset+n+this._encodedLocation.length]=0,n+=this._encodedLocation.length),n},e}(m);l.DataEntryUrlBox=I;var L=function(t){function e(e){t.call(this,"dref",0,0),this.entries=e}return f(e,t),e.prototype.layout=function(e){var n=t.prototype.layout.call(this,e)+4;return this.entries.forEach(function(t){n+=t.layout(e+n)}),this.size=n},e.prototype.write=function(e){var n=t.prototype.write.call(this,e);return r(e,this.offset+n,this.entries.length),this.entries.forEach(function(t){n+=t.write(e)}),n},e}(m);l.DataReferenceBox=L;var O=function(t){function e(e){t.call(this,"dinf",[e]),this.dataReference=e}return f(e,t),e}(v);l.DataInformationBox=O;var R=function(t){function e(e){t.call(this,"stsd",0,0),this.entries=e}return f(e,t),e.prototype.layout=function(e){var n=t.prototype.layout.call(this,e);return n+=4,this.entries.forEach(function(t){n+=t.layout(e+n)}),this.size=n},e.prototype.write=function(e){var n=t.prototype.write.call(this,e);return r(e,this.offset+n,this.entries.length),n+=4,this.entries.forEach(function(t){n+=t.write(e)}),n},e}(m);l.SampleDescriptionBox=R;var D=function(t){function e(e,n,i,r,o){t.call(this,"stbl",[e,n,i,r,o]),this.sampleDescriptions=e,this.timeToSample=n,this.sampleToChunk=i,this.sampleSizes=r,this.chunkOffset=o}return f(e,t),e}(v);l.SampleTableBox=D;var M=function(t){function e(e,n,i){t.call(this,"minf",[e,n,i]),this.header=e,this.info=n,this.sampleTable=i}return f(e,t),e}(v);l.MediaInformationBox=M;var k=function(t){function e(e,n,i){t.call(this,"mdia",[e,n,i]),this.header=e,this.handler=n,this.info=i}return f(e,t),e}(v);l.MediaBox=k;var N=function(t){function e(e,n){t.call(this,"trak",[e,n]),this.header=e,this.media=n}return f(e,t),e}(v);l.TrackBox=N;var x=function(t){function e(e,n,i,r,o){t.call(this,"trex",0,0),this.trackId=e,this.defaultSampleDescriptionIndex=n,this.defaultSampleDuration=i,this.defaultSampleSize=r,this.defaultSampleFlags=o}return f(e,t),e.prototype.layout=function(e){return this.size=t.prototype.layout.call(this,e)+20,this.size},e.prototype.write=function(e){var n=t.prototype.write.call(this,e);return r(e,this.offset+n,this.trackId),r(e,this.offset+n+4,this.defaultSampleDescriptionIndex),r(e,this.offset+n+8,this.defaultSampleDuration),r(e,this.offset+n+12,this.defaultSampleSize),r(e,this.offset+n+16,this.defaultSampleFlags),n+20},e}(m);l.TrackExtendsBox=x;var C=function(t){function e(e,n,r){t.call(this,"mvex",i([e],n,[r])),this.header=e,this.tracDefaults=n,this.levels=r}return f(e,t),e}(v);l.MovieExtendsBox=C;var F=function(t){function e(e,n){t.call(this,"meta",0,0),this.handler=e,this.otherBoxes=n}return f(e,t),e.prototype.layout=function(e){var n=t.prototype.layout.call(this,e);return n+=this.handler.layout(e+n),this.otherBoxes.forEach(function(t){n+=t.layout(e+n)}),this.size=n},e.prototype.write=function(e){var n=t.prototype.write.call(this,e);return n+=this.handler.write(e),this.otherBoxes.forEach(function(t){n+=t.write(e)}),n},e}(m);l.MetaBox=F;var U=function(t){function e(e){t.call(this,"mfhd",0,0),this.sequenceNumber=e}return f(e,t),e.prototype.layout=function(e){return this.size=t.prototype.layout.call(this,e)+4,this.size},e.prototype.write=function(e){var n=t.prototype.write.call(this,e);return r(e,this.offset+n,this.sequenceNumber),n+4},e}(m);l.MovieFragmentHeaderBox=U,function(t){t[t.BASE_DATA_OFFSET_PRESENT=1]="BASE_DATA_OFFSET_PRESENT",t[t.SAMPLE_DESCRIPTION_INDEX_PRESENT=2]="SAMPLE_DESCRIPTION_INDEX_PRESENT",t[t.DEFAULT_SAMPLE_DURATION_PRESENT=8]="DEFAULT_SAMPLE_DURATION_PRESENT",t[t.DEFAULT_SAMPLE_SIZE_PRESENT=16]="DEFAULT_SAMPLE_SIZE_PRESENT",t[t.DEFAULT_SAMPLE_FLAGS_PRESENT=32]="DEFAULT_SAMPLE_FLAGS_PRESENT"}(l.TrackFragmentFlags||(l.TrackFragmentFlags={}));var B=l.TrackFragmentFlags,H=function(t){function e(e,n,i,r,o,s,a){t.call(this,"tfhd",0,e),this.trackId=n,this.baseDataOffset=i,this.sampleDescriptionIndex=r,this.defaultSampleDuration=o,this.defaultSampleSize=s,this.defaultSampleFlags=a}return f(e,t),e.prototype.layout=function(e){var n=t.prototype.layout.call(this,e)+4,i=this.flags;return i&B.BASE_DATA_OFFSET_PRESENT&&(n+=8),i&B.SAMPLE_DESCRIPTION_INDEX_PRESENT&&(n+=4),i&B.DEFAULT_SAMPLE_DURATION_PRESENT&&(n+=4),i&B.DEFAULT_SAMPLE_SIZE_PRESENT&&(n+=4),i&B.DEFAULT_SAMPLE_FLAGS_PRESENT&&(n+=4),this.size=n},e.prototype.write=function(e){var n=t.prototype.write.call(this,e),i=this.flags;return r(e,this.offset+n,this.trackId),n+=4,i&B.BASE_DATA_OFFSET_PRESENT&&(r(e,this.offset+n,0),r(e,this.offset+n+4,this.baseDataOffset),n+=8),i&B.SAMPLE_DESCRIPTION_INDEX_PRESENT&&(r(e,this.offset+n,this.sampleDescriptionIndex),n+=4),i&B.DEFAULT_SAMPLE_DURATION_PRESENT&&(r(e,this.offset+n,this.defaultSampleDuration),n+=4),i&B.DEFAULT_SAMPLE_SIZE_PRESENT&&(r(e,this.offset+n,this.defaultSampleSize),n+=4),i&B.DEFAULT_SAMPLE_FLAGS_PRESENT&&(r(e,this.offset+n,this.defaultSampleFlags),n+=4),n},e}(m);l.TrackFragmentHeaderBox=H;
var j=function(t){function e(e){t.call(this,"tfdt",0,0),this.baseMediaDecodeTime=e}return f(e,t),e.prototype.layout=function(e){return this.size=t.prototype.layout.call(this,e)+4,this.size},e.prototype.write=function(e){var n=t.prototype.write.call(this,e);return r(e,this.offset+n,this.baseMediaDecodeTime),n+4},e}(m);l.TrackFragmentBaseMediaDecodeTimeBox=j;var G=function(t){function e(e,n,i){t.call(this,"traf",[e,n,i]),this.header=e,this.decodeTime=n,this.run=i}return f(e,t),e}(v);l.TrackFragmentBox=G,function(t){t[t.IS_LEADING_MASK=201326592]="IS_LEADING_MASK",t[t.SAMPLE_DEPENDS_ON_MASK=50331648]="SAMPLE_DEPENDS_ON_MASK",t[t.SAMPLE_DEPENDS_ON_OTHER=16777216]="SAMPLE_DEPENDS_ON_OTHER",t[t.SAMPLE_DEPENDS_ON_NO_OTHERS=33554432]="SAMPLE_DEPENDS_ON_NO_OTHERS",t[t.SAMPLE_IS_DEPENDED_ON_MASK=12582912]="SAMPLE_IS_DEPENDED_ON_MASK",t[t.SAMPLE_HAS_REDUNDANCY_MASK=3145728]="SAMPLE_HAS_REDUNDANCY_MASK",t[t.SAMPLE_PADDING_VALUE_MASK=917504]="SAMPLE_PADDING_VALUE_MASK",t[t.SAMPLE_IS_NOT_SYNC=65536]="SAMPLE_IS_NOT_SYNC",t[t.SAMPLE_DEGRADATION_PRIORITY_MASK=65535]="SAMPLE_DEGRADATION_PRIORITY_MASK"}(l.SampleFlags||(l.SampleFlags={})),l.SampleFlags,!function(t){t[t.DATA_OFFSET_PRESENT=1]="DATA_OFFSET_PRESENT",t[t.FIRST_SAMPLE_FLAGS_PRESENT=4]="FIRST_SAMPLE_FLAGS_PRESENT",t[t.SAMPLE_DURATION_PRESENT=256]="SAMPLE_DURATION_PRESENT",t[t.SAMPLE_SIZE_PRESENT=512]="SAMPLE_SIZE_PRESENT",t[t.SAMPLE_FLAGS_PRESENT=1024]="SAMPLE_FLAGS_PRESENT",t[t.SAMPLE_COMPOSITION_TIME_OFFSET=2048]="SAMPLE_COMPOSITION_TIME_OFFSET"}(l.TrackRunFlags||(l.TrackRunFlags={}));var Y=l.TrackRunFlags,V=function(t){function e(e,n,i,r){t.call(this,"trun",1,e),this.samples=n,this.dataOffset=i,this.firstSampleFlags=r}return f(e,t),e.prototype.layout=function(e){var n=t.prototype.layout.call(this,e)+4,i=this.samples.length,r=this.flags;return r&Y.DATA_OFFSET_PRESENT&&(n+=4),r&Y.FIRST_SAMPLE_FLAGS_PRESENT&&(n+=4),r&Y.SAMPLE_DURATION_PRESENT&&(n+=4*i),r&Y.SAMPLE_SIZE_PRESENT&&(n+=4*i),r&Y.SAMPLE_FLAGS_PRESENT&&(n+=4*i),r&Y.SAMPLE_COMPOSITION_TIME_OFFSET&&(n+=4*i),this.size=n},e.prototype.write=function(e){var n=t.prototype.write.call(this,e),i=this.samples.length,o=this.flags;r(e,this.offset+n,i),n+=4,o&Y.DATA_OFFSET_PRESENT&&(r(e,this.offset+n,this.dataOffset),n+=4),o&Y.FIRST_SAMPLE_FLAGS_PRESENT&&(r(e,this.offset+n,this.firstSampleFlags),n+=4);for(var s=0;i>s;s++){var a=this.samples[s];o&Y.SAMPLE_DURATION_PRESENT&&(r(e,this.offset+n,a.duration),n+=4),o&Y.SAMPLE_SIZE_PRESENT&&(r(e,this.offset+n,a.size),n+=4),o&Y.SAMPLE_FLAGS_PRESENT&&(r(e,this.offset+n,a.flags),n+=4),o&Y.SAMPLE_COMPOSITION_TIME_OFFSET&&(r(e,this.offset+n,a.compositionTimeOffset),n+=4)}return n},e}(m);l.TrackRunBox=V;var z=function(t){function e(e,n){t.call(this,"moof",i([e],n)),this.header=e,this.trafs=n}return f(e,t),e}(v);l.MovieFragmentBox=z;var W=function(t){function e(e){t.call(this,"mdat"),this.chunks=e}return f(e,t),e.prototype.layout=function(e){var n=t.prototype.layout.call(this,e);return this.chunks.forEach(function(t){n+=t.length}),this.size=n},e.prototype.write=function(e){var n=this,i=t.prototype.write.call(this,e);return this.chunks.forEach(function(t){e.set(t,n.offset+i),i+=t.length},this),i},e}(_);l.MediaDataBox=W;var K=function(t){function e(e,n){t.call(this,e),this.dataReferenceIndex=n}return f(e,t),e.prototype.layout=function(e){return this.size=t.prototype.layout.call(this,e)+8,this.size},e.prototype.write=function(e){var n=t.prototype.write.call(this,e);return r(e,this.offset+n,0),r(e,this.offset+n+4,this.dataReferenceIndex),n+8},e}(_);l.SampleEntry=K;var q=function(t){function e(e,n,i,r,o,s){void 0===i&&(i=2),void 0===r&&(r=16),void 0===o&&(o=44100),void 0===s&&(s=null),t.call(this,e,n),this.channelCount=i,this.sampleSize=r,this.sampleRate=o,this.otherBoxes=s}return f(e,t),e.prototype.layout=function(e){var n=t.prototype.layout.call(this,e)+20;return this.otherBoxes&&this.otherBoxes.forEach(function(t){n+=t.layout(e+n)}),this.size=n},e.prototype.write=function(e){var n=t.prototype.write.call(this,e);return r(e,this.offset+n,0),r(e,this.offset+n+4,0),r(e,this.offset+n+8,this.channelCount<<16|this.sampleSize),r(e,this.offset+n+12,0),r(e,this.offset+n+16,this.sampleRate<<16),n+=20,this.otherBoxes&&this.otherBoxes.forEach(function(t){n+=t.write(e)}),n},e}(K);l.AudioSampleEntry=q,l.COLOR_NO_ALPHA_VIDEO_SAMPLE_DEPTH=24;var X=function(t){function e(e,n,i,r,o,s,a,u,h,c){if(void 0===o&&(o=""),void 0===s&&(s=72),void 0===a&&(a=72),void 0===u&&(u=1),void 0===h&&(h=l.COLOR_NO_ALPHA_VIDEO_SAMPLE_DEPTH),void 0===c&&(c=null),t.call(this,e,n),this.width=i,this.height=r,this.compressorName=o,this.horizResolution=s,this.vertResolution=a,this.frameCount=u,this.depth=h,this.otherBoxes=c,o.length>31)throw new Error("invalid compressor name")}return f(e,t),e.prototype.layout=function(e){var n=t.prototype.layout.call(this,e)+16+12+4+2+32+2+2;return this.otherBoxes&&this.otherBoxes.forEach(function(t){n+=t.layout(e+n)}),this.size=n},e.prototype.write=function(e){var n=t.prototype.write.call(this,e);r(e,this.offset+n,0),r(e,this.offset+n+4,0),r(e,this.offset+n+8,0),r(e,this.offset+n+12,0),n+=16,r(e,this.offset+n,this.width<<16|this.height),r(e,this.offset+n+4,a(this.horizResolution)),r(e,this.offset+n+8,a(this.vertResolution)),n+=12,r(e,this.offset+n,0),r(e,this.offset+n+4,this.frameCount<<16),n+=6,e[this.offset+n]=this.compressorName.length;for(var i=0;31>i;i++)e[this.offset+n+i+1]=i<this.compressorName.length?127&this.compressorName.charCodeAt(i):0;return n+=32,r(e,this.offset+n,this.depth<<16|65535),n+=4,this.otherBoxes&&this.otherBoxes.forEach(function(t){n+=t.write(e)}),n},e}(K);l.VideoSampleEntry=X;var $=function(t){function e(e,n){t.call(this,e),this.data=n}return f(e,t),e.prototype.layout=function(e){return this.size=t.prototype.layout.call(this,e)+this.data.length,this.size},e.prototype.write=function(e){var n=t.prototype.write.call(this,e);return e.set(this.data,this.offset+n),n+this.data.length},e}(_);l.RawTag=$},function(t,e,n){(function(e){var i,r=n(74),o=n(69),s=(o.BaseTransform,n(119));n(120),t.exports=i=function(){o.BaseParser.prototype.constructor.apply(this,arguments),this.parser=new s,this.parser.onFrame=this._onMp3Frame.bind(this),this.parser.onNoise=this._onNoise.bind(this),this.parser.onClose=this._onClose.bind(this),this._sampleRate=0,this._bitRate=0,this._timestamp=0},i.prototype=o.createBaseParser({constructor:i,_onMp3Frame:function(t,n,i){r("Found frame length "+t.length+" bitRate="+n+", sampleRate="+i);var s=new e(t),a=1152;s.meta={mimeType:"audio/mpeg",codecId:2,channels:2,bitRate:n,sampleRate:i,sampleSize:16},s.duration=a,s.timestamp=this._timestamp,this.enqueue(new o.Transfer(s,"buffer")),this._bitRate=n,this._timestamp+=a},_onNoise:function(){r("mp3 has noise")},_onClose:function(){r("parser closed")},_parse:function(t){return r("parse called"),t.data.empty?(r("empty transfer"),void this.enqueue(t)):void this.parser.push(new Uint8Array(t.data))}})}).call(e,n(70).Buffer)},function(t,e,n){var i=n(74),r=[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],o=[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],s=function(){function t(){this.buffer=null,this.bufferSize=0}return t.prototype.push=function(t){var e;if(this.bufferSize>0){var n=t.length+this.bufferSize;if(!this.buffer||this.buffer.length<n){var r=new Uint8Array(n);this.bufferSize>0&&r.set(this.buffer.subarray(0,this.bufferSize)),this.buffer=r}this.buffer.set(t,this.bufferSize),this.bufferSize=n,t=this.buffer,e=n}else e=t.length;i("push "+e);for(var o,s=0;e>s&&(o=this._parse(t,s,e))>0;)s+=o;var a=e-s;a>0&&(!this.buffer||this.buffer.length<a?this.buffer=new Uint8Array(t.subarray(s,e)):this.buffer.set(t.subarray(s,e))),this.bufferSize=a},t.prototype._parse=function(t,e,n){if(i("_parse"),e+2>n)return-1;if(255===t[e]||224===(224&t[e+1])){if(e+24>n)return-1;var s=t[e+1]>>3&3,a=t[e+1]>>1&3,u=t[e+2]>>4&15,h=t[e+2]>>2&3,c=!!(2&t[e+2]);if(1!==s&&0!==u&&15!==u&&3!==h){var l=3===s?3-a:3===a?3:4,f=1e3*r[14*l+u-1],d=3===s?0:2===s?1:2,p=o[3*d+h],g=c?1:0,_=3===a?(3===s?12:6)*f/p+g<<2:(3===s?144:72)*f/p+g|0;return e+_>n?-1:(this.onFrame&&(i("onFrame"),this.onFrame(t.subarray(e,e+_),f,p)),_)}}for(var m=e+2;n>m;){if(255===t[m-1]&&224===(224&t[m]))return this.onNoise&&this.onNoise(t.subarray(e,m-1)),m-e-1;m++}return-1},t.prototype.close=function(){this.bufferSize>0&&this.onNoise&&this.onNoise(this.buffer.subarray(0,this.bufferSize)),this.buffer=null,this.bufferSize=0,this.onClose&&this.onClose()},t}();t.exports=s},function(t,e){var n=1e9;t.exports={TIMESCALE_SECONDS:n}},function(t,e,n){var i,r=n(122),o=n(69),s=o.BaseSink,a=n(123);t.exports=i=function(t){if(s.prototype.constructor.call(this),!r.haveMediaSourceSupportMimeType(t))throw new Error("Local MediaSource doesn't support provided MIME type: "+t);var e;e=arguments.length>1?Array.prototype.slice.call(arguments):t instanceof Array?t:[t],this.mimeTypes=e,this.mediaSource=new MediaSource,this.mseWriter=new a(this.mediaSource),this.dataSources=[],this.selectedDataSourceIndex=0,this.mimeTypes.forEach(function(t){var e={mimeType:t};this.mseWriter.listen(e),this.dataSources.push(e)}.bind(this))},i.prototype=o.createBaseSink({constructor:i,_onData:function(){var t=this.dataSources[this.selectedDataSourceIndex];if(!t||!t.onData)throw new Error("DataSource is not existing or has no onData function defined");var e=this.dequeue();e&&t.onData(e.data)},getMediaSourceUrl:function(){return URL.createObjectURL(this.mediaSource)}})},function(t,e){var n;t.exports=n={haveGlobalWindow:function(){return"undefined"!=typeof window},haveMediaSourceExtensions:function(){return n.haveGlobalWindow()&&window.MediaSource},haveMediaSourceSupportMimeType:function(t){return n.haveMediaSourceExtensions()&&window.MediaSource.isTypeSupported(t)}}},function(t,e){var n=function(){function t(t,e){this.mediaSource=t,this.dataSource=e,this.dataSource.onData=this.pushData.bind(this),this.updateEnabled=!1,this.buffer=[],this.sourceBuffer=null,this.sourceBufferUpdatedBound=null}return t.prototype.allowWriting=function(){this.updateEnabled=!0,this.update()},t.prototype.pushData=function(t){this.buffer.push(t),this.update()},t.prototype.update=function(){if(this.updateEnabled&&0!==this.buffer.length){this.sourceBuffer||(this.sourceBuffer=this.mediaSource.addSourceBuffer(this.dataSource.mimeType),this.sourceBufferUpdatedBound=this._sourceBufferUpdated.bind(this),this.sourceBuffer.addEventListener("update",this.sourceBufferUpdatedBound)),this.updateEnabled=!1;var t=this.buffer.shift();if(null===t)return void this.sourceBuffer.removeEventListener("update",this.sourceBufferUpdatedBound);t.timestamp&&(this.sourceBuffer.timestampOffset=t.timestamp/1e9),this.sourceBuffer.appendBuffer(t)}},t.prototype._sourceBufferUpdated=function(t){this.updateEnabled=!0,this.update()},t.prototype.finish=function(){this.buffer.push(null),this.update()},t}(),i=function(){function t(t){this.bufferWriters=[],this.mediaSource=t,this.mediaSourceOpened=!1,this.mediaSource.addEventListener("sourceopen",function(t){this.mediaSourceOpened=!0,this.bufferWriters.forEach(function(t){t.allowWriting()})}.bind(this)),this.mediaSource.addEventListener("sourceend",function(t){this.mediaSourceOpened=!1}.bind(this))}return t.prototype.listen=function(t){var e=new n(this.mediaSource,t);this.bufferWriters.push(e),this.mediaSourceOpened&&e.allowWriting()},t}();t.exports=i},function(t,e,n){var i,r,o=n(69);r=function(t){o.BasePushSrc.prototype.constructor.call(this);var e=this.req=new XMLHttpRequest;e.open("GET",t,!0),e.responseType="arraybuffer",e.onload=function(t){this.enqueue(new o.Transfer(new Uint8Array(e.response),"binary")),this.enqueue(new o.Transfer(null,"binary"))}.bind(this),e.send()},r.prototype=o.createBasePushSrc({constructor:r}),t.exports=i={Src:r}},function(t,e,n){var i,r,o,s=n(69),a=n(126);n(76),r=function(t,e){s.prototype.constructor.call(this);var n=a.createReadStream(t,e);this.on("end",function(){n.close()}),this.addOutput(n)},r.prototype=s.create({constructor:r}),o=function(t,e){s.prototype.constructor.call(this);var n=a.createWriteStream(t,e);this.on("finish",function(){n.close()}),this.addInput(n)},o.prototype=s.create({constructor:o}),t.exports=i={Src:r,Sink:o}},function(t,e,n){var i=n(122);t.exports=i.haveGlobalWindow()?new(n(127)):n(!function(){var t=new Error('Cannot find module "fs"');throw t.code="MODULE_NOT_FOUND",t}())},function(t,e,n){var i;i=function(){function t(){return!1}function e(t){return!(!(t&&t.data instanceof Object)||n(t))}function n(t){return!!(t&&t.data instanceof ArrayBuffer)}function i(t,n){var i,r=t.length,o=n;for(i=0;r>i;++i){if(!e(o))throw new Error("ENOENT");o=o.data[t[i]]}return o}String.prototype.trim||!function(){var t=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;String.prototype.trim=function(){return this.replace(t,"")}}();var r=function(){var t=Date.now();this.root={mtime:t,ctime:t,atime:t,data:{}}};return r.prototype.join=function(){var t=[],e=arguments||[];return t=this.parse(Array.prototype.slice.call(e).join("/")),("/"===e[0][0]?"/":"")+t.join("/")},r.prototype.parse=function(t){var e=[];return t=t||"/",t.split(/\/+/).forEach(function(t){t=t.trim(),t.length&&"."!==t&&(".."===t?e.pop():e.push(t))}),e},r.prototype.fileSizeSI=function(t,e,n,i,r){return(e=Math,n=e.log,i=1e3,r=n(t)/n(i)|0,t/e.pow(i,r)).toFixed(r?2:0)+" "+(r?"kMGTPEZY"[--r]+"B":"Bytes")},r.prototype.fileSizeIEC=function(t,e,n,i,r){return(e=Math,n=e.log,i=1024,r=n(t)/n(i)|0,t/e.pow(i,r)).toFixed(r?2:0)+" "+(r?"KMGTPEZY"[--r]+"iB":"Bytes")},r.prototype.statSync=function(n){var r=this.parse(n),o=i(r,this.root),s=e(o);if(!o||!o.data)throw new Error("ENOENT");return{size:s?Object.keys(o.data).length:o.data.byteLength,ctime:new Date(o.ctime),mtime:new Date(o.mtime),atime:new Date(o.atime),isFile:function(){return!s},isDirectory:function(){return s},isBlockDevice:t,isCharacterDevice:t,isSymbolicLink:t,isFIFO:t,isSocket:t}},r.prototype.existsSync=function(t){var n,i=this.parse(t),r=i.length,o=this.root;for(n=0;r>n;++n){if(!e(o))return!1;o=o.data[i[n]]}return!!o},r.prototype.mkdirSync=function(t){var n=this.parse(t),r=i(n.slice(0,n.length-1),this.root),o=Date.now();if(!n.length||!e(r))throw new Error("ENODIR");r.data[n[n.length-1]]={data:{},ctime:o,mtime:o,atime:o},r.mtime=o},r.prototype.mkdirpSync=function(t){var r,o,s,a=this.parse(t),u=a.length;if(!a.length)throw new Error("ENODIR");for(o=0;u>o;++o){if(r=a.slice(0,o+1),s=i(r,this.root),n(s))throw new Error("ENODIR");e(s)||this.mkdirSync(r.join("/"))}},r.prototype.readdirSync=function(t){var n=this.parse(t),r=i(n,this.root);if(!e(r))throw new Error("ENODIR");return r.atime=Date.now(),Object.keys(r.data)},r.prototype.rmdirSync=function(t){var n=this.parse(t),r=i(n,this.root);if(dirname=n.pop(),parentDir=i(n,this.root),!e(r))throw new Error("ENODIR");if(Object.keys(r.data).length)throw new Error("ENOTEMPTY");delete parentDir.data[dirname],parentDir.mtime=Date.now()},r.prototype.rmrfSync=function(t){var n=this.parse(t),r=n.pop(),o=i(n,this.root);if(!e(o))throw new Error("ENODIR");r?delete o.data[r]:o.data={},o.mtime=Date.now()},r.prototype.writeFileSync=function(t,n,r){var o,s,a=this.parse(t),u=a.pop(),h=this.existsSync(t),c=i(a,this.root);if(!e(c))throw new Error("ENODIR");if(!u)throw new Error("EINVALIDPATH");if(r=r||{encoding:!0},"string"==typeof n){o=new ArrayBuffer(2*n.length);for(var l=new Uint16Array(o),f=0,d=n.length;d>f;++f)l[f]=n.charCodeAt(f)}else o=n;s=Date.now(),c.data[u]={data:o,ctime:s,mtime:s,atime:s},h||(c.mtime=s),c.atime=s},r.prototype.readFileSync=function(t,e){var r=this.parse(t),o=i(r,this.root),e=e||{encoding:!1};if(!n(o))throw new Error("ENOENT");return o.atime=Date.now(),e.encoding?String.fromCharCode.apply(null,new Uint16Array(o.data)):o.data},r.prototype.renameSync=function(t,n){var r=this.parse(t),o=i(r,this.root),s=i(r.slice(0,r.length-1),this.root),a=r[r.length-1],u=this.parse(n),h=i(u,this.root),c=i(u.slice(0,u.length-1),this.root),l=u[u.length-1],f=Date.now();if(!r.length||!u.length)throw new Error("ENOENT");if(!e(s||!e(c)))throw new Error("ENODIR");if(h)throw new Error("EEXISTS");c.data[l]=h=o,h.ctime=f,c.mtime=f,delete s.data[a],s.mtime=f},["stat","exists","readdir","mkdirp","mkdir","rmdir","rmrf","unlink"].forEach(function(t){r.prototype[t]=function(e,n){try{var i=this[t+"Sync"](e)}catch(r){return n(r)}return n(null,i)}}),["writeFile","readFile"].forEach(function(t){r.prototype[t]=function(e,n,i){i||(i=n,n=void 0);try{var r=this[t+"Sync"](e,n)}catch(o){return i(o)}return i(null,r)}}),["rename"].forEach(function(t){r.prototype[t]=function(e,n,i){try{var r=this[t+"Sync"](e,n)}catch(o){return i(o)}return i(null,r)}}),r}.call(e,n,e,t),!(void 0!==i&&(t.exports=i))},function(t,e){var n={HTTP:"http",RTMP:"rtmp",HLS:"hls"};t.exports=n},function(t,e){t.exports={AAC:"audio/aac",M3U8:"application/x-mpegURL",HLS:"application/vnd.apple.mpegurl",MP4A:"audio/mp4",MP3:"audio/mpeg",OGG:"audio/ogg",WAV:"audio/wav",WEBMA:"audio/webm",getTypeByExtension:function(t){var e={mp3:this.MP3,aac:this.AAC,mp4:this.MP4A,mp4a:this.MP4A,ogg:this.OGG,oga:this.OGG,opus:this.OGG,webm:this.WEBM,wav:this.WAV,m3u8:this.M3U8};return e[t]||null}}},function(t,e,n,i,r,o){function s(t,e,n){for(var i=-1,r=h(e),o=r.length;++i<o;){var s=r[i],a=t[s],u=n(a,e[s],s,t,e);(u===u?u===a:a!==a)&&(void 0!==a||s in t)||(t[s]=u)}return t}var a=n(i),u=n(r),h=n(o),c=u(function(t,e,n){return n?s(t,e,n):a(t,e)});t.exports=c},function(t,e,n,i,r){function o(t,e){return null==e?t:s(e,a(e),t)}var s=n(i),a=n(r);t.exports=o},function(t,e,n,i,r,o){function s(t){return function(e){return null==e?void 0:e[t]}}function a(t){return null!=t&&h(S(t))}function u(t,e){return t="number"==typeof t||_.test(t)?+t:-1,e=null==e?E:e,t>-1&&t%1==0&&e>t}function h(t){return"number"==typeof t&&t>-1&&t%1==0&&E>=t}function c(t){for(var e=f(t),n=e.length,i=n&&t.length,r=!!i&&h(i)&&(g(t)||p(t)),o=-1,s=[];++o<n;){var a=e[o];(r&&u(a,i)||y.call(t,a))&&s.push(a)}return s}function l(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function f(t){if(null==t)return[];l(t)||(t=Object(t));var e=t.length;e=e&&h(e)&&(g(t)||p(t))&&e||0;for(var n=t.constructor,i=-1,r="function"==typeof n&&n.prototype===t,o=Array(e),s=e>0;++i<e;)o[i]=i+"";for(var a in t)s&&u(a,e)||"constructor"==a&&(r||!y.call(t,a))||o.push(a);return o}var d=n(i),p=n(r),g=n(o),_=/^\d+$/,m=Object.prototype,y=m.hasOwnProperty,v=d(Object,"keys"),E=9007199254740991,S=s("length"),A=v?function(t){var e=null==t?void 0:t.constructor;return"function"==typeof e&&e.prototype===t||"function"!=typeof t&&a(t)?c(t):l(t)?v(t):[]}:c;t.exports=A},function(t,e,n,i,r,o){function s(t){return h(function(e,n){var i=-1,r=null==e?0:n.length,o=r>2?n[r-2]:void 0,s=r>2?n[2]:void 0,h=r>1?n[r-1]:void 0;for("function"==typeof o?(o=a(o,h,5),r-=2):(o="function"==typeof h?h:void 0,r-=o?1:0),s&&u(n[0],n[1],s)&&(o=3>r?void 0:o,r=1);++i<r;){var c=n[i];c&&t(e,c,o)}return e})}var a=n(i),u=n(r),h=n(o);t.exports=s},function(t,e,n,i){function r(t,e){return p(t,e,l)}function o(t){return function(e){return null==e?void 0:e[t]}}function s(t,e){return function(n,i){var r=n?g(n):0;if(!u(r))return t(n,i);for(var o=e?r:-1,s=h(n);(e?o--:++o<r)&&i(s[o],o,s)!==!1;);return n}}function a(t){return function(e,n,i){for(var r=h(e),o=i(e),s=o.length,a=t?s:-1;t?a--:++a<s;){var u=o[a];if(n(r[u],u,r)===!1)break}return e}}function u(t){return"number"==typeof t&&t>-1&&t%1==0&&f>=t}function h(t){return c(t)?t:Object(t)}function c(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}var l=n(i),f=9007199254740991,d=s(r),p=a(),g=o("length");t.exports=d}]))},function(t,e,n){var i=n(22),r=function(t,e){var n=e||{},r=n.bufferLen||4096,o=n.numChannels||2;this.context=t.context,this.node=(this.context.createScriptProcessor||this.context.createJavaScriptNode).call(this.context,r,o,o);var s=new i;s.postMessage({command:"init",config:{sampleRate:this.context.sampleRate,numChannels:o}});var a,u=!1;this.node.onaudioprocess=function(t){if(u){for(var e=[],n=0;o>n;n++)e.push(t.inputBuffer.getChannelData(n));s.postMessage({command:"record",buffer:e})}},this.configure=function(t){for(var e in t)t.hasOwnProperty(e)&&(n[e]=t[e])},this.record=function(){u=!0},this.stop=function(){u=!1},this.clear=function(){s.postMessage({command:"clear"})},this.getBuffer=function(t){a=t||n.callback,s.postMessage({command:"getBuffer"})},this.exportWAV=function(t,e){if(a=t||n.callback,e=e||n.type||"audio/wav",!a)throw new Error("Callback not set");s.postMessage({command:"exportWAV",type:e})},s.onmessage=function(t){var e=t.data;a(e)},t.connect(this.node),this.node.connect(this.context.destination)};r.forceDownload=function(t,e){var n=(window.URL||window.webkitURL).createObjectURL(t),i=window.document.createElement("a");i.href=n,i.download=e||"output.wav";var r=document.createEvent("Event");r.initEvent("click",!0,!0),i.dispatchEvent(r)},t.exports=r},function(t,e){t.exports=function(t){function e(i){if(n[i])return n[i].exports;var r=n[i]={exports:{},id:i,loaded:!1};return t[i].call(r.exports,r,r.exports,e),r.loaded=!0,r.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){function i(){return this._hooksPause.every(function(t){return t.call()})}function r(t){var e=t.resource_id||t.id||t.cid;if(!e)throw new Error("Your model should have a unique `id`, `cid` or `resource_id` property");return e}function o(t){C=t,t&&(x.AudioManagerStates=t.States)}function s(){var t=G();return p.call(this,!0).done(function(e){t.resolve(e.url)}).fail(function(){t.reject()}),t.promise()}function a(t){var e,n=this.options;return e={id:this.getId(),src:t.url,duration:$.result(n.duration),title:this.options.title,mimeType:t.mimeType,forceSingle:n.useSinglePlayer},C.createAudioPlayer(e,{streamUrlProvider:s.bind(this)})}function u(t,e){var n=e?"on":"off";t[n]("state-change",L,this)[n]("position-change",c,this)[n]("metadata",h,this)}function h(){this.trigger(Y.METADATA)}function c(){this._prevPosition!==this.currentTime()&&(this.trigger(Y.TIME),this._prevPosition=this.currentTime())}function l(){this._initAudioDefer&&(this._initAudioDefer.reject(),this._initAudioDefer=null,this.streamInfo=null)}function f(){l.call(this),this.controller&&(this._storedPosition=this.currentTime(),this.controller.kill(),this.controller=null,this.trigger(Y.RESET))}function d(){this._registerPlays=!0,this.pause(),this.trigger(Y.FINISH)}function p(t){var e=G(),n=this.streamInfo&&!t;return n?e.resolve(this.streamInfo):g.call(this).done(function(t){var n=q.choosePreferredStream(t,this.options);n?e.resolve(n):(this.trigger(Y.NO_PROTOCOL),F.warn("(%s) Could not match a protocol of given media descriptor to one of the supported protocols (%s), aborting attempt to play.",this.getId(),this.options.protocols),e.reject())}.bind(this)).fail(function(t){F.warn("(%s) Stream request failed with status: %d",this.getId(),t.status),_.call(this,t),m.call(this,t),e.reject()}.bind(this)),e.promise()}function g(){if(this.options.streamUrls&&!this._usedPrefetchUrls){var t,e=G();return this._usedPrefetchUrls=!0,t=$.result(this.options.streamUrls),e.resolve(t),e.promise()}return this.ajax({type:"GET",url:$.result(this.options.streamUrlsEndpoint),dataType:"json",async:this.options.asyncFetch,timeout:this.options.asyncFetch?nt:et})}function _(t){var e=t.status>=400&&-1!==(t.responseText||"").indexOf("geo_blocked");e&&this.trigger(Y.GEO_BLOCKED)}function m(t){0===t.status&&this.trigger(Y.NO_CONNECTION)}function y(){return this.controller&&this.controller.getCapabilities&&this.controller.getCapabilities()?this.controller.getCapabilities().needsUrlRefresh:!0}function v(t){if(!y.call(this))return!0;var e=this._initAudioDefer&&this._initAudioDefer.state(),n=q.streamValidForPlayingFrom(this.streamInfo,t);return this.controller&&this.controller.hasStreamUrlProvider&&this.controller.hasStreamUrlProvider()?!0:e&&("pending"===e||"resolved"===e&&n)}function E(t){t&&!this._bufferingTimeout?this._bufferingTimeout=window.setTimeout(function(){this._isBuffering=!0,this.trigger(Y.BUFFERRING_START)}.bind(this),it):t||(this._bufferingTimeout&&(window.clearTimeout(this._bufferingTimeout),this._bufferingTimeout=null),this._isBuffering&&(this._isBuffering=!1,this.trigger(Y.BUFFERRING_END)))}function S(){this.off(Y.TIME,this.seekTimeEventHandler),this.trigger(Y.SEEKED),this.seekTimeEventHandler=null}function A(){this._errorRecoveryFlagsResetTimeout=window.setTimeout(function(){this._errorRecoveryTime=null,this._errorRecoveryCounts=0}.bind(this),at)}function w(){this._errorRecoveryFlagsResetTimeout&&window.clearTimeout(this._errorRecoveryFlagsResetTimeout)}function T(){var t=this.isPlaying(),e=Date.now();return w.call(this),this._errorRecoveryTime&&this._errorRecoveryTime+ot>e&&this._errorRecoveryCounts>st?void this.trigger(Y.AUDIO_ERROR,this):(this._errorRecoveryTime=Date.now(),this._errorRecoveryCounts++,f.call(this),void(t&&this.play({seek:this.currentTime(),userInitiated:!1})))}function b(t){this.logAudioError({error_code:t,protocol:this.streamInfo?this.streamInfo.protocol:void 0,player_type:this.controller?this.controller.getType():void 0,host:this.streamInfo?X.getUrlHost(this.streamInfo.url):void 0,url:this.streamInfo?this.streamInfo.url:void 0})}function P(){var t,e=C.Errors;if(!this.controller)return F.error("(%s) Controller is null, aborting error handler.",this.getId(),this),b.call(this,null),void T.call(this);switch(t=this.controller&&this.controller.getErrorID(),F.error("(%s) %s",this.getId(),this.controller.getErrorMessage?this.controller.getErrorMessage():"Controller does not provide getErrorMessage()"),D(t,"MSE","GENERIC","HTML5_AUDIO_DECODE","HTML5_AUDIO_SRC_NOT_SUPPORTED","FLASH_PROXY","FLASH_RTMP_CONNECT_FAILED","FLASH_RTMP_CANNOT_PLAY_STREAM")&&b.call(this,t),t){case e.FLASH_PROXY_CANT_LOAD_FLASH:this.trigger(Y.FLASH_NOT_LOADED);break;case e.FLASH_PROXY_FLASH_BLOCKED:this.trigger(Y.FLASH_BLOCK);break;case e.FLASH_RTMP_CONNECT_FAILED:$.without(this.options.protocols,W.RTMP);case e.FLASH_RTMP_CANNOT_PLAY_STREAM:case e.FLASH_RTMP_CONNECT_CLOSED:case e.HTML5_AUDIO_NETWORK:case e.HTML5_AUDIO_ABORTED:case e.HTML5_AUDIO_DECODE:case e.HTML5_AUDIO_SRC_NOT_SUPPORTED:case e.GENERIC_AUDIO_ENDED_EARLY:case e.MSE_BAD_OBJECT_STATE:case e.MSE_NOT_SUPPORTED:case e.MSE_MP3_NOT_SUPPORTED:case e.MSE_HLS_NOT_VALID_PLAYLIST:case e.MSE_HLS_PLAYLIST_NOT_FOUND:case e.MSE_HLS_SEGMENT_NOT_FOUND:T.call(this);break;case e.GENERIC_AUDIO_OVERRUN:d.call(this);break;default:F.error("(%s) Unhandled audio error code: %s",this.getId(),t,this)}}function I(t,e){switch(this.options.debug&&O.call(this,t,e),t){case Y.PAUSE:this._isPlaying=!1,this._isPlayActionQueued=!1;break;case Y.PLAY:var n=e;this.toggleMute(J.muted),this.setVolume(J.volume),this._isPlaying=!1,this._isPlayActionQueued=!0,this._userInitiatedPlay=void 0!==n.userInitiated?!!n.userInitiated:!0,M.call(this);break;case Y.PLAY_START:this._isPlaying=!0,this._isPlayActionQueued=!1,this._registerPlays&&this.registerPlay();break;case Y.BUFFERRING_START:case Y.SEEK:this._isPlaying&&(this._isPlaying=!1,this._isPlayActionQueued=!0);break;case Y.BUFFERRING_END:case Y.SEEKED:this._isPlayActionQueued&&(this._isPlaying=!0,this._isPlayActionQueued=!1);break;case Y.NO_CONNECTION:this._hasNoConnection=!0,this._noConnectionSince=Date.now();break;case Y.NO_STREAMS:this.pause(),E.call(this,!1),l.call(this),N.call(this);break;case Y.STREAMS:this._noConnectionSince=null,this._hasNoConnection=!1;break;case Y.ONLINE:k.call(this);break;case Y.OFFLINE:}}function L(t){var e=C.States,n=C.Errors;switch(t){case e.IDLE:R.call(this),this.controller&&this.controller.getErrorID()===n.FLASH_PROXY_FLASH_BLOCKED&&this.trigger(Y.FLASH_UNBLOCK);break;case e.PAUSED:R.call(this),E.call(this,!1),this.seekTimeEventHandler&&this.isPaused()&&S.call(this),this.isPlaying()&&this.trigger(Y.PAUSE,{position:this.currentTime()});break;case e.PLAYING:R.call(this),E.call(this,!1),A.call(this),this.trigger(Y.PLAY_RESUME);break;case e.LOADING:case e.SEEKING:R.call(this),E.call(this,!0);break;case e.ENDED:R.call(this),d.call(this);break;case e.ERROR:E.call(this,!1),P.call(this)}this.trigger(Y.STATE_CHANGE,t)}function O(t,e){var n=this.options.title;n=n&&n.length?" ["+n.replace(/\s/g,"").substr(0,6)+"]":"",t===Y.STATE_CHANGE?F("(%s)%s Event: %s (%s)",this.getId(),n,t,e):t!==Y.TIME||this._loggedTime?t!==Y.TIME&&F("(%s)%s Event: %s",this.getId(),n,t):F("(%s)%s Event: %s %dms",this.getId(),n,t,this.currentTime()),this._loggedTime=t===Y.TIME}function R(){this._initAudioDefer&&this._initAudioDefer.resolve()}function D(t){return void 0===C.Errors[t]?!1:Array.prototype.slice.call(arguments,1).some(function(e){return 0===t.indexOf(e)})}function M(){function t(){var t=window.navigator.onLine;F("Navigator `onLine` status is now: "+t),window.setTimeout(function(){window.navigator.onLine===t&&this.trigger(t?Y.ONLINE:Y.OFFLINE)}.bind(this),500)}this._onlineEventsRegistered||(this._onlineEventsRegistered=!0,window.addEventListener("online",t.bind(this)),window.addEventListener("offline",t.bind(this)))}function k(){if(this.hasNoConnection()&&this._isPlayRetryQueued){var t=Date.now()-this._noConnectionSince;this._isPlayRetryQueued=!0,t<this.options.retryAfterNoConnectionEventTimeout&&this.play({userInitiated:!1})}}function N(){this.hasNoConnection()&&!this._userInitiatedPlay&&(this._isPlayRetryQueued=!0)}var x,C,F,U=n(1),B=n(6),H=n(8),j=n(9),G=n(2).Deferred,Y=n(7),V=n(14),z=n(10),W=n(15),K=n(16),q=n(18),X=n(12),$=n(13),Z=n(19),Q={},J={muted:!1,volume:1},tt={soundId:Q,duration:Q,title:null,registerEndpoint:Q,streamUrlsEndpoint:Q,resourceId:!1,debug:!1,asyncFetch:!0,useSinglePlayer:!0,protocols:[W.HLS,W.RTMP,W.HTTP],extensions:[V.MP3],maxBitrate:1/0,mediaSourceEnabled:!1,mseFirefox:!1,mseSafari:!1,eventLogger:null,logErrors:!0,logPerformance:!0,ajax:null,retryAfterNoConnectionEventTimeout:6e4,fadeOutOnPause:!1,fadeOutAlgo:Z.VolumeAutomator.Algos.EaseInOut},et=6e3,nt=6e3,it=400,rt=6e4,ot=6e3,st=3,at=3e4,ut=[];x=t.exports=function(t,e){if(1===arguments.length?e=t:x.setAudioManager(t),!C)throw new Error("SCAudio: AudioManager instance must be set with `SCAudio.setAudioManager()` or passed via the constructor");this.options=$.extend({},tt,e);var n=Object.keys(this.options).filter(function(t){return this.options[t]===Q},this);if(n.length)throw new Error("SCAudio: pass into constructor the following options: "+n.join(", "));K.prioritizeAndFilter(this.options),this.controller=null,this.streamInfo=null,this._userInitiatedPlay=this._registerPlays=!0,this._registerCounts=this._errorRecoveryCounts=0,this._isPlayActionQueued=this._onlineEventsRegistered=this._usedPrefetchUrls=this._isPlaying=this._isBuffering=this._hasNoConnection=!1,this._initAudioDefer=this._expirationTimeout=this._bufferingTimeout=this._errorRecoveryTime=this._errorRecoveryFlagsResetTimeout=this._storedPosition=this._prevPosition=this._noConnectionSince=null,this.options.debug&&(this._loggedTime=!1),this._modelListeners={},this._hooksPause=[],this.audioPerfMonitor=new H(this,this.logAudioPerformance.bind(this)),this.audioLogger=new B(this),this.volumeAutomator=new Z.VolumeAutomator(this),F=F||j(e.debug,"scaudio")},$.extend(x.prototype,z,{constructor:x,initAudio:function(){return this._initAudioDefer||(this._initAudioDefer=G(),p.call(this).done(function(t){var e=!0;this.streamInfo&&(e=!1),this.streamInfo=t,e&&this.trigger(Y.STREAMS),this.controller=a.call(this,t),u.call(this,this.controller,!0),L.call(this,this.controller.getState())}.bind(this)).fail(function(){this.trigger(Y.NO_STREAMS)}.bind(this)),this._initAudioDefer.done(function(){this.trigger(Y.CREATED)}.bind(this))),this._initAudioDefer.promise()},registerPlay:function(){var t=this.options.soundId,e=!1;return-1===ut.indexOf(t)&&(ut.push(t),window.setTimeout(function(){var e=ut.indexOf(t);e>-1&&ut.splice(e,1)},rt),this.ajax({type:"POST",url:$.result(this.options.registerEndpoint),dataType:"json"}),this._registerCounts++,this._registerPlays=!1,this.trigger(Y.REGISTERED),e=!0),e},toggle:function(){
this[this.isPaused()?"play":"pause"]()},play:function(t){var e;if(t&&null!=t.seek)e=t.seek;else{if(this.isPlaying())return;e=this.currentTime()}t=$.extend({},t,{position:e}),this.trigger(Y.PLAY,t),v.call(this,e)||(f.call(this),this._isPlayActionQueued=!0),this.initAudio().done(function(){this._isPlayActionQueued&&(this._storedPosition=null,this.trigger(Y.PLAY_START,t),this.controller&&this.controller.play(e))}.bind(this)),E.call(this,!0)},pause:function(t){this.isPaused()||(t=$.extend({},t,{position:this.currentTime()}),i.call(this)&&(this.trigger(Y.PAUSE,t),this.controller&&this.controller.pause()))},registerHook:function(t,e){switch(t){case"pause":this._hooksPause.push(e);break;default:throw new Error("can`t register hook for "+t)}},getListenTime:function(){return this.audioLogger?this.audioLogger.getListenTime():0},dispose:function(){this.audioLogger=null,this.audioPerfMonitor=null,$.without(ut,this.options.soundId),window.clearTimeout(this._bufferingTimeout),l.call(this),this.controller&&(this.controller.kill(),this.controller=null),delete this.controller,this.trigger(Y.DESTROYED),this.off()},seek:function(t){return this.controller?t>=$.result(this.options.duration)?void d.call(this):(this.seekTimeEventHandler&&this.off(Y.TIME,this.seekTimeEventHandler),this.seekTimeEventHandler=$.after(2,function(){S.call(this)}.bind(this)),this.on(Y.TIME,this.seekTimeEventHandler),this.trigger(Y.SEEK,{from:this.currentTime(),to:t}),this.isPlaying()&&!v.call(this,t)?(f.call(this),void this.play({seek:t})):void this.controller.seek(t)):void 0},seekRelative:function(t){this.controller&&this.seek(this.currentTime()+t)},currentTime:function(){return this._storedPosition?this._storedPosition:this.controller?this.controller.getCurrentPosition():0},loadProgress:function(){var t=0;return this.controller&&(t=this.controller.getLoadedPosition()/this.controller.getDuration(),t=t>=.99?1:t),t},buffered:function(){return this.controller&&this.controller.getDuration()||0},isPaused:function(){return!this.isPlaying()},isBuffering:function(){return this._isBuffering},isPlaying:function(){return this._isPlayActionQueued||this._isPlaying},isLoading:function(){return!(!this.controller||this.controller.getState()!==C.States.LOADING)},hasNoConnection:function(){return!!this._hasNoConnection},hasStreamInfo:function(){return!!this.streamInfo},toggleMute:function(t){x.toggleMute(t)},isMuted:function(){return x.isMuted()},setVolume:function(t){x.setVolume(t)},getVolume:function(){return x.getVolume()},logAudioPerformance:function(t){this.getEventLogger()&&this.options.logPerformance&&this.getEventLogger().audioPerformance(t)},logAudioError:function(t){this.getEventLogger()&&this.options.logErrors&&this.getEventLogger().audioError(t)},getAudioManagerStates:function(){return C.States},getId:function(){return this.options.resourceId||this.options.soundId},getEventLogger:function(){return this.options.eventLogger},registerModelEventListener:function(t,e){var n=r(t);if(this._modelListeners[n])throw new Error("Data model is already registered (forgot to unregister it or registering twice?)");this._modelListeners[n]=e=e.bind(this,t),this.on("all",e)},unregisterModelEventListener:function(t){var e=r(t);this._modelListeners[e]&&(this.off("all",this._modelListeners[e]),delete this._modelListeners[e])},ajax:function(t){return this.options.ajax?this.options.ajax(t):U(t)},trigger:function(t,e){I.call(this,t,e),z.trigger.call(this,t,e)}}),$.extend(x,{getSettings:function(){return J},setSettings:function(t){$.extend(J,t)},setAudioManager:o,setAudioManagerOnce:$.once(o),toggleMute:function(t){J.muted=void 0===t?!J.muted:!!t,C&&C.setVolume(J.muted?0:1)},isMuted:function(){return J.muted},setVolume:function(t){J.volume=void 0===t?1:t,C&&C.setVolume(J.volume)},getVolume:function(){return J.volume},Extensions:V,Protocols:W,Events:Y,BUFFER_DELAY:it,PLAY_REGISTRATION_TIMEOUT:rt})},function(t,e,n){var i=n(2).Deferred,r=4;t.exports=function(t){var e,n,o,s,a,u,h,c;t&&(o=t.data||null,n=t.url||"",e=t.type||"GET",s=t.dataType||"text",a=t.async,u=t.timeout,h=t.beforeSend||null);var l=i();a=a!==!1;var f=new XMLHttpRequest;return f.open(e,n,a),a&&(f.responseType="text"),h&&h(f),f.onreadystatechange=function(){if(f.readyState===r)if(clearTimeout(c),0!==f.status&&f.status<400){var t=f.responseText;if("json"===s)try{t=JSON.parse(t)}catch(e){return void l.reject(f)}l.resolve(t)}else l.reject(f)},null!=u&&(c=setTimeout(function(){f.readyState!==r&&(f.abort(),l.reject(f))},u)),f.send(o),l.promise()}},function(t,e,n){t.exports=n(3)},function(t,e,n){/*!
		* jquery-deferred
		* Copyright(c) 2011 Hidden <zzdhidden@gmail.com>
		* MIT Licensed
		*/
var i=t.exports=n(4),r=Array.prototype.slice;i.extend({Deferred:function(t){var e=[["resolve","done",i.Callbacks("once memory"),"resolved"],["reject","fail",i.Callbacks("once memory"),"rejected"],["notify","progress",i.Callbacks("memory")]],n="pending",r={state:function(){return n},always:function(){return o.done(arguments).fail(arguments),this},then:function(){var t=arguments;return i.Deferred(function(n){i.each(e,function(e,r){var s=r[0],a=t[e];o[r[1]](i.isFunction(a)?function(){var t=a.apply(this,arguments);t&&i.isFunction(t.promise)?t.promise().done(n.resolve).fail(n.reject).progress(n.notify):n[s+"With"](this===o?n:this,[t])}:n[s])}),t=null}).promise()},promise:function(t){return null!=t?i.extend(t,r):r}},o={};return r.pipe=r.then,i.each(e,function(t,i){var s=i[2],a=i[3];r[i[1]]=s.add,a&&s.add(function(){n=a},e[1^t][2].disable,e[2][2].lock),o[i[0]]=s.fire,o[i[0]+"With"]=s.fireWith}),r.promise(o),t&&t.call(o,o),o},when:function(t){var e,n,o,s=0,a=r.call(arguments),u=a.length,h=1!==u||t&&i.isFunction(t.promise)?u:0,c=1===h?t:i.Deferred(),l=function(t,n,i){return function(o){n[t]=this,i[t]=arguments.length>1?r.call(arguments):o,i===e?c.notifyWith(n,i):--h||c.resolveWith(n,i)}};if(u>1)for(e=new Array(u),n=new Array(u),o=new Array(u);u>s;s++)a[s]&&i.isFunction(a[s].promise)?a[s].promise().done(l(s,o,a)).fail(c.reject).progress(l(s,n,e)):--h;return h||c.resolveWith(o,a),c.promise()}})},function(t,e,n){function i(t){var e=s[t]={};return r.each(t.split(o),function(t,n){e[n]=!0}),e}var r=t.exports=n(5),o=/\s+/,s={};r.Callbacks=function(t){t="string"==typeof t?s[t]||i(t):r.extend({},t);var e,n,o,a,u,h,c=[],l=!t.once&&[],f=function(i){for(e=t.memory&&i,n=!0,h=a||0,a=0,u=c.length,o=!0;c&&u>h;h++)if(c[h].apply(i[0],i[1])===!1&&t.stopOnFalse){e=!1;break}o=!1,c&&(l?l.length&&f(l.shift()):e?c=[]:d.disable())},d={add:function(){if(c){var n=c.length;!function i(e){r.each(e,function(e,n){var o=r.type(n);"function"===o?t.unique&&d.has(n)||c.push(n):n&&n.length&&"string"!==o&&i(n)})}(arguments),o?u=c.length:e&&(a=n,f(e))}return this},remove:function(){return c&&r.each(arguments,function(t,e){for(var n;(n=r.inArray(e,c,n))>-1;)c.splice(n,1),o&&(u>=n&&u--,h>=n&&h--)}),this},has:function(t){return r.inArray(t,c)>-1},empty:function(){return c=[],this},disable:function(){return c=l=e=void 0,this},disabled:function(){return!c},lock:function(){return l=void 0,e||d.disable(),this},locked:function(){return!l},fireWith:function(t,e){return e=e||[],e=[t,e.slice?e.slice():e],!c||n&&!l||(o?l.push(e):f(e)),this},fire:function(){return d.fireWith(this,arguments),this},fired:function(){return!!n}};return d}},function(t,e){function n(t){return null==t?String(t):c[h.call(t)]||"object"}function i(t){return"function"===u.type(t)}function r(t){return"array"===u.type(t)}function o(t,e,n){var r,o=0,s=t.length,a=void 0===s||i(t);if(n)if(a){for(r in t)if(e.apply(t[r],n)===!1)break}else for(;s>o&&e.apply(t[o++],n)!==!1;);else if(a){for(r in t)if(e.call(t[r],r,t[r])===!1)break}else for(;s>o&&e.call(t[o],o,t[o++])!==!1;);return t}function s(t){return!(!t||"object"!==u.type(t))}function a(){var t,e,n,i,r,o,s=arguments[0]||{},a=1,h=arguments.length,c=!1;for("boolean"==typeof s&&(c=s,s=arguments[1]||{},a=2),"object"==typeof s||u.isFunction(s)||(s={}),h===a&&(s=this,--a);h>a;a++)if(null!=(t=arguments[a]))for(e in t)n=s[e],i=t[e],s!==i&&(c&&i&&(u.isPlainObject(i)||(r=u.isArray(i)))?(r?(r=!1,o=n&&u.isArray(n)?n:[]):o=n&&u.isPlainObject(n)?n:{},s[e]=u.extend(c,o,i)):void 0!==i&&(s[e]=i));return s}var u=t.exports={type:n,isArray:r,isFunction:i,isPlainObject:s,each:o,extend:a,noop:function(){}},h=Object.prototype.toString,c={};"Boolean Number String Function Array Date RegExp Object".split(" ").forEach(function(t){c["[object "+t+"]"]=t.toLowerCase()})},function(t,e,n){function i(t){this.listenTime+=t.from-this.currentTime,this.currentTime=t.to}function r(t){this.listenTime+=t.position-this.currentTime,this.currentTime=t.position}function o(t){this.currentTime=t.position}var s,a=n(7);s=t.exports=function(t){this.scAudio=t,this.listenTime=0,this.currentTime=0,this.scAudio.on(a.SEEK,i,this).on(a.PLAY_START,o,this).on(a.PAUSE,r,this)},s.prototype={constructor:s,getListenTime:function(){return this.listenTime+this.scAudio.currentTime()-this.currentTime}}},function(t,e){var n={CREATED:"created",STATE_CHANGE:"state-change",DESTROYED:"destroyed",PLAY:"play",PLAY_START:"play-start",PLAY_RESUME:"play-resume",METADATA:"metadata",PAUSE:"pause",FINISH:"finish",RESET:"reset",SEEK:"seek",SEEKED:"seeked",GEO_BLOCKED:"geo_blocked",BUFFERRING_START:"buffering_start",BUFFERRING_END:"buffering_end",FLASH_NOT_LOADED:"flash_not_loaded",FLASH_BLOCK:"flash_blocked",FLASH_UNBLOCK:"flash_unblocked",AUDIO_ERROR:"audio_error",TIME:"time",NO_STREAMS:"no_streams",STREAMS:"streams",NO_PROTOCOL:"no_protocol",NO_CONNECTION:"no_connection",REGISTERED:"registered",ONLINE:"online",OFFLINE:"offline"};t.exports=n},function(t,e,n){function i(){return this.scAudio.controller?this.controller?void m.warn("(%s) Setup was called while it was already initialized (returned with a no-op)",this.scAudio.getId()):(m("(%s) Initialized",this.scAudio.getId()),this.controller=this.scAudio.controller,this.protocol=this.scAudio.streamInfo.protocol,void(this.host=S.getUrlHost(this.scAudio.streamInfo.url))):void m.warn("Can´t initialize when controller is null")}function r(){this.controller&&(m("(%s) Reset",this.scAudio.getId()),this.controller=this.protocol=this.host=null,this.timeToPlayMeasured=!1)}function o(t){var e=this.scAudio.getAudioManagerStates();t===e.LOADING?this.timeToPlayMeasured&&f.call(this):A.isNull(this.bufferingStartTime)||d.call(this)}function s(){this.metadataLoadStartTime=Date.now()}function a(){return A.isNull(this.metadataLoadStartTime)?void m.warn("(%s) onMetadataEnd was called without onMetadataStart being called before.",this.scAudio.getId()):(this.log({type:"metadata",latency:Date.now()-this.metadataLoadStartTime}),void(this.metadataLoadStartTime=null))}function u(){this.playClickTime=Date.now()}function h(){if(!this.timeToPlayMeasured){if(A.isNull(this.playClickTime))return void m.warn("(%s) onPlayResume was called without onPlayStart being called before.",this.scAudio.getId());this.log({type:"play",latency:Date.now()-this.playClickTime}),this.playClickTime=null,this.timeToPlayMeasured=!0}}function c(){this.scAudio.isPaused()||(this.seekStartTime=Date.now())}function l(){if(!this.scAudio.isPaused()){if(A.isNull(this.seekStartTime))return void m.warn("(%s) onSeekEnd was called without onSeekStart being called before.",this.scAudio.getId());this.log({type:"seek",latency:Date.now()-this.seekStartTime}),this.seekStartTime=null}}function f(){this.bufferingStartTime||(this.bufferingStartTime=Date.now())}function d(){return A.isNull(this.bufferingStartTime)?void m.warn("(%s) onBufferingEnd was called without onBufferingStart being called before.",this.scAudio.getId()):(p.call(this),void(this.bufferingStartTime=null))}function p(){A.isNull(this.bufferingStartTime)||(A.isNull(this.bufferingTimeAccumulated)&&(this.bufferingTimeAccumulated=0),this.bufferingTimeAccumulated+=Date.now()-this.bufferingStartTime)}function g(){p.call(this),A.isNull(this.bufferingTimeAccumulated)||(this.log({type:"buffer",latency:this.bufferingTimeAccumulated}),this.bufferingStartTime=this.bufferingTimeAccumulated=null)}var _,m,y=n(9),v=n(7),E=n(10),S=n(12),A=n(13);_=t.exports=function(t,e){this.scAudio=t,this.logFn=e,this.controller=null,this.reset(),m=m||y(t.options.debug,"audioperf"),t.on(v.CREATED,i,this).on(v.RESET,r,this).on(v.DESTROYED,r,this).on(v.SEEK,c,this).on(v.SEEKED,l,this).on(v.PLAY,u,this).on(v.PLAY_START,s,this).on(v.PLAY_RESUME,h,this).on(v.PAUSE,g,this).on(v.FINISH,g,this).on(v.STATE_CHANGE,o,this).on(v.METADATA,a,this)},A.extend(_.prototype,E,{constructor:_,log:function(t){return this.controller?(A.extend(t,{protocol:this.protocol,host:this.host,playertype:this.controller.getType()}),m("(%s) %s latency: %d protocol: %s host: %s playertype: %s",this.scAudio.getId(),t.type,t.latency,t.protocol,t.host,t.playertype),void this.logFn(t)):void m.warn("(%s) Monitor log was called while controller is null (returned with a no-op)",this.scAudio.getId())},reset:function(){this.bufferingStartTime=this.bufferingTimeAccumulated=this.playClickTime=this.seekStartTime=this.metadataLoadStartTime=null,this.timeToPlayMeasured=!1}})},function(t,e){function n(){function t(t,n){for(var i,r=arguments.length,o=Array(r>2?r-2:0),s=2;r>s;s++)o[s-2]=arguments[s];"string"==typeof n?n=" "+n:(o.unshift(n),n=""),(i=window.console)[t].apply(i,[e()+" |"+c+"%c"+n].concat(l,o))}function e(){var t=new Date,e=null===h?0:t-h;return h=+t,"%c"+r(t.getHours())+":"+r(t.getMinutes())+":"+r(t.getSeconds())+"."+i(t.getMilliseconds(),"0",3)+"%c (%c"+i("+"+e+"ms"," ",8)+"%c)"}var n=arguments.length<=0||void 0===arguments[0]?!0:arguments[0],o=arguments.length<=1||void 0===arguments[1]?"":arguments[1];if(!n)return s;var h=null,c=a(o),l=["color: green","color: grey","color: blue","color: grey",u(o),""],f=t.bind(null,"log");return f.log=f,["info","warn","error"].forEach(function(e){f[e]=t.bind(null,e)}),f}function i(t,e,n){return o(e,n-(""+t).length)+t}function r(t){return i(t,"0",2)}function o(t,e){return e>0?new Array(e+1).join(t):""}function s(){}function a(t){return t?"%c"+t:"%c"}t.exports=n,s.log=s.info=s.warn=s.error=s;var u=function(){var t=["#51613C","#447848","#486E5F","#787444","#6E664E"],e=0;return function(n){return n?"background-color:"+t[e++%t.length]+";color:#fff;border-radius:3px;padding:2px 4px;font-family:sans-serif;text-transform:uppercase;font-size:9px;margin:0 4px":""}}()},function(t,e,n){t.exports=n(11)},function(t,e,n){!function(){function n(){return{keys:Object.keys||function(t){if("object"!=typeof t&&"function"!=typeof t||null===t)throw new TypeError("keys() called on a non-object");var e,n=[];for(e in t)t.hasOwnProperty(e)&&(n[n.length]=e);return n},uniqueId:function(t){var e=++a+"";return t?t+e:e},has:function(t,e){return o.call(t,e)},each:function(t,e,n){if(null!=t)if(r&&t.forEach===r)t.forEach(e,n);else if(t.length===+t.length)for(var i=0,o=t.length;o>i;i++)e.call(n,t[i],i,t);else for(var s in t)this.has(t,s)&&e.call(n,t[s],s,t)},once:function(t){var e,n=!1;return function(){return n?e:(n=!0,e=t.apply(this,arguments),t=null,e)}}}}var i,r=Array.prototype.forEach,o=Object.prototype.hasOwnProperty,s=Array.prototype.slice,a=0,u=n();i={on:function(t,e,n){if(!c(this,"on",t,[e,n])||!e)return this;this._events||(this._events={});var i=this._events[t]||(this._events[t]=[]);return i.push({callback:e,context:n,ctx:n||this}),this},once:function(t,e,n){if(!c(this,"once",t,[e,n])||!e)return this;var i=this,r=u.once(function(){i.off(t,r),e.apply(this,arguments)});return r._callback=e,this.on(t,r,n)},off:function(t,e,n){var i,r,o,s,a,h,l,f;if(!this._events||!c(this,"off",t,[e,n]))return this;if(!t&&!e&&!n)return this._events={},this;for(s=t?[t]:u.keys(this._events),a=0,h=s.length;h>a;a++)if(t=s[a],o=this._events[t]){if(this._events[t]=i=[],e||n)for(l=0,f=o.length;f>l;l++)r=o[l],(e&&e!==r.callback&&e!==r.callback._callback||n&&n!==r.context)&&i.push(r);i.length||delete this._events[t]}return this},trigger:function(t){if(!this._events)return this;var e=s.call(arguments,1);if(!c(this,"trigger",t,e))return this;var n=this._events[t],i=this._events.all;return n&&l(n,e),i&&l(i,arguments),this},stopListening:function(t,e,n){var i=this._listeners;if(!i)return this;var r=!e&&!n;"object"==typeof e&&(n=this),t&&((i={})[t._listenerId]=t);for(var o in i)i[o].off(e,n,this),r&&delete this._listeners[o];return this}};var h=/\s+/,c=function(t,e,n,i){if(!n)return!0;if("object"==typeof n){for(var r in n)t[e].apply(t,[r,n[r]].concat(i));return!1}if(h.test(n)){for(var o=n.split(h),s=0,a=o.length;a>s;s++)t[e].apply(t,[o[s]].concat(i));return!1}return!0},l=function(t,e){var n,i=-1,r=t.length,o=e[0],s=e[1],a=e[2];switch(e.length){case 0:for(;++i<r;)(n=t[i]).callback.call(n.ctx);return;case 1:for(;++i<r;)(n=t[i]).callback.call(n.ctx,o);return;case 2:for(;++i<r;)(n=t[i]).callback.call(n.ctx,o,s);return;case 3:for(;++i<r;)(n=t[i]).callback.call(n.ctx,o,s,a);return;default:for(;++i<r;)(n=t[i]).callback.apply(n.ctx,e)}},f={listenTo:"on",listenToOnce:"once"};u.each(f,function(t,e){i[e]=function(e,n,i){var r=this._listeners||(this._listeners={}),o=e._listenerId||(e._listenerId=u.uniqueId("l"));return r[o]=e,"object"==typeof n&&(i=this),e[t](n,i,this),this}}),i.bind=i.on,i.unbind=i.off,i.mixin=function(t){var e=["on","once","off","trigger","stopListening","listenTo","listenToOnce","bind","unbind"];return u.each(e,function(e){t[e]=this[e]},this),t},"undefined"!=typeof t&&t.exports&&(e=t.exports=i),e.BackboneEvents=i}(this)},function(t,e){var n={getUrlParams:function(t){var e={},n=t.indexOf("?");return n>-1&&t.substr(n+1).split("&").forEach(function(t){var n=t.split("=");e[n[0]]=n[1]}),e},getUrlHost:function(t){var e,n=t.split("//");return e=n[0]===t?n[0].split("/")[0]:n[1]?n[1].split("/")[0]:""}};t.exports=n},function(t,e){var n={extend:function(t){var e=Array.prototype.slice.call(arguments,1);return e.forEach(function(e){if(e)for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])}),t},each:function(t,e,n){Object.keys(t).forEach(function(i){e.call(n||null,t[i],i)})},without:function(t,e){var n=t.indexOf(e);n>-1&&t.splice(n,1)},result:function(t){var e=t;return n.isFunction(e)&&(e=t()),e},isFunction:function(t){return"function"==typeof t},after:function(t,e){return function(){return--t<1?e.apply(this,arguments):void 0}},isNull:function(t){return null===t},once:function(t){var e,n=!1;return function(){return n?e:(n=!0,void(e=t.apply(this,arguments)))}}};t.exports=n},function(t,e){var n={AAC:"aac",MP3:"mp3",OGG:"ogg",OPUS:"opus",WAV:"wav"};t.exports=n},function(t,e){var n={HTTP:"http",RTMP:"rtmp",HLS:"hls"};t.exports=n},function(t,e,n){function i(t){return h.supportsMediaSourceExtensions()&&t.mediaSourceEnabled&&(h.isChrome()&&h.getChromeVersion()>=35||h.isFirefox()&&t.mseFirefox||h.isSafari()&&t.mseSafari)}function r(t){return function(e){var n=!1;switch(e){case u.RTMP:n=h.supportsFlash();break;case u.HTTP:n=h.supportsHTML5Audio()||h.supportsFlash();break;case u.HLS:n=i(t)}return n}}function o(t){return h.isSafari()||h.isFirefox()?[u.HLS,u.HTTP,u.RTMP]:t}function s(t){t.protocols=o(t.protocols).filter(r(t))}var a,u=n(15),h=n(17);a={prioritizeAndFilter:s},t.exports=a},function(t,e){function n(t){return t.test(window.navigator.userAgent.toLowerCase())}function i(t,e){try{return window.navigator.userAgent.toLowerCase().match(t)[e]}catch(n){return null}}function r(){try{return parseInt(i(/chrom(e|ium)\/([0-9]+)\./,2),10)}catch(t){return NaN}}function o(){return!h()&&n(/safari/)}function s(){return o()&&n(/version\/7\.1/)}function a(){return o()&&n(/version\/8/)&&!n(/version\/80/)}function u(){return o()&&n(/version\/9\./)}function h(){return n(/chrom(e|ium)/)}function c(){return n(/firefox/)}function l(){return!!window.MediaSource&&(window.MediaSource.isTypeSupported("audio/mpeg")||window.MediaSource.isTypeSupported("audio/mp4"))}function f(){try{return window.hasOwnProperty("Audio")&&!!(new window.Audio).canPlayType("audio/mpeg")}catch(t){return!1}}function d(){try{var t=o()&&n(/version\/5\.0/),e=window.hasOwnProperty("Audio")&&(!!(new window.Audio).canPlayType('audio/x-mpegURL; codecs="mp3"')||!!(new window.Audio).canPlayType('vnd.apple.mpegURL; codecs="mp3"'));return!t&&e}catch(i){return!1}}function p(){return _(g())>=y}function g(){var t,e,n,i;if("undefined"!=typeof window.ActiveXObject)try{i=new window.ActiveXObject("ShockwaveFlash.ShockwaveFlash"),i&&(t=i.GetVariable("$version"))}catch(r){t=null}else window.navigator&&window.navigator.plugins&&window.navigator.plugins.length>0&&(n="application/x-shockwave-flash",e=window.navigator.mimeTypes,e&&e[n]&&e[n].enabledPlugin&&e[n].enabledPlugin.description&&(t=e[n].enabledPlugin.description));return t}function _(t){if(!t)return 0;var e=t.match(/\d\S+/)[0].replace(/,/g,".").split(".");return parseFloat([e[0],e[1]].join("."))||0}var m,y=9;m={flashPlugin:g,isSafari:o,isSafari71:s,isSafari8:a,isSafari9:u,isChrome:h,getChromeVersion:r,isFirefox:c,supportsNativeHLSAudio:d,supportsHTML5Audio:f,supportsFlash:p,supportsMediaSourceExtensions:l},t.exports=m},function(t,e,n){function i(t){var e=f.getUrlHost(t);return p.every(function(t){return 0!==e.indexOf(t)})}function r(t,e){return!(t===c.HLS&&!i(e))}function o(t,e){if(!t)return!1;var n=t.issuedAt+s(t.protocol,t.duration);return a(t.protocol)?Date.now()+t.duration-(e||0)<n:Date.now()<n}function s(t,e){var n=a(t);return g+(n?l.result(e):0)}function a(t){return t===c.HTTP||t===c.HLS}function u(t,e){function n(t){return-1*t}function i(t,e){return Math.abs(e-m)-Math.abs(t-m)}var o,s,a,u,h,c,f,d,p,g,_={},m=e.maxBitrate,y=e.protocols,v=e.extensions;for(l.each(t,function(t,e){var n=e.split("_"),i=n[0],r=n[1],o=n[2];_[i]=_[i]||{},_[i][r]=_[i][r]||{},_[i][r][o]=t}),h=0,c=y.length;c>h;++h)for(u=y[h],d=0,p=v.length;p>d;++d)if(f=v[d],_[u]&&_[u][f]){if(o=Object.keys(_[u][f]).map(Number).sort(n),s=m===1/0,a=m===-(1/0),m=s||a?o[s?"pop":"shift"]():o.sort(i).pop(),g=_[u][f][m],!r(u,g))continue;return{url:g,bitrate:m,protocol:u,extension:f,issuedAt:Date.now(),duration:l.result(e.duration)}}return null}var h,c=n(15),l=n(13),f=n(12),d=.9,p=[],g=Math.floor(12e4*d);h={choosePreferredStream:u,streamValidForPlayingFrom:o},t.exports=h},function(t,e,n){var i,r,o=n(7),s=n(13),a={Linear:0,EaseOut:1,EaseInOut:2},u=600,h=25;t.exports=i={},i.VolumeAutomator=r=function(t){this.scAudio=t,this.fadeOutAlgo=this.scAudio.options.fadeOutAlgo,this.fadeOutTimer=null,this.initialVolume=void 0,this.scAudio.options.fadeOutOnPause&&r.isSupported()&&(this.scAudio.on(o.PLAY,this.onPlay,this),this.scAudio.registerHook("pause",this.hookPause.bind(this)))},i.VolumeAutomator.isSupported=function(){var t=new window.Audio,e=t.volume,n=0===e?1:e/2;return t.volume=n,t.volume===n},i.VolumeAutomator.Algos=a,s.extend(r.prototype,{fadeOutAndPause:function(){var t=Date.now(),e=function(){var n,i=(Date.now()-t)/u,r=this.initialVolume;if(i>=1)this.scAudio.controller&&this.scAudio.controller.pause(),this.cancelFadeout();else{switch(this.fadeOutAlgo){case a.Linear:n=r*(1-i);break;case a.EaseOut:n=r*(1/(10*(i+.1))-.05);break;case a.EaseInOut:default:n=r*(Math.cos(i*Math.PI)/2+.5)}this.scAudio.setVolume(n),window.clearTimeout(this.fadeOutTimer),this.fadeOutTimer=window.setTimeout(e,h)}}.bind(this);this.initialVolume=this.scAudio.getVolume(),e()},cancelFadeout:function(){this.fadeOutTimer&&(window.clearTimeout(this.fadeOutTimer),this.fadeOutTimer=null,this.scAudio.setVolume(this.initialVolume),this.initialVolume=void 0)},hookPause:function(t){return this.fadeOutAndPause(),!1},onPlay:function(){this.cancelFadeout()}})}])},function(t,e){}])});
//# sourceMappingURL=sdk.js.map

/***/ }),
/* 1 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__controls_toast__ = __webpack_require__(4);


class Utils {

     /**
     * Simple function to convert milliseconds to a string with minutes and seconds
     * @param {*int} millis - time in milliseconds
     */
    static convertMillisecondsToDigitalClock(ms) {
        let hours = Math.floor(ms / 3600000), // 1 Hour = 36000 Milliseconds
        minutes = Math.floor((ms % 3600000) / 60000), // 1 Minutes = 60000 Milliseconds
        seconds = Math.floor(((ms % 360000) % 60000) / 1000) // 1 Second = 1000 Milliseconds
        return {
            hours : hours,
            minutes : minutes,
            seconds : seconds,
            clock : ((hours === 0) ? '' : hours + ':') + (seconds < 10 && hours > 0 ? '0' : '') + minutes + ':' + (seconds < 10 ? '0' : '') + seconds
        };
    }

    /**
     * Grab a random image when a song does not have cover art.
     */
    static fetchRandomImage() {
        let i = Math.floor(Math.random() * 4050) + 1;
        return `http://img.infinitynewtab.com/wallpaper/${i}.jpg`;
    }

    static showToast(message) {
        this.toastContainer = document.getElementById('toastContainer');
        this.toastContainer.innerHTML = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__controls_toast__["a" /* default */])(message, '');
        setTimeout(function() { 
            $('#toast').addClass('shown');
        }, 500);
        setTimeout(function() { // Hide toast
            $('#toast').removeClass('shown');
        }, 3000);
    }
}

/* harmony default export */ __webpack_exports__["a"] = (Utils);

/***/ }),
/* 2 */
/***/ (function(module, exports) {

module.exports = {
	"client_id": "2t9loNQH90kzJcsFCODdigxfp325aq4z",
	"client_secret": "a05kSM418xnhpSvPVPXzQBRjmO1s8GWW"
};

/***/ }),
/* 3 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
class Settings {

    static loadPrefs() {
        this.batterySaverCSS = "<style id='batterySaver'>* {-webkit-filter: none !important;filter: none !important; transition: none !important; -webkit-transition: none; !important}#histItemBg {-webkit-filter: brightness(.5) !important;filter: brightness(.5) !important; }</style>";
        
        // Default settings object
        this._settings = {
            batterySaver: false
        }
        this._settings.batterySaver = this.getPref('batterySaver') || false;
    }

    static storePref(name, value) {
        localStorage.setItem(name, value);
    }

    static getPref(name) {
        return localStorage.getItem(name);
    }

}

/* harmony default export */ __webpack_exports__["a"] = (Settings);

/***/ }),
/* 4 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
const Toast = (text, shown) => (
    `
        <div class="toast ${shown}" id="toast">
            <p class="text-center">${text}</p>
        </div>
    `
);
/* harmony default export */ __webpack_exports__["a"] = (Toast);

/***/ }),
/* 5 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__consts_sec_json__ = __webpack_require__(2);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__consts_sec_json___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0__consts_sec_json__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__controls_HistItem__ = __webpack_require__(6);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__controls_songinfo__ = __webpack_require__(11);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__controls_waveform__ = __webpack_require__(12);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__request__ = __webpack_require__(14);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__controls_search__ = __webpack_require__(10);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__controls_toast__ = __webpack_require__(4);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__controls_dashboard__ = __webpack_require__(8);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__utils__ = __webpack_require__(1);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9__settings__ = __webpack_require__(3);











const SC = __webpack_require__(0); // Import node module

// Soundcloud Properties 

// Oldest range (around 2007 onward)
const RAND_COUNT = 90000;
const OFFSET = 0;

// Going from 2010
const RAND_COUNT_1 = 7000000;
const OFFSET_1 = 3000000;

// More Recent
const RAND_COUNT_2 = 90000000;
const OFFSET_2 = 10000000;

// The fresh stuff
const RAND_COUNT_3 = 300000000;
const OFFSET_3 = 100000000;

// Widget Parameters
//const WIDGET_PARAMS = '&liking=false&show_artwork=false&show_comments=false&show_playcount=false&visual=false';
const WIDGET_PARAMS = '';

class Player {

    /**
     * Sets up the the application variables and hooking events to controls.
     */
    constructor() {
        // Initialize variables
        this.history = [];
        this.queue = []; // For tracks playing next
        this.isPlaying = false;
        this.curPlayer = null;
        this.curPosition = 0;
        this.waveform = null;
        this.isRepeating = false; // For repeating songs
        this.hasBeenFetched = false; // Used to stop duplicates during recursion
        this.timerUpdate = 0;
        this.isPlaylist = false; // Check if we are playing a playlist.
        this.setCurIndex = 0; // The current index of the song in the playlist
        this.setTrackCount = 0; // This holds the number of tracks in the playlist so we can tell when we have reached the end.
        this.shuffleQueue = false; // Should the queue be shuffled when we get a list of tracks;
        this.queueNum = 120; // How many results to add to the queue

        // Experimental API v2 Endpoint
        this.SOUNDCLOUD_API_V2 = 'https://api-v2.soundcloud.com/';

        // Widget Props
        this.widgetTrack = {
            cover: '',
            title: '',
            id: 0,
            artist: '',
            permalink_url: '',
            description: '',
            created_at: '',
            duration: 0,
            currentPosition: 0
        };

        // Bind page elements 
        this.bindControlElements();
        this.bindControlEvents();

        // Initialize Search dialog
        this.searchDialog = new __WEBPACK_IMPORTED_MODULE_5__controls_search__["a" /* default */](this);
        
        // Initialize the dashboard, also initializes settings
        this.dashboard = new __WEBPACK_IMPORTED_MODULE_7__controls_dashboard__["a" /* default */](this);

        // Settings already Initialized
        if (JSON.parse(__WEBPACK_IMPORTED_MODULE_9__settings__["a" /* default */].getPref('batterySaver'))) {
            $(__WEBPACK_IMPORTED_MODULE_9__settings__["a" /* default */].batterySaverCSS).appendTo("head");
        }

        // Load a track when the app is loaded (take url param into account).
        document.getElementById('widgettest').setAttribute('src', 'https://w.soundcloud.com/player/?url=https%3A//api.soundcloud.com/tracks/170202151' + WIDGET_PARAMS);
        let iframeID = document.getElementById('widgettest');
        this.curPlayer = SC.Widget(iframeID);
        // Update the player
        this.bindWidgetEvents(this.curPlayer); // Bind event handlers for widget.
        
        // Check for params and then decide what to play
        this.checkParamsAndFetch();

        console.log('construct done');
    }

    /**
     * Binds the page elements to JS objects so we can access them in other functions.
     */
    bindControlElements() {
        this.mainPlayer = document.getElementById('songContainer');
        this.playBtn = document.getElementById('play-btn');
        this.histContainer = document.getElementById('histContainer');
        this.btnFf = document.getElementById('seek-fw-btn');
        this.btnBk = document.getElementById('seek-bk-btn');
        this.btnSearch = document.getElementById('custom-btn');
        this.btnRepeat = document.getElementById('repeat-btn');
        this.btnDashboard = document.getElementById('dashboard-btn');
    }

    /**
     * Binds components on the page to commands on action.
     */
    bindControlEvents() {
        this.playBtn.onclick = (e) => {
            // if (this.curPlayer === null && !this.isPlaying)
            //     this.updateStream(this.getRandomTrack());
            this.togglePlay();

            // Check if song title matches title in app
            if ($('#songTitle').value !== this.curPlayer.title) {
                this.curPlayer.getCurrentSound((song) => {
                    this.updateSongInfo(song);
                });
            }
        }

        // Event handler for seeking forward / fetch new song
        this.btnFf.onclick = (e) => {
            if (this.queue.length > 0 || this.isPlaylist) {
                this.seekForward(); // Seek forward in queue
            } else { // Else just load another song
                this.fetchNext();
            }
        }

        // Event handler for seeking back
        this.btnBk.onclick = (e) => {
            if (this.curPosition > 10000) { // If the song is past 10 seconds, reset song back to beginning (like in Spotify)
                this.restartSong();
            } else { // Else, go to the last song
                this.seekBack();
            }
        }

        // Event handler to play custom song
        this.btnSearch.onclick = (e) => {
            this.searchDialog.toggleSearchDialog();
        }
        
        // Event handler for repeats
        this.btnRepeat.onclick = (e) => {
            this.isRepeating = !this.isRepeating; // Toggle the value
            if (this.isRepeating) {
                this.btnRepeat.style.color = '#ff2160';
            } else {
                this.btnRepeat.style.color = 'inherit';
            }
        }

        // Event handler to show dashboard
        this.btnDashboard.onclick = (e) => {
            this.dashboard.toggleDashboard();
        }

        // Bind keyboard shortcuts
        document.onkeydown = (e) => {
            if (e.keyCode == 32) {
                // space key to toggle playback
                var tag = e.target.tagName.toLowerCase();
                if (tag != 'input') // Ignore the search field
                    this.togglePlay();

            } else if (e.shiftKey && e.keyCode == 38) {
                // shift up
                this.volumeUp(10);
            } else if (e.shiftKey && e.keyCode == 40) {
                // shift down
                this.volumeDown(10);

            } else if (e.shiftKey && e.keyCode == 66) {
                let id = prompt("Enter song id.");
                if (id == null)
                    return;

                document.getElementById('widgettest').setAttribute('src', `https://w.soundcloud.com/player/?url=https%3A//api.soundcloud.com/tracks/${id}` + WIDGET_PARAMS);
                let iframeID = document.getElementById('widgettest');
                this.curPlayer = SC.Widget(iframeID);
                this.curPlayer.load(`https%3A//api.soundcloud.com/tracks/${id}` + WIDGET_PARAMS);
                // Update the player
                this.bindWidgetEvents(this.curPlayer); // Bind event handlers for widget.
                this.togglePlay();
                setTimeout(() => this.loadWidgetSong(this.curPlayer), 1000);
            }
        }

    }

    /**
     * Attempts to load information associated to the widget to local vars and displays them
     * @param {SoundCloudWidget} widget - widget loaded by API
     */
    loadWidgetSong(widget) {
        try {
            console.log('loadwidgetsong called');
            this.waveform = null; // Reset the reference
            widget.getCurrentSound((song) => {
                //console.log(song);
                let rndImg = __WEBPACK_IMPORTED_MODULE_8__utils__["a" /* default */].fetchRandomImage();
                this.updateSongInfo(song);

                let found = false; // Boolean to see if the song exists
                if (this.history.length > 0 || this.queue.length > 0) {
                    let songList = this.history.concat(this.queue); // Use this to prevent adding any duplicates
                    for (let i = 0; i < songList.length; i++) {
                        if (songList[i]._resource_id === song._resource_id) {
                            found = true;
                        }
                    };

                    if (!found) { // Append the song if not found
                        this.history.push(song); // Push the track so it can be replayed from history. 
                        let h = new __WEBPACK_IMPORTED_MODULE_1__controls_HistItem__["a" /* default */]((song.artwork_url === null ? rndImg : song.artwork_url), song, this, "javascript:alert('Download link unavailable');");
                        this.histContainer.appendChild(h.render()); // Append to history

                        $('.action-bar-item').click((e) => { // Stop button clicks from triggering playing the song
                            e.stopPropagation();
                        });
                    }
                } else {
                    this.history.push(song); // Push the track so it can be replayed from history. 
                    let h = new __WEBPACK_IMPORTED_MODULE_1__controls_HistItem__["a" /* default */]((song.artwork_url === null ? rndImg : song.artwork_url), song, this, "javascript:alert('Download link unavailable');");
                    this.histContainer.appendChild(h.render()); // Append to history
                    $('.action-bar-item').click((e) => { // Stop button clicks from triggering playing the song
                        e.stopPropagation();
                    });
                }

                this.hasBeenFetched = false; // Reset

                console.log('getcurrentsound done');
            }, (err) => {
                console.log(err.message);
            });

            // Update the play state
            this.togglePlayState(true);
            return;
        } catch (ex) {
            console.log(ex.message);
        }
    }

    updateSongInfo(song) {
        console.log('getcurrentsound start');
        // if( /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)) { // Attempt to fix on mobile devices
            
        //     // Sorry can not auto play on mobile =_(
        //     // https://stackoverflow.com/questions/26066062/autoplay-html5-audio-player-on-mobile-browsers
        //     // Need to use trick.
        //     // widget.play();
        //     // setTimeout(() => {
        //     //         $('#play-btn').trigger('click'); // Cannot fix autoplay issue, but now users can play the track with 1 tap of the play button instead o several (bug fix)
        //     //         console.log('test play')
        //     //     }, 2000);
        //     // this.togglePlayState(true);
        // } else {
        this.curPlayer.play(); // Play normally on non mobile
        this.togglePlayState(true);
        //}
        this.isPlaying = true;
        let rndImg = __WEBPACK_IMPORTED_MODULE_8__utils__["a" /* default */].fetchRandomImage();
        this.widgetTrack.cover = song.artwork_url;
        this.widgetTrack.title = song.title;
        this.widgetTrack.id = song.id;
        this.widgetTrack.artist = song.user.username || 'N/A'; // Some tracks don't have a usernme associated
        this.widgetTrack.permalink_url = song.permalink_url;
        this.widgetTrack.description = song.description || 'N/A';
        this.widgetTrack.created_at = song.created_at;
        this.widgetTrack.duration = song.duration || 'N/A';
        this.widgetTrack.currentPosition = 0;

        document.title = `\u25B6   Nimbus - ${this.widgetTrack.title}`;

        // Create tag list
        let tagBtns = ``;
        let tagCollection = song.tag_list;
        
        // Get tags that are inside quotes already (treat multiple words as 1 tag)
        let quotedTags = song.tag_list.match(/(["'])(?:(?=(\\?))\2.)*?\1/g);

        // Clean the original list
        tagCollection = tagCollection.replace(/(["'])(?:(?=(\\?))\2.)*?\1/g, ''); // Remove all double quoted entries
        tagCollection = tagCollection.split(' ');
        tagCollection = tagCollection.concat(quotedTags);

        if (song.tag_list !== '') {
            for (let i = 0; i < tagCollection.length; i++) {
                let tagName = tagCollection[i];
                if (tagName !== '' && tagName !== null) {
                    tagName = tagName.replace(/\"/g, '');
                    tagBtns += `<a href="https://soundcloud.com/tags/${tagName}" target="_blank"><button class="btn-transparent">
                        #${tagName}
                    </button></a>
                    `;
                }
            }
        }

        this.mainPlayer.innerHTML = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_2__controls_songinfo__["a" /* default */])((song.artwork_url === null ? song.user.avatar_url : song.artwork_url.replace('large', 't500x500')), song, tagBtns, "javascript:alert('Purchase link unavailable');");
        //this.curTrack.track = track;
        document.getElementById('background').style.backgroundImage = 'url(' + (song.artwork_url === null ? rndImg : song.artwork_url.replace('large', 't500x500')) + ')';

        // Add listener for flipContainer
        this.flipContainer = document.getElementById('flipContainer');
        this.flipContainer.onclick = (e) => {
            $('#flipContainer').toggleClass('flipped');
        }

        this.volumeSlider = document.getElementById('volumeSlider');

        // Update the volume
        this.curPlayer.getVolume((vol) => {
            this.volumeSlider.value = vol;
        });

        this.volumeSlider.addEventListener('change', () => {
            this.curPlayer.setVolume(this.volumeSlider.value);
        }, false);

        // Async method to build waveform
        (async function() {
            let req = new __WEBPACK_IMPORTED_MODULE_4__request__["a" /* default */](); // Construct it
            let data = await req.getJSON(song.waveform_url);
            console.log(song.waveform_url);

            // Draw the waveform
            const waveFormContainer = document.querySelector('.waveform');
            if (!this.waveform) {
                this.waveform = new __WEBPACK_IMPORTED_MODULE_3__controls_waveform__["a" /* default */]({
                container: waveFormContainer,
                audio: this.curPlayer,
                duration: song.duration,
                data: data.samples,
                peakWidth: 2,
                peakSpace: 1,
                responsive: true,
                mouseOverEvents: true,
                mouseClickEvents: true,
                color: {
                    background: "rgba(140, 140, 140, 0.7)",
                    footer: "rgba(90, 90, 90, 0.6)",
                    footerPlayback: "#5d1835",
                    hoverGradient: {
                        from: "#d91e53",
                        to: "#d91e53"
                    },
                    playbackGradient: {
                        from: "#d91e53",
                        to: "#d91e53"
                    },
                    hoverPlaybackGradient: {
                        from: "#ff2160",
                        to: "#ff2160"
                    }
                }
            });
        } else {
            await waveform.updateWaveformData(data.samples);
        }
        }).bind(this)();

    }

    /**
     * The starting point of the application called by app.js. This initalizes the SoundCloud API.
     */
    start() {
        try {
            SC.initialize({
                client_id: __WEBPACK_IMPORTED_MODULE_0__consts_sec_json___default.a.client_id
            });
        } catch (e) {
            console.log('Error initializing SoundCloud API. Stack trace: ' + e.toString());
        }
        console.log('SoundCloud API initalized!');
    }

    /**
     * Bind event handlers to the widget
     * @param {SoundCloudWidget} widget - widget loaded from API
     */
    bindWidgetEvents(widget) {
        console.log("cool");
        this.curPlayer = widget;
        widget.bind(SC.Widget.Events.READY, (e) => {

            // Bind when the song is playing
            widget.bind(SC.Widget.Events.PLAY_PROGRESS, (e) => {
                this.curPosition = e.currentPosition;
                let curTimeStr = __WEBPACK_IMPORTED_MODULE_8__utils__["a" /* default */].convertMillisecondsToDigitalClock(e.currentPosition).clock;
                let totalTimeStr = __WEBPACK_IMPORTED_MODULE_8__utils__["a" /* default */].convertMillisecondsToDigitalClock(this.widgetTrack.duration).clock;
                document.getElementById('curTime').innerText = `${curTimeStr} / ${totalTimeStr}`;
                
                // For some reason FINISH event no longer fires when changing songs in playlist, manual override here
                if (e.currentPosition === 0) {
                    if (this.isPlaylist && !this.isRepeating) {
                        this.loadWidgetSong(this.curPlayer); // Update track info to the next song in the playlist
                    } else if (this.isPlaylist && this.isRepeating) { // Replay set
                        this.curPlayer.pause();
                        setTimeout(() => {
                            this.curPlayer.prev();
                            this.loadWidgetSong(this.curPlayer);
                        }, 500);

                    }
                }
            });

            // Bind when the song has finished
            widget.bind(SC.Widget.Events.FINISH, (e) => {
                // When the song finishes, we need to find a new song to play.
                console.log('finished');
                this.isPlaying = false;

                // Check if user is playing a playlist
                if (this.isPlaylist && !this.isRepeating) {
                    let oldSongID = this.widgetTrack.id;
                    this.togglePlay();
                    this.loadWidgetSong(this.curPlayer); // Update track info to the next song in the playlist
                    this.isPlaying = false;
                    setTimeout(() => {
                        // Check if we have reached the end of the playlist
                        if (oldSongID === this.widgetTrack.id) { // If the last song we played has the same ID as the new one, fetch a new song. (SoundCloud ends up looping the last song again)
                            this.isPlaylist = false;
                            this.setCurIndex = 0;
                            this.setTrackCount = 0;
                            this.fetchNext();
                        } else {
                            this.restartSong();
                            this.togglePlay();
                            this.curPlayer.play();
                        }
                    }, 200);
                    return;
                }

                // Check if repeat is on first. TODO: Make it work with playlists
                if (this.isRepeating) {
                    if (this.isPlaylist) { // If we are repeating in a playlist, we need to go back to previous song since the API preloads the next one
                        this.restartSong();
                        this.curPlayer.pause();
                        this.curPlayer.pause();
                        setTimeout(this.curPlayer.prev(), 200);
                        return;
                    } else {
                        // Else we can just restart the song (API does not preload song)
                        this.restartSong();
                        this.togglePlay();
                        return;
                    }
                }
                
                // Check if the queue is not empty and play whatever song that is next in the queue
                if (this.queue.length > 0) {
                    let nextSong = this.queue.pop(); // Pop the next song

                    if (nextSong) { // If not null
                        this.curPlayer.load(nextSong.permalink_url);
                        setTimeout(() => this.loadWidgetSong(this.curPlayer), 2000); // Update player info, song will be added to history here
                    }
                } else if (!this.hasBeenFetched) { // If we have fetched a song already, do not fetch another one.
                    this.fetchNext();
                    this.hasBeenFetched = true;
                }
            });

            // Bind play state event
            widget.bind(SC.Widget.Events.PLAY, (e) => {
                this.togglePlayState(true);
            });

            // Bind pause state event
            widget.bind(SC.Widget.Events.PAUSE, (e) => {
                this.togglePlayState(false);
            });

            // Throw error in case user enters invalid URL
            widget.bind(SC.Widget.Events.ERROR, (e) => {
                alert('Error, unable to load resource.');
            });

        });
    }

    /**
     * This function is designed to get a random track from SoundCloud
     */
    getRandomTrack() {
        try {
            // Choose to use old track ids or new track ids
            let chooseId = (Math.floor(Math.random() * 10));
            let trackId = 0;

            // Generate random song id. Give slight preference to newer tracks 
            if (chooseId > 4) {
                trackId = Math.floor((Math.random() * RAND_COUNT_3) + OFFSET_3);
            } else if (chooseId > 2) {
                trackId = Math.floor((Math.random() * RAND_COUNT_2) + OFFSET_2);
            } else if (chooseId > 1) {
                trackId = Math.floor((Math.random() * RAND_COUNT_1) + OFFSET_1);
            } else {
                trackId = Math.floor((Math.random() * RAND_COUNT) + OFFSET);
            }

            console.log('in id');

            return trackId;
        } catch (e) {
            console.log('getRandomTrack() - ' + e.toString());
        }
    }

    /**
     * Extracts address paramters by name and loads the appropriate content.
     * 
     * 
     * @memberof Player
     */
    checkParamsAndFetch() {
        // Fetch param values if present
        let id = this.getURLParamsByName('id', window.location.href);
        let url = this.getURLParamsByName('url', window.location.href);

        // Do not fetch a random song if an id was already provided
        if (id) // id takes takes precedence
            this.streamSong(id);
        else if (url)
            this.curPlayer.load(url); // Load the song by url (Widget API takes care of the rest)
        else
            this.fetchNext();
    }

    /**
     * Update the UI controls for when the song is playing
     * @param {boolean} playing - if the song is playing or not
     */
    togglePlayState(playing) {
        if (playing) {
            this.playBtn.innerHTML = '<i class="fa fa-pause" aria-hidden="true"></i>';
            document.title = `\u25B6   Nimbus - ${this.widgetTrack.title}`;
        } else {
            this.playBtn.innerHTML = '<i class="fa fa-play" aria-hidden="true"></i>';
            document.title = `\u23F8   Nimbus - ${this.widgetTrack.title}`;
        }
    }

    // UTIL functions
    /**
     * Seek to next song in queue
     */
    seekForward() {
        // If we are in playlist mode, play the next song in the playlist and do not fetch a new song
        console.log(this.isPlaylist);
        if (this.isPlaylist) {
            let nextSongID = this.widgetTrack.id;
            this.restartSong();
            this.curPlayer.pause();
            this.curPlayer.pause(); // Widget not really responsive when user goes back and forth quickly
            setTimeout(this.curPlayer.next(), 200);
            this.restartSong(); // Seems weird to call restartSong() so many times, but this is used to reset the songs and avoid the weird bug where the player plays 2 songs simulatenously.
            this.curPlayer.play();
            this.curPlayer.pause(); // Same interrupted Promise issue from API
            this.curPlayer.play();
            setTimeout(() => {
                this.loadWidgetSong(this.curPlayer);
                setTimeout(() => {
                    console.log(this.widgetTrack.id + ' - ' + nextSongID);
                    if (this.widgetTrack.id === nextSongID) { // If we have reached the end of the playlist
                        this.isPlaylist = false;
                        this.setCurIndex = 0;
                        this.setTrackCount = 0;
                        this.fetchNext();
                    }
                }, 200);

            }, 200);
        } else {
            let nextSong = this.queue.pop(); // Pop the next song

            if (nextSong) { // If not null
                this.curPlayer.load(nextSong.permalink_url);
                setTimeout(() => this.loadWidgetSong(this.curPlayer), 2000); // Update player info, will add song to history
            }
        }
    }

    /**
     * Rewind to previous song
     */
    seekBack() {
        // this.isPlaylist = false; // Exit playlist mode so we don't end up stuck in a loop with songs
        // If we are in a playlist, simply move back to the previous song
        if (this.isPlaylist) {
            let lastSongID = this.widgetTrack.id;
            this.restartSong();
            this.curPlayer.pause();
            this.curPlayer.pause();
            setTimeout(this.curPlayer.prev(), 200); // Player not cooperating with async
            this.restartSong(); // Seems weird to call restartSong() so many times, but this is used to reset the songs and avoid the weird bug where the player plays 2 songs simulatenously.
            setTimeout(() => {
                this.loadWidgetSong(this.curPlayer);
                setTimeout(() => {
                    console.log(this.widgetTrack.id + ' - ' + lastSongID);
                    if (this.widgetTrack.id === lastSongID) { // If we have reached the beginning of the playlist
                        this.loadPreviousSong();
                    }
                }, 200); // Needed to be done to allow time for async request to complete in loadWidgetSong()
                
            }, 200);
            this.curPlayer.play();
            this.curPlayer.pause(); // Same interrupted Promise issue from API
            this.curPlayer.play();
            return;
        }
        console.log('not playlist');

        this.loadPreviousSong();
    }

    loadPreviousSong() {
        this.isPlaylist = false;

         // Pop current song and add it to queue so it is our next song
        this.queue.push(this.history.pop());
        let prevSong = this.history[this.history.length - 1];

        if (prevSong) { // If not null
            this.curPlayer.load(prevSong.permalink_url);
            console.log(prevSong.permalink_url);
            setTimeout(() => this.loadWidgetSong(this.curPlayer), 2000); // Update player info
        }
    }

    /**
     * Resets the song back to 0
     */
    restartSong() {
        this.curPlayer.seekTo(0);
    }

    /**
     * Increases the volume with the maximum bound being 100.
     * @param {float} offset - how much to increase the volume by
     */
    volumeUp(offset) {
        this.curPlayer.getVolume((vol) => {
            this.curPlayer.setVolume(Math.min(100, vol + offset));
            this.volumeSlider.value = Math.min(100, vol + offset);
        });
    }

    /**
     * Lowers the volume by offset with the minimum bound being 0.
     * @param {float} offset - how much to lower the volume by
     */
    volumeDown(offset) {
        this.curPlayer.getVolume((vol) => {
            this.curPlayer.setVolume(Math.max(0, vol - offset));
            this.volumeSlider.value = Math.max(0, vol - offset);
        });
    }

    /**
     * Updates controls to show that the song is in progress.
     */
    togglePlay() {
        if (!this.isPlaying) {
            // Nuanced but adds that 'break' in the sound so you know it was pressed just in case isPlaying is the wrong value
            this.curPlayer.play(); 
            console.log('isPlaying = true');
            this.isPlaying = true;
            // this.mainPlayer.innerHTML = SongInfo((this.curTrack.track.artwork_url === null ? '../img/cd.png' : this.curTrack.track.artwork_url.replace('large', 't500x500')), this.curTrack.track);
            // Update play state
            this.togglePlayState(true);
        } else {
            this.curPlayer.pause();

            // Update play state
            this.togglePlayState(false);
            this.isPlaying = false;
        }
    }

    /**
     * Fetch the next song and verify that the song exists (non 404).
     */
    fetchNext() {
        try {
            console.log('Queue length - ' + this.queue.length);
            if (this.queue.length > 0) { // First check if the queue is non-empty
                let nextSong = this.queue.pop(); // Pop the next song

                if (nextSong) { // If not null
                    this.history.push(nextSong); // Add it to history
                    this.curPlayer.load(nextSong.permalink_url);
                    setTimeout(() => this.loadWidgetSong(this.curPlayer), 2000); // Update player info
                }
            } else { // If the queue is empty, fetch a new song
                this.curPlayer.pause();
                this.restartSong();
            }
        } catch (e) {
            console.log('fetchNext' + e.toString());
        }
        let id = this.getRandomTrack(); // Works for tracks with 403 errors in other API

        SC.get('/tracks/' + id).then((track) => { // Check if there are results
            // Really just designed to check if the song actually exists
           this.streamSong(id);
        }, (err) => {
            console.log(err.status);
            // if (err.status === 0) { // Invalid API key
            //     console.log('0/401 Unauthorized. Possible Invalid SoundCloud key')
            //     throw '0/401 Unauthorized. Possible Invalid SoundCloud key'
            // }
            if (err.status === 403) { // Play the song anyway even if this API requiest returns a forbidden request (Soundcloud problem)
                this.streamSong(id);
                return;
            }
            // If there is no song with the associated ID, fetch a new one.
            console.log('track fetch fail' + id);
            this.fetchNext();
            console.log('track fetch fail post' + id);
        }).catch((err) => {
            console.log(err.status);
            if (err.status === 0) { // Invalid API key
                console.log('0/401 Unauthorized. Possible Invalid SoundCloud key')
                throw '0/401 Unauthorized. Possible Invalid SoundCloud key';
            }
            if (err.status === 403) { // Play the song anyway even if this API requiest returns a forbidden request (Soundcloud problem)
                this.streamSong(id);
                return;
            }
            // If there is no song with the associated ID, fetch a new one.
            this.fetchNext();
        });
    }

    /**
     * Stream the song when a valid id is found
     * @param {int} id - holds the song id
     */
    streamSong(id) {
        console.log('track fetch success ' + id);
        this.curPlayer.load(`https%3A//api.soundcloud.com/tracks/${id}` + WIDGET_PARAMS);
        this.togglePlayState(true);
        setTimeout(() => this.loadWidgetSong(this.curPlayer), 2000);
    }

    /**
     * Find the song based on user entered keywords, like 'I'm Feeling Lucky' on Google.
     * 
     * @param {String} query - search terms to find song
     * 
     * @memberof Player
     */
    getTrackByKeyWord(query) {
        // Get a list of songs by the search query and play first choice
        try {
            SC.get('/tracks', {q: query}).then((tracks) => {
                if (tracks.length > 0) {
                    // Load the first song
                    this.curPlayer.load(tracks[0].permalink_url); // The "I'm feeling lucky part of the search"
                }
            });
        } catch (e) {
            console.log('getTrackByKeyWord Error - ' + e.message);
        }
    }

    /**
     * Fetches tracks by a list of tags from the user separated by commas.
     * 
     * @param {string} tagList - a string with tags separated by commas
     * 
     * @memberof Player
     */
    getTracksByTags(tagList) {
        try {
            // Create options object to hold what we want to search for
            let options = {
                tags: tagList,
                limit: this.queueNum
            } // TODO: Allow to modify limit later

            SC.get('/tracks', options).then((tracks) => {
                if (tracks.length > 0) {

                    let trackCollection = null;
                    if (this.shuffleQueue)
                        trackCollection = this.shuffleTracks(tracks);
                    else
                        trackCollection = tracks.reverse();

                    // Queue all tracks to the queue of the user's playlist. Note that queue is actually acting like a stack since we use push() and pop()
                    for (let i = 0; i < trackCollection.length - 1; i++) { // Skip the first one since we are already playing it at this point (need to subtract upper bound by 1 since we want to exclude the first track from the reversed array)
                        this.queue.push(trackCollection[i]);
                        console.log(tracks[i].title);
                    }

                    // Load the song
                    this.curPlayer.load(trackCollection[0].permalink_url);
                
                    // Display toast message when done
                    __WEBPACK_IMPORTED_MODULE_8__utils__["a" /* default */].showToast(`${tracks.length} tracks added to the queue.`);
                } else {
                    __WEBPACK_IMPORTED_MODULE_8__utils__["a" /* default */].showToast('Search returned no results. Please try again.');
                }
            });
        } catch (e) {
            console.log('getTracksByTags Error - ' + e.message);
        }
    }

    /**
     * Searches for a playlist by keyword.
     * 
     * @param {String} query - name of the playlist
     * 
     * @memberof Player
     */
    getSetByKeyWord(query) {
        try {
            SC.get('/playlists', {q: query}).then((sets) => {
                if (sets.length > 0) {
                    if (this.shuffleQueue) { // If we want to shuffle the results
                        // Load the set
                        let resIndex = Math.floor(Math.random() * (sets.length + 1));
                        this.curPlayer.load(sets[resIndex].permalink_url); // The "I'm feeling lucky part of the search"
                        this.setTrackCount = sets[resIndex].track_count;
                        __WEBPACK_IMPORTED_MODULE_8__utils__["a" /* default */].showToast(`Now playing ${sets[resIndex].title} (${this.setTrackCount} songs)`)
                    } else {
                        // Load the set
                        this.curPlayer.load(sets[0].permalink_url); // The "I'm feeling lucky part of the search"
                        this.setTrackCount = sets[0].track_count;
                        __WEBPACK_IMPORTED_MODULE_8__utils__["a" /* default */].showToast(`Now playing ${sets[0].title} (${this.setTrackCount} songs)`)
                    }
                }
            });
        } catch (e) {
            console.log('getSetByKeyWord Error - ' + e.message);
        }
    }

    /**
     * Searches for the first queueNum songs by a user.
     * 
     * @param {String} user - username of the user
     * 
     * @memberof Player
     */
    getTracksByUser(user) {
        try {
            SC.resolve(`https://soundcloud.com/${user}`).then((response) => {
                console.log(response.id);
                try {
                    // Create options object to hold what we want to search for
                    let options = {
                        limit: this.queueNum
                    } // TODO: Allow to modify limit later

                    SC.get(`/users/${response.id}/tracks`, options).then((tracks) => {
                        console.log(tracks);
                        if (tracks.length > 0) {

                            let trackCollection = null;
                            if (this.shuffleQueue)
                                trackCollection = this.shuffleTracks(tracks);
                            else
                                trackCollection = tracks.reverse();

                            // Queue all tracks to the queue of the user's playlist. Note that queue is actually acting like a stack since we use push() and pop()
                            for (let i = 0; i < trackCollection.length - 1; i++) { // Skip the first one since we are already playing it at this point (need to subtract upper bound by 1 since we want to exclude the first track from the reversed array)
                                this.queue.push(trackCollection[i]);
                                console.log(tracks[i].title);
                            }
                            
                            // Load the song
                            this.curPlayer.load(trackCollection[0].permalink_url);
                        
                            // Display toast message when done
                            __WEBPACK_IMPORTED_MODULE_8__utils__["a" /* default */].showToast(`${tracks.length} tracks added to the queue.`);
                        } else {
                            __WEBPACK_IMPORTED_MODULE_8__utils__["a" /* default */].showToast('Search returned no results. Please try again.');
                        }
                    });
                } catch (e) {
                    console.log('getSongsByUser Error - ' + e.message);
                }
            });
        } catch (e) {
            console.log(e);
        }
    }

    /**
     * Searches for songs by genres (string of genres separated by commas)
     * 
     * @param {String} genreList - comma separated list of genres
     * 
     * @memberof Player
     */
    getTracksByGenres(genreList) {
        try {
            // Create options object to hold what we want to search for
            let options = {
                genres: genreList,
                limit: this.queueNum
            } // TODO: Allow to modify limit later

            SC.get('/tracks', options).then((tracks) => {
                if (tracks.length > 0) {

                    let trackCollection = null;
                    if (this.shuffleQueue)
                        trackCollection = this.shuffleTracks(tracks);
                    else
                        trackCollection = tracks.reverse();

                    // Queue all tracks to the queue of the user's playlist. Note that queue is actually acting like a stack since we use push() and pop()
                    for (let i = 0; i < trackCollection.length - 1; i++) { // Skip the first one since we are already playing it at this point (need to subtract upper bound by 1 since we want to exclude the first track from the reversed array)
                        this.queue.push(trackCollection[i]);
                    }

                    // Load the song
                    this.curPlayer.load(trackCollection[0].permalink_url);
                
                    // Display toast message when done
                    __WEBPACK_IMPORTED_MODULE_8__utils__["a" /* default */].showToast(`${tracks.length} tracks added to the queue.`);
                } else {
                    __WEBPACK_IMPORTED_MODULE_8__utils__["a" /* default */].showToast('Search returned no results. Please try again.');
                }
            });
        } catch (e) {
            console.log('getSongsByGenres Error - ' + e.message);
        }
    }

    /**
     * Checks if song history contains a song by id.
     * 
     * @param {Number} id - id of the song we are looking for.
     * @returns {Boolean}
     * 
     * @memberof Player
     */
    historyContainsId(id) {
        let found = false;
        for (let i = 0; i < this.history.length; i++) {
            if (this.history[i].id === id) {
                found = true;
            }
        };
        return found;
    }

    /**
     * Extracts the url params to play specific tracks on load.
     * 
     * @param {String} name - name of the param
     * @param {String} url - current address loaded by the user
     * @returns 
     * 
     * @memberof Player
     */
    getURLParamsByName(name, url) {
        if (!url) url = window.location.href;
        name = name.replace(/[\[\]]/g, "\\$&");
        var regex = new RegExp("[?&]" + name + "(=([^&#]*)|&|#|$)"),
            results = regex.exec(url);
        if (!results) return null;
        if (!results[2]) return '';
        return decodeURIComponent(results[2].replace(/\+/g, " "));
    }

    shuffleTracks(tracks) {
        let temp = null;
        console.log('shuffling tracks');
        // Using in place Durstenfeld shuffle
        for (let i = tracks.length - 1; i > 0; i --) {
            let j = Math.floor(Math.random() * (i+1)); // Generate a random index [0...i]
            temp = tracks[i]; // Start swapping
            tracks[i] = tracks[j];
            tracks[j] = temp;
        }

        return tracks;
    }

    getTracksFromCharts(_kind, _genres, _limit, $_partition = 1) {
        // kind=top&genre=soundcloud%3Agenres%3Aall-music&limit=50
        try {
            // let oReq = new XMLHttpRequest(); //New request object
            // oReq.onload = function() {
            //     // Callback
            //     let songs = JSON.parse(this.responseText);
            //     console.log(songs);
            //     console.log(this.queue);
            // };
            // oReq.open("get", `http://polarity.x10.mx/test.php?kind=${_kind}&genre=${_genres}&limit=${_limit}&linked_partitioning=${$_partition}&client_id=${consts.client_id}`, true);
            // //                               ^ Don't block the rest of the execution.
            // //                                 Don't wait until the request finishes to 
            // //                                 continue.
            // oReq.send();
            // // console.log(`https://api-v2.soundcloud.com/charts?kind=${_kind}&genre=${_genres}&limit=${_limit}&linked_partitioning=${$_partition}&client_id=${consts.client_id}`);
            // // let req = new Request(); // Construct it
            // // let tracks = await req.getJSON(`https://api-v2.soundcloud.com/charts?kind=${_kind}&genre=${_genres}&limit=${_limit}&linked_partitioning=${$_partition}&client_id=${consts.client_id}`);

            $.ajax({
                url: 'http://polarity.x10.mx/test.php', //This is the current doc
                type: "GET",
                dataType:'json', // add json datatype to get json
                data: ({
                    kind: _kind,
                    genre: _genres,
                    limit: _limit,
                    linked_partitioning: $_partition,
                    client_id: __WEBPACK_IMPORTED_MODULE_0__consts_sec_json___default.a.client_id
                }),
                success: (data) => {
                    let trackCollection = null;
                    if (this.shuffleQueue)
                        trackCollection = this.shuffleTracks(data.collection);
                    else
                        trackCollection = data.collection.reverse();

                    for (let i = 0; i < trackCollection.length - 1; i++) {
                        this.queue.push(trackCollection[i].track);
                    }

                    console.log(trackCollection);

                     // Load the song
                    this.curPlayer.load(trackCollection[trackCollection.length - 1].track.permalink_url);
                    setTimeout(() => this.loadWidgetSong(this.curPlayer), 1000);
                    
                    // Display toast message when done
                    __WEBPACK_IMPORTED_MODULE_8__utils__["a" /* default */].showToast(`${trackCollection.length} tracks added to the queue.`);
                }
            });  
        } catch (e) {
            console.log('getTracksFromCharts Error - ' + e.message); 
        }
    }
}

/* harmony default export */ __webpack_exports__["a"] = (Player);

/***/ }),
/* 6 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__consts_sec_json__ = __webpack_require__(2);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__consts_sec_json___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0__consts_sec_json__);


let SC = __webpack_require__(0);

class HistItem {

    constructor(bg, track, player, errorDownloadCallback) {
        this._bg = bg;
        this._track = track;
        this._errorDownloadCallback = errorDownloadCallback;

        this.histItem = document.createElement('div');
        this.histItem.className = 'card';
        this.histItem.setAttribute('id', 'histItem');
        this.histItem.setAttribute('data-id', track.id);
        this.histItem.addEventListener('click', (e) => {
            player.streamSong(track.id);
        }, false);
        let tempInner = document.createElement('div');
        tempInner.innerHTML = `
            <div class="card" data-id="${this._track.id}">
                <div id="histItemBg" class="bg-image" style="background-image: url('${this._bg}')"></div>
                <div class="player-content overlay">
                    <div class="row level">
                        <div class="level-left" style="position:relative;">
                            <img src="${this._track.artwork_url === null ? this._track.user.avatar_url : this._track.artwork_url}">
                            <span class="hist-play center">
                                <i class="fa fa-play center-alt" aria-hidden="true"></i>
                            </span>
                        </div>
                        <div class="desc">
                            <p class="title">${this._track.title}</p>
                            <p class="subtitle">${this._track.artist}</p>
                            <p class="subtitle">${this._track.genre || 'N/A'}</p>
                        </div>
                    </div>
                </div>
                <div class="row overlay">
                    <div class="action-bar center no-padding">
                        <div class="action-bar-item">
                            <a href="${this._track.downloadable === false ? this._errorDownloadCallback : `https://api.soundcloud.com/tracks/${this._track.id}/download?client_id=${__WEBPACK_IMPORTED_MODULE_0__consts_sec_json___default.a.client_id}`}" target="_blank"><button class="btn-transparent">Download</button></a>
                        </div>
                        <div class="action-bar-item">
                            <a href="${this._track.permalink_url}" target="_blank"><button class="btn-transparent">View</button></a>
                        </div>
                    </div>
                </div>
            </div>
        `;
        this.histItem.appendChild(tempInner); // Must use this method to preserve listeners
    }

    render() {
         return this.histItem; // Cannot return innerHTML since that removes all listeners
    }
}

/* harmony default export */ __webpack_exports__["a"] = (HistItem);

/***/ }),
/* 7 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__consts_sec_json__ = __webpack_require__(2);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__consts_sec_json___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0__consts_sec_json__);


let SC = __webpack_require__(0);

class ChartItem {
    constructor(player, title, artist, kind, genre, limit, art) {
        this._player = player;
        this._title = title;
        this._artist = artist;
        this._kind = kind;
        this._genre = genre;
        this._limit = limit;
        this._art = art;

        this.chartItem = document.createElement('div');
        this.chartItem.className = 'col-4';
        // this.chartItem.setAttribute('data-genre', this._genre);
        // this.chartItem.setAttribute('data-limit', this._limit);
        this.bindEvents();
        let tempInner = document.createElement('div');
        tempInner.innerHTML = `
                <div class="chart-item card">
                    <div class="card-container">
                        <div class="card-image" style="background-image: url(${art});"></div>

                        <div class="title-container">
                            <p class="title">${this._title}</p><span class="subtitle">By SoundCloud</span>
                        </div>
                    </div>
                </div>
            </div>
        `;
        this.chartItem.appendChild(tempInner); // Must use this method to preserve listeners
    }

    render() {
        return this.chartItem;
    }

    bindEvents() {
        this.chartItem.addEventListener('click', (e) => {
            this._player.getTracksFromCharts(this._kind, this._genre, this._limit);
            this._player.searchDialog.toggleSearchDialog();
        }, false);
    }
}

/* harmony default export */ __webpack_exports__["a"] = (ChartItem);

/***/ }),
/* 8 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__queueitem__ = __webpack_require__(9);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__js_utils__ = __webpack_require__(1);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__js_settings__ = __webpack_require__(3);




class Dashboard {

    constructor(player) {
        this._player = player;
        this.isShown = false;
        this.queueItemCount = 0; // Counts number of songs on queue
        document.querySelector('#dashboardModalContainer').innerHTML += this.render();
        this.bindEvents();
        __WEBPACK_IMPORTED_MODULE_2__js_settings__["a" /* default */].loadPrefs(); // Init settings
        this.updateControls(); // Update settings controls
    }

    render() {
        return `
            <div class="hero-body">
                <div id="dashboardCloseBtn" class="dialog-close-btn link-btn">
                    <span class="icon">
                        <i class="fa fa-times" aria-hidden="true"></i>
                    </span>
                </div>
                <div id="tabs" class="content">
                    <div class="tab-container tabs-center">
                        <ul>
                            <li class="tab-item selected">
                                <a>Settings</a>
                            </li>
                            <li id="queueTab" class="tab-item">
                                <a>Queue</a>
                            </li>
                        </ul>
                    </div>
                    <div class="tabpage shown">
                        <h3>Settings</h3>
                        <div class="divider"></div>
                        <div class="row">
                            <div class="toggle-container">
                                <p>Enable battery saver</p>
                                <div class="toggle-switch"><input type="checkbox" id="chkBattery"/><label for="chkBattery"></label></div>
                            </div>
                            <div class="toggle-container">
                                <p>Dark Theme</p>
                                <div class="toggle-switch"><input type="checkbox" id="chkDark"/><label for="chkDark"></label></div>
                            </div>
                        </div>
                    </div>
                    <div class="tabpage">
                        <div class="row level">
                            <h3 style="flex-grow: 1;">Queue</h3><button id="btnClearQueue" class="btn-small btn-nimbus">Clear Queue</button>
                        </div>
                        <div class="divider"></div>
                        <space></space>
                        <div id="queueContainer">

                        </div>
                    </div>
                </div>
            </div>
        `;
    }

    bindEvents() {
        this.dashboardCloseBtn = document.getElementById('dashboardCloseBtn');
        this.queueTab = document.getElementById('queueTab');
        this.queueContainer = document.getElementById('queueContainer');
        this.btnClearQueue = document.getElementById('btnClearQueue');

        this.chkBattery = document.getElementById('chkBattery');

        // Event handler for close button for search dialog
        this.dashboardCloseBtn.onclick = (e) => {
            this.hideDashboard();
        }

        this.queueTab.onclick = (e) => {
            // Update queue items
            this.refreshQueueContainer();
        }

        // Settings controls
        this.chkBattery.onclick = (e) => {
            __WEBPACK_IMPORTED_MODULE_2__js_settings__["a" /* default */].storePref('batterySaver', this.chkBattery.checked);
            if (this.chkBattery.checked && !document.getElementById("batterySaver")) {
                $(__WEBPACK_IMPORTED_MODULE_2__js_settings__["a" /* default */].batterySaverCSS).appendTo("head");
            } else {
                $('#batterySaver').remove(); // Remove the style sheet
            }
        }

        this.btnClearQueue.onclick = (e) => {
            this.clearQueue();
        }
    }

    updateControls() {

        // Update settings controls
        this.chkBattery.checked = JSON.parse(__WEBPACK_IMPORTED_MODULE_2__js_settings__["a" /* default */].getPref('batterySaver'));
    }

    toggleDashboard() {
        // Scroll to top to show the search dialog
        window.scrollTo(0, 0);

        this.isShown = !this.isShown;
        if (this.isShown) {
            $('#dashboardModalContainer').addClass('shown');
            if ($(window).width() <= 768)
                $('body').css({'overflow-y': 'hidden'});
            this.refreshQueueContainer();
        } else {
            // Reset dialog (must place up here to account for invalid input)
            $('#dashboardModalContainer').removeClass('shown'); // Hide the search modal
            if ($(window).width() <= 768) // For mobile UI
                $('body').css({'overflow-y': 'scroll'});
        }
    }


    hideDashboard() {
        // Reset dialog (must place up here to account for invalid input)
        $('#dashboardModalContainer').removeClass('shown'); // Hide the search modal
        if ($(window).width() <= 768) // For mobile UI
            $('body').css({'overflow-y': 'scroll'});
        this.isShown = false;
    }
    
    refreshQueueContainer() {
        if (this._player.queue.length > 0 ) {
            this.queueItemCount = 0;
            let q = null;
            let frag = '';
            for (let i = this._player.queue.length - 1; i >= 0; i--) {
                q = new __WEBPACK_IMPORTED_MODULE_0__queueitem__["a" /* default */](this._player, this._player.queue[i]);
                frag += q.render();
                this.queueItemCount += 1;
            }
            this.queueContainer.innerHTML = frag;
        } else {
            this.queueItemCount = 0;
            // Notification that queue is empty
            this.queueContainer.innerHTML = `<div class="text-center">
                <h6 class="light" style="color: #717579;">
                Looks like your queue is empty. Nimbus will continue to fetch music in the background.</h6>
            </div>`;
        }
    }

    clearQueue() {
        this._player.queue = []; // Clear the queue
        this.queueContainer.innerHTML = `<div class="text-center">
                <h6 class="light" style="color: #717579;">
                Looks like your queue is empty. Nimbus will continue to fetch music in the background.</h6>
            </div>`;
    }
}

/* harmony default export */ __webpack_exports__["a"] = (Dashboard);

/***/ }),
/* 9 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__js_utils__ = __webpack_require__(1);


class QueueItem {

    constructor(player, track) {
        this._player = player;
        this._track = track;
    }

    render() {
        return `
            <div class="queue-item">
                <h6 class="title light btn-tooltip" data-tooltip="${this._track.title}"><span>${this._track.title}</span><div class="pull-right">${__WEBPACK_IMPORTED_MODULE_0__js_utils__["a" /* default */].convertMillisecondsToDigitalClock(this._track.duration).clock}</div></h6>
                <p class="subtitle"><span>${this._track.user.username}</span>
                    <span class="queue-item-actions pull-right">
                        <a href="${this._track.permalink_url}" target="_blank"><span class="icon"><i class="fa fa-external-link-square small" aria-hidden="true"></i></span></a>
                        <span class="icon" id="queueDelete"><i class="fa fa-times small" aria-hidden="true"></i></span>
                    </span>
                </p>
            </div>
        `;
    }

    bindEvents() {

    }
}

/* harmony default export */ __webpack_exports__["a"] = (QueueItem);

/***/ }),
/* 10 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__chartitem__ = __webpack_require__(7);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__js_utils__ = __webpack_require__(1);



let SC = __webpack_require__(0);

class Search {

    constructor(player) {
        this._player = player;
        this.isShown = false;
        
        this.render();
        this.bindEvents();

        this.loadCharts();
    }

    render() {
        // Create the search dialog html
        document.querySelector('#searchModalContainer').innerHTML += `
            <div class="hero-body">
                <div id="searchCloseBtn" class="dialog-close-btn link-btn">
                    <span class="icon">
                        <i class="fa fa-times" aria-hidden="true"></i>
                    </span>
                </div>
                <div class="content">
                    <space style="height: 20vh;"></space>
                    <h6 class="uppercase">Search for songs, <span class="search-item" id="searchSets">sets</span>, <span class="search-item" id="searchUser">users</span>, <span class="search-item" id="searchTags">tags</span>, and more</h6>
                    <input type="text" placeholder="search" id="searchField"/>
                    <space></space>
                    <div class="overflow-container">
                        <div class="row level" id="optionsContainer">
                            <label class="button-switch btn-tooltip" data-tooltip="Shuffle tracks before adding to queue.">
                                <input type="checkbox" name="shuffle" value="Shuffle" id="chkShuffle"/>
                                <span class="uppercase">Shuffle</span>
                            </label>
                            <label class="button-switch btn-tooltip" data-tooltip="Number of results to queue.">
                                <input type="checkbox" name="results" value="results" id="chkNumber">
                                <span id="chkNumberText" class="uppercase">120 results</span>
                            </label>
                        </div>
                    </div>
                    <space class="x-large"></space>
                    <div class="row">
                        <h3>Charts</h3>
                        <div class="row" id="chartContainer">

                        </div>
                    </div>
                </div>
            </div>
            `;
    }

    bindEvents() {
        this.searchCloseBtn = document.getElementById('searchCloseBtn');
        this.searchField = document.getElementById('searchField');
        this.chkShuffle = document.getElementById('chkShuffle');
        this.chkNumber = document.getElementById('chkNumber');

        this.searchSets = document.getElementById('searchSets');
        this.searchUser = document.getElementById('searchUser');
        this.searchTags = document.getElementById('searchTags');

        // Bind search field key combination
        this.searchField.onkeydown = (e) => {
            if (e.keyCode === 13) {
                // EDIT: If the queue is nonempty, preserve the queue elements and just insert the song in between history and queue (no code)

                // Hide the search dialog
                this.hideSearchDialog();
                this.processSearchField();
            }
        }

        document.onkeyup = (e) => {
            if (e.keyCode === 27) { // esc
                this.toggleSearchDialog();
            }
        }

        // Event handler for close button for search dialog
        this.searchCloseBtn.onclick = (e) => {
            this.hideSearchDialog();
        }

        this.chkShuffle.onclick = (e) => {
            this._player.shuffleQueue = this.chkShuffle.checked;
        }

        this.chkNumber.onclick = (e) => {
            this.setResultCount();
        }

        this.searchSets.onclick = (e) => {
            this.searchItemClick(this.searchSets);
            this.searchField.focus();
        }  

        this.searchUser.onclick = (e) => {
            this.searchItemClick(this.searchUser);
            this.searchField.focus();
        }

        this.searchTags.onclick = (e) => {
            this.searchItemClick(this.searchTags);
            this.searchField.focus();
        }
    }

    processSearchField() {
        // Check if input is empty
        if (this.searchField.value.length === 0)
            return; // Exit

        let iframeID = document.getElementById('widgettest');
        this._player.curPlayer = SC.Widget(iframeID);

        let searchQuery = this.searchField.value.toLowerCase(); // Assign the search query

        // Determine input type
        if (searchQuery.startsWith('http') && isNaN(searchQuery)) { // Check if this is a url
            this._player.isPlaylist = false; // Reset
            if (searchQuery.includes('sets')) {
                this._player.isPlaylist = true;
            }                    
            this._player.curPlayer.load(`${searchQuery}`);
        } else if (isNaN(searchQuery)) { // Check if this is a string query
            // Check tags
            console.log(searchQuery.startsWith('set:'));
            if (searchQuery.startsWith('playlist:') || searchQuery.startsWith('set:')) {
                this._player.getSetByKeyWord(searchQuery.split(':')[1].trim());
                this._player.isPlaylist = true;
            } else if (searchQuery.startsWith('tag:') || searchQuery.startsWith('tags:')) {
                this._player.getTracksByTags(searchQuery.split(':')[1].trim());
                this._player.isPlaylist = false;
            } else if (searchQuery.startsWith('user:')){
                this._player.getTracksByUser(searchQuery.split(':')[1].trim());
                this._player.isPlaylist = false;
            } else if (searchQuery.startsWith('genre:') || searchQuery.startsWith('genres:')) {
                this._player.getTracksByGenres(searchQuery.split(':')[1].trim());
                this._player.isPlaylist = false;
            } else {
                this._player.getTrackByKeyWord(searchQuery);
                this._player.isPlaylist = false;
            }
        } else { // Must be a song ID
            this._player.curPlayer.load(`https%3A//api.soundcloud.com/tracks/${searchQuery}`); // For id
            this._player.isPlaylist = false;
        }

        setTimeout(() => this._player.loadWidgetSong(this._player.curPlayer), 2000); // Needs longer delay time so it prevents stalling (track not auto playing)
    }

    toggleSearchDialog() {
        // Scroll to top to show the search dialog
        window.scrollTo(0, 0);

        this.isShown = !this.isShown;
        if (this.isShown) {
            this.searchField.value = "";
            this.searchField.focus();
            $('#searchModalContainer').addClass('shown');
            if ($(window).width() <= 768)
                $('body').css({'overflow-y': 'hidden'});
        } else {
            // Reset dialog (must place up here to account for invalid input)
            $('#searchModalContainer').removeClass('shown'); // Hide the search modal
            if ($(window).width() <= 768) // For mobile UI
                $('body').css({'overflow-y': 'scroll'});
        }
    }


    hideSearchDialog() {
        // Reset dialog (must place up here to account for invalid input)
        $('#searchModalContainer').removeClass('shown'); // Hide the search modal
        if ($(window).width() <= 768) // For mobile UI
            $('body').css({'overflow-y': 'scroll'});
        this.isShown = false;
    }

    // Search tag buttons
    searchItemClick(element) {
        switch (element.id) {
            case 'searchSets':
                this.searchField.value = 'set: ';
                break;
            case 'searchUser':
                this.searchField.value = 'user: ';
                break;
            case 'searchTags':
                this.searchField.value = 'tags: ';
        }
    }

    setResultCount() {
        let count = prompt('How many results do you want to queue?');

        if (count === null || !isFinite(count)) {
            __WEBPACK_IMPORTED_MODULE_1__js_utils__["a" /* default */].showToast('Please enter a numerical value and try again.');
            this.chkNumber.checked = false;
            return;
        }
        $('#chkNumberText').text(`${count} results`);
        this._player.queueNum = count;
    }

    loadCharts() {
        this.chartContainer = document.querySelector('#chartContainer');
        let c = new __WEBPACK_IMPORTED_MODULE_0__chartitem__["a" /* default */](this._player, 'SoundCloud Top 50', 'SoundCloud', 'top', 'soundcloud%3Agenres%3Aall-music', 50, `../img/soundcloud_top50.jpg`);
        this.chartContainer.appendChild(c.render());
        c = new __WEBPACK_IMPORTED_MODULE_0__chartitem__["a" /* default */](this._player, 'Rap Top 50', 'SoundCloud', 'top', 'soundcloud%3Agenres%3Ahiphoprap', 50, `../img/rap_top50.png`);
        this.chartContainer.appendChild(c.render());
        c = new __WEBPACK_IMPORTED_MODULE_0__chartitem__["a" /* default */](this._player, 'Fresh Hip-hop & Rap', 'SoundCloud', 'trending', 'soundcloud%3Agenres%3Ahiphoprap', 50, `../img/fresh_rap.png`);
        this.chartContainer.appendChild(c.render());
        c = new __WEBPACK_IMPORTED_MODULE_0__chartitem__["a" /* default */](this._player, 'Dance & EDM Top 50', 'SoundCloud', 'top', 'soundcloud%3Agenres%3Adanceedm', 50, `../img/edm_top50.jpg`);
        this.chartContainer.appendChild(c.render());
        c = new __WEBPACK_IMPORTED_MODULE_0__chartitem__["a" /* default */](this._player, 'Essential EDM', 'SoundCloud', 'trending', 'soundcloud%3Agenres%3Adanceedm', 50, `../img/essential_edm.png`);
        this.chartContainer.appendChild(c.render());
        
    }

}

/* harmony default export */ __webpack_exports__["a"] = (Search);

/***/ }),
/* 11 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
const SongInfo = (largeArt, track, tags, errorPurchase) => (
    `
        <div class="card level">
            <div class="content-no-padding text-center">
                    <div class="row center" id="artContainer">
                        <div class="col-12 no-margin no-padding">
                            <div class="flipContainer" id="flipContainer">
                                <img id="songArt" src="${largeArt}">
                                <div class="song-desc">
                                    <div class="content-no-padding">
                                        <div class="row text-center" id="descNavBar">
                                            <button class="btn-transparent" id="desc-likes"><i class="fa fa-heart small" aria-hidden="true"></i><span>${track.likes_count}</span></button>
                                            <a href="${track.permalink_url + '/comments'}" target="_blank"><button class="btn-transparent" id="desc-comments"><i class="fa fa-comment small" aria-hidden="true"></i><span>${track.comment_count || 0}</span></button></a>
                                            <button class="btn-transparent" id="desc-reposts"><i class="fa fa-retweet small" aria-hidden="true"></i><span>${track.reposts_count}</span></button>
                                            <a href="${track.user.permalink_url}" target="_blank"><button class="btn-transparent" id="desc-user"><i class="fa fa-user small" aria-hidden="true"></i><span>${track.user.username}</span></button></a>
                                            <a href="${track.user.purchase_url || errorPurchase}" target="_blank"><button class="btn-transparent" id="desc-buy"><i class="fa fa-usd small" aria-hidden="true"></i><span>Purchase</span></button></a>
                                        </div>
                                        <div class="row text-center" id="descStats">
                                            <p>Created: ${track.created_at.split('T')[0].replace(/-/g, ' / ')}</p>
                                        </div>
                                        <div class="row" id="descTags">
                                            ${tags}
                                        </div>
                                    </div>
                                    <space class="large"></space>
                                    <div class="content">
                                        <pre>${track.description || 'No description available.'}</pre>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <h5 id="trackTitle" class="light">${track.title}</h5>
                    <p class="title uppercase" id="trackUser">${track.user.username}</p>
                    <p class="subtitle" id="curTime">0:00 / 4:20</p>
                    <div class="waveform"></div>
                    <space></space>
                    <div class="level">
                        <span class="icon"><i class="fa fa-volume-off" aria-hidden="true"></i></span>
                        <input id="volumeSlider" type="range" min="0" max="100" value="0" class="range"/>
                    </div>
            </div>
        </div>
    `
);

/* harmony default export */ __webpack_exports__["a"] = (SongInfo);

/***/ }),
/* 12 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__js_settings__ = __webpack_require__(3);
/**
 * Draws the waveform component of the player.
 */

let SC = __webpack_require__(0);

class WaveForm {

    /**
     * Constructor for the waveform
     * @param {WaveFormConfig} - {
            container: HTMLElement,
            audio: Audio,
            data: Array,
            peakWidth: number,
            peakSpace: number,
            responsive: boolean,
            mouseOverEvents: boolean,
            color: {
                background: string,
                footer: string,
                footerPlayback: string,
                hoverGradient: {
                    from: string,
                    to: string
                },
                    playbackGradient: {
                    from: string,
                    to: string
                },
                    hoverPlaybackGradient: {
                    from: string,
                    to: string
                }
            }
        }
     */
    constructor(params) {
        this.currentPosition = 0;
        this.duration = 0;
        this.mouseOver = false;
        this.canvas = null;

        this.waveFormFrame = 0;
        this.updateInterval = (__WEBPACK_IMPORTED_MODULE_0__js_settings__["a" /* default */].getPref('batterySaver') ? 100 : 10); // Update every whatever metric SC uses

        // Create the config file for the waveform settings
        this.config = {
            container: null,
            audio: null,
            duration: 0,
            data: null,
            peakWidth: 2, // Pixel width of the vertical lines in the waveform
            peakSpace: 2, // The space between the peaks in pixels
            responsive: true,
            mouseOverEvents: true,
            mouseClickEvents: true,
            // Color config
            color: {
                background: "#8C8C8C",
                footer: "#B2B2B2",
                footerPlayback: "#FFAA80",
                hoverGradient: {
                from: "#FF7200",
                to: "#DA4218"
                },
                playbackGradient: {
                    from: "#FF7200",
                    to: "#DA4218"
                },
                hoverPlaybackGradient: {
                    from: "#AB5D20",
                    to: "#A84024"
                }
            }
        }; // Config object end

        if (params) { // Check if not null
            Object.assign(this.config, params); // Enumerate through fields and assign them to corresponding fields in this.config (Similar to serializing)
        }

        // Update duration
        this.duration = this.config.duration;

        this.buildCanvas();
        this.bindEvents();
        this.drawWaveForm(); // Draw the waveform
    }

    /**
     * Create the canvas
     */
    buildCanvas() {
        this.canvas = document.createElement('canvas'); // Create the canvas element
        this.config.container.appendChild(this.canvas); // Update the container to the canvas object
        this.updateCanvasSize();
        this.ctx = this.canvas.getContext('2d');
        this.ctx.lineWidth = this.config.peakWidth; // Sets the width of each vertical line in the canvas.
    }

    /**
     * Bind waveform events
     */
    bindEvents() {
        if (this.config.responsive) // If waveform is responsive, resize with parent.
            this.onResizeHandler();

        if (this.config.mouseOverEvents) { // Enable mouse over/leave events
            this.onMouseMoveHandler();
            this.onMouseLeaveHandler();
        }

        if (this.config.mouseClickEvents) // Enable mouse click handling
            this.onMouseClickHandler();
        
        if (this.config.audio) { // TODO: Need to figure out how to bind with widget API, not regular API.
            this.onTimeUpdateHandler();
            this.onCanPlayHandler();
        }
    }

    /**
     * EVENT HANDLERS
     */

     /**
      * This fires when the widget is ready and updates the waveform by duration and current time.
      * NOTE: This event might not be fired.
      */
    onCanPlayHandler() {
        // READY signal might not be needed
        this.config.audio.bind(SC.Widget.Events.READY, (e) => {
            this.currentPosition = this.config.audio.currentPosition;
            this.drawWaveForm();
        });
    }

    /**
     * Event fired when time updates in the widget object
     */
    onTimeUpdateHandler() {
        this.config.audio.bind(SC.Widget.Events.PLAY_PROGRESS, (e) => {
            this.currentPosition = e.currentPosition;
            this.waveFormFrame++;
            if (this.waveFormFrame % this.updateInterval === 0) {
                this.drawWaveForm();
            }
        });
    }

    /**
     * Update waveform colors based on mouse location
     */
    onMouseMoveHandler() {
        this.canvas.addEventListener('mousemove', event => {
            this.mouseOver = this.getMousePosition(event); // Assign coords to mouseOver
            this.drawWaveForm(); // Update waveform
        });
    }

    /**
     * Handles when the mouse leaves the waveform area
     */
    onMouseLeaveHandler() {
        this.canvas.addEventListener('mouseleave', () => {
            this.mouseOver = null;
            this.drawWaveForm(); // Update waveform
        });
    }

    /**
     * Handles the mouse click
     */
    onMouseClickHandler() {
        this.canvas.addEventListener('click', event => {
            // Get left click and time > 0
            if (event.button === 0 && this.duration) {
                let x = event.offsetX || event.layerX;

                if (this.config.audio) { // Audio is not null
                    this.config.currentPosition = parseInt(this.duration / 100 * (x / (this.config.container.clientWidth / 100))); // Update the track position
                    this.config.audio.seekTo(Math.floor(this.config.currentPosition));
                } else {
                    this.currentTime = parseInt(this.duration / 100 * (x / (this.config.container.clientWidth / 100)));
                }

                this.drawWaveForm();
            }
        });
    }

    /**
     * Get the mouse position relative to canvas location.
     * @param {MouseEvent} event
     * @return {{x: number, y: number}}
     */
    getMousePosition(e) {
        let rect = this.canvas.getBoundingClientRect();
        return {
            x: event.clientX - rect.left, // Get x position relative to canvas left border
            y: event.clientY - rect.top // Get y position relative to canvas top border
        };
    }

    /**
     * Handles when the window object resizes to redraw the waveform according to the container size. This is only redrawn when sizes are different.
     */
    onResizeHandler() {
        let oldWidth = this.config.container.clientWidth; // Get dimensions of the contaner that holds the canvas
        let oldHeight = this.config.container.clientHeight;

        window.addEventListener('resize', () => {
            if (oldWidth !== this.config.container.clientWidth || oldHeight !== this.config.container.clientHeight) { 

                // Update tracked previous dimensions on resize
                oldWidth = this.config.container.clientWidth;
                oldHeight = this.config.container.clientHeight;
                this.updateCanvasSize(); // Refresh the display
                this.drawWaveForm(); // Draw it
            }
        });
    }

    /**
     * Update the canvas size to match the container. (Probably could be replaced with CSS)
     */
    updateCanvasSize() {
        this.canvas.width = this.config.container.clientWidth;
        this.canvas.height = this.config.container.clientHeight;
    }

    /**
     * WAVEFORM COLORING
     */

     /**
      * Construct a linear gradient over the waveform
      * 
      * @param {number} x1
      * @param {number} y1 
      * @param {number} x2 
      * @param {number} y2 
      * @param {{from: string, to: string}} param - param object that holds the color values as strings.
      * @returns {CanvasGradient}
      *
      * @memberof WaveForm
      */
    getGradient(x1, y1, x2, y2, param) {
        let gradient = this.ctx.createLinearGradient(x1, y1, x2, y2);
        
        // Color sections of the gradient with colors in param.* where indexes indicate start and end positions.
        gradient.addColorStop(0, param.from);
        gradient.addColorStop(1, param.to);

        return gradient;
    }

    /**
     * Construct a linear gradient on mouse hover
     * 
     * @param {number} x1 
     * @param {number} y1 
     * @param {number} x2 
     * @param {number} y2 
     * @returns {CanvasGradient}
     * 
     * @memberof WaveForm
     */
    getHoverGradient(x1, y1, x2, y2) {
        // Return gradient with hovered colors.
        return this.getGradient(x1, y1, x2, y2, {
            from: this.config.color.hoverGradient.from,
            to: this.config.color.hoverGradient.to
        });
    }

    /**
     * Construct a linear gradient for playback peak
     * 
     * @param {number} x1 
     * @param {number} y1 
     * @param {number} x2 
     * @param {number} y2 
     * @returns {CanvasGradient}
     * 
     * @memberof WaveForm
     */
    getPlayBackGradient(x1, y1, x2, y2) {
        // Return gradient with playback colors (in progress colors)
        return this.getGradient(x1, y1, x2, y2, {
            from: this.config.color.playbackGradient.from,
            to: this.config.color.playbackGradient.to
        });
    }

    /**
     * Construct linear gradient for playback colors on mouse hover
     * 
     * @param {number} x1 
     * @param {number} y1 
     * @param {number} x2 
     * @param {number} y2 
     * @returns {CanvasGradient}
     * 
     * @memberof WaveForm
     */
    getHoverPlayBackGradient(x1, y1, x2, y2) {
        return this.getGradient(x1, y1, x2, y2, {
            from: this.config.color.hoverPlaybackGradient.from,
            to: this.config.color.hoverPlaybackGradient.to 
        });
    }

    /**
     * Draw the stroke style according to the mouse position.
     * 
     * @param {number} x 
     * @param {number} y 
     * @param {number} lineBreak 
     * @param {number} playback 
     * @returns {config}
     * 
     * @memberof WaveForm
     */
    getContextStrokeStyle(x, y, lineBreak, playback) {
        if (this.config.mouseOverEvents) { // Used to check if this is enabled in the configs
            if (this.mouseOver && this.mouseOver.x >= x) {
                return this.getHoverGradient(x, y, x, lineBreak); // Color until the line break.
            }
        }
        
        if (playback >= x) { // If the song progress is greater than the x value
            if (this.config.mouseOverEvents) {
                if (this.mouseOver) {
                    return this.getHoverPlayBackGradient(x, y, x, lineBreak);
                }
            }

            return this.getPlayBackGradient(x, y ,x, lineBreak);
        }

        return this.config.color.background;
    }

    /**
     * Draw the waveform canvas object.
     * 
     * @memberof WaveForm
     */
    drawWaveForm() {
        // Parse waveform from url, ex: https://wis.sndcdn.com/ivasij2DQoqz_m.json

        // We need to calculate the offset of how many peaks we can display. If the wavform is at 100% width, we can display all, but if not, we need to select every N peaks to draw.
        // data.length - number of peaks in the waveform
        // config.peakWidth - default set to 2px in constrctor (width if individual peak)
        // conig.peakSpace - default set to 1px in the constructor (space between peak)
        let N = this.config.data.length / this.config.container.clientWidth * (this.config.peakWidth + this.config.peakSpace);

        let count = Math.floor(this.config.data.length / N); // Count how many peaks we will display (total peaks / every Nth peak by the amount of pixels they use)

        let playback = 0;

        // Needs checking
        if (!!this.duration && this.currentPosition >= 0) {
            playback = this.canvas.width / this.duration * this.currentPosition;
        }

        this.ctx.clearRect(0, 0, this.ctx.canvas.width, this.ctx.canvas.height);

        for (let i = 0, x = 0; i < count; i++, x += (this.config.peakWidth + this.config.peakSpace)) { // Iterate over all the peaks in the data and draw them. Increment by the amount of pixels they use (x).
            // Calculate the height of that peak so we can draw the line.
            let peakHeight = this.canvas.height / 140 * this.config.data[Math.round(i * N)];
            let y = (this.canvas.height / 2 - peakHeight / 2) * 1.5;

            // Calculate the line break which is the 2px line you see cutting across the waveform.
            let lineBreak = Math.floor(this.canvas.height / 1.33333) - 1;

            this.ctx.strokeStyle = this.getContextStrokeStyle(x, y, lineBreak, playback); // Get the gradient color to draw the line. Hovered events and other events already handled inside the method.

            this.ctx.beginPath();
            this.ctx.moveTo(x, y);
            this.ctx.lineTo(x, lineBreak); // Draw to break
            this.ctx.stroke();

            // Draw the peaks under the line break.
            if (playback >= x) {
                this.ctx.strokeStyle = this.config.color.footerPlayback; // Colored part of the playback
            } else {
                this.ctx.strokeStyle = this.config.color.footer; // Default color
            }

            this.ctx.beginPath();
            this.ctx.moveTo(x, lineBreak + 1);
            this.ctx.lineTo(x, peakHeight + y);
            this.ctx.stroke();
        }
    }

    /**
     * Set the current track time and redraw the waveform
     * 
     * @param {Number} currentPosition 
     * @param {Number} duration 
     * 
     * @memberof WaveForm
     */
    setPlayBack(currentPosition, duration) {
        this.currentPosition = currentPosition;
        this.duration = duration;
        this.drawWaveForm();
    }

    /**
     * Update the current data object.
     * 
     * @param {Data} data 
     * 
     * @memberof WaveForm
     */
    async updateWaveformData(data) {
        this.config.data = data;
        this.updateInterval = (__WEBPACK_IMPORTED_MODULE_0__js_settings__["a" /* default */].getPref('batterySaver') ? 100 : 10); 
        this.drawWaveForm();
    }

}

/* harmony default export */ __webpack_exports__["a"] = (WaveForm);

/***/ }),
/* 13 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
Object.defineProperty(__webpack_exports__, "__esModule", { value: true });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__player__ = __webpack_require__(5);
// Initialize the SoundCloud Player object


window.onload = () => {
    const sc_player = new __WEBPACK_IMPORTED_MODULE_0__player__["a" /* default */]();
    sc_player.start();

    var myTabs = tabs({
        el: '#tabs',
        tabNavigationLinks: '.tab-item',
        tabContentContainers: '.tabpage'
    });
    myTabs.init();
}


/***/ }),
/* 14 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/**
 * Designed to fetch data using XMLHttp.
 */
class Request {

    /**
     * Creates an instance of Request.
     * 
     * @memberof Request
     */
    constructor() {
        console.log('Init Request service');
    }

    get(url) {
         return new Promise(function (resolve, reject) {
            const xhr = new XMLHttpRequest();
            xhr.addEventListener("load", function() {
                if (this.status >= 200 && this.status < 300) {
                    resolve(this.responseText); // Resolve on valid response
                } else {
                    reject(this);
                }
            });

            xhr.addEventListener("error", function() {
                reject(this); // Reject on error
            });

            xhr.open('GET', url, true);
            xhr.send();
        });
    }

    /**
     * Get the JSON data for the waveform
     * 
     * @param {string} url 
     * @returns - WaveForm JSON object
     */
    async getJSON(url) {
        try {
            return JSON.parse(await this.get(url));
        } catch (e) {
            console.log(e);
            return []; // Return null
        }
    }
}

/* harmony default export */ __webpack_exports__["a"] = (Request);

/***/ })
/******/ ]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAgNTczOWMwZDVmZDMyYTI2NWExNzMiLCJ3ZWJwYWNrOi8vLy4vfi9zb3VuZGNsb3VkL3Nkay5qcyIsIndlYnBhY2s6Ly8vLi9wdWJsaWMvanMvdXRpbHMuanMiLCJ3ZWJwYWNrOi8vLy4vY29uc3RzLXNlYy5qc29uIiwid2VicGFjazovLy8uL3B1YmxpYy9qcy9zZXR0aW5ncy5qcyIsIndlYnBhY2s6Ly8vLi9wdWJsaWMvY29udHJvbHMvdG9hc3QuanMiLCJ3ZWJwYWNrOi8vLy4vcHVibGljL2pzL3BsYXllci5qcyIsIndlYnBhY2s6Ly8vLi9wdWJsaWMvY29udHJvbHMvSGlzdEl0ZW0uanMiLCJ3ZWJwYWNrOi8vLy4vcHVibGljL2NvbnRyb2xzL2NoYXJ0aXRlbS5qcyIsIndlYnBhY2s6Ly8vLi9wdWJsaWMvY29udHJvbHMvZGFzaGJvYXJkLmpzIiwid2VicGFjazovLy8uL3B1YmxpYy9jb250cm9scy9xdWV1ZWl0ZW0uanMiLCJ3ZWJwYWNrOi8vLy4vcHVibGljL2NvbnRyb2xzL3NlYXJjaC5qcyIsIndlYnBhY2s6Ly8vLi9wdWJsaWMvY29udHJvbHMvc29uZ2luZm8uanMiLCJ3ZWJwYWNrOi8vLy4vcHVibGljL2NvbnRyb2xzL3dhdmVmb3JtLmpzIiwid2VicGFjazovLy8uL3B1YmxpYy9qcy9hcHAuanMiLCJ3ZWJwYWNrOi8vLy4vcHVibGljL2pzL3JlcXVlc3QuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7OztBQUdBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBLG1EQUEyQyxjQUFjOztBQUV6RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQUs7QUFDTDtBQUNBOztBQUVBO0FB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O0FDM2FBO0FBQUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTs7Ozs7Ozs7QUNiQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrQ0FBK0M7QUFDL0MsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQSxhQUFhOztBQUViO0FBQ0EsNkJBQTZCO0FBQzdCLGFBQWE7O0FBRWI7QUFDQTtBQUNBLFNBQVM7QUFDVDs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLE9BQU87QUFDdEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBLHNCQUFzQjtBQUN0QjtBQUNBO0FBQ0E7O0FBRUEsZ0UiLCJmaWxlIjoiYXBwLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKVxuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuXG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRpOiBtb2R1bGVJZCxcbiBcdFx0XHRsOiBmYWxzZSxcbiBcdFx0XHRleHBvcnRzOiB7fVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBpZGVudGl0eSBmdW5jdGlvbiBmb3IgY2FsbGluZyBoYXJtb255IGltcG9ydHMgd2l0aCB0aGUgY29ycmVjdCBjb250ZXh0XG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmkgPSBmdW5jdGlvbih2YWx1ZSkgeyByZXR1cm4gdmFsdWU7IH07XG5cbiBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwge1xuIFx0XHRcdFx0Y29uZmlndXJhYmxlOiBmYWxzZSxcbiBcdFx0XHRcdGVudW1lcmFibGU6IHRydWUsXG4gXHRcdFx0XHRnZXQ6IGdldHRlclxuIFx0XHRcdH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuIFx0XHRyZXR1cm4gZ2V0dGVyO1xuIFx0fTtcblxuIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IDEzKTtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyB3ZWJwYWNrL2Jvb3RzdHJhcCA1NzM5YzBkNWZkMzJhMjY1YTE3MyIsIiFmdW5jdGlvbih0LGUpe2lmKFwib2JqZWN0XCI9PXR5cGVvZiBleHBvcnRzJiZcIm9iamVjdFwiPT10eXBlb2YgbW9kdWxlKW1vZHVsZS5leHBvcnRzPWUoKTtlbHNlIGlmKFwiZnVuY3Rpb25cIj09dHlwZW9mIGRlZmluZSYmZGVmaW5lLmFtZClkZWZpbmUoW10sZSk7ZWxzZXt2YXIgbj1lKCk7Zm9yKHZhciBpIGluIG4pKFwib2JqZWN0XCI9PXR5cGVvZiBleHBvcnRzP2V4cG9ydHM6dClbaV09bltpXX19KHRoaXMsZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24odCl7ZnVuY3Rpb24gZShpKXtpZihuW2ldKXJldHVybiBuW2ldLmV4cG9ydHM7dmFyIHI9bltpXT17ZXhwb3J0czp7fSxpZDppLGxvYWRlZDohMX07cmV0dXJuIHRbaV0uY2FsbChyLmV4cG9ydHMscixyLmV4cG9ydHMsZSksci5sb2FkZWQ9ITAsci5leHBvcnRzfXZhciBuPXt9O3JldHVybiBlLm09dCxlLmM9bixlLnA9XCJcIixlKDApfShbZnVuY3Rpb24odCxlLG4peyhmdW5jdGlvbihlKXtcInVzZSBzdHJpY3RcIjt2YXIgaT1uKDQpLHI9big4KSxvPW4oMikscz1uKDkpLGE9bigxKS5Qcm9taXNlLHU9bigxNSksaD1uKDE2KTt0LmV4cG9ydHM9ZS5TQz17aW5pdGlhbGl6ZTpmdW5jdGlvbigpe3ZhciB0PWFyZ3VtZW50cy5sZW5ndGg8PTB8fHZvaWQgMD09PWFyZ3VtZW50c1swXT97fTphcmd1bWVudHNbMF07by5zZXQoXCJvYXV0aF90b2tlblwiLHQub2F1dGhfdG9rZW4pLG8uc2V0KFwiY2xpZW50X2lkXCIsdC5jbGllbnRfaWQpLG8uc2V0KFwicmVkaXJlY3RfdXJpXCIsdC5yZWRpcmVjdF91cmkpLG8uc2V0KFwiYmFzZVVSTFwiLHQuYmFzZVVSTCksby5zZXQoXCJjb25uZWN0VVJMXCIsdC5jb25uZWN0VVJMKX0sZ2V0OmZ1bmN0aW9uKHQsZSl7cmV0dXJuIGkucmVxdWVzdChcIkdFVFwiLHQsZSl9LHBvc3Q6ZnVuY3Rpb24odCxlKXtyZXR1cm4gaS5yZXF1ZXN0KFwiUE9TVFwiLHQsZSl9LHB1dDpmdW5jdGlvbih0LGUpe3JldHVybiBpLnJlcXVlc3QoXCJQVVRcIix0LGUpfSxcImRlbGV0ZVwiOmZ1bmN0aW9uKHQpe3JldHVybiBpLnJlcXVlc3QoXCJERUxFVEVcIix0KX0sdXBsb2FkOmZ1bmN0aW9uKHQpe3JldHVybiBpLnVwbG9hZCh0KX0sY29ubmVjdDpmdW5jdGlvbih0KXtyZXR1cm4gcyh0KX0saXNDb25uZWN0ZWQ6ZnVuY3Rpb24oKXtyZXR1cm4gdm9pZCAwIT09by5nZXQoXCJvYXV0aF90b2tlblwiKX0sb0VtYmVkOmZ1bmN0aW9uKHQsZSl7cmV0dXJuIGkub0VtYmVkKHQsZSl9LHJlc29sdmU6ZnVuY3Rpb24odCl7cmV0dXJuIGkucmVzb2x2ZSh0KX0sUmVjb3JkZXI6dSxQcm9taXNlOmEsc3RyZWFtOmZ1bmN0aW9uKHQsZSl7cmV0dXJuIGgodCxlKX0sY29ubmVjdENhbGxiYWNrOmZ1bmN0aW9uKCl7ci5ub3RpZnlEaWFsb2codGhpcy5sb2NhdGlvbil9fX0pLmNhbGwoZSxmdW5jdGlvbigpe3JldHVybiB0aGlzfSgpKX0sZnVuY3Rpb24odCxlLG4pe3ZhciBpOyhmdW5jdGlvbih0LHIsbyxzKXsvKiFcblx0ICogQG92ZXJ2aWV3IGVzNi1wcm9taXNlIC0gYSB0aW55IGltcGxlbWVudGF0aW9uIG9mIFByb21pc2VzL0ErLlxuXHQgKiBAY29weXJpZ2h0IENvcHlyaWdodCAoYykgMjAxNCBZZWh1ZGEgS2F0eiwgVG9tIERhbGUsIFN0ZWZhbiBQZW5uZXIgYW5kIGNvbnRyaWJ1dG9ycyAoQ29udmVyc2lvbiB0byBFUzYgQVBJIGJ5IEpha2UgQXJjaGliYWxkKVxuXHQgKiBAbGljZW5zZSAgIExpY2Vuc2VkIHVuZGVyIE1JVCBsaWNlbnNlXG5cdCAqICAgICAgICAgICAgU2VlIGh0dHBzOi8vcmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbS9qYWtlYXJjaGliYWxkL2VzNi1wcm9taXNlL21hc3Rlci9MSUNFTlNFXG5cdCAqIEB2ZXJzaW9uICAgMi4zLjBcblx0ICovXG4oZnVuY3Rpb24oKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBhKHQpe3JldHVyblwiZnVuY3Rpb25cIj09dHlwZW9mIHR8fFwib2JqZWN0XCI9PXR5cGVvZiB0JiZudWxsIT09dH1mdW5jdGlvbiB1KHQpe3JldHVyblwiZnVuY3Rpb25cIj09dHlwZW9mIHR9ZnVuY3Rpb24gaCh0KXtyZXR1cm5cIm9iamVjdFwiPT10eXBlb2YgdCYmbnVsbCE9PXR9ZnVuY3Rpb24gYyh0KXtxPXR9ZnVuY3Rpb24gbCh0KXtRPXR9ZnVuY3Rpb24gZigpe3ZhciBlPXQubmV4dFRpY2ssbj10LnZlcnNpb25zLm5vZGUubWF0Y2goL14oPzooXFxkKylcXC4pPyg/OihcXGQrKVxcLik/KFxcKnxcXGQrKSQvKTtyZXR1cm4gQXJyYXkuaXNBcnJheShuKSYmXCIwXCI9PT1uWzFdJiZcIjEwXCI9PT1uWzJdJiYoZT1yKSxmdW5jdGlvbigpe2UobSl9fWZ1bmN0aW9uIGQoKXtyZXR1cm4gZnVuY3Rpb24oKXtLKG0pfX1mdW5jdGlvbiBwKCl7dmFyIHQ9MCxlPW5ldyBldChtKSxuPWRvY3VtZW50LmNyZWF0ZVRleHROb2RlKFwiXCIpO3JldHVybiBlLm9ic2VydmUobix7Y2hhcmFjdGVyRGF0YTohMH0pLGZ1bmN0aW9uKCl7bi5kYXRhPXQ9Kyt0JTJ9fWZ1bmN0aW9uIGcoKXt2YXIgdD1uZXcgTWVzc2FnZUNoYW5uZWw7cmV0dXJuIHQucG9ydDEub25tZXNzYWdlPW0sZnVuY3Rpb24oKXt0LnBvcnQyLnBvc3RNZXNzYWdlKDApfX1mdW5jdGlvbiBfKCl7cmV0dXJuIGZ1bmN0aW9uKCl7c2V0VGltZW91dChtLDEpfX1mdW5jdGlvbiBtKCl7Zm9yKHZhciB0PTA7Wj50O3QrPTIpe3ZhciBlPXJ0W3RdLG49cnRbdCsxXTtlKG4pLHJ0W3RdPXZvaWQgMCxydFt0KzFdPXZvaWQgMH1aPTB9ZnVuY3Rpb24geSgpe3RyeXt2YXIgdD1uKDI2KTtyZXR1cm4gSz10LnJ1bk9uTG9vcHx8dC5ydW5PbkNvbnRleHQsZCgpfWNhdGNoKGUpe3JldHVybiBfKCl9fWZ1bmN0aW9uIHYoKXt9ZnVuY3Rpb24gRSgpe3JldHVybiBuZXcgVHlwZUVycm9yKFwiWW91IGNhbm5vdCByZXNvbHZlIGEgcHJvbWlzZSB3aXRoIGl0c2VsZlwiKX1mdW5jdGlvbiBTKCl7cmV0dXJuIG5ldyBUeXBlRXJyb3IoXCJBIHByb21pc2VzIGNhbGxiYWNrIGNhbm5vdCByZXR1cm4gdGhhdCBzYW1lIHByb21pc2UuXCIpfWZ1bmN0aW9uIEEodCl7dHJ5e3JldHVybiB0LnRoZW59Y2F0Y2goZSl7cmV0dXJuIHV0LmVycm9yPWUsdXR9fWZ1bmN0aW9uIHcodCxlLG4saSl7dHJ5e3QuY2FsbChlLG4saSl9Y2F0Y2gocil7cmV0dXJuIHJ9fWZ1bmN0aW9uIFQodCxlLG4pe1EoZnVuY3Rpb24odCl7dmFyIGk9ITEscj13KG4sZSxmdW5jdGlvbihuKXtpfHwoaT0hMCxlIT09bj9JKHQsbik6Tyh0LG4pKX0sZnVuY3Rpb24oZSl7aXx8KGk9ITAsUih0LGUpKX0sXCJTZXR0bGU6IFwiKyh0Ll9sYWJlbHx8XCIgdW5rbm93biBwcm9taXNlXCIpKTshaSYmciYmKGk9ITAsUih0LHIpKX0sdCl9ZnVuY3Rpb24gYih0LGUpe2UuX3N0YXRlPT09c3Q/Tyh0LGUuX3Jlc3VsdCk6ZS5fc3RhdGU9PT1hdD9SKHQsZS5fcmVzdWx0KTpEKGUsdm9pZCAwLGZ1bmN0aW9uKGUpe0kodCxlKX0sZnVuY3Rpb24oZSl7Uih0LGUpfSl9ZnVuY3Rpb24gUCh0LGUpe2lmKGUuY29uc3RydWN0b3I9PT10LmNvbnN0cnVjdG9yKWIodCxlKTtlbHNle3ZhciBuPUEoZSk7bj09PXV0P1IodCx1dC5lcnJvcik6dm9pZCAwPT09bj9PKHQsZSk6dShuKT9UKHQsZSxuKTpPKHQsZSl9fWZ1bmN0aW9uIEkodCxlKXt0PT09ZT9SKHQsRSgpKTphKGUpP1AodCxlKTpPKHQsZSl9ZnVuY3Rpb24gTCh0KXt0Ll9vbmVycm9yJiZ0Ll9vbmVycm9yKHQuX3Jlc3VsdCksTSh0KX1mdW5jdGlvbiBPKHQsZSl7dC5fc3RhdGU9PT1vdCYmKHQuX3Jlc3VsdD1lLHQuX3N0YXRlPXN0LDAhPT10Ll9zdWJzY3JpYmVycy5sZW5ndGgmJlEoTSx0KSl9ZnVuY3Rpb24gUih0LGUpe3QuX3N0YXRlPT09b3QmJih0Ll9zdGF0ZT1hdCx0Ll9yZXN1bHQ9ZSxRKEwsdCkpfWZ1bmN0aW9uIEQodCxlLG4saSl7dmFyIHI9dC5fc3Vic2NyaWJlcnMsbz1yLmxlbmd0aDt0Ll9vbmVycm9yPW51bGwscltvXT1lLHJbbytzdF09bixyW28rYXRdPWksMD09PW8mJnQuX3N0YXRlJiZRKE0sdCl9ZnVuY3Rpb24gTSh0KXt2YXIgZT10Ll9zdWJzY3JpYmVycyxuPXQuX3N0YXRlO2lmKDAhPT1lLmxlbmd0aCl7Zm9yKHZhciBpLHIsbz10Ll9yZXN1bHQscz0wO3M8ZS5sZW5ndGg7cys9MylpPWVbc10scj1lW3Mrbl0saT94KG4saSxyLG8pOnIobyk7dC5fc3Vic2NyaWJlcnMubGVuZ3RoPTB9fWZ1bmN0aW9uIGsoKXt0aGlzLmVycm9yPW51bGx9ZnVuY3Rpb24gTih0LGUpe3RyeXtyZXR1cm4gdChlKX1jYXRjaChuKXtyZXR1cm4gaHQuZXJyb3I9bixodH19ZnVuY3Rpb24geCh0LGUsbixpKXt2YXIgcixvLHMsYSxoPXUobik7aWYoaCl7aWYocj1OKG4saSkscj09PWh0PyhhPSEwLG89ci5lcnJvcixyPW51bGwpOnM9ITAsZT09PXIpcmV0dXJuIHZvaWQgUihlLFMoKSl9ZWxzZSByPWkscz0hMDtlLl9zdGF0ZSE9PW90fHwoaCYmcz9JKGUscik6YT9SKGUsbyk6dD09PXN0P08oZSxyKTp0PT09YXQmJlIoZSxyKSl9ZnVuY3Rpb24gQyh0LGUpe3RyeXtlKGZ1bmN0aW9uKGUpe0kodCxlKX0sZnVuY3Rpb24oZSl7Uih0LGUpfSl9Y2F0Y2gobil7Uih0LG4pfX1mdW5jdGlvbiBGKHQsZSl7dmFyIG49dGhpcztuLl9pbnN0YW5jZUNvbnN0cnVjdG9yPXQsbi5wcm9taXNlPW5ldyB0KHYpLG4uX3ZhbGlkYXRlSW5wdXQoZSk/KG4uX2lucHV0PWUsbi5sZW5ndGg9ZS5sZW5ndGgsbi5fcmVtYWluaW5nPWUubGVuZ3RoLG4uX2luaXQoKSwwPT09bi5sZW5ndGg/TyhuLnByb21pc2Usbi5fcmVzdWx0KToobi5sZW5ndGg9bi5sZW5ndGh8fDAsbi5fZW51bWVyYXRlKCksMD09PW4uX3JlbWFpbmluZyYmTyhuLnByb21pc2Usbi5fcmVzdWx0KSkpOlIobi5wcm9taXNlLG4uX3ZhbGlkYXRpb25FcnJvcigpKX1mdW5jdGlvbiBVKHQpe3JldHVybiBuZXcgY3QodGhpcyx0KS5wcm9taXNlfWZ1bmN0aW9uIEIodCl7ZnVuY3Rpb24gZSh0KXtJKHIsdCl9ZnVuY3Rpb24gbih0KXtSKHIsdCl9dmFyIGk9dGhpcyxyPW5ldyBpKHYpO2lmKCEkKHQpKXJldHVybiBSKHIsbmV3IFR5cGVFcnJvcihcIllvdSBtdXN0IHBhc3MgYW4gYXJyYXkgdG8gcmFjZS5cIikpLHI7Zm9yKHZhciBvPXQubGVuZ3RoLHM9MDtyLl9zdGF0ZT09PW90JiZvPnM7cysrKUQoaS5yZXNvbHZlKHRbc10pLHZvaWQgMCxlLG4pO3JldHVybiByfWZ1bmN0aW9uIEgodCl7dmFyIGU9dGhpcztpZih0JiZcIm9iamVjdFwiPT10eXBlb2YgdCYmdC5jb25zdHJ1Y3Rvcj09PWUpcmV0dXJuIHQ7dmFyIG49bmV3IGUodik7cmV0dXJuIEkobix0KSxufWZ1bmN0aW9uIGoodCl7dmFyIGU9dGhpcyxuPW5ldyBlKHYpO3JldHVybiBSKG4sdCksbn1mdW5jdGlvbiBHKCl7dGhyb3cgbmV3IFR5cGVFcnJvcihcIllvdSBtdXN0IHBhc3MgYSByZXNvbHZlciBmdW5jdGlvbiBhcyB0aGUgZmlyc3QgYXJndW1lbnQgdG8gdGhlIHByb21pc2UgY29uc3RydWN0b3JcIil9ZnVuY3Rpb24gWSgpe3Rocm93IG5ldyBUeXBlRXJyb3IoXCJGYWlsZWQgdG8gY29uc3RydWN0ICdQcm9taXNlJzogUGxlYXNlIHVzZSB0aGUgJ25ldycgb3BlcmF0b3IsIHRoaXMgb2JqZWN0IGNvbnN0cnVjdG9yIGNhbm5vdCBiZSBjYWxsZWQgYXMgYSBmdW5jdGlvbi5cIil9ZnVuY3Rpb24gVih0KXt0aGlzLl9pZD1ndCsrLHRoaXMuX3N0YXRlPXZvaWQgMCx0aGlzLl9yZXN1bHQ9dm9pZCAwLHRoaXMuX3N1YnNjcmliZXJzPVtdLHYhPT10JiYodSh0KXx8RygpLHRoaXMgaW5zdGFuY2VvZiBWfHxZKCksQyh0aGlzLHQpKX1mdW5jdGlvbiB6KCl7dmFyIHQ7aWYoXCJ1bmRlZmluZWRcIiE9dHlwZW9mIG8pdD1vO2Vsc2UgaWYoXCJ1bmRlZmluZWRcIiE9dHlwZW9mIHNlbGYpdD1zZWxmO2Vsc2UgdHJ5e3Q9RnVuY3Rpb24oXCJyZXR1cm4gdGhpc1wiKSgpfWNhdGNoKGUpe3Rocm93IG5ldyBFcnJvcihcInBvbHlmaWxsIGZhaWxlZCBiZWNhdXNlIGdsb2JhbCBvYmplY3QgaXMgdW5hdmFpbGFibGUgaW4gdGhpcyBlbnZpcm9ubWVudFwiKX12YXIgbj10LlByb21pc2U7biYmXCJbb2JqZWN0IFByb21pc2VdXCI9PT1PYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwobi5yZXNvbHZlKCkpJiYhbi5jYXN0fHwodC5Qcm9taXNlPV90KX12YXIgVztXPUFycmF5LmlzQXJyYXk/QXJyYXkuaXNBcnJheTpmdW5jdGlvbih0KXtyZXR1cm5cIltvYmplY3QgQXJyYXldXCI9PT1PYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwodCl9O3ZhciBLLHEsWCwkPVcsWj0wLFE9KHt9LnRvU3RyaW5nLGZ1bmN0aW9uKHQsZSl7cnRbWl09dCxydFtaKzFdPWUsWis9MiwyPT09WiYmKHE/cShtKTpYKCkpfSksSj1cInVuZGVmaW5lZFwiIT10eXBlb2Ygd2luZG93P3dpbmRvdzp2b2lkIDAsdHQ9Snx8e30sZXQ9dHQuTXV0YXRpb25PYnNlcnZlcnx8dHQuV2ViS2l0TXV0YXRpb25PYnNlcnZlcixudD1cInVuZGVmaW5lZFwiIT10eXBlb2YgdCYmXCJbb2JqZWN0IHByb2Nlc3NdXCI9PT17fS50b1N0cmluZy5jYWxsKHQpLGl0PVwidW5kZWZpbmVkXCIhPXR5cGVvZiBVaW50OENsYW1wZWRBcnJheSYmXCJ1bmRlZmluZWRcIiE9dHlwZW9mIGltcG9ydFNjcmlwdHMmJlwidW5kZWZpbmVkXCIhPXR5cGVvZiBNZXNzYWdlQ2hhbm5lbCxydD1uZXcgQXJyYXkoMWUzKTtYPW50P2YoKTpldD9wKCk6aXQ/ZygpOnZvaWQgMD09PUo/eSgpOl8oKTt2YXIgb3Q9dm9pZCAwLHN0PTEsYXQ9Mix1dD1uZXcgayxodD1uZXcgaztGLnByb3RvdHlwZS5fdmFsaWRhdGVJbnB1dD1mdW5jdGlvbih0KXtyZXR1cm4gJCh0KX0sRi5wcm90b3R5cGUuX3ZhbGlkYXRpb25FcnJvcj1mdW5jdGlvbigpe3JldHVybiBuZXcgRXJyb3IoXCJBcnJheSBNZXRob2RzIG11c3QgYmUgcHJvdmlkZWQgYW4gQXJyYXlcIil9LEYucHJvdG90eXBlLl9pbml0PWZ1bmN0aW9uKCl7dGhpcy5fcmVzdWx0PW5ldyBBcnJheSh0aGlzLmxlbmd0aCl9O3ZhciBjdD1GO0YucHJvdG90eXBlLl9lbnVtZXJhdGU9ZnVuY3Rpb24oKXtmb3IodmFyIHQ9dGhpcyxlPXQubGVuZ3RoLG49dC5wcm9taXNlLGk9dC5faW5wdXQscj0wO24uX3N0YXRlPT09b3QmJmU+cjtyKyspdC5fZWFjaEVudHJ5KGlbcl0scil9LEYucHJvdG90eXBlLl9lYWNoRW50cnk9ZnVuY3Rpb24odCxlKXt2YXIgbj10aGlzLGk9bi5faW5zdGFuY2VDb25zdHJ1Y3RvcjtoKHQpP3QuY29uc3RydWN0b3I9PT1pJiZ0Ll9zdGF0ZSE9PW90Pyh0Ll9vbmVycm9yPW51bGwsbi5fc2V0dGxlZEF0KHQuX3N0YXRlLGUsdC5fcmVzdWx0KSk6bi5fd2lsbFNldHRsZUF0KGkucmVzb2x2ZSh0KSxlKToobi5fcmVtYWluaW5nLS0sbi5fcmVzdWx0W2VdPXQpfSxGLnByb3RvdHlwZS5fc2V0dGxlZEF0PWZ1bmN0aW9uKHQsZSxuKXt2YXIgaT10aGlzLHI9aS5wcm9taXNlO3IuX3N0YXRlPT09b3QmJihpLl9yZW1haW5pbmctLSx0PT09YXQ/UihyLG4pOmkuX3Jlc3VsdFtlXT1uKSwwPT09aS5fcmVtYWluaW5nJiZPKHIsaS5fcmVzdWx0KX0sRi5wcm90b3R5cGUuX3dpbGxTZXR0bGVBdD1mdW5jdGlvbih0LGUpe3ZhciBuPXRoaXM7RCh0LHZvaWQgMCxmdW5jdGlvbih0KXtuLl9zZXR0bGVkQXQoc3QsZSx0KX0sZnVuY3Rpb24odCl7bi5fc2V0dGxlZEF0KGF0LGUsdCl9KX07dmFyIGx0PVUsZnQ9QixkdD1ILHB0PWosZ3Q9MCxfdD1WO1YuYWxsPWx0LFYucmFjZT1mdCxWLnJlc29sdmU9ZHQsVi5yZWplY3Q9cHQsVi5fc2V0U2NoZWR1bGVyPWMsVi5fc2V0QXNhcD1sLFYuX2FzYXA9USxWLnByb3RvdHlwZT17Y29uc3RydWN0b3I6Vix0aGVuOmZ1bmN0aW9uKHQsZSl7dmFyIG49dGhpcyxpPW4uX3N0YXRlO2lmKGk9PT1zdCYmIXR8fGk9PT1hdCYmIWUpcmV0dXJuIHRoaXM7dmFyIHI9bmV3IHRoaXMuY29uc3RydWN0b3Iodiksbz1uLl9yZXN1bHQ7aWYoaSl7dmFyIHM9YXJndW1lbnRzW2ktMV07UShmdW5jdGlvbigpe3goaSxyLHMsbyl9KX1lbHNlIEQobixyLHQsZSk7cmV0dXJuIHJ9LFwiY2F0Y2hcIjpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy50aGVuKG51bGwsdCl9fTt2YXIgbXQ9eix5dD17UHJvbWlzZTpfdCxwb2x5ZmlsbDptdH07bigxOSkuYW1kPyhpPWZ1bmN0aW9uKCl7cmV0dXJuIHl0fS5jYWxsKGUsbixlLHMpLCEodm9pZCAwIT09aSYmKHMuZXhwb3J0cz1pKSkpOlwidW5kZWZpbmVkXCIhPXR5cGVvZiBzJiZzLmV4cG9ydHM/cy5leHBvcnRzPXl0OlwidW5kZWZpbmVkXCIhPXR5cGVvZiB0aGlzJiYodGhpcy5FUzZQcm9taXNlPXl0KSxtdCgpfSkuY2FsbCh0aGlzKX0pLmNhbGwoZSxuKDYpLG4oMykuc2V0SW1tZWRpYXRlLGZ1bmN0aW9uKCl7cmV0dXJuIHRoaXN9KCksbigyMCkodCkpfSxmdW5jdGlvbih0LGUpe1widXNlIHN0cmljdFwiO3ZhciBuPXtvYXV0aF90b2tlbjp2b2lkIDAsYmFzZVVSTDpcImh0dHBzOi8vYXBpLnNvdW5kY2xvdWQuY29tXCIsY29ubmVjdFVSTDpcIi8vY29ubmVjdC5zb3VuZGNsb3VkLmNvbVwiLGNsaWVudF9pZDp2b2lkIDAscmVkaXJlY3RfdXJpOnZvaWQgMH07dC5leHBvcnRzPXtnZXQ6ZnVuY3Rpb24odCl7cmV0dXJuIG5bdF19LHNldDpmdW5jdGlvbih0LGUpe2UmJihuW3RdPWUpfX19LGZ1bmN0aW9uKHQsZSxuKXsoZnVuY3Rpb24odCxpKXtmdW5jdGlvbiByKHQsZSl7dGhpcy5faWQ9dCx0aGlzLl9jbGVhckZuPWV9dmFyIG89big2KS5uZXh0VGljayxzPUZ1bmN0aW9uLnByb3RvdHlwZS5hcHBseSxhPUFycmF5LnByb3RvdHlwZS5zbGljZSx1PXt9LGg9MDtlLnNldFRpbWVvdXQ9ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IHIocy5jYWxsKHNldFRpbWVvdXQsd2luZG93LGFyZ3VtZW50cyksY2xlYXJUaW1lb3V0KX0sZS5zZXRJbnRlcnZhbD1mdW5jdGlvbigpe3JldHVybiBuZXcgcihzLmNhbGwoc2V0SW50ZXJ2YWwsd2luZG93LGFyZ3VtZW50cyksY2xlYXJJbnRlcnZhbCl9LGUuY2xlYXJUaW1lb3V0PWUuY2xlYXJJbnRlcnZhbD1mdW5jdGlvbih0KXt0LmNsb3NlKCl9LHIucHJvdG90eXBlLnVucmVmPXIucHJvdG90eXBlLnJlZj1mdW5jdGlvbigpe30sci5wcm90b3R5cGUuY2xvc2U9ZnVuY3Rpb24oKXt0aGlzLl9jbGVhckZuLmNhbGwod2luZG93LHRoaXMuX2lkKX0sZS5lbnJvbGw9ZnVuY3Rpb24odCxlKXtjbGVhclRpbWVvdXQodC5faWRsZVRpbWVvdXRJZCksdC5faWRsZVRpbWVvdXQ9ZX0sZS51bmVucm9sbD1mdW5jdGlvbih0KXtjbGVhclRpbWVvdXQodC5faWRsZVRpbWVvdXRJZCksdC5faWRsZVRpbWVvdXQ9LTF9LGUuX3VucmVmQWN0aXZlPWUuYWN0aXZlPWZ1bmN0aW9uKHQpe2NsZWFyVGltZW91dCh0Ll9pZGxlVGltZW91dElkKTt2YXIgZT10Ll9pZGxlVGltZW91dDtlPj0wJiYodC5faWRsZVRpbWVvdXRJZD1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7dC5fb25UaW1lb3V0JiZ0Ll9vblRpbWVvdXQoKX0sZSkpfSxlLnNldEltbWVkaWF0ZT1cImZ1bmN0aW9uXCI9PXR5cGVvZiB0P3Q6ZnVuY3Rpb24odCl7dmFyIG49aCsrLGk9YXJndW1lbnRzLmxlbmd0aDwyPyExOmEuY2FsbChhcmd1bWVudHMsMSk7cmV0dXJuIHVbbl09ITAsbyhmdW5jdGlvbigpe3Vbbl0mJihpP3QuYXBwbHkobnVsbCxpKTp0LmNhbGwobnVsbCksZS5jbGVhckltbWVkaWF0ZShuKSl9KSxufSxlLmNsZWFySW1tZWRpYXRlPVwiZnVuY3Rpb25cIj09dHlwZW9mIGk/aTpmdW5jdGlvbih0KXtkZWxldGUgdVt0XX19KS5jYWxsKGUsbigzKS5zZXRJbW1lZGlhdGUsbigzKS5jbGVhckltbWVkaWF0ZSl9LGZ1bmN0aW9uKHQsZSxuKXsoZnVuY3Rpb24oZSl7XCJ1c2Ugc3RyaWN0XCI7dmFyIGk9bigyKSxyPW4oMTcpLG89bigxKS5Qcm9taXNlLHM9ZnVuY3Rpb24odCxuLGkscil7dmFyIHM9dm9pZCAwLGE9bmV3IG8oZnVuY3Rpb24obyl7dmFyIGE9ZS5Gb3JtRGF0YSYmaSBpbnN0YW5jZW9mIEZvcm1EYXRhO3M9bmV3IFhNTEh0dHBSZXF1ZXN0LHMudXBsb2FkJiZzLnVwbG9hZC5hZGRFdmVudExpc3RlbmVyKFwicHJvZ3Jlc3NcIixyKSxzLm9wZW4odCxuLCEwKSxhfHxzLnNldFJlcXVlc3RIZWFkZXIoXCJDb250ZW50LVR5cGVcIixcImFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZFwiKSxzLm9ucmVhZHlzdGF0ZWNoYW5nZT1mdW5jdGlvbigpezQ9PT1zLnJlYWR5U3RhdGUmJm8oe3Jlc3BvbnNlVGV4dDpzLnJlc3BvbnNlVGV4dCxyZXF1ZXN0OnN9KX0scy5zZW5kKGkpfSk7cmV0dXJuIGEucmVxdWVzdD1zLGF9LGE9ZnVuY3Rpb24odCl7dmFyIGU9dC5yZXNwb25zZVRleHQsbj10LnJlcXVlc3QsaT12b2lkIDAscj12b2lkIDA7dHJ5e3I9SlNPTi5wYXJzZShlKX1jYXRjaChvKXt9cmV0dXJuIHI/ci5lcnJvcnMmJihpPXttZXNzYWdlOlwiXCJ9LHIuZXJyb3JzWzBdJiZyLmVycm9yc1swXS5lcnJvcl9tZXNzYWdlJiYoaT17bWVzc2FnZTpyLmVycm9yc1swXS5lcnJvcl9tZXNzYWdlfSkpOmk9bj97bWVzc2FnZTpcIkhUVFAgRXJyb3I6IFwiK24uc3RhdHVzfTp7bWVzc2FnZTpcIlVua25vd24gZXJyb3JcIn0saSYmKGkuc3RhdHVzPW4uc3RhdHVzKSx7anNvbjpyLGVycm9yOml9fSx1PWZ1bmN0aW9uIGModCxlLG4saSl7dmFyIHI9cyh0LGUsbixpKSxvPXIudGhlbihmdW5jdGlvbih0KXt2YXIgZT10LnJlc3BvbnNlVGV4dCxuPXQucmVxdWVzdCxpPWEoe3Jlc3BvbnNlVGV4dDplLHJlcXVlc3Q6bn0pO2lmKGkuanNvbiYmXCIzMDIgLSBGb3VuZFwiPT09aS5qc29uLnN0YXR1cylyZXR1cm4gYyhcIkdFVFwiLGkuanNvbi5sb2NhdGlvbixudWxsKTtpZigyMDAhPT1uLnN0YXR1cyYmaS5lcnJvcil0aHJvdyBpLmVycm9yO3JldHVybiBpLmpzb259KTtyZXR1cm4gby5yZXF1ZXN0PXIucmVxdWVzdCxvfSxoPWZ1bmN0aW9uKHQsZSxuKXtPYmplY3Qua2V5cyhlKS5mb3JFYWNoKGZ1bmN0aW9uKGkpe24/dC5hcHBlbmQoaSxlW2ldKTp0W2ldPWVbaV19KX07dC5leHBvcnRzPXtyZXF1ZXN0OmZ1bmN0aW9uKHQsbil7dmFyIG89YXJndW1lbnRzLmxlbmd0aDw9Mnx8dm9pZCAwPT09YXJndW1lbnRzWzJdP3t9OmFyZ3VtZW50c1syXSxzPWFyZ3VtZW50cy5sZW5ndGg8PTN8fHZvaWQgMD09PWFyZ3VtZW50c1szXT9mdW5jdGlvbigpe306YXJndW1lbnRzWzNdLGE9aS5nZXQoXCJvYXV0aF90b2tlblwiKSxjPWkuZ2V0KFwiY2xpZW50X2lkXCIpLGw9e30sZj1lLkZvcm1EYXRhJiZvIGluc3RhbmNlb2YgRm9ybURhdGEsZD12b2lkIDAscD12b2lkIDA7cmV0dXJuIGwuZm9ybWF0PVwianNvblwiLGE/bC5vYXV0aF90b2tlbj1hOmwuY2xpZW50X2lkPWMsaChvLGwsZiksXCJHRVRcIiE9PXQmJihkPWY/bzpyLmVuY29kZShvKSxvPXtvYXV0aF90b2tlbjphfSksbj1cIi9cIiE9PW5bMF0/XCIvXCIrbjpuLHA9XCJcIitpLmdldChcImJhc2VVUkxcIikrbitcIj9cIityLmVuY29kZShvKSx1KHQscCxkLHMpfSxvRW1iZWQ6ZnVuY3Rpb24odCl7dmFyIGU9YXJndW1lbnRzLmxlbmd0aDw9MXx8dm9pZCAwPT09YXJndW1lbnRzWzFdP3t9OmFyZ3VtZW50c1sxXSxuPWUuZWxlbWVudDtkZWxldGUgZS5lbGVtZW50LGUudXJsPXQ7dmFyIGk9XCJodHRwczovL3NvdW5kY2xvdWQuY29tL29lbWJlZC5qc29uP1wiK3IuZW5jb2RlKGUpO3JldHVybiB1KFwiR0VUXCIsaSxudWxsKS50aGVuKGZ1bmN0aW9uKHQpe3JldHVybiBuJiZ0Lmh0bWwmJihuLmlubmVySFRNTD10Lmh0bWwpLHR9KX0sdXBsb2FkOmZ1bmN0aW9uKCl7dmFyIHQ9YXJndW1lbnRzLmxlbmd0aDw9MHx8dm9pZCAwPT09YXJndW1lbnRzWzBdP3t9OmFyZ3VtZW50c1swXSxlPXQuYXNzZXRfZGF0YXx8dC5maWxlLG49aS5nZXQoXCJvYXV0aF90b2tlblwiKSYmdC50aXRsZSYmZTtpZighbilyZXR1cm4gbmV3IG8oZnVuY3Rpb24odCxlKXtlKHtzdGF0dXM6MCxlcnJvcl9tZXNzYWdlOlwib2F1dGhfdG9rZW4gbmVlZHMgdG8gYmUgcHJlc2VudCBhbmQgdGl0bGUgYW5kIGFzc2V0X2RhdGEgLyBmaWxlIHBhc3NlZCBhcyBwYXJhbWV0ZXJzXCJ9KX0pO3ZhciByPU9iamVjdC5rZXlzKHQpLHM9bmV3IEZvcm1EYXRhO3JldHVybiByLmZvckVhY2goZnVuY3Rpb24oZSl7dmFyIG49dFtlXTtcImZpbGVcIj09PWUmJihlPVwiYXNzZXRfZGF0YVwiLG49dC5maWxlKSxzLmFwcGVuZChcInRyYWNrW1wiK2UrXCJdXCIsbil9KSx0aGlzLnJlcXVlc3QoXCJQT1NUXCIsXCIvdHJhY2tzXCIscyx0LnByb2dyZXNzKX0scmVzb2x2ZTpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5yZXF1ZXN0KFwiR0VUXCIsXCIvcmVzb2x2ZVwiLHt1cmw6dCxfc3RhdHVzX2NvZGVfbWFwOnszMDI6MjAwfX0pfX19KS5jYWxsKGUsZnVuY3Rpb24oKXtyZXR1cm4gdGhpc30oKSl9LGZ1bmN0aW9uKHQsZSl7XCJ1c2Ugc3RyaWN0XCI7dmFyIG49e307dC5leHBvcnRzPXtnZXQ6ZnVuY3Rpb24odCl7cmV0dXJuIG5bdF19LHNldDpmdW5jdGlvbih0LGUpe25bdF09ZX19fSxmdW5jdGlvbih0LGUpe2Z1bmN0aW9uIG4oKXtoJiZzJiYoaD0hMSxzLmxlbmd0aD91PXMuY29uY2F0KHUpOmM9LTEsdS5sZW5ndGgmJmkoKSl9ZnVuY3Rpb24gaSgpe2lmKCFoKXt2YXIgdD1zZXRUaW1lb3V0KG4pO2g9ITA7Zm9yKHZhciBlPXUubGVuZ3RoO2U7KXtmb3Iocz11LHU9W107KytjPGU7KXMmJnNbY10ucnVuKCk7Yz0tMSxlPXUubGVuZ3RofXM9bnVsbCxoPSExLGNsZWFyVGltZW91dCh0KX19ZnVuY3Rpb24gcih0LGUpe3RoaXMuZnVuPXQsdGhpcy5hcnJheT1lfWZ1bmN0aW9uIG8oKXt9dmFyIHMsYT10LmV4cG9ydHM9e30sdT1bXSxoPSExLGM9LTE7YS5uZXh0VGljaz1mdW5jdGlvbih0KXt2YXIgZT1uZXcgQXJyYXkoYXJndW1lbnRzLmxlbmd0aC0xKTtpZihhcmd1bWVudHMubGVuZ3RoPjEpZm9yKHZhciBuPTE7bjxhcmd1bWVudHMubGVuZ3RoO24rKyllW24tMV09YXJndW1lbnRzW25dO3UucHVzaChuZXcgcih0LGUpKSwxIT09dS5sZW5ndGh8fGh8fHNldFRpbWVvdXQoaSwwKX0sci5wcm90b3R5cGUucnVuPWZ1bmN0aW9uKCl7dGhpcy5mdW4uYXBwbHkobnVsbCx0aGlzLmFycmF5KX0sYS50aXRsZT1cImJyb3dzZXJcIixhLmJyb3dzZXI9ITAsYS5lbnY9e30sYS5hcmd2PVtdLGEudmVyc2lvbj1cIlwiLGEudmVyc2lvbnM9e30sYS5vbj1vLGEuYWRkTGlzdGVuZXI9byxhLm9uY2U9byxhLm9mZj1vLGEucmVtb3ZlTGlzdGVuZXI9byxhLnJlbW92ZUFsbExpc3RlbmVycz1vLGEuZW1pdD1vLGEuYmluZGluZz1mdW5jdGlvbih0KXt0aHJvdyBuZXcgRXJyb3IoXCJwcm9jZXNzLmJpbmRpbmcgaXMgbm90IHN1cHBvcnRlZFwiKX0sYS5jd2Q9ZnVuY3Rpb24oKXtyZXR1cm5cIi9cIn0sYS5jaGRpcj1mdW5jdGlvbih0KXt0aHJvdyBuZXcgRXJyb3IoXCJwcm9jZXNzLmNoZGlyIGlzIG5vdCBzdXBwb3J0ZWRcIil9LGEudW1hc2s9ZnVuY3Rpb24oKXtyZXR1cm4gMH19LGZ1bmN0aW9uKHQsZSxuKXtcInVzZSBzdHJpY3RcIjt2YXIgaT1uKDE4KTtlLmV4dHJhY3Q9ZnVuY3Rpb24odCl7cmV0dXJuIHQuc3BsaXQoXCI/XCIpWzFdfHxcIlwifSxlLnBhcnNlPWZ1bmN0aW9uKHQpe3JldHVyblwic3RyaW5nXCIhPXR5cGVvZiB0P3t9Oih0PXQudHJpbSgpLnJlcGxhY2UoL14oXFw/fCN8JikvLFwiXCIpLHQ/dC5zcGxpdChcIiZcIikucmVkdWNlKGZ1bmN0aW9uKHQsZSl7dmFyIG49ZS5yZXBsYWNlKC9cXCsvZyxcIiBcIikuc3BsaXQoXCI9XCIpLGk9bi5zaGlmdCgpLHI9bi5sZW5ndGg+MD9uLmpvaW4oXCI9XCIpOnZvaWQgMDtyZXR1cm4gaT1kZWNvZGVVUklDb21wb25lbnQoaSkscj12b2lkIDA9PT1yP251bGw6ZGVjb2RlVVJJQ29tcG9uZW50KHIpLHQuaGFzT3duUHJvcGVydHkoaSk/QXJyYXkuaXNBcnJheSh0W2ldKT90W2ldLnB1c2gocik6dFtpXT1bdFtpXSxyXTp0W2ldPXIsdH0se30pOnt9KX0sZS5zdHJpbmdpZnk9ZnVuY3Rpb24odCl7cmV0dXJuIHQ/T2JqZWN0LmtleXModCkuc29ydCgpLm1hcChmdW5jdGlvbihlKXt2YXIgbj10W2VdO3JldHVybiBBcnJheS5pc0FycmF5KG4pP24uc29ydCgpLm1hcChmdW5jdGlvbih0KXtyZXR1cm4gaShlKStcIj1cIitpKHQpfSkuam9pbihcIiZcIik6aShlKStcIj1cIitpKG4pfSkuZmlsdGVyKGZ1bmN0aW9uKHQpe3JldHVybiB0Lmxlbmd0aD4wfSkuam9pbihcIiZcIik6XCJcIn19LGZ1bmN0aW9uKHQsZSxuKXtcInVzZSBzdHJpY3RcIjt2YXIgaT1uKDcpLHI9big1KTt0LmV4cG9ydHM9e25vdGlmeURpYWxvZzpmdW5jdGlvbih0KXt2YXIgZT1pLnBhcnNlKHQuc2VhcmNoKSxuPWkucGFyc2UodC5oYXNoKSxvPXtvYXV0aF90b2tlbjplLmFjY2Vzc190b2tlbnx8bi5hY2Nlc3NfdG9rZW4sZGlhbG9nX2lkOmUuc3RhdGV8fG4uc3RhdGUsZXJyb3I6ZS5lcnJvcnx8bi5lcnJvcixlcnJvcl9kZXNjcmlwdGlvbjplLmVycm9yX2Rlc2NyaXB0aW9ufHxuLmVycm9yX2Rlc2NyaXB0aW9ufSxzPXIuZ2V0KG8uZGlhbG9nX2lkKTtzJiZzLmhhbmRsZUNvbm5lY3RSZXNwb25zZShvKX19fSxmdW5jdGlvbih0LGUsbil7XCJ1c2Ugc3RyaWN0XCI7dmFyIGk9bigyKSxyPW4oMTEpLG89bigxKS5Qcm9taXNlLHM9ZnVuY3Rpb24odCl7cmV0dXJuIGkuc2V0KFwib2F1dGhfdG9rZW5cIix0Lm9hdXRoX3Rva2VuKSx0fTt0LmV4cG9ydHM9ZnVuY3Rpb24oKXt2YXIgdD1hcmd1bWVudHMubGVuZ3RoPD0wfHx2b2lkIDA9PT1hcmd1bWVudHNbMF0/e306YXJndW1lbnRzWzBdLGU9aS5nZXQoXCJvYXV0aF90b2tlblwiKTtpZihlKXJldHVybiBuZXcgbyhmdW5jdGlvbih0KXt0KHtvYXV0aF90b2tlbjplfSl9KTt2YXIgbj17Y2xpZW50X2lkOnQuY2xpZW50X2lkfHxpLmdldChcImNsaWVudF9pZFwiKSxyZWRpcmVjdF91cmk6dC5yZWRpcmVjdF91cml8fGkuZ2V0KFwicmVkaXJlY3RfdXJpXCIpLHJlc3BvbnNlX3R5cGU6XCJjb2RlX2FuZF90b2tlblwiLHNjb3BlOnQuc2NvcGV8fFwibm9uLWV4cGlyaW5nXCIsZGlzcGxheTpcInBvcHVwXCJ9O2lmKCFuLmNsaWVudF9pZHx8IW4ucmVkaXJlY3RfdXJpKXRocm93IG5ldyBFcnJvcihcIk9wdGlvbnMgY2xpZW50X2lkIGFuZCByZWRpcmVjdF91cmkgbXVzdCBiZSBwYXNzZWRcIik7dmFyIGE9bmV3IHIobik7cmV0dXJuIGEub3BlbigpLnRoZW4ocyl9fSxmdW5jdGlvbih0LGUsbil7XCJ1c2Ugc3RyaWN0XCI7dmFyIGk9bigxKS5Qcm9taXNlO3QuZXhwb3J0cz1mdW5jdGlvbigpe3ZhciB0PXt9O3JldHVybiB0LnByb21pc2U9bmV3IGkoZnVuY3Rpb24oZSxuKXt0LnJlc29sdmU9ZSx0LnJlamVjdD1ufSksdH19LGZ1bmN0aW9uKHQsZSxuKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBpKHQsZSl7aWYoISh0IGluc3RhbmNlb2YgZSkpdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKX12YXIgcj1mdW5jdGlvbigpe2Z1bmN0aW9uIHQodCxlKXtmb3IodmFyIG49MDtuPGUubGVuZ3RoO24rKyl7dmFyIGk9ZVtuXTtpLmVudW1lcmFibGU9aS5lbnVtZXJhYmxlfHwhMSxpLmNvbmZpZ3VyYWJsZT0hMCxcInZhbHVlXCJpbiBpJiYoaS53cml0YWJsZT0hMCksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsaS5rZXksaSl9fXJldHVybiBmdW5jdGlvbihlLG4saSl7cmV0dXJuIG4mJnQoZS5wcm90b3R5cGUsbiksaSYmdChlLGkpLGV9fSgpLG89bigxMCkscz1uKDUpLGE9bigxMiksdT1uKDcpLGg9XCJTb3VuZENsb3VkX0RpYWxvZ1wiLGM9ZnVuY3Rpb24oKXtyZXR1cm5baCxNYXRoLmNlaWwoMWU2Kk1hdGgucmFuZG9tKCkpLnRvU3RyaW5nKDE2KV0uam9pbihcIl9cIil9LGw9ZnVuY3Rpb24odCl7cmV0dXJuXCJodHRwczovL3NvdW5kY2xvdWQuY29tL2Nvbm5lY3Q/XCIrdS5zdHJpbmdpZnkodCl9LGY9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KCl7dmFyIGU9YXJndW1lbnRzLmxlbmd0aDw9MHx8dm9pZCAwPT09YXJndW1lbnRzWzBdP3t9OmFyZ3VtZW50c1swXTtpKHRoaXMsdCksdGhpcy5pZD1jKCksdGhpcy5vcHRpb25zPWUsdGhpcy5vcHRpb25zLnN0YXRlPXRoaXMuaWQsdGhpcy53aWR0aD00NTYsdGhpcy5oZWlnaHQ9NTEwLHRoaXMuZGVmZXJyZWQ9bygpfXJldHVybiByKHQsW3trZXk6XCJvcGVuXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgdD1sKHRoaXMub3B0aW9ucyk7cmV0dXJuIHRoaXMucG9wdXA9YS5vcGVuKHQsdGhpcy53aWR0aCx0aGlzLmhlaWdodCkscy5zZXQodGhpcy5pZCx0aGlzKSx0aGlzLmRlZmVycmVkLnByb21pc2V9fSx7a2V5OlwiaGFuZGxlQ29ubmVjdFJlc3BvbnNlXCIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIGU9dC5lcnJvcjtlP3RoaXMuZGVmZXJyZWQucmVqZWN0KHQpOnRoaXMuZGVmZXJyZWQucmVzb2x2ZSh0KSx0aGlzLnBvcHVwLmNsb3NlKCl9fV0pLHR9KCk7dC5leHBvcnRzPWZ9LGZ1bmN0aW9uKHQsZSl7XCJ1c2Ugc3RyaWN0XCI7dC5leHBvcnRzPXtvcGVuOmZ1bmN0aW9uKHQsZSxuKXt2YXIgaT17fSxyPXZvaWQgMDtyZXR1cm4gaS5sb2NhdGlvbj0xLGkud2lkdGg9ZSxpLmhlaWdodD1uLGkubGVmdD13aW5kb3cuc2NyZWVuWCsod2luZG93Lm91dGVyV2lkdGgtZSkvMixpLnRvcD13aW5kb3cuc2NyZWVuWSsod2luZG93Lm91dGVySGVpZ2h0LW4pLzIsaS50b29sYmFyPVwibm9cIixpLnNjcm9sbGJhcnM9XCJ5ZXNcIixyPU9iamVjdC5rZXlzKGkpLm1hcChmdW5jdGlvbih0KXtyZXR1cm4gdCtcIj1cIitpW3RdfSkuam9pbihcIiwgXCIpLHdpbmRvdy5vcGVuKHQsaS5uYW1lLHIpfX19LGZ1bmN0aW9uKHQsZSl7KGZ1bmN0aW9uKGUpe1widXNlIHN0cmljdFwiO3ZhciBuPWUuQXVkaW9Db250ZXh0fHxlLndlYmtpdEF1ZGlvQ29udGV4dCxpPW51bGw7dC5leHBvcnRzPWZ1bmN0aW9uKCl7cmV0dXJuIGk/aTppPW5ldyBufX0pLmNhbGwoZSxmdW5jdGlvbigpe3JldHVybiB0aGlzfSgpKX0sZnVuY3Rpb24odCxlKXsoZnVuY3Rpb24oZSl7XCJ1c2Ugc3RyaWN0XCI7dmFyIG49ZS5uYXZpZ2F0b3IuZ2V0VXNlck1lZGlhfHxlLm5hdmlnYXRvci53ZWJraXRHZXRVc2VyTWVkaWF8fGUubmF2aWdhdG9yLm1vekdldFVzZXJNZWRpYTt0LmV4cG9ydHM9ZnVuY3Rpb24odCxpLHIpe24uY2FsbChlLm5hdmlnYXRvcix0LGkscil9fSkuY2FsbChlLGZ1bmN0aW9uKCl7cmV0dXJuIHRoaXN9KCkpfSxmdW5jdGlvbih0LGUsbil7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gaSh0LGUpe2lmKCEodCBpbnN0YW5jZW9mIGUpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIil9dmFyIHI9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KHQsZSl7Zm9yKHZhciBuPTA7bjxlLmxlbmd0aDtuKyspe3ZhciBpPWVbbl07aS5lbnVtZXJhYmxlPWkuZW51bWVyYWJsZXx8ITEsaS5jb25maWd1cmFibGU9ITAsXCJ2YWx1ZVwiaW4gaSYmKGkud3JpdGFibGU9ITApLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LGkua2V5LGkpfX1yZXR1cm4gZnVuY3Rpb24oZSxuLGkpe3JldHVybiBuJiZ0KGUucHJvdG90eXBlLG4pLGkmJnQoZSxpKSxlfX0oKSxvPW4oMTMpLHM9bigxNCksYT1uKDEpLlByb21pc2UsdT1uKDI0KSxoPWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcyxlPXRoaXMuY29udGV4dDtyZXR1cm4gbmV3IGEoZnVuY3Rpb24obixpKXt0LnNvdXJjZT90LnNvdXJjZSBpbnN0YW5jZW9mIEF1ZGlvTm9kZT9uKHQuc291cmNlKTppKG5ldyBFcnJvcihcInNvdXJjZSBuZWVkcyB0byBiZSBhbiBpbnN0YW5jZSBvZiBBdWRpb05vZGVcIikpOnMoe2F1ZGlvOiEwfSxmdW5jdGlvbihpKXt0LnN0cmVhbT1pLHQuc291cmNlPWUuY3JlYXRlTWVkaWFTdHJlYW1Tb3VyY2UoaSksbih0LnNvdXJjZSl9LmJpbmQodCksaSl9KX0sYz1mdW5jdGlvbigpe2Z1bmN0aW9uIHQoKXt2YXIgZT1hcmd1bWVudHMubGVuZ3RoPD0wfHx2b2lkIDA9PT1hcmd1bWVudHNbMF0/e306YXJndW1lbnRzWzBdO2kodGhpcyx0KSx0aGlzLmNvbnRleHQ9ZS5jb250ZXh0fHxvKCksdGhpcy5fcmVjb3JkZXI9bnVsbCx0aGlzLnNvdXJjZT1lLnNvdXJjZSx0aGlzLnN0cmVhbT1udWxsfXJldHVybiByKHQsW3trZXk6XCJzdGFydFwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcztyZXR1cm4gaC5jYWxsKHRoaXMpLnRoZW4oZnVuY3Rpb24oZSl7cmV0dXJuIHQuX3JlY29yZGVyPW5ldyB1KGUpLHQuX3JlY29yZGVyLnJlY29yZCgpLGV9KX19LHtrZXk6XCJzdG9wXCIsdmFsdWU6ZnVuY3Rpb24oKXtpZih0aGlzLl9yZWNvcmRlciYmdGhpcy5fcmVjb3JkZXIuc3RvcCgpLHRoaXMuc3RyZWFtKWlmKHRoaXMuc3RyZWFtLnN0b3ApdGhpcy5zdHJlYW0uc3RvcCgpO2Vsc2UgaWYodGhpcy5zdHJlYW0uZ2V0VHJhY2tzKXt2YXIgdD10aGlzLnN0cmVhbS5nZXRUcmFja3MoKVswXTt0JiZ0LnN0b3AoKX19fSx7a2V5OlwiZ2V0QnVmZmVyXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgdD10aGlzO3JldHVybiBuZXcgYShmdW5jdGlvbihlLG4pe3QuX3JlY29yZGVyP3QuX3JlY29yZGVyLmdldEJ1ZmZlcihmdW5jdGlvbihuKXt2YXIgaT10LmNvbnRleHQuc2FtcGxlUmF0ZSxyPXQuY29udGV4dC5jcmVhdGVCdWZmZXIoMixuWzBdLmxlbmd0aCxpKTtyLmdldENoYW5uZWxEYXRhKDApLnNldChuWzBdKSxyLmdldENoYW5uZWxEYXRhKDEpLnNldChuWzFdKSxlKHIpfS5iaW5kKHQpKTpuKG5ldyBFcnJvcihcIk5vdGhpbmcgaGFzIGJlZW4gcmVjb3JkZWQgeWV0LlwiKSl9KX19LHtrZXk6XCJnZXRXQVZcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciB0PXRoaXM7cmV0dXJuIG5ldyBhKGZ1bmN0aW9uKGUsbil7dC5fcmVjb3JkZXI/dC5fcmVjb3JkZXIuZXhwb3J0V0FWKGZ1bmN0aW9uKHQpe2UodCl9KTpuKG5ldyBFcnJvcihcIk5vdGhpbmcgaGFzIGJlZW4gcmVjb3JkZWQgeWV0LlwiKSl9KX19LHtrZXk6XCJwbGF5XCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgdD10aGlzO3JldHVybiB0aGlzLmdldEJ1ZmZlcigpLnRoZW4oZnVuY3Rpb24oZSl7dmFyIG49dC5jb250ZXh0LmNyZWF0ZUJ1ZmZlclNvdXJjZSgpO3JldHVybiBuLmJ1ZmZlcj1lLG4uY29ubmVjdCh0LmNvbnRleHQuZGVzdGluYXRpb24pLG4uc3RhcnQoMCksbn0pfX0se2tleTpcInNhdmVBc1wiLHZhbHVlOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmdldFdBVigpLnRoZW4oZnVuY3Rpb24oZSl7dS5mb3JjZURvd25sb2FkKGUsdCl9KX19LHtrZXk6XCJkZWxldGVcIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMuX3JlY29yZGVyJiYodGhpcy5fcmVjb3JkZXIuc3RvcCgpLHRoaXMuX3JlY29yZGVyLmNsZWFyKCksdGhpcy5fcmVjb3JkZXI9bnVsbCksdGhpcy5zdHJlYW0mJnRoaXMuc3RyZWFtLnN0b3AoKX19XSksdH0oKTt0LmV4cG9ydHM9Y30sZnVuY3Rpb24odCxlLG4pe1widXNlIHN0cmljdFwiO3ZhciBpPW4oNCkscj1uKDIzKSxvPW5ldyByKHtmbGFzaEF1ZGlvUGF0aDpcImh0dHBzOi8vY29ubmVjdC5zb3VuZGNsb3VkLmNvbS9zZGsvZmxhc2hBdWRpby5zd2ZcIn0pLHM9bigyKSxhPW4oMjUpO3QuZXhwb3J0cz1mdW5jdGlvbih0LGUpe3ZhciBuPWU/e3NlY3JldF90b2tlbjplfTp7fTtyZXR1cm4gaS5yZXF1ZXN0KFwiR0VUXCIsdCxuKS50aGVuKGZ1bmN0aW9uKHQpe3ZhciBuPXMuZ2V0KFwiYmFzZVVSTFwiKSxpPXMuZ2V0KFwiY2xpZW50X2lkXCIpLHI9bitcIi90cmFja3MvXCIrdC5pZCtcIi9zdHJlYW1zP2NsaWVudF9pZD1cIitpLHU9bitcIi90cmFja3MvXCIrdC5pZCtcIi9wbGF5cz9jbGllbnRfaWQ9XCIraTtyZXR1cm4gZSYmKHIrPVwiJnNlY3JldF90b2tlbj1cIitlLHUrPVwiJnNlY3JldF90b2tlbj1cIitlKSxuZXcgYShvLHtzb3VuZElkOnQuaWQsZHVyYXRpb246dC5kdXJhdGlvbixzdHJlYW1VcmxzRW5kcG9pbnQ6cixyZWdpc3RlckVuZHBvaW50OnV9KX0pfX0sZnVuY3Rpb24odCxlKXt0LmV4cG9ydHM9e2VuY29kZTpmdW5jdGlvbih0LGUpe2Z1bmN0aW9uIG4odCl7cmV0dXJuIHQuZmlsdGVyKGZ1bmN0aW9uKHQpe3JldHVyblwic3RyaW5nXCI9PXR5cGVvZiB0JiZ0Lmxlbmd0aH0pLmpvaW4oXCImXCIpfWZ1bmN0aW9uIGkodCl7dmFyIGU9T2JqZWN0LmtleXModCk7cmV0dXJuIGw/ZS5zb3J0KCk6ZX1mdW5jdGlvbiByKHQsZSl7dmFyIHI9XCI6bmFtZVs6cHJvcF1cIjtyZXR1cm4gbihpKGUpLm1hcChmdW5jdGlvbihuKXtyZXR1cm4gcyhyLnJlcGxhY2UoLzpuYW1lLyx0KS5yZXBsYWNlKC86cHJvcC8sbiksZVtuXSl9KSl9ZnVuY3Rpb24gbyh0LGUpe3ZhciBpPVwiOm5hbWVbXVwiO3JldHVybiBuKGUubWFwKGZ1bmN0aW9uKGUpe3JldHVybiBzKGkucmVwbGFjZSgvOm5hbWUvLHQpLGUpfSkpfWZ1bmN0aW9uIHModCxlKXt2YXIgbj0vJTIwL2csaT1lbmNvZGVVUklDb21wb25lbnQscz10eXBlb2YgZSxhPW51bGw7cmV0dXJuIEFycmF5LmlzQXJyYXkoZSk/YT1vKHQsZSk6XCJzdHJpbmdcIj09PXM/YT1pKHQpK1wiPVwiK3UoZSk6XCJudW1iZXJcIj09PXM/YT1pKHQpK1wiPVwiK2koZSkucmVwbGFjZShuLFwiK1wiKTpcImJvb2xlYW5cIj09PXM/YT1pKHQpK1wiPVwiK2U6XCJvYmplY3RcIj09PXMmJihudWxsIT09ZT9hPXIodCxlKTpjfHwoYT1pKHQpK1wiPW51bGxcIikpLGF9ZnVuY3Rpb24gYSh0KXtyZXR1cm5cIiVcIisoXCIwXCIrdC5jaGFyQ29kZUF0KDApLnRvU3RyaW5nKDE2KSkuc2xpY2UoLTIpLnRvVXBwZXJDYXNlKCl9ZnVuY3Rpb24gdSh0KXtyZXR1cm4gdC5yZXBsYWNlKC9bXiAhJygpflxcKl0qL2csZW5jb2RlVVJJQ29tcG9uZW50KS5yZXBsYWNlKC8gL2csXCIrXCIpLnJlcGxhY2UoL1shJygpflxcKl0vZyxhKX12YXIgaD1cIm9iamVjdFwiPT10eXBlb2YgZT9lOnt9LGM9aC5pZ25vcmVudWxsfHwhMSxsPWguc29ydGVkfHwhMTtyZXR1cm4gbihpKHQpLm1hcChmdW5jdGlvbihlKXtyZXR1cm4gcyhlLHRbZV0pfSkpfX19LGZ1bmN0aW9uKHQsZSl7XCJ1c2Ugc3RyaWN0XCI7dC5leHBvcnRzPWZ1bmN0aW9uKHQpe3JldHVybiBlbmNvZGVVUklDb21wb25lbnQodCkucmVwbGFjZSgvWyEnKCkqXS9nLGZ1bmN0aW9uKHQpe3JldHVyblwiJVwiK3QuY2hhckNvZGVBdCgwKS50b1N0cmluZygxNikudG9VcHBlckNhc2UoKX0pfX0sZnVuY3Rpb24odCxlKXt0LmV4cG9ydHM9ZnVuY3Rpb24oKXt0aHJvdyBuZXcgRXJyb3IoXCJkZWZpbmUgY2Fubm90IGJlIHVzZWQgaW5kaXJlY3RcIil9fSxmdW5jdGlvbih0LGUpe3QuZXhwb3J0cz1mdW5jdGlvbih0KXtyZXR1cm4gdC53ZWJwYWNrUG9seWZpbGx8fCh0LmRlcHJlY2F0ZT1mdW5jdGlvbigpe30sdC5wYXRocz1bXSx0LmNoaWxkcmVuPVtdLHQud2VicGFja1BvbHlmaWxsPTEpLHR9fSxmdW5jdGlvbih0LGUpe3ZhciBuPXdpbmRvdy5VUkx8fHdpbmRvdy53ZWJraXRVUkw7dC5leHBvcnRzPWZ1bmN0aW9uKHQsZSl7dHJ5e3RyeXt2YXIgaTt0cnl7dmFyIHI9d2luZG93LkJsb2JCdWlsZGVyfHx3aW5kb3cuV2ViS2l0QmxvYkJ1aWxkZXJ8fHdpbmRvdy5Nb3pCbG9iQnVpbGRlcnx8d2luZG93Lk1TQmxvYkJ1aWxkZXI7aT1uZXcgcixpLmFwcGVuZCh0KSxpPWkuZ2V0QmxvYigpfWNhdGNoKG8pe2k9bmV3IEJsb2IoW3RdKX1yZXR1cm4gbmV3IFdvcmtlcihuLmNyZWF0ZU9iamVjdFVSTChpKSl9Y2F0Y2gobyl7cmV0dXJuIG5ldyBXb3JrZXIoXCJkYXRhOmFwcGxpY2F0aW9uL2phdmFzY3JpcHQsXCIrZW5jb2RlVVJJQ29tcG9uZW50KHQpKX19Y2F0Y2gobyl7cmV0dXJuIG5ldyBXb3JrZXIoZSl9fX0sZnVuY3Rpb24odCxlLG4pe3QuZXhwb3J0cz1mdW5jdGlvbigpe3JldHVybiBuKDIxKSgnIWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIG4ocil7aWYoZVtyXSlyZXR1cm4gZVtyXS5leHBvcnRzO3ZhciBhPWVbcl09e2V4cG9ydHM6e30saWQ6cixsb2FkZWQ6ITF9O3JldHVybiB0W3JdLmNhbGwoYS5leHBvcnRzLGEsYS5leHBvcnRzLG4pLGEubG9hZGVkPSEwLGEuZXhwb3J0c312YXIgZT17fTtyZXR1cm4gbi5tPXQsbi5jPWUsbi5wPVwiXCIsbigwKX0oW2Z1bmN0aW9uKHQsbil7KGZ1bmN0aW9uKHQpe2Z1bmN0aW9uIG4odCl7aD10LnNhbXBsZVJhdGUsdj10Lm51bUNoYW5uZWxzLHMoKX1mdW5jdGlvbiBlKHQpe2Zvcih2YXIgbj0wO3Y+bjtuKyspcFtuXS5wdXNoKHRbbl0pO2crPXRbMF0ubGVuZ3RofWZ1bmN0aW9uIHIodCl7Zm9yKHZhciBuPVtdLGU9MDt2PmU7ZSsrKW4ucHVzaChpKHBbZV0sZykpO2lmKDI9PT12KXZhciByPWYoblswXSxuWzFdKTtlbHNlIHZhciByPW5bMF07dmFyIGE9bChyKSxvPW5ldyBCbG9iKFthXSx7dHlwZTp0fSk7dGhpcy5wb3N0TWVzc2FnZShvKX1mdW5jdGlvbiBhKCl7Zm9yKHZhciB0PVtdLG49MDt2Pm47bisrKXQucHVzaChpKHBbbl0sZykpO3RoaXMucG9zdE1lc3NhZ2UodCl9ZnVuY3Rpb24gbygpe2c9MCxwPVtdLHMoKX1mdW5jdGlvbiBzKCl7Zm9yKHZhciB0PTA7dj50O3QrKylwW3RdPVtdfWZ1bmN0aW9uIGkodCxuKXtmb3IodmFyIGU9bmV3IEZsb2F0MzJBcnJheShuKSxyPTAsYT0wO2E8dC5sZW5ndGg7YSsrKWUuc2V0KHRbYV0scikscis9dFthXS5sZW5ndGg7cmV0dXJuIGV9ZnVuY3Rpb24gZih0LG4pe2Zvcih2YXIgZT10Lmxlbmd0aCtuLmxlbmd0aCxyPW5ldyBGbG9hdDMyQXJyYXkoZSksYT0wLG89MDtlPmE7KXJbYSsrXT10W29dLHJbYSsrXT1uW29dLG8rKztyZXR1cm4gcn1mdW5jdGlvbiBjKHQsbixlKXtmb3IodmFyIHI9MDtyPGUubGVuZ3RoO3IrKyxuKz0yKXt2YXIgYT1NYXRoLm1heCgtMSxNYXRoLm1pbigxLGVbcl0pKTt0LnNldEludDE2KG4sMD5hPzMyNzY4KmE6MzI3NjcqYSwhMCl9fWZ1bmN0aW9uIHUodCxuLGUpe2Zvcih2YXIgcj0wO3I8ZS5sZW5ndGg7cisrKXQuc2V0VWludDgobityLGUuY2hhckNvZGVBdChyKSl9ZnVuY3Rpb24gbCh0KXt2YXIgbj1uZXcgQXJyYXlCdWZmZXIoNDQrMip0Lmxlbmd0aCksZT1uZXcgRGF0YVZpZXcobik7cmV0dXJuIHUoZSwwLFwiUklGRlwiKSxlLnNldFVpbnQzMig0LDM2KzIqdC5sZW5ndGgsITApLHUoZSw4LFwiV0FWRVwiKSx1KGUsMTIsXCJmbXQgXCIpLGUuc2V0VWludDMyKDE2LDE2LCEwKSxlLnNldFVpbnQxNigyMCwxLCEwKSxlLnNldFVpbnQxNigyMix2LCEwKSxlLnNldFVpbnQzMigyNCxoLCEwKSxlLnNldFVpbnQzMigyOCw0KmgsITApLGUuc2V0VWludDE2KDMyLDIqdiwhMCksZS5zZXRVaW50MTYoMzQsMTYsITApLHUoZSwzNixcImRhdGFcIiksZS5zZXRVaW50MzIoNDAsMip0Lmxlbmd0aCwhMCksYyhlLDQ0LHQpLGV9dmFyIGgsdixnPTAscD1bXTt0Lm9ubWVzc2FnZT1mdW5jdGlvbih0KXtzd2l0Y2godC5kYXRhLmNvbW1hbmQpe2Nhc2VcImluaXRcIjpuKHQuZGF0YS5jb25maWcpO2JyZWFrO2Nhc2VcInJlY29yZFwiOmUodC5kYXRhLmJ1ZmZlcik7YnJlYWs7Y2FzZVwiZXhwb3J0V0FWXCI6cih0LmRhdGEudHlwZSk7YnJlYWs7Y2FzZVwiZ2V0QnVmZmVyXCI6YSgpO2JyZWFrO2Nhc2VcImNsZWFyXCI6bygpfX19KS5jYWxsKG4sZnVuY3Rpb24oKXtyZXR1cm4gdGhpc30oKSl9XSk7XFxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9OWY5YWFjMzJjOWE3NDMyYjU1NTUud29ya2VyLmpzLm1hcCcsbi5wK1wiOWY5YWFjMzJjOWE3NDMyYjU1NTUud29ya2VyLmpzXCIpfX0sZnVuY3Rpb24odCxlKXt0LmV4cG9ydHM9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZShpKXtpZihuW2ldKXJldHVybiBuW2ldLmV4cG9ydHM7dmFyIHI9bltpXT17ZXhwb3J0czp7fSxpZDppLGxvYWRlZDohMX07cmV0dXJuIHRbaV0uY2FsbChyLmV4cG9ydHMscixyLmV4cG9ydHMsZSksci5sb2FkZWQ9ITAsci5leHBvcnRzfXZhciBuPXt9O3JldHVybiBlLm09dCxlLmM9bixlLnA9XCJcIixlKDApfShmdW5jdGlvbih0KXtmb3IodmFyIGUgaW4gdClpZihPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwodCxlKSlzd2l0Y2godHlwZW9mIHRbZV0pe2Nhc2VcImZ1bmN0aW9uXCI6YnJlYWs7Y2FzZVwib2JqZWN0XCI6dFtlXT1mdW5jdGlvbihlKXt2YXIgbj1lLnNsaWNlKDEpLGk9dFtlWzBdXTtyZXR1cm4gZnVuY3Rpb24odCxlLHIpe2kuYXBwbHkodGhpcyxbdCxlLHJdLmNvbmNhdChuKSl9fSh0W2VdKTticmVhaztkZWZhdWx0OnRbZV09dFt0W2VdXX1yZXR1cm4gdH0oW2Z1bmN0aW9uKHQsZSxuKXt2YXIgaSxyPW4oMSksbz1uKDEyKSxzPW4oMTQpLGE9bigzOCksdT1uKDQzKSxoPW4oMzkpLGM9bigxNiksbD1uKDQyKSxmPW4oMTI4KSxkPW4oMTI5KTt0LmV4cG9ydHM9aT1mdW5jdGlvbih0KXt0PXR8fHt9LHRoaXMuX3BsYXllcnM9e30sdGhpcy5fdm9sdW1lPTEsdGhpcy5fbXV0ZT0hMSx0aGlzLlN0YXRlcz1hLHRoaXMuRXJyb3JzPXUsdGhpcy5fc2V0dGluZ3M9byh7fSx0LGkuZGVmYXVsdHMpfSxpLk1pbWVUeXBlcz1kLGkuUHJvdG9jb2xzPWYsaS5FdmVudHM9aCxpLlN0YXRlcz1hLGkuRXJyb3JzPXUsaS5Ccm93c2VyVXRpbHM9YyxpLmRlZmF1bHRzPXtmbGFzaEF1ZGlvUGF0aDpcImZsYXNoQXVkaW8uc3dmXCIsZmxhc2hMb2FkVGltZW91dDoyZTMsZmxhc2hPYmplY3RJRDpcImZsYXNoQXVkaW9PYmplY3RcIixhdWRpb09iamVjdElEOlwiaHRtbDVBdWRpb09iamVjdFwiLHVwZGF0ZUludGVydmFsOjMwMCxidWZmZXJUaW1lOjhlMyxidWZmZXJpbmdEZWxheTo4MDAsc3RyZWFtVXJsUHJvdmlkZXI6bnVsbCxkZWJ1ZzohMX0saS5jYXBhYmlsaXRpZXM9bC5uYW1lcyxpLmNyZWF0ZURlZmF1bHRNZWRpYURlc2NyaXB0b3I9ZnVuY3Rpb24odCxlLG4pe2lmKCF0fHwhZXx8IWUubGVuZ3RoKXRocm93IG5ldyBFcnJvcihcImludmFsaWQgaW5wdXQgdG8gY3JlYXRlIG1lZGlhIGRlc2NyaXB0b3JcIik7cmV0dXJuIG58fChuPTApLHtpZDp0LHNyYzplLGR1cmF0aW9uOm4sZm9yY2VTaW5nbGU6ITEsZm9yY2VGbGFzaDohMSxmb3JjZUhUTUw1OiExLGZvcmNlQ3VzdG9tSExTOiExLG1pbWVUeXBlOnZvaWQgMH19LGkucHJvdG90eXBlLmdldEF1ZGlvUGxheWVyPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLl9wbGF5ZXJzW3RdfSxpLnByb3RvdHlwZS5oYXNBdWRpb1BsYXllcj1mdW5jdGlvbih0KXtyZXR1cm4gdm9pZCAwIT09dGhpcy5fcGxheWVyc1t0XX0saS5wcm90b3R5cGUucmVtb3ZlQXVkaW9QbGF5ZXI9ZnVuY3Rpb24odCl7dGhpcy5oYXNBdWRpb1BsYXllcih0KSYmZGVsZXRlIHRoaXMuX3BsYXllcnNbdF19LGkucHJvdG90eXBlLnNldFZvbHVtZT1mdW5jdGlvbih0KXt0PU1hdGgubWluKDEsdCksdGhpcy5fdm9sdW1lPU1hdGgubWF4KDAsdCk7Zm9yKHZhciBlIGluIHRoaXMuX3BsYXllcnMpdGhpcy5fcGxheWVycy5oYXNPd25Qcm9wZXJ0eShlKSYmdGhpcy5fcGxheWVyc1tlXS5zZXRWb2x1bWUodGhpcy5fdm9sdW1lKX0saS5wcm90b3R5cGUuZ2V0Vm9sdW1lPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3ZvbHVtZX0saS5wcm90b3R5cGUuc2V0TXV0ZT1mdW5jdGlvbih0KXt0aGlzLl9tdXRlZD10O2Zvcih2YXIgZSBpbiB0aGlzLl9wbGF5ZXJzKXRoaXMuX3BsYXllcnMuaGFzT3duUHJvcGVydHkoZSkmJnRoaXMuX3BsYXllcnNbZV0uc2V0TXV0ZSh0aGlzLl9tdXRlZCl9LGkucHJvdG90eXBlLmdldE11dGU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbXV0ZWR9LGkucHJvdG90eXBlLmNyZWF0ZUF1ZGlvUGxheWVyPWZ1bmN0aW9uKHQsZSl7dmFyIG4saT1yKHt9LHRoaXMuX3NldHRpbmdzLGUpO2lmKCF0KXRocm93XCJBdWRpb01hbmFnZXI6IE5vIG1lZGlhIGRlc2NyaXB0b3Igb2JqZWN0IHBhc3NlZCwgY2FuYHQgYnVpbGQgYW55IHBsYXllclwiO2lmKHQuaWR8fCh0LmlkPU1hdGguZmxvb3IoMWUxMCpNYXRoLnJhbmRvbSgpKS50b1N0cmluZygpKyhuZXcgRGF0ZSkuZ2V0VGltZSgpLnRvU3RyaW5nKCkpLCF0LnNyYyl0aHJvdyBuZXcgRXJyb3IoXCJBdWRpb01hbmFnZXI6IFlvdSBuZWVkIHRvIHBhc3MgYSB2YWxpZCBtZWRpYSBzb3VyY2UgVVJMXCIpO2lmKCF0aGlzLl9wbGF5ZXJzW3QuaWRdKXtpZihuPXMuY3JlYXRlQXVkaW9QbGF5ZXIodCxpKSwhbil0aHJvdyBuZXcgRXJyb3IoXCJBdWRpb01hbmFnZXI6IE5vIHBsYXllciBjb3VsZCBiZSBjcmVhdGVkIGZyb20gdGhlIGdpdmVuIGRlc2NyaXB0b3JcIik7dGhpcy5fcGxheWVyc1t0LmlkXT1ufXJldHVybiB0aGlzLl9wbGF5ZXJzW3QuaWRdLnNldFZvbHVtZSh0aGlzLl92b2x1bWUpLHRoaXMuX3BsYXllcnNbdC5pZF0uc2V0TXV0ZSh0aGlzLl9tdXRlZCksdGhpcy5fcGxheWVyc1t0LmlkXS5vbihoLlNUQVRFX0NIQU5HRSx0aGlzLl9vblN0YXRlQ2hhbmdlLHRoaXMpLHRoaXMuX3BsYXllcnNbdC5pZF19LGkucHJvdG90eXBlLl9vblN0YXRlQ2hhbmdlPWZ1bmN0aW9uKHQsZSl7ZS5nZXRTdGF0ZSgpPT09YS5ERUFEJiZ0aGlzLnJlbW92ZUF1ZGlvUGxheWVyKGUuZ2V0SWQoKSl9fSxbMTMwLDIsOCw0XSxbMTMxLDMsNF0sZnVuY3Rpb24odCxlKXtmdW5jdGlvbiBuKHQsZSxuKXtufHwobj17fSk7Zm9yKHZhciBpPS0xLHI9ZS5sZW5ndGg7KytpPHI7KXt2YXIgbz1lW2ldO25bb109dFtvXX1yZXR1cm4gbn10LmV4cG9ydHM9bn0sWzEzMiw1LDYsN10sZnVuY3Rpb24odCxlKXtmdW5jdGlvbiBuKHQpe3JldHVybiEhdCYmXCJvYmplY3RcIj09dHlwZW9mIHR9ZnVuY3Rpb24gaSh0LGUpe3ZhciBuPW51bGw9PXQ/dm9pZCAwOnRbZV07cmV0dXJuIHMobik/bjp2b2lkIDB9ZnVuY3Rpb24gcih0KXtyZXR1cm4gbyh0KSYmZi5jYWxsKHQpPT1hfWZ1bmN0aW9uIG8odCl7dmFyIGU9dHlwZW9mIHQ7cmV0dXJuISF0JiYoXCJvYmplY3RcIj09ZXx8XCJmdW5jdGlvblwiPT1lKX1mdW5jdGlvbiBzKHQpe3JldHVybiBudWxsPT10PyExOnIodCk/ZC50ZXN0KGMuY2FsbCh0KSk6bih0KSYmdS50ZXN0KHQpfXZhciBhPVwiW29iamVjdCBGdW5jdGlvbl1cIix1PS9eXFxbb2JqZWN0IC4rP0NvbnN0cnVjdG9yXFxdJC8saD1PYmplY3QucHJvdG90eXBlLGM9RnVuY3Rpb24ucHJvdG90eXBlLnRvU3RyaW5nLGw9aC5oYXNPd25Qcm9wZXJ0eSxmPWgudG9TdHJpbmcsZD1SZWdFeHAoXCJeXCIrYy5jYWxsKGwpLnJlcGxhY2UoL1tcXFxcXiQuKis/KClbXFxde318XS9nLFwiXFxcXCQmXCIpLnJlcGxhY2UoL2hhc093blByb3BlcnR5fChmdW5jdGlvbikuKj8oPz1cXFxcXFwoKXwgZm9yIC4rPyg/PVxcXFxcXF0pL2csXCIkMS4qP1wiKStcIiRcIik7dC5leHBvcnRzPWl9LGZ1bmN0aW9uKHQsZSl7ZnVuY3Rpb24gbih0KXtyZXR1cm4hIXQmJlwib2JqZWN0XCI9PXR5cGVvZiB0fWZ1bmN0aW9uIGkodCl7cmV0dXJuIGZ1bmN0aW9uKGUpe3JldHVybiBudWxsPT1lP3ZvaWQgMDplW3RdfX1mdW5jdGlvbiByKHQpe3JldHVybiBudWxsIT10JiZvKGwodCkpfWZ1bmN0aW9uIG8odCl7cmV0dXJuXCJudW1iZXJcIj09dHlwZW9mIHQmJnQ+LTEmJnQlMT09MCYmYz49dH1mdW5jdGlvbiBzKHQpe3JldHVybiBuKHQpJiZyKHQpJiZ1LmNhbGwodCxcImNhbGxlZVwiKSYmIWguY2FsbCh0LFwiY2FsbGVlXCIpfXZhciBhPU9iamVjdC5wcm90b3R5cGUsdT1hLmhhc093blByb3BlcnR5LGg9YS5wcm9wZXJ0eUlzRW51bWVyYWJsZSxjPTkwMDcxOTkyNTQ3NDA5OTEsbD1pKFwibGVuZ3RoXCIpO3QuZXhwb3J0cz1zfSxmdW5jdGlvbih0LGUpe2Z1bmN0aW9uIG4odCl7cmV0dXJuISF0JiZcIm9iamVjdFwiPT10eXBlb2YgdH1mdW5jdGlvbiBpKHQsZSl7dmFyIG49bnVsbD09dD92b2lkIDA6dFtlXTtyZXR1cm4gYShuKT9uOnZvaWQgMH1mdW5jdGlvbiByKHQpe3JldHVyblwibnVtYmVyXCI9PXR5cGVvZiB0JiZ0Pi0xJiZ0JTE9PTAmJm0+PXR9ZnVuY3Rpb24gbyh0KXtyZXR1cm4gcyh0KSYmcC5jYWxsKHQpPT1ofWZ1bmN0aW9uIHModCl7dmFyIGU9dHlwZW9mIHQ7cmV0dXJuISF0JiYoXCJvYmplY3RcIj09ZXx8XCJmdW5jdGlvblwiPT1lKX1mdW5jdGlvbiBhKHQpe3JldHVybiBudWxsPT10PyExOm8odCk/Zy50ZXN0KGYuY2FsbCh0KSk6bih0KSYmYy50ZXN0KHQpfXZhciB1PVwiW29iamVjdCBBcnJheV1cIixoPVwiW29iamVjdCBGdW5jdGlvbl1cIixjPS9eXFxbb2JqZWN0IC4rP0NvbnN0cnVjdG9yXFxdJC8sbD1PYmplY3QucHJvdG90eXBlLGY9RnVuY3Rpb24ucHJvdG90eXBlLnRvU3RyaW5nLGQ9bC5oYXNPd25Qcm9wZXJ0eSxwPWwudG9TdHJpbmcsZz1SZWdFeHAoXCJeXCIrZi5jYWxsKGQpLnJlcGxhY2UoL1tcXFxcXiQuKis/KClbXFxde318XS9nLFwiXFxcXCQmXCIpLnJlcGxhY2UoL2hhc093blByb3BlcnR5fChmdW5jdGlvbikuKj8oPz1cXFxcXFwoKXwgZm9yIC4rPyg/PVxcXFxcXF0pL2csXCIkMS4qP1wiKStcIiRcIiksXz1pKEFycmF5LFwiaXNBcnJheVwiKSxtPTkwMDcxOTkyNTQ3NDA5OTEseT1ffHxmdW5jdGlvbih0KXtyZXR1cm4gbih0KSYmcih0Lmxlbmd0aCkmJnAuY2FsbCh0KT09dX07dC5leHBvcnRzPXl9LFsxMzMsOSwxMCwxMV0sZnVuY3Rpb24odCxlKXtmdW5jdGlvbiBuKHQsZSxuKXtpZihcImZ1bmN0aW9uXCIhPXR5cGVvZiB0KXJldHVybiBpO2lmKHZvaWQgMD09PWUpcmV0dXJuIHQ7c3dpdGNoKG4pe2Nhc2UgMTpyZXR1cm4gZnVuY3Rpb24obil7cmV0dXJuIHQuY2FsbChlLG4pfTtjYXNlIDM6cmV0dXJuIGZ1bmN0aW9uKG4saSxyKXtyZXR1cm4gdC5jYWxsKGUsbixpLHIpfTtjYXNlIDQ6cmV0dXJuIGZ1bmN0aW9uKG4saSxyLG8pe3JldHVybiB0LmNhbGwoZSxuLGkscixvKX07Y2FzZSA1OnJldHVybiBmdW5jdGlvbihuLGkscixvLHMpe3JldHVybiB0LmNhbGwoZSxuLGkscixvLHMpfX1yZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gdC5hcHBseShlLGFyZ3VtZW50cyl9fWZ1bmN0aW9uIGkodCl7cmV0dXJuIHR9dC5leHBvcnRzPW59LGZ1bmN0aW9uKHQsZSl7ZnVuY3Rpb24gbih0KXtyZXR1cm4gZnVuY3Rpb24oZSl7cmV0dXJuIG51bGw9PWU/dm9pZCAwOmVbdF19fWZ1bmN0aW9uIGkodCl7cmV0dXJuIG51bGwhPXQmJnMoYyh0KSl9ZnVuY3Rpb24gcih0LGUpe3JldHVybiB0PVwibnVtYmVyXCI9PXR5cGVvZiB0fHx1LnRlc3QodCk/K3Q6LTEsZT1udWxsPT1lP2g6ZSx0Pi0xJiZ0JTE9PTAmJmU+dH1mdW5jdGlvbiBvKHQsZSxuKXtpZighYShuKSlyZXR1cm4hMTt2YXIgbz10eXBlb2YgZTtpZihcIm51bWJlclwiPT1vP2kobikmJnIoZSxuLmxlbmd0aCk6XCJzdHJpbmdcIj09byYmZSBpbiBuKXt2YXIgcz1uW2VdO3JldHVybiB0PT09dD90PT09czpzIT09c31yZXR1cm4hMX1mdW5jdGlvbiBzKHQpe3JldHVyblwibnVtYmVyXCI9PXR5cGVvZiB0JiZ0Pi0xJiZ0JTE9PTAmJmg+PXR9ZnVuY3Rpb24gYSh0KXt2YXIgZT10eXBlb2YgdDtyZXR1cm4hIXQmJihcIm9iamVjdFwiPT1lfHxcImZ1bmN0aW9uXCI9PWUpfXZhciB1PS9eXFxkKyQvLGg9OTAwNzE5OTI1NDc0MDk5MSxjPW4oXCJsZW5ndGhcIik7dC5leHBvcnRzPW99LGZ1bmN0aW9uKHQsZSl7ZnVuY3Rpb24gbih0LGUpe2lmKFwiZnVuY3Rpb25cIiE9dHlwZW9mIHQpdGhyb3cgbmV3IFR5cGVFcnJvcihpKTtyZXR1cm4gZT1yKHZvaWQgMD09PWU/dC5sZW5ndGgtMTorZXx8MCwwKSxmdW5jdGlvbigpe2Zvcih2YXIgbj1hcmd1bWVudHMsaT0tMSxvPXIobi5sZW5ndGgtZSwwKSxzPUFycmF5KG8pOysraTxvOylzW2ldPW5bZStpXTtzd2l0Y2goZSl7Y2FzZSAwOnJldHVybiB0LmNhbGwodGhpcyxzKTtjYXNlIDE6cmV0dXJuIHQuY2FsbCh0aGlzLG5bMF0scyk7Y2FzZSAyOnJldHVybiB0LmNhbGwodGhpcyxuWzBdLG5bMV0scyl9dmFyIGE9QXJyYXkoZSsxKTtmb3IoaT0tMTsrK2k8ZTspYVtpXT1uW2ldO3JldHVybiBhW2VdPXMsdC5hcHBseSh0aGlzLGEpfX12YXIgaT1cIkV4cGVjdGVkIGEgZnVuY3Rpb25cIixyPU1hdGgubWF4O3QuZXhwb3J0cz1ufSxmdW5jdGlvbih0LGUsbil7ZnVuY3Rpb24gaSh0LGUpe3JldHVybiB2b2lkIDA9PT10P2U6dH1mdW5jdGlvbiByKHQsZSl7cmV0dXJuIHMoZnVuY3Rpb24obil7dmFyIGk9blswXTtyZXR1cm4gbnVsbD09aT9pOihuLnB1c2goZSksdC5hcHBseSh2b2lkIDAsbikpfSl9dmFyIG89bigxKSxzPW4oMTMpLGE9cihvLGkpO3QuZXhwb3J0cz1hfSwxMSxmdW5jdGlvbih0LGUsbil7dC5leHBvcnRzPW4oMTUpfSxmdW5jdGlvbih0LGUsbil7dmFyIGkscj1uKDE2KSxvPW4oMTcpLHM9big0NSksYT1uKDQ5KSx1PW4oNDYpLGg9big0OCksYz1uKDUwKSxsPW4oMTI5KTt0LmV4cG9ydHM9aT1mdW5jdGlvbigpe30saS5jcmVhdGVBdWRpb1BsYXllcj1mdW5jdGlvbih0LGUpe3ZhciBuO2lmKG49dC5zcmMuc3BsaXQoXCI6XCIpWzBdLChcInJ0bXBcIj09PW58fFwicnRtcHRcIj09PW58fHQuZm9yY2VGbGFzaCkmJiF0LmZvcmNlSFRNTDUpcmV0dXJuIG5ldyBvKHQsZSk7aWYodC5taW1lVHlwZT1pLmdldE1pbWVUeXBlKHQpLHQubWltZVR5cGU9PT1sLk0zVTgpe2lmKHIuaXNNU0VTdXBwb3J0TVBFRygpfHxyLmlzTVNFU3VwcG9ydE1QNCgpKXJldHVybiBuZXcgYyh0LGUpO2lmKHIuaXNOYXRpdmVIbHNTdXBwb3J0ZWQoKSYmIXQuZm9yY2VDdXN0b21ITFMpcmV0dXJuIHIuaXNNb2JpbGUoKXx8dC5mb3JjZVNpbmdsZT9uZXcgYSh0LGUpOm5ldyBzKHQsZSl9ZWxzZXtpZihyLnN1cHBvcnRIVE1MNUF1ZGlvKCkmJnIuY2FuUGxheVR5cGUodC5taW1lVHlwZSl8fHQuZm9yY2VIVE1MNSlyZXR1cm4gci5pc01vYmlsZSgpfHx0LmZvcmNlU2luZ2xlP25ldyBoKHQsZSk6bmV3IHUodCxlKTtpZih0Lm1pbWVUeXBlPT09bC5NUDMpcmV0dXJuIG5ldyBvKHQsZSl9cmV0dXJuIG51bGx9LGkuZ2V0TWltZVR5cGU9ZnVuY3Rpb24odCl7aWYodC5taW1lVHlwZSlyZXR1cm4gdC5taW1lVHlwZTt2YXIgZT10LnNyYy5zcGxpdChcIj9cIilbMF07cmV0dXJuIGU9ZS5zdWJzdHJpbmcoZS5sYXN0SW5kZXhPZihcIi5cIikrMSxlLmxlbmd0aCksbC5nZXRUeXBlQnlFeHRlbnNpb24oZSl9fSxmdW5jdGlvbih0LGUpe2Z1bmN0aW9uIG4oKXtyZXR1cm4hKCF3aW5kb3cuTWVkaWFTb3VyY2UmJiF3aW5kb3cuV2ViS2l0TWVkaWFTb3VyY2UpfXQuZXhwb3J0cz17c3VwcG9ydEhUTUw1QXVkaW86ZnVuY3Rpb24oKXt2YXIgdDt0cnl7aWYod2luZG93LkhUTUxBdWRpb0VsZW1lbnQmJlwidW5kZWZpbmVkXCIhPXR5cGVvZiBBdWRpbylyZXR1cm4gdD1uZXcgQXVkaW8sITB9Y2F0Y2goZSl7cmV0dXJuITF9fSxjcmVhdGVBdWRpb0VsZW1lbnQ6ZnVuY3Rpb24oKXt2YXIgdD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYXVkaW9cIik7cmV0dXJuIHQuc2V0QXR0cmlidXRlKFwibXNBdWRpb0NhdGVnb3J5XCIsXCJCYWNrZ3JvdW5kQ2FwYWJsZU1lZGlhXCIpLHQubW96QXVkaW9DaGFubmVsVHlwZT1cImNvbnRlbnRcIix0fSxpc01vYmlsZTpmdW5jdGlvbih0KXt2YXIgZT13aW5kb3cubmF2aWdhdG9yLnVzZXJBZ2VudCxuPVtcIm1vYmlsZVwiLFwiaVBob25lXCIsXCJpUGFkXCIsXCJpUG9kXCIsXCJBbmRyb2lkXCIsXCJTa3lmaXJlXCJdO3JldHVybiBuLnNvbWUoZnVuY3Rpb24odCl7cmV0dXJuIHQ9bmV3IFJlZ0V4cCh0LFwiaVwiKSx0LnRlc3QoZSl9KX0saXNJRTEwTW9iaWxlOmZ1bmN0aW9uKCl7cmV0dXJuL0lFbW9iaWxlXFwvMTBcXC4wL2dpLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCl9LGNhblBsYXlUeXBlOmZ1bmN0aW9uKHQpe3ZhciBlPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJhdWRpb1wiKTtyZXR1cm4hIShlJiZlLmNhblBsYXlUeXBlJiZlLmNhblBsYXlUeXBlKHQpLm1hdGNoKC9tYXliZXxwcm9iYWJseS9pKSl9LGlzTmF0aXZlSGxzU3VwcG9ydGVkOmZ1bmN0aW9uKCl7dmFyIHQsZSxuLGk9bmF2aWdhdG9yLnVzZXJBZ2VudCxyPVtcImlQaG9uZVwiLFwiaVBhZFwiLFwiaVBvZFwiXTtyZXR1cm4gdD1mdW5jdGlvbih0KXtyZXR1cm4gdC50ZXN0KGkpfSxlPSF0KC9jaHJvbWUvaSkmJiF0KC9vcGVyYS9pKSYmdCgvc2FmYXJpL2kpLG49ci5zb21lKGZ1bmN0aW9uKGUpe3JldHVybiB0KG5ldyBSZWdFeHAoZSxcImlcIikpfSksbnx8ZX0saXNNU0VTdXBwb3J0ZWQ6bixpc01TRVN1cHBvcnRNUEVHOmZ1bmN0aW9uKCl7cmV0dXJuIG4oKSYmTWVkaWFTb3VyY2UuaXNUeXBlU3VwcG9ydGVkKFwiYXVkaW8vbXBlZ1wiKX0saXNNU0VTdXBwb3J0TVA0OmZ1bmN0aW9uKCl7cmV0dXJuIG4oKSYmTWVkaWFTb3VyY2UuaXNUeXBlU3VwcG9ydGVkKFwiYXVkaW8vbXA0XCIpfX19LGZ1bmN0aW9uKHQsZSxuKXtmdW5jdGlvbiBpKHQsZSl7YS5jYWxsKHRoaXMsXCJGbGFzaEF1ZGlvUHJveHlcIix0LGUpLGkucGxheWVyc1t0LmlkXT10aGlzLHRoaXMuX2Vycm9yTWVzc2FnZT1udWxsLHRoaXMuX2Vycm9ySUQ9bnVsbCx0aGlzLl92b2x1bWU9MSx0aGlzLl9tdXRlZD0hMSxpLmNyZWF0aW5nRmxhc2hBdWRpb3x8KGkuZmxhc2hBdWRpbz90aGlzLl9jcmVhdGVGbGFzaEF1ZGlvKCk6aS5jcmVhdGVGbGFzaE9iamVjdChlKSl9dmFyIHI9bigxKSxvPW4oMTgpLHM9bigyOSksYT1uKDM1KSx1PW4oMzkpLGg9big0MyksYz1uKDM4KSxsPW4oNDQpO3QuZXhwb3J0cz1pLHIoaS5wcm90b3R5cGUsYS5wcm90b3R5cGUpLGkucGxheWVycz17fSxpLmNyZWF0ZUZsYXNoT2JqZWN0PWZ1bmN0aW9uKHQpe2kuY3JlYXRpbmdGbGFzaEF1ZGlvPSEwLGkuY29udGFpbmVyRWxlbWVudD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpLGkuY29udGFpbmVyRWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJpZFwiLHQuZmxhc2hPYmplY3RJRCtcIi1jb250YWluZXJcIiksaS5mbGFzaEVsZW1lbnRUYXJnZXQ9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKSxpLmZsYXNoRWxlbWVudFRhcmdldC5zZXRBdHRyaWJ1dGUoXCJpZFwiLHQuZmxhc2hPYmplY3RJRCtcIi10YXJnZXRcIiksaS5jb250YWluZXJFbGVtZW50LmFwcGVuZENoaWxkKGkuZmxhc2hFbGVtZW50VGFyZ2V0KSxkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGkuY29udGFpbmVyRWxlbWVudCk7dmFyIGU9ZnVuY3Rpb24oZSl7aWYoZS5zdWNjZXNzKWkuZmxhc2hBdWRpbz1kb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0LmZsYXNoT2JqZWN0SUQpLHdpbmRvdy5zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7aWYoaS5mbGFzaEF1ZGlvJiYhKFwiUGVyY2VudExvYWRlZFwiaW4gaS5mbGFzaEF1ZGlvKSlmb3IodmFyIHQgaW4gaS5wbGF5ZXJzKWkucGxheWVycy5oYXNPd25Qcm9wZXJ0eSh0KSYmKGkucGxheWVyc1t0XS5fZXJyb3JJRD1oLkZMQVNIX1BST1hZX0ZMQVNIX0JMT0NLRUQsaS5wbGF5ZXJzW3RdLl9lcnJvck1lc3NhZ2U9XCJGbGFzaCBvYmplY3QgYmxvY2tlZFwiLGkucGxheWVyc1t0XS5fc2V0U3RhdGUoYy5FUlJPUiksaS5wbGF5ZXJzW3RdLl9sb2dnZXIudHlwZT1pLnBsYXllcnNbdF0uZ2V0VHlwZSgpLGkucGxheWVyc1t0XS5fbG9nZ2VyLmxvZyhpLnBsYXllcnNbdF0uX2Vycm9yTWVzc2FnZSkpfSx0LmZsYXNoTG9hZFRpbWVvdXQpLGkuZmxhc2hBdWRpby50cmlnZ2VyRXZlbnQ9ZnVuY3Rpb24odCxlKXtpLnBsYXllcnNbdF0uX3RyaWdnZXJFdmVudChlKX0saS5mbGFzaEF1ZGlvLm9uUG9zaXRpb25DaGFuZ2U9ZnVuY3Rpb24odCxlLG4scil7aS5wbGF5ZXJzW3RdLl9vblBvc2l0aW9uQ2hhbmdlKGUsbixyKX0saS5mbGFzaEF1ZGlvLm9uRGVidWc9ZnVuY3Rpb24odCxlLG4pe2kucGxheWVyc1t0XS5fbG9nZ2VyLnR5cGU9ZSxpLnBsYXllcnNbdF0uX2xvZ2dlci5sb2cobil9LGkuZmxhc2hBdWRpby5vblN0YXRlQ2hhbmdlPWZ1bmN0aW9uKHQsZSl7aS5wbGF5ZXJzW3RdLl9zZXRTdGF0ZShlKSxlPT09Yy5ERUFEJiZkZWxldGUgaS5wbGF5ZXJzW3RdfSxpLmZsYXNoQXVkaW8ub25Jbml0PWZ1bmN0aW9uKHQpe2kuY3JlYXRpbmdGbGFzaEF1ZGlvPSExLG8ocyhpLnBsYXllcnMpLFwiX2NyZWF0ZUZsYXNoQXVkaW9cIil9O2Vsc2UgZm9yKHZhciBuIGluIGkucGxheWVycylpLnBsYXllcnMuaGFzT3duUHJvcGVydHkobikmJihpLnBsYXllcnNbbl0uX2Vycm9ySUQ9aC5GTEFTSF9QUk9YWV9DQU5UX0xPQURfRkxBU0gsaS5wbGF5ZXJzW25dLl9lcnJvck1lc3NhZ2U9XCJDYW5ub3QgY3JlYXRlIGZsYXNoIG9iamVjdFwiLGkucGxheWVyc1tuXS5fc2V0U3RhdGUoYy5FUlJPUikpfTtkb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0LmZsYXNoT2JqZWN0SUQpfHxsLmVtYmVkU1dGKHQuZmxhc2hBdWRpb1BhdGgsdC5mbGFzaE9iamVjdElEK1wiLXRhcmdldFwiLFwiMVwiLFwiMVwiLFwiOS4wLjI0XCIsXCJcIix7anNvbjplbmNvZGVVUklDb21wb25lbnQoSlNPTi5zdHJpbmdpZnkodCkpfSx7YWxsb3dzY3JpcHRhY2Nlc3M6XCJhbHdheXNcIn0se2lkOnQuZmxhc2hPYmplY3RJRCx0YWJJbmRleDpcIi0xXCJ9LGUpfSxpLl9yZWFkeT1mdW5jdGlvbigpe3JldHVybiBpLmZsYXNoQXVkaW8mJiFpLmNyZWF0aW5nRmxhc2hBdWRpb30saS5wcm90b3R5cGUuX2NyZWF0ZUZsYXNoQXVkaW89ZnVuY3Rpb24oKXtpLmZsYXNoQXVkaW8uY3JlYXRlQXVkaW8odGhpcy5nZXREZXNjcmlwdG9yKCkpLHRoaXMuX3N0YXRlPWkuZmxhc2hBdWRpby5nZXRTdGF0ZSh0aGlzLmdldElkKCkpLHRoaXMuc2V0Vm9sdW1lKHRoaXMuX3ZvbHVtZSksdGhpcy5zZXRNdXRlKHRoaXMuX211dGVkKX0saS5wcm90b3R5cGUuX3RyaWdnZXJFdmVudD1mdW5jdGlvbih0KXt0aGlzLl9sb2dnZXIubG9nKFwiRmxhc2ggZWxlbWVudCB0cmlnZ2VyZWQgZXZlbnQ6IFwiK3QpLHRoaXMudHJpZ2dlcih0LHRoaXMpfSxpLnByb3RvdHlwZS5fc2V0U3RhdGU9ZnVuY3Rpb24odCl7dGhpcy5fc3RhdGUhPT10JiYodGhpcy5fc3RhdGU9dCx0aGlzLnRyaWdnZXIodS5TVEFURV9DSEFOR0UsdCx0aGlzKSl9LGkucHJvdG90eXBlLl9vblBvc2l0aW9uQ2hhbmdlPWZ1bmN0aW9uKHQsZSxuKXt0aGlzLnRyaWdnZXIodS5QT1NJVElPTl9DSEFOR0UsdCxlLG4sdGhpcyl9LGkucHJvdG90eXBlLmdldFR5cGU9ZnVuY3Rpb24oKXtyZXR1cm4gaS5fcmVhZHkoKT9pLmZsYXNoQXVkaW8uZ2V0VHlwZSh0aGlzLmdldElkKCkpOnRoaXMuX3R5cGV9LGkucHJvdG90eXBlLmdldENvbnRhaW5lckVsZW1lbnQ9ZnVuY3Rpb24oKXtcbnJldHVybiBpLmNvbnRhaW5lckVsZW1lbnR9LGkucHJvdG90eXBlLnBsYXk9ZnVuY3Rpb24odCl7aWYoaS5fcmVhZHkoKSl7aWYodGhpcy5nZXRTdGF0ZSgpPT09Yy5QQVVTRUQpcmV0dXJuIHZvaWQgdGhpcy5yZXN1bWUoKTt0PXZvaWQgMD09PXQ/MDp0LGkuZmxhc2hBdWRpby5wbGF5QXVkaW8odGhpcy5nZXRJZCgpLHQpfX0saS5wcm90b3R5cGUucGF1c2U9ZnVuY3Rpb24oKXtpLl9yZWFkeSgpJiZpLmZsYXNoQXVkaW8ucGF1c2VBdWRpbyh0aGlzLmdldElkKCkpfSxpLnByb3RvdHlwZS5zZWVrPWZ1bmN0aW9uKHQpe2kuX3JlYWR5KCkmJmkuZmxhc2hBdWRpby5zZWVrQXVkaW8odGhpcy5nZXRJZCgpLHQpfSxpLnByb3RvdHlwZS5yZXN1bWU9ZnVuY3Rpb24oKXtpLl9yZWFkeSgpJiZpLmZsYXNoQXVkaW8ucmVzdW1lQXVkaW8odGhpcy5nZXRJZCgpKX0saS5wcm90b3R5cGUuc2V0Vm9sdW1lPWZ1bmN0aW9uKHQpe3RoaXMuX3ZvbHVtZT10LGkuX3JlYWR5KCkmJmkuZmxhc2hBdWRpby5zZXRWb2x1bWUodGhpcy5nZXRJZCgpLHQpfSxpLnByb3RvdHlwZS5nZXRWb2x1bWU9ZnVuY3Rpb24oKXtyZXR1cm4gaS5fcmVhZHkoKT9pLmZsYXNoQXVkaW8uZ2V0Vm9sdW1lKHRoaXMuZ2V0SWQoKSk6dGhpcy5fdm9sdW1lfSxpLnByb3RvdHlwZS5zZXRNdXRlPWZ1bmN0aW9uKHQpe3RoaXMuX211dGVkPXQsaS5fcmVhZHkoKSYmaS5mbGFzaEF1ZGlvLnNldE11dGUodGhpcy5nZXRJZCgpLHQpfSxpLnByb3RvdHlwZS5nZXRNdXRlPWZ1bmN0aW9uKCl7cmV0dXJuIGkuX3JlYWR5KCk/aS5mbGFzaEF1ZGlvLmdldE11dGUodGhpcy5nZXRJZCgpKTp0aGlzLl9tdXRlZH0saS5wcm90b3R5cGUuZ2V0U3RhdGU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fc3RhdGV9LGkucHJvdG90eXBlLmdldEN1cnJlbnRQb3NpdGlvbj1mdW5jdGlvbigpe3JldHVybiBpLl9yZWFkeSgpP2kuZmxhc2hBdWRpby5nZXRDdXJyZW50UG9zaXRpb24odGhpcy5nZXRJZCgpKTowfSxpLnByb3RvdHlwZS5nZXRMb2FkZWRQb3NpdGlvbj1mdW5jdGlvbigpe3JldHVybiBpLl9yZWFkeSgpP2kuZmxhc2hBdWRpby5nZXRMb2FkZWRQb3NpdGlvbih0aGlzLmdldElkKCkpOjB9LGkucHJvdG90eXBlLmdldER1cmF0aW9uPWZ1bmN0aW9uKCl7cmV0dXJuIGkuX3JlYWR5KCk/aS5mbGFzaEF1ZGlvLmdldER1cmF0aW9uKHRoaXMuZ2V0SWQoKSk6MH0saS5wcm90b3R5cGUua2lsbD1mdW5jdGlvbigpe3JldHVybiBpLl9yZWFkeSgpP3ZvaWQgaS5mbGFzaEF1ZGlvLmtpbGxBdWRpbyh0aGlzLmdldElkKCkpOjB9LGkucHJvdG90eXBlLmdldEVycm9yTWVzc2FnZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9lcnJvck1lc3NhZ2U/dGhpcy5fZXJyb3JNZXNzYWdlOmkuZmxhc2hBdWRpby5nZXRFcnJvck1lc3NhZ2UodGhpcy5nZXRJZCgpKX0saS5wcm90b3R5cGUuZ2V0RXJyb3JJRD1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9lcnJvcklEP3RoaXMuX2Vycm9ySUQ6aS5mbGFzaEF1ZGlvLmdldEVycm9ySUQodGhpcy5nZXRJZCgpKX0saS5wcm90b3R5cGUuZ2V0TGV2ZWxOdW09ZnVuY3Rpb24oKXtyZXR1cm4gaS5fcmVhZHkoKT9pLmZsYXNoQXVkaW8uZ2V0TGV2ZWxOdW0odGhpcy5nZXRJZCgpKTowfSxpLnByb3RvdHlwZS5nZXRMZXZlbD1mdW5jdGlvbigpe3JldHVybiBpLl9yZWFkeSgpP2kuZmxhc2hBdWRpby5nZXRMZXZlbCh0aGlzLmdldElkKCkpOjB9LGkucHJvdG90eXBlLnNldExldmVsPWZ1bmN0aW9uKHQpe3JldHVybiBpLl9yZWFkeSgpP2kuZmxhc2hBdWRpby5zZXRMZXZlbCh0aGlzLmdldElkKCksdCk6MH19LGZ1bmN0aW9uKHQsZSxuKXtmdW5jdGlvbiBpKHQpe3JldHVybiBmdW5jdGlvbihlKXtyZXR1cm4gbnVsbD09ZT92b2lkIDA6ZVt0XX19ZnVuY3Rpb24gcih0KXtyZXR1cm4gbnVsbCE9dCYmcyhfKHQpKX1mdW5jdGlvbiBvKHQsZSl7dmFyIG49dHlwZW9mIHQ7aWYoXCJzdHJpbmdcIj09biYmcC50ZXN0KHQpfHxcIm51bWJlclwiPT1uKXJldHVybiEwO2lmKGwodCkpcmV0dXJuITE7dmFyIGk9IWQudGVzdCh0KTtyZXR1cm4gaXx8bnVsbCE9ZSYmdCBpbiBhKGUpfWZ1bmN0aW9uIHModCl7cmV0dXJuXCJudW1iZXJcIj09dHlwZW9mIHQmJnQ+LTEmJnQlMT09MCYmZz49dH1mdW5jdGlvbiBhKHQpe3JldHVybiB1KHQpP3Q6T2JqZWN0KHQpfWZ1bmN0aW9uIHUodCl7dmFyIGU9dHlwZW9mIHQ7cmV0dXJuISF0JiYoXCJvYmplY3RcIj09ZXx8XCJmdW5jdGlvblwiPT1lKX12YXIgaD1uKDE5KSxjPW4oMjQpLGw9bigyMyksZj1uKDI4KSxkPS9cXC58XFxbKD86W15bXFxdXSp8KFtcIiddKSg/Oig/IVxcMSlbXlxcblxcXFxdfFxcXFwuKSo/XFwxKVxcXS8scD0vXlxcdyokLyxnPTkwMDcxOTkyNTQ3NDA5OTEsXz1pKFwibGVuZ3RoXCIpLG09ZihmdW5jdGlvbih0LGUsbil7dmFyIGk9LTEscz1cImZ1bmN0aW9uXCI9PXR5cGVvZiBlLGE9byhlKSx1PXIodCk/QXJyYXkodC5sZW5ndGgpOltdO3JldHVybiBoKHQsZnVuY3Rpb24odCl7dmFyIHI9cz9lOmEmJm51bGwhPXQ/dFtlXTp2b2lkIDA7dVsrK2ldPXI/ci5hcHBseSh0LG4pOmModCxlLG4pfSksdX0pO3QuZXhwb3J0cz1tfSxbMTM0LDIwXSxbMTMyLDIxLDIyLDIzXSw1LDYsNyxmdW5jdGlvbih0LGUsbil7ZnVuY3Rpb24gaSh0LGUsbil7bnVsbD09dHx8cihlLHQpfHwoZT1jKGUpLHQ9MT09ZS5sZW5ndGg/dDp1KHQsaChlLDAsLTEpKSxlPXMoZSkpO3ZhciBpPW51bGw9PXQ/dDp0W2VdO3JldHVybiBudWxsPT1pP3ZvaWQgMDppLmFwcGx5KHQsbil9ZnVuY3Rpb24gcih0LGUpe3ZhciBuPXR5cGVvZiB0O2lmKFwic3RyaW5nXCI9PW4mJmQudGVzdCh0KXx8XCJudW1iZXJcIj09bilyZXR1cm4hMDtpZihsKHQpKXJldHVybiExO3ZhciBpPSFmLnRlc3QodCk7cmV0dXJuIGl8fG51bGwhPWUmJnQgaW4gbyhlKX1mdW5jdGlvbiBvKHQpe3JldHVybiBhKHQpP3Q6T2JqZWN0KHQpfWZ1bmN0aW9uIHModCl7dmFyIGU9dD90Lmxlbmd0aDowO3JldHVybiBlP3RbZS0xXTp2b2lkIDB9ZnVuY3Rpb24gYSh0KXt2YXIgZT10eXBlb2YgdDtyZXR1cm4hIXQmJihcIm9iamVjdFwiPT1lfHxcImZ1bmN0aW9uXCI9PWUpfXZhciB1PW4oMjUpLGg9bigyNiksYz1uKDI3KSxsPW4oMjMpLGY9L1xcLnxcXFsoPzpbXltcXF1dKnwoW1wiJ10pKD86KD8hXFwxKVteXFxuXFxcXF18XFxcXC4pKj9cXDEpXFxdLyxkPS9eXFx3KiQvO3QuZXhwb3J0cz1pfSxmdW5jdGlvbih0LGUpe2Z1bmN0aW9uIG4odCxlLG4pe2lmKG51bGwhPXQpe3ZvaWQgMCE9PW4mJm4gaW4gaSh0KSYmKGU9W25dKTtmb3IodmFyIHI9MCxvPWUubGVuZ3RoO251bGwhPXQmJm8+cjspdD10W2VbcisrXV07cmV0dXJuIHImJnI9PW8/dDp2b2lkIDB9fWZ1bmN0aW9uIGkodCl7cmV0dXJuIHIodCk/dDpPYmplY3QodCl9ZnVuY3Rpb24gcih0KXt2YXIgZT10eXBlb2YgdDtyZXR1cm4hIXQmJihcIm9iamVjdFwiPT1lfHxcImZ1bmN0aW9uXCI9PWUpfXQuZXhwb3J0cz1ufSxmdW5jdGlvbih0LGUpe2Z1bmN0aW9uIG4odCxlLG4pe3ZhciBpPS0xLHI9dC5sZW5ndGg7ZT1udWxsPT1lPzA6K2V8fDAsMD5lJiYoZT0tZT5yPzA6citlKSxuPXZvaWQgMD09PW58fG4+cj9yOitufHwwLDA+biYmKG4rPXIpLHI9ZT5uPzA6bi1lPj4+MCxlPj4+PTA7Zm9yKHZhciBvPUFycmF5KHIpOysraTxyOylvW2ldPXRbaStlXTtyZXR1cm4gb310LmV4cG9ydHM9bn0sZnVuY3Rpb24odCxlLG4pe2Z1bmN0aW9uIGkodCl7cmV0dXJuIG51bGw9PXQ/XCJcIjp0K1wiXCJ9ZnVuY3Rpb24gcih0KXtpZihvKHQpKXJldHVybiB0O3ZhciBlPVtdO3JldHVybiBpKHQpLnJlcGxhY2UocyxmdW5jdGlvbih0LG4saSxyKXtlLnB1c2goaT9yLnJlcGxhY2UoYSxcIiQxXCIpOm58fHQpfSksZX12YXIgbz1uKDIzKSxzPS9bXi5bXFxdXSt8XFxbKD86KC0/XFxkKyg/OlxcLlxcZCspPyl8KFtcIiddKSgoPzooPyFcXDIpW15cXG5cXFxcXXxcXFxcLikqPylcXDIpXFxdL2csYT0vXFxcXChcXFxcKT8vZzt0LmV4cG9ydHM9cn0sMTEsZnVuY3Rpb24odCxlLG4pe2Z1bmN0aW9uIGkodCl7cmV0dXJuIHIodCxvKHQpKX12YXIgcj1uKDMwKSxvPW4oMzEpO3QuZXhwb3J0cz1pfSxmdW5jdGlvbih0LGUpe2Z1bmN0aW9uIG4odCxlKXtmb3IodmFyIG49LTEsaT1lLmxlbmd0aCxyPUFycmF5KGkpOysrbjxpOylyW25dPXRbZVtuXV07cmV0dXJuIHJ9dC5leHBvcnRzPW59LFsxMzIsMzIsMzMsMzRdLDUsNiw3LGZ1bmN0aW9uKHQsZSxuKXtmdW5jdGlvbiBpKHQsZSxuLGkpe3RoaXMuX3R5cGU9dCx0aGlzLl9pZD1lLmlkLHRoaXMuX2Rlc2NyaXB0b3I9ZSx0aGlzLl9zZXR0aW5ncz1uLHRoaXMuX2N1cnJlbnRQb3NpdGlvbj10aGlzLl9sb2FkZWRQb3NpdGlvbj10aGlzLl9kdXJhdGlvbj0wLHRoaXMuX2NhcGFiaWxpdGllcz1yKHt9LGguY3JlYXRlRGVmYXVsdHMoKSxpKSx0aGlzLl9sb2dnZXI9bmV3IHUodGhpcy5nZXRUeXBlKCksdGhpcy5nZXRJZCgpLGUudGl0bGUsbik7dHJ5e2gudmFsaWRhdGUodGhpcy5nZXRDYXBhYmlsaXRpZXMoKSl9Y2F0Y2gobyl7cmV0dXJuIHRoaXMuZ2V0TG9nZ2VyKCkubG9nKFwiQmFkIGNhcHM6IFwiK28pLHZvaWQgdGhpcy51cGRhdGVTdGF0ZShzLkVSUk9SKX10aGlzLnVwZGF0ZVN0YXRlKHMuSU5JVElBTElaRSl9dmFyIHI9bigxKSxvPW4oMzYpLHM9bigzOCksYT1uKDM5KSx1PW4oNDApLGg9big0Mik7dC5leHBvcnRzPWkscihpLnByb3RvdHlwZSxvKSxpLnByb3RvdHlwZS5jYW5QbGF5PWZ1bmN0aW9uKCl7cmV0dXJuITF9LGkucHJvdG90eXBlLmdldENhcGFiaWxpdGllcz1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9jYXBhYmlsaXRpZXN9LGkucHJvdG90eXBlLmdldExvZ2dlcj1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9sb2dnZXJ9LGkucHJvdG90eXBlLmdldFNldHRpbmdzPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3NldHRpbmdzfSxpLnByb3RvdHlwZS5nZXREZXNjcmlwdG9yPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2Rlc2NyaXB0b3J9LGkucHJvdG90eXBlLmdldFR5cGU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fdHlwZX0saS5wcm90b3R5cGUuZ2V0SWQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5faWQrXCJcIn0saS5wcm90b3R5cGUuYmVmb3JlU3RhdGVDaGFuZ2U9ZnVuY3Rpb24odCxlKXtyZXR1cm4hMH0saS5wcm90b3R5cGUubm90aWZ5U3RhdGVDaGFuZ2U9ZnVuY3Rpb24odCxlKXtyZXR1cm4hMH0saS5wcm90b3R5cGUuYWZ0ZXJTdGF0ZUNoYW5nZT1mdW5jdGlvbih0LGUpe30saS5wcm90b3R5cGUudXBkYXRlU3RhdGU9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5fc3RhdGU7ZSE9PXQmJmUhPT1zLkRFQUQmJnRoaXMuYmVmb3JlU3RhdGVDaGFuZ2UoZSx0KSYmKHRoaXMuX3N0YXRlPXQsdGhpcy5fbG9nZ2VyLmxvZygnc3RhdGUgY2hhbmdlZCBcIicrdGhpcy5nZXRTdGF0ZSgpKydcIiwgcG9zaXRpb246ICcrdGhpcy5nZXRDdXJyZW50UG9zaXRpb24oKStcIiwgZHVyYXRpb246IFwiK3RoaXMuZ2V0RHVyYXRpb24oKSksdGhpcy5ub3RpZnlTdGF0ZUNoYW5nZShlLHQpJiZ0aGlzLnRyaWdnZXIoYS5TVEFURV9DSEFOR0UsdCx0aGlzKSx0aGlzLmFmdGVyU3RhdGVDaGFuZ2UoZSx0KSl9LGkucHJvdG90eXBlLmdldFN0YXRlPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3N0YXRlfSxpLnByb3RvdHlwZS5faXNJbk9uZU9mU3RhdGVzPWZ1bmN0aW9uKCl7Zm9yKHZhciB0IGluIGFyZ3VtZW50cylpZihhcmd1bWVudHNbdF09PT10aGlzLmdldFN0YXRlKCkpcmV0dXJuITA7cmV0dXJuITF9LGkucHJvdG90eXBlLmdldEN1cnJlbnRQb3NpdGlvbj1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9jdXJyZW50UG9zaXRpb259LGkucHJvdG90eXBlLmdldExvYWRlZFBvc2l0aW9uPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2xvYWRlZFBvc2l0aW9ufSxpLnByb3RvdHlwZS5nZXREdXJhdGlvbj1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9kdXJhdGlvbn19LGZ1bmN0aW9uKHQsZSxuKXt0LmV4cG9ydHM9bigzNyl9LGZ1bmN0aW9uKHQsZSxuKXshZnVuY3Rpb24oKXtmdW5jdGlvbiBuKCl7cmV0dXJue2tleXM6T2JqZWN0LmtleXN8fGZ1bmN0aW9uKHQpe2lmKFwib2JqZWN0XCIhPXR5cGVvZiB0JiZcImZ1bmN0aW9uXCIhPXR5cGVvZiB0fHxudWxsPT09dCl0aHJvdyBuZXcgVHlwZUVycm9yKFwia2V5cygpIGNhbGxlZCBvbiBhIG5vbi1vYmplY3RcIik7dmFyIGUsbj1bXTtmb3IoZSBpbiB0KXQuaGFzT3duUHJvcGVydHkoZSkmJihuW24ubGVuZ3RoXT1lKTtyZXR1cm4gbn0sdW5pcXVlSWQ6ZnVuY3Rpb24odCl7dmFyIGU9KythK1wiXCI7cmV0dXJuIHQ/dCtlOmV9LGhhczpmdW5jdGlvbih0LGUpe3JldHVybiBvLmNhbGwodCxlKX0sZWFjaDpmdW5jdGlvbih0LGUsbil7aWYobnVsbCE9dClpZihyJiZ0LmZvckVhY2g9PT1yKXQuZm9yRWFjaChlLG4pO2Vsc2UgaWYodC5sZW5ndGg9PT0rdC5sZW5ndGgpZm9yKHZhciBpPTAsbz10Lmxlbmd0aDtvPmk7aSsrKWUuY2FsbChuLHRbaV0saSx0KTtlbHNlIGZvcih2YXIgcyBpbiB0KXRoaXMuaGFzKHQscykmJmUuY2FsbChuLHRbc10scyx0KX0sb25jZTpmdW5jdGlvbih0KXt2YXIgZSxuPSExO3JldHVybiBmdW5jdGlvbigpe3JldHVybiBuP2U6KG49ITAsZT10LmFwcGx5KHRoaXMsYXJndW1lbnRzKSx0PW51bGwsZSl9fX19dmFyIGkscj1BcnJheS5wcm90b3R5cGUuZm9yRWFjaCxvPU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkscz1BcnJheS5wcm90b3R5cGUuc2xpY2UsYT0wLHU9bigpO2k9e29uOmZ1bmN0aW9uKHQsZSxuKXtpZighYyh0aGlzLFwib25cIix0LFtlLG5dKXx8IWUpcmV0dXJuIHRoaXM7dGhpcy5fZXZlbnRzfHwodGhpcy5fZXZlbnRzPXt9KTt2YXIgaT10aGlzLl9ldmVudHNbdF18fCh0aGlzLl9ldmVudHNbdF09W10pO3JldHVybiBpLnB1c2goe2NhbGxiYWNrOmUsY29udGV4dDpuLGN0eDpufHx0aGlzfSksdGhpc30sb25jZTpmdW5jdGlvbih0LGUsbil7aWYoIWModGhpcyxcIm9uY2VcIix0LFtlLG5dKXx8IWUpcmV0dXJuIHRoaXM7dmFyIGk9dGhpcyxyPXUub25jZShmdW5jdGlvbigpe2kub2ZmKHQsciksZS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9KTtyZXR1cm4gci5fY2FsbGJhY2s9ZSx0aGlzLm9uKHQscixuKX0sb2ZmOmZ1bmN0aW9uKHQsZSxuKXt2YXIgaSxyLG8scyxhLGgsbCxmO2lmKCF0aGlzLl9ldmVudHN8fCFjKHRoaXMsXCJvZmZcIix0LFtlLG5dKSlyZXR1cm4gdGhpcztpZighdCYmIWUmJiFuKXJldHVybiB0aGlzLl9ldmVudHM9e30sdGhpcztmb3Iocz10P1t0XTp1LmtleXModGhpcy5fZXZlbnRzKSxhPTAsaD1zLmxlbmd0aDtoPmE7YSsrKWlmKHQ9c1thXSxvPXRoaXMuX2V2ZW50c1t0XSl7aWYodGhpcy5fZXZlbnRzW3RdPWk9W10sZXx8bilmb3IobD0wLGY9by5sZW5ndGg7Zj5sO2wrKylyPW9bbF0sKGUmJmUhPT1yLmNhbGxiYWNrJiZlIT09ci5jYWxsYmFjay5fY2FsbGJhY2t8fG4mJm4hPT1yLmNvbnRleHQpJiZpLnB1c2gocik7aS5sZW5ndGh8fGRlbGV0ZSB0aGlzLl9ldmVudHNbdF19cmV0dXJuIHRoaXN9LHRyaWdnZXI6ZnVuY3Rpb24odCl7aWYoIXRoaXMuX2V2ZW50cylyZXR1cm4gdGhpczt2YXIgZT1zLmNhbGwoYXJndW1lbnRzLDEpO2lmKCFjKHRoaXMsXCJ0cmlnZ2VyXCIsdCxlKSlyZXR1cm4gdGhpczt2YXIgbj10aGlzLl9ldmVudHNbdF0saT10aGlzLl9ldmVudHMuYWxsO3JldHVybiBuJiZsKG4sZSksaSYmbChpLGFyZ3VtZW50cyksdGhpc30sc3RvcExpc3RlbmluZzpmdW5jdGlvbih0LGUsbil7dmFyIGk9dGhpcy5fbGlzdGVuZXJzO2lmKCFpKXJldHVybiB0aGlzO3ZhciByPSFlJiYhbjtcIm9iamVjdFwiPT10eXBlb2YgZSYmKG49dGhpcyksdCYmKChpPXt9KVt0Ll9saXN0ZW5lcklkXT10KTtmb3IodmFyIG8gaW4gaSlpW29dLm9mZihlLG4sdGhpcyksciYmZGVsZXRlIHRoaXMuX2xpc3RlbmVyc1tvXTtyZXR1cm4gdGhpc319O3ZhciBoPS9cXHMrLyxjPWZ1bmN0aW9uKHQsZSxuLGkpe2lmKCFuKXJldHVybiEwO2lmKFwib2JqZWN0XCI9PXR5cGVvZiBuKXtmb3IodmFyIHIgaW4gbil0W2VdLmFwcGx5KHQsW3IsbltyXV0uY29uY2F0KGkpKTtyZXR1cm4hMX1pZihoLnRlc3Qobikpe2Zvcih2YXIgbz1uLnNwbGl0KGgpLHM9MCxhPW8ubGVuZ3RoO2E+cztzKyspdFtlXS5hcHBseSh0LFtvW3NdXS5jb25jYXQoaSkpO3JldHVybiExfXJldHVybiEwfSxsPWZ1bmN0aW9uKHQsZSl7dmFyIG4saT0tMSxyPXQubGVuZ3RoLG89ZVswXSxzPWVbMV0sYT1lWzJdO3N3aXRjaChlLmxlbmd0aCl7Y2FzZSAwOmZvcig7KytpPHI7KShuPXRbaV0pLmNhbGxiYWNrLmNhbGwobi5jdHgpO3JldHVybjtjYXNlIDE6Zm9yKDsrK2k8cjspKG49dFtpXSkuY2FsbGJhY2suY2FsbChuLmN0eCxvKTtyZXR1cm47Y2FzZSAyOmZvcig7KytpPHI7KShuPXRbaV0pLmNhbGxiYWNrLmNhbGwobi5jdHgsbyxzKTtyZXR1cm47Y2FzZSAzOmZvcig7KytpPHI7KShuPXRbaV0pLmNhbGxiYWNrLmNhbGwobi5jdHgsbyxzLGEpO3JldHVybjtkZWZhdWx0OmZvcig7KytpPHI7KShuPXRbaV0pLmNhbGxiYWNrLmFwcGx5KG4uY3R4LGUpfX0sZj17bGlzdGVuVG86XCJvblwiLGxpc3RlblRvT25jZTpcIm9uY2VcIn07dS5lYWNoKGYsZnVuY3Rpb24odCxlKXtpW2VdPWZ1bmN0aW9uKGUsbixpKXt2YXIgcj10aGlzLl9saXN0ZW5lcnN8fCh0aGlzLl9saXN0ZW5lcnM9e30pLG89ZS5fbGlzdGVuZXJJZHx8KGUuX2xpc3RlbmVySWQ9dS51bmlxdWVJZChcImxcIikpO3JldHVybiByW29dPWUsXCJvYmplY3RcIj09dHlwZW9mIG4mJihpPXRoaXMpLGVbdF0obixpLHRoaXMpLHRoaXN9fSksaS5iaW5kPWkub24saS51bmJpbmQ9aS5vZmYsaS5taXhpbj1mdW5jdGlvbih0KXt2YXIgZT1bXCJvblwiLFwib25jZVwiLFwib2ZmXCIsXCJ0cmlnZ2VyXCIsXCJzdG9wTGlzdGVuaW5nXCIsXCJsaXN0ZW5Ub1wiLFwibGlzdGVuVG9PbmNlXCIsXCJiaW5kXCIsXCJ1bmJpbmRcIl07cmV0dXJuIHUuZWFjaChlLGZ1bmN0aW9uKGUpe3RbZV09dGhpc1tlXX0sdGhpcyksdH0sXCJ1bmRlZmluZWRcIiE9dHlwZW9mIHQmJnQuZXhwb3J0cyYmKGU9dC5leHBvcnRzPWkpLGUuQmFja2JvbmVFdmVudHM9aX0odGhpcyl9LGZ1bmN0aW9uKHQsZSl7dC5leHBvcnRzPXtQTEFZSU5HOlwicGxheWluZ1wiLExPQURJTkc6XCJsb2FkaW5nXCIsU0VFS0lORzpcInNlZWtpbmdcIixQQVVTRUQ6XCJwYXVzZWRcIixFUlJPUjpcImVycm9yXCIsSURMRTpcImlkbGVcIixJTklUSUFMSVpFOlwiaW5pdGlhbGl6ZVwiLEVOREVEOlwiZW5kZWRcIixERUFEOlwiZGVhZFwifX0sZnVuY3Rpb24odCxlKXt0LmV4cG9ydHM9e1BPU0lUSU9OX0NIQU5HRTpcInBvc2l0aW9uLWNoYW5nZVwiLFNUQVRFX0NIQU5HRTpcInN0YXRlLWNoYW5nZVwiLERBVEE6XCJkYXRhXCIsTkVUV09SS19USU1FT1VUOlwibmV0d29yay10aW1lb3V0XCIsTUVUQURBVEE6XCJtZXRhZGF0YVwifX0sZnVuY3Rpb24odCxlLG4pe3ZhciBpLHI9big0MSksbz1udWxsO3QuZXhwb3J0cz1mdW5jdGlvbih0LGUsbixzKXtpZighaSYmKGk9cighIXMuZGVidWcsXCJhdWRpb21hbmFnZXJcIiksbykpe3ZhciBhPWk7aT1mdW5jdGlvbigpe2Eobyhhcmd1bWVudHNbMF0rXCIlc1wiLEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywxKSkpfX1yZXR1cm4gbj1uJiZuLmxlbmd0aD9cIiBbXCIrbi5yZXBsYWNlKC9cXHMvZyxcIlwiKS5zdWJzdHIoMCw2KStcIl1cIjpcIlwiLHtsb2c6aS5iaW5kKG51bGwsXCIlcyAoJXMpJXNcIix0LGUsbil9fX0sZnVuY3Rpb24odCxlKXtmdW5jdGlvbiBuKCl7ZnVuY3Rpb24gdCh0LG4pe2Zvcih2YXIgaSxyPWFyZ3VtZW50cy5sZW5ndGgsbz1BcnJheShyPjI/ci0yOjApLHM9MjtyPnM7cysrKW9bcy0yXT1hcmd1bWVudHNbc107XCJzdHJpbmdcIj09dHlwZW9mIG4/bj1cIiBcIituOihvLnVuc2hpZnQobiksbj1cIlwiKSwoaT13aW5kb3cuY29uc29sZSlbdF0uYXBwbHkoaSxbZSgpK1wiIHxcIitjK1wiJWNcIituXS5jb25jYXQobCxvKSl9ZnVuY3Rpb24gZSgpe3ZhciB0PW5ldyBEYXRlLGU9bnVsbD09PWg/MDp0LWg7cmV0dXJuIGg9K3QsXCIlY1wiK3IodC5nZXRIb3VycygpKStcIjpcIityKHQuZ2V0TWludXRlcygpKStcIjpcIityKHQuZ2V0U2Vjb25kcygpKStcIi5cIitpKHQuZ2V0TWlsbGlzZWNvbmRzKCksXCIwXCIsMykrXCIlYyAoJWNcIitpKFwiK1wiK2UrXCJtc1wiLFwiIFwiLDgpK1wiJWMpXCJ9dmFyIG49YXJndW1lbnRzLmxlbmd0aDw9MHx8dm9pZCAwPT09YXJndW1lbnRzWzBdPyEwOmFyZ3VtZW50c1swXSxvPWFyZ3VtZW50cy5sZW5ndGg8PTF8fHZvaWQgMD09PWFyZ3VtZW50c1sxXT9cIlwiOmFyZ3VtZW50c1sxXTtpZighbilyZXR1cm4gczt2YXIgaD1udWxsLGM9YShvKSxsPVtcImNvbG9yOiBncmVlblwiLFwiY29sb3I6IGdyZXlcIixcImNvbG9yOiBibHVlXCIsXCJjb2xvcjogZ3JleVwiLHUobyksXCJcIl0sZj10LmJpbmQobnVsbCxcImxvZ1wiKTtyZXR1cm4gZi5sb2c9ZixbXCJpbmZvXCIsXCJ3YXJuXCIsXCJlcnJvclwiXS5mb3JFYWNoKGZ1bmN0aW9uKGUpe2ZbZV09dC5iaW5kKG51bGwsZSl9KSxmfWZ1bmN0aW9uIGkodCxlLG4pe3JldHVybiBvKGUsbi0oXCJcIit0KS5sZW5ndGgpK3R9ZnVuY3Rpb24gcih0KXtyZXR1cm4gaSh0LFwiMFwiLDIpfWZ1bmN0aW9uIG8odCxlKXtyZXR1cm4gZT4wP25ldyBBcnJheShlKzEpLmpvaW4odCk6XCJcIn1mdW5jdGlvbiBzKCl7fWZ1bmN0aW9uIGEodCl7cmV0dXJuIHQ/XCIlY1wiK3Q6XCIlY1wifXQuZXhwb3J0cz1uLHMubG9nPXMuaW5mbz1zLndhcm49cy5lcnJvcj1zO3ZhciB1PWZ1bmN0aW9uKCl7dmFyIHQ9W1wiIzUxNjEzQ1wiLFwiIzQ0Nzg0OFwiLFwiIzQ4NkU1RlwiLFwiIzc4NzQ0NFwiLFwiIzZFNjY0RVwiXSxlPTA7cmV0dXJuIGZ1bmN0aW9uKG4pe3JldHVybiBuP1wiYmFja2dyb3VuZC1jb2xvcjpcIit0W2UrKyV0Lmxlbmd0aF0rXCI7Y29sb3I6I2ZmZjtib3JkZXItcmFkaXVzOjNweDtwYWRkaW5nOjJweCA0cHg7Zm9udC1mYW1pbHk6c2Fucy1zZXJpZjt0ZXh0LXRyYW5zZm9ybTp1cHBlcmNhc2U7Zm9udC1zaXplOjlweDttYXJnaW46MCA0cHhcIjpcIlwifX0oKX0sZnVuY3Rpb24odCxlKXtmdW5jdGlvbiBuKHQpe2Zvcih2YXIgZSBpbiByKWlmKHIuaGFzT3duUHJvcGVydHkoZSkmJnZvaWQgMD09PXRbcltlXV0pdGhyb3cgbmV3IEVycm9yKFwiQ2FwcyBsYWNrIHJlcXVpcmVkIGZpZWxkOiBcIitlKTtpZighKHRbci5QUk9UT0NPTFNdaW5zdGFuY2VvZiBBcnJheSkpdGhyb3cgbmV3IEVycm9yKFwiQ2FwcyBwcm90b2NvbHMgbXVzdCBiZSBhbiBhcnJheVwiKTtpZighKHRbci5NSU1FVFlQRVNdaW5zdGFuY2VvZiBBcnJheSkpdGhyb3cgbmV3IEVycm9yKFwiQ2FwcyBtaW1ldHlwZXMgbXVzdCBiZSBhbiBhcnJheVwiKTtyZXR1cm4hMH1mdW5jdGlvbiBpKCl7dmFyIHQ9e307cmV0dXJuIHRbci5NSU1FVFlQRVNdPVtdLHRbci5QUk9UT0NPTFNdPVtdLHRbci5BVURJT19PTkxZXT0hMCx0W3IuQ0FOX1NFRUtfQUxXQVlTXT0hMCx0W3IuTkVFRFNfVVJMX1JFRlJFU0hdPSEwLHR9dmFyIHI9e01JTUVUWVBFUzpcIm1pbWV0eXBlc1wiLFBST1RPQ09MUzpcInByb3RvY29sc1wiLEFVRElPX09OTFk6XCJhdWRpb09ubHlcIixDQU5fU0VFS19BTFdBWVM6XCJjYW5TZWVrQWx3YXlzXCIsTkVFRFNfVVJMX1JFRlJFU0g6XCJuZWVkc1VybFJlZnJlc2hcIn0sbz17Y3JlYXRlRGVmYXVsdHM6aSxuYW1lczpyLHZhbGlkYXRlOm59O3QuZXhwb3J0cz1vfSxmdW5jdGlvbih0LGUpe3QuZXhwb3J0cz17RkxBU0hfSExTX1BMQVlMSVNUX05PVF9GT1VORDpcIkhMU19QTEFZTElTVF9OT1RfRk9VTkRcIixGTEFTSF9ITFNfUExBWUxJU1RfU0VDVVJJVFlfRVJST1I6XCJITFNfU0VDVVJJVFlfRVJST1JcIixGTEFTSF9ITFNfTk9UX1ZBTElEX1BMQVlMSVNUOlwiSExTX05PVF9WQUxJRF9QTEFZTElTVFwiLEZMQVNIX0hMU19OT19UU19JTl9QTEFZTElTVDpcIkhMU19OT19UU19JTl9QTEFZTElTVFwiLEZMQVNIX0hMU19OT19QTEFZTElTVF9JTl9NQU5JRkVTVDpcIkhMU19OT19QTEFZTElTVF9JTl9NQU5JRkVTVFwiLEZMQVNIX0hMU19UU19JU19DT1JSVVBUOlwiSExTX1RTX0lTX0NPUlJVUFRcIixGTEFTSF9ITFNfRkxWX1RBR19DT1JSVVBUOlwiSExTX0ZMVl9UQUdfQ09SUlVQVFwiLEZMQVNIX0hUVFBfRklMRV9OT1RfRk9VTkQ6XCJIVFRQX0ZJTEVfTk9UX0ZPVU5EXCIsRkxBU0hfUlRNUF9DT05ORUNUX0ZBSUxFRDpcIlJUTVBfQ09OTkVDVF9GQUlMRURcIixGTEFTSF9SVE1QX0NPTk5FQ1RfQ0xPU0VEOlwiUlRNUF9DT05ORUNUX0NMT1NFRFwiLEZMQVNIX1JUTVBfQ0FOTk9UX1BMQVlfU1RSRUFNOlwiUlRNUF9DQU5OT1RfUExBWV9TVFJFQU1cIixGTEFTSF9QUk9YWV9DQU5UX0xPQURfRkxBU0g6XCJDQU5UX0xPQURfRkxBU0hcIixGTEFTSF9QUk9YWV9GTEFTSF9CTE9DS0VEOlwiRkxBU0hfUFJPWFlfRkxBU0hfQkxPQ0tFRFwiLEdFTkVSSUNfQVVESU9fRU5ERURfRUFSTFk6XCJHRU5FUklDX0FVRElPX0VOREVEX0VBUkxZXCIsR0VORVJJQ19BVURJT19PVkVSUlVOOlwiR0VORVJJQ19BVURJT19PVkVSUlVOXCIsSFRNTDVfQVVESU9fQUJPUlRFRDpcIkhUTUw1X0FVRElPX0FCT1JURURcIixIVE1MNV9BVURJT19ORVRXT1JLOlwiSFRNTDVfQVVESU9fTkVUV09SS1wiLEhUTUw1X0FVRElPX0RFQ09ERTpcIkhUTUw1X0FVRElPX0RFQ09ERVwiLEhUTUw1X0FVRElPX1NSQ19OT1RfU1VQUE9SVEVEOlwiSFRNTDVfQVVESU9fU1JDX05PVF9TVVBQT1JURURcIixNU0VfQkFEX09CSkVDVF9TVEFURTpcIk1TRV9CQURfT0JKRUNUX1NUQVRFXCIsTVNFX05PVF9TVVBQT1JURUQ6XCJNU0VfTk9UX1NVUFBPUlRFRFwiLE1TRV9NUDNfTk9UX1NVUFBPUlRFRDpcIk1TRV9NUDNfTk9UX1NVUFBPUlRFRFwiLE1TRV9ITFNfTk9UX1ZBTElEX1BMQVlMSVNUOlwiTVNFX0hMU19OT1RfVkFMSURfUExBWUxJU1RcIixNU0VfSExTX1BMQVlMSVNUX05PVF9GT1VORDpcIk1TRV9ITFNfUExBWUxJU1RfTk9UX0ZPVU5EXCIsTVNFX0hMU19TRUdNRU5UX05PVF9GT1VORDpcIk1TRV9ITFNfU0VHTUVOVF9OT1RfRk9VTkRcIn19LGZ1bmN0aW9uKHQsZSl7ZnVuY3Rpb24gbigpe2lmKCFxJiZkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZShcImJvZHlcIilbMF0pe3RyeXt2YXIgdCxlPXYoXCJzcGFuXCIpO2Uuc3R5bGUuZGlzcGxheT1cIm5vbmVcIix0PWouZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJib2R5XCIpWzBdLmFwcGVuZENoaWxkKGUpLHQucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCh0KSx0PW51bGwsZT1udWxsfWNhdGNoKG4pe3JldHVybn1xPSEwO2Zvcih2YXIgaT1WLmxlbmd0aCxyPTA7aT5yO3IrKylWW3JdKCl9fWZ1bmN0aW9uIGkodCl7cT90KCk6VltWLmxlbmd0aF09dH1mdW5jdGlvbiByKHQpe2lmKHR5cGVvZiBILmFkZEV2ZW50TGlzdGVuZXIhPWspSC5hZGRFdmVudExpc3RlbmVyKFwibG9hZFwiLHQsITEpO2Vsc2UgaWYodHlwZW9mIGouYWRkRXZlbnRMaXN0ZW5lciE9aylqLmFkZEV2ZW50TGlzdGVuZXIoXCJsb2FkXCIsdCwhMSk7ZWxzZSBpZih0eXBlb2YgSC5hdHRhY2hFdmVudCE9aylTKEgsXCJvbmxvYWRcIix0KTtlbHNlIGlmKFwiZnVuY3Rpb25cIj09dHlwZW9mIEgub25sb2FkKXt2YXIgZT1ILm9ubG9hZDtILm9ubG9hZD1mdW5jdGlvbigpe2UoKSx0KCl9fWVsc2UgSC5vbmxvYWQ9dH1mdW5jdGlvbiBvKCl7dmFyIHQ9ai5nZXRFbGVtZW50c0J5VGFnTmFtZShcImJvZHlcIilbMF0sZT12KE4pO2Uuc2V0QXR0cmlidXRlKFwic3R5bGVcIixcInZpc2liaWxpdHk6IGhpZGRlbjtcIiksZS5zZXRBdHRyaWJ1dGUoXCJ0eXBlXCIsRik7dmFyIG49dC5hcHBlbmRDaGlsZChlKTtpZihuKXt2YXIgaT0wOyFmdW5jdGlvbiByKCl7aWYodHlwZW9mIG4uR2V0VmFyaWFibGUhPWspdHJ5e3ZhciBvPW4uR2V0VmFyaWFibGUoXCIkdmVyc2lvblwiKTtvJiYobz1vLnNwbGl0KFwiIFwiKVsxXS5zcGxpdChcIixcIiksUS5wdj1bRShvWzBdKSxFKG9bMV0pLEUob1syXSldKX1jYXRjaChhKXtRLnB2PVs4LDAsMF19ZWxzZSBpZigxMD5pKXJldHVybiBpKyssdm9pZCB3aW5kb3cuc2V0VGltZW91dChyLDEwKTt0LnJlbW92ZUNoaWxkKGUpLG49bnVsbCxzKCl9KCl9ZWxzZSBzKCl9ZnVuY3Rpb24gcygpe3ZhciB0PXoubGVuZ3RoO2lmKHQ+MClmb3IodmFyIGU9MDt0PmU7ZSsrKXt2YXIgbj16W2VdLmlkLGk9eltlXS5jYWxsYmFja0ZuLHI9e3N1Y2Nlc3M6ITEsaWQ6bn07aWYoUS5wdlswXT4wKXt2YXIgbz15KG4pO2lmKG8paWYoIUEoeltlXS5zd2ZWZXJzaW9uKXx8US53ayYmUS53azwzMTIpaWYoeltlXS5leHByZXNzSW5zdGFsbCYmdSgpKXt2YXIgcz17fTtzLmRhdGE9eltlXS5leHByZXNzSW5zdGFsbCxzLndpZHRoPW8uZ2V0QXR0cmlidXRlKFwid2lkdGhcIil8fFwiMFwiLHMuaGVpZ2h0PW8uZ2V0QXR0cmlidXRlKFwiaGVpZ2h0XCIpfHxcIjBcIixvLmdldEF0dHJpYnV0ZShcImNsYXNzXCIpJiYocy5zdHlsZWNsYXNzPW8uZ2V0QXR0cmlidXRlKFwiY2xhc3NcIikpLG8uZ2V0QXR0cmlidXRlKFwiYWxpZ25cIikmJihzLmFsaWduPW8uZ2V0QXR0cmlidXRlKFwiYWxpZ25cIikpO2Zvcih2YXIgbD17fSxmPW8uZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJwYXJhbVwiKSxkPWYubGVuZ3RoLHA9MDtkPnA7cCsrKVwibW92aWVcIiE9PWZbcF0uZ2V0QXR0cmlidXRlKFwibmFtZVwiKS50b0xvd2VyQ2FzZSgpJiYobFtmW3BdLmdldEF0dHJpYnV0ZShcIm5hbWVcIildPWZbcF0uZ2V0QXR0cmlidXRlKFwidmFsdWVcIikpO2gocyxsLG4saSl9ZWxzZSBjKG8pLGkmJmkocik7ZWxzZSBUKG4sITApLGkmJihyLnN1Y2Nlc3M9ITAsci5yZWY9YShuKSxyLmlkPW4saShyKSl9ZWxzZSBpZihUKG4sITApLGkpe3ZhciBnPWEobik7ZyYmdHlwZW9mIGcuU2V0VmFyaWFibGUhPWsmJihyLnN1Y2Nlc3M9ITAsci5yZWY9ZyxyLmlkPWcuaWQpLGkocil9fX1mdW5jdGlvbiBhKHQpe3ZhciBlPW51bGwsbj15KHQpO3JldHVybiBuJiZcIk9CSkVDVFwiPT09bi5ub2RlTmFtZS50b1VwcGVyQ2FzZSgpJiYoZT10eXBlb2Ygbi5TZXRWYXJpYWJsZSE9PWs/bjpuLmdldEVsZW1lbnRzQnlUYWdOYW1lKE4pWzBdfHxuKSxlfWZ1bmN0aW9uIHUoKXtyZXR1cm4hWCYmQShcIjYuMC42NVwiKSYmKFEud2lufHxRLm1hYykmJiEoUS53ayYmUS53azwzMTIpfWZ1bmN0aW9uIGgodCxlLG4saSl7dmFyIHI9eShuKTtpZihuPW0obiksWD0hMCxPPWl8fG51bGwsUj17c3VjY2VzczohMSxpZDpufSxyKXtcIk9CSkVDVFwiPT09ci5ub2RlTmFtZS50b1VwcGVyQ2FzZSgpPyhJPWwociksTD1udWxsKTooST1yLEw9biksdC5pZD1VLCh0eXBlb2YgdC53aWR0aD09a3x8IS8lJC8udGVzdCh0LndpZHRoKSYmRSh0LndpZHRoKTwzMTApJiYodC53aWR0aD1cIjMxMFwiKSwodHlwZW9mIHQuaGVpZ2h0PT1rfHwhLyUkLy50ZXN0KHQuaGVpZ2h0KSYmRSh0LmhlaWdodCk8MTM3KSYmKHQuaGVpZ2h0PVwiMTM3XCIpO3ZhciBvPVEuaWU/XCJBY3RpdmVYXCI6XCJQbHVnSW5cIixzPVwiTU1yZWRpcmVjdFVSTD1cIitlbmNvZGVVUklDb21wb25lbnQoSC5sb2NhdGlvbi50b1N0cmluZygpLnJlcGxhY2UoLyYvZyxcIiUyNlwiKSkrXCImTU1wbGF5ZXJUeXBlPVwiK28rXCImTU1kb2N0aXRsZT1cIitlbmNvZGVVUklDb21wb25lbnQoai50aXRsZS5zbGljZSgwLDQ3KStcIiAtIEZsYXNoIFBsYXllciBJbnN0YWxsYXRpb25cIik7aWYodHlwZW9mIGUuZmxhc2h2YXJzIT1rP2UuZmxhc2h2YXJzKz1cIiZcIitzOmUuZmxhc2h2YXJzPXMsUS5pZSYmNCE9PXIucmVhZHlTdGF0ZSl7dmFyIGE9dihcImRpdlwiKTtuKz1cIlNXRk9iamVjdE5ld1wiLGEuc2V0QXR0cmlidXRlKFwiaWRcIixuKSxyLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKGEsciksci5zdHlsZS5kaXNwbGF5PVwibm9uZVwiLGcocil9ZCh0LGUsbil9fWZ1bmN0aW9uIGModCl7aWYoUS5pZSYmNCE9PXQucmVhZHlTdGF0ZSl7dC5zdHlsZS5kaXNwbGF5PVwibm9uZVwiO3ZhciBlPXYoXCJkaXZcIik7dC5wYXJlbnROb2RlLmluc2VydEJlZm9yZShlLHQpLGUucGFyZW50Tm9kZS5yZXBsYWNlQ2hpbGQobCh0KSxlKSxnKHQpfWVsc2UgdC5wYXJlbnROb2RlLnJlcGxhY2VDaGlsZChsKHQpLHQpfWZ1bmN0aW9uIGwodCl7dmFyIGU9dihcImRpdlwiKTtpZihRLndpbiYmUS5pZSllLmlubmVySFRNTD10LmlubmVySFRNTDtlbHNle3ZhciBuPXQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoTilbMF07aWYobil7dmFyIGk9bi5jaGlsZE5vZGVzO2lmKGkpZm9yKHZhciByPWkubGVuZ3RoLG89MDtyPm87bysrKTE9PT1pW29dLm5vZGVUeXBlJiZcIlBBUkFNXCI9PT1pW29dLm5vZGVOYW1lfHw4PT09aVtvXS5ub2RlVHlwZXx8ZS5hcHBlbmRDaGlsZChpW29dLmNsb25lTm9kZSghMCkpfX1yZXR1cm4gZX1mdW5jdGlvbiBmKHQsZSl7dmFyIG49dihcImRpdlwiKTtyZXR1cm4gbi5pbm5lckhUTUw9XCI8b2JqZWN0IGNsYXNzaWQ9J2Nsc2lkOkQyN0NEQjZFLUFFNkQtMTFjZi05NkI4LTQ0NDU1MzU0MDAwMCc+PHBhcmFtIG5hbWU9J21vdmllJyB2YWx1ZT0nXCIrdCtcIic+XCIrZStcIjwvb2JqZWN0PlwiLG4uZmlyc3RDaGlsZH1mdW5jdGlvbiBkKHQsZSxuKXt2YXIgaSxyPXkobik7aWYobj1tKG4pLFEud2smJlEud2s8MzEyKXJldHVybiBpO2lmKHIpe3ZhciBvLHMsYSx1PXYoUS5pZT9cImRpdlwiOk4pO3R5cGVvZiB0LmlkPT1rJiYodC5pZD1uKTtmb3IoYSBpbiBlKWUuaGFzT3duUHJvcGVydHkoYSkmJlwibW92aWVcIiE9PWEudG9Mb3dlckNhc2UoKSYmcCh1LGEsZVthXSk7US5pZSYmKHU9Zih0LmRhdGEsdS5pbm5lckhUTUwpKTtmb3IobyBpbiB0KXQuaGFzT3duUHJvcGVydHkobykmJihzPW8udG9Mb3dlckNhc2UoKSxcInN0eWxlY2xhc3NcIj09PXM/dS5zZXRBdHRyaWJ1dGUoXCJjbGFzc1wiLHRbb10pOlwiY2xhc3NpZFwiIT09cyYmXCJkYXRhXCIhPT1zJiZ1LnNldEF0dHJpYnV0ZShvLHRbb10pKTtRLmllP1dbVy5sZW5ndGhdPXQuaWQ6KHUuc2V0QXR0cmlidXRlKFwidHlwZVwiLEYpLHUuc2V0QXR0cmlidXRlKFwiZGF0YVwiLHQuZGF0YSkpLHIucGFyZW50Tm9kZS5yZXBsYWNlQ2hpbGQodSxyKSxpPXV9cmV0dXJuIGl9ZnVuY3Rpb24gcCh0LGUsbil7dmFyIGk9dihcInBhcmFtXCIpO2kuc2V0QXR0cmlidXRlKFwibmFtZVwiLGUpLGkuc2V0QXR0cmlidXRlKFwidmFsdWVcIixuKSx0LmFwcGVuZENoaWxkKGkpfWZ1bmN0aW9uIGcodCl7dmFyIGU9eSh0KTtlJiZcIk9CSkVDVFwiPT09ZS5ub2RlTmFtZS50b1VwcGVyQ2FzZSgpJiYoUS5pZT8oZS5zdHlsZS5kaXNwbGF5PVwibm9uZVwiLGZ1bmN0aW9uIG4oKXtpZig0PT09ZS5yZWFkeVN0YXRlKXtmb3IodmFyIHQgaW4gZSlcImZ1bmN0aW9uXCI9PXR5cGVvZiBlW3RdJiYoZVt0XT1udWxsKTtlLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoZSl9ZWxzZSB3aW5kb3cuc2V0VGltZW91dChuLDEwKX0oKSk6ZS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGUpKX1mdW5jdGlvbiBfKHQpe3JldHVybiB0JiZ0Lm5vZGVUeXBlJiYxPT09dC5ub2RlVHlwZX1mdW5jdGlvbiBtKHQpe3JldHVybiBfKHQpP3QuaWQ6dH1mdW5jdGlvbiB5KHQpe2lmKF8odCkpcmV0dXJuIHQ7dmFyIGU9bnVsbDt0cnl7ZT1qLmdldEVsZW1lbnRCeUlkKHQpfWNhdGNoKG4pe31yZXR1cm4gZX1mdW5jdGlvbiB2KHQpe3JldHVybiBqLmNyZWF0ZUVsZW1lbnQodCl9ZnVuY3Rpb24gRSh0KXtyZXR1cm4gcGFyc2VJbnQodCwxMCl9ZnVuY3Rpb24gUyh0LGUsbil7dC5hdHRhY2hFdmVudChlLG4pLEtbSy5sZW5ndGhdPVt0LGUsbl19ZnVuY3Rpb24gQSh0KXt0Kz1cIlwiO3ZhciBlPVEucHYsbj10LnNwbGl0KFwiLlwiKTtyZXR1cm4gblswXT1FKG5bMF0pLG5bMV09RShuWzFdKXx8MCxuWzJdPUUoblsyXSl8fDAsZVswXT5uWzBdfHxlWzBdPT09blswXSYmZVsxXT5uWzFdfHxlWzBdPT09blswXSYmZVsxXT09PW5bMV0mJmVbMl0+PW5bMl19ZnVuY3Rpb24gdyh0LGUsbixpKXt2YXIgcj1qLmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiaGVhZFwiKVswXTtpZihyKXt2YXIgbz1cInN0cmluZ1wiPT10eXBlb2Ygbj9uOlwic2NyZWVuXCI7aWYoaSYmKEQ9bnVsbCxNPW51bGwpLCFEfHxNIT09byl7dmFyIHM9dihcInN0eWxlXCIpO3Muc2V0QXR0cmlidXRlKFwidHlwZVwiLFwidGV4dC9jc3NcIikscy5zZXRBdHRyaWJ1dGUoXCJtZWRpYVwiLG8pLEQ9ci5hcHBlbmRDaGlsZChzKSxRLmllJiZ0eXBlb2Ygai5zdHlsZVNoZWV0cyE9ayYmai5zdHlsZVNoZWV0cy5sZW5ndGg+MCYmKEQ9ai5zdHlsZVNoZWV0c1tqLnN0eWxlU2hlZXRzLmxlbmd0aC0xXSksTT1vfUQmJih0eXBlb2YgRC5hZGRSdWxlIT1rP0QuYWRkUnVsZSh0LGUpOnR5cGVvZiBqLmNyZWF0ZVRleHROb2RlIT1rJiZELmFwcGVuZENoaWxkKGouY3JlYXRlVGV4dE5vZGUodCtcIiB7XCIrZStcIn1cIikpKX19ZnVuY3Rpb24gVCh0LGUpe2lmKCQpe3ZhciBuPWU/XCJ2aXNpYmxlXCI6XCJoaWRkZW5cIixpPXkodCk7cSYmaT9pLnN0eWxlLnZpc2liaWxpdHk9bjpcInN0cmluZ1wiPT10eXBlb2YgdCYmdyhcIiNcIit0LFwidmlzaWJpbGl0eTpcIituKX19ZnVuY3Rpb24gYih0KXt2YXIgZT0vW1xcXFxcXFwiPD5cXC47XS8sbj1udWxsIT1lLmV4ZWModCk7cmV0dXJuIG4mJnR5cGVvZiBlbmNvZGVVUklDb21wb25lbnQhPWs/ZW5jb2RlVVJJQ29tcG9uZW50KHQpOnR9LyohICAgIFNXRk9iamVjdCB2Mi4zLjIwMTMwNTIxIDxodHRwOi8vZ2l0aHViLmNvbS9zd2ZvYmplY3Qvc3dmb2JqZWN0PlxuXHRcdCAgICBpcyByZWxlYXNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UgPGh0dHA6Ly93d3cub3BlbnNvdXJjZS5vcmcvbGljZW5zZXMvbWl0LWxpY2Vuc2UucGhwPlxuXHRcdCovXG52YXIgUCxJLEwsTyxSLEQsTSxrPVwidW5kZWZpbmVkXCIsTj1cIm9iamVjdFwiLHg9XCJTaG9ja3dhdmUgRmxhc2hcIixDPVwiU2hvY2t3YXZlRmxhc2guU2hvY2t3YXZlRmxhc2hcIixGPVwiYXBwbGljYXRpb24veC1zaG9ja3dhdmUtZmxhc2hcIixVPVwiU1dGT2JqZWN0RXhwckluc3RcIixCPVwib25yZWFkeXN0YXRlY2hhbmdlXCIsSD13aW5kb3csaj1kb2N1bWVudCxHPW5hdmlnYXRvcixZPSExLFY9W10sej1bXSxXPVtdLEs9W10scT0hMSxYPSExLCQ9ITAsWj0hMSxRPWZ1bmN0aW9uKCl7dmFyIHQ9dHlwZW9mIGouZ2V0RWxlbWVudEJ5SWQhPWsmJnR5cGVvZiBqLmdldEVsZW1lbnRzQnlUYWdOYW1lIT1rJiZ0eXBlb2Ygai5jcmVhdGVFbGVtZW50IT1rLGU9Ry51c2VyQWdlbnQudG9Mb3dlckNhc2UoKSxuPUcucGxhdGZvcm0udG9Mb3dlckNhc2UoKSxpPW4/L3dpbi8udGVzdChuKTovd2luLy50ZXN0KGUpLHI9bj8vbWFjLy50ZXN0KG4pOi9tYWMvLnRlc3QoZSksbz0vd2Via2l0Ly50ZXN0KGUpP3BhcnNlRmxvYXQoZS5yZXBsYWNlKC9eLip3ZWJraXRcXC8oXFxkKyhcXC5cXGQrKT8pLiokLyxcIiQxXCIpKTohMSxzPVwiTWljcm9zb2Z0IEludGVybmV0IEV4cGxvcmVyXCI9PT1HLmFwcE5hbWUsYT1bMCwwLDBdLHU9bnVsbDtpZih0eXBlb2YgRy5wbHVnaW5zIT1rJiZ0eXBlb2YgRy5wbHVnaW5zW3hdPT1OKXU9Ry5wbHVnaW5zW3hdLmRlc2NyaXB0aW9uLHUmJnR5cGVvZiBHLm1pbWVUeXBlcyE9ayYmRy5taW1lVHlwZXNbRl0mJkcubWltZVR5cGVzW0ZdLmVuYWJsZWRQbHVnaW4mJihZPSEwLHM9ITEsdT11LnJlcGxhY2UoL14uKlxccysoXFxTK1xccytcXFMrJCkvLFwiJDFcIiksYVswXT1FKHUucmVwbGFjZSgvXiguKilcXC4uKiQvLFwiJDFcIikpLGFbMV09RSh1LnJlcGxhY2UoL14uKlxcLiguKilcXHMuKiQvLFwiJDFcIikpLGFbMl09L1thLXpBLVpdLy50ZXN0KHUpP0UodS5yZXBsYWNlKC9eLipbYS16QS1aXSsoLiopJC8sXCIkMVwiKSk6MCk7ZWxzZSBpZih0eXBlb2YgSC5BY3RpdmVYT2JqZWN0IT1rKXRyeXt2YXIgaD1uZXcgQWN0aXZlWE9iamVjdChDKTtoJiYodT1oLkdldFZhcmlhYmxlKFwiJHZlcnNpb25cIiksdSYmKHM9ITAsdT11LnNwbGl0KFwiIFwiKVsxXS5zcGxpdChcIixcIiksYT1bRSh1WzBdKSxFKHVbMV0pLEUodVsyXSldKSl9Y2F0Y2goYyl7fXJldHVybnt3Mzp0LHB2OmEsd2s6byxpZTpzLHdpbjppLG1hYzpyfX0oKTshZnVuY3Rpb24oKXtRLnczJiYoKHR5cGVvZiBqLnJlYWR5U3RhdGUhPWsmJihcImNvbXBsZXRlXCI9PT1qLnJlYWR5U3RhdGV8fFwiaW50ZXJhY3RpdmVcIj09PWoucmVhZHlTdGF0ZSl8fHR5cGVvZiBqLnJlYWR5U3RhdGU9PWsmJihqLmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiYm9keVwiKVswXXx8ai5ib2R5KSkmJm4oKSxxfHwodHlwZW9mIGouYWRkRXZlbnRMaXN0ZW5lciE9ayYmai5hZGRFdmVudExpc3RlbmVyKFwiRE9NQ29udGVudExvYWRlZFwiLG4sITEpLFEuaWUmJihqLmF0dGFjaEV2ZW50KEIsZnVuY3Rpb24gdCgpe1wiY29tcGxldGVcIj09PWoucmVhZHlTdGF0ZSYmKGouZGV0YWNoRXZlbnQoQix0KSxuKCkpfSksSD09PXRvcCYmIWZ1bmN0aW9uIGUoKXtpZighcSl7dHJ5e2ouZG9jdW1lbnRFbGVtZW50LmRvU2Nyb2xsKFwibGVmdFwiKX1jYXRjaCh0KXtyZXR1cm4gdm9pZCB3aW5kb3cuc2V0VGltZW91dChlLDApfW4oKX19KCkpLFEud2smJiFmdW5jdGlvbiBpKCl7cmV0dXJuIHE/dm9pZCAwOi9sb2FkZWR8Y29tcGxldGUvLnRlc3Qoai5yZWFkeVN0YXRlKT92b2lkIG4oKTp2b2lkIHdpbmRvdy5zZXRUaW1lb3V0KGksMCl9KCkpKX0oKSxWWzBdPWZ1bmN0aW9uKCl7WT9vKCk6cygpfSxmdW5jdGlvbigpe1EuaWUmJndpbmRvdy5hdHRhY2hFdmVudChcIm9udW5sb2FkXCIsZnVuY3Rpb24oKXtmb3IodmFyIHQ9Sy5sZW5ndGgsZT0wO3Q+ZTtlKyspS1tlXVswXS5kZXRhY2hFdmVudChLW2VdWzFdLEtbZV1bMl0pO2Zvcih2YXIgbj1XLmxlbmd0aCxpPTA7bj5pO2krKylnKFdbaV0pO2Zvcih2YXIgciBpbiBRKVFbcl09bnVsbDtRPW51bGw7Zm9yKHZhciBvIGluIFApUFtvXT1udWxsO1A9bnVsbH0pfSgpLHQuZXhwb3J0cz1QPXtyZWdpc3Rlck9iamVjdDpmdW5jdGlvbih0LGUsbixpKXtpZihRLnczJiZ0JiZlKXt2YXIgcj17fTtyLmlkPXQsci5zd2ZWZXJzaW9uPWUsci5leHByZXNzSW5zdGFsbD1uLHIuY2FsbGJhY2tGbj1pLHpbei5sZW5ndGhdPXIsVCh0LCExKX1lbHNlIGkmJmkoe3N1Y2Nlc3M6ITEsaWQ6dH0pfSxnZXRPYmplY3RCeUlkOmZ1bmN0aW9uKHQpe3JldHVybiBRLnczP2EodCk6dm9pZCAwfSxlbWJlZFNXRjpmdW5jdGlvbih0LGUsbixyLG8scyxhLGMsbCxmKXt2YXIgcD1tKGUpLGc9e3N1Y2Nlc3M6ITEsaWQ6cH07US53MyYmIShRLndrJiZRLndrPDMxMikmJnQmJmUmJm4mJnImJm8/KFQocCwhMSksaShmdW5jdGlvbigpe24rPVwiXCIscis9XCJcIjt2YXIgaT17fTtpZihsJiZ0eXBlb2YgbD09PU4pZm9yKHZhciBfIGluIGwpaVtfXT1sW19dO2kuZGF0YT10LGkud2lkdGg9bixpLmhlaWdodD1yO3ZhciBtPXt9O2lmKGMmJnR5cGVvZiBjPT09Tilmb3IodmFyIHkgaW4gYyltW3ldPWNbeV07aWYoYSYmdHlwZW9mIGE9PT1OKWZvcih2YXIgdiBpbiBhKWlmKGEuaGFzT3duUHJvcGVydHkodikpe3ZhciBFPVo/ZW5jb2RlVVJJQ29tcG9uZW50KHYpOnYsUz1aP2VuY29kZVVSSUNvbXBvbmVudChhW3ZdKTphW3ZdO3R5cGVvZiBtLmZsYXNodmFycyE9az9tLmZsYXNodmFycys9XCImXCIrRStcIj1cIitTOm0uZmxhc2h2YXJzPUUrXCI9XCIrU31pZihBKG8pKXt2YXIgdz1kKGksbSxlKTtpLmlkPT09cCYmVChwLCEwKSxnLnN1Y2Nlc3M9ITAsZy5yZWY9dyxnLmlkPXcuaWR9ZWxzZXtpZihzJiZ1KCkpcmV0dXJuIGkuZGF0YT1zLHZvaWQgaChpLG0sZSxmKTtUKHAsITApfWYmJmYoZyl9KSk6ZiYmZihnKX0sc3dpdGNoT2ZmQXV0b0hpZGVTaG93OmZ1bmN0aW9uKCl7JD0hMX0sZW5hYmxlVXJpRW5jb2Rpbmc6ZnVuY3Rpb24odCl7Wj10eXBlb2YgdD09PWs/ITA6dH0sdWE6USxnZXRGbGFzaFBsYXllclZlcnNpb246ZnVuY3Rpb24oKXtyZXR1cm57bWFqb3I6US5wdlswXSxtaW5vcjpRLnB2WzFdLHJlbGVhc2U6US5wdlsyXX19LGhhc0ZsYXNoUGxheWVyVmVyc2lvbjpBLGNyZWF0ZVNXRjpmdW5jdGlvbih0LGUsbil7cmV0dXJuIFEudzM/ZCh0LGUsbik6dm9pZCAwfSxzaG93RXhwcmVzc0luc3RhbGw6ZnVuY3Rpb24odCxlLG4saSl7US53MyYmdSgpJiZoKHQsZSxuLGkpfSxyZW1vdmVTV0Y6ZnVuY3Rpb24odCl7US53MyYmZyh0KX0sY3JlYXRlQ1NTOmZ1bmN0aW9uKHQsZSxuLGkpe1EudzMmJncodCxlLG4saSl9LGFkZERvbUxvYWRFdmVudDppLGFkZExvYWRFdmVudDpyLGdldFF1ZXJ5UGFyYW1WYWx1ZTpmdW5jdGlvbih0KXt2YXIgZT1qLmxvY2F0aW9uLnNlYXJjaHx8ai5sb2NhdGlvbi5oYXNoO2lmKGUpe2lmKC9cXD8vLnRlc3QoZSkmJihlPWUuc3BsaXQoXCI/XCIpWzFdKSxudWxsPT10KXJldHVybiBiKGUpO2Zvcih2YXIgbj1lLnNwbGl0KFwiJlwiKSxpPTA7aTxuLmxlbmd0aDtpKyspaWYobltpXS5zdWJzdHJpbmcoMCxuW2ldLmluZGV4T2YoXCI9XCIpKT09PXQpcmV0dXJuIGIobltpXS5zdWJzdHJpbmcobltpXS5pbmRleE9mKFwiPVwiKSsxKSl9cmV0dXJuXCJcIn0sZXhwcmVzc0luc3RhbGxDYWxsYmFjazpmdW5jdGlvbigpe2lmKFgpe3ZhciB0PXkoVSk7dCYmSSYmKHQucGFyZW50Tm9kZS5yZXBsYWNlQ2hpbGQoSSx0KSxMJiYoVChMLCEwKSxRLmllJiYoSS5zdHlsZS5kaXNwbGF5PVwiYmxvY2tcIikpLE8mJk8oUikpLFg9ITF9fSx2ZXJzaW9uOlwiMi4zXCJ9fSxmdW5jdGlvbih0LGUsbil7ZnVuY3Rpb24gaSh0LGUsbixpKXtpZihuIT09cyYmbiE9PW8mJnZvaWQgMCE9PW4pdGhyb3cgbmV3IEVycm9yKFwiQ2FuIG5vdCB1c2UgdGhlIHByb3ZpZGVkIGJhc2UgY2xhc3NcIik7dGhpcy5fYmFzZWNsYXNzPW58fG8sdGhpcy5fYmFzZWNsYXNzLmNhbGwodGhpcyx0LGUsaXx8XCJITFNBdWRpb1BsYXllclwiKSx0aGlzLl9zZWVrUG9zaXRpb249MH12YXIgcj1uKDEpLG89big0Nikscz1uKDQ4KSxhPW4oMzgpO3QuZXhwb3J0cz1pLHIoaS5wcm90b3R5cGUsby5wcm90b3R5cGUpLGkucHJvdG90eXBlLnNlZWs9ZnVuY3Rpb24odCl7dGhpcy5fYmFzZWNsYXNzLnByb3RvdHlwZS5zZWVrLmFwcGx5KHRoaXMsYXJndW1lbnRzKSx0aGlzLl9pc0luT25lT2ZTdGF0ZXMoYS5MT0FESU5HLGEuU0VFS0lORykmJih0aGlzLl9zZWVrUG9zaXRpb249dCl9LGkucHJvdG90eXBlLmdldEN1cnJlbnRQb3NpdGlvbj1mdW5jdGlvbigpe2lmKHRoaXMuX2lzSW5PbmVPZlN0YXRlcyhhLkxPQURJTkcpJiZ0aGlzLl9zZWVrUG9zaXRpb24+MClyZXR1cm4gdGhpcy5fc2Vla1Bvc2l0aW9uO2lmKHRoaXMuX2lzSW5PbmVPZlN0YXRlcyhhLlBMQVlJTkcsYS5TRUVLSU5HKSl7aWYodGhpcy5fc2Vla1Bvc2l0aW9uPj10aGlzLl9jdXJyZW50UG9zaXRpb24pcmV0dXJuIHRoaXMuX3NlZWtQb3NpdGlvbjt0aGlzLl9zZWVrUG9zaXRpb249MH1yZXR1cm4gdGhpcy5fYmFzZWNsYXNzLnByb3RvdHlwZS5nZXRDdXJyZW50UG9zaXRpb24uYXBwbHkodGhpcyxhcmd1bWVudHMpfX0sZnVuY3Rpb24odCxlLG4pe2Z1bmN0aW9uIGkodCxlLG4pe3RoaXMuX2R1cmF0aW9uPTAsdGhpcy5fY3VycmVudFBvc2l0aW9uPTAsdGhpcy5fbG9hZGVkUG9zaXRpb249MCxoLnByb3RvdHlwZS5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMsbnx8XCJIVE1MNUF1ZGlvUGxheWVyXCIsdCxlKSx0aGlzLl9pc0xvYWRlZD0hMSx0aGlzLl9wcmV2Q3VycmVudFBvc2l0aW9uPTAsdGhpcy5fcHJldkNoZWNrVGltZT0wLHRoaXMuX3Bvc2l0aW9uVXBkYXRlVGltZXI9MCx0aGlzLl9wbGF5UmVxdWVzdGVkPSExLHRoaXMuX3N0YXJ0RnJvbVBvc2l0aW9uPTAsdGhpcy5nZXREZXNjcmlwdG9yKCkuZHVyYXRpb24mJih0aGlzLl9kdXJhdGlvbj10aGlzLmdldERlc2NyaXB0b3IoKS5kdXJhdGlvbiksdGhpcy5fYmluZEhhbmRsZXJzKCksdGhpcy5faW5pdE1lZGlhRWxlbWVudCgpLHRoaXMudXBkYXRlU3RhdGUocy5JRExFKX12YXIgcj1uKDEpLG89big0NykuYmluZEFsbCxzPW4oMzgpLGE9bigzOSksdT1uKDQzKSxoPW4oMzUpLGM9bigxNik7dC5leHBvcnRzPWkscihpLnByb3RvdHlwZSxoLnByb3RvdHlwZSksaS5NZWRpYUFQSUV2ZW50cz1bXCJlbmRlZFwiLFwicGxheVwiLFwicGxheWluZ1wiLFwicGF1c2VcIixcInNlZWtpbmdcIixcIndhaXRpbmdcIixcInNlZWtlZFwiLFwiZXJyb3JcIixcImxvYWRlZGRhdGFcIixcImxvYWRlZG1ldGFkYXRhXCJdLGkucHJvdG90eXBlLnBsYXk9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuX2lzSW5PbmVPZlN0YXRlcyhzLkVSUk9SLHMuREVBRCk/dm9pZCB0aGlzLl9sb2dnZXIubG9nKFwicGxheSBjYWxsZWQgYnV0IHN0YXRlIGlzIEVSUk9SIG9yIERFQURcIik6KHRoaXMuX2xvZ2dlci5sb2coXCJwbGF5IGZyb20gXCIrdCksdGhpcy5fc3RhcnRGcm9tUG9zaXRpb249dHx8MCx0aGlzLl9wbGF5UmVxdWVzdGVkPSEwLHRoaXMuX2lzSW5PbmVPZlN0YXRlcyhzLlBBVVNFRCxzLkVOREVEKT92b2lkIHRoaXMucmVzdW1lKCk6KHRoaXMudXBkYXRlU3RhdGUocy5MT0FESU5HKSx0aGlzLl9odG1sNUF1ZGlvLnJlYWR5U3RhdGU+MCYmdGhpcy5fb25Mb2FkZWRNZXRhZGF0YSgpLHRoaXMuX2h0bWw1QXVkaW8ucmVhZHlTdGF0ZT4xJiZ0aGlzLl9vbkxvYWRlZCgpLHZvaWQodGhpcy5faXNMb2FkZWQ/dGhpcy5fcGxheUFmdGVyTG9hZGVkKCk6dGhpcy5vbmNlKGEuREFUQSx0aGlzLl9wbGF5QWZ0ZXJMb2FkZWQpKSkpfSxpLnByb3RvdHlwZS5wYXVzZT1mdW5jdGlvbigpe3RoaXMuX2lzSW5PbmVPZlN0YXRlcyhzLkVSUk9SLHMuREVBRCl8fCh0aGlzLl9sb2dnZXIubG9nKFwicGF1c2VcIiksdGhpcy5fcGxheVJlcXVlc3RlZD0hMSx0aGlzLl9odG1sNUF1ZGlvJiZ0aGlzLl9odG1sNUF1ZGlvLnBhdXNlKCkpfSxpLnByb3RvdHlwZS5zZWVrPWZ1bmN0aW9uKHQpe3ZhciBlLG49ITEsaT10LzFlMyxyPXRoaXMuX2h0bWw1QXVkaW8uc2Vla2FibGU7aWYoIXRoaXMuX2lzSW5PbmVPZlN0YXRlcyhzLkVSUk9SLHMuREVBRCkpe2lmKCF0aGlzLl9pc0xvYWRlZClyZXR1cm4gdGhpcy5vbmNlKGEuREFUQSxmdW5jdGlvbigpe3RoaXMuc2Vlayh0KX0pLHZvaWQgdGhpcy5fbG9nZ2VyLmxvZyhcInBvc3Rwb25pbmcgc2VlayBmb3Igd2hlbiBsb2FkZWRcIik7aWYoYy5pc0lFMTBNb2JpbGUpbj0hMDtlbHNlIGZvcihlPTA7ZTxyLmxlbmd0aDtlKyspaWYoaTw9ci5lbmQoZSkmJmk+PXIuc3RhcnQoZSkpe249ITA7YnJlYWt9aWYoIW4pcmV0dXJuIHZvaWQgdGhpcy5fbG9nZ2VyLmxvZyhcImNhbiBub3Qgc2Vla1wiKTt0aGlzLl9sb2dnZXIubG9nKFwic2Vla1wiKSx0aGlzLnVwZGF0ZVN0YXRlKHMuU0VFS0lORyksdGhpcy5faHRtbDVBdWRpby5jdXJyZW50VGltZT1pLHRoaXMuX2N1cnJlbnRQb3NpdGlvbj10LHRoaXMuX2xhc3RNZWRpYUNsb2NrQ2hlY2s9bnVsbH19LGkucHJvdG90eXBlLnJlc3VtZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9pc0luT25lT2ZTdGF0ZXMocy5FUlJPUixzLkRFQUQpP3ZvaWQgdGhpcy5fbG9nZ2VyLmxvZyhcInJlc3VtZSBjYWxsZWQgYnV0IHN0YXRlIGlzIEVSUk9SIG9yIERFQURcIik6KHRoaXMuX2xvZ2dlci5sb2coXCJyZXN1bWVcIiksdm9pZCh0aGlzLmdldFN0YXRlKCk9PT1zLlBBVVNFRD8odGhpcy51cGRhdGVTdGF0ZShzLlBMQVlJTkcpLHRoaXMuX2h0bWw1QXVkaW8ucGxheSh0aGlzLl9odG1sNUF1ZGlvLmN1cnJlbnRUaW1lKSk6dGhpcy5nZXRTdGF0ZSgpPT09cy5FTkRFRCYmdGhpcy5faHRtbDVBdWRpby5wbGF5KDApKSl9LGkucHJvdG90eXBlLnNldFZvbHVtZT1mdW5jdGlvbih0KXt0aGlzLl9odG1sNUF1ZGlvJiYodGhpcy5faHRtbDVBdWRpby52b2x1bWU9dCl9LGkucHJvdG90eXBlLmdldFZvbHVtZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9odG1sNUF1ZGlvP3RoaXMuX2h0bWw1QXVkaW8udm9sdW1lOjF9LGkucHJvdG90eXBlLnNldE11dGU9ZnVuY3Rpb24odCl7dGhpcy5faHRtbDVBdWRpbyYmKHRoaXMuX2h0bWw1QXVkaW8ubXV0ZWQ9dCl9LGkucHJvdG90eXBlLmdldE11dGU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5faHRtbDVBdWRpbz90aGlzLl9odG1sNUF1ZGlvLm11dGVkOiExfSxpLnByb3RvdHlwZS5raWxsPWZ1bmN0aW9uKCl7dGhpcy5fc3RhdGUhPT1zLkRFQUQmJih0aGlzLl9sb2dnZXIubG9nKFwia2lsbGluZyAuLi5cIiksdGhpcy5fcmVzZXRQb3NpdGlvbkludGVydmFsKCExKSx0aGlzLl9wbGF5UmVxdWVzdGVkPSExLHRoaXMuX3RvZ2dsZUV2ZW50TGlzdGVuZXJzKCExKSx0aGlzLnBhdXNlKCksZGVsZXRlIHRoaXMuX2h0bWw1QXVkaW8sdGhpcy51cGRhdGVTdGF0ZShzLkRFQUQpLHRoaXMuX2xvZ2dlci5sb2coXCJkZWFkXCIpKX0saS5wcm90b3R5cGUuZ2V0RXJyb3JNZXNzYWdlPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2Vycm9yTWVzc2FnZX0saS5wcm90b3R5cGUuZ2V0RXJyb3JJRD1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9lcnJvcklEfSxpLnByb3RvdHlwZS5fYmluZEhhbmRsZXJzPWZ1bmN0aW9uKCl7byh0aGlzLFtcIl9vblBvc2l0aW9uQ2hhbmdlXCIsXCJfb25IdG1sNU1lZGlhRXZlbnRcIixcIl9vbkxvYWRlZFwiLFwiX29uTG9hZGVkTWV0YWRhdGFcIl0pfSxpLnByb3RvdHlwZS5faW5pdE1lZGlhRWxlbWVudD1mdW5jdGlvbigpe3RoaXMuX2h0bWw1QXVkaW89Yy5jcmVhdGVBdWRpb0VsZW1lbnQoKSx0aGlzLl9odG1sNUF1ZGlvLmlkPXRoaXMuZ2V0U2V0dGluZ3MoKS5hdWRpb09iamVjdElEK1wiX1wiK3RoaXMuZ2V0SWQoKSx0aGlzLl9odG1sNUF1ZGlvLnByZWxvYWQ9XCJhdXRvXCIsdGhpcy5faHRtbDVBdWRpby50eXBlPXRoaXMuZ2V0RGVzY3JpcHRvcigpLm1pbWVUeXBlLHRoaXMuX2h0bWw1QXVkaW8uc3JjPXRoaXMuZ2V0RGVzY3JpcHRvcigpLnNyYyx0aGlzLl9odG1sNUF1ZGlvLmxvYWQoKSx0aGlzLl90b2dnbGVFdmVudExpc3RlbmVycyghMCl9LGkucHJvdG90eXBlLl9wbGF5QWZ0ZXJMb2FkZWQ9ZnVuY3Rpb24oKXt0aGlzLl9wbGF5UmVxdWVzdGVkJiYodGhpcy5fdHJ5U2Vla1RvU3RhcnRQb3NpdGlvbigpLHRoaXMuX2h0bWw1QXVkaW8ucGxheSgpKX0saS5wcm90b3R5cGUuX2lzSW5PbmVPZlN0YXRlcz1mdW5jdGlvbigpe2Zvcih2YXIgdCBpbiBhcmd1bWVudHMpaWYoYXJndW1lbnRzW3RdPT09dGhpcy5fc3RhdGUpcmV0dXJuITA7cmV0dXJuITF9LGkucHJvdG90eXBlLl90b2dnbGVFdmVudExpc3RlbmVycz1mdW5jdGlvbih0KXtpZih0aGlzLl9odG1sNUF1ZGlvKXt2YXIgZT10P1wiYWRkRXZlbnRMaXN0ZW5lclwiOlwicmVtb3ZlRXZlbnRMaXN0ZW5lclwiO2kuTWVkaWFBUElFdmVudHMuZm9yRWFjaChmdW5jdGlvbih0KXtzd2l0Y2godCl7Y2FzZVwibG9hZGVkZGF0YVwiOnRoaXMuX2h0bWw1QXVkaW9bZV0oXCJsb2FkZWRkYXRhXCIsdGhpcy5fb25Mb2FkZWQpO2JyZWFrO2Nhc2VcImxvYWRlZG1ldGFkYXRhXCI6dGhpcy5faHRtbDVBdWRpb1tlXShcImxvYWRlZG1ldGFkYXRhXCIsdGhpcy5fb25Mb2FkZWRNZXRhZGF0YSk7YnJlYWs7ZGVmYXVsdDp0aGlzLl9odG1sNUF1ZGlvW2VdKHQsdGhpcy5fb25IdG1sNU1lZGlhRXZlbnQpfX0sdGhpcyl9fSxpLnByb3RvdHlwZS5fdHJ5U2Vla1RvU3RhcnRQb3NpdGlvbj1mdW5jdGlvbigpe3ZhciB0O3JldHVybiB0aGlzLl9zdGFydEZyb21Qb3NpdGlvbj4wJiYodGhpcy5fbG9nZ2VyLmxvZyhcInNlZWsgdG8gc3RhcnQgcG9zaXRpb246IFwiK3RoaXMuX3N0YXJ0RnJvbVBvc2l0aW9uKSx0PXRoaXMuX3N0YXJ0RnJvbVBvc2l0aW9uLzFlMyx0aGlzLl9odG1sNUF1ZGlvLmN1cnJlbnRUaW1lPXQsdGhpcy5faHRtbDVBdWRpby5jdXJyZW50VGltZT09PXQpPyh0aGlzLl9sYXN0TWVkaWFDbG9ja0NoZWNrPW51bGwsdGhpcy5fY3VycmVudFBvc2l0aW9uPXRoaXMuX3N0YXJ0RnJvbVBvc2l0aW9uLHRoaXMuX3N0YXJ0RnJvbVBvc2l0aW9uPTAsITApOiExfSxpLnByb3RvdHlwZS5fb25Mb2FkZWQ9ZnVuY3Rpb24oKXt0aGlzLl9sb2dnZXIubG9nKFwiSFRNTDUgbWVkaWEgbG9hZGVkZGF0YSBldmVudFwiKSx0aGlzLnRyaWdnZXIoYS5EQVRBLHRoaXMpfSxpLnByb3RvdHlwZS5fb25Mb2FkZWRNZXRhZGF0YT1mdW5jdGlvbigpe3RoaXMuX2xvZ2dlci5sb2coXCJIVE1MNSBtZWRpYSBsb2FkZWRtZXRhZGF0YSBldmVudFwiKSwodm9pZCAwPT09dGhpcy5fZHVyYXRpb258fDA9PT10aGlzLl9kdXJhdGlvbikmJih0aGlzLl9kdXJhdGlvbj0xZTMqdGhpcy5faHRtbDVBdWRpby5kdXJhdGlvbiksdGhpcy5fbG9hZGVkUG9zaXRpb249dGhpcy5fZHVyYXRpb24sdGhpcy5faXNMb2FkZWQ9ITAsdGhpcy50cmlnZ2VyKGEuTUVUQURBVEEsdGhpcyl9LGkucHJvdG90eXBlLl9yZXNldFBvc2l0aW9uSW50ZXJ2YWw9ZnVuY3Rpb24odCl7d2luZG93LmNsZWFySW50ZXJ2YWwodGhpcy5fcG9zaXRpb25VcGRhdGVUaW1lciksdCYmKHRoaXMuX3Bvc2l0aW9uVXBkYXRlVGltZXI9d2luZG93LnNldEludGVydmFsKHRoaXMuX29uUG9zaXRpb25DaGFuZ2UsdGhpcy5nZXRTZXR0aW5ncygpLnVwZGF0ZUludGVydmFsKSl9LGkucHJvdG90eXBlLl9vblBvc2l0aW9uQ2hhbmdlPWZ1bmN0aW9uKCl7aWYoIXRoaXMuX2lzSW5PbmVPZlN0YXRlcyhzLkRFQUQpKXt2YXIgdDtyZXR1cm4gRGF0ZS5ub3coKSx0aGlzLl9jdXJyZW50UG9zaXRpb249MWUzKnRoaXMuX2h0bWw1QXVkaW8uY3VycmVudFRpbWUsdGhpcy50cmlnZ2VyKGEuUE9TSVRJT05fQ0hBTkdFLHRoaXMuZ2V0Q3VycmVudFBvc2l0aW9uKCksdGhpcy5fbG9hZGVkUG9zaXRpb24sdGhpcy5fZHVyYXRpb24sdGhpcyksdGhpcy5faXNJbk9uZU9mU3RhdGVzKHMuUExBWUlORyxzLkxPQURJTkcpPzAhPT10aGlzLl9kdXJhdGlvbiYmKHRoaXMuX2N1cnJlbnRQb3NpdGlvbj50aGlzLl9kdXJhdGlvbnx8dGhpcy5fY3VycmVudFBvc2l0aW9uPnRoaXMuX2xvYWRlZFBvc2l0aW9uJiYhYy5pc0lFMTBNb2JpbGUpP3ZvaWQgdGhpcy5fb25IdG1sNU1lZGlhRXZlbnQoe3R5cGU6XCJlbmRlZFwifSk6dGhpcy5nZXRTdGF0ZSgpIT09cy5QTEFZSU5HfHx0aGlzLl9tZWRpYXNIYXNQcm9ncmVzc2VkKCk/dm9pZCh0aGlzLmdldFN0YXRlKCkhPT1zLlBMQVlJTkcmJnRoaXMuX21lZGlhc0hhc1Byb2dyZXNzZWQoKSYmdGhpcy51cGRhdGVTdGF0ZShzLlBMQVlJTkcpKToodGhpcy5fbG9nZ2VyLmxvZyhcIm1lZGlhIGNsb2NrIGNoZWNrIGZhaWxlZCwgcGxheWhlYWQgaXMgbm90IGFkdmFuY2luZyBhbnltb3JlXCIpLHZvaWQgdGhpcy51cGRhdGVTdGF0ZShzLkxPQURJTkcpKTp2b2lkKHRoaXMuX3N0YXRlPT09cy5TRUVLSU5HJiZ0PjAmJnRoaXMudXBkYXRlU3RhdGUocy5QTEFZSU5HKSl9fSxpLnByb3RvdHlwZS5fbWVkaWFzSGFzUHJvZ3Jlc3NlZD1mdW5jdGlvbigpe3ZhciB0PSExLGU9RGF0ZS5ub3coKTtpZih0aGlzLl9sYXN0TWVkaWFDbG9ja0NoZWNrKXt2YXIgbj1lLXRoaXMuX2xhc3RNZWRpYUNsb2NrQ2hlY2ssaT10aGlzLl9jdXJyZW50UG9zaXRpb24tdGhpcy5fbGFzdE1lZGlhQ2xvY2tWYWx1ZTtpZiguMSpuPmkpe2lmKDA9PT1pJiY1MD5uKXJldHVybiEwO3Q9ITB9fXJldHVybiB0aGlzLl9sYXN0TWVkaWFDbG9ja1ZhbHVlPXRoaXMuX2N1cnJlbnRQb3NpdGlvbix0aGlzLl9sYXN0TWVkaWFDbG9ja0NoZWNrPWUsIXR9LGkucHJvdG90eXBlLl9vbkh0bWw1TWVkaWFFdmVudD1mdW5jdGlvbih0KXtzd2l0Y2godGhpcy5fbG9nZ2VyLmxvZyhcIkhUTUw1IG1lZGlhIGV2ZW50OiBcIit0LnR5cGUpLHQudHlwZSl7Y2FzZVwicGxheWluZ1wiOmlmKHRoaXMuX3RyeVNlZWtUb1N0YXJ0UG9zaXRpb24oKSlicmVhazt0aGlzLl9vblBvc2l0aW9uQ2hhbmdlKCksdGhpcy5fcmVzZXRQb3NpdGlvbkludGVydmFsKCEwKSx0aGlzLnVwZGF0ZVN0YXRlKHMuUExBWUlORyk7YnJlYWs7Y2FzZVwicGF1c2VcIjp0aGlzLl9vblBvc2l0aW9uQ2hhbmdlKCksdGhpcy5fcmVzZXRQb3NpdGlvbkludGVydmFsKCExKSx0aGlzLnVwZGF0ZVN0YXRlKHMuUEFVU0VEKTticmVhaztjYXNlXCJlbmRlZFwiOnRoaXMuX2N1cnJlbnRQb3NpdGlvbj10aGlzLl9sb2FkZWRQb3NpdGlvbj10aGlzLl9kdXJhdGlvbix0aGlzLl9yZXNldFBvc2l0aW9uSW50ZXJ2YWwoITEpLHRoaXMudXBkYXRlU3RhdGUocy5FTkRFRCk7YnJlYWs7Y2FzZVwid2FpdGluZ1wiOmlmKHRoaXMuZ2V0U3RhdGUoKT09PXMuU0VFS0lORylicmVhazt0aGlzLnVwZGF0ZVN0YXRlKHMuTE9BRElORyk7YnJlYWs7Y2FzZVwic2Vla2luZ1wiOnRoaXMudXBkYXRlU3RhdGUocy5TRUVLSU5HKTticmVhaztjYXNlXCJzZWVrZWRcIjp0aGlzLl9odG1sNUF1ZGlvLnBhdXNlZD90aGlzLnVwZGF0ZVN0YXRlKHMuUEFVU0VEKTp0aGlzLnVwZGF0ZVN0YXRlKHMuUExBWUlORyksdGhpcy5fb25Qb3NpdGlvbkNoYW5nZSh0KTticmVhaztjYXNlXCJlcnJvclwiOnRoaXMuX2Vycm9yKHRoaXMuX2h0bWw1QXVkaW9FcnJvckNvZGVUb0Vycm9ySWQoKSwhMCl9fSxpLnByb3RvdHlwZS5faHRtbDVBdWRpb0Vycm9yQ29kZVRvRXJyb3JJZD1mdW5jdGlvbigpe3JldHVybnsxOnUuSFRNTDVfQVVESU9fQUJPUlRFRCwyOnUuSFRNTDVfQVVESU9fTkVUV09SSywzOnUuSFRNTDVfQVVESU9fREVDT0RFLDQ6dS5IVE1MNV9BVURJT19TUkNfTk9UX1NVUFBPUlRFRH1bdGhpcy5faHRtbDVBdWRpby5lcnJvci5jb2RlXX0saS5wcm90b3R5cGUuX2Vycm9yPWZ1bmN0aW9uKHQsZSl7dmFyIG49XCJlcnJvcjogXCI7ZSYmKG49XCJlcnJvciAobmF0aXZlKTogXCIpLHRoaXMuX2Vycm9ySUQ9dCx0aGlzLl9lcnJvck1lc3NhZ2U9dGhpcy5fZ2V0RXJyb3JNZXNzYWdlKHRoaXMuX2Vycm9ySUQpLHRoaXMuX2xvZ2dlci5sb2cobit0aGlzLl9lcnJvcklEK1wiIFwiK3RoaXMuX2Vycm9yTWVzc2FnZSksdGhpcy51cGRhdGVTdGF0ZShzLkVSUk9SKSx0aGlzLl90b2dnbGVFdmVudExpc3RlbmVycyghMSl9LGkucHJvdG90eXBlLl9nZXRFcnJvck1lc3NhZ2U9ZnVuY3Rpb24odCl7dmFyIGU9e307cmV0dXJuIGVbdS5IVE1MNV9BVURJT19BQk9SVEVEXT1cIlRoZSBmZXRjaGluZyBwcm9jZXNzIGZvciB0aGUgbWVkaWEgcmVzb3VyY2Ugd2FzIGFib3J0ZWQgYnkgdGhlIHVzZXIgYWdlbnQgYXQgdGhlIHVzZXIncyByZXF1ZXN0LlwiLGVbdS5IVE1MNV9BVURJT19ORVRXT1JLXT1cIkEgbmV0d29yayBlcnJvciBvZiBzb21lIGRlc2NyaXB0aW9uIGNhdXNlZCB0aGUgdXNlciBhZ2VudCB0byBzdG9wIGZldGNoaW5nIHRoZSBtZWRpYSByZXNvdXJjZSwgYWZ0ZXIgdGhlIHJlc291cmNlIHdhcyBlc3RhYmxpc2hlZCB0byBiZSB1c2FibGUuXCIsZVt1LkhUTUw1X0FVRElPX0RFQ09ERV09XCJBbiBlcnJvciBvZiBzb21lIGRlc2NyaXB0aW9uIG9jY3VycmVkIHdoaWxlIGRlY29kaW5nIHRoZSBtZWRpYSByZXNvdXJjZSwgYWZ0ZXIgdGhlIHJlc291cmNlIHdhcyBlc3RhYmxpc2hlZCB0byBiZSB1c2FibGUuXCIsZVt1LkhUTUw1X0FVRElPX1NSQ19OT1RfU1VQUE9SVEVEXT1cIlRoZSBtZWRpYSByZXNvdXJjZSBpbmRpY2F0ZWQgYnkgdGhlIHNyYyBhdHRyaWJ1dGUgd2FzIG5vdCBzdWl0YWJsZS5cIixlW3RdfX0sZnVuY3Rpb24odCxlKXtmdW5jdGlvbiBuKHQsZSl7dmFyIG49bmV3IFVpbnQ4QXJyYXkodC5ieXRlTGVuZ3RoK2UuYnl0ZUxlbmd0aCk7cmV0dXJuIG4uc2V0KG5ldyBVaW50OEFycmF5KHQpLDApLG4uc2V0KG5ldyBVaW50OEFycmF5KGUpLHQuYnl0ZUxlbmd0aCksbn10LmV4cG9ydHM9e2JpbmRBbGw6ZnVuY3Rpb24odCxlKXtlLmZvckVhY2goZnVuY3Rpb24oZSl7dFtlXT10W2VdLmJpbmQodCl9KX0sY29uY2F0QnVmZmVyc1RvVWludDhBcnJheTpufX0sZnVuY3Rpb24odCxlLG4pe2Z1bmN0aW9uIGkodCxlLG4pe3UucHJvdG90eXBlLmNvbnN0cnVjdG9yLmNhbGwodGhpcyx0LGUsbnx8XCJIVE1MNVNpbmdsZUF1ZGlvUGxheWVyXCIpfXZhciByLG89bigxKSxzPW4oMTYpLGE9bigzOSksdT1uKDQ2KSxoPW4oMzgpLGM9e307dC5leHBvcnRzPWksbyhpLnByb3RvdHlwZSx1LnByb3RvdHlwZSksaS5fb25Mb2FkZWQ9ZnVuY3Rpb24odCl7aS5fcGF1c2VPdGhlcnNBbmRGb3J3YXJkRXZlbnQoXCJfb25Mb2FkZWRcIix0KX0saS5fb25Mb2FkZWRNZXRhZGF0YT1mdW5jdGlvbih0KXtpLl9wYXVzZU90aGVyc0FuZEZvcndhcmRFdmVudChcIl9vbkxvYWRlZE1ldGFkYXRhXCIsdCl9LGkuX29uSHRtbDVNZWRpYUV2ZW50PWZ1bmN0aW9uKHQpe2kuX3BhdXNlT3RoZXJzQW5kRm9yd2FyZEV2ZW50KFwiX29uSHRtbDVNZWRpYUV2ZW50XCIsdCl9LGkuX3BhdXNlT3RoZXJzQW5kRm9yd2FyZEV2ZW50PWZ1bmN0aW9uKHQsZSl7T2JqZWN0LmtleXMoYykuZm9yRWFjaChmdW5jdGlvbihuKXt2YXIgaT1jW25dO249PT1yP2lbdF0oZSk6aS5wYXVzZSgpfSl9LGkucHJvdG90eXBlLl9pbml0TWVkaWFFbGVtZW50PWZ1bmN0aW9uKCl7aS5faHRtbDVBdWRpb3x8KGkuX2h0bWw1QXVkaW89cy5jcmVhdGVBdWRpb0VsZW1lbnQoKSxpLl9odG1sNUF1ZGlvLmlkPXRoaXMuZ2V0U2V0dGluZ3MoKS5hdWRpb09iamVjdElEK1wiX1NpbmdsZVwiLHUucHJvdG90eXBlLl90b2dnbGVFdmVudExpc3RlbmVycy5jYWxsKGksITApKSx0aGlzLl90b2dnbGVFdmVudExpc3RlbmVycyghMCksdGhpcy5faHRtbDVBdWRpbz1pLl9odG1sNUF1ZGlvLHRoaXMuX2xvZ2dlci5sb2coXCJpbml0aWFsaXplZCBwbGF5ZXIgZm9yIHVzZSB3aXRoOiBcIit0aGlzLmdldERlc2NyaXB0b3IoKS5zcmMpfSxpLnByb3RvdHlwZS5fdG9nZ2xlRXZlbnRMaXN0ZW5lcnM9ZnVuY3Rpb24odCl7dD9jW3RoaXMuZ2V0SWQoKV09dGhpczpkZWxldGUgY1t0aGlzLmdldElkKCldfSxpLnByb3RvdHlwZS5wbGF5PWZ1bmN0aW9uKHQpe3RoaXMuX2xvZ2dlci5sb2coXCJzaW5nbGV0b24gcGxheSBhdDogXCIrdCksKDA9PT10aGlzLl9odG1sNUF1ZGlvLnJlYWR5U3RhdGV8fHRoaXMuZ2V0RGVzY3JpcHRvcigpLnNyYyE9PXRoaXMuX2h0bWw1QXVkaW8uc3JjKSYmKHRoaXMuX2xvZ2dlci5sb2coXCJzZXR0aW5nIHVwIGF1ZGlvIGVsZW1lbnQgZm9yIHVzZSB3aXRoOiBcIit0aGlzLmdldERlc2NyaXB0b3IoKS5zcmMpLHI9dGhpcy5nZXRJZCgpLHRoaXMuX2lzSW5PbmVPZlN0YXRlcyhoLlBBVVNFRCkmJih0aGlzLl9sb2dnZXIubG9nKFwic3RhdGUgd2FzIHBhdXNlZFwiKSx0PXRoaXMuX2N1cnJlbnRQb3NpdGlvbnx8MCksdGhpcy5fdG9nZ2xlRXZlbnRMaXN0ZW5lcnMoITApLHRoaXMuX2h0bWw1QXVkaW8ucHJlbG9hZD1cImF1dG9cIix0aGlzLl9odG1sNUF1ZGlvLnR5cGU9dGhpcy5nZXREZXNjcmlwdG9yKCkubWltZVR5cGUsdGhpcy5faHRtbDVBdWRpby5zcmM9dGhpcy5nZXREZXNjcmlwdG9yKCkuc3JjLHRoaXMuX2h0bWw1QXVkaW8ubG9hZCgpKSx1LnByb3RvdHlwZS5wbGF5LmNhbGwodGhpcyx0KX0saS5wcm90b3R5cGUucmVzdW1lPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2lzSW5PbmVPZlN0YXRlcyhoLkVSUk9SLGguREVBRCk/dm9pZCAwOnIhPT10aGlzLmdldElkKCk/dm9pZCB0aGlzLnBsYXkodGhpcy5fY3VycmVudFBvc2l0aW9uKTp2b2lkIHUucHJvdG90eXBlLnJlc3VtZS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9LGkucHJvdG90eXBlLnBhdXNlPWZ1bmN0aW9uKCl7dGhpcy5faXNJbk9uZU9mU3RhdGVzKGguRVJST1IsaC5ERUFEKXx8KHRoaXMuX2xvZ2dlci5sb2coXCJzaW5nbGV0b24gcGF1c2VcIikscj09PXRoaXMuZ2V0SWQoKT91LnByb3RvdHlwZS5wYXVzZS5hcHBseSh0aGlzLGFyZ3VtZW50cyk6KHRoaXMuX3RvZ2dsZUV2ZW50TGlzdGVuZXJzKCExKSx0aGlzLl9pc0luT25lT2ZTdGF0ZXMoaC5QQVVTRUQpfHx0aGlzLnVwZGF0ZVN0YXRlKGguUEFVU0VEKSx0aGlzLl9yZXNldFBvc2l0aW9uSW50ZXJ2YWwoITEpKSl9LGkucHJvdG90eXBlLnNlZWs9ZnVuY3Rpb24odCl7cmV0dXJuIHIhPT10aGlzLmdldElkKCk/KHRoaXMuX2N1cnJlbnRQb3NpdGlvbj10LHZvaWQgdGhpcy50cmlnZ2VyKGEuUE9TSVRJT05fQ0hBTkdFLHRoaXMuX2N1cnJlbnRQb3NpdGlvbix0aGlzLl9sb2FkZWRQb3NpdGlvbix0aGlzLl9kdXJhdGlvbix0aGlzKSk6dm9pZCB1LnByb3RvdHlwZS5zZWVrLmFwcGx5KHRoaXMsYXJndW1lbnRzKX19LGZ1bmN0aW9uKHQsZSxuKXtmdW5jdGlvbiBpKHQsZSl7by5jYWxsKHRoaXMsdCxlLHMsXCJITFNTaW5nbGVBdWRpb1BsYXllclwiKX12YXIgcj1uKDEpLG89big0NSkscz1uKDQ4KTt0LmV4cG9ydHM9aSxyKGkucHJvdG90eXBlLHMucHJvdG90eXBlLG8ucHJvdG90eXBlKX0sZnVuY3Rpb24odCxlLG4pe2Z1bmN0aW9uIGkodCxlKXtyZXR1cm4gdS5wcm90b3R5cGUuY29uc3RydWN0b3IuY2FsbCh0aGlzLFwiSExTTVNFUGxheWVyXCIsdCxlLHcoKSksbyh0aGlzLFtcIl9vblBvc2l0aW9uQ2hhbmdlXCIsXCJfb25QbGF5bGlzdExvYWRlZFwiLFwiX29uUGxheWxpc3RGYWlsZWRcIixcIl9vblNlZ21lbnRMb2FkZWRcIixcIl9vblNlZ21lbnRQcm9ncmVzc1wiLFwiX29uU2VnbWVudEZhaWxlZFwiLFwiX29uSHRtbDVNZWRpYUV2ZW50XCIsXCJfb25Mb2FkZWREYXRhXCIsXCJfb25Mb2FkZWRNZXRhZGF0YVwiLFwiX29uTWVkaWFTb3VyY2VBcHBlbmRcIixcIl9vbk1lZGlhU291cmNlUmVhZHlcIixcIl9vbk1lZGlhU291cmNlRGVzdHJveVwiLFwiX29uTWVkaWFTb3VyY2VFcnJvclwiXSksdGhpcy5fc3RyZWFtVXJsUHJvdmlkZXI9dGhpcy5nZXRTZXR0aW5ncygpLnN0cmVhbVVybFByb3ZpZGVyfHxudWxsLHRoaXMuX21pblByZUJ1ZmZlckxlbmd0aEZvclBsYXliYWNrPTVlMyx0aGlzLl9tYXhCdWZmZXJMZW5ndGg9M2U0LHRoaXMuX3N0cmVhbVVybFJldHJ5VGltZXI9bnVsbCx0aGlzLl9zdHJlYW1VcmxUaW1lc0ZhaWxlZD0wLHRoaXMuX3BsYXlsaXN0UmV0cnlUaW1lcj1udWxsLHRoaXMuX3BsYXlsaXN0VGltZXNGYWlsZWQ9MCx0aGlzLl9wbGF5bGlzdFJlZnJlc2hJblByb2dyZXNzPSExLHRoaXMuX2lzUGxheWxpc3RMb2FkZWQ9ITEsdGhpcy5fbG9hZE9uSW5pdD0hMSx0aGlzLl9zY2hlZHVsaW5nU2VnbWVudEluZGV4PS0xLHRoaXMuX3NlZ21lbnRzRG93bmxvYWRpbmc9W10sdGhpcy5fbmV4dFNjaGVkdWxpbmdUaW1lb3V0PW51bGwsdGhpcy5fbWltZVR5cGU9VCgpLHRoaXMuX21pbWVUeXBlPyh0aGlzLl9tc2VUb29sa2l0PW5ldyBsKHRoaXMuX2xvZ2dlcix0aGlzLl9taW1lVHlwZSksdGhpcy5fbXNlVG9vbGtpdC5vbihsLkV2ZW50cy5TRUdNRU5UX0FQUEVOREVELHRoaXMuX29uTWVkaWFTb3VyY2VBcHBlbmQpLHRoaXMuX21zZVRvb2xraXQub24obC5FdmVudHMuU09VUkNFX1JFQURZLHRoaXMuX29uTWVkaWFTb3VyY2VSZWFkeSksdGhpcy5fbXNlVG9vbGtpdC5vbihsLkV2ZW50cy5TT1VSQ0VfREVTVFJPWSx0aGlzLl9vbk1lZGlhU291cmNlRGVzdHJveSksdGhpcy5fbXNlVG9vbGtpdC5vbihsLkV2ZW50cy5TT1VSQ0VfRVJST1IsdGhpcy5fb25NZWRpYVNvdXJjZUVycm9yKSx0aGlzLl9obHNUb29sa2l0PW5ldyBjKHRoaXMuX2xvZ2dlcix0aGlzLmdldERlc2NyaXB0b3IoKS5zcmMpLHRoaXMuX2hsc1Rvb2xraXQub24oYy5FdmVudHMuU0VHTUVOVF9MT0FERUQsdGhpcy5fb25TZWdtZW50TG9hZGVkKSx0aGlzLl9obHNUb29sa2l0Lm9uKGMuRXZlbnRzLlNFR01FTlRfUFJPR1JFU1MsdGhpcy5fb25TZWdtZW50UHJvZ3Jlc3MpLHRoaXMuX2hsc1Rvb2xraXQub24oYy5FdmVudHMuU0VHTUVOVF9GQUlMRUQsdGhpcy5fb25TZWdtZW50RmFpbGVkKSx0aGlzLl9obHNUb29sa2l0Lm9uKGMuRXZlbnRzLlBMQVlMSVNUX0xPQURFRCx0aGlzLl9vblBsYXlsaXN0TG9hZGVkKSx0aGlzLl9obHNUb29sa2l0Lm9uKGMuRXZlbnRzLlBMQVlMSVNUX0ZBSUxFRCx0aGlzLl9vblBsYXlsaXN0RmFpbGVkKSx0aGlzLl9obHNUb29sa2l0Lm9uKGMuRXZlbnRzLlBMQVlMSVNUX1BBUlNFX0VSUk9SLHRoaXMuX29uUGxheWxpc3RGYWlsZWQpLHRoaXMuX2h0bWw1QXVkaW89dGhpcy5fbXNlVG9vbGtpdC5tZWRpYSgpLHZvaWQgdGhpcy5fdG9nZ2xlRXZlbnRMaXN0ZW5lcnMoITApKTp2b2lkIHRoaXMuX2Vycm9yKGEuTVNFX05PVF9TVVBQT1JURUQpfXZhciByPW4oMSksbz1uKDQ3KS5iaW5kQWxsLHM9bigzOSksYT1uKDQzKSx1PW4oMzUpLGg9big0NiksYz1uKDUxKSxsPW4oNjYpLGY9big2NyksZD1uKDM4KSxwPW4oNDIpLGc9bigxMjgpLF89bigxMjkpLG09bigxNikseT0yMDAsdj01MDAsRT0zLFM9MWU0LEE9ZnVuY3Rpb24odCl7dmFyIGU9dC9FLG49diooTWF0aC5wb3coTWF0aC5FLGUpL01hdGguRSk7cmV0dXJuIG4rPU1hdGgucmFuZG9tKCkqeSxuPlMmJihuPVMpLG59LHc9ZnVuY3Rpb24oKXt2YXIgdD17fTtyZXR1cm4gdFtwLm5hbWVzLlBST1RPQ09MU109W2cuSExTXSx0W3AubmFtZXMuTUlNRVRZUEVTXT1bXy5ITFMsXy5NM1U4LF8uTVAzXSx0W3AubmFtZXMuTkVFRFNfVVJMX1JFRlJFU0hdPSExLHR9LFQ9ZnVuY3Rpb24oKXtyZXR1cm4gbS5pc01TRVN1cHBvcnRNUEVHKCkmJiFtLmlzTmF0aXZlSGxzU3VwcG9ydGVkKCk/XCJhdWRpby9tcGVnXCI6bS5pc01TRVN1cHBvcnRNUDQoKT9cImF1ZGlvL21wNFwiOm51bGx9O3QuZXhwb3J0cz1pLHIoaS5wcm90b3R5cGUsdS5wcm90b3R5cGUpLGkucHJvdG90eXBlLl9vbkxvYWRlZERhdGE9ZnVuY3Rpb24oKXt0aGlzLl9sb2dnZXIubG9nKFwibG9hZGVkZGF0YSBldmVudCBoYW5kbGVyXCIpLHRoaXMudHJpZ2dlcihzLkRBVEEpfSxpLnByb3RvdHlwZS5fb25Mb2FkZWRNZXRhZGF0YT1mdW5jdGlvbigpe3RoaXMuX2xvZ2dlci5sb2coXCJsb2FkZWRtZXRhZGF0YSBldmVudCBoYW5kbGVyXCIpfSxpLnByb3RvdHlwZS5fbWVkaWFzSGFzUHJvZ3Jlc3NlZD1mdW5jdGlvbigpe3ZhciB0PSExLGU9RGF0ZS5ub3coKTtpZih0aGlzLl9sYXN0TWVkaWFDbG9ja0NoZWNrKXt2YXIgbj1lLXRoaXMuX2xhc3RNZWRpYUNsb2NrQ2hlY2ssaT10aGlzLl9jdXJyZW50UG9zaXRpb24tdGhpcy5fbGFzdE1lZGlhQ2xvY2tWYWx1ZTtpZiguMSpuPmkpe2lmKDA9PT1pJiY1MD5uKXJldHVybiEwO3Q9ITB9fXJldHVybiB0aGlzLl9sYXN0TWVkaWFDbG9ja1ZhbHVlPXRoaXMuX2N1cnJlbnRQb3NpdGlvbix0aGlzLl9sYXN0TWVkaWFDbG9ja0NoZWNrPWUsIXR9LGkucHJvdG90eXBlLl9vblBvc2l0aW9uQ2hhbmdlPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2h0bWw1QXVkaW8mJnRoaXMuZ2V0U3RhdGUoKSE9PWQuU0VFS0lORz8odGhpcy5fY3VycmVudFBvc2l0aW9uPTFlMyp0aGlzLl9odG1sNUF1ZGlvLmN1cnJlbnRUaW1lLHRoaXMuZ2V0U3RhdGUoKSE9PWQuUExBWUlOR3x8dGhpcy5fbWVkaWFzSGFzUHJvZ3Jlc3NlZCgpPyh0aGlzLmdldFN0YXRlKCkhPT1kLlBMQVlJTkcmJnRoaXMuX21lZGlhc0hhc1Byb2dyZXNzZWQoKSYmdGhpcy51cGRhdGVTdGF0ZShkLlBMQVlJTkcpLHRoaXMuX3RyaWdnZXJQb3NpdGlvbkV2ZW50KCksdGhpcy5fY3VycmVudFBvc2l0aW9uPj10aGlzLl9kdXJhdGlvbj92b2lkIHRoaXMudXBkYXRlU3RhdGUoZC5FTkRFRCk6dm9pZCAwKToodGhpcy5fbG9nZ2VyLmxvZyhcIm1lZGlhIGNsb2NrIGNoZWNrIGZhaWxlZCwgcGxheWhlYWQgaXMgbm90IGFkdmFuY2luZyBhbnltb3JlXCIpLHZvaWQgdGhpcy51cGRhdGVTdGF0ZShkLkxPQURJTkcpKSk6dm9pZCAwfSxpLnByb3RvdHlwZS5fb25NZWRpYVNvdXJjZVJlYWR5PWZ1bmN0aW9uKCl7dGhpcy5nZXREZXNjcmlwdG9yKCkuZHVyYXRpb24mJih0aGlzLl9zZXREdXJhdGlvbih0aGlzLmdldERlc2NyaXB0b3IoKS5kdXJhdGlvbiksdGhpcy5fbG9nZ2VyLmxvZyhcImR1cmF0aW9uIHNldCBmcm9tIGRlc2NyaXB0b3IgdG8gXCIrdGhpcy5fZHVyYXRpb24pKSx0aGlzLnVwZGF0ZVN0YXRlKGQuSURMRSksdGhpcy5fbG9hZE9uSW5pdCYmdGhpcy5fbG9hZEluaXRpYWxQbGF5bGlzdCgpfSxpLnByb3RvdHlwZS5fb25NZWRpYVNvdXJjZURlc3Ryb3k9ZnVuY3Rpb24oKXt0aGlzLmtpbGwoKX0saS5wcm90b3R5cGUuX29uTWVkaWFTb3VyY2VFcnJvcj1mdW5jdGlvbih0KXt0aGlzLl9sb2dnZXIubG9nKFwiTWVkaWFTb3VyY2UgQVBJIGVycm9yOiBcIit0Lm1lc3NhZ2UpLHRoaXMuX2Vycm9yKGEuTVNFX0JBRF9PQkpFQ1RfU1RBVEUpLHRoaXMua2lsbCgpfSxpLnByb3RvdHlwZS5fb25NZWRpYVNvdXJjZUFwcGVuZD1mdW5jdGlvbih0KXt0aGlzLl9sb2dnZXIubG9nKFwic2VnbWVudCBhcHBlbmRlZDogXCIrdC5pbmRleCksdGhpcy50cmlnZ2VyKHMuREFUQSx0KSx0aGlzLl9sb2FkZWRQb3NpdGlvbj10LmVuZFBvc2l0aW9uLHRoaXMuX3BsYXlSZXF1ZXN0ZWQmJih0aGlzLl9sb2dnZXIubG9nKFwidHJpZ2dlcmluZyBwbGF5YmFjayBhZnRlciBhcHBlbmRpbmcgZW5vdWdoIHNlZ21lbnRzXCIpLHRoaXMuX2h0bWw1QXVkaW8ucGxheSh0aGlzLl9jdXJyZW50UG9zaXRpb24pKX0saS5wcm90b3R5cGUuX29uU2VnbWVudFByb2dyZXNzPWZ1bmN0aW9uKHQpe3ZhciBlPU1hdGgucm91bmQodC5sb2FkZWQvdC50b3RhbCoxMDApO3RoaXMuX2xvZ2dlci5sb2coXCJzZWdtZW50IFwiK3QuaW5kZXgrXCIgbG9hZGVkIFwiK3QubG9hZGVkK1wiIG9mIFwiK3QudG90YWwrXCIgYnl0ZXMgKFwiK2UrXCIlKVwiKSx0aGlzLl9sb2FkZWRQb3NpdGlvbj10LmVuZFBvc2l0aW9uLXQuZHVyYXRpb24qKHQubG9hZGVkL3QudG90YWwpfSxpLnByb3RvdHlwZS5fb25TZWdtZW50TG9hZGVkPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLl9tc2VUb29sa2l0LnNvdXJjZUlzUmVhZHkoKT92b2lkIHRoaXMuX2FwcGVuZFNlZ21lbnRzKCk6dm9pZCB0aGlzLl9sb2dnZXIubG9nKFwid2UgaGF2ZSBiZWVuIGRpc3Bvc2VkIHdoaWxlIGxvYWRpbmcgYSBzZWdtZW50LCBub29wXCIpfSxpLnByb3RvdHlwZS5fb25TZWdtZW50RmFpbGVkPWZ1bmN0aW9uKHQpe3N3aXRjaCh0aGlzLl9sb2dnZXIubG9nKFwic2VnbWVudCBsb2FkaW5nIGZhaWxlZCBoYW5kbGVyOiBcIit0LnN0YXR1cyksdC5zdGF0dXMpe2Nhc2UgYy5TdGF0dXMuTk9UX0ZPVU5EOmNhc2UgYy5TdGF0dXMuRk9SQklEREVOOnRoaXMuX2NhbmNlbE5leHRTY2hlZHVsaW5nKCksdGhpcy5fY2FuY2VsQWxsSW5GbGlnaHRSZXF1ZXN0cygpLHRoaXMuX3JlZnJlc2hQbGF5bGlzdCgpO2JyZWFrO2Nhc2UgYy5TdGF0dXMuVElNRU9VVDp0aGlzLnRyaWdnZXIocy5ORVRXT1JLX1RJTUVPVVQpO2Nhc2UgYy5TdGF0dXMuU0VSVkVSX0VSUk9SOmlmKHQuYWJvcnRlZCl7dGhpcy5fbG9nZ2VyLmxvZyhcImFib3J0ZWQgc2VnbWVudCBoYXMgYmVlbiBwcmV2ZW50ZWQgZnJvbSBiZWluZyByZXRyaWVkXCIpO2JyZWFrfXQuc2NoZWR1bGVSZXRyeShBKHQudGltZXNGYWlsZWQpLHRoaXMuX2hsc1Rvb2xraXQubG9hZFNlZ21lbnQsdGhpcy5faGxzVG9vbGtpdCk7YnJlYWs7Y2FzZSBjLlN0YXR1cy5GQUlMRUQ6dGhpcy5fbG9nZ2VyLmxvZyhcIldBUk5JTkc6IHNlZ21lbnQgbG9hZGluZyBmYWlsZWQgZm9yIHVua25vd24gcmVhc29uIVwiKTticmVhaztkZWZhdWx0OnRocm93IG5ldyBFcnJvcihcIkludmFsaWQgc3RhdHVzIG9uIGZhaWxlZCBzZWdtZW50OiBcIit0LnN0YXR1cyl9fSxpLnByb3RvdHlwZS5fb25QbGF5bGlzdExvYWRlZD1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9sb2dnZXIubG9nKFwicGxheWxpc3QgbG9hZGVkIGhhbmRsZXJcIiksdGhpcy5fbXNlVG9vbGtpdC5zb3VyY2VJc1JlYWR5KCk/KHRoaXMuX3BsYXlsaXN0UmVmcmVzaEluUHJvZ3Jlc3MmJih0aGlzLl9jYW5jZWxOZXh0U2NoZWR1bGluZygpLHRoaXMuX3J1blNjaGVkdWxpbmcoKSksdGhpcy5fcGxheWxpc3RSZWZyZXNoSW5Qcm9ncmVzcz0hMSx0aGlzLl9wbGF5bGlzdFRpbWVzRmFpbGVkPTAsdGhpcy5faXNQbGF5bGlzdExvYWRlZD0hMCx0aGlzLl9pbnNwZWN0RW5jcnlwdGlvbkRhdGEoKSx0aGlzLl9zZXREdXJhdGlvbih0aGlzLl9obHNUb29sa2l0LmdldER1cmF0aW9uKCkpLHRoaXMuX2xvZ2dlci5sb2coXCJkdXJhdGlvbiBzZXQgZnJvbSBwbGF5bGlzdCBpbmZvIHRvIFwiK3RoaXMuX2R1cmF0aW9uKSx2b2lkIHRoaXMudHJpZ2dlcihzLk1FVEFEQVRBKSk6dm9pZCB0aGlzLl9sb2dnZXIubG9nKFwid2UgaGF2ZSBiZWVuIGRpc3Bvc2VkIHdoaWxlIGxvYWRpbmcgdGhlIHBsYXlsaXN0LCBub29wXCIpfSxpLnByb3RvdHlwZS5fb25QbGF5bGlzdEZhaWxlZD1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5fbG9nZ2VyLmxvZyhcInBsYXlsaXN0IGxvYWRpbmcgZmFpbGVkIGhhbmRsZXIuIEhUVFAgc3RhdHVzIGNvZGUgaXMgXCIrdCksdGhpcy5fbXNlVG9vbGtpdC5zb3VyY2VJc1JlYWR5KCk/KHRoaXMuX2xvZ2dlci5sb2coXCJQbGF5bGlzdCBsb2FkaW5nIGZhaWxlZCAgXCIrdGhpcy5fcGxheWxpc3RUaW1lc0ZhaWxlZCtcIiB0aW1lcyBiZWZvcmVcIiksdGhpcy5fcGxheWxpc3RUaW1lc0ZhaWxlZCsrLHRoaXMuX3BsYXlsaXN0UmV0cnlUaW1lcj13aW5kb3cuc2V0VGltZW91dChmdW5jdGlvbigpe3RoaXMuaGFzU3RyZWFtVXJsUHJvdmlkZXIoKT90aGlzLl9yZWZyZXNoUGxheWxpc3QoKTp0aGlzLl9obHNUb29sa2l0LnVwZGF0ZVBsYXlsaXN0KCl9LmJpbmQodGhpcyksQSh0aGlzLl9wbGF5bGlzdFRpbWVzRmFpbGVkKSksdm9pZCgwPT09dCYmdGhpcy50cmlnZ2VyKHMuTkVUV09SS19USU1FT1VUKSkpOnZvaWQgdGhpcy5fbG9nZ2VyLmxvZyhcIndlIGhhdmUgYmVlbiBkaXNwb3NlZCB3aGlsZSBsb2FkaW5nIHRoZSBwbGF5bGlzdCwgbm9vcFwiKX0saS5wcm90b3R5cGUuYWZ0ZXJTdGF0ZUNoYW5nZT1mdW5jdGlvbih0LGUpe3N3aXRjaChlKXtjYXNlIGQuUExBWUlORzp0aGlzLl9ydW5TY2hlZHVsaW5nKCk7YnJlYWs7Y2FzZSBkLlBBVVNFRDp0aGlzLl9jYW5jZWxOZXh0U2NoZWR1bGluZygpfX0saS5wcm90b3R5cGUuX29uSHRtbDVNZWRpYUV2ZW50PWZ1bmN0aW9uKHQpe3N3aXRjaCh0aGlzLl9sb2dnZXIubG9nKCdIVE1MNSBtZWRpYSBldmVudCBcIicrdC50eXBlKydcIicpLHRoaXMuX3dhaXRpbmdUb1BhdXNlPSExLHQudHlwZSl7Y2FzZVwicGxheWluZ1wiOnRoaXMuX3BsYXlSZXF1ZXN0ZWQ9ITEsdGhpcy5fdHJpZ2dlclBvc2l0aW9uRXZlbnQoKSx0aGlzLl9yZXNldFBvc2l0aW9uVGltZXIoITApLHRoaXMudXBkYXRlU3RhdGUoZC5QTEFZSU5HKTticmVhaztjYXNlXCJwYXVzZVwiOnRoaXMuX3RyaWdnZXJQb3NpdGlvbkV2ZW50KCksdGhpcy5fcmVzZXRQb3NpdGlvblRpbWVyKCExKSx0aGlzLnVwZGF0ZVN0YXRlKGQuUEFVU0VEKTticmVhaztjYXNlXCJlbmRlZFwiOnRoaXMuX2N1cnJlbnRQb3NpdGlvbj10aGlzLl9sb2FkZWRQb3NpdGlvbj10aGlzLl9kdXJhdGlvbix0aGlzLl90cmlnZ2VyUG9zaXRpb25FdmVudCgpLHRoaXMuX3Jlc2V0UG9zaXRpb25UaW1lcighMSksdGhpcy51cGRhdGVTdGF0ZShkLkVOREVEKTticmVhaztjYXNlXCJ3YWl0aW5nXCI6aWYodGhpcy5nZXRTdGF0ZSgpPT09ZC5TRUVLSU5HKWJyZWFrO3RoaXMudXBkYXRlU3RhdGUoZC5MT0FESU5HKTticmVhaztjYXNlXCJzZWVraW5nXCI6dGhpcy5fdHJpZ2dlclBvc2l0aW9uRXZlbnQoKSx0aGlzLnVwZGF0ZVN0YXRlKGQuU0VFS0lORyk7YnJlYWs7Y2FzZVwic2Vla2VkXCI6dGhpcy5faHRtbDVBdWRpby5wYXVzZWQ/dGhpcy51cGRhdGVTdGF0ZShkLlBBVVNFRCk6dGhpcy51cGRhdGVTdGF0ZShkLlBMQVlJTkcpLHRoaXMuX29uUG9zaXRpb25DaGFuZ2UoKTticmVhaztjYXNlXCJlcnJvclwiOnRoaXMuX2Vycm9yKHRoaXMuX2h0bWw1QXVkaW9FcnJvckNvZGVUb0Vycm9ySWQoKSwhMCl9fSxpLnByb3RvdHlwZS5fdG9nZ2xlRXZlbnRMaXN0ZW5lcnM9ZnVuY3Rpb24odCl7aWYodGhpcy5faHRtbDVBdWRpbyl7dmFyIGU9dD9cImFkZEV2ZW50TGlzdGVuZXJcIjpcInJlbW92ZUV2ZW50TGlzdGVuZXJcIjtoLk1lZGlhQVBJRXZlbnRzLmZvckVhY2goZnVuY3Rpb24odCl7c3dpdGNoKHQpe2Nhc2VcImxvYWRlZGRhdGFcIjp0aGlzLl9odG1sNUF1ZGlvW2VdKFwibG9hZGVkZGF0YVwiLHRoaXMuX29uTG9hZGVkRGF0YSk7YnJlYWs7Y2FzZVwibG9hZGVkbWV0YWRhdGFcIjp0aGlzLl9odG1sNUF1ZGlvW2VdKFwibG9hZGVkbWV0YWRhdGFcIix0aGlzLl9vbkxvYWRlZE1ldGFkYXRhKTticmVhaztjYXNlXCJ0aW1ldXBkYXRlXCI6ZGVmYXVsdDp0aGlzLl9odG1sNUF1ZGlvW2VdKHQsdGhpcy5fb25IdG1sNU1lZGlhRXZlbnQpfX0sdGhpcyl9fSxpLnByb3RvdHlwZS5fbG9hZEluaXRpYWxQbGF5bGlzdD1mdW5jdGlvbigpe3RoaXMudXBkYXRlU3RhdGUoZC5MT0FESU5HKSx0aGlzLl9obHNUb29sa2l0LnVwZGF0ZVBsYXlsaXN0KCl9LGkucHJvdG90eXBlLl9yZWZyZXNoUGxheWxpc3Q9ZnVuY3Rpb24oKXt0aGlzLmhhc1N0cmVhbVVybFByb3ZpZGVyKCkmJih0aGlzLl9wbGF5bGlzdFJlZnJlc2hmSW5Qcm9ncmVzc3x8KHRoaXMuX3BsYXlsaXN0UmVmcmVzaEluUHJvZ3Jlc3M9ITAsdGhpcy5fc3RyZWFtVXJsUHJvdmlkZXIoKS5kb25lKGZ1bmN0aW9uKHQpe3RoaXMuX2xvZ2dlci5sb2coXCJnb3QgbmV3IE0zdTggVVJMOiBcIit0KSx0aGlzLl9zdHJlYW1VcmxUaW1lc0ZhaWxlZD0wLHRoaXMuX2hsc1Rvb2xraXQuc2V0VXJpKHQpLHRoaXMuX2hsc1Rvb2xraXQudXBkYXRlUGxheWxpc3QoKX0uYmluZCh0aGlzKSkuZmFpbChmdW5jdGlvbigpe3RoaXMuX2xvZ2dlci5sb2coXCJmYWlsZWQgdG8gcmV0cmlldmUgc3RyZWFtIFVSTCA6KFwiKSx0aGlzLl9zdHJlYW1VcmxSZXRyeVRpbWVyPXdpbmRvdy5zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7dGhpcy5fcGxheWxpc3RSZWZyZXNoSW5Qcm9ncmVzcz0hMSx0aGlzLl9yZWZyZXNoUGxheWxpc3QoKX0uYmluZCh0aGlzKSxBKCsrdGhpcy5fc3RyZWFtVXJsVGltZXNGYWlsZWQpKX0uYmluZCh0aGlzKSkpKX0saS5wcm90b3R5cGUuX3NldER1cmF0aW9uPWZ1bmN0aW9uKHQpe3RoaXMuX2R1cmF0aW9uPXQ7dHJ5e3RoaXMuX21zZVRvb2xraXQuZHVyYXRpb24odGhpcy5fZHVyYXRpb24pfWNhdGNoKGUpe3RoaXMuX29uTWVkaWFTb3VyY2VFcnJvcihlKX19LGkucHJvdG90eXBlLl9yZXNldFBvc2l0aW9uVGltZXI9ZnVuY3Rpb24odCl7d2luZG93LmNsZWFySW50ZXJ2YWwodGhpcy5fcG9zaXRpb25VcGRhdGVUaW1lciksdCYmKHRoaXMuX3Bvc2l0aW9uVXBkYXRlVGltZXI9d2luZG93LnNldEludGVydmFsKHRoaXMuX29uUG9zaXRpb25DaGFuZ2UsdGhpcy5nZXRTZXR0aW5ncygpLnVwZGF0ZUludGVydmFsKSl9LGkucHJvdG90eXBlLl90cmlnZ2VyUG9zaXRpb25FdmVudD1mdW5jdGlvbigpe3RoaXMudHJpZ2dlcihzLlBPU0lUSU9OX0NIQU5HRSx0aGlzLl9jdXJyZW50UG9zaXRpb24sdGhpcy5fbG9hZGVkUG9zaXRpb24sdGhpcy5fZHVyYXRpb24sdGhpcyl9LGkucHJvdG90eXBlLl9pbml0VHJhbnNtdXhlck9uY2U9ZnVuY3Rpb24odCxlKXtpZighdGhpcy5fdHJhbnNtdXhlcil7dmFyIG49dGhpcy5fbWltZVR5cGUhPT10Lm1pbWVUeXBlP2YuQ29uZmlncy5NUDNfVE9fRk1QNDpmLkNvbmZpZ3MuVk9JRDt0aGlzLl90cmFuc211eGVyPW5ldyBmKG4pLHRoaXMuX3RyYW5zbXV4ZXIub24oXCJzZWdtZW50XCIsZnVuY3Rpb24odCl7dGhpcy5fbG9nZ2VyLmxvZyhcInRyYW5zbXV4ZWQgZGF0YSByZWFkeSwgXCIrdC5kYXRhLmxlbmd0aCtcIiBieXRlcyBmb3Igc2VnbWVudCBcIit0LmluZGV4KSxlKHQpfS5iaW5kKHRoaXMpKX19LGkucHJvdG90eXBlLl90cmFuc211eFNlZ21lbnQ9ZnVuY3Rpb24odCxlKXt0aGlzLl9sb2dnZXIubG9nKFwidHJhbnNtdXhpbmcgc2VnbWVudCBcIit0LmluZGV4KSx0aGlzLl9pbml0VHJhbnNtdXhlck9uY2UodCxlKSx0aGlzLl90cmFuc211eGVyLnByb2Nlc3ModCl9LGkucHJvdG90eXBlLl9hcHBlbmRTZWdtZW50cz1mdW5jdGlvbigpe3ZhciB0PSEwO3RoaXMuX3NlZ21lbnRzRG93bmxvYWRpbmcuc2xpY2UoKS5mb3JFYWNoKGZ1bmN0aW9uKGUpe2UuaXNDb21wbGV0ZSgpJiZ0Pyh0aGlzLl9kZWNyeXB0U2VnbWVudChlKSx0aGlzLl90cmFuc211eFNlZ21lbnQoZSxmdW5jdGlvbih0KXt0aGlzLl9tc2VUb29sa2l0LmFwcGVuZCh0KX0uYmluZCh0aGlzKSksdGhpcy5fc2VnbWVudHNEb3dubG9hZGluZy5zaGlmdCgpKTp0PSExfSx0aGlzKX0saS5wcm90b3R5cGUuX2NhbmNlbE5leHRTY2hlZHVsaW5nPWZ1bmN0aW9uKCl7dGhpcy5fbG9nZ2VyLmxvZyhcImNhbmNlbGxpbmcgbmV4dCBzY2hlZHVsaW5nXCIpLHdpbmRvdy5jbGVhclRpbWVvdXQodGhpcy5fbmV4dFNjaGVkdWxpbmdUaW1lb3V0KSx0aGlzLl9uZXh0U2NoZWR1bGluZ1RpbWVvdXQ9bnVsbH0saS5wcm90b3R5cGUuX2dldEJ1ZmZlclVudGlsVGltZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9jdXJyZW50UG9zaXRpb24rdGhpcy5fbWF4QnVmZmVyTGVuZ3RofSxpLnByb3RvdHlwZS5fZ2V0Q3VycmVudFNlZ21lbnQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fc2NoZWR1bGluZ1NlZ21lbnRJbmRleD4wP3RoaXMuX2hsc1Rvb2xraXQuZ2V0U2VnbWVudCh0aGlzLl9zY2hlZHVsaW5nU2VnbWVudEluZGV4KTp0aGlzLl9obHNUb29sa2l0LmdldFNlZ21lbnRGb3JUaW1lKHRoaXMuX2N1cnJlbnRQb3NpdGlvbil9LGkucHJvdG90eXBlLl9ydW5TY2hlZHVsaW5nPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCgpe3ZhciBlPSExLG49dGhpcy5fZ2V0QnVmZmVyVW50aWxUaW1lKCksaT10aGlzLl9nZXRDdXJyZW50U2VnbWVudCgpLHI9aT9pLmR1cmF0aW9uOk1hdGguSW5maW5pdHk7aWYodGhpcy5fbG9nZ2VyLmxvZyhcInNjaGVkdWxpbmcgbmV4dCByZXF1ZXN0cywgY3VycmVudCBidWZmZXItdW50aWwgdGltZTogXCIrbitcIiBtc1wiKSwhaSlyZXR1cm4gdm9pZCB0aGlzLl9sb2dnZXIubG9nKFwibm8gc2VnbWVudCB0byBzY2hlZHVsZSwgY2xvc2luZyBsb29wXCIpO2Zvcih0aGlzLl9sb2dnZXIubG9nKFwiY3VycmVudCBzZWdtZW50IGluZGV4OiBcIitpLmluZGV4KTtpLmVuZFBvc2l0aW9uPD1uOyl7aWYodGhpcy5fbG9nZ2VyLmxvZyhcInNjaGVkdWxpbmcgbG9vcCBhdCBcIit0aGlzLl9jdXJyZW50UG9zaXRpb24rXCIgbXMsIGN1cnJlbnQgc2VnbWVudCBcIitpLmluZGV4KSx0aGlzLl9yZXF1ZXN0U2VnbWVudChpKSxpLmlzTGFzdCl7ZT0hMCx0aGlzLl9sb2dnZXIubG9nKFwiZW5kIG9mIHBsYXlsaXN0IHJlYWNoZWRcIik7YnJlYWt9dGhpcy5fc2NoZWR1bGluZ1NlZ21lbnRJbmRleD1pLmluZGV4KzEsaT10aGlzLl9obHNUb29sa2l0LmdldFNlZ21lbnQodGhpcy5fc2NoZWR1bGluZ1NlZ21lbnRJbmRleCl9dGhpcy5faXNJbk9uZU9mU3RhdGVzKGQuREVBRCxkLlBBVVNFRCl8fGU/KHRoaXMuX2xvZ2dlci5sb2coXCJub3QgcmUtc2NoZWR1bGluZ1wiKSx0aGlzLl9uZXh0U2NoZWR1bGluZ1RpbWVvdXQ9bnVsbCk6KHRoaXMuX2xvZ2dlci5sb2coXCJ0aW1pbmcgbmV4dCBjaGVjayBmb3IgbW9yZSBkYXRhIGluIFwiK3IrXCIgbXNcIiksdGhpcy5fbmV4dFNjaGVkdWxpbmdUaW1lb3V0PXdpbmRvdy5zZXRUaW1lb3V0KHQuYmluZCh0aGlzKSxyKSl9dGhpcy5fbmV4dFNjaGVkdWxpbmdUaW1lb3V0fHx0LmNhbGwodGhpcyl9LGkucHJvdG90eXBlLl9jYW5jZWxBbGxJbkZsaWdodFJlcXVlc3RzPWZ1bmN0aW9uKCl7dGhpcy5fc2NoZWR1bGluZ1NlZ21lbnRJbmRleD0tMSx0aGlzLl9zZWdtZW50c0Rvd25sb2FkaW5nLmZvckVhY2goZnVuY3Rpb24odCl7dC5pc0NvbXBsZXRlKCl8fHQuY2FuY2VsKCl9KSx0aGlzLl9zZWdtZW50c0Rvd25sb2FkaW5nPVtdfSxpLnByb3RvdHlwZS5fcmVxdWVzdFNlZ21lbnQ9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuX3NlZ21lbnRzRG93bmxvYWRpbmcucHVzaCh0KSx0LmlzQ29tcGxldGUoKT8odGhpcy5fbG9nZ2VyLmxvZyhcInJlcXVlc3RlZCBkYXRhIGlzIGFscmVhZHkgbG9hZGVkIGZyb20gc2VnbWVudCBcIit0LmluZGV4KSx2b2lkIHRoaXMuX29uU2VnbWVudExvYWRlZCh0KSk6dC5oYXNCZWVuUmVxdWVzdGVkKCl8fHQuaGFzRmFpbGVkKCk/dm9pZCB0aGlzLl9sb2dnZXIubG9nKFwic2VnbWVudCBhbHJlYWR5IGluIGZsaWdodCBvciBmYWlsZWQgKHdpbGwgcmV0cnkpOiBcIit0LnRpbWVzRmFpbGVkK1wiIHRpbWVzXCIpOnZvaWQgdGhpcy5faGxzVG9vbGtpdC5sb2FkU2VnbWVudCh0KX0saS5wcm90b3R5cGUuX2RlY3J5cHRTZWdtZW50PWZ1bmN0aW9uKHQpe3RoaXMuX2hsc1Rvb2xraXQuaXNBRVMxMjhFbmNyeXB0ZWQoKSYmdGhpcy5faGxzVG9vbGtpdC5kZWNyeXB0U2VnbWVudEFFUzEyOCh0KX0saS5wcm90b3R5cGUuX2luc3BlY3RFbmNyeXB0aW9uRGF0YT1mdW5jdGlvbigpe3RoaXMuX2hsc1Rvb2xraXQuaXNBRVMxMjhFbmNyeXB0ZWQoKSYmKHRoaXMuX2xvZ2dlci5sb2coXCJnb3Qga2V5IG9mIGJ5dGUgbGVuZ3RoIFwiK3RoaXMuX2hsc1Rvb2xraXQuZ2V0RW5jcnlwdGlvbktleSgpLmJ5dGVMZW5ndGgpLHRoaXMuX2hsc1Rvb2xraXQuZ2V0RW5jcnlwdGlvbkl2KCk/dGhpcy5fbG9nZ2VyLmxvZyhcImdvdCBJViBvZiBieXRlIGxlbmd0aCBcIit0aGlzLl9obHNUb29sa2l0LmdldEVuY3J5cHRpb25JdigpLmJ5dGVMZW5ndGgpOnRoaXMuX2xvZ2dlci5sb2coXCJubyBJViBmb3VuZCBpbiBoZWFkZXIsIHdpbGwgdXNlIHBlci1zZWdtZW50LWluZGV4IElWXCIpKX0saS5wcm90b3R5cGUuX2h0bWw1QXVkaW9FcnJvckNvZGVUb0Vycm9ySWQ9ZnVuY3Rpb24oKXtyZXR1cm57MTphLkhUTUw1X0FVRElPX0FCT1JURUQsMjphLkhUTUw1X0FVRElPX05FVFdPUkssMzphLkhUTUw1X0FVRElPX0RFQ09ERSw0OmEuSFRNTDVfQVVESU9fU1JDX05PVF9TVVBQT1JURUR9W3RoaXMuX2h0bWw1QXVkaW8uZXJyb3IuY29kZV19LGkucHJvdG90eXBlLl9lcnJvcj1mdW5jdGlvbih0LGUpe3RoaXMuX2Vycm9ySUQ9dCx0aGlzLl9lcnJvck1lc3NhZ2U9dGhpcy5fZ2V0RXJyb3JNZXNzYWdlKHRoaXMuX2Vycm9ySUQpLGUmJnRoaXMuX2h0bWw1QXVkaW8uZXJyb3ImJih0aGlzLl9lcnJvck1lc3NhZ2UrPVwiIChuYXRpdmUgbWVzc2FnZTogXCIrdGhpcy5faHRtbDVBdWRpby5lcnJvci5tZXNzYWdlK1wiKVwiKSx0aGlzLl9sb2dnZXIubG9nKHRoaXMuX2Vycm9ySUQrXCIgXCIrdGhpcy5fZXJyb3JNZXNzYWdlKSx0aGlzLnVwZGF0ZVN0YXRlKGQuRVJST1IpLHRoaXMuX3RvZ2dsZUV2ZW50TGlzdGVuZXJzKCExKX0saS5wcm90b3R5cGUuX2dldEVycm9yTWVzc2FnZT1mdW5jdGlvbih0KXt2YXIgZT17fTtyZXR1cm4gZVthLk1TRV9OT1RfU1VQUE9SVEVEXT1cIlRoZSBicm93c2VyIGRvZXMgbm90IHN1cHBvcnQgTWVkaWFTb3VyY2UgQVBJXCIsZVthLk1TRV9CQURfT0JKRUNUX1NUQVRFXT1cIk1lZGlhU291cmNlIEFQSSBoYXMgdGhyb3duIGFuIGV4Y2VwdGlvblwiLGVbdF0/XCJFcnJvcjogXCIrdCtcIiAoXCIrZVt0XStcIilcIjpcIkVycm9yOiBcIit0fSxpLnByb3RvdHlwZS5zZXRWb2x1bWU9ZnVuY3Rpb24odCl7dGhpcy5faHRtbDVBdWRpbyYmKHRoaXMuX2h0bWw1QXVkaW8udm9sdW1lPXQpfSxpLnByb3RvdHlwZS5nZXRWb2x1bWU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5faHRtbDVBdWRpbz90aGlzLl9odG1sNUF1ZGlvLnZvbHVtZToxfSxpLnByb3RvdHlwZS5zZXRNdXRlPWZ1bmN0aW9uKHQpe3RoaXMuX2h0bWw1QXVkaW8mJih0aGlzLl9odG1sNUF1ZGlvLm11dGVkPXQpfSxpLnByb3RvdHlwZS5nZXRNdXRlPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2h0bWw1QXVkaW8/dGhpcy5faHRtbDVBdWRpby5tdXRlZDohMX0saS5wcm90b3R5cGUuZ2V0RXJyb3JJRD1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9lcnJvcklEfSxpLnByb3RvdHlwZS5wbGF5PWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLl9pc0luT25lT2ZTdGF0ZXMoZC5FUlJPUixkLkRFQUQpP3ZvaWQgdGhpcy5fbG9nZ2VyLmxvZyhcInBsYXkgY2FsbGVkIGJ1dCBzdGF0ZSBpcyBFUlJPUiBvciBERUFEXCIpOnRoaXMuX2lzSW5PbmVPZlN0YXRlcyhkLklETEUsZC5JTklUSUFMSVpFKT8odD10fHwwLHRoaXMuX2xvZ2dlci5sb2coXCJwbGF5IGZyb20gXCIrdCksdGhpcy5fcGxheVJlcXVlc3RlZD0hMCx0aGlzLnNlZWsodCksdGhpcy5nZXRTdGF0ZSgpPT09ZC5JTklUSUFMSVpFP3ZvaWQodGhpcy5fbG9hZE9uSW5pdD0hMCk6dm9pZCB0aGlzLl9sb2FkSW5pdGlhbFBsYXlsaXN0KCkpOnZvaWQgdGhpcy5yZXN1bWUoKX0saS5wcm90b3R5cGUucGF1c2U9ZnVuY3Rpb24oKXt0aGlzLl9odG1sNUF1ZGlvJiYodGhpcy5fcGxheVJlcXVlc3RlZD0hMSx0aGlzLl9odG1sNUF1ZGlvLnBhdXNlKCkpfSxpLnByb3RvdHlwZS5zZWVrPWZ1bmN0aW9uKHQpe2lmKCF0aGlzLl9pc0luT25lT2ZTdGF0ZXMoZC5FUlJPUixkLkRFQUQpKXtpZighdGhpcy5faXNQbGF5bGlzdExvYWRlZClyZXR1cm4gdm9pZCB0aGlzLm9uY2Uocy5NRVRBREFUQSxmdW5jdGlvbigpe3RoaXMuc2Vlayh0KX0uYmluZCh0aGlzKSk7aWYodD50aGlzLl9kdXJhdGlvbilyZXR1cm4gdm9pZCB0aGlzLl9sb2dnZXIubG9nKFwiY2FuIG5vdCBzZWVrIHRvIHBvc2l0aW9uIG92ZXIgZHVyYXRpb25cIik7dGhpcy5fbG9nZ2VyLmxvZyhcInNlZWsgdG8gXCIrdCtcIiBtc1wiKSx0aGlzLnVwZGF0ZVN0YXRlKGQuU0VFS0lORyksdGhpcy5fbGFzdE1lZGlhQ2xvY2tDaGVjaz1udWxsLHRoaXMuX2N1cnJlbnRQb3NpdGlvbj10O3RyeXt0aGlzLl9odG1sNUF1ZGlvLmN1cnJlbnRUaW1lPXQvMWUzfWNhdGNoKGUpe3RoaXMuX2xvZ2dlci5sb2coXCJlcnJvciBzZWVraW5nOiBcIitlLm1lc3NhZ2UpfXRoaXMuX2NhbmNlbEFsbEluRmxpZ2h0UmVxdWVzdHMoKSx0aGlzLl9jYW5jZWxOZXh0U2NoZWR1bGluZygpLHRoaXMuX3J1blNjaGVkdWxpbmcoKX19LGkucHJvdG90eXBlLnJlc3VtZT1mdW5jdGlvbigpe3RoaXMuX2h0bWw1QXVkaW8mJih0aGlzLl9sb2dnZXIubG9nKFwicmVzdW1lIGZyb20gXCIrdGhpcy5fY3VycmVudFBvc2l0aW9uKSx0aGlzLl9odG1sNUF1ZGlvLnBsYXkoMWUzKnRoaXMuX2N1cnJlbnRQb3NpdGlvbikpfSxpLnByb3RvdHlwZS5raWxsPWZ1bmN0aW9uKCl7dGhpcy5nZXRTdGF0ZSgpIT09ZC5ERUFEJiYodGhpcy5fbG9nZ2VyLmxvZyhcImtpbGxcIiksdGhpcy5fcmVzZXRQb3NpdGlvblRpbWVyKCExKSx0aGlzLl9jYW5jZWxOZXh0U2NoZWR1bGluZygpLHRoaXMuX2NhbmNlbEFsbEluRmxpZ2h0UmVxdWVzdHMoKSx3aW5kb3cuY2xlYXJUaW1lb3V0KHRoaXMuX3BsYXlsaXN0UmV0cnlUaW1lciksd2luZG93LmNsZWFyVGltZW91dCh0aGlzLl9zdHJlYW1VcmxSZXRyeVRpbWVyKSx0aGlzLl9wbGF5UmVxdWVzdGVkPSExLHRoaXMuX3RvZ2dsZUV2ZW50TGlzdGVuZXJzKCExKSx0aGlzLl9odG1sNUF1ZGlvLnBhdXNlKCksdGhpcy51cGRhdGVTdGF0ZShkLkRFQUQpKX0saS5wcm90b3R5cGUuZ2V0RXJyb3JNZXNzYWdlPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2Vycm9yTWVzc2FnZX0saS5wcm90b3R5cGUuaGFzU3RyZWFtVXJsUHJvdmlkZXI9ZnVuY3Rpb24oKXtyZXR1cm4hIXRoaXMuX3N0cmVhbVVybFByb3ZpZGVyfX0sZnVuY3Rpb24odCxlLG4pe3ZhciBpLHI9bigxKSxvPW4oNTIpLHM9big1OCksYT1udWxsLHU9bigzNiksaD17TkVXOlwibmV3XCIsUkVRVUVTVEVEOlwicmVxdWVzdGVkXCIsQ09NUExFVEU6XCJjb21wbGV0ZVwiLFRJTUVPVVQ6XCJ0aW1lb3V0XCIsRk9SQklEREVOOlwiZm9yYmlkZGVuXCIsTk9UX0ZPVU5EOlwibm90LWZvdW5kXCIsU0VSVkVSX0VSUk9SOlwic2VydmVyLWVycm9yXCIsRkFJTEVEOlwiZmFpbGVkXCJ9LGM9e0ZJUlNUOlwiI0VYVE0zVVwiLFBMQVlMSVNUOlwiI0VYVC1YLVNUUkVBTS1JTkY6XCIsU0VHTUVOVDpcIiNFWFRJTkY6XCIsRU5EX1RBRzpcIiNFWFQtWC1FTkRMSVNUXCIsRU5DUllQVElPTjpcIiNFWFQtWC1LRVk6XCJ9O3QuZXhwb3J0cz1pPWZ1bmN0aW9uKHQsZSl7dGhpcy5fbG9nZ2VyPXQsdGhpcy5fZHVyYXRpb249MCx0aGlzLnNldFVyaShlKX0saS5FdmVudHM9e1BMQVlMSVNUX0xPQURFRDpcInBsYXlsaXN0LWxvYWRlZFwiLFBMQVlMSVNUX1BBUlNFX0VSUk9SOlwicGxheWxpc3QtcGFyc2UtZXJyb3JcIixQTEFZTElTVF9GQUlMRUQ6XCJwbGF5bGlzdC1mYWlsZWRcIixTRUdNRU5UX0xPQURFRDpcInNlZ21lbnQtbG9hZGVkXCIsU0VHTUVOVF9QUk9HUkVTUzpcInNlZ21lbnQtcHJvZ3Jlc3NcIixTRUdNRU5UX0ZBSUxFRDpcInNlZ21lbnQtZmFpbGVkXCIsU0VHTUVOVF9DQU5DRUxFRDpcInNlZ21lbnQtY2FuY2VsZWRcIn0saS5TdGF0dXM9aCxyKGkucHJvdG90eXBlLHUpLGkuU2VnbWVudD1mdW5jdGlvbih0LGUsbixpLG8pe3IodGhpcyx7dG9vbGtpdDp0LHVyaTplLHN0YXJ0UG9zaXRpb246bixlbmRQb3NpdGlvbjpuK2ksZHVyYXRpb246aSxpbmRleDpvLGRhdGE6bnVsbCxzdGF0dXM6aC5ORVcsaXNMYXN0OiExLHRpbWVzRmFpbGVkOjAsbG9hZGVkOjAsdG90YWw6LTEsYWJvcnRlZDohMSx4aHI6bnVsbCxtaW1lVHlwZTpcImF1ZGlvL21wZWdcIn0pLHRoaXMuX2xvZ2dlcj10Ll9sb2dnZXJ9LGkuU2VnbWVudC5wcm90b3R5cGUuY29udGFpbnNUaW1lPWZ1bmN0aW9uKHQpe3JldHVybiB0Pj10aGlzLnN0YXJ0UG9zaXRpb24mJnQ8PXRoaXMuZW5kUG9zaXRpb259LGkuU2VnbWVudC5wcm90b3R5cGUuaXNDb21wbGV0ZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLnN0YXR1cz09PWguQ09NUExFVEV9LGkuU2VnbWVudC5wcm90b3R5cGUuaGFzRmFpbGVkPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc3RhdHVzPT09aC5USU1FT1VUfHx0aGlzLnN0YXR1cz09PWguRk9SQklEREVOfHx0aGlzLnN0YXR1cz09PWguTk9UX0ZPVU5EfHx0aGlzLnN0YXR1cz09PWguU0VSVkVSX0VSUk9SfHx0aGlzLnN0YXR1cz09PWguRkFJTEVEfSxpLlNlZ21lbnQucHJvdG90eXBlLmlzTmV3PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc3RhdHVzPT09aC5ORVd9LGkuU2VnbWVudC5wcm90b3R5cGUuaGFzQmVlblJlcXVlc3RlZD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnN0YXR1cz09PWguUkVRVUVTVEVEfSxpLlNlZ21lbnQucHJvdG90eXBlLnNjaGVkdWxlUmV0cnk9ZnVuY3Rpb24odCxlLG4pe3ZhciBpPXRoaXM7dGhpcy5fcmV0cnlUaW1lcj13aW5kb3cuc2V0VGltZW91dChmdW5jdGlvbigpe2UuY2FsbChuLGkpfSx0KX0saS5TZWdtZW50LnByb3RvdHlwZS5jYW5jZWw9ZnVuY3Rpb24oKXt0aGlzLl9sb2dnZXIubG9nKFwic2VnbWVudCBjYW5jZWxsZWQsIGNsZWFyaW5nIHRpbWVvdXQ6IFwiK3RoaXMuaW5kZXgpLHdpbmRvdy5jbGVhclRpbWVvdXQodGhpcy5fcmV0cnlUaW1lciksdGhpcy54aHImJih0aGlzLl9sb2dnZXIubG9nKFwid2lsbCBhYm9ydCAmIHJlc2V0IHNlZ21lbnQ6IFwiK3RoaXMuaW5kZXgpLHRoaXMuc3RhdHVzPWguTkVXLHRoaXMuYWJvcnRlZD0hMCx0aGlzLmRhdGE9bnVsbCx0aGlzLnRpbWVzRmFpbGVkPTAsdGhpcy54aHIuYWJvcnQoKSx0aGlzLnhocj1udWxsLHRoaXMudG9vbGtpdC50cmlnZ2VyKGkuRXZlbnRzLlNFR01FTlRfQ0FOQ0VMRUQsdGhpcykpO1xufSxpLnByb3RvdHlwZS5zZXRVcmk9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5fdXJpPXQ7ZS5pbmRleE9mKFwiP1wiKT4tMSYmKGU9ZS5zdWJzdHIoMCxlLmluZGV4T2YoXCI/XCIpKSksdGhpcy5fYmFzZVVSST1lLnN1YnN0cigwLGUubGFzdEluZGV4T2YoXCIvXCIpKzEpfSxpLnByb3RvdHlwZS51cGRhdGVQbGF5bGlzdD1mdW5jdGlvbigpe3ZhciB0PSExLGU9bmV3IFhNTEh0dHBSZXF1ZXN0O2Uub3BlbihcIkdFVFwiLHRoaXMuX3VyaSwhMCksZS5yZXNwb25zZVR5cGU9XCJ0ZXh0XCIsdGhpcy5fbG9nZ2VyLmxvZyhcImRvd25sb2FkaW5nIHBsYXlsaXN0XCIpO3ZhciBuPWZ1bmN0aW9uKG4pe3R8fCh0PSEwLHRoaXMudHJpZ2dlcihpLkV2ZW50cy5QTEFZTElTVF9GQUlMRUQsZS5zdGF0dXMpKX0uYmluZCh0aGlzKTtlLm9ubG9hZD1mdW5jdGlvbih0KXtyZXR1cm4gMjAwIT09ZS5zdGF0dXM/dm9pZCBuKCk6KHRoaXMuX3NlZ21lbnRzPVtdLHRoaXMuX2R1cmF0aW9uPTAsdGhpcy5fcGFyc2VQbGF5bGlzdChlLnJlc3BvbnNlVGV4dCk/KHRoaXMuZ2V0TGFzdFNlZ21lbnQoKS5pc0xhc3Q9ITAsdGhpcy5fbG9nZ2VyLmxvZyhcInBsYXlsaXN0IGRvd25sb2FkIGNvbXBsZXRlXCIpLHZvaWQgdGhpcy5fcmV0cmlldmVFbmNyeXB0aW9uS2V5KGZ1bmN0aW9uKCl7dGhpcy50cmlnZ2VyKGkuRXZlbnRzLlBMQVlMSVNUX0xPQURFRCl9KSk6KHRoaXMuX2xvZ2dlci5sb2coXCJlcnJvciBwYXJzaW5nIHBsYXlsaXN0XCIpLHZvaWQgdGhpcy50cmlnZ2VyKGkuRXZlbnRzLlBMQVlMSVNUX1BBUlNFX0VSUk9SKSkpfS5iaW5kKHRoaXMpLGUub25lcnJvcj1mdW5jdGlvbih0KXtuKHQpfS5iaW5kKHRoaXMpLGUuc2VuZCgpfSxpLnByb3RvdHlwZS5fcGFyc2VQbGF5bGlzdD1mdW5jdGlvbih0KXtmb3IodmFyIGUsbixyLG89dC5zcGxpdChcIlxcblwiKSxzPSExLGE9MCx1PTA7YTxvLmxlbmd0aDspZT1vW2ErK10sMD09PWUuaW5kZXhPZihjLlNFR01FTlQpPyhyPTFlMypOdW1iZXIoZS5zdWJzdHIoOCxlLmluZGV4T2YoXCIsXCIpLTgpKSxuPXRoaXMuX2NyZWF0ZVNlZ21lbnRVUkwob1thXSksdGhpcy5fYWRkU2VnbWVudChuZXcgaS5TZWdtZW50KHRoaXMsbix0aGlzLl9kdXJhdGlvbixyLHUrKykpLGErKyk6MD09PWUuaW5kZXhPZihjLkVOQ1JZUFRJT04pP3RoaXMuX3BhcnNlUGxheWxpc3RFbmNyeXB0aW9uSGVhZGVyKGUpOjA9PT1lLmluZGV4T2YoYy5FTkRfVEFHKSYmKHM9ITApO3JldHVybiEoMD09PXRoaXMuZ2V0TnVtU2VnbWVudHMoKXx8IXMpfSxpLnByb3RvdHlwZS5fYWRkU2VnbWVudD1mdW5jdGlvbih0KXt0aGlzLl9zZWdtZW50cy5wdXNoKHQpLHRoaXMuX2R1cmF0aW9uKz10LmR1cmF0aW9ufSxpLnByb3RvdHlwZS5fcGFyc2VQbGF5bGlzdEVuY3J5cHRpb25IZWFkZXI9ZnVuY3Rpb24odCl7dmFyIGUsbixpLHI9dC5zdWJzdHIoYy5FTkNSWVBUSU9OLmxlbmd0aCkuc3BsaXQoXCIsXCIpO2lmKHMocixmdW5jdGlvbih0KXt0LmluZGV4T2YoXCJNRVRIT0RcIik+PTA/bj10LnNwbGl0KFwiPVwiKVsxXTp0LmluZGV4T2YoXCJVUklcIik+PTA/ZT10LnNwbGl0KFwiPVwiKVsxXTp0LmluZGV4T2YoXCJJVlwiKT49MCYmKGk9dC5zcGxpdChcIj1cIilbMV0pfSksIShuJiZlJiZuLmxlbmd0aCYmZS5sZW5ndGgpKXRocm93IG5ldyBFcnJvcihcIkZhaWxlZCB0byBwYXJzZSBNM1U4IGVuY3J5cHRpb24gaGVhZGVyXCIpO249bi50cmltKCksZT1lLnRyaW0oKS5yZXBsYWNlKC9cIi9nLFwiXCIpLHRoaXMuX2VuY3J5cHRpb25NZXRob2Q9bix0aGlzLl9lbmNyeXB0aW9uS2V5VXJpPWUsaSYmaS5sZW5ndGg/KHRoaXMuX2VuY3J5cHRpb25JdkhleFN0cmluZz1pLnRyaW0oKSx0aGlzLl9wYXJzZUVuY3J5cHRpb25JdkhleFN0cmluZygpKTp0aGlzLl9lbmNyeXB0aW9uSXY9bnVsbH0saS5wcm90b3R5cGUuX3BhcnNlRW5jcnlwdGlvbkl2SGV4U3RyaW5nPWZ1bmN0aW9uKCl7dmFyIHQsZT10aGlzLl9lbmNyeXB0aW9uSXZIZXhTdHJpbmcucmVwbGFjZShcIjB4XCIsXCJcIiksbj1uZXcgVWludDE2QXJyYXkoOCksaT0wO2lmKGUubGVuZ3RoJTQhPT0wKXRocm93IG5ldyBFcnJvcihcIkZhaWxlZCB0byBwYXJzZSBNM1U4IGVuY3J5cHRpb24gSVYgKGxlbmd0aCBpcyBub3QgbXVsdGlwbGUgb2YgNClcIik7Zm9yKDtpPGUubGVuZ3RoO2krPTQpe2lmKHQ9cGFyc2VJbnQoZS5zdWJzdHIoaSw0KSwxNiksaXNOYU4odCkpdGhyb3cgbmV3IEVycm9yKFwiRmFpbGVkIHRvIHBhcnNlIGhleCBudW1iZXIgaW4gSVYgc3RyaW5nXCIpO25baS80XT10fXRoaXMuX2VuY3J5cHRpb25Jdj1ufSxpLnByb3RvdHlwZS5fZW5jcnlwdGlvbkl2Rm9yU2VnbWVudD1mdW5jdGlvbih0KXt2YXIgZT1uZXcgRGF0YVZpZXcobmV3IEFycmF5QnVmZmVyKDE2KSk7cmV0dXJuIGUuc2V0VWludDMyKDAsdC5pbmRleCwhMCksZS5idWZmZXJ9LGkucHJvdG90eXBlLl9yZXRyaWV2ZUVuY3J5cHRpb25LZXk9ZnVuY3Rpb24odCl7aWYodCl7aWYoIXRoaXMuX2VuY3J5cHRpb25LZXlVcmkpcmV0dXJuIHZvaWQgdC5jYWxsKHRoaXMpO3ZhciBlPXRoaXMuX2VuY3J5cHRpb25LZXlVcmksbj1uZXcgWE1MSHR0cFJlcXVlc3Q7bi5vcGVuKFwiR0VUXCIsZSwhMCksbi5yZXNwb25zZVR5cGU9XCJhcnJheWJ1ZmZlclwiLG4ub25sb2FkPW8oZnVuY3Rpb24oaSl7MjAwPT09bi5zdGF0dXM/dGhpcy5fZW5jcnlwdGlvbktleT1uZXcgVWludDhBcnJheShuLnJlc3BvbnNlKTp0aGlzLl9sb2dnZXIubG9nKFwiRmFpbGVkIHRvIHJldHJpZXZlIGVuY3J5cHRpb24ga2V5IGZyb20gXCIrZStcIiwgcmV0dXJuZWQgc3RhdHVzIFwiK24uc3RhdHVzKSx0LmNhbGwodGhpcyl9LHRoaXMpLG4uc2VuZCgpLHRoaXMuX2xvZ2dlci5sb2coXCJEb3dubG9hZGluZyBlbmNyeXB0aW9uIGtleSBmcm9tIFwiK2UpfX0saS5wcm90b3R5cGUuX3JlbW92ZUVuY3J5cHRpb25QYWRkaW5nQnl0ZXM9ZnVuY3Rpb24odCl7dmFyIGU9dC5kYXRhW3QuZGF0YS5ieXRlTGVuZ3RoLTFdO2U/KHRoaXMuX2xvZ2dlci5sb2coXCJEZXRlY3RlZCBQS0NTNyBwYWRkaW5nIGxlbmd0aCBvZiBcIitlK1wiIGJ5dGVzLCBzbGljaW5nIHNlZ21lbnQuXCIpLHQuZGF0YT10LmRhdGEuc3ViYXJyYXkoMCx0LmRhdGEuYnl0ZUxlbmd0aC1lKSk6dGhpcy5fbG9nZ2VyLmxvZyhcIk5vIHBhZGRpbmcgZGV0ZWN0ZWQgKGxhc3QgYnl0ZSBpcyB6ZXJvKVwiKX0saS5wcm90b3R5cGUuZGVjcnlwdFNlZ21lbnRBRVMxMjg9ZnVuY3Rpb24odCl7aWYodGhpcy5fbG9nZ2VyLmxvZyhcIkRlY3J5cHRpbmcgQUVTLTEyOCBjeXBoZXJlZCBzZWdtZW50IC4uLlwiKSwhYSl0aHJvdyBuZXcgRXJyb3IoXCJBRVMgZGVjcnlwdGlvbiBub3QgYnVpbHQtaW5cIik7dmFyIGU9YS5jaXBoZXIuY3JlYXRlRGVjaXBoZXIoXCJBRVMtQ0JDXCIsYS51dGlsLmNyZWF0ZUJ1ZmZlcih0aGlzLl9lbmNyeXB0aW9uS2V5KSksbj0wLGk9dC5kYXRhLmJ5dGVMZW5ndGgscj10aGlzLl9lbmNyeXB0aW9uSXZ8fHRoaXMuX2VuY3J5cHRpb25JdkZvclNlZ21lbnQodCk7Zm9yKHRoaXMuX2xvZ2dlci5sb2coXCJVc2luZyBJViAtPlwiKSxlLnN0YXJ0KHtpdjphLnV0aWwuY3JlYXRlQnVmZmVyKHIpfSksZS51cGRhdGUoYS51dGlsLmNyZWF0ZUJ1ZmZlcih0LmRhdGEpKSxlLmZpbmlzaCgpLHQuZGF0YT1uZXcgVWludDhBcnJheShpKTtpPm47bisrKXQuZGF0YVtuXT1lLm91dHB1dC5nZXRCeXRlKCk7dGhpcy5fcmVtb3ZlRW5jcnlwdGlvblBhZGRpbmdCeXRlcyh0KX0saS5wcm90b3R5cGUuaXNBRVMxMjhFbmNyeXB0ZWQ9ZnVuY3Rpb24oKXtyZXR1cm5cIkFFUy0xMjhcIj09PXRoaXMuX2VuY3J5cHRpb25NZXRob2R9LGkucHJvdG90eXBlLmdldEVuY3J5cHRpb25LZXlVcmk9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZW5jcnlwdGlvbktleVVyaX0saS5wcm90b3R5cGUuZ2V0RW5jcnlwdGlvbkl2PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2VuY3J5cHRpb25Jdn0saS5wcm90b3R5cGUuZ2V0RW5jcnlwdGlvbktleT1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9lbmNyeXB0aW9uS2V5fSxpLnByb3RvdHlwZS5fY3JlYXRlU2VnbWVudFVSTD1mdW5jdGlvbih0KXtyZXR1cm5cImh0dHA6Ly9cIj09PXQuc3Vic3RyKDAsNyl8fFwiaHR0cHM6Ly9cIj09PXQuc3Vic3RyKDAsOCl8fFwiL1wiPT09dC5zdWJzdHIoMCwxKT90OnRoaXMuX2Jhc2VVUkkrdH0saS5wcm90b3R5cGUuX2hhbmRsZUxvYWRTZWdtZW50RmFpbHVyZT1mdW5jdGlvbih0LGUsbil7dC5hYm9ydGVkfHwodGhpcy5fbG9nZ2VyLmxvZyhcInNlZ21lbnQgYWJvcnRlZDogXCIrdC5hYm9ydGVkKSx0aGlzLl9sb2dnZXIubG9nKFwic2VnbWVudCBsb2FkaW5nIGZhaWx1cmU6IEhUVFAgcmVzcG9uc2Ugc3RhdHVzOiBcIitlLnN0YXR1cyksMD09PWUuc3RhdHVzP3Quc3RhdHVzPWguVElNRU9VVDo0MDM9PT1lLnN0YXR1cz90LnN0YXR1cz1oLkZPUkJJRERFTjo0MDQ9PT1lLnN0YXR1cz90LnN0YXR1cz1oLk5PVF9GT1VORDplLnN0YXR1cz49NTAwP3Quc3RhdHVzPWguU0VSVkVSX0VSUk9SOnQuc3RhdHVzPWguRkFJTEVELHQudGltZXNGYWlsZWQrKyx0aGlzLnRyaWdnZXIoaS5FdmVudHMuU0VHTUVOVF9GQUlMRUQsdCkpfSxpLnByb3RvdHlwZS5sb2FkU2VnbWVudD1mdW5jdGlvbih0KXt2YXIgZT0hMSxuPW5ldyBYTUxIdHRwUmVxdWVzdCxyPXQudXJpLG89ZnVuY3Rpb24oaSl7ZXx8KGU9ITAsdGhpcy5faGFuZGxlTG9hZFNlZ21lbnRGYWlsdXJlKHQsbixpKSl9LmJpbmQodGhpcyk7KHQuaGFzQmVlblJlcXVlc3RlZCgpfHx0LmlzQ29tcGxldGUoKSkmJnRoaXMuX2xvZ2dlci5sb2coXCJzZWdtZW50IGNhbnQgYmUgbG9hZGVkLCByZXF1ZXN0ZWQ6IFwiLCEhdC5oYXNCZWVuUmVxdWVzdGVkKCksXCIgY29tcGxldGU6IFwiLHQuaXNDb21wbGV0ZSgpKSxuLm9wZW4oXCJHRVRcIixyLCEwKSxuLnJlc3BvbnNlVHlwZT1cImFycmF5YnVmZmVyXCIsbi5vbmxvYWQ9ZnVuY3Rpb24oKXtpZighdC5hYm9ydGVkKXtpZigyMDAhPT1uLnN0YXR1cylyZXR1cm4gdm9pZCBvKCk7dGhpcy5fbG9nZ2VyLmxvZyhcImRvd25sb2FkIG9mIHNlZ21lbnQgXCIrdC5pbmRleCtcIiBjb21wbGV0ZVwiKSx0LnN0YXR1cz1oLkNPTVBMRVRFLHQuZGF0YT1uZXcgVWludDhBcnJheShuLnJlc3BvbnNlKSx0LmRvd25sb2FkVGltZT1EYXRlLm5vdygpLXQuZG93bmxvYWRTdGFydFRpbWUsdGhpcy50cmlnZ2VyKGkuRXZlbnRzLlNFR01FTlRfTE9BREVELHQpfX0uYmluZCh0aGlzKSxuLm9ucHJvZ3Jlc3M9ZnVuY3Rpb24oZSl7dC5hYm9ydGVkfHxlLmxvYWRlZCYmZS50b3RhbCYmKHQubG9hZGVkPWUubG9hZGVkLHQudG90YWw9ZS50b3RhbCx0aGlzLnRyaWdnZXIoaS5FdmVudHMuU0VHTUVOVF9QUk9HUkVTUyx0KSl9LmJpbmQodGhpcyksbi5vbmVycm9yPWZ1bmN0aW9uKHQpe28odCl9LmJpbmQodGhpcyksdGhpcy5fbG9nZ2VyLmxvZyhcInJlcXVlc3Rpbmcgc2VnbWVudCBcIit0LmluZGV4K1wiIGZyb20gXCIrciksdC54aHI9bix0LmFib3J0ZWQ9ITEsdC5kb3dubG9hZFN0YXJ0VGltZT1EYXRlLm5vdygpLHQuc3RhdHVzPWguUkVRVUVTVEVELG4uc2VuZCgpfSxpLnByb3RvdHlwZS5nZXRTZWdtZW50PWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLl9zZWdtZW50cyYmdGhpcy5fc2VnbWVudHNbdF0/dGhpcy5fc2VnbWVudHNbdF06bnVsbH0saS5wcm90b3R5cGUuZ2V0U2VnbWVudEluZGV4Rm9yVGltZT1mdW5jdGlvbih0KXt2YXIgZSxuO2lmKHQ+dGhpcy5fZHVyYXRpb258fDA+dHx8IXRoaXMuX3NlZ21lbnRzfHwwPT09dGhpcy5fc2VnbWVudHMubGVuZ3RoKXJldHVybi0xO2ZvcihlPU1hdGguZmxvb3IodGhpcy5fc2VnbWVudHMubGVuZ3RoKih0L3RoaXMuX2R1cmF0aW9uKSksbj10aGlzLl9zZWdtZW50c1tlXTshKG4uc3RhcnRQb3NpdGlvbjw9dCYmbi5zdGFydFBvc2l0aW9uK24uZHVyYXRpb24+dCk7KW4uc3RhcnRQb3NpdGlvbituLmR1cmF0aW9uPj10P2UtLTplKyssbj10aGlzLl9zZWdtZW50c1tlXTtyZXR1cm4gZX0saS5wcm90b3R5cGUuZ2V0U2VnbWVudEZvclRpbWU9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5nZXRTZWdtZW50SW5kZXhGb3JUaW1lKHQpO3JldHVybiBlPj0wP3RoaXMuX3NlZ21lbnRzW2VdOm51bGx9LGkucHJvdG90eXBlLmdldER1cmF0aW9uPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2R1cmF0aW9ufSxpLnByb3RvdHlwZS5nZXROdW1TZWdtZW50cz1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9zZWdtZW50cy5sZW5ndGh9LGkucHJvdG90eXBlLmdldExhc3RTZWdtZW50PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3NlZ21lbnRzLmxlbmd0aD90aGlzLl9zZWdtZW50c1t0aGlzLl9zZWdtZW50cy5sZW5ndGgtMV06bnVsbH19LGZ1bmN0aW9uKHQsZSxuKXt2YXIgaT1uKDUzKSxyPW4oNTYpLG89big1Nykscz0xLGE9MzIsdT1vKGZ1bmN0aW9uKHQsZSxuKXt2YXIgbz1zO2lmKG4ubGVuZ3RoKXt2YXIgaD1yKG4sdS5wbGFjZWhvbGRlcik7b3w9YX1yZXR1cm4gaSh0LG8sZSxuLGgpfSk7dS5wbGFjZWhvbGRlcj17fSx0LmV4cG9ydHM9dX0sZnVuY3Rpb24odCxlLG4peyhmdW5jdGlvbihlKXtmdW5jdGlvbiBpKHQsZSxuKXtmb3IodmFyIGk9bi5sZW5ndGgscj0tMSxvPVAodC5sZW5ndGgtaSwwKSxzPS0xLGE9ZS5sZW5ndGgsdT1BcnJheShhK28pOysrczxhOyl1W3NdPWVbc107Zm9yKDsrK3I8aTspdVtuW3JdXT10W3JdO2Zvcig7by0tOyl1W3MrK109dFtyKytdO3JldHVybiB1fWZ1bmN0aW9uIHIodCxlLG4pe2Zvcih2YXIgaT0tMSxyPW4ubGVuZ3RoLG89LTEscz1QKHQubGVuZ3RoLXIsMCksYT0tMSx1PWUubGVuZ3RoLGg9QXJyYXkocyt1KTsrK288czspaFtvXT10W29dO2Zvcih2YXIgYz1vOysrYTx1OyloW2MrYV09ZVthXTtmb3IoOysraTxyOyloW2MrbltpXV09dFtvKytdO3JldHVybiBofWZ1bmN0aW9uIG8odCxuKXtmdW5jdGlvbiBpKCl7dmFyIG89dGhpcyYmdGhpcyE9PWUmJnRoaXMgaW5zdGFuY2VvZiBpP3I6dDtyZXR1cm4gby5hcHBseShuLGFyZ3VtZW50cyl9dmFyIHI9cyh0KTtyZXR1cm4gaX1mdW5jdGlvbiBzKHQpe3JldHVybiBmdW5jdGlvbigpe3ZhciBlPWFyZ3VtZW50cztzd2l0Y2goZS5sZW5ndGgpe2Nhc2UgMDpyZXR1cm4gbmV3IHQ7Y2FzZSAxOnJldHVybiBuZXcgdChlWzBdKTtjYXNlIDI6cmV0dXJuIG5ldyB0KGVbMF0sZVsxXSk7Y2FzZSAzOnJldHVybiBuZXcgdChlWzBdLGVbMV0sZVsyXSk7Y2FzZSA0OnJldHVybiBuZXcgdChlWzBdLGVbMV0sZVsyXSxlWzNdKTtjYXNlIDU6cmV0dXJuIG5ldyB0KGVbMF0sZVsxXSxlWzJdLGVbM10sZVs0XSk7Y2FzZSA2OnJldHVybiBuZXcgdChlWzBdLGVbMV0sZVsyXSxlWzNdLGVbNF0sZVs1XSk7Y2FzZSA3OnJldHVybiBuZXcgdChlWzBdLGVbMV0sZVsyXSxlWzNdLGVbNF0sZVs1XSxlWzZdKX12YXIgbj1wKHQucHJvdG90eXBlKSxpPXQuYXBwbHkobixlKTtyZXR1cm4gZihpKT9pOm59fWZ1bmN0aW9uIGEodCxuLG8sdSxoLGMsZixwLFQsYil7ZnVuY3Rpb24gSSgpe2Zvcih2YXIgeT1hcmd1bWVudHMubGVuZ3RoLHY9eSxFPUFycmF5KHkpO3YtLTspRVt2XT1hcmd1bWVudHNbdl07aWYodSYmKEU9aShFLHUsaCkpLGMmJihFPXIoRSxjLGYpKSxEfHxrKXt2YXIgdz1JLnBsYWNlaG9sZGVyLHg9ZyhFLHcpO2lmKHktPXgubGVuZ3RoLGI+eSl7dmFyIEM9cD9kKHApOnZvaWQgMCxGPVAoYi15LDApLFU9RD94OnZvaWQgMCxCPUQ/dm9pZCAwOngsSD1EP0U6dm9pZCAwLGo9RD92b2lkIDA6RTtufD1EP1M6QSxuJj1+KEQ/QTpTKSxNfHwobiY9fihffG0pKTt2YXIgRz1hKHQsbixvLEgsVSxqLEIsQyxULEYpO3JldHVybiBHLnBsYWNlaG9sZGVyPXcsR319dmFyIFk9Tz9vOnRoaXMsVj1SP1lbdF06dDtyZXR1cm4gcCYmKEU9bChFLHApKSxMJiZUPEUubGVuZ3RoJiYoRS5sZW5ndGg9VCksdGhpcyYmdGhpcyE9PWUmJnRoaXMgaW5zdGFuY2VvZiBJJiYoVj1OfHxzKHQpKSxWLmFwcGx5KFksRSl9dmFyIEw9biZ3LE89biZfLFI9biZtLEQ9biZ2LE09biZ5LGs9biZFLE49Uj92b2lkIDA6cyh0KTtyZXR1cm4gSX1mdW5jdGlvbiB1KHQsbixpLHIpe2Z1bmN0aW9uIG8oKXtmb3IodmFyIG49LTEscz1hcmd1bWVudHMubGVuZ3RoLGg9LTEsYz1yLmxlbmd0aCxsPUFycmF5KGMrcyk7KytoPGM7KWxbaF09cltoXTtmb3IoO3MtLTspbFtoKytdPWFyZ3VtZW50c1srK25dO3ZhciBmPXRoaXMmJnRoaXMhPT1lJiZ0aGlzIGluc3RhbmNlb2Ygbz91OnQ7cmV0dXJuIGYuYXBwbHkoYT9pOnRoaXMsbCl9dmFyIGE9biZfLHU9cyh0KTtyZXR1cm4gb31mdW5jdGlvbiBoKHQsZSxuLGkscixzLGgsYyl7dmFyIGw9ZSZtO2lmKCFsJiZcImZ1bmN0aW9uXCIhPXR5cGVvZiB0KXRocm93IG5ldyBUeXBlRXJyb3IoVCk7dmFyIGY9aT9pLmxlbmd0aDowO2lmKGZ8fChlJj1+KFN8QSksaT1yPXZvaWQgMCksZi09cj9yLmxlbmd0aDowLGUmQSl7dmFyIGQ9aSxwPXI7aT1yPXZvaWQgMH12YXIgZz1bdCxlLG4saSxyLGQscCxzLGgsY107aWYoZ1s5XT1udWxsPT1jP2w/MDp0Lmxlbmd0aDpQKGMtZiwwKXx8MCxlPT1fKXZhciB5PW8oZ1swXSxnWzJdKTtlbHNlIHk9ZSE9UyYmZSE9KF98Uyl8fGdbNF0ubGVuZ3RoP2EuYXBwbHkodm9pZCAwLGcpOnUuYXBwbHkodm9pZCAwLGcpO3JldHVybiB5fWZ1bmN0aW9uIGModCxlKXtyZXR1cm4gdD1cIm51bWJlclwiPT10eXBlb2YgdHx8Yi50ZXN0KHQpPyt0Oi0xLGU9bnVsbD09ZT9MOmUsdD4tMSYmdCUxPT0wJiZlPnR9ZnVuY3Rpb24gbCh0LGUpe2Zvcih2YXIgbj10Lmxlbmd0aCxpPUkoZS5sZW5ndGgsbikscj1kKHQpO2ktLTspe3ZhciBvPWVbaV07dFtpXT1jKG8sbik/cltvXTp2b2lkIDB9cmV0dXJuIHR9ZnVuY3Rpb24gZih0KXt2YXIgZT10eXBlb2YgdDtyZXR1cm4hIXQmJihcIm9iamVjdFwiPT1lfHxcImZ1bmN0aW9uXCI9PWUpfXZhciBkPW4oNTQpLHA9big1NSksZz1uKDU2KSxfPTEsbT0yLHk9NCx2PTgsRT0xNixTPTMyLEE9NjQsdz0xMjgsVD1cIkV4cGVjdGVkIGEgZnVuY3Rpb25cIixiPS9eXFxkKyQvLFA9TWF0aC5tYXgsST1NYXRoLm1pbixMPTkwMDcxOTkyNTQ3NDA5OTE7dC5leHBvcnRzPWh9KS5jYWxsKGUsZnVuY3Rpb24oKXtyZXR1cm4gdGhpc30oKSl9LGZ1bmN0aW9uKHQsZSl7ZnVuY3Rpb24gbih0LGUpe3ZhciBuPS0xLGk9dC5sZW5ndGg7Zm9yKGV8fChlPUFycmF5KGkpKTsrK248aTspZVtuXT10W25dO3JldHVybiBlfXQuZXhwb3J0cz1ufSxmdW5jdGlvbih0LGUpe2Z1bmN0aW9uIG4odCl7dmFyIGU9dHlwZW9mIHQ7cmV0dXJuISF0JiYoXCJvYmplY3RcIj09ZXx8XCJmdW5jdGlvblwiPT1lKX12YXIgaT1mdW5jdGlvbigpe2Z1bmN0aW9uIHQoKXt9cmV0dXJuIGZ1bmN0aW9uKGUpe2lmKG4oZSkpe3QucHJvdG90eXBlPWU7dmFyIGk9bmV3IHQ7dC5wcm90b3R5cGU9dm9pZCAwfXJldHVybiBpfHx7fX19KCk7dC5leHBvcnRzPWl9LGZ1bmN0aW9uKHQsZSl7ZnVuY3Rpb24gbih0LGUpe2Zvcih2YXIgbj0tMSxyPXQubGVuZ3RoLG89LTEscz1bXTsrK248cjspdFtuXT09PWUmJih0W25dPWksc1srK29dPW4pO3JldHVybiBzfXZhciBpPVwiX19sb2Rhc2hfcGxhY2Vob2xkZXJfX1wiO3QuZXhwb3J0cz1ufSwxMSxmdW5jdGlvbih0LGUsbil7ZnVuY3Rpb24gaSh0LGUpe3JldHVybiBmdW5jdGlvbihuLGkscil7cmV0dXJuXCJmdW5jdGlvblwiPT10eXBlb2YgaSYmdm9pZCAwPT09ciYmYShuKT90KG4saSk6ZShuLHMoaSxyLDMpKX19dmFyIHI9big1OSksbz1uKDYwKSxzPW4oNjUpLGE9big2NCksdT1pKHIsbyk7dC5leHBvcnRzPXV9LGZ1bmN0aW9uKHQsZSl7ZnVuY3Rpb24gbih0LGUpe2Zvcih2YXIgbj0tMSxpPXQubGVuZ3RoOysrbjxpJiZlKHRbbl0sbix0KSE9PSExOyk7cmV0dXJuIHR9dC5leHBvcnRzPW59LFsxMzQsNjFdLFsxMzIsNjIsNjMsNjRdLDUsNiw3LDksZnVuY3Rpb24odCxlLG4pe3ZhciBpLHI9bigzNiksbz1uKDE2KSxzPW4oNDcpLmJpbmRBbGwsYT1uKDEpO3QuZXhwb3J0cz1pPWZ1bmN0aW9uKHQsZSl7cyh0aGlzLFtcIl9vbk1TRUluaXRcIixcIl9vbk1TRURpc3Bvc2VcIixcIl9vblNvdXJjZUJ1ZmZlclVwZGF0ZVwiXSksdGhpcy5taW1lVHlwZT1lLHRoaXMuX2xvZ2dlcj10LHRoaXMuX2lzQnVmZmVyUHJlcGFyZWQ9ITEsdGhpcy5fc291cmNlQnVmZmVyUHRzT2Zmc2V0PTAsdGhpcy5fc2VnbWVudHNBd2FpdGluZ0FwcGVuZGFuY2U9W10sdGhpcy5faXNOb3RSZWFkeT0hMCx0aGlzLl9zb3VyY2VCdWZmZXI9bnVsbCx0aGlzLl9tZWRpYVNvdXJjZT1uZXcgTWVkaWFTb3VyY2UsdGhpcy5fbWVkaWFTb3VyY2UuYWRkRXZlbnRMaXN0ZW5lcihcInNvdXJjZW9wZW5cIix0aGlzLl9vbk1TRUluaXQsITEpLHRoaXMuX21lZGlhU291cmNlLmFkZEV2ZW50TGlzdGVuZXIoXCJzb3VyY2VjbG9zZVwiLHRoaXMuX29uTVNFRGlzcG9zZSwhMSksdGhpcy5fbWVkaWFFbGVtPW8uY3JlYXRlQXVkaW9FbGVtZW50KCksdGhpcy5fbWVkaWFFbGVtLnNyYz13aW5kb3cuVVJMLmNyZWF0ZU9iamVjdFVSTCh0aGlzLl9tZWRpYVNvdXJjZSl9LGkuRXZlbnRzPXtTT1VSQ0VfUkVBRFk6XCJzb3VyY2UtcmVhZHlcIixTT1VSQ0VfREVTVFJPWUVEOlwic291cmNlLWRlc3Ryb3lcIixTT1VSQ0VfRVJST1I6XCJzb3VyY2UtZXJyb3JcIixTRUdNRU5UX0FQUEVOREVEOlwic2VnbWVudC1hcHBlbmRlZFwifSxhKGkucHJvdG90eXBlLHIpLGEoaS5wcm90b3R5cGUse19vbk1TRUluaXQ6ZnVuY3Rpb24oKXt0aGlzLl9sb2dnZXIubG9nKFwic291cmNlIG9wZW4gaGFuZGxlclwiKSx0aGlzLl9pc05vdFJlYWR5PSExLHRoaXMuX21lZGlhU291cmNlLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJzb3VyY2VvcGVuXCIsdGhpcy5fb25NU0VJbml0LCExKSx0aGlzLl9zb3VyY2VCdWZmZXI9dGhpcy5fbWVkaWFTb3VyY2UuYWRkU291cmNlQnVmZmVyKHRoaXMubWltZVR5cGUpLHRoaXMuX3NvdXJjZUJ1ZmZlci5hZGRFdmVudExpc3RlbmVyKFwidXBkYXRlXCIsdGhpcy5fb25Tb3VyY2VCdWZmZXJVcGRhdGUpLHRoaXMudHJpZ2dlcihpLkV2ZW50cy5TT1VSQ0VfUkVBRFkpfSxfb25NU0VEaXNwb3NlOmZ1bmN0aW9uKCl7dGhpcy5faXNOb3RSZWFkeT0hMCx0aGlzLl9sb2dnZXIubG9nKFwic291cmNlIGRpc3Bvc2UgaGFuZGxlclwiKSx0aGlzLl9tZWRpYVNvdXJjZS5yZW1vdmVFdmVudExpc3RlbmVyKFwic291cmNlY2xvc2VcIix0aGlzLl9vbk1TRURpc3Bvc2UsITEpfSxfYXBwZW5kTmV4dFNlZ21lbnQ6ZnVuY3Rpb24odCl7dHJ5e2lmKHRoaXMuX3NvdXJjZUJ1ZmZlci51cGRhdGluZylyZXR1cm4gdGhpcy5fbG9nZ2VyLmxvZyhcInNvdXJjZSBidWZmZXIgaXMgYnVzeSB1cGRhdGluZyBhbHJlYWR5LCBlbnF1ZXVpbmcgZGF0YSBmb3IgbGF0ZXIgYXBwZW5kaW5nXCIpLHZvaWQgdGhpcy5fc2VnbWVudHNBd2FpdGluZ0FwcGVuZGFuY2UudW5zaGlmdCh0KTt0LmlzTGFzdCYmdGhpcy5fbG9nZ2VyLmxvZyhcImFib3V0IHRvIGFwcGVuZCBsYXN0IHNlZ21lbnRcIiksdGhpcy5fY3VycmVudFNlZ21lbnRBcHBlbmRpbmc9dCx0aGlzLl9zb3VyY2VCdWZmZXIudGltZXN0YW1wT2Zmc2V0PXQuc3RhcnRQb3NpdGlvbi8xZTMsdGhpcy5fc291cmNlQnVmZmVyLmFwcGVuZEJ1ZmZlcih0LmRhdGEpLHRoaXMuX2xvZ2dlci5sb2coXCJhcHBlbmRpbmcgc2VnbWVudCBcIit0LmluZGV4KX1jYXRjaChlKXt0aGlzLl9sb2dnZXIubG9nKFwiZXJyb3Igd2hpbGUgYXBwZW5kaW5nIHRvIFNvdXJjZUJ1ZmZlcjogXCIrZS5tZXNzYWdlK1wiKVwiKSx0aGlzLnRyaWdnZXIoaS5FdmVudHMuU09VUkNFX0VSUk9SLGUpfX0sX3RyeUFwcGVuZEVvczpmdW5jdGlvbigpe3RoaXMuX2xvZ2dlci5sb2coXCJhdHRlbXB0aW5nIHRvIGZpbmFsaXplIHN0cmVhbVwiKTt0cnl7XCJvcGVuXCIhPT10aGlzLl9tZWRpYVNvdXJjZS5yZWFkeVN0YXRlfHx0aGlzLl9zb3VyY2VCdWZmZXIudXBkYXRpbmc/dGhpcy5fbG9nZ2VyLmxvZyhcImNvdWxkbid0IGNhbGwgZW5kT2ZTdHJlYW0gYmVjYXVzZSBTb3VyY2VCdWZmZXIgaXMgc3RpbGwgdXBkYXRpbmcsIHdlJ2xsIGNhbGwgaXQgb25jZSBpdHMgZG9uZVwiKToodGhpcy5fbWVkaWFTb3VyY2UuZW5kT2ZTdHJlYW0oKSx0aGlzLl9sb2dnZXIubG9nKFwiY2FsbGVkIGVuZE9mU3RyZWFtXCIpKX1jYXRjaCh0KXt0aGlzLl9sb2dnZXIubG9nKFwiU291cmNlQnVmZmVyIGVuZE9mU3RyZWFtKCkgY2FsbCBmYWlsZWQgd2l0aCBlcnJvcjogXCIrdC5tZXNzYWdlKSx0aGlzLnRyaWdnZXIoaS5FdmVudHMuU09VUkNFX0VSUk9SLHQpfX0sX29uU291cmNlQnVmZmVyVXBkYXRlOmZ1bmN0aW9uKCl7KHRoaXMuX2N1cnJlbnRTZWdtZW50QXBwZW5kaW5nfHx0aGlzLl9zb3VyY2VCdWZmZXIudXBkYXRpbmcpJiYodGhpcy5fbG9nZ2VyLmxvZyhcImRvbmUgdXBkYXRpbmcgU291cmNlQnVmZmVyIHdpdGggc2VnbWVudCBcIit0aGlzLl9jdXJyZW50U2VnbWVudEFwcGVuZGluZy5pbmRleCksdGhpcy50cmlnZ2VyKGkuRXZlbnRzLlNFR01FTlRfQVBQRU5ERUQsdGhpcy5fY3VycmVudFNlZ21lbnRBcHBlbmRpbmcpLHRoaXMuX2N1cnJlbnRTZWdtZW50QXBwZW5kaW5nLmlzTGFzdCYmKHRoaXMuX2xvZ2dlci5sb2coXCJ3YXMgbGFzdCBzZWdtZW50LCBzZXR0aW5nIG9uIEVPUyBvbiBTb3VyY2VCdWZmZXJcIiksdGhpcy5fdHJ5QXBwZW5kRW9zKCkpLHRoaXMuX3NlZ21lbnRzQXdhaXRpbmdBcHBlbmRhbmNlLmxlbmd0aCYmIXRoaXMuX3NvdXJjZUJ1ZmZlci51cGRhdGluZyYmdGhpcy5fYXBwZW5kTmV4dFNlZ21lbnQodGhpcy5fc2VnbWVudHNBd2FpdGluZ0FwcGVuZGFuY2UucG9wKCkpKX0sYXBwZW5kOmZ1bmN0aW9uKHQpe2lmKCF0aGlzLnNvdXJjZUlzUmVhZHkoKSl0aHJvdyBuZXcgRXJyb3IoXCJNZWRpYVNvdXJjZSBpcyBub3QgcmVhZHkgeWV0XCIpO3RoaXMuX2FwcGVuZE5leHRTZWdtZW50KHQpfSxtZWRpYTpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9tZWRpYUVsZW19LHNvdXJjZUlzUmVhZHk6ZnVuY3Rpb24oKXtyZXR1cm4hdGhpcy5faXNOb3RSZWFkeX0sZHVyYXRpb246ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuX21lZGlhU291cmNlLmR1cmF0aW9uPXQvMWUzLDFlMyp0aGlzLl9tZWRpYVNvdXJjZS5kdXJhdGlvbn19KX0sZnVuY3Rpb24odCxlLG4pe3ZhciBpLHI9big0NykuY29uY2F0QnVmZmVyc1RvVWludDhBcnJheSxvPW4oMSkscz1uKDM2KSxhPW4oNjgpO3QuZXhwb3J0cz1pPWZ1bmN0aW9uKHQpe3RoaXMuY29uZmlnPXQsdGhpcy5yZXNldCgpLHRoaXMuc2VnbWVudHM9W10sdGhpcy5wdXNoZWRJbml0RGF0YT0hMX0sbyhpLnByb3RvdHlwZSxzKSxpLnByb3RvdHlwZS5wcm9jZXNzPWZ1bmN0aW9uKHQpe3N3aXRjaCh0aGlzLnNlZ21lbnRzLnB1c2godCksdGhpcy5jb25maWcpe2Nhc2UgaS5Db25maWdzLlZPSUQ6dGhpcy50cmlnZ2VyKFwic2VnbWVudFwiLHQpO2JyZWFrO2Nhc2UgaS5Db25maWdzLk1QM19UT19GTVA0OnRoaXMuc3JjLmVucXVldWUobmV3IGEuVW5pdC5UcmFuc2Zlcih0LmRhdGEsXCJiaW5hcnlcIikpLHRoaXMuc3JjLmVucXVldWUoYS5Vbml0LlRyYW5zZmVyLkZsdXNoKCkpO2JyZWFrO2RlZmF1bHQ6dGhyb3cgbmV3IEVycm9yKFwiQ29uZmlnIFwiK3RoaXMuY29uZmlnK1wiIG5vdCBzdXBwb3J0ZWRcIil9fSxpLnByb3RvdHlwZS5kZXF1ZXVlPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc2VnbWVudHMuc2hpZnQoKX0saS5wcm90b3R5cGUucmVzZXQ9ZnVuY3Rpb24oKXtzd2l0Y2godGhpcy5jb25maWcpe2Nhc2UgaS5Db25maWdzLlZPSUQ6YnJlYWs7Y2FzZSBpLkNvbmZpZ3MuTVAzX1RPX0ZNUDQ6dGhpcy5nb3RJbml0RGF0YT0hMSx0aGlzLnNyYz1uZXcgYS5Vbml0LkJhc2VQdXNoU3JjLHRoaXMucGFyc2VyPW5ldyBhLlVuaXRzLk1QM1BhcnNlcix0aGlzLm11eGVyPW5ldyBhLlVuaXRzLk1QNE11eChhLlVuaXRzLk1QNE11eC5Qcm9maWxlcy5NUDNfQVVESU9fT05MWSksdGhpcy5zaW5rPW5ldyBhLlVuaXQuQmFzZVNpbmssdGhpcy5zaW5rLl9vbkRhdGE9ZnVuY3Rpb24oKXt2YXIgdCxlPXRoaXMuc2luay5kZXF1ZXVlKCkuZGF0YTtyZXR1cm4gdGhpcy5nb3RJbml0RGF0YT8odD10aGlzLmRlcXVldWUoKSx0Lm1pbWVUeXBlPVwiYXVkaW8vbXA0XCIsdGhpcy5nb3RJbml0RGF0YSYmIXRoaXMucHVzaGVkSW5pdERhdGE/KHQuZGF0YT1yKHRoaXMuaW5pdERhdGEsZSksdGhpcy5wdXNoZWRJbml0RGF0YT0hMCk6dC5kYXRhPWUsdGhpcy50cmlnZ2VyKFwic2VnbWVudFwiLHQpLHZvaWQgdGhpcy5yZXNldCgpKToodGhpcy5nb3RJbml0RGF0YT0hMCx2b2lkKHRoaXMuaW5pdERhdGE9ZSkpfS5iaW5kKHRoaXMpLGEuVW5pdC5saW5rKHRoaXMuc3JjLHRoaXMucGFyc2VyLHRoaXMubXV4ZXIsdGhpcy5zaW5rKTticmVhaztkZWZhdWx0OnRocm93IG5ldyBFcnJvcihcIkNvbmZpZyBcIit0aGlzLmNvbmZpZytcIiBub3Qgc3VwcG9ydGVkXCIpfX0saS5Db25maWdzPXtWT0lEOlwiVk9JRFwiLE1QM19UT19GTVA0OlwiTVAzX1RPX0ZNUDRcIn19LGZ1bmN0aW9uKHQsZSxuKXt2YXIgaSxyPW4oNjkpLG89bigxMTUpLHM9bigxMTgpLGE9bigxMjEpLHU9bigxMjQpLGg9bigxMjUpO3QuZXhwb3J0cz1pPXtVbml0OnIsVW5pdHM6e0ZpbGU6aCxNUDRNdXg6byxNUDNQYXJzZXI6cyxNU0VTaW5rOmEsWEhSOnV9fX0sZnVuY3Rpb24odCxlLG4peyhmdW5jdGlvbihlKXt2YXIgaSxyLG8scyxhLHUsaCxjLGwsZixkPW4oNzQpLHA9big3NiksZz1uKDg1KSxfPW4oOTYpLG09big5Nyk7dC5leHBvcnRzPWk9ZnVuY3Rpb24oKXtfLmNhbGwodGhpcyksdGhpcy5pbnB1dHN8fCh0aGlzLmlucHV0cz1bXSksdGhpcy5vdXRwdXRzfHwodGhpcy5vdXRwdXRzPVtdKX0saS5jcmVhdGU9ZnVuY3Rpb24odCl7cmV0dXJuIHAoaS5wcm90b3R5cGUsdCl9LGkuY3JlYXRlQmFzZVNyYz1mdW5jdGlvbih0KXtyZXR1cm4gcCh1LnByb3RvdHlwZSx0KX0saS5jcmVhdGVCYXNlUHVzaFNyYz1mdW5jdGlvbih0KXtyZXR1cm4gcChoLnByb3RvdHlwZSx0KX0saS5jcmVhdGVCYXNlU2luaz1mdW5jdGlvbih0KXtyZXR1cm4gcChjLnByb3RvdHlwZSx0KX0saS5jcmVhdGVCYXNlVHJhbnNmb3JtPWZ1bmN0aW9uKHQpe3JldHVybiBwKGEucHJvdG90eXBlLHQpfSxpLmNyZWF0ZUJhc2VQYXJzZXI9ZnVuY3Rpb24odCl7cmV0dXJuIHAobC5wcm90b3R5cGUsdCl9LGkubGluaz1mdW5jdGlvbih0LGUpe2lmKGFyZ3VtZW50cy5sZW5ndGg+MilyZXR1cm4gaS5saW5rQXJyYXkoYXJndW1lbnRzKTtmb3IodmFyIG49MDtuPE1hdGgubWluKHQubnVtYmVyT2ZPdXRzKCksZS5udW1iZXJPZklucygpKTtuKyspdC5vdXQobikucGlwZShlW1wiaW5cIl0obikpO3JldHVybiBlfSxpLmxpbmtBcnJheT1mdW5jdGlvbih0KXt2YXIgZSxuLHI7Zm9yKHI9MDtyPHQubGVuZ3RoO3IrKyllPXRbcl0sdC5sZW5ndGg+cisxJiYobj10W3IrMV0saS5saW5rKGUsbikpO3JldHVybiBufTt2YXIgeT1pLkV2ZW50PXtDSEFJTjpcImNoYWluXCIsTkVFRF9EQVRBOlwibmVlZC1kYXRhXCIsRklOSVNIOlwiZmluaXNoXCIsUElQRTpcInBpcGVcIixVTlBJUEU6XCJ1bnBpcGVcIixFUlJPUjpcImVycm9yXCIsRU5EOlwiZW5kXCIsT1BFTjpcIm9wZW5cIixDTE9TRTpcImNsb3NlXCJ9O2kucHJvdG90eXBlPXAoXy5wcm90b3R5cGUse2NvbnN0cnVjdG9yOmksXCJpblwiOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmlucHV0c1t0XX0sb3V0OmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLm91dHB1dHNbdF19LG51bWJlck9mSW5zOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaW5wdXRzLmxlbmd0aH0sbnVtYmVyT2ZPdXRzOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMub3V0cHV0cy5sZW5ndGh9LGFkZDpmdW5jdGlvbih0KXtyZXR1cm4gdCBpbnN0YW5jZW9mIHI/dGhpcy5hZGRJbnB1dCh0KTp0IGluc3RhbmNlb2YgbyYmdGhpcy5hZGRPdXRwdXQodCksdGhpc30scmVtb3ZlOmZ1bmN0aW9uKHQpe3QgaW5zdGFuY2VvZiByP3RoaXMucmVtb3ZlSW5wdXQodCk6dCBpbnN0YW5jZW9mIG8mJnRoaXMucmVtb3ZlT3V0cHV0KHQpfSxhZGRJbnB1dDpmdW5jdGlvbih0KXt0aGlzLl9pbnN0YWxsRXZlbnRGb3J3YXJkZXIodCx5LkZJTklTSCksdGhpcy5faW5zdGFsbEV2ZW50Rm9yd2FyZGVyKHQseS5PUEVOKSx0aGlzLl9pbnN0YWxsRXZlbnRGb3J3YXJkZXIodCx5LlBJUEUpLHRoaXMuX2luc3RhbGxFdmVudEZvcndhcmRlcih0LHkuVU5QSVBFKSx0aGlzLl9pbnN0YWxsRXZlbnRGb3J3YXJkZXIodCx5LkVSUk9SKSx0aGlzLl9pbnN0YWxsRXZlbnRGb3J3YXJkZXIodCx5LkNIQUlOKSx0aGlzLmlucHV0cy5wdXNoKHQpfSxhZGRPdXRwdXQ6ZnVuY3Rpb24odCl7dGhpcy5faW5zdGFsbEV2ZW50Rm9yd2FyZGVyKHQseS5FTkQpLHRoaXMuX2luc3RhbGxFdmVudEZvcndhcmRlcih0LHkuT1BFTiksdGhpcy5faW5zdGFsbEV2ZW50Rm9yd2FyZGVyKHQseS5DTE9TRSksdGhpcy5faW5zdGFsbEV2ZW50Rm9yd2FyZGVyKHQseS5FUlJPUiksdGhpcy5faW5zdGFsbEV2ZW50Rm9yd2FyZGVyKHQseS5ORUVEX0RBVEEpLHRoaXMub3V0cHV0cy5wdXNoKHQpfSxyZW1vdmVJbnB1dDpmdW5jdGlvbih0KXtyZW1vdmVQdXQodGhpcy5pbnB1dHMsdCl9LHJlbW92ZU91dHB1dDpmdW5jdGlvbih0KXtyZW1vdmVQdXQodGhpcy5vdXRwdXRzLHQpfSxyZW1vdmVQdXQ6ZnVuY3Rpb24odCxlKXt0LnNsaWNlKCkuZm9yRWFjaChmdW5jdGlvbihuLGkpe249PWUmJnQuc3BsaWNlKGksMSl9KX0sX2luc3RhbGxFdmVudEZvcndhcmRlcjpmdW5jdGlvbih0LGUpe3Qub24oZSxmdW5jdGlvbihuKXt0aGlzLmVtaXQoZSx0LG4pfS5iaW5kKHRoaXMpKX19KSxpLlRyYW5zZmVyPXM9ZnVuY3Rpb24odCxuLGkpe258fChuPXQgaW5zdGFuY2VvZiBlP1wiYnVmZmVyXCI6dCBpbnN0YW5jZW9mIFN0cmluZz9cInV0ZjhcIjpcIm9iamVjdFwiKSx0aGlzLnJlc29sdmVkPSExLHRoaXMuZGF0YT10LHRoaXMuZW5jb2Rpbmc9bix0aGlzLmRvbmVDYWxsYmFjaz1pfSxzLnByb3RvdHlwZT1wKE9iamVjdC5wcm90b3R5cGUse2NvbnN0cnVjdG9yOnMscmVzb2x2ZTpmdW5jdGlvbigpe3RoaXMuZG9uZUNhbGxiYWNrJiYhdGhpcy5yZXNvbHZlZCYmKHRoaXMuZG9uZUNhbGxiYWNrKCksdGhpcy5yZXNvbHZlZD0hMCl9LHNldEZsdXNoaW5nOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmRhdGEuZmx1c2g9dCx0aGlzfSxzZXRFbXB0eTpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5kYXRhLmVtcHR5PXQsdGhpc319KSxzLkZsdXNoPWZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBzKHt9LFwiYmluYXJ5XCIpLnNldEZsdXNoaW5nKCEwKS5zZXRFbXB0eSghMCl9LHMuRU9TPWZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBzKG51bGwsXCJiaW5hcnlcIil9LGkuSW5wdXQ9cj1mdW5jdGlvbih0LGUpe20uV3JpdGFibGUucHJvdG90eXBlLmNvbnN0cnVjdG9yLmNhbGwodGhpcyx7b2JqZWN0TW9kZTohMCxkZWNvZGVTdHJpbmdzOiExfSl9LHIucHJvdG90eXBlPXAobS5Xcml0YWJsZS5wcm90b3R5cGUse2NvbnN0cnVjdG9yOnIsX3dyaXRlOmZ1bmN0aW9uKHQsZSxuKXtkKFwiX3dyaXRlOiBcIitlKSx0aGlzLmVtaXQoaS5FdmVudC5DSEFJTixuZXcgcyh0LGUsbikpfX0pLGkuT3V0cHV0PW89ZnVuY3Rpb24odCl7bS5SZWFkYWJsZS5wcm90b3R5cGUuY29uc3RydWN0b3IuY2FsbCh0aGlzLHtvYmplY3RNb2RlOiEwfSksdGhpcy5fZGF0YVJlcXVlc3RlZD0wLHRoaXMuX3Nob3VsZFB1c2hNb3JlPSEwfSxvLmVvcz1mdW5jdGlvbih0KXt0LnB1c2gobnVsbCxcIm51bGxcIil9LG8ucHJvdG90eXBlPXAobS5SZWFkYWJsZS5wcm90b3R5cGUse2NvbnN0cnVjdG9yOm8sX3JlYWQ6ZnVuY3Rpb24odCl7dGhpcy5fZGF0YVJlcXVlc3RlZCsrLHRoaXMuZW1pdCh5Lk5FRURfREFUQSx0aGlzKX0scHVzaDpmdW5jdGlvbih0LGUpe3JldHVybiB0aGlzLl9kYXRhUmVxdWVzdGVkLS0sdGhpcy5fc2hvdWxkUHVzaE1vcmU9bS5SZWFkYWJsZS5wcm90b3R5cGUucHVzaC5jYWxsKHRoaXMsdCxlKSx0aGlzLl9zaG91bGRQdXNoTW9yZX0saXNQdWxsaW5nOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2RhdGFSZXF1ZXN0ZWQ+MH0sZW9zOmZ1bmN0aW9uKCl7bS5SZWFkYWJsZS5wcm90b3R5cGUucHVzaC5jYWxsKHRoaXMsbnVsbCxcIm51bGxcIil9fSksaS5CYXNlVHJhbnNmb3JtPWE9ZnVuY3Rpb24oKXtpLnByb3RvdHlwZS5jb25zdHJ1Y3Rvci5hcHBseSh0aGlzLGFyZ3VtZW50cyksdGhpcy5hZGQobmV3IHIpLmFkZChuZXcgbyksdGhpcy5vbih5LkNIQUlOLHRoaXMuX29uQ2hhaW4uYmluZCh0aGlzKSksdGhpcy5vbih5LkZJTklTSCx0aGlzLl9vbkZpbmlzaC5iaW5kKHRoaXMpKX0sYS5wcm90b3R5cGU9cChpLnByb3RvdHlwZSx7Y29uc3RydWN0b3I6YSxfb25DaGFpbjpmdW5jdGlvbih0LGUpe3RoaXMuX3RyYW5zZm9ybShlKSx0aGlzLm91dCgwKS5wdXNoKGUuZGF0YSxlLmVuY29kaW5nKSxlLnJlc29sdmUoKX0sX29uRmluaXNoOmZ1bmN0aW9uKHQpe28uZW9zKHRoaXMub3V0KDApKX0sX3RyYW5zZm9ybTpmdW5jdGlvbih0KXt9fSksaS5CYXNlU3JjPXU9ZnVuY3Rpb24oKXtpLnByb3RvdHlwZS5jb25zdHJ1Y3Rvci5hcHBseSh0aGlzLGFyZ3VtZW50cyksdGhpcy5hZGQobmV3IG8pLHRoaXMub24oeS5ORUVEX0RBVEEsdGhpcy5zcXVlZXplLmJpbmQodGhpcykpfSx1LnByb3RvdHlwZT1wKGkucHJvdG90eXBlLHtjb25zdHJ1Y3Rvcjp1LHNxdWVlemU6ZnVuY3Rpb24oKXtkKFwic3F1ZWV6ZVwiKTt2YXIgdD10aGlzLl9zb3VyY2UoKTt0JiYodGhpcy5vdXQoMCkucHVzaCh0LmRhdGEsdC5lbmNvZGluZyksdC5yZXNvbHZlKCkpfSxfc291cmNlOmZ1bmN0aW9uKCl7fX0pLGkuQmFzZVB1c2hTcmM9aD1mdW5jdGlvbigpe3UucHJvdG90eXBlLmNvbnN0cnVjdG9yLmFwcGx5KHRoaXMsYXJndW1lbnRzKSx0aGlzLl9idWZmZXJPdXQ9W119LGgucHJvdG90eXBlPXAodS5wcm90b3R5cGUse2NvbnN0cnVjdG9yOmgsX3NvdXJjZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9idWZmZXJPdXQubGVuZ3RoP3RoaXMuX2J1ZmZlck91dC5zaGlmdCgpOm51bGx9LGVucXVldWU6ZnVuY3Rpb24odCl7dGhpcy5fYnVmZmVyT3V0LnB1c2godCksdGhpcy5vdXQoMCkuaXNQdWxsaW5nJiZ0aGlzLm91dCgwKS5pc1B1bGxpbmcoKSYmdGhpcy5zcXVlZXplKCl9fSksaS5CYXNlU2luaz1jPWZ1bmN0aW9uKCl7aS5wcm90b3R5cGUuY29uc3RydWN0b3IuYXBwbHkodGhpcyxhcmd1bWVudHMpLHRoaXMuYWRkKG5ldyByKSx0aGlzLm9uKHkuQ0hBSU4sdGhpcy5fb25DaGFpbi5iaW5kKHRoaXMpKSx0aGlzLl9idWZmZXJJbj1bXX0sYy5wcm90b3R5cGU9cChpLnByb3RvdHlwZSx7Y29uc3RydWN0b3I6Yyxfb25DaGFpbjpmdW5jdGlvbih0LGUpe2QoXCJCYXNlU2luay5fb25DaGFpbjogXCIrZS5lbmNvZGluZyksdGhpcy5fYnVmZmVySW4ucHVzaChlKSx0aGlzLl9vbkRhdGEoKSxlLnJlc29sdmUoKX0sX29uRGF0YTpmdW5jdGlvbigpe30sZGVxdWV1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9idWZmZXJJbi5sZW5ndGg/dGhpcy5fYnVmZmVySW4uc2hpZnQoKTpudWxsfX0pLGkuQmFzZVBhcnNlcj1sPWZ1bmN0aW9uKCl7aC5wcm90b3R5cGUuY29uc3RydWN0b3IuYXBwbHkodGhpcyxhcmd1bWVudHMpLGMucHJvdG90eXBlLmNvbnN0cnVjdG9yLmFwcGx5KHRoaXMsYXJndW1lbnRzKSx0aGlzLm9uKFwiZmluaXNoXCIsdGhpcy5fb25GaW5pc2guYmluZCh0aGlzKSl9LGcobC5wcm90b3R5cGUsaS5wcm90b3R5cGUsXy5wcm90b3R5cGUsdS5wcm90b3R5cGUsaC5wcm90b3R5cGUsYy5wcm90b3R5cGUse2NvbnN0cnVjdG9yOmwsX29uRGF0YTpmdW5jdGlvbigpe3RoaXMuX3BhcnNlKHRoaXMuZGVxdWV1ZSgpKX0sX29uRmluaXNoOmZ1bmN0aW9uKCl7ZChcIkJhc2VQYXJzZXIuX29uRmluaXNoXCIpLG8uZW9zKHRoaXMub3V0KDApKX0sX3BhcnNlOmZ1bmN0aW9uKHQpe319KSxpLklucHV0U2VsZWN0b3I9Zj1mdW5jdGlvbih0KXtmb3IoYS5wcm90b3R5cGUuY29uc3RydWN0b3IuYXBwbHkodGhpcyxhcmd1bWVudHMpLHQ9KHR8fDEpLTE7dC0tID4wOyl0aGlzLmFkZChuZXcgcik7dGhpcy5zZWxlY3RlZElucHV0SW5kZXg9MH0sZyhmLnByb3RvdHlwZSxhLnByb3RvdHlwZSx7Y29uc3RydWN0b3I6Zixfb25DaGFpbjpmdW5jdGlvbih0LGUpe3ZhciBuPXRoaXNbXCJpblwiXSh0aGlzLnNlbGVjdGVkSW5wdXRJbmRleCk7cmV0dXJuIHQhPT1uP3ZvaWQgZS5yZXNvbHZlKCk6KHRoaXMuX3RyYW5zZm9ybShlKSx0aGlzLm91dCgwKS5wdXNoKGUuZGF0YSxlLmVuY29kaW5nKSx2b2lkIGUucmVzb2x2ZSgpKX0sX29uRmluaXNoOmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXNbXCJpblwiXSh0aGlzLnNlbGVjdGVkSW5wdXRJbmRleCk7dD09PWUmJm8uZW9zKHRoaXMub3V0KDApKX19KX0pLmNhbGwoZSxuKDcwKS5CdWZmZXIpfSxmdW5jdGlvbih0LGUsbil7KGZ1bmN0aW9uKHQsaSl7ZnVuY3Rpb24gcigpe2Z1bmN0aW9uIHQoKXt9dHJ5e3ZhciBlPW5ldyBVaW50OEFycmF5KDEpO3JldHVybiBlLmZvbz1mdW5jdGlvbigpe3JldHVybiA0Mn0sZS5jb25zdHJ1Y3Rvcj10LDQyPT09ZS5mb28oKSYmZS5jb25zdHJ1Y3Rvcj09PXQmJlwiZnVuY3Rpb25cIj09dHlwZW9mIGUuc3ViYXJyYXkmJjA9PT1lLnN1YmFycmF5KDEsMSkuYnl0ZUxlbmd0aH1jYXRjaChuKXtyZXR1cm4hMX19ZnVuY3Rpb24gbygpe3JldHVybiB0LlRZUEVEX0FSUkFZX1NVUFBPUlQ/MjE0NzQ4MzY0NzoxMDczNzQxODIzfWZ1bmN0aW9uIHQoZSl7cmV0dXJuIHRoaXMgaW5zdGFuY2VvZiB0Pyh0aGlzLmxlbmd0aD0wLHRoaXMucGFyZW50PXZvaWQgMCxcIm51bWJlclwiPT10eXBlb2YgZT9zKHRoaXMsZSk6XCJzdHJpbmdcIj09dHlwZW9mIGU/YSh0aGlzLGUsYXJndW1lbnRzLmxlbmd0aD4xP2FyZ3VtZW50c1sxXTpcInV0ZjhcIik6dSh0aGlzLGUpKTphcmd1bWVudHMubGVuZ3RoPjE/bmV3IHQoZSxhcmd1bWVudHNbMV0pOm5ldyB0KGUpfWZ1bmN0aW9uIHMoZSxuKXtpZihlPWcoZSwwPm4/MDowfF8obikpLCF0LlRZUEVEX0FSUkFZX1NVUFBPUlQpZm9yKHZhciBpPTA7bj5pO2krKyllW2ldPTA7cmV0dXJuIGV9ZnVuY3Rpb24gYSh0LGUsbil7KFwic3RyaW5nXCIhPXR5cGVvZiBufHxcIlwiPT09bikmJihuPVwidXRmOFwiKTt2YXIgaT0wfHkoZSxuKTtyZXR1cm4gdD1nKHQsaSksdC53cml0ZShlLG4pLHR9ZnVuY3Rpb24gdShlLG4pe2lmKHQuaXNCdWZmZXIobikpcmV0dXJuIGgoZSxuKTtpZigkKG4pKXJldHVybiBjKGUsbik7aWYobnVsbD09bil0aHJvdyBuZXcgVHlwZUVycm9yKFwibXVzdCBzdGFydCB3aXRoIG51bWJlciwgYnVmZmVyLCBhcnJheSBvciBzdHJpbmdcIik7aWYoXCJ1bmRlZmluZWRcIiE9dHlwZW9mIEFycmF5QnVmZmVyKXtpZihuLmJ1ZmZlciBpbnN0YW5jZW9mIEFycmF5QnVmZmVyKXJldHVybiBsKGUsbik7aWYobiBpbnN0YW5jZW9mIEFycmF5QnVmZmVyKXJldHVybiBmKGUsbil9cmV0dXJuIG4ubGVuZ3RoP2QoZSxuKTpwKGUsbil9ZnVuY3Rpb24gaCh0LGUpe3ZhciBuPTB8XyhlLmxlbmd0aCk7cmV0dXJuIHQ9Zyh0LG4pLGUuY29weSh0LDAsMCxuKSx0fWZ1bmN0aW9uIGModCxlKXt2YXIgbj0wfF8oZS5sZW5ndGgpO3Q9Zyh0LG4pO2Zvcih2YXIgaT0wO24+aTtpKz0xKXRbaV09MjU1JmVbaV07cmV0dXJuIHR9ZnVuY3Rpb24gbCh0LGUpe3ZhciBuPTB8XyhlLmxlbmd0aCk7dD1nKHQsbik7Zm9yKHZhciBpPTA7bj5pO2krPTEpdFtpXT0yNTUmZVtpXTtyZXR1cm4gdH1mdW5jdGlvbiBmKGUsbil7cmV0dXJuIHQuVFlQRURfQVJSQVlfU1VQUE9SVD8obi5ieXRlTGVuZ3RoLGU9dC5fYXVnbWVudChuZXcgVWludDhBcnJheShuKSkpOmU9bChlLG5ldyBVaW50OEFycmF5KG4pKSxlfWZ1bmN0aW9uIGQodCxlKXt2YXIgbj0wfF8oZS5sZW5ndGgpO3Q9Zyh0LG4pO2Zvcih2YXIgaT0wO24+aTtpKz0xKXRbaV09MjU1JmVbaV07cmV0dXJuIHR9ZnVuY3Rpb24gcCh0LGUpe3ZhciBuLGk9MDtcIkJ1ZmZlclwiPT09ZS50eXBlJiYkKGUuZGF0YSkmJihuPWUuZGF0YSxpPTB8XyhuLmxlbmd0aCkpLHQ9Zyh0LGkpO2Zvcih2YXIgcj0wO2k+cjtyKz0xKXRbcl09MjU1Jm5bcl07cmV0dXJuIHR9ZnVuY3Rpb24gZyhlLG4pe3QuVFlQRURfQVJSQVlfU1VQUE9SVD8oZT10Ll9hdWdtZW50KG5ldyBVaW50OEFycmF5KG4pKSxlLl9fcHJvdG9fXz10LnByb3RvdHlwZSk6KGUubGVuZ3RoPW4sZS5faXNCdWZmZXI9ITApO3ZhciBpPTAhPT1uJiZuPD10LnBvb2xTaXplPj4+MTtyZXR1cm4gaSYmKGUucGFyZW50PVopLGV9ZnVuY3Rpb24gXyh0KXtpZih0Pj1vKCkpdGhyb3cgbmV3IFJhbmdlRXJyb3IoXCJBdHRlbXB0IHRvIGFsbG9jYXRlIEJ1ZmZlciBsYXJnZXIgdGhhbiBtYXhpbXVtIHNpemU6IDB4XCIrbygpLnRvU3RyaW5nKDE2KStcIiBieXRlc1wiKTtyZXR1cm4gMHx0fWZ1bmN0aW9uIG0oZSxuKXtpZighKHRoaXMgaW5zdGFuY2VvZiBtKSlyZXR1cm4gbmV3IG0oZSxuKTt2YXIgaT1uZXcgdChlLG4pO3JldHVybiBkZWxldGUgaS5wYXJlbnQsaX1mdW5jdGlvbiB5KHQsZSl7XCJzdHJpbmdcIiE9dHlwZW9mIHQmJih0PVwiXCIrdCk7dmFyIG49dC5sZW5ndGg7aWYoMD09PW4pcmV0dXJuIDA7Zm9yKHZhciBpPSExOzspc3dpdGNoKGUpe2Nhc2VcImFzY2lpXCI6Y2FzZVwiYmluYXJ5XCI6Y2FzZVwicmF3XCI6Y2FzZVwicmF3c1wiOnJldHVybiBuO2Nhc2VcInV0ZjhcIjpjYXNlXCJ1dGYtOFwiOnJldHVybiBZKHQpLmxlbmd0aDtjYXNlXCJ1Y3MyXCI6Y2FzZVwidWNzLTJcIjpjYXNlXCJ1dGYxNmxlXCI6Y2FzZVwidXRmLTE2bGVcIjpyZXR1cm4gMipuO2Nhc2VcImhleFwiOnJldHVybiBuPj4+MTtjYXNlXCJiYXNlNjRcIjpyZXR1cm4gVyh0KS5sZW5ndGg7ZGVmYXVsdDppZihpKXJldHVybiBZKHQpLmxlbmd0aDtlPShcIlwiK2UpLnRvTG93ZXJDYXNlKCksaT0hMH19ZnVuY3Rpb24gdih0LGUsbil7dmFyIGk9ITE7aWYoZT0wfGUsbj12b2lkIDA9PT1ufHxuPT09MS8wP3RoaXMubGVuZ3RoOjB8bix0fHwodD1cInV0ZjhcIiksMD5lJiYoZT0wKSxuPnRoaXMubGVuZ3RoJiYobj10aGlzLmxlbmd0aCksZT49bilyZXR1cm5cIlwiO2Zvcig7Oylzd2l0Y2godCl7Y2FzZVwiaGV4XCI6cmV0dXJuIEQodGhpcyxlLG4pO2Nhc2VcInV0ZjhcIjpjYXNlXCJ1dGYtOFwiOnJldHVybiBJKHRoaXMsZSxuKTtjYXNlXCJhc2NpaVwiOnJldHVybiBPKHRoaXMsZSxuKTtjYXNlXCJiaW5hcnlcIjpyZXR1cm4gUih0aGlzLGUsbik7Y2FzZVwiYmFzZTY0XCI6cmV0dXJuIFAodGhpcyxlLG4pO2Nhc2VcInVjczJcIjpjYXNlXCJ1Y3MtMlwiOmNhc2VcInV0ZjE2bGVcIjpjYXNlXCJ1dGYtMTZsZVwiOnJldHVybiBNKHRoaXMsZSxuKTtkZWZhdWx0OmlmKGkpdGhyb3cgbmV3IFR5cGVFcnJvcihcIlVua25vd24gZW5jb2Rpbmc6IFwiK3QpO3Q9KHQrXCJcIikudG9Mb3dlckNhc2UoKSxpPSEwfX1mdW5jdGlvbiBFKHQsZSxuLGkpe249TnVtYmVyKG4pfHwwO3ZhciByPXQubGVuZ3RoLW47aT8oaT1OdW1iZXIoaSksaT5yJiYoaT1yKSk6aT1yO3ZhciBvPWUubGVuZ3RoO2lmKG8lMiE9PTApdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBoZXggc3RyaW5nXCIpO2k+by8yJiYoaT1vLzIpO2Zvcih2YXIgcz0wO2k+cztzKyspe3ZhciBhPXBhcnNlSW50KGUuc3Vic3RyKDIqcywyKSwxNik7aWYoaXNOYU4oYSkpdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBoZXggc3RyaW5nXCIpO3RbbitzXT1hfXJldHVybiBzfWZ1bmN0aW9uIFModCxlLG4saSl7cmV0dXJuIEsoWShlLHQubGVuZ3RoLW4pLHQsbixpKX1mdW5jdGlvbiBBKHQsZSxuLGkpe3JldHVybiBLKFYoZSksdCxuLGkpfWZ1bmN0aW9uIHcodCxlLG4saSl7cmV0dXJuIEEodCxlLG4saSl9ZnVuY3Rpb24gVCh0LGUsbixpKXtyZXR1cm4gSyhXKGUpLHQsbixpKX1mdW5jdGlvbiBiKHQsZSxuLGkpe3JldHVybiBLKHooZSx0Lmxlbmd0aC1uKSx0LG4saSl9ZnVuY3Rpb24gUCh0LGUsbil7cmV0dXJuIDA9PT1lJiZuPT09dC5sZW5ndGg/cS5mcm9tQnl0ZUFycmF5KHQpOnEuZnJvbUJ5dGVBcnJheSh0LnNsaWNlKGUsbikpfWZ1bmN0aW9uIEkodCxlLG4pe249TWF0aC5taW4odC5sZW5ndGgsbik7Zm9yKHZhciBpPVtdLHI9ZTtuPnI7KXt2YXIgbz10W3JdLHM9bnVsbCxhPW8+MjM5PzQ6bz4yMjM/MzpvPjE5MT8yOjE7aWYobj49cithKXt2YXIgdSxoLGMsbDtzd2l0Y2goYSl7Y2FzZSAxOjEyOD5vJiYocz1vKTticmVhaztjYXNlIDI6dT10W3IrMV0sMTI4PT09KDE5MiZ1KSYmKGw9KDMxJm8pPDw2fDYzJnUsbD4xMjcmJihzPWwpKTticmVhaztjYXNlIDM6dT10W3IrMV0saD10W3IrMl0sMTI4PT09KDE5MiZ1KSYmMTI4PT09KDE5MiZoKSYmKGw9KDE1Jm8pPDwxMnwoNjMmdSk8PDZ8NjMmaCxsPjIwNDcmJig1NTI5Nj5sfHxsPjU3MzQzKSYmKHM9bCkpO2JyZWFrO2Nhc2UgNDp1PXRbcisxXSxoPXRbcisyXSxjPXRbciszXSwxMjg9PT0oMTkyJnUpJiYxMjg9PT0oMTkyJmgpJiYxMjg9PT0oMTkyJmMpJiYobD0oMTUmbyk8PDE4fCg2MyZ1KTw8MTJ8KDYzJmgpPDw2fDYzJmMsbD42NTUzNSYmMTExNDExMj5sJiYocz1sKSl9fW51bGw9PT1zPyhzPTY1NTMzLGE9MSk6cz42NTUzNSYmKHMtPTY1NTM2LGkucHVzaChzPj4+MTAmMTAyM3w1NTI5Nikscz01NjMyMHwxMDIzJnMpLGkucHVzaChzKSxyKz1hfXJldHVybiBMKGkpfWZ1bmN0aW9uIEwodCl7dmFyIGU9dC5sZW5ndGg7aWYoUT49ZSlyZXR1cm4gU3RyaW5nLmZyb21DaGFyQ29kZS5hcHBseShTdHJpbmcsdCk7Zm9yKHZhciBuPVwiXCIsaT0wO2U+aTspbis9U3RyaW5nLmZyb21DaGFyQ29kZS5hcHBseShTdHJpbmcsdC5zbGljZShpLGkrPVEpKTtyZXR1cm4gbn1mdW5jdGlvbiBPKHQsZSxuKXt2YXIgaT1cIlwiO249TWF0aC5taW4odC5sZW5ndGgsbik7Zm9yKHZhciByPWU7bj5yO3IrKylpKz1TdHJpbmcuZnJvbUNoYXJDb2RlKDEyNyZ0W3JdKTtyZXR1cm4gaX1mdW5jdGlvbiBSKHQsZSxuKXt2YXIgaT1cIlwiO249TWF0aC5taW4odC5sZW5ndGgsbik7Zm9yKHZhciByPWU7bj5yO3IrKylpKz1TdHJpbmcuZnJvbUNoYXJDb2RlKHRbcl0pO3JldHVybiBpfWZ1bmN0aW9uIEQodCxlLG4pe3ZhciBpPXQubGVuZ3RoOyghZXx8MD5lKSYmKGU9MCksKCFufHwwPm58fG4+aSkmJihuPWkpO2Zvcih2YXIgcj1cIlwiLG89ZTtuPm87bysrKXIrPUcodFtvXSk7cmV0dXJuIHJ9ZnVuY3Rpb24gTSh0LGUsbil7Zm9yKHZhciBpPXQuc2xpY2UoZSxuKSxyPVwiXCIsbz0wO288aS5sZW5ndGg7bys9MilyKz1TdHJpbmcuZnJvbUNoYXJDb2RlKGlbb10rMjU2KmlbbysxXSk7cmV0dXJuIHJ9ZnVuY3Rpb24gayh0LGUsbil7aWYodCUxIT09MHx8MD50KXRocm93IG5ldyBSYW5nZUVycm9yKFwib2Zmc2V0IGlzIG5vdCB1aW50XCIpO2lmKHQrZT5uKXRocm93IG5ldyBSYW5nZUVycm9yKFwiVHJ5aW5nIHRvIGFjY2VzcyBiZXlvbmQgYnVmZmVyIGxlbmd0aFwiKX1mdW5jdGlvbiBOKGUsbixpLHIsbyxzKXtpZighdC5pc0J1ZmZlcihlKSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiYnVmZmVyIG11c3QgYmUgYSBCdWZmZXIgaW5zdGFuY2VcIik7aWYobj5vfHxzPm4pdGhyb3cgbmV3IFJhbmdlRXJyb3IoXCJ2YWx1ZSBpcyBvdXQgb2YgYm91bmRzXCIpO2lmKGkrcj5lLmxlbmd0aCl0aHJvdyBuZXcgUmFuZ2VFcnJvcihcImluZGV4IG91dCBvZiByYW5nZVwiKX1mdW5jdGlvbiB4KHQsZSxuLGkpezA+ZSYmKGU9NjU1MzUrZSsxKTtmb3IodmFyIHI9MCxvPU1hdGgubWluKHQubGVuZ3RoLW4sMik7bz5yO3IrKyl0W24rcl09KGUmMjU1PDw4KihpP3I6MS1yKSk+Pj44KihpP3I6MS1yKX1mdW5jdGlvbiBDKHQsZSxuLGkpezA+ZSYmKGU9NDI5NDk2NzI5NStlKzEpO2Zvcih2YXIgcj0wLG89TWF0aC5taW4odC5sZW5ndGgtbiw0KTtvPnI7cisrKXRbbityXT1lPj4+OCooaT9yOjMtcikmMjU1fWZ1bmN0aW9uIEYodCxlLG4saSxyLG8pe2lmKGU+cnx8bz5lKXRocm93IG5ldyBSYW5nZUVycm9yKFwidmFsdWUgaXMgb3V0IG9mIGJvdW5kc1wiKTtpZihuK2k+dC5sZW5ndGgpdGhyb3cgbmV3IFJhbmdlRXJyb3IoXCJpbmRleCBvdXQgb2YgcmFuZ2VcIik7aWYoMD5uKXRocm93IG5ldyBSYW5nZUVycm9yKFwiaW5kZXggb3V0IG9mIHJhbmdlXCIpfWZ1bmN0aW9uIFUodCxlLG4saSxyKXtyZXR1cm4gcnx8Rih0LGUsbiw0LDMuNDAyODIzNDY2Mzg1Mjg4NmUzOCwtMy40MDI4MjM0NjYzODUyODg2ZTM4KSxYLndyaXRlKHQsZSxuLGksMjMsNCksbis0fWZ1bmN0aW9uIEIodCxlLG4saSxyKXtyZXR1cm4gcnx8Rih0LGUsbiw4LDEuNzk3NjkzMTM0ODYyMzE1N2UzMDgsLTEuNzk3NjkzMTM0ODYyMzE1N2UzMDgpLFgud3JpdGUodCxlLG4saSw1Miw4KSxuKzh9ZnVuY3Rpb24gSCh0KXtpZih0PWoodCkucmVwbGFjZSh0dCxcIlwiKSx0Lmxlbmd0aDwyKXJldHVyblwiXCI7Zm9yKDt0Lmxlbmd0aCU0IT09MDspdCs9XCI9XCI7cmV0dXJuIHR9ZnVuY3Rpb24gaih0KXtyZXR1cm4gdC50cmltP3QudHJpbSgpOnQucmVwbGFjZSgvXlxccyt8XFxzKyQvZyxcIlwiKX1mdW5jdGlvbiBHKHQpe3JldHVybiAxNj50P1wiMFwiK3QudG9TdHJpbmcoMTYpOnQudG9TdHJpbmcoMTYpfWZ1bmN0aW9uIFkodCxlKXtlPWV8fDEvMDtmb3IodmFyIG4saT10Lmxlbmd0aCxyPW51bGwsbz1bXSxzPTA7aT5zO3MrKyl7aWYobj10LmNoYXJDb2RlQXQocyksbj41NTI5NSYmNTczNDQ+bil7aWYoIXIpe2lmKG4+NTYzMTkpeyhlLT0zKT4tMSYmby5wdXNoKDIzOSwxOTEsMTg5KTtjb250aW51ZX1pZihzKzE9PT1pKXsoZS09Myk+LTEmJm8ucHVzaCgyMzksMTkxLDE4OSk7Y29udGludWV9cj1uO2NvbnRpbnVlfWlmKDU2MzIwPm4peyhlLT0zKT4tMSYmby5wdXNoKDIzOSwxOTEsMTg5KSxyPW47Y29udGludWV9bj0oci01NTI5Njw8MTB8bi01NjMyMCkrNjU1MzZ9ZWxzZSByJiYoZS09Myk+LTEmJm8ucHVzaCgyMzksMTkxLDE4OSk7aWYocj1udWxsLDEyOD5uKXtpZigoZS09MSk8MClicmVhaztvLnB1c2gobil9ZWxzZSBpZigyMDQ4Pm4pe2lmKChlLT0yKTwwKWJyZWFrO28ucHVzaChuPj42fDE5Miw2MyZufDEyOCl9ZWxzZSBpZig2NTUzNj5uKXtpZigoZS09Myk8MClicmVhaztvLnB1c2gobj4+MTJ8MjI0LG4+PjYmNjN8MTI4LDYzJm58MTI4KX1lbHNle2lmKCEoMTExNDExMj5uKSl0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIGNvZGUgcG9pbnRcIik7aWYoKGUtPTQpPDApYnJlYWs7by5wdXNoKG4+PjE4fDI0MCxuPj4xMiY2M3wxMjgsbj4+NiY2M3wxMjgsNjMmbnwxMjgpfX1yZXR1cm4gb31mdW5jdGlvbiBWKHQpe2Zvcih2YXIgZT1bXSxuPTA7bjx0Lmxlbmd0aDtuKyspZS5wdXNoKDI1NSZ0LmNoYXJDb2RlQXQobikpO3JldHVybiBlfWZ1bmN0aW9uIHoodCxlKXtmb3IodmFyIG4saSxyLG89W10scz0wO3M8dC5sZW5ndGgmJiEoKGUtPTIpPDApO3MrKyluPXQuY2hhckNvZGVBdChzKSxpPW4+Pjgscj1uJTI1NixvLnB1c2gociksby5wdXNoKGkpO3JldHVybiBvfWZ1bmN0aW9uIFcodCl7cmV0dXJuIHEudG9CeXRlQXJyYXkoSCh0KSl9ZnVuY3Rpb24gSyh0LGUsbixpKXtmb3IodmFyIHI9MDtpPnImJiEocituPj1lLmxlbmd0aHx8cj49dC5sZW5ndGgpO3IrKyllW3Irbl09dFtyXTtyZXR1cm4gcn0vKiFcblx0XHQgKiBUaGUgYnVmZmVyIG1vZHVsZSBmcm9tIG5vZGUuanMsIGZvciB0aGUgYnJvd3Nlci5cblx0XHQgKlxuXHRcdCAqIEBhdXRob3IgICBGZXJvc3MgQWJvdWtoYWRpamVoIDxmZXJvc3NAZmVyb3NzLm9yZz4gPGh0dHA6Ly9mZXJvc3Mub3JnPlxuXHRcdCAqIEBsaWNlbnNlICBNSVRcblx0XHQgKi9cbnZhciBxPW4oNzEpLFg9big3MiksJD1uKDczKTtlLkJ1ZmZlcj10LGUuU2xvd0J1ZmZlcj1tLGUuSU5TUEVDVF9NQVhfQllURVM9NTAsdC5wb29sU2l6ZT04MTkyO3ZhciBaPXt9O3QuVFlQRURfQVJSQVlfU1VQUE9SVD12b2lkIDAhPT1pLlRZUEVEX0FSUkFZX1NVUFBPUlQ/aS5UWVBFRF9BUlJBWV9TVVBQT1JUOnIoKSx0LlRZUEVEX0FSUkFZX1NVUFBPUlQmJih0LnByb3RvdHlwZS5fX3Byb3RvX189VWludDhBcnJheS5wcm90b3R5cGUsdC5fX3Byb3RvX189VWludDhBcnJheSksdC5pc0J1ZmZlcj1mdW5jdGlvbih0KXtyZXR1cm4hKG51bGw9PXR8fCF0Ll9pc0J1ZmZlcil9LHQuY29tcGFyZT1mdW5jdGlvbihlLG4pe2lmKCF0LmlzQnVmZmVyKGUpfHwhdC5pc0J1ZmZlcihuKSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiQXJndW1lbnRzIG11c3QgYmUgQnVmZmVyc1wiKTtpZihlPT09bilyZXR1cm4gMDtmb3IodmFyIGk9ZS5sZW5ndGgscj1uLmxlbmd0aCxvPTAscz1NYXRoLm1pbihpLHIpO3M+byYmZVtvXT09PW5bb107KSsrbztyZXR1cm4gbyE9PXMmJihpPWVbb10scj1uW29dKSxyPmk/LTE6aT5yPzE6MH0sdC5pc0VuY29kaW5nPWZ1bmN0aW9uKHQpe3N3aXRjaChTdHJpbmcodCkudG9Mb3dlckNhc2UoKSl7Y2FzZVwiaGV4XCI6Y2FzZVwidXRmOFwiOmNhc2VcInV0Zi04XCI6Y2FzZVwiYXNjaWlcIjpjYXNlXCJiaW5hcnlcIjpjYXNlXCJiYXNlNjRcIjpjYXNlXCJyYXdcIjpjYXNlXCJ1Y3MyXCI6Y2FzZVwidWNzLTJcIjpjYXNlXCJ1dGYxNmxlXCI6Y2FzZVwidXRmLTE2bGVcIjpyZXR1cm4hMDtkZWZhdWx0OnJldHVybiExfX0sdC5jb25jYXQ9ZnVuY3Rpb24oZSxuKXtpZighJChlKSl0aHJvdyBuZXcgVHlwZUVycm9yKFwibGlzdCBhcmd1bWVudCBtdXN0IGJlIGFuIEFycmF5IG9mIEJ1ZmZlcnMuXCIpO2lmKDA9PT1lLmxlbmd0aClyZXR1cm4gbmV3IHQoMCk7dmFyIGk7aWYodm9pZCAwPT09bilmb3Iobj0wLGk9MDtpPGUubGVuZ3RoO2krKyluKz1lW2ldLmxlbmd0aDt2YXIgcj1uZXcgdChuKSxvPTA7Zm9yKGk9MDtpPGUubGVuZ3RoO2krKyl7dmFyIHM9ZVtpXTtzLmNvcHkocixvKSxvKz1zLmxlbmd0aH1yZXR1cm4gcn0sdC5ieXRlTGVuZ3RoPXksdC5wcm90b3R5cGUubGVuZ3RoPXZvaWQgMCx0LnByb3RvdHlwZS5wYXJlbnQ9dm9pZCAwLHQucHJvdG90eXBlLnRvU3RyaW5nPWZ1bmN0aW9uKCl7dmFyIHQ9MHx0aGlzLmxlbmd0aDtyZXR1cm4gMD09PXQ/XCJcIjowPT09YXJndW1lbnRzLmxlbmd0aD9JKHRoaXMsMCx0KTp2LmFwcGx5KHRoaXMsYXJndW1lbnRzKX0sdC5wcm90b3R5cGUuZXF1YWxzPWZ1bmN0aW9uKGUpe2lmKCF0LmlzQnVmZmVyKGUpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJBcmd1bWVudCBtdXN0IGJlIGEgQnVmZmVyXCIpO3JldHVybiB0aGlzPT09ZT8hMDowPT09dC5jb21wYXJlKHRoaXMsZSl9LHQucHJvdG90eXBlLmluc3BlY3Q9ZnVuY3Rpb24oKXt2YXIgdD1cIlwiLG49ZS5JTlNQRUNUX01BWF9CWVRFUztyZXR1cm4gdGhpcy5sZW5ndGg+MCYmKHQ9dGhpcy50b1N0cmluZyhcImhleFwiLDAsbikubWF0Y2goLy57Mn0vZykuam9pbihcIiBcIiksdGhpcy5sZW5ndGg+biYmKHQrPVwiIC4uLiBcIikpLFwiPEJ1ZmZlciBcIit0K1wiPlwifSx0LnByb3RvdHlwZS5jb21wYXJlPWZ1bmN0aW9uKGUpe2lmKCF0LmlzQnVmZmVyKGUpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJBcmd1bWVudCBtdXN0IGJlIGEgQnVmZmVyXCIpO3JldHVybiB0aGlzPT09ZT8wOnQuY29tcGFyZSh0aGlzLGUpfSx0LnByb3RvdHlwZS5pbmRleE9mPWZ1bmN0aW9uKGUsbil7ZnVuY3Rpb24gaSh0LGUsbil7Zm9yKHZhciBpPS0xLHI9MDtuK3I8dC5sZW5ndGg7cisrKWlmKHRbbityXT09PWVbLTE9PT1pPzA6ci1pXSl7aWYoLTE9PT1pJiYoaT1yKSxyLWkrMT09PWUubGVuZ3RoKXJldHVybiBuK2l9ZWxzZSBpPS0xO3JldHVybi0xfWlmKG4+MjE0NzQ4MzY0Nz9uPTIxNDc0ODM2NDc6LTIxNDc0ODM2NDg+biYmKG49LTIxNDc0ODM2NDgpLG4+Pj0wLDA9PT10aGlzLmxlbmd0aClyZXR1cm4tMTtpZihuPj10aGlzLmxlbmd0aClyZXR1cm4tMTtpZigwPm4mJihuPU1hdGgubWF4KHRoaXMubGVuZ3RoK24sMCkpLFwic3RyaW5nXCI9PXR5cGVvZiBlKXJldHVybiAwPT09ZS5sZW5ndGg/LTE6U3RyaW5nLnByb3RvdHlwZS5pbmRleE9mLmNhbGwodGhpcyxlLG4pO2lmKHQuaXNCdWZmZXIoZSkpcmV0dXJuIGkodGhpcyxlLG4pO2lmKFwibnVtYmVyXCI9PXR5cGVvZiBlKXJldHVybiB0LlRZUEVEX0FSUkFZX1NVUFBPUlQmJlwiZnVuY3Rpb25cIj09PVVpbnQ4QXJyYXkucHJvdG90eXBlLmluZGV4T2Y/VWludDhBcnJheS5wcm90b3R5cGUuaW5kZXhPZi5jYWxsKHRoaXMsZSxuKTppKHRoaXMsW2VdLG4pO3Rocm93IG5ldyBUeXBlRXJyb3IoXCJ2YWwgbXVzdCBiZSBzdHJpbmcsIG51bWJlciBvciBCdWZmZXJcIil9LHQucHJvdG90eXBlLmdldD1mdW5jdGlvbih0KXtyZXR1cm4gY29uc29sZS5sb2coXCIuZ2V0KCkgaXMgZGVwcmVjYXRlZC4gQWNjZXNzIHVzaW5nIGFycmF5IGluZGV4ZXMgaW5zdGVhZC5cIiksdGhpcy5yZWFkVUludDgodCl9LHQucHJvdG90eXBlLnNldD1mdW5jdGlvbih0LGUpe3JldHVybiBjb25zb2xlLmxvZyhcIi5zZXQoKSBpcyBkZXByZWNhdGVkLiBBY2Nlc3MgdXNpbmcgYXJyYXkgaW5kZXhlcyBpbnN0ZWFkLlwiKSx0aGlzLndyaXRlVUludDgodCxlKX0sdC5wcm90b3R5cGUud3JpdGU9ZnVuY3Rpb24odCxlLG4saSl7aWYodm9pZCAwPT09ZSlpPVwidXRmOFwiLG49dGhpcy5sZW5ndGgsZT0wO2Vsc2UgaWYodm9pZCAwPT09biYmXCJzdHJpbmdcIj09dHlwZW9mIGUpaT1lLG49dGhpcy5sZW5ndGgsZT0wO2Vsc2UgaWYoaXNGaW5pdGUoZSkpZT0wfGUsaXNGaW5pdGUobik/KG49MHxuLHZvaWQgMD09PWkmJihpPVwidXRmOFwiKSk6KGk9bixuPXZvaWQgMCk7ZWxzZXt2YXIgcj1pO2k9ZSxlPTB8bixuPXJ9dmFyIG89dGhpcy5sZW5ndGgtZTtpZigodm9pZCAwPT09bnx8bj5vKSYmKG49byksdC5sZW5ndGg+MCYmKDA+bnx8MD5lKXx8ZT50aGlzLmxlbmd0aCl0aHJvdyBuZXcgUmFuZ2VFcnJvcihcImF0dGVtcHQgdG8gd3JpdGUgb3V0c2lkZSBidWZmZXIgYm91bmRzXCIpO2l8fChpPVwidXRmOFwiKTtmb3IodmFyIHM9ITE7Oylzd2l0Y2goaSl7Y2FzZVwiaGV4XCI6cmV0dXJuIEUodGhpcyx0LGUsbik7Y2FzZVwidXRmOFwiOmNhc2VcInV0Zi04XCI6cmV0dXJuIFModGhpcyx0LGUsbik7Y2FzZVwiYXNjaWlcIjpyZXR1cm4gQSh0aGlzLHQsZSxuKTtjYXNlXCJiaW5hcnlcIjpyZXR1cm4gdyh0aGlzLHQsZSxuKTtjYXNlXCJiYXNlNjRcIjpyZXR1cm4gVCh0aGlzLHQsZSxuKTtjYXNlXCJ1Y3MyXCI6Y2FzZVwidWNzLTJcIjpjYXNlXCJ1dGYxNmxlXCI6Y2FzZVwidXRmLTE2bGVcIjpyZXR1cm4gYih0aGlzLHQsZSxuKTtkZWZhdWx0OmlmKHMpdGhyb3cgbmV3IFR5cGVFcnJvcihcIlVua25vd24gZW5jb2Rpbmc6IFwiK2kpO2k9KFwiXCIraSkudG9Mb3dlckNhc2UoKSxzPSEwfX0sdC5wcm90b3R5cGUudG9KU09OPWZ1bmN0aW9uKCl7cmV0dXJue3R5cGU6XCJCdWZmZXJcIixkYXRhOkFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKHRoaXMuX2Fycnx8dGhpcywwKX19O3ZhciBRPTQwOTY7dC5wcm90b3R5cGUuc2xpY2U9ZnVuY3Rpb24oZSxuKXt2YXIgaT10aGlzLmxlbmd0aDtlPX5+ZSxuPXZvaWQgMD09PW4/aTp+fm4sMD5lPyhlKz1pLDA+ZSYmKGU9MCkpOmU+aSYmKGU9aSksMD5uPyhuKz1pLDA+biYmKG49MCkpOm4+aSYmKG49aSksZT5uJiYobj1lKTt2YXIgcjtpZih0LlRZUEVEX0FSUkFZX1NVUFBPUlQpcj10Ll9hdWdtZW50KHRoaXMuc3ViYXJyYXkoZSxuKSk7ZWxzZXt2YXIgbz1uLWU7cj1uZXcgdChvLHZvaWQgMCk7Zm9yKHZhciBzPTA7bz5zO3MrKylyW3NdPXRoaXNbcytlXX1yZXR1cm4gci5sZW5ndGgmJihyLnBhcmVudD10aGlzLnBhcmVudHx8dGhpcykscn0sdC5wcm90b3R5cGUucmVhZFVJbnRMRT1mdW5jdGlvbih0LGUsbil7dD0wfHQsZT0wfGUsbnx8ayh0LGUsdGhpcy5sZW5ndGgpO2Zvcih2YXIgaT10aGlzW3RdLHI9MSxvPTA7KytvPGUmJihyKj0yNTYpOylpKz10aGlzW3Qrb10qcjtyZXR1cm4gaX0sdC5wcm90b3R5cGUucmVhZFVJbnRCRT1mdW5jdGlvbih0LGUsbil7dD0wfHQsZT0wfGUsbnx8ayh0LGUsdGhpcy5sZW5ndGgpO2Zvcih2YXIgaT10aGlzW3QrLS1lXSxyPTE7ZT4wJiYocio9MjU2KTspaSs9dGhpc1t0Ky0tZV0qcjtyZXR1cm4gaX0sdC5wcm90b3R5cGUucmVhZFVJbnQ4PWZ1bmN0aW9uKHQsZSl7cmV0dXJuIGV8fGsodCwxLHRoaXMubGVuZ3RoKSx0aGlzW3RdfSx0LnByb3RvdHlwZS5yZWFkVUludDE2TEU9ZnVuY3Rpb24odCxlKXtyZXR1cm4gZXx8ayh0LDIsdGhpcy5sZW5ndGgpLHRoaXNbdF18dGhpc1t0KzFdPDw4fSx0LnByb3RvdHlwZS5yZWFkVUludDE2QkU9ZnVuY3Rpb24odCxlKXtyZXR1cm4gZXx8ayh0LDIsdGhpcy5sZW5ndGgpLHRoaXNbdF08PDh8dGhpc1t0KzFdfSx0LnByb3RvdHlwZS5yZWFkVUludDMyTEU9ZnVuY3Rpb24odCxlKXtyZXR1cm4gZXx8ayh0LDQsdGhpcy5sZW5ndGgpLCh0aGlzW3RdfHRoaXNbdCsxXTw8OHx0aGlzW3QrMl08PDE2KSsxNjc3NzIxNip0aGlzW3QrM119LHQucHJvdG90eXBlLnJlYWRVSW50MzJCRT1mdW5jdGlvbih0LGUpe3JldHVybiBlfHxrKHQsNCx0aGlzLmxlbmd0aCksMTY3NzcyMTYqdGhpc1t0XSsodGhpc1t0KzFdPDwxNnx0aGlzW3QrMl08PDh8dGhpc1t0KzNdKX0sdC5wcm90b3R5cGUucmVhZEludExFPWZ1bmN0aW9uKHQsZSxuKXt0PTB8dCxlPTB8ZSxufHxrKHQsZSx0aGlzLmxlbmd0aCk7Zm9yKHZhciBpPXRoaXNbdF0scj0xLG89MDsrK288ZSYmKHIqPTI1Nik7KWkrPXRoaXNbdCtvXSpyO3JldHVybiByKj0xMjgsaT49ciYmKGktPU1hdGgucG93KDIsOCplKSksaX0sdC5wcm90b3R5cGUucmVhZEludEJFPWZ1bmN0aW9uKHQsZSxuKXt0PTB8dCxlPTB8ZSxufHxrKHQsZSx0aGlzLmxlbmd0aCk7Zm9yKHZhciBpPWUscj0xLG89dGhpc1t0Ky0taV07aT4wJiYocio9MjU2KTspbys9dGhpc1t0Ky0taV0qcjtyZXR1cm4gcio9MTI4LG8+PXImJihvLT1NYXRoLnBvdygyLDgqZSkpLG99LHQucHJvdG90eXBlLnJlYWRJbnQ4PWZ1bmN0aW9uKHQsZSl7cmV0dXJuIGV8fGsodCwxLHRoaXMubGVuZ3RoKSwxMjgmdGhpc1t0XT8tMSooMjU1LXRoaXNbdF0rMSk6dGhpc1t0XX0sdC5wcm90b3R5cGUucmVhZEludDE2TEU9ZnVuY3Rpb24odCxlKXtlfHxrKHQsMix0aGlzLmxlbmd0aCk7dmFyIG49dGhpc1t0XXx0aGlzW3QrMV08PDg7cmV0dXJuIDMyNzY4Jm4/NDI5NDkwMTc2MHxuOm59LHQucHJvdG90eXBlLnJlYWRJbnQxNkJFPWZ1bmN0aW9uKHQsZSl7ZXx8ayh0LDIsdGhpcy5sZW5ndGgpO3ZhciBuPXRoaXNbdCsxXXx0aGlzW3RdPDw4O3JldHVybiAzMjc2OCZuPzQyOTQ5MDE3NjB8bjpufSx0LnByb3RvdHlwZS5yZWFkSW50MzJMRT1mdW5jdGlvbih0LGUpe3JldHVybiBlfHxrKHQsNCx0aGlzLmxlbmd0aCksdGhpc1t0XXx0aGlzW3QrMV08PDh8dGhpc1t0KzJdPDwxNnx0aGlzW3QrM108PDI0fSx0LnByb3RvdHlwZS5yZWFkSW50MzJCRT1mdW5jdGlvbih0LGUpe3JldHVybiBlfHxrKHQsNCx0aGlzLmxlbmd0aCksdGhpc1t0XTw8MjR8dGhpc1t0KzFdPDwxNnx0aGlzW3QrMl08PDh8dGhpc1t0KzNdfSx0LnByb3RvdHlwZS5yZWFkRmxvYXRMRT1mdW5jdGlvbih0LGUpe3JldHVybiBlfHxrKHQsNCx0aGlzLmxlbmd0aCksWC5yZWFkKHRoaXMsdCwhMCwyMyw0KX0sdC5wcm90b3R5cGUucmVhZEZsb2F0QkU9ZnVuY3Rpb24odCxlKXtyZXR1cm4gZXx8ayh0LDQsdGhpcy5sZW5ndGgpLFgucmVhZCh0aGlzLHQsITEsMjMsNCl9LHQucHJvdG90eXBlLnJlYWREb3VibGVMRT1mdW5jdGlvbih0LGUpe3JldHVybiBlfHxrKHQsOCx0aGlzLmxlbmd0aCksWC5yZWFkKHRoaXMsdCwhMCw1Miw4KX0sdC5wcm90b3R5cGUucmVhZERvdWJsZUJFPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIGV8fGsodCw4LHRoaXMubGVuZ3RoKSxYLnJlYWQodGhpcyx0LCExLDUyLDgpfSx0LnByb3RvdHlwZS53cml0ZVVJbnRMRT1mdW5jdGlvbih0LGUsbixpKXt0PSt0LGU9MHxlLG49MHxuLGl8fE4odGhpcyx0LGUsbixNYXRoLnBvdygyLDgqbiksMCk7dmFyIHI9MSxvPTA7Zm9yKHRoaXNbZV09MjU1JnQ7KytvPG4mJihyKj0yNTYpOyl0aGlzW2Urb109dC9yJjI1NTtyZXR1cm4gZStufSx0LnByb3RvdHlwZS53cml0ZVVJbnRCRT1mdW5jdGlvbih0LGUsbixpKXt0PSt0LGU9MHxlLG49MHxuLGl8fE4odGhpcyx0LGUsbixNYXRoLnBvdygyLDgqbiksMCk7dmFyIHI9bi0xLG89MTtmb3IodGhpc1tlK3JdPTI1NSZ0Oy0tcj49MCYmKG8qPTI1Nik7KXRoaXNbZStyXT10L28mMjU1O3JldHVybiBlK259LHQucHJvdG90eXBlLndyaXRlVUludDg9ZnVuY3Rpb24oZSxuLGkpe3JldHVybiBlPStlLG49MHxuLGl8fE4odGhpcyxlLG4sMSwyNTUsMCksdC5UWVBFRF9BUlJBWV9TVVBQT1JUfHwoZT1NYXRoLmZsb29yKGUpKSx0aGlzW25dPTI1NSZlLG4rMX0sdC5wcm90b3R5cGUud3JpdGVVSW50MTZMRT1mdW5jdGlvbihlLG4saSl7cmV0dXJuIGU9K2Usbj0wfG4saXx8Tih0aGlzLGUsbiwyLDY1NTM1LDApLHQuVFlQRURfQVJSQVlfU1VQUE9SVD8odGhpc1tuXT0yNTUmZSx0aGlzW24rMV09ZT4+PjgpOngodGhpcyxlLG4sITApLG4rMn0sdC5wcm90b3R5cGUud3JpdGVVSW50MTZCRT1mdW5jdGlvbihlLG4saSl7cmV0dXJuIGU9K2Usbj0wfG4saXx8Tih0aGlzLGUsbiwyLDY1NTM1LDApLHQuVFlQRURfQVJSQVlfU1VQUE9SVD8odGhpc1tuXT1lPj4+OCx0aGlzW24rMV09MjU1JmUpOngodGhpcyxlLG4sITEpLG4rMn0sdC5wcm90b3R5cGUud3JpdGVVSW50MzJMRT1mdW5jdGlvbihlLG4saSl7cmV0dXJuIGU9K2Usbj0wfG4saXx8Tih0aGlzLGUsbiw0LDQyOTQ5NjcyOTUsMCksdC5UWVBFRF9BUlJBWV9TVVBQT1JUPyh0aGlzW24rM109ZT4+PjI0LHRoaXNbbisyXT1lPj4+MTYsdGhpc1tuKzFdPWU+Pj44LHRoaXNbbl09MjU1JmUpOkModGhpcyxlLG4sITApLG4rNH0sdC5wcm90b3R5cGUud3JpdGVVSW50MzJCRT1mdW5jdGlvbihlLG4saSl7cmV0dXJuIGU9K2Usbj0wfG4saXx8Tih0aGlzLGUsbiw0LDQyOTQ5NjcyOTUsMCksdC5UWVBFRF9BUlJBWV9TVVBQT1JUPyh0aGlzW25dPWU+Pj4yNCx0aGlzW24rMV09ZT4+PjE2LHRoaXNbbisyXT1lPj4+OCx0aGlzW24rM109MjU1JmUpOkModGhpcyxlLG4sITEpLG4rNH0sdC5wcm90b3R5cGUud3JpdGVJbnRMRT1mdW5jdGlvbih0LGUsbixpKXtpZih0PSt0LGU9MHxlLCFpKXt2YXIgcj1NYXRoLnBvdygyLDgqbi0xKTtOKHRoaXMsdCxlLG4sci0xLC1yKX12YXIgbz0wLHM9MSxhPTA+dD8xOjA7Zm9yKHRoaXNbZV09MjU1JnQ7KytvPG4mJihzKj0yNTYpOyl0aGlzW2Urb109KHQvcz4+MCktYSYyNTU7cmV0dXJuIGUrbn0sdC5wcm90b3R5cGUud3JpdGVJbnRCRT1mdW5jdGlvbih0LGUsbixpKXtpZih0PSt0LGU9MHxlLCFpKXt2YXIgcj1NYXRoLnBvdygyLDgqbi0xKTtOKHRoaXMsdCxlLG4sci0xLC1yKX12YXIgbz1uLTEscz0xLGE9MD50PzE6MDtmb3IodGhpc1tlK29dPTI1NSZ0Oy0tbz49MCYmKHMqPTI1Nik7KXRoaXNbZStvXT0odC9zPj4wKS1hJjI1NTtyZXR1cm4gZStufSx0LnByb3RvdHlwZS53cml0ZUludDg9ZnVuY3Rpb24oZSxuLGkpe3JldHVybiBlPStlLG49MHxuLGl8fE4odGhpcyxlLG4sMSwxMjcsLTEyOCksdC5UWVBFRF9BUlJBWV9TVVBQT1JUfHwoZT1NYXRoLmZsb29yKGUpKSwwPmUmJihlPTI1NStlKzEpLHRoaXNbbl09MjU1JmUsbisxfSx0LnByb3RvdHlwZS53cml0ZUludDE2TEU9ZnVuY3Rpb24oZSxuLGkpe3JldHVybiBlPStlLG49MHxuLGl8fE4odGhpcyxlLG4sMiwzMjc2NywtMzI3NjgpLHQuVFlQRURfQVJSQVlfU1VQUE9SVD8odGhpc1tuXT0yNTUmZSx0aGlzW24rMV09ZT4+PjgpOngodGhpcyxlLG4sITApLG4rMn0sdC5wcm90b3R5cGUud3JpdGVJbnQxNkJFPWZ1bmN0aW9uKGUsbixpKXtyZXR1cm4gZT0rZSxuPTB8bixpfHxOKHRoaXMsZSxuLDIsMzI3NjcsLTMyNzY4KSx0LlRZUEVEX0FSUkFZX1NVUFBPUlQ/KHRoaXNbbl09ZT4+PjgsdGhpc1tuKzFdPTI1NSZlKTp4KHRoaXMsZSxuLCExKSxuKzJ9LHQucHJvdG90eXBlLndyaXRlSW50MzJMRT1mdW5jdGlvbihlLG4saSl7cmV0dXJuIGU9K2Usbj0wfG4saXx8Tih0aGlzLGUsbiw0LDIxNDc0ODM2NDcsLTIxNDc0ODM2NDgpLHQuVFlQRURfQVJSQVlfU1VQUE9SVD8odGhpc1tuXT0yNTUmZSx0aGlzW24rMV09ZT4+PjgsdGhpc1tuKzJdPWU+Pj4xNix0aGlzW24rM109ZT4+PjI0KTpDKHRoaXMsZSxuLCEwKSxuKzR9LHQucHJvdG90eXBlLndyaXRlSW50MzJCRT1mdW5jdGlvbihlLG4saSl7cmV0dXJuIGU9K2Usbj0wfG4saXx8Tih0aGlzLGUsbiw0LDIxNDc0ODM2NDcsLTIxNDc0ODM2NDgpLDA+ZSYmKGU9NDI5NDk2NzI5NStlKzEpLHQuVFlQRURfQVJSQVlfU1VQUE9SVD8odGhpc1tuXT1lPj4+MjQsdGhpc1tuKzFdPWU+Pj4xNix0aGlzW24rMl09ZT4+PjgsdGhpc1tuKzNdPTI1NSZlKTpDKHRoaXMsZSxuLCExKSxuKzR9LHQucHJvdG90eXBlLndyaXRlRmxvYXRMRT1mdW5jdGlvbih0LGUsbil7cmV0dXJuIFUodGhpcyx0LGUsITAsbil9LHQucHJvdG90eXBlLndyaXRlRmxvYXRCRT1mdW5jdGlvbih0LGUsbil7cmV0dXJuIFUodGhpcyx0LGUsITEsbil9LHQucHJvdG90eXBlLndyaXRlRG91YmxlTEU9ZnVuY3Rpb24odCxlLG4pe3JldHVybiBCKHRoaXMsdCxlLCEwLG4pfSx0LnByb3RvdHlwZS53cml0ZURvdWJsZUJFPWZ1bmN0aW9uKHQsZSxuKXtyZXR1cm4gQih0aGlzLHQsZSwhMSxuKX0sdC5wcm90b3R5cGUuY29weT1mdW5jdGlvbihlLG4saSxyKXtpZihpfHwoaT0wKSxyfHwwPT09cnx8KHI9dGhpcy5sZW5ndGgpLG4+PWUubGVuZ3RoJiYobj1lLmxlbmd0aCksbnx8KG49MCkscj4wJiZpPnImJihyPWkpLHI9PT1pKXJldHVybiAwO2lmKDA9PT1lLmxlbmd0aHx8MD09PXRoaXMubGVuZ3RoKXJldHVybiAwO2lmKDA+bil0aHJvdyBuZXcgUmFuZ2VFcnJvcihcInRhcmdldFN0YXJ0IG91dCBvZiBib3VuZHNcIik7aWYoMD5pfHxpPj10aGlzLmxlbmd0aCl0aHJvdyBuZXcgUmFuZ2VFcnJvcihcInNvdXJjZVN0YXJ0IG91dCBvZiBib3VuZHNcIik7aWYoMD5yKXRocm93IG5ldyBSYW5nZUVycm9yKFwic291cmNlRW5kIG91dCBvZiBib3VuZHNcIik7cj50aGlzLmxlbmd0aCYmKHI9dGhpcy5sZW5ndGgpLGUubGVuZ3RoLW48ci1pJiYocj1lLmxlbmd0aC1uK2kpO3ZhciBvLHM9ci1pO2lmKHRoaXM9PT1lJiZuPmkmJnI+bilmb3Iobz1zLTE7bz49MDtvLS0pZVtvK25dPXRoaXNbbytpXTtlbHNlIGlmKDFlMz5zfHwhdC5UWVBFRF9BUlJBWV9TVVBQT1JUKWZvcihvPTA7cz5vO28rKyllW28rbl09dGhpc1tvK2ldO2Vsc2UgZS5fc2V0KHRoaXMuc3ViYXJyYXkoaSxpK3MpLG4pO3JldHVybiBzfSx0LnByb3RvdHlwZS5maWxsPWZ1bmN0aW9uKHQsZSxuKXtpZih0fHwodD0wKSxlfHwoZT0wKSxufHwobj10aGlzLmxlbmd0aCksZT5uKXRocm93IG5ldyBSYW5nZUVycm9yKFwiZW5kIDwgc3RhcnRcIik7aWYobiE9PWUmJjAhPT10aGlzLmxlbmd0aCl7aWYoMD5lfHxlPj10aGlzLmxlbmd0aCl0aHJvdyBuZXcgUmFuZ2VFcnJvcihcInN0YXJ0IG91dCBvZiBib3VuZHNcIik7aWYoMD5ufHxuPnRoaXMubGVuZ3RoKXRocm93IG5ldyBSYW5nZUVycm9yKFwiZW5kIG91dCBvZiBib3VuZHNcIik7dmFyIGk7aWYoXCJudW1iZXJcIj09dHlwZW9mIHQpZm9yKGk9ZTtuPmk7aSsrKXRoaXNbaV09dDtlbHNle3ZhciByPVkodC50b1N0cmluZygpKSxvPXIubGVuZ3RoO2ZvcihpPWU7bj5pO2krKyl0aGlzW2ldPXJbaSVvXX1yZXR1cm4gdGhpc319LHQucHJvdG90eXBlLnRvQXJyYXlCdWZmZXI9ZnVuY3Rpb24oKXtpZihcInVuZGVmaW5lZFwiIT10eXBlb2YgVWludDhBcnJheSl7aWYodC5UWVBFRF9BUlJBWV9TVVBQT1JUKXJldHVybiBuZXcgdCh0aGlzKS5idWZmZXI7Zm9yKHZhciBlPW5ldyBVaW50OEFycmF5KHRoaXMubGVuZ3RoKSxuPTAsaT1lLmxlbmd0aDtpPm47bis9MSllW25dPXRoaXNbbl07cmV0dXJuIGUuYnVmZmVyfXRocm93IG5ldyBUeXBlRXJyb3IoXCJCdWZmZXIudG9BcnJheUJ1ZmZlciBub3Qgc3VwcG9ydGVkIGluIHRoaXMgYnJvd3NlclwiKX07dmFyIEo9dC5wcm90b3R5cGU7dC5fYXVnbWVudD1mdW5jdGlvbihlKXtyZXR1cm4gZS5jb25zdHJ1Y3Rvcj10LGUuX2lzQnVmZmVyPSEwLGUuX3NldD1lLnNldCxlLmdldD1KLmdldCxlLnNldD1KLnNldCxlLndyaXRlPUoud3JpdGUsZS50b1N0cmluZz1KLnRvU3RyaW5nLGUudG9Mb2NhbGVTdHJpbmc9Si50b1N0cmluZyxlLnRvSlNPTj1KLnRvSlNPTixlLmVxdWFscz1KLmVxdWFscyxlLmNvbXBhcmU9Si5jb21wYXJlLGUuaW5kZXhPZj1KLmluZGV4T2YsZS5jb3B5PUouY29weSxlLnNsaWNlPUouc2xpY2UsZS5yZWFkVUludExFPUoucmVhZFVJbnRMRSxlLnJlYWRVSW50QkU9Si5yZWFkVUludEJFLGUucmVhZFVJbnQ4PUoucmVhZFVJbnQ4LGUucmVhZFVJbnQxNkxFPUoucmVhZFVJbnQxNkxFLGUucmVhZFVJbnQxNkJFPUoucmVhZFVJbnQxNkJFLGUucmVhZFVJbnQzMkxFPUoucmVhZFVJbnQzMkxFLGUucmVhZFVJbnQzMkJFPUoucmVhZFVJbnQzMkJFLGUucmVhZEludExFPUoucmVhZEludExFLGUucmVhZEludEJFPUoucmVhZEludEJFLGUucmVhZEludDg9Si5yZWFkSW50OCxlLnJlYWRJbnQxNkxFPUoucmVhZEludDE2TEUsZS5yZWFkSW50MTZCRT1KLnJlYWRJbnQxNkJFLGUucmVhZEludDMyTEU9Si5yZWFkSW50MzJMRSxlLnJlYWRJbnQzMkJFPUoucmVhZEludDMyQkUsZS5yZWFkRmxvYXRMRT1KLnJlYWRGbG9hdExFLGUucmVhZEZsb2F0QkU9Si5yZWFkRmxvYXRCRSxlLnJlYWREb3VibGVMRT1KLnJlYWREb3VibGVMRSxlLnJlYWREb3VibGVCRT1KLnJlYWREb3VibGVCRSxlLndyaXRlVUludDg9Si53cml0ZVVJbnQ4LGUud3JpdGVVSW50TEU9Si53cml0ZVVJbnRMRSxlLndyaXRlVUludEJFPUoud3JpdGVVSW50QkUsZS53cml0ZVVJbnQxNkxFPUoud3JpdGVVSW50MTZMRSxlLndyaXRlVUludDE2QkU9Si53cml0ZVVJbnQxNkJFLGUud3JpdGVVSW50MzJMRT1KLndyaXRlVUludDMyTEUsZS53cml0ZVVJbnQzMkJFPUoud3JpdGVVSW50MzJCRSxlLndyaXRlSW50TEU9Si53cml0ZUludExFLGUud3JpdGVJbnRCRT1KLndyaXRlSW50QkUsZS53cml0ZUludDg9Si53cml0ZUludDgsZS53cml0ZUludDE2TEU9Si53cml0ZUludDE2TEUsZS53cml0ZUludDE2QkU9Si53cml0ZUludDE2QkUsZS53cml0ZUludDMyTEU9Si53cml0ZUludDMyTEUsZS53cml0ZUludDMyQkU9Si53cml0ZUludDMyQkUsZS53cml0ZUZsb2F0TEU9Si53cml0ZUZsb2F0TEUsZS53cml0ZUZsb2F0QkU9Si53cml0ZUZsb2F0QkUsZS53cml0ZURvdWJsZUxFPUoud3JpdGVEb3VibGVMRSxlLndyaXRlRG91YmxlQkU9Si53cml0ZURvdWJsZUJFLGUuZmlsbD1KLmZpbGwsZS5pbnNwZWN0PUouaW5zcGVjdCxlLnRvQXJyYXlCdWZmZXI9Si50b0FycmF5QnVmZmVyLGV9O3ZhciB0dD0vW14rXFwvMC05QS1aYS16LV9dL2d9KS5jYWxsKGUsbig3MCkuQnVmZmVyLGZ1bmN0aW9uKCl7cmV0dXJuIHRoaXN9KCkpfSxmdW5jdGlvbih0LGUsbil7dmFyIGk9XCJBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWmFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6MDEyMzQ1Njc4OSsvXCI7IWZ1bmN0aW9uKHQpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIGUodCl7dmFyIGU9dC5jaGFyQ29kZUF0KDApO3JldHVybiBlPT09c3x8ZT09PWw/NjI6ZT09PWF8fGU9PT1mPzYzOnU+ZT8tMTp1KzEwPmU/ZS11KzI2KzI2OmMrMjY+ZT9lLWM6aCsyNj5lP2UtaCsyNjp2b2lkIDB9ZnVuY3Rpb24gbih0KXtmdW5jdGlvbiBuKHQpe2hbbCsrXT10fXZhciBpLHIscyxhLHUsaDtpZih0Lmxlbmd0aCU0PjApdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBzdHJpbmcuIExlbmd0aCBtdXN0IGJlIGEgbXVsdGlwbGUgb2YgNFwiKTt2YXIgYz10Lmxlbmd0aDt1PVwiPVwiPT09dC5jaGFyQXQoYy0yKT8yOlwiPVwiPT09dC5jaGFyQXQoYy0xKT8xOjAsaD1uZXcgbygzKnQubGVuZ3RoLzQtdSkscz11PjA/dC5sZW5ndGgtNDp0Lmxlbmd0aDt2YXIgbD0wO2ZvcihpPTAscj0wO3M+aTtpKz00LHIrPTMpYT1lKHQuY2hhckF0KGkpKTw8MTh8ZSh0LmNoYXJBdChpKzEpKTw8MTJ8ZSh0LmNoYXJBdChpKzIpKTw8NnxlKHQuY2hhckF0KGkrMykpLG4oKDE2NzExNjgwJmEpPj4xNiksbigoNjUyODAmYSk+PjgpLG4oMjU1JmEpO3JldHVybiAyPT09dT8oYT1lKHQuY2hhckF0KGkpKTw8MnxlKHQuY2hhckF0KGkrMSkpPj40LG4oMjU1JmEpKToxPT09dSYmKGE9ZSh0LmNoYXJBdChpKSk8PDEwfGUodC5jaGFyQXQoaSsxKSk8PDR8ZSh0LmNoYXJBdChpKzIpKT4+MixuKGE+PjgmMjU1KSxuKDI1NSZhKSksaH1mdW5jdGlvbiByKHQpe2Z1bmN0aW9uIGUodCl7cmV0dXJuIGkuY2hhckF0KHQpfWZ1bmN0aW9uIG4odCl7cmV0dXJuIGUodD4+MTgmNjMpK2UodD4+MTImNjMpK2UodD4+NiY2MykrZSg2MyZ0KX12YXIgcixvLHMsYT10Lmxlbmd0aCUzLHU9XCJcIjtmb3Iocj0wLHM9dC5sZW5ndGgtYTtzPnI7cis9MylvPSh0W3JdPDwxNikrKHRbcisxXTw8OCkrdFtyKzJdLHUrPW4obyk7c3dpdGNoKGEpe2Nhc2UgMTpvPXRbdC5sZW5ndGgtMV0sdSs9ZShvPj4yKSx1Kz1lKG88PDQmNjMpLHUrPVwiPT1cIjticmVhaztjYXNlIDI6bz0odFt0Lmxlbmd0aC0yXTw8OCkrdFt0Lmxlbmd0aC0xXSx1Kz1lKG8+PjEwKSx1Kz1lKG8+PjQmNjMpLHUrPWUobzw8MiY2MyksdSs9XCI9XCJ9cmV0dXJuIHV9dmFyIG89XCJ1bmRlZmluZWRcIiE9dHlwZW9mIFVpbnQ4QXJyYXk/VWludDhBcnJheTpBcnJheSxzPVwiK1wiLmNoYXJDb2RlQXQoMCksYT1cIi9cIi5jaGFyQ29kZUF0KDApLHU9XCIwXCIuY2hhckNvZGVBdCgwKSxoPVwiYVwiLmNoYXJDb2RlQXQoMCksYz1cIkFcIi5jaGFyQ29kZUF0KDApLGw9XCItXCIuY2hhckNvZGVBdCgwKSxmPVwiX1wiLmNoYXJDb2RlQXQoMCk7dC50b0J5dGVBcnJheT1uLHQuZnJvbUJ5dGVBcnJheT1yfShlKX0sZnVuY3Rpb24odCxlKXtlLnJlYWQ9ZnVuY3Rpb24odCxlLG4saSxyKXt2YXIgbyxzLGE9OCpyLWktMSx1PSgxPDxhKS0xLGg9dT4+MSxjPS03LGw9bj9yLTE6MCxmPW4/LTE6MSxkPXRbZStsXTtmb3IobCs9ZixvPWQmKDE8PC1jKS0xLGQ+Pj0tYyxjKz1hO2M+MDtvPTI1NipvK3RbZStsXSxsKz1mLGMtPTgpO2ZvcihzPW8mKDE8PC1jKS0xLG8+Pj0tYyxjKz1pO2M+MDtzPTI1NipzK3RbZStsXSxsKz1mLGMtPTgpO2lmKDA9PT1vKW89MS1oO2Vsc2V7aWYobz09PXUpcmV0dXJuIHM/TmFOOihkPy0xOjEpKigxLzApO3MrPU1hdGgucG93KDIsaSksby09aH1yZXR1cm4oZD8tMToxKSpzKk1hdGgucG93KDIsby1pKX0sZS53cml0ZT1mdW5jdGlvbih0LGUsbixpLHIsbyl7dmFyIHMsYSx1LGg9OCpvLXItMSxjPSgxPDxoKS0xLGw9Yz4+MSxmPTIzPT09cj9NYXRoLnBvdygyLC0yNCktTWF0aC5wb3coMiwtNzcpOjAsZD1pPzA6by0xLHA9aT8xOi0xLGc9MD5lfHwwPT09ZSYmMD4xL2U/MTowO2ZvcihlPU1hdGguYWJzKGUpLGlzTmFOKGUpfHxlPT09MS8wPyhhPWlzTmFOKGUpPzE6MCxzPWMpOihzPU1hdGguZmxvb3IoTWF0aC5sb2coZSkvTWF0aC5MTjIpLGUqKHU9TWF0aC5wb3coMiwtcykpPDEmJihzLS0sdSo9MiksZSs9cytsPj0xP2YvdTpmKk1hdGgucG93KDIsMS1sKSxlKnU+PTImJihzKyssdS89MikscytsPj1jPyhhPTAscz1jKTpzK2w+PTE/KGE9KGUqdS0xKSpNYXRoLnBvdygyLHIpLHMrPWwpOihhPWUqTWF0aC5wb3coMixsLTEpKk1hdGgucG93KDIscikscz0wKSk7cj49ODt0W24rZF09MjU1JmEsZCs9cCxhLz0yNTYsci09OCk7Zm9yKHM9czw8cnxhLGgrPXI7aD4wO3RbbitkXT0yNTUmcyxkKz1wLHMvPTI1NixoLT04KTt0W24rZC1wXXw9MTI4Kmd9fSxmdW5jdGlvbih0LGUpe3ZhciBuPUFycmF5LmlzQXJyYXksaT1PYmplY3QucHJvdG90eXBlLnRvU3RyaW5nO3QuZXhwb3J0cz1ufHxmdW5jdGlvbih0KXtyZXR1cm4hIXQmJlwiW29iamVjdCBBcnJheV1cIj09aS5jYWxsKHQpfX0sZnVuY3Rpb24odCxlLG4pe3ZhciBpPW4oNzUpO3QuZXhwb3J0cz1mdW5jdGlvbigpe2kubG9nZ2luZ0VuYWJsZWQoKSYmY29uc29sZS5sb2cuYXBwbHkoY29uc29sZSxhcmd1bWVudHMpfX0sZnVuY3Rpb24odCxlKXt2YXIgbj0hMTt0LmV4cG9ydHM9e2xvZ2dpbmdFbmFibGVkOmZ1bmN0aW9uKHQpe3JldHVybiB2b2lkIDAhPT10JiYobj10KSxufX19LGZ1bmN0aW9uKHQsZSxuKXtmdW5jdGlvbiBpKHQsZSxuKXt2YXIgaT1vKHQpO3JldHVybiBuJiZzKHQsZSxuKSYmKGU9dm9pZCAwKSxlP3IoaSxlKTppfXZhciByPW4oNzcpLG89big4Mykscz1uKDg0KTt0LmV4cG9ydHM9aX0sWzEzMSw3OCw3OV0sMyxbMTMyLDgwLDgxLDgyXSw1LDYsNyw1NSwxMCxbMTMwLDg2LDkyLDg4XSxbMTMxLDg3LDg4XSwzLFsxMzIsODksOTAsOTFdLDUsNiw3LFsxMzMsOTMsOTQsOTVdLDksMTAsMTEsZnVuY3Rpb24odCxlKXtmdW5jdGlvbiBuKCl7dGhpcy5fZXZlbnRzPXRoaXMuX2V2ZW50c3x8e30sdGhpcy5fbWF4TGlzdGVuZXJzPXRoaXMuX21heExpc3RlbmVyc3x8dm9pZCAwfWZ1bmN0aW9uIGkodCl7cmV0dXJuXCJmdW5jdGlvblwiPT10eXBlb2YgdH1mdW5jdGlvbiByKHQpe3JldHVyblwibnVtYmVyXCI9PXR5cGVvZiB0fWZ1bmN0aW9uIG8odCl7cmV0dXJuXCJvYmplY3RcIj09dHlwZW9mIHQmJm51bGwhPT10fWZ1bmN0aW9uIHModCl7cmV0dXJuIHZvaWQgMD09PXR9dC5leHBvcnRzPW4sbi5FdmVudEVtaXR0ZXI9bixuLnByb3RvdHlwZS5fZXZlbnRzPXZvaWQgMCxuLnByb3RvdHlwZS5fbWF4TGlzdGVuZXJzPXZvaWQgMCxuLmRlZmF1bHRNYXhMaXN0ZW5lcnM9MTAsbi5wcm90b3R5cGUuc2V0TWF4TGlzdGVuZXJzPWZ1bmN0aW9uKHQpe2lmKCFyKHQpfHwwPnR8fGlzTmFOKHQpKXRocm93IFR5cGVFcnJvcihcIm4gbXVzdCBiZSBhIHBvc2l0aXZlIG51bWJlclwiKTtyZXR1cm4gdGhpcy5fbWF4TGlzdGVuZXJzPXQsdGhpc30sbi5wcm90b3R5cGUuZW1pdD1mdW5jdGlvbih0KXt2YXIgZSxuLHIsYSx1LGg7aWYodGhpcy5fZXZlbnRzfHwodGhpcy5fZXZlbnRzPXt9KSxcImVycm9yXCI9PT10JiYoIXRoaXMuX2V2ZW50cy5lcnJvcnx8byh0aGlzLl9ldmVudHMuZXJyb3IpJiYhdGhpcy5fZXZlbnRzLmVycm9yLmxlbmd0aCkpe2lmKGU9YXJndW1lbnRzWzFdLGUgaW5zdGFuY2VvZiBFcnJvcil0aHJvdyBlO3Rocm93IFR5cGVFcnJvcignVW5jYXVnaHQsIHVuc3BlY2lmaWVkIFwiZXJyb3JcIiBldmVudC4nKX1pZihuPXRoaXMuX2V2ZW50c1t0XSxzKG4pKXJldHVybiExO2lmKGkobikpc3dpdGNoKGFyZ3VtZW50cy5sZW5ndGgpe2Nhc2UgMTpuLmNhbGwodGhpcyk7YnJlYWs7Y2FzZSAyOm4uY2FsbCh0aGlzLGFyZ3VtZW50c1sxXSk7YnJlYWs7Y2FzZSAzOm4uY2FsbCh0aGlzLGFyZ3VtZW50c1sxXSxhcmd1bWVudHNbMl0pO2JyZWFrO2RlZmF1bHQ6YT1BcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsMSksbi5hcHBseSh0aGlzLGEpfWVsc2UgaWYobyhuKSlmb3IoYT1BcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsMSksaD1uLnNsaWNlKCkscj1oLmxlbmd0aCx1PTA7cj51O3UrKyloW3VdLmFwcGx5KHRoaXMsYSk7cmV0dXJuITB9LG4ucHJvdG90eXBlLmFkZExpc3RlbmVyPWZ1bmN0aW9uKHQsZSl7dmFyIHI7aWYoIWkoZSkpdGhyb3cgVHlwZUVycm9yKFwibGlzdGVuZXIgbXVzdCBiZSBhIGZ1bmN0aW9uXCIpO3JldHVybiB0aGlzLl9ldmVudHN8fCh0aGlzLl9ldmVudHM9e30pLHRoaXMuX2V2ZW50cy5uZXdMaXN0ZW5lciYmdGhpcy5lbWl0KFwibmV3TGlzdGVuZXJcIix0LGkoZS5saXN0ZW5lcik/ZS5saXN0ZW5lcjplKSx0aGlzLl9ldmVudHNbdF0/byh0aGlzLl9ldmVudHNbdF0pP3RoaXMuX2V2ZW50c1t0XS5wdXNoKGUpOnRoaXMuX2V2ZW50c1t0XT1bdGhpcy5fZXZlbnRzW3RdLGVdOnRoaXMuX2V2ZW50c1t0XT1lLG8odGhpcy5fZXZlbnRzW3RdKSYmIXRoaXMuX2V2ZW50c1t0XS53YXJuZWQmJihyPXModGhpcy5fbWF4TGlzdGVuZXJzKT9uLmRlZmF1bHRNYXhMaXN0ZW5lcnM6dGhpcy5fbWF4TGlzdGVuZXJzLHImJnI+MCYmdGhpcy5fZXZlbnRzW3RdLmxlbmd0aD5yJiYodGhpcy5fZXZlbnRzW3RdLndhcm5lZD0hMCxjb25zb2xlLmVycm9yKFwiKG5vZGUpIHdhcm5pbmc6IHBvc3NpYmxlIEV2ZW50RW1pdHRlciBtZW1vcnkgbGVhayBkZXRlY3RlZC4gJWQgbGlzdGVuZXJzIGFkZGVkLiBVc2UgZW1pdHRlci5zZXRNYXhMaXN0ZW5lcnMoKSB0byBpbmNyZWFzZSBsaW1pdC5cIix0aGlzLl9ldmVudHNbdF0ubGVuZ3RoKSxcImZ1bmN0aW9uXCI9PXR5cGVvZiBjb25zb2xlLnRyYWNlJiZjb25zb2xlLnRyYWNlKCkpKSx0aGlzfSxuLnByb3RvdHlwZS5vbj1uLnByb3RvdHlwZS5hZGRMaXN0ZW5lcixuLnByb3RvdHlwZS5vbmNlPWZ1bmN0aW9uKHQsZSl7ZnVuY3Rpb24gbigpe3RoaXMucmVtb3ZlTGlzdGVuZXIodCxuKSxyfHwocj0hMCxlLmFwcGx5KHRoaXMsYXJndW1lbnRzKSl9aWYoIWkoZSkpdGhyb3cgVHlwZUVycm9yKFwibGlzdGVuZXIgbXVzdCBiZSBhIGZ1bmN0aW9uXCIpO3ZhciByPSExO3JldHVybiBuLmxpc3RlbmVyPWUsdGhpcy5vbih0LG4pLHRoaXN9LG4ucHJvdG90eXBlLnJlbW92ZUxpc3RlbmVyPWZ1bmN0aW9uKHQsZSl7dmFyIG4scixzLGE7aWYoIWkoZSkpdGhyb3cgVHlwZUVycm9yKFwibGlzdGVuZXIgbXVzdCBiZSBhIGZ1bmN0aW9uXCIpO2lmKCF0aGlzLl9ldmVudHN8fCF0aGlzLl9ldmVudHNbdF0pcmV0dXJuIHRoaXM7aWYobj10aGlzLl9ldmVudHNbdF0scz1uLmxlbmd0aCxyPS0xLG49PT1lfHxpKG4ubGlzdGVuZXIpJiZuLmxpc3RlbmVyPT09ZSlkZWxldGUgdGhpcy5fZXZlbnRzW3RdLHRoaXMuX2V2ZW50cy5yZW1vdmVMaXN0ZW5lciYmdGhpcy5lbWl0KFwicmVtb3ZlTGlzdGVuZXJcIix0LGUpO2Vsc2UgaWYobyhuKSl7Zm9yKGE9czthLS0gPjA7KWlmKG5bYV09PT1lfHxuW2FdLmxpc3RlbmVyJiZuW2FdLmxpc3RlbmVyPT09ZSl7cj1hO2JyZWFrfWlmKDA+cilyZXR1cm4gdGhpczsxPT09bi5sZW5ndGg/KG4ubGVuZ3RoPTAsZGVsZXRlIHRoaXMuX2V2ZW50c1t0XSk6bi5zcGxpY2UociwxKSx0aGlzLl9ldmVudHMucmVtb3ZlTGlzdGVuZXImJnRoaXMuZW1pdChcInJlbW92ZUxpc3RlbmVyXCIsdCxlKX1yZXR1cm4gdGhpc30sbi5wcm90b3R5cGUucmVtb3ZlQWxsTGlzdGVuZXJzPWZ1bmN0aW9uKHQpe3ZhciBlLG47aWYoIXRoaXMuX2V2ZW50cylyZXR1cm4gdGhpcztpZighdGhpcy5fZXZlbnRzLnJlbW92ZUxpc3RlbmVyKXJldHVybiAwPT09YXJndW1lbnRzLmxlbmd0aD90aGlzLl9ldmVudHM9e306dGhpcy5fZXZlbnRzW3RdJiZkZWxldGUgdGhpcy5fZXZlbnRzW3RdLHRoaXM7aWYoMD09PWFyZ3VtZW50cy5sZW5ndGgpe2ZvcihlIGluIHRoaXMuX2V2ZW50cylcInJlbW92ZUxpc3RlbmVyXCIhPT1lJiZ0aGlzLnJlbW92ZUFsbExpc3RlbmVycyhlKTtyZXR1cm4gdGhpcy5yZW1vdmVBbGxMaXN0ZW5lcnMoXCJyZW1vdmVMaXN0ZW5lclwiKSx0aGlzLl9ldmVudHM9e30sdGhpc31pZihuPXRoaXMuX2V2ZW50c1t0XSxpKG4pKXRoaXMucmVtb3ZlTGlzdGVuZXIodCxuKTtlbHNlIGlmKG4pZm9yKDtuLmxlbmd0aDspdGhpcy5yZW1vdmVMaXN0ZW5lcih0LG5bbi5sZW5ndGgtMV0pO3JldHVybiBkZWxldGUgdGhpcy5fZXZlbnRzW3RdLHRoaXN9LG4ucHJvdG90eXBlLmxpc3RlbmVycz1mdW5jdGlvbih0KXt2YXIgZTtyZXR1cm4gZT10aGlzLl9ldmVudHMmJnRoaXMuX2V2ZW50c1t0XT9pKHRoaXMuX2V2ZW50c1t0XSk/W3RoaXMuX2V2ZW50c1t0XV06dGhpcy5fZXZlbnRzW3RdLnNsaWNlKCk6W119LG4ucHJvdG90eXBlLmxpc3RlbmVyQ291bnQ9ZnVuY3Rpb24odCl7aWYodGhpcy5fZXZlbnRzKXt2YXIgZT10aGlzLl9ldmVudHNbdF07aWYoaShlKSlyZXR1cm4gMTtpZihlKXJldHVybiBlLmxlbmd0aH1yZXR1cm4gMH0sbi5saXN0ZW5lckNvdW50PWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHQubGlzdGVuZXJDb3VudChlKX19LGZ1bmN0aW9uKHQsZSxuKXtmdW5jdGlvbiBpKCl7ci5jYWxsKHRoaXMpfXQuZXhwb3J0cz1pO3ZhciByPW4oOTYpLkV2ZW50RW1pdHRlcixvPW4oOTgpO28oaSxyKSxpLlJlYWRhYmxlPW4oOTkpLGkuV3JpdGFibGU9bigxMTEpLGkuRHVwbGV4PW4oMTEyKSxpLlRyYW5zZm9ybT1uKDExMyksaS5QYXNzVGhyb3VnaD1uKDExNCksaS5TdHJlYW09aSxpLnByb3RvdHlwZS5waXBlPWZ1bmN0aW9uKHQsZSl7ZnVuY3Rpb24gbihlKXt0LndyaXRhYmxlJiYhMT09PXQud3JpdGUoZSkmJmgucGF1c2UmJmgucGF1c2UoKX1mdW5jdGlvbiBpKCl7aC5yZWFkYWJsZSYmaC5yZXN1bWUmJmgucmVzdW1lKCl9ZnVuY3Rpb24gbygpe2N8fChjPSEwLHQuZW5kKCkpfWZ1bmN0aW9uIHMoKXtjfHwoYz0hMCxcImZ1bmN0aW9uXCI9PXR5cGVvZiB0LmRlc3Ryb3kmJnQuZGVzdHJveSgpKX1mdW5jdGlvbiBhKHQpe2lmKHUoKSwwPT09ci5saXN0ZW5lckNvdW50KHRoaXMsXCJlcnJvclwiKSl0aHJvdyB0fWZ1bmN0aW9uIHUoKXtoLnJlbW92ZUxpc3RlbmVyKFwiZGF0YVwiLG4pLHQucmVtb3ZlTGlzdGVuZXIoXCJkcmFpblwiLGkpLGgucmVtb3ZlTGlzdGVuZXIoXCJlbmRcIixvKSxoLnJlbW92ZUxpc3RlbmVyKFwiY2xvc2VcIixzKSxoLnJlbW92ZUxpc3RlbmVyKFwiZXJyb3JcIixhKSx0LnJlbW92ZUxpc3RlbmVyKFwiZXJyb3JcIixhKSxoLnJlbW92ZUxpc3RlbmVyKFwiZW5kXCIsdSksaC5yZW1vdmVMaXN0ZW5lcihcImNsb3NlXCIsdSksdC5yZW1vdmVMaXN0ZW5lcihcImNsb3NlXCIsdSl9dmFyIGg9dGhpcztoLm9uKFwiZGF0YVwiLG4pLHQub24oXCJkcmFpblwiLGkpLHQuX2lzU3RkaW98fGUmJmUuZW5kPT09ITF8fChoLm9uKFwiZW5kXCIsbyksaC5vbihcImNsb3NlXCIscykpO3ZhciBjPSExO3JldHVybiBoLm9uKFwiZXJyb3JcIixhKSx0Lm9uKFwiZXJyb3JcIixhKSxoLm9uKFwiZW5kXCIsdSksaC5vbihcImNsb3NlXCIsdSksdC5vbihcImNsb3NlXCIsdSksdC5lbWl0KFwicGlwZVwiLGgpLHR9fSxmdW5jdGlvbih0LGUpe1wiZnVuY3Rpb25cIj09dHlwZW9mIE9iamVjdC5jcmVhdGU/dC5leHBvcnRzPWZ1bmN0aW9uKHQsZSl7dC5zdXBlcl89ZSx0LnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGUucHJvdG90eXBlLHtjb25zdHJ1Y3Rvcjp7dmFsdWU6dCxlbnVtZXJhYmxlOiExLHdyaXRhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH19KX06dC5leHBvcnRzPWZ1bmN0aW9uKHQsZSl7dC5zdXBlcl89ZTt2YXIgbj1mdW5jdGlvbigpe307bi5wcm90b3R5cGU9ZS5wcm90b3R5cGUsdC5wcm90b3R5cGU9bmV3IG4sdC5wcm90b3R5cGUuY29uc3RydWN0b3I9dH19LGZ1bmN0aW9uKHQsZSxuKXtlPXQuZXhwb3J0cz1uKDEwMCksZS5TdHJlYW09big5NyksZS5SZWFkYWJsZT1lLGUuV3JpdGFibGU9bigxMDcpLGUuRHVwbGV4PW4oMTA2KSxlLlRyYW5zZm9ybT1uKDEwOSksZS5QYXNzVGhyb3VnaD1uKDExMCl9LGZ1bmN0aW9uKHQsZSxuKXsoZnVuY3Rpb24oZSl7ZnVuY3Rpb24gaSh0LGUpe3ZhciBpPW4oMTA2KTt0PXR8fHt9O3ZhciByPXQuaGlnaFdhdGVyTWFyayxvPXQub2JqZWN0TW9kZT8xNjoxNjM4NDt0aGlzLmhpZ2hXYXRlck1hcms9cnx8MD09PXI/cjpvLHRoaXMuaGlnaFdhdGVyTWFyaz1+fnRoaXMuaGlnaFdhdGVyTWFyayx0aGlzLmJ1ZmZlcj1bXSx0aGlzLmxlbmd0aD0wLHRoaXMucGlwZXM9bnVsbCx0aGlzLnBpcGVzQ291bnQ9MCx0aGlzLmZsb3dpbmc9bnVsbCx0aGlzLmVuZGVkPSExLHRoaXMuZW5kRW1pdHRlZD0hMSx0aGlzLnJlYWRpbmc9ITEsdGhpcy5zeW5jPSEwLHRoaXMubmVlZFJlYWRhYmxlPSExLHRoaXMuZW1pdHRlZFJlYWRhYmxlPSExLHRoaXMucmVhZGFibGVMaXN0ZW5pbmc9ITEsdGhpcy5vYmplY3RNb2RlPSEhdC5vYmplY3RNb2RlLGUgaW5zdGFuY2VvZiBpJiYodGhpcy5vYmplY3RNb2RlPXRoaXMub2JqZWN0TW9kZXx8ISF0LnJlYWRhYmxlT2JqZWN0TW9kZSksdGhpcy5kZWZhdWx0RW5jb2Rpbmc9dC5kZWZhdWx0RW5jb2Rpbmd8fFwidXRmOFwiLHRoaXMucmFuT3V0PSExLHRoaXMuYXdhaXREcmFpbj0wLHRoaXMucmVhZGluZ01vcmU9ITEsdGhpcy5kZWNvZGVyPW51bGwsdGhpcy5lbmNvZGluZz1udWxsLHQuZW5jb2RpbmcmJihMfHwoTD1uKDEwOCkuU3RyaW5nRGVjb2RlciksdGhpcy5kZWNvZGVyPW5ldyBMKHQuZW5jb2RpbmcpLHRoaXMuZW5jb2Rpbmc9dC5lbmNvZGluZyl9ZnVuY3Rpb24gcih0KXtyZXR1cm4gbigxMDYpLHRoaXMgaW5zdGFuY2VvZiByPyh0aGlzLl9yZWFkYWJsZVN0YXRlPW5ldyBpKHQsdGhpcyksdGhpcy5yZWFkYWJsZT0hMCx2b2lkIFAuY2FsbCh0aGlzKSk6bmV3IHIodCl9ZnVuY3Rpb24gbyh0LGUsbixpLHIpe3ZhciBvPWgoZSxuKTtpZihvKXQuZW1pdChcImVycm9yXCIsbyk7ZWxzZSBpZihJLmlzTnVsbE9yVW5kZWZpbmVkKG4pKWUucmVhZGluZz0hMSxlLmVuZGVkfHxjKHQsZSk7ZWxzZSBpZihlLm9iamVjdE1vZGV8fG4mJm4ubGVuZ3RoPjApaWYoZS5lbmRlZCYmIXIpe3ZhciBhPW5ldyBFcnJvcihcInN0cmVhbS5wdXNoKCkgYWZ0ZXIgRU9GXCIpO3QuZW1pdChcImVycm9yXCIsYSl9ZWxzZSBpZihlLmVuZEVtaXR0ZWQmJnIpe3ZhciBhPW5ldyBFcnJvcihcInN0cmVhbS51bnNoaWZ0KCkgYWZ0ZXIgZW5kIGV2ZW50XCIpO3QuZW1pdChcImVycm9yXCIsYSl9ZWxzZSFlLmRlY29kZXJ8fHJ8fGl8fChuPWUuZGVjb2Rlci53cml0ZShuKSkscnx8KGUucmVhZGluZz0hMSksZS5mbG93aW5nJiYwPT09ZS5sZW5ndGgmJiFlLnN5bmM/KHQuZW1pdChcImRhdGFcIixuKSx0LnJlYWQoMCkpOihlLmxlbmd0aCs9ZS5vYmplY3RNb2RlPzE6bi5sZW5ndGgscj9lLmJ1ZmZlci51bnNoaWZ0KG4pOmUuYnVmZmVyLnB1c2gobiksZS5uZWVkUmVhZGFibGUmJmwodCkpLGQodCxlKTtlbHNlIHJ8fChlLnJlYWRpbmc9ITEpO3JldHVybiBzKGUpfWZ1bmN0aW9uIHModCl7cmV0dXJuIXQuZW5kZWQmJih0Lm5lZWRSZWFkYWJsZXx8dC5sZW5ndGg8dC5oaWdoV2F0ZXJNYXJrfHwwPT09dC5sZW5ndGgpfWZ1bmN0aW9uIGEodCl7aWYodD49Uil0PVI7ZWxzZXt0LS07Zm9yKHZhciBlPTE7MzI+ZTtlPDw9MSl0fD10Pj5lO3QrK31yZXR1cm4gdH1mdW5jdGlvbiB1KHQsZSl7cmV0dXJuIDA9PT1lLmxlbmd0aCYmZS5lbmRlZD8wOmUub2JqZWN0TW9kZT8wPT09dD8wOjE6aXNOYU4odCl8fEkuaXNOdWxsKHQpP2UuZmxvd2luZyYmZS5idWZmZXIubGVuZ3RoP2UuYnVmZmVyWzBdLmxlbmd0aDplLmxlbmd0aDowPj10PzA6KHQ+ZS5oaWdoV2F0ZXJNYXJrJiYoZS5oaWdoV2F0ZXJNYXJrPWEodCkpLHQ+ZS5sZW5ndGg/ZS5lbmRlZD9lLmxlbmd0aDooZS5uZWVkUmVhZGFibGU9ITAsMCk6dCl9ZnVuY3Rpb24gaCh0LGUpe3ZhciBuPW51bGw7cmV0dXJuIEkuaXNCdWZmZXIoZSl8fEkuaXNTdHJpbmcoZSl8fEkuaXNOdWxsT3JVbmRlZmluZWQoZSl8fHQub2JqZWN0TW9kZXx8KG49bmV3IFR5cGVFcnJvcihcIkludmFsaWQgbm9uLXN0cmluZy9idWZmZXIgY2h1bmtcIikpLG59ZnVuY3Rpb24gYyh0LGUpe2lmKGUuZGVjb2RlciYmIWUuZW5kZWQpe3ZhciBuPWUuZGVjb2Rlci5lbmQoKTtuJiZuLmxlbmd0aCYmKGUuYnVmZmVyLnB1c2gobiksZS5sZW5ndGgrPWUub2JqZWN0TW9kZT8xOm4ubGVuZ3RoKX1lLmVuZGVkPSEwLGwodCl9ZnVuY3Rpb24gbCh0KXt2YXIgbj10Ll9yZWFkYWJsZVN0YXRlO24ubmVlZFJlYWRhYmxlPSExLG4uZW1pdHRlZFJlYWRhYmxlfHwoTyhcImVtaXRSZWFkYWJsZVwiLG4uZmxvd2luZyksbi5lbWl0dGVkUmVhZGFibGU9ITAsbi5zeW5jP2UubmV4dFRpY2soZnVuY3Rpb24oKXtmKHQpfSk6Zih0KSl9ZnVuY3Rpb24gZih0KXtPKFwiZW1pdCByZWFkYWJsZVwiKSx0LmVtaXQoXCJyZWFkYWJsZVwiKSx5KHQpfWZ1bmN0aW9uIGQodCxuKXtuLnJlYWRpbmdNb3JlfHwobi5yZWFkaW5nTW9yZT0hMCxlLm5leHRUaWNrKGZ1bmN0aW9uKCl7cCh0LG4pfSkpfWZ1bmN0aW9uIHAodCxlKXtmb3IodmFyIG49ZS5sZW5ndGg7IWUucmVhZGluZyYmIWUuZmxvd2luZyYmIWUuZW5kZWQmJmUubGVuZ3RoPGUuaGlnaFdhdGVyTWFyayYmKE8oXCJtYXliZVJlYWRNb3JlIHJlYWQgMFwiKSx0LnJlYWQoMCksbiE9PWUubGVuZ3RoKTspbj1lLmxlbmd0aDtlLnJlYWRpbmdNb3JlPSExfWZ1bmN0aW9uIGcodCl7cmV0dXJuIGZ1bmN0aW9uKCl7dmFyIGU9dC5fcmVhZGFibGVTdGF0ZTtPKFwicGlwZU9uRHJhaW5cIixlLmF3YWl0RHJhaW4pLGUuYXdhaXREcmFpbiYmZS5hd2FpdERyYWluLS0sMD09PWUuYXdhaXREcmFpbiYmYi5saXN0ZW5lckNvdW50KHQsXCJkYXRhXCIpJiYoZS5mbG93aW5nPSEwLHkodCkpfX1mdW5jdGlvbiBfKHQsbil7bi5yZXN1bWVTY2hlZHVsZWR8fChuLnJlc3VtZVNjaGVkdWxlZD0hMCxlLm5leHRUaWNrKGZ1bmN0aW9uKCl7bSh0LG4pfSkpfWZ1bmN0aW9uIG0odCxlKXtlLnJlc3VtZVNjaGVkdWxlZD0hMSx0LmVtaXQoXCJyZXN1bWVcIikseSh0KSxlLmZsb3dpbmcmJiFlLnJlYWRpbmcmJnQucmVhZCgwKX1mdW5jdGlvbiB5KHQpe3ZhciBlPXQuX3JlYWRhYmxlU3RhdGU7aWYoTyhcImZsb3dcIixlLmZsb3dpbmcpLGUuZmxvd2luZylkbyB2YXIgbj10LnJlYWQoKTt3aGlsZShudWxsIT09biYmZS5mbG93aW5nKX1mdW5jdGlvbiB2KHQsZSl7dmFyIG4saT1lLmJ1ZmZlcixyPWUubGVuZ3RoLG89ISFlLmRlY29kZXIscz0hIWUub2JqZWN0TW9kZTtpZigwPT09aS5sZW5ndGgpcmV0dXJuIG51bGw7aWYoMD09PXIpbj1udWxsO2Vsc2UgaWYocyluPWkuc2hpZnQoKTtlbHNlIGlmKCF0fHx0Pj1yKW49bz9pLmpvaW4oXCJcIik6VC5jb25jYXQoaSxyKSxpLmxlbmd0aD0wO2Vsc2UgaWYodDxpWzBdLmxlbmd0aCl7dmFyIGE9aVswXTtuPWEuc2xpY2UoMCx0KSxpWzBdPWEuc2xpY2UodCl9ZWxzZSBpZih0PT09aVswXS5sZW5ndGgpbj1pLnNoaWZ0KCk7ZWxzZXtuPW8/XCJcIjpuZXcgVCh0KTtmb3IodmFyIHU9MCxoPTAsYz1pLmxlbmd0aDtjPmgmJnQ+dTtoKyspe3ZhciBhPWlbMF0sbD1NYXRoLm1pbih0LXUsYS5sZW5ndGgpO28/bis9YS5zbGljZSgwLGwpOmEuY29weShuLHUsMCxsKSxsPGEubGVuZ3RoP2lbMF09YS5zbGljZShsKTppLnNoaWZ0KCksdSs9bH19cmV0dXJuIG59ZnVuY3Rpb24gRSh0KXt2YXIgbj10Ll9yZWFkYWJsZVN0YXRlO2lmKG4ubGVuZ3RoPjApdGhyb3cgbmV3IEVycm9yKFwiZW5kUmVhZGFibGUgY2FsbGVkIG9uIG5vbi1lbXB0eSBzdHJlYW1cIik7bi5lbmRFbWl0dGVkfHwobi5lbmRlZD0hMCxlLm5leHRUaWNrKGZ1bmN0aW9uKCl7bi5lbmRFbWl0dGVkfHwwIT09bi5sZW5ndGh8fChuLmVuZEVtaXR0ZWQ9ITAsdC5yZWFkYWJsZT0hMSx0LmVtaXQoXCJlbmRcIikpfSkpfWZ1bmN0aW9uIFModCxlKXtmb3IodmFyIG49MCxpPXQubGVuZ3RoO2k+bjtuKyspZSh0W25dLG4pfWZ1bmN0aW9uIEEodCxlKXtmb3IodmFyIG49MCxpPXQubGVuZ3RoO2k+bjtuKyspaWYodFtuXT09PWUpcmV0dXJuIG47cmV0dXJuLTF9dC5leHBvcnRzPXI7dmFyIHc9bigxMDIpLFQ9big3MCkuQnVmZmVyO3IuUmVhZGFibGVTdGF0ZT1pO3ZhciBiPW4oOTYpLkV2ZW50RW1pdHRlcjtiLmxpc3RlbmVyQ291bnR8fChiLmxpc3RlbmVyQ291bnQ9ZnVuY3Rpb24odCxlKXtyZXR1cm4gdC5saXN0ZW5lcnMoZSkubGVuZ3RofSk7dmFyIFA9big5NyksST1uKDEwMyk7SS5pbmhlcml0cz1uKDEwNCk7dmFyIEwsTz1uKDEwNSk7Tz1PJiZPLmRlYnVnbG9nP08uZGVidWdsb2coXCJzdHJlYW1cIik6ZnVuY3Rpb24oKXt9LEkuaW5oZXJpdHMocixQKSxyLnByb3RvdHlwZS5wdXNoPWZ1bmN0aW9uKHQsZSl7dmFyIG49dGhpcy5fcmVhZGFibGVTdGF0ZTtyZXR1cm4gSS5pc1N0cmluZyh0KSYmIW4ub2JqZWN0TW9kZSYmKGU9ZXx8bi5kZWZhdWx0RW5jb2RpbmcsZSE9PW4uZW5jb2RpbmcmJih0PW5ldyBUKHQsZSksZT1cIlwiKSksbyh0aGlzLG4sdCxlLCExKX0sci5wcm90b3R5cGUudW5zaGlmdD1mdW5jdGlvbih0KXt2YXIgZT10aGlzLl9yZWFkYWJsZVN0YXRlO3JldHVybiBvKHRoaXMsZSx0LFwiXCIsITApfSxyLnByb3RvdHlwZS5zZXRFbmNvZGluZz1mdW5jdGlvbih0KXtyZXR1cm4gTHx8KEw9bigxMDgpLlN0cmluZ0RlY29kZXIpLHRoaXMuX3JlYWRhYmxlU3RhdGUuZGVjb2Rlcj1uZXcgTCh0KSx0aGlzLl9yZWFkYWJsZVN0YXRlLmVuY29kaW5nPXQsdGhpc307dmFyIFI9ODM4ODYwODtyLnByb3RvdHlwZS5yZWFkPWZ1bmN0aW9uKHQpe08oXCJyZWFkXCIsdCk7dmFyIGU9dGhpcy5fcmVhZGFibGVTdGF0ZSxuPXQ7aWYoKCFJLmlzTnVtYmVyKHQpfHx0PjApJiYoZS5lbWl0dGVkUmVhZGFibGU9ITEpLDA9PT10JiZlLm5lZWRSZWFkYWJsZSYmKGUubGVuZ3RoPj1lLmhpZ2hXYXRlck1hcmt8fGUuZW5kZWQpKXJldHVybiBPKFwicmVhZDogZW1pdFJlYWRhYmxlXCIsZS5sZW5ndGgsZS5lbmRlZCksMD09PWUubGVuZ3RoJiZlLmVuZGVkP0UodGhpcyk6bCh0aGlzKSxudWxsO2lmKHQ9dSh0LGUpLDA9PT10JiZlLmVuZGVkKXJldHVybiAwPT09ZS5sZW5ndGgmJkUodGhpcyksbnVsbDt2YXIgaT1lLm5lZWRSZWFkYWJsZTtPKFwibmVlZCByZWFkYWJsZVwiLGkpLCgwPT09ZS5sZW5ndGh8fGUubGVuZ3RoLXQ8ZS5oaWdoV2F0ZXJNYXJrKSYmKGk9ITAsTyhcImxlbmd0aCBsZXNzIHRoYW4gd2F0ZXJtYXJrXCIsaSkpLChlLmVuZGVkfHxlLnJlYWRpbmcpJiYoaT0hMSxPKFwicmVhZGluZyBvciBlbmRlZFwiLGkpKSxpJiYoTyhcImRvIHJlYWRcIiksZS5yZWFkaW5nPSEwLGUuc3luYz0hMCwwPT09ZS5sZW5ndGgmJihlLm5lZWRSZWFkYWJsZT0hMCksdGhpcy5fcmVhZChlLmhpZ2hXYXRlck1hcmspLGUuc3luYz0hMSksaSYmIWUucmVhZGluZyYmKHQ9dShuLGUpKTt2YXIgcjtyZXR1cm4gcj10PjA/dih0LGUpOm51bGwsSS5pc051bGwocikmJihlLm5lZWRSZWFkYWJsZT0hMCx0PTApLGUubGVuZ3RoLT10LDAhPT1lLmxlbmd0aHx8ZS5lbmRlZHx8KGUubmVlZFJlYWRhYmxlPSEwKSxuIT09dCYmZS5lbmRlZCYmMD09PWUubGVuZ3RoJiZFKHRoaXMpLEkuaXNOdWxsKHIpfHx0aGlzLmVtaXQoXCJkYXRhXCIscikscn0sci5wcm90b3R5cGUuX3JlYWQ9ZnVuY3Rpb24odCl7dGhpcy5lbWl0KFwiZXJyb3JcIixuZXcgRXJyb3IoXCJub3QgaW1wbGVtZW50ZWRcIikpfSxyLnByb3RvdHlwZS5waXBlPWZ1bmN0aW9uKHQsbil7ZnVuY3Rpb24gaSh0KXtPKFwib251bnBpcGVcIiksdD09PWwmJm8oKX1mdW5jdGlvbiByKCl7TyhcIm9uZW5kXCIpLHQuZW5kKCl9ZnVuY3Rpb24gbygpe08oXCJjbGVhbnVwXCIpLHQucmVtb3ZlTGlzdGVuZXIoXCJjbG9zZVwiLHUpLHQucmVtb3ZlTGlzdGVuZXIoXCJmaW5pc2hcIixoKSx0LnJlbW92ZUxpc3RlbmVyKFwiZHJhaW5cIixfKSx0LnJlbW92ZUxpc3RlbmVyKFwiZXJyb3JcIixhKSx0LnJlbW92ZUxpc3RlbmVyKFwidW5waXBlXCIsaSksbC5yZW1vdmVMaXN0ZW5lcihcImVuZFwiLHIpLGwucmVtb3ZlTGlzdGVuZXIoXCJlbmRcIixvKSxsLnJlbW92ZUxpc3RlbmVyKFwiZGF0YVwiLHMpLCFmLmF3YWl0RHJhaW58fHQuX3dyaXRhYmxlU3RhdGUmJiF0Ll93cml0YWJsZVN0YXRlLm5lZWREcmFpbnx8XygpfWZ1bmN0aW9uIHMoZSl7TyhcIm9uZGF0YVwiKTt2YXIgbj10LndyaXRlKGUpOyExPT09biYmKE8oXCJmYWxzZSB3cml0ZSByZXNwb25zZSwgcGF1c2VcIixsLl9yZWFkYWJsZVN0YXRlLmF3YWl0RHJhaW4pLGwuX3JlYWRhYmxlU3RhdGUuYXdhaXREcmFpbisrLGwucGF1c2UoKSl9ZnVuY3Rpb24gYShlKXtPKFwib25lcnJvclwiLGUpLGMoKSx0LnJlbW92ZUxpc3RlbmVyKFwiZXJyb3JcIixhKSwwPT09Yi5saXN0ZW5lckNvdW50KHQsXCJlcnJvclwiKSYmdC5lbWl0KFwiZXJyb3JcIixlKX1mdW5jdGlvbiB1KCl7dC5yZW1vdmVMaXN0ZW5lcihcImZpbmlzaFwiLGgpLGMoKX1mdW5jdGlvbiBoKCl7TyhcIm9uZmluaXNoXCIpLHQucmVtb3ZlTGlzdGVuZXIoXCJjbG9zZVwiLHUpLGMoKX1mdW5jdGlvbiBjKCl7TyhcInVucGlwZVwiKSxsLnVucGlwZSh0KX12YXIgbD10aGlzLGY9dGhpcy5fcmVhZGFibGVTdGF0ZTtzd2l0Y2goZi5waXBlc0NvdW50KXtjYXNlIDA6Zi5waXBlcz10O2JyZWFrO2Nhc2UgMTpmLnBpcGVzPVtmLnBpcGVzLHRdO2JyZWFrO2RlZmF1bHQ6Zi5waXBlcy5wdXNoKHQpfWYucGlwZXNDb3VudCs9MSxPKFwicGlwZSBjb3VudD0lZCBvcHRzPSVqXCIsZi5waXBlc0NvdW50LG4pO3ZhciBkPSghbnx8bi5lbmQhPT0hMSkmJnQhPT1lLnN0ZG91dCYmdCE9PWUuc3RkZXJyLHA9ZD9yOm87Zi5lbmRFbWl0dGVkP2UubmV4dFRpY2socCk6bC5vbmNlKFwiZW5kXCIscCksdC5vbihcInVucGlwZVwiLGkpO3ZhciBfPWcobCk7cmV0dXJuIHQub24oXCJkcmFpblwiLF8pLGwub24oXCJkYXRhXCIscyksdC5fZXZlbnRzJiZ0Ll9ldmVudHMuZXJyb3I/dyh0Ll9ldmVudHMuZXJyb3IpP3QuX2V2ZW50cy5lcnJvci51bnNoaWZ0KGEpOnQuX2V2ZW50cy5lcnJvcj1bYSx0Ll9ldmVudHMuZXJyb3JdOnQub24oXCJlcnJvclwiLGEpLHQub25jZShcImNsb3NlXCIsdSksdC5vbmNlKFwiZmluaXNoXCIsaCksdC5lbWl0KFwicGlwZVwiLGwpLGYuZmxvd2luZ3x8KE8oXCJwaXBlIHJlc3VtZVwiKSxsLnJlc3VtZSgpKSx0fSxyLnByb3RvdHlwZS51bnBpcGU9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5fcmVhZGFibGVTdGF0ZTtpZigwPT09ZS5waXBlc0NvdW50KXJldHVybiB0aGlzO2lmKDE9PT1lLnBpcGVzQ291bnQpcmV0dXJuIHQmJnQhPT1lLnBpcGVzP3RoaXM6KHR8fCh0PWUucGlwZXMpLGUucGlwZXM9bnVsbCxlLnBpcGVzQ291bnQ9MCxlLmZsb3dpbmc9ITEsdCYmdC5lbWl0KFwidW5waXBlXCIsdGhpcyksdGhpcyk7aWYoIXQpe3ZhciBuPWUucGlwZXMsaT1lLnBpcGVzQ291bnQ7ZS5waXBlcz1udWxsLGUucGlwZXNDb3VudD0wLGUuZmxvd2luZz0hMTtmb3IodmFyIHI9MDtpPnI7cisrKW5bcl0uZW1pdChcInVucGlwZVwiLHRoaXMpO3JldHVybiB0aGlzfXZhciByPUEoZS5waXBlcyx0KTtyZXR1cm4tMT09PXI/dGhpczooZS5waXBlcy5zcGxpY2UociwxKSxlLnBpcGVzQ291bnQtPTEsMT09PWUucGlwZXNDb3VudCYmKGUucGlwZXM9ZS5waXBlc1swXSksdC5lbWl0KFwidW5waXBlXCIsdGhpcyksdGhpcyl9LHIucHJvdG90eXBlLm9uPWZ1bmN0aW9uKHQsbil7dmFyIGk9UC5wcm90b3R5cGUub24uY2FsbCh0aGlzLHQsbik7aWYoXCJkYXRhXCI9PT10JiYhMSE9PXRoaXMuX3JlYWRhYmxlU3RhdGUuZmxvd2luZyYmdGhpcy5yZXN1bWUoKSxcInJlYWRhYmxlXCI9PT10JiZ0aGlzLnJlYWRhYmxlKXt2YXIgcj10aGlzLl9yZWFkYWJsZVN0YXRlO2lmKCFyLnJlYWRhYmxlTGlzdGVuaW5nKWlmKHIucmVhZGFibGVMaXN0ZW5pbmc9ITAsci5lbWl0dGVkUmVhZGFibGU9ITEsci5uZWVkUmVhZGFibGU9ITAsci5yZWFkaW5nKXIubGVuZ3RoJiZsKHRoaXMscik7ZWxzZXt2YXIgbz10aGlzO2UubmV4dFRpY2soZnVuY3Rpb24oKXtPKFwicmVhZGFibGUgbmV4dHRpY2sgcmVhZCAwXCIpLG8ucmVhZCgwKX0pfX1yZXR1cm4gaX0sci5wcm90b3R5cGUuYWRkTGlzdGVuZXI9ci5wcm90b3R5cGUub24sci5wcm90b3R5cGUucmVzdW1lPWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5fcmVhZGFibGVTdGF0ZTtyZXR1cm4gdC5mbG93aW5nfHwoTyhcInJlc3VtZVwiKSx0LmZsb3dpbmc9ITAsdC5yZWFkaW5nfHwoTyhcInJlc3VtZSByZWFkIDBcIiksdGhpcy5yZWFkKDApKSxfKHRoaXMsdCkpLHRoaXN9LHIucHJvdG90eXBlLnBhdXNlPWZ1bmN0aW9uKCl7cmV0dXJuIE8oXCJjYWxsIHBhdXNlIGZsb3dpbmc9JWpcIix0aGlzLl9yZWFkYWJsZVN0YXRlLmZsb3dpbmcpLCExIT09dGhpcy5fcmVhZGFibGVTdGF0ZS5mbG93aW5nJiYoTyhcInBhdXNlXCIpLHRoaXMuX3JlYWRhYmxlU3RhdGUuZmxvd2luZz0hMSx0aGlzLmVtaXQoXCJwYXVzZVwiKSksdGhpc30sci5wcm90b3R5cGUud3JhcD1mdW5jdGlvbih0KXt2YXIgZT10aGlzLl9yZWFkYWJsZVN0YXRlLG49ITEsaT10aGlzO3Qub24oXCJlbmRcIixmdW5jdGlvbigpe2lmKE8oXCJ3cmFwcGVkIGVuZFwiKSxlLmRlY29kZXImJiFlLmVuZGVkKXt2YXIgdD1lLmRlY29kZXIuZW5kKCk7dCYmdC5sZW5ndGgmJmkucHVzaCh0KX1pLnB1c2gobnVsbCl9KSx0Lm9uKFwiZGF0YVwiLGZ1bmN0aW9uKHIpe2lmKE8oXCJ3cmFwcGVkIGRhdGFcIiksZS5kZWNvZGVyJiYocj1lLmRlY29kZXIud3JpdGUocikpLHImJihlLm9iamVjdE1vZGV8fHIubGVuZ3RoKSl7dmFyIG89aS5wdXNoKHIpO298fChuPSEwLHQucGF1c2UoKSl9fSk7Zm9yKHZhciByIGluIHQpSS5pc0Z1bmN0aW9uKHRbcl0pJiZJLmlzVW5kZWZpbmVkKHRoaXNbcl0pJiYodGhpc1tyXT1mdW5jdGlvbihlKXtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gdFtlXS5hcHBseSh0LGFyZ3VtZW50cyl9fShyKSk7dmFyIG89W1wiZXJyb3JcIixcImNsb3NlXCIsXCJkZXN0cm95XCIsXCJwYXVzZVwiLFwicmVzdW1lXCJdO3JldHVybiBTKG8sZnVuY3Rpb24oZSl7dC5vbihlLGkuZW1pdC5iaW5kKGksZSkpfSksaS5fcmVhZD1mdW5jdGlvbihlKXtPKFwid3JhcHBlZCBfcmVhZFwiLGUpLG4mJihuPSExLHQucmVzdW1lKCkpfSxpfSxyLl9mcm9tTGlzdD12fSkuY2FsbChlLG4oMTAxKSl9LGZ1bmN0aW9uKHQsZSl7ZnVuY3Rpb24gbigpe2g9ITEscy5sZW5ndGg/dT1zLmNvbmNhdCh1KTpjPS0xLHUubGVuZ3RoJiZpKCl9ZnVuY3Rpb24gaSgpe2lmKCFoKXt2YXIgdD1zZXRUaW1lb3V0KG4pO2g9ITA7Zm9yKHZhciBlPXUubGVuZ3RoO2U7KXtmb3Iocz11LHU9W107KytjPGU7KXMmJnNbY10ucnVuKCk7Yz0tMSxlPXUubGVuZ3RofXM9bnVsbCxoPSExLGNsZWFyVGltZW91dCh0KX19ZnVuY3Rpb24gcih0LGUpe3RoaXMuZnVuPXQsdGhpcy5hcnJheT1lfWZ1bmN0aW9uIG8oKXt9dmFyIHMsYT10LmV4cG9ydHM9e30sdT1bXSxoPSExLGM9LTE7YS5uZXh0VGljaz1mdW5jdGlvbih0KXt2YXIgZT1uZXcgQXJyYXkoYXJndW1lbnRzLmxlbmd0aC0xKTtpZihhcmd1bWVudHMubGVuZ3RoPjEpZm9yKHZhciBuPTE7bjxhcmd1bWVudHMubGVuZ3RoO24rKyllW24tMV09YXJndW1lbnRzW25dO3UucHVzaChuZXcgcih0LGUpKSwxIT09dS5sZW5ndGh8fGh8fHNldFRpbWVvdXQoaSwwKX0sci5wcm90b3R5cGUucnVuPWZ1bmN0aW9uKCl7dGhpcy5mdW4uYXBwbHkobnVsbCx0aGlzLmFycmF5KX0sYS50aXRsZT1cImJyb3dzZXJcIixhLmJyb3dzZXI9ITAsYS5lbnY9e30sYS5hcmd2PVtdLGEudmVyc2lvbj1cIlwiLGEudmVyc2lvbnM9e30sYS5vbj1vLGEuYWRkTGlzdGVuZXI9byxhLm9uY2U9byxhLm9mZj1vLGEucmVtb3ZlTGlzdGVuZXI9byxhLnJlbW92ZUFsbExpc3RlbmVycz1vLGEuZW1pdD1vLGEuYmluZGluZz1mdW5jdGlvbih0KXt0aHJvdyBuZXcgRXJyb3IoXCJwcm9jZXNzLmJpbmRpbmcgaXMgbm90IHN1cHBvcnRlZFwiKX0sYS5jd2Q9ZnVuY3Rpb24oKXtyZXR1cm5cIi9cIn0sYS5jaGRpcj1mdW5jdGlvbih0KXt0aHJvdyBuZXcgRXJyb3IoXCJwcm9jZXNzLmNoZGlyIGlzIG5vdCBzdXBwb3J0ZWRcIil9LGEudW1hc2s9ZnVuY3Rpb24oKXtyZXR1cm4gMH19LGZ1bmN0aW9uKHQsZSl7dC5leHBvcnRzPUFycmF5LmlzQXJyYXl8fGZ1bmN0aW9uKHQpe3JldHVyblwiW29iamVjdCBBcnJheV1cIj09T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHQpfX0sZnVuY3Rpb24odCxlLG4peyhmdW5jdGlvbih0KXtmdW5jdGlvbiBuKHQpe3JldHVybiBBcnJheS5pc0FycmF5P0FycmF5LmlzQXJyYXkodCk6XCJbb2JqZWN0IEFycmF5XVwiPT09Xyh0KX1mdW5jdGlvbiBpKHQpe3JldHVyblwiYm9vbGVhblwiPT10eXBlb2YgdH1mdW5jdGlvbiByKHQpe3JldHVybiBudWxsPT09dH1mdW5jdGlvbiBvKHQpe3JldHVybiBudWxsPT10fWZ1bmN0aW9uIHModCl7cmV0dXJuXCJudW1iZXJcIj09dHlwZW9mIHR9ZnVuY3Rpb24gYSh0KXtyZXR1cm5cInN0cmluZ1wiPT10eXBlb2YgdH1mdW5jdGlvbiB1KHQpe3JldHVyblwic3ltYm9sXCI9PXR5cGVvZiB0fWZ1bmN0aW9uIGgodCl7cmV0dXJuIHZvaWQgMD09PXR9ZnVuY3Rpb24gYyh0KXtyZXR1cm5cIltvYmplY3QgUmVnRXhwXVwiPT09Xyh0KX1mdW5jdGlvbiBsKHQpe3JldHVyblwib2JqZWN0XCI9PXR5cGVvZiB0JiZudWxsIT09dH1mdW5jdGlvbiBmKHQpe3JldHVyblwiW29iamVjdCBEYXRlXVwiPT09Xyh0KX1mdW5jdGlvbiBkKHQpe3JldHVyblwiW29iamVjdCBFcnJvcl1cIj09PV8odCl8fHQgaW5zdGFuY2VvZiBFcnJvcn1mdW5jdGlvbiBwKHQpe3JldHVyblwiZnVuY3Rpb25cIj09dHlwZW9mIHR9ZnVuY3Rpb24gZyh0KXtyZXR1cm4gbnVsbD09PXR8fFwiYm9vbGVhblwiPT10eXBlb2YgdHx8XCJudW1iZXJcIj09dHlwZW9mIHR8fFwic3RyaW5nXCI9PXR5cGVvZiB0fHxcInN5bWJvbFwiPT10eXBlb2YgdHx8XCJ1bmRlZmluZWRcIj09dHlwZW9mIHR9ZnVuY3Rpb24gXyh0KXtyZXR1cm4gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHQpfWUuaXNBcnJheT1uLGUuaXNCb29sZWFuPWksZS5pc051bGw9cixlLmlzTnVsbE9yVW5kZWZpbmVkPW8sZS5pc051bWJlcj1zLGUuaXNTdHJpbmc9YSxlLmlzU3ltYm9sPXUsZS5pc1VuZGVmaW5lZD1oLGUuaXNSZWdFeHA9YyxlLmlzT2JqZWN0PWwsZS5pc0RhdGU9ZixlLmlzRXJyb3I9ZCxlLmlzRnVuY3Rpb249cCxlLmlzUHJpbWl0aXZlPWcsZS5pc0J1ZmZlcj10LmlzQnVmZmVyfSkuY2FsbChlLG4oNzApLkJ1ZmZlcil9LDk4LGZ1bmN0aW9uKHQsZSl7fSxmdW5jdGlvbih0LGUsbil7KGZ1bmN0aW9uKGUpe2Z1bmN0aW9uIGkodCl7cmV0dXJuIHRoaXMgaW5zdGFuY2VvZiBpPyh1LmNhbGwodGhpcyx0KSxoLmNhbGwodGhpcyx0KSx0JiZ0LnJlYWRhYmxlPT09ITEmJih0aGlzLnJlYWRhYmxlPSExKSx0JiZ0LndyaXRhYmxlPT09ITEmJih0aGlzLndyaXRhYmxlPSExKSx0aGlzLmFsbG93SGFsZk9wZW49ITAsdCYmdC5hbGxvd0hhbGZPcGVuPT09ITEmJih0aGlzLmFsbG93SGFsZk9wZW49ITEpLHZvaWQgdGhpcy5vbmNlKFwiZW5kXCIscikpOm5ldyBpKHQpfWZ1bmN0aW9uIHIoKXt0aGlzLmFsbG93SGFsZk9wZW58fHRoaXMuX3dyaXRhYmxlU3RhdGUuZW5kZWR8fGUubmV4dFRpY2sodGhpcy5lbmQuYmluZCh0aGlzKSl9ZnVuY3Rpb24gbyh0LGUpe2Zvcih2YXIgbj0wLGk9dC5sZW5ndGg7aT5uO24rKyllKHRbbl0sbil9dC5leHBvcnRzPWk7dmFyIHM9T2JqZWN0LmtleXN8fGZ1bmN0aW9uKHQpe3ZhciBlPVtdO2Zvcih2YXIgbiBpbiB0KWUucHVzaChuKTtyZXR1cm4gZX0sYT1uKDEwMyk7YS5pbmhlcml0cz1uKDEwNCk7dmFyIHU9bigxMDApLGg9bigxMDcpO2EuaW5oZXJpdHMoaSx1KSxvKHMoaC5wcm90b3R5cGUpLGZ1bmN0aW9uKHQpe2kucHJvdG90eXBlW3RdfHwoaS5wcm90b3R5cGVbdF09aC5wcm90b3R5cGVbdF0pfSl9KS5jYWxsKGUsbigxMDEpKX0sZnVuY3Rpb24odCxlLG4peyhmdW5jdGlvbihlKXtmdW5jdGlvbiBpKHQsZSxuKXt0aGlzLmNodW5rPXQsdGhpcy5lbmNvZGluZz1lLHRoaXMuY2FsbGJhY2s9bn1mdW5jdGlvbiByKHQsZSl7dmFyIGk9bigxMDYpO3Q9dHx8e307dmFyIHI9dC5oaWdoV2F0ZXJNYXJrLG89dC5vYmplY3RNb2RlPzE2OjE2Mzg0O3RoaXMuaGlnaFdhdGVyTWFyaz1yfHwwPT09cj9yOm8sdGhpcy5vYmplY3RNb2RlPSEhdC5vYmplY3RNb2RlLGUgaW5zdGFuY2VvZiBpJiYodGhpcy5vYmplY3RNb2RlPXRoaXMub2JqZWN0TW9kZXx8ISF0LndyaXRhYmxlT2JqZWN0TW9kZSksdGhpcy5oaWdoV2F0ZXJNYXJrPX5+dGhpcy5oaWdoV2F0ZXJNYXJrLHRoaXMubmVlZERyYWluPSExLHRoaXMuZW5kaW5nPSExLHRoaXMuZW5kZWQ9ITEsdGhpcy5maW5pc2hlZD0hMTt2YXIgcz10LmRlY29kZVN0cmluZ3M9PT0hMTt0aGlzLmRlY29kZVN0cmluZ3M9IXMsdGhpcy5kZWZhdWx0RW5jb2Rpbmc9dC5kZWZhdWx0RW5jb2Rpbmd8fFwidXRmOFwiLHRoaXMubGVuZ3RoPTAsdGhpcy53cml0aW5nPSExLHRoaXMuY29ya2VkPTAsdGhpcy5zeW5jPSEwLHRoaXMuYnVmZmVyUHJvY2Vzc2luZz0hMSx0aGlzLm9ud3JpdGU9ZnVuY3Rpb24odCl7ZChlLHQpfSx0aGlzLndyaXRlY2I9bnVsbCx0aGlzLndyaXRlbGVuPTAsdGhpcy5idWZmZXI9W10sdGhpcy5wZW5kaW5nY2I9MCx0aGlzLnByZWZpbmlzaGVkPSExLHRoaXMuZXJyb3JFbWl0dGVkPSExfWZ1bmN0aW9uIG8odCl7dmFyIGU9bigxMDYpO3JldHVybiB0aGlzIGluc3RhbmNlb2Ygb3x8dGhpcyBpbnN0YW5jZW9mIGU/KHRoaXMuX3dyaXRhYmxlU3RhdGU9bmV3IHIodCx0aGlzKSx0aGlzLndyaXRhYmxlPSEwLHZvaWQgdy5jYWxsKHRoaXMpKTpuZXcgbyh0KX1mdW5jdGlvbiBzKHQsbixpKXt2YXIgcj1uZXcgRXJyb3IoXCJ3cml0ZSBhZnRlciBlbmRcIik7XG50LmVtaXQoXCJlcnJvclwiLHIpLGUubmV4dFRpY2soZnVuY3Rpb24oKXtpKHIpfSl9ZnVuY3Rpb24gYSh0LG4saSxyKXt2YXIgbz0hMDtpZighKEEuaXNCdWZmZXIoaSl8fEEuaXNTdHJpbmcoaSl8fEEuaXNOdWxsT3JVbmRlZmluZWQoaSl8fG4ub2JqZWN0TW9kZSkpe3ZhciBzPW5ldyBUeXBlRXJyb3IoXCJJbnZhbGlkIG5vbi1zdHJpbmcvYnVmZmVyIGNodW5rXCIpO3QuZW1pdChcImVycm9yXCIscyksZS5uZXh0VGljayhmdW5jdGlvbigpe3Iocyl9KSxvPSExfXJldHVybiBvfWZ1bmN0aW9uIHUodCxlLG4pe3JldHVybiF0Lm9iamVjdE1vZGUmJnQuZGVjb2RlU3RyaW5ncyE9PSExJiZBLmlzU3RyaW5nKGUpJiYoZT1uZXcgUyhlLG4pKSxlfWZ1bmN0aW9uIGgodCxlLG4scixvKXtuPXUoZSxuLHIpLEEuaXNCdWZmZXIobikmJihyPVwiYnVmZmVyXCIpO3ZhciBzPWUub2JqZWN0TW9kZT8xOm4ubGVuZ3RoO2UubGVuZ3RoKz1zO3ZhciBhPWUubGVuZ3RoPGUuaGlnaFdhdGVyTWFyaztyZXR1cm4gYXx8KGUubmVlZERyYWluPSEwKSxlLndyaXRpbmd8fGUuY29ya2VkP2UuYnVmZmVyLnB1c2gobmV3IGkobixyLG8pKTpjKHQsZSwhMSxzLG4scixvKSxhfWZ1bmN0aW9uIGModCxlLG4saSxyLG8scyl7ZS53cml0ZWxlbj1pLGUud3JpdGVjYj1zLGUud3JpdGluZz0hMCxlLnN5bmM9ITAsbj90Ll93cml0ZXYocixlLm9ud3JpdGUpOnQuX3dyaXRlKHIsbyxlLm9ud3JpdGUpLGUuc3luYz0hMX1mdW5jdGlvbiBsKHQsbixpLHIsbyl7aT9lLm5leHRUaWNrKGZ1bmN0aW9uKCl7bi5wZW5kaW5nY2ItLSxvKHIpfSk6KG4ucGVuZGluZ2NiLS0sbyhyKSksdC5fd3JpdGFibGVTdGF0ZS5lcnJvckVtaXR0ZWQ9ITAsdC5lbWl0KFwiZXJyb3JcIixyKX1mdW5jdGlvbiBmKHQpe3Qud3JpdGluZz0hMSx0LndyaXRlY2I9bnVsbCx0Lmxlbmd0aC09dC53cml0ZWxlbix0LndyaXRlbGVuPTB9ZnVuY3Rpb24gZCh0LG4pe3ZhciBpPXQuX3dyaXRhYmxlU3RhdGUscj1pLnN5bmMsbz1pLndyaXRlY2I7aWYoZihpKSxuKWwodCxpLHIsbixvKTtlbHNle3ZhciBzPW0odCxpKTtzfHxpLmNvcmtlZHx8aS5idWZmZXJQcm9jZXNzaW5nfHwhaS5idWZmZXIubGVuZ3RofHxfKHQsaSkscj9lLm5leHRUaWNrKGZ1bmN0aW9uKCl7cCh0LGkscyxvKX0pOnAodCxpLHMsbyl9fWZ1bmN0aW9uIHAodCxlLG4saSl7bnx8Zyh0LGUpLGUucGVuZGluZ2NiLS0saSgpLHYodCxlKX1mdW5jdGlvbiBnKHQsZSl7MD09PWUubGVuZ3RoJiZlLm5lZWREcmFpbiYmKGUubmVlZERyYWluPSExLHQuZW1pdChcImRyYWluXCIpKX1mdW5jdGlvbiBfKHQsZSl7aWYoZS5idWZmZXJQcm9jZXNzaW5nPSEwLHQuX3dyaXRldiYmZS5idWZmZXIubGVuZ3RoPjEpe2Zvcih2YXIgbj1bXSxpPTA7aTxlLmJ1ZmZlci5sZW5ndGg7aSsrKW4ucHVzaChlLmJ1ZmZlcltpXS5jYWxsYmFjayk7ZS5wZW5kaW5nY2IrKyxjKHQsZSwhMCxlLmxlbmd0aCxlLmJ1ZmZlcixcIlwiLGZ1bmN0aW9uKHQpe2Zvcih2YXIgaT0wO2k8bi5sZW5ndGg7aSsrKWUucGVuZGluZ2NiLS0sbltpXSh0KX0pLGUuYnVmZmVyPVtdfWVsc2V7Zm9yKHZhciBpPTA7aTxlLmJ1ZmZlci5sZW5ndGg7aSsrKXt2YXIgcj1lLmJ1ZmZlcltpXSxvPXIuY2h1bmsscz1yLmVuY29kaW5nLGE9ci5jYWxsYmFjayx1PWUub2JqZWN0TW9kZT8xOm8ubGVuZ3RoO2lmKGModCxlLCExLHUsbyxzLGEpLGUud3JpdGluZyl7aSsrO2JyZWFrfX1pPGUuYnVmZmVyLmxlbmd0aD9lLmJ1ZmZlcj1lLmJ1ZmZlci5zbGljZShpKTplLmJ1ZmZlci5sZW5ndGg9MH1lLmJ1ZmZlclByb2Nlc3Npbmc9ITF9ZnVuY3Rpb24gbSh0LGUpe3JldHVybiBlLmVuZGluZyYmMD09PWUubGVuZ3RoJiYhZS5maW5pc2hlZCYmIWUud3JpdGluZ31mdW5jdGlvbiB5KHQsZSl7ZS5wcmVmaW5pc2hlZHx8KGUucHJlZmluaXNoZWQ9ITAsdC5lbWl0KFwicHJlZmluaXNoXCIpKX1mdW5jdGlvbiB2KHQsZSl7dmFyIG49bSh0LGUpO3JldHVybiBuJiYoMD09PWUucGVuZGluZ2NiPyh5KHQsZSksZS5maW5pc2hlZD0hMCx0LmVtaXQoXCJmaW5pc2hcIikpOnkodCxlKSksbn1mdW5jdGlvbiBFKHQsbixpKXtuLmVuZGluZz0hMCx2KHQsbiksaSYmKG4uZmluaXNoZWQ/ZS5uZXh0VGljayhpKTp0Lm9uY2UoXCJmaW5pc2hcIixpKSksbi5lbmRlZD0hMH10LmV4cG9ydHM9bzt2YXIgUz1uKDcwKS5CdWZmZXI7by5Xcml0YWJsZVN0YXRlPXI7dmFyIEE9bigxMDMpO0EuaW5oZXJpdHM9bigxMDQpO3ZhciB3PW4oOTcpO0EuaW5oZXJpdHMobyx3KSxvLnByb3RvdHlwZS5waXBlPWZ1bmN0aW9uKCl7dGhpcy5lbWl0KFwiZXJyb3JcIixuZXcgRXJyb3IoXCJDYW5ub3QgcGlwZS4gTm90IHJlYWRhYmxlLlwiKSl9LG8ucHJvdG90eXBlLndyaXRlPWZ1bmN0aW9uKHQsZSxuKXt2YXIgaT10aGlzLl93cml0YWJsZVN0YXRlLHI9ITE7cmV0dXJuIEEuaXNGdW5jdGlvbihlKSYmKG49ZSxlPW51bGwpLEEuaXNCdWZmZXIodCk/ZT1cImJ1ZmZlclwiOmV8fChlPWkuZGVmYXVsdEVuY29kaW5nKSxBLmlzRnVuY3Rpb24obil8fChuPWZ1bmN0aW9uKCl7fSksaS5lbmRlZD9zKHRoaXMsaSxuKTphKHRoaXMsaSx0LG4pJiYoaS5wZW5kaW5nY2IrKyxyPWgodGhpcyxpLHQsZSxuKSkscn0sby5wcm90b3R5cGUuY29yaz1mdW5jdGlvbigpe3ZhciB0PXRoaXMuX3dyaXRhYmxlU3RhdGU7dC5jb3JrZWQrK30sby5wcm90b3R5cGUudW5jb3JrPWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5fd3JpdGFibGVTdGF0ZTt0LmNvcmtlZCYmKHQuY29ya2VkLS0sdC53cml0aW5nfHx0LmNvcmtlZHx8dC5maW5pc2hlZHx8dC5idWZmZXJQcm9jZXNzaW5nfHwhdC5idWZmZXIubGVuZ3RofHxfKHRoaXMsdCkpfSxvLnByb3RvdHlwZS5fd3JpdGU9ZnVuY3Rpb24odCxlLG4pe24obmV3IEVycm9yKFwibm90IGltcGxlbWVudGVkXCIpKX0sby5wcm90b3R5cGUuX3dyaXRldj1udWxsLG8ucHJvdG90eXBlLmVuZD1mdW5jdGlvbih0LGUsbil7dmFyIGk9dGhpcy5fd3JpdGFibGVTdGF0ZTtBLmlzRnVuY3Rpb24odCk/KG49dCx0PW51bGwsZT1udWxsKTpBLmlzRnVuY3Rpb24oZSkmJihuPWUsZT1udWxsKSxBLmlzTnVsbE9yVW5kZWZpbmVkKHQpfHx0aGlzLndyaXRlKHQsZSksaS5jb3JrZWQmJihpLmNvcmtlZD0xLHRoaXMudW5jb3JrKCkpLGkuZW5kaW5nfHxpLmZpbmlzaGVkfHxFKHRoaXMsaSxuKX19KS5jYWxsKGUsbigxMDEpKX0sZnVuY3Rpb24odCxlLG4pe2Z1bmN0aW9uIGkodCl7aWYodCYmIXUodCkpdGhyb3cgbmV3IEVycm9yKFwiVW5rbm93biBlbmNvZGluZzogXCIrdCl9ZnVuY3Rpb24gcih0KXtyZXR1cm4gdC50b1N0cmluZyh0aGlzLmVuY29kaW5nKX1mdW5jdGlvbiBvKHQpe3RoaXMuY2hhclJlY2VpdmVkPXQubGVuZ3RoJTIsdGhpcy5jaGFyTGVuZ3RoPXRoaXMuY2hhclJlY2VpdmVkPzI6MH1mdW5jdGlvbiBzKHQpe3RoaXMuY2hhclJlY2VpdmVkPXQubGVuZ3RoJTMsdGhpcy5jaGFyTGVuZ3RoPXRoaXMuY2hhclJlY2VpdmVkPzM6MH12YXIgYT1uKDcwKS5CdWZmZXIsdT1hLmlzRW5jb2Rpbmd8fGZ1bmN0aW9uKHQpe3N3aXRjaCh0JiZ0LnRvTG93ZXJDYXNlKCkpe2Nhc2VcImhleFwiOmNhc2VcInV0ZjhcIjpjYXNlXCJ1dGYtOFwiOmNhc2VcImFzY2lpXCI6Y2FzZVwiYmluYXJ5XCI6Y2FzZVwiYmFzZTY0XCI6Y2FzZVwidWNzMlwiOmNhc2VcInVjcy0yXCI6Y2FzZVwidXRmMTZsZVwiOmNhc2VcInV0Zi0xNmxlXCI6Y2FzZVwicmF3XCI6cmV0dXJuITA7ZGVmYXVsdDpyZXR1cm4hMX19LGg9ZS5TdHJpbmdEZWNvZGVyPWZ1bmN0aW9uKHQpe3N3aXRjaCh0aGlzLmVuY29kaW5nPSh0fHxcInV0ZjhcIikudG9Mb3dlckNhc2UoKS5yZXBsYWNlKC9bLV9dLyxcIlwiKSxpKHQpLHRoaXMuZW5jb2Rpbmcpe2Nhc2VcInV0ZjhcIjp0aGlzLnN1cnJvZ2F0ZVNpemU9MzticmVhaztjYXNlXCJ1Y3MyXCI6Y2FzZVwidXRmMTZsZVwiOnRoaXMuc3Vycm9nYXRlU2l6ZT0yLHRoaXMuZGV0ZWN0SW5jb21wbGV0ZUNoYXI9bzticmVhaztjYXNlXCJiYXNlNjRcIjp0aGlzLnN1cnJvZ2F0ZVNpemU9Myx0aGlzLmRldGVjdEluY29tcGxldGVDaGFyPXM7YnJlYWs7ZGVmYXVsdDpyZXR1cm4gdm9pZCh0aGlzLndyaXRlPXIpfXRoaXMuY2hhckJ1ZmZlcj1uZXcgYSg2KSx0aGlzLmNoYXJSZWNlaXZlZD0wLHRoaXMuY2hhckxlbmd0aD0wfTtoLnByb3RvdHlwZS53cml0ZT1mdW5jdGlvbih0KXtmb3IodmFyIGU9XCJcIjt0aGlzLmNoYXJMZW5ndGg7KXt2YXIgbj10Lmxlbmd0aD49dGhpcy5jaGFyTGVuZ3RoLXRoaXMuY2hhclJlY2VpdmVkP3RoaXMuY2hhckxlbmd0aC10aGlzLmNoYXJSZWNlaXZlZDp0Lmxlbmd0aDtpZih0LmNvcHkodGhpcy5jaGFyQnVmZmVyLHRoaXMuY2hhclJlY2VpdmVkLDAsbiksdGhpcy5jaGFyUmVjZWl2ZWQrPW4sdGhpcy5jaGFyUmVjZWl2ZWQ8dGhpcy5jaGFyTGVuZ3RoKXJldHVyblwiXCI7dD10LnNsaWNlKG4sdC5sZW5ndGgpLGU9dGhpcy5jaGFyQnVmZmVyLnNsaWNlKDAsdGhpcy5jaGFyTGVuZ3RoKS50b1N0cmluZyh0aGlzLmVuY29kaW5nKTt2YXIgaT1lLmNoYXJDb2RlQXQoZS5sZW5ndGgtMSk7aWYoIShpPj01NTI5NiYmNTYzMTk+PWkpKXtpZih0aGlzLmNoYXJSZWNlaXZlZD10aGlzLmNoYXJMZW5ndGg9MCwwPT09dC5sZW5ndGgpcmV0dXJuIGU7YnJlYWt9dGhpcy5jaGFyTGVuZ3RoKz10aGlzLnN1cnJvZ2F0ZVNpemUsZT1cIlwifXRoaXMuZGV0ZWN0SW5jb21wbGV0ZUNoYXIodCk7dmFyIHI9dC5sZW5ndGg7dGhpcy5jaGFyTGVuZ3RoJiYodC5jb3B5KHRoaXMuY2hhckJ1ZmZlciwwLHQubGVuZ3RoLXRoaXMuY2hhclJlY2VpdmVkLHIpLHItPXRoaXMuY2hhclJlY2VpdmVkKSxlKz10LnRvU3RyaW5nKHRoaXMuZW5jb2RpbmcsMCxyKTt2YXIgcj1lLmxlbmd0aC0xLGk9ZS5jaGFyQ29kZUF0KHIpO2lmKGk+PTU1Mjk2JiY1NjMxOT49aSl7dmFyIG89dGhpcy5zdXJyb2dhdGVTaXplO3JldHVybiB0aGlzLmNoYXJMZW5ndGgrPW8sdGhpcy5jaGFyUmVjZWl2ZWQrPW8sdGhpcy5jaGFyQnVmZmVyLmNvcHkodGhpcy5jaGFyQnVmZmVyLG8sMCxvKSx0LmNvcHkodGhpcy5jaGFyQnVmZmVyLDAsMCxvKSxlLnN1YnN0cmluZygwLHIpfXJldHVybiBlfSxoLnByb3RvdHlwZS5kZXRlY3RJbmNvbXBsZXRlQ2hhcj1mdW5jdGlvbih0KXtmb3IodmFyIGU9dC5sZW5ndGg+PTM/Mzp0Lmxlbmd0aDtlPjA7ZS0tKXt2YXIgbj10W3QubGVuZ3RoLWVdO2lmKDE9PWUmJm4+PjU9PTYpe3RoaXMuY2hhckxlbmd0aD0yO2JyZWFrfWlmKDI+PWUmJm4+PjQ9PTE0KXt0aGlzLmNoYXJMZW5ndGg9MzticmVha31pZigzPj1lJiZuPj4zPT0zMCl7dGhpcy5jaGFyTGVuZ3RoPTQ7YnJlYWt9fXRoaXMuY2hhclJlY2VpdmVkPWV9LGgucHJvdG90eXBlLmVuZD1mdW5jdGlvbih0KXt2YXIgZT1cIlwiO2lmKHQmJnQubGVuZ3RoJiYoZT10aGlzLndyaXRlKHQpKSx0aGlzLmNoYXJSZWNlaXZlZCl7dmFyIG49dGhpcy5jaGFyUmVjZWl2ZWQsaT10aGlzLmNoYXJCdWZmZXIscj10aGlzLmVuY29kaW5nO2UrPWkuc2xpY2UoMCxuKS50b1N0cmluZyhyKX1yZXR1cm4gZX19LGZ1bmN0aW9uKHQsZSxuKXtmdW5jdGlvbiBpKHQsZSl7dGhpcy5hZnRlclRyYW5zZm9ybT1mdW5jdGlvbih0LG4pe3JldHVybiByKGUsdCxuKX0sdGhpcy5uZWVkVHJhbnNmb3JtPSExLHRoaXMudHJhbnNmb3JtaW5nPSExLHRoaXMud3JpdGVjYj1udWxsLHRoaXMud3JpdGVjaHVuaz1udWxsfWZ1bmN0aW9uIHIodCxlLG4pe3ZhciBpPXQuX3RyYW5zZm9ybVN0YXRlO2kudHJhbnNmb3JtaW5nPSExO3ZhciByPWkud3JpdGVjYjtpZighcilyZXR1cm4gdC5lbWl0KFwiZXJyb3JcIixuZXcgRXJyb3IoXCJubyB3cml0ZWNiIGluIFRyYW5zZm9ybSBjbGFzc1wiKSk7aS53cml0ZWNodW5rPW51bGwsaS53cml0ZWNiPW51bGwsdS5pc051bGxPclVuZGVmaW5lZChuKXx8dC5wdXNoKG4pLHImJnIoZSk7dmFyIG89dC5fcmVhZGFibGVTdGF0ZTtvLnJlYWRpbmc9ITEsKG8ubmVlZFJlYWRhYmxlfHxvLmxlbmd0aDxvLmhpZ2hXYXRlck1hcmspJiZ0Ll9yZWFkKG8uaGlnaFdhdGVyTWFyayl9ZnVuY3Rpb24gbyh0KXtpZighKHRoaXMgaW5zdGFuY2VvZiBvKSlyZXR1cm4gbmV3IG8odCk7YS5jYWxsKHRoaXMsdCksdGhpcy5fdHJhbnNmb3JtU3RhdGU9bmV3IGkodCx0aGlzKTt2YXIgZT10aGlzO3RoaXMuX3JlYWRhYmxlU3RhdGUubmVlZFJlYWRhYmxlPSEwLHRoaXMuX3JlYWRhYmxlU3RhdGUuc3luYz0hMSx0aGlzLm9uY2UoXCJwcmVmaW5pc2hcIixmdW5jdGlvbigpe3UuaXNGdW5jdGlvbih0aGlzLl9mbHVzaCk/dGhpcy5fZmx1c2goZnVuY3Rpb24odCl7cyhlLHQpfSk6cyhlKX0pfWZ1bmN0aW9uIHModCxlKXtpZihlKXJldHVybiB0LmVtaXQoXCJlcnJvclwiLGUpO3ZhciBuPXQuX3dyaXRhYmxlU3RhdGUsaT10Ll90cmFuc2Zvcm1TdGF0ZTtpZihuLmxlbmd0aCl0aHJvdyBuZXcgRXJyb3IoXCJjYWxsaW5nIHRyYW5zZm9ybSBkb25lIHdoZW4gd3MubGVuZ3RoICE9IDBcIik7aWYoaS50cmFuc2Zvcm1pbmcpdGhyb3cgbmV3IEVycm9yKFwiY2FsbGluZyB0cmFuc2Zvcm0gZG9uZSB3aGVuIHN0aWxsIHRyYW5zZm9ybWluZ1wiKTtyZXR1cm4gdC5wdXNoKG51bGwpfXQuZXhwb3J0cz1vO3ZhciBhPW4oMTA2KSx1PW4oMTAzKTt1LmluaGVyaXRzPW4oMTA0KSx1LmluaGVyaXRzKG8sYSksby5wcm90b3R5cGUucHVzaD1mdW5jdGlvbih0LGUpe3JldHVybiB0aGlzLl90cmFuc2Zvcm1TdGF0ZS5uZWVkVHJhbnNmb3JtPSExLGEucHJvdG90eXBlLnB1c2guY2FsbCh0aGlzLHQsZSl9LG8ucHJvdG90eXBlLl90cmFuc2Zvcm09ZnVuY3Rpb24odCxlLG4pe3Rocm93IG5ldyBFcnJvcihcIm5vdCBpbXBsZW1lbnRlZFwiKX0sby5wcm90b3R5cGUuX3dyaXRlPWZ1bmN0aW9uKHQsZSxuKXt2YXIgaT10aGlzLl90cmFuc2Zvcm1TdGF0ZTtpZihpLndyaXRlY2I9bixpLndyaXRlY2h1bms9dCxpLndyaXRlZW5jb2Rpbmc9ZSwhaS50cmFuc2Zvcm1pbmcpe3ZhciByPXRoaXMuX3JlYWRhYmxlU3RhdGU7KGkubmVlZFRyYW5zZm9ybXx8ci5uZWVkUmVhZGFibGV8fHIubGVuZ3RoPHIuaGlnaFdhdGVyTWFyaykmJnRoaXMuX3JlYWQoci5oaWdoV2F0ZXJNYXJrKX19LG8ucHJvdG90eXBlLl9yZWFkPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuX3RyYW5zZm9ybVN0YXRlO3UuaXNOdWxsKGUud3JpdGVjaHVuayl8fCFlLndyaXRlY2J8fGUudHJhbnNmb3JtaW5nP2UubmVlZFRyYW5zZm9ybT0hMDooZS50cmFuc2Zvcm1pbmc9ITAsdGhpcy5fdHJhbnNmb3JtKGUud3JpdGVjaHVuayxlLndyaXRlZW5jb2RpbmcsZS5hZnRlclRyYW5zZm9ybSkpfX0sZnVuY3Rpb24odCxlLG4pe2Z1bmN0aW9uIGkodCl7cmV0dXJuIHRoaXMgaW5zdGFuY2VvZiBpP3ZvaWQgci5jYWxsKHRoaXMsdCk6bmV3IGkodCl9dC5leHBvcnRzPWk7dmFyIHI9bigxMDkpLG89bigxMDMpO28uaW5oZXJpdHM9bigxMDQpLG8uaW5oZXJpdHMoaSxyKSxpLnByb3RvdHlwZS5fdHJhbnNmb3JtPWZ1bmN0aW9uKHQsZSxuKXtuKG51bGwsdCl9fSxmdW5jdGlvbih0LGUsbil7dC5leHBvcnRzPW4oMTA3KX0sZnVuY3Rpb24odCxlLG4pe3QuZXhwb3J0cz1uKDEwNil9LGZ1bmN0aW9uKHQsZSxuKXt0LmV4cG9ydHM9bigxMDkpfSxmdW5jdGlvbih0LGUsbil7dC5leHBvcnRzPW4oMTEwKX0sZnVuY3Rpb24odCxlLG4peyhmdW5jdGlvbihlKXt2YXIgaSxyPW4oNzQpLG89big2OSkscz0oby5CYXNlVHJhbnNmb3JtLG8uQmFzZVBhcnNlciksYT1uKDExNik7dC5leHBvcnRzPWk9ZnVuY3Rpb24odCxlKXtvLkJhc2VQYXJzZXIucHJvdG90eXBlLmNvbnN0cnVjdG9yLmFwcGx5KHRoaXMsYXJndW1lbnRzKSx0fHwodD17YXVkaW9UcmFja0lkOi0xLHZpZGVvVHJhY2tJZDotMSx0cmFja3M6W119KSx0aGlzLm11eGVyPW5ldyBhKHQpLHRoaXMubXV4ZXIub25kYXRhPXRoaXMuX29uTXA0RGF0YS5iaW5kKHRoaXMpLHRoaXMubXV4ZXIub25jb2RlY2luZm89dGhpcy5fb25Db2RlY0luZm8uYmluZCh0aGlzKSx0aGlzLl9jb2RlY0luZm89bnVsbCx0aGlzLl90aW1lc3RhbXA9MCxlJiYodGhpcy53b3JrZXI9XCJ1bmRlZmluZWRcIiE9dHlwZW9mIFdvcmtlcj9uZXcgV29ya2VyKFwiL2Rpc3QvbXA0LW11eC13b3JrZXItYnVuZGxlLmpzXCIpOm51bGwpLHRoaXMud29ya2VyJiYodGhpcy53b3JrZXIub25tZXNzYWdlPWZ1bmN0aW9uKHQpe3RoaXMuX29uTXA0RGF0YSh0LmRhdGEpfS5iaW5kKHRoaXMpLHRoaXMud29ya2VyLnBvc3RNZXNzYWdlKHttcDRNdXhQcm9maWxlOnR9KSl9LGkuUHJvZmlsZXM9YS5Qcm9maWxlcyxpLnByb3RvdHlwZT1vLmNyZWF0ZUJhc2VQYXJzZXIoe2NvbnN0cnVjdG9yOmksX29uTXA0RGF0YTpmdW5jdGlvbih0KXtyKFwiX29uTXA0RGF0YVwiKSx0aGlzLmVucXVldWUobmV3IG8uVHJhbnNmZXIobmV3IGUodCksXCJidWZmZXJcIikpfSxfb25Db2RlY0luZm86ZnVuY3Rpb24odCl7cihcIkNvZGVjIGluZm86IFwiK3QpLHRoaXMuX2NvZGVjSW5mbz10fSxfb25GaW5pc2g6ZnVuY3Rpb24odCl7cihcIk1QNE11eC5fb25GaW5pc2hcIiksdGhpcy53b3JrZXI/dGhpcy53b3JrZXIucG9zdE1lc3NhZ2Uoe2VvczohMH0pOnRoaXMubXV4ZXImJnRoaXMubXV4ZXIuZmx1c2goKSxzLnByb3RvdHlwZS5fb25GaW5pc2guY2FsbCh0aGlzLHQpfSxfcGFyc2U6ZnVuY3Rpb24odCl7dmFyIGU7dC5kYXRhJiYoZT10aGlzLl90aW1lc3RhbXA9dC5kYXRhLnRpbWVzdGFtcCksdC5kYXRhLmZsdXNoJiYodGhpcy5fbmVlZEZsdXNoPSEwKSxyKFwiVW5pdE1QNE11eCBUaW1lc3RhbXA6IFwiK3RoaXMuX3RpbWVzdGFtcCkscihcIlVuaXRNUDRNdXguX3BhcnNlOiBQYXlsb2FkIHR5cGU6IFwiK3R5cGVvZiB0LmRhdGEpLHRoaXMud29ya2VyPyh0LmRhdGEuZW1wdHl8fHRoaXMud29ya2VyLnBvc3RNZXNzYWdlKHtkYXRhOnQuZGF0YSxtZXRhOnQuZGF0YS5tZXRhLHRpbWVzdGFtcDplLHBhY2tldFR5cGU6YS5UWVBFX0FVRElPX1BBQ0tFVH0pLHRoaXMuX25lZWRGbHVzaCYmKHRoaXMud29ya2VyLnBvc3RNZXNzYWdlKHtlb3M6ITB9KSx0aGlzLl9uZWVkRmx1c2g9ITEpKTp0aGlzLm11eGVyJiYodC5kYXRhLmVtcHR5fHx0aGlzLm11eGVyLnB1c2hQYWNrZXQoYS5UWVBFX0FVRElPX1BBQ0tFVCxuZXcgVWludDhBcnJheSh0LmRhdGEpLGUsdC5kYXRhLm1ldGEpLHRoaXMuX25lZWRGbHVzaCYmKHRoaXMubXV4ZXIuZmx1c2goKSx0aGlzLl9uZWVkRmx1c2g9ITEpKX19KX0pLmNhbGwoZSxuKDcwKS5CdWZmZXIpfSxmdW5jdGlvbih0LGUsbil7ZnVuY3Rpb24gaSh0KXtmb3IodmFyIGU9dC5sZW5ndGg+PjEsbj1uZXcgVWludDhBcnJheShlKSxpPTA7ZT5pO2krKyluW2ldPXBhcnNlSW50KHQuc3Vic3RyKDIqaSwyKSwxNik7cmV0dXJuIG59ZnVuY3Rpb24gcih0LGUpe3ZhciBuLGk9MCxyPXMuUkFXO3N3aXRjaChlLmNvZGVjSWQpe2Nhc2UgbDp2YXIgbz10W2krK107cj1vLG49MTAyNDticmVhaztjYXNlIGM6dmFyIHU9dFtpKzFdPj4zJjMsZj10W2krMV0+PjEmMztuPTE9PT1mPzM9PT11PzExNTI6NTc2OjM9PT1mPzM4NDoxMTUyfXJldHVybiBpbmZvPXtjb2RlY0Rlc2NyaXB0aW9uOmhbZS5jb2RlY0lkXSxjb2RlY0lkOmUuY29kZWNJZCxkYXRhOnQuc3ViYXJyYXkoaSkscmF0ZTplLnNhbXBsZVJhdGUsc2l6ZTplLnNhbXBsZVNpemUsY2hhbm5lbHM6ZS5jaGFubmVscyxzYW1wbGVzOm4scGFja2V0VHlwZTpyfSxhKFwicGFyc2VkIGF1ZGlvIHBhY2tldCB3aXRoICVkIHNhbXBsZXNcIixuKSxpbmZvfWZ1bmN0aW9uIG8odCl7dmFyIGU9MCxuPXRbZV0+PjQsaT0xNSZ0W2VdO2UrKzt2YXIgcj17ZnJhbWVUeXBlOm4sY29kZWNJZDppLGNvZGVjRGVzY3JpcHRpb246ZFtpXX07c3dpdGNoKGkpe2Nhc2UgZzp2YXIgbz10W2UrK107ci5wYWNrZXRUeXBlPW8sci5jb21wb3NpdGlvblRpbWU9KHRbZV08PDI0fHRbZSsxXTw8MTZ8dFtlKzJdPDw4KT4+OCxlKz0zO2JyZWFrO2Nhc2UgcDpyLnBhY2tldFR5cGU9Xy5OQUxVLHIuaG9yaXpvbnRhbE9mZnNldD10W2VdPj40JjE1LHIudmVydGljYWxPZmZzZXQ9MTUmdFtlXSxyLmNvbXBvc2l0aW9uVGltZT0wLGUrK31yZXR1cm4gci5kYXRhPXQuc3ViYXJyYXkoZSkscn12YXIgcyxhPW4oNzQpLHU9bigxMTcpLGg9W1wiUENNXCIsXCJBRFBDTVwiLFwiTVAzXCIsXCJQQ00gbGVcIixcIk5lbGx5bW91c2VyMTZcIixcIk5lbGx5bW91c2VyOFwiLFwiTmVsbHltb3VzZXJcIixcIkcuNzExIEEtbGF3XCIsXCJHLjcxMSBtdS1sYXdcIixudWxsLFwiQUFDXCIsXCJTcGVleFwiLFwiTVAzIDhraHpcIl0sYz0yLGw9MTA7IWZ1bmN0aW9uKHQpe3RbdC5IRUFERVI9MF09XCJIRUFERVJcIix0W3QuUkFXPTFdPVwiUkFXXCJ9KHN8fChzPXt9KSk7dmFyIGYsZD1bbnVsbCxcIkpQRUdcIixcIlNvcmVuc29uXCIsXCJTY3JlZW5cIixcIlZQNlwiLFwiVlA2IGFscGhhXCIsXCJTY3JlZW4yXCIsXCJBVkNcIl0scD00LGc9NzshZnVuY3Rpb24odCl7dFt0LktFWT0xXT1cIktFWVwiLHRbdC5JTk5FUj0yXT1cIklOTkVSXCIsdFt0LkRJU1BPU0FCTEU9M109XCJESVNQT1NBQkxFXCIsdFt0LkdFTkVSQVRFRD00XT1cIkdFTkVSQVRFRFwiLHRbdC5JTkZPPTVdPVwiSU5GT1wifShmfHwoZj17fSkpO3ZhciBfOyFmdW5jdGlvbih0KXt0W3QuSEVBREVSPTBdPVwiSEVBREVSXCIsdFt0Lk5BTFU9MV09XCJOQUxVXCIsdFt0LkVORD0yXT1cIkVORFwifShffHwoXz17fSkpO3ZhciBtLHk9OCx2PTksRT0hMDshZnVuY3Rpb24odCl7dFt0LkNBTl9HRU5FUkFURV9IRUFERVI9MF09XCJDQU5fR0VORVJBVEVfSEVBREVSXCIsdFt0Lk5FRURfSEVBREVSX0RBVEE9MV09XCJORUVEX0hFQURFUl9EQVRBXCIsdFt0Lk1BSU5fUEFDS0VUUz0yXT1cIk1BSU5fUEFDS0VUU1wifShtfHwobT17fSkpO3ZhciBTPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCh0KXt2YXIgZT10aGlzO3RoaXMub25jb2RlY2luZm89ZnVuY3Rpb24odCl7dGhyb3cgbmV3IEVycm9yKFwiTVA0TXV4Lm9uY29kZWNpbmZvIGlzIG5vdCBzZXRcIil9LHRoaXMub25kYXRhPWZ1bmN0aW9uKHQpe3Rocm93IG5ldyBFcnJvcihcIk1QNE11eC5vbmRhdGEgaXMgbm90IHNldFwiKX0sdGhpcy5tZXRhZGF0YT10LHRoaXMudHJhY2tTdGF0ZXM9dGhpcy5tZXRhZGF0YS50cmFja3MubWFwKGZ1bmN0aW9uKHQsbil7dmFyIGk9e3RyYWNrSWQ6bisxLHRyYWNrSW5mbzp0LGNhY2hlZER1cmF0aW9uOjAsc2FtcGxlc1Byb2Nlc3NlZDowLGluaXRpYWxpemF0aW9uRGF0YTpbXX07cmV0dXJuIGUubWV0YWRhdGEuYXVkaW9UcmFja0lkPT09biYmKGUuYXVkaW9UcmFja1N0YXRlPWkpLGUubWV0YWRhdGEudmlkZW9UcmFja0lkPT09biYmKGUudmlkZW9UcmFja1N0YXRlPWkpLGl9LHRoaXMpLHRoaXMuX2NoZWNrSWZOZWVkSGVhZGVyRGF0YSgpLHRoaXMuZmlsZVBvcz0wLHRoaXMuY2FjaGVkUGFja2V0cz1bXSx0aGlzLmNodW5rSW5kZXg9MH1yZXR1cm4gdC5wcm90b3R5cGUucHVzaFBhY2tldD1mdW5jdGlvbih0LGUsbixpKXtzd2l0Y2godGhpcy5zdGF0ZT09PW0uQ0FOX0dFTkVSQVRFX0hFQURFUiYmdGhpcy5fdHJ5R2VuZXJhdGVIZWFkZXIoKSx0KXtjYXNlIHk6dmFyIGE9dGhpcy5hdWRpb1RyYWNrU3RhdGUsdT1yKGUsaSk7aWYoIWF8fGEudHJhY2tJbmZvLmNvZGVjSWQhPT11LmNvZGVjSWQpdGhyb3cgbmV3IEVycm9yKFwiVW5leHBlY3RlZCBhdWRpbyBwYWNrZXQgY29kZWM6IFwiK3UuY29kZWNEZXNjcmlwdGlvbik7c3dpdGNoKHUuY29kZWNJZCl7ZGVmYXVsdDp0aHJvdyBuZXcgRXJyb3IoXCJVbnN1cHBvcnRlZCBhdWRpbyBjb2RlYzogXCIrdS5jb2RlY0Rlc2NyaXB0aW9uKTtjYXNlIGM6YnJlYWs7Y2FzZSBsOmlmKHUucGFja2V0VHlwZT09PXMuSEVBREVSKXJldHVybiB2b2lkIGEuaW5pdGlhbGl6YXRpb25EYXRhLnB1c2godS5kYXRhKX10aGlzLmNhY2hlZFBhY2tldHMucHVzaCh7cGFja2V0OnUsdGltZXN0YW1wOm4sdHJhY2tJZDphLnRyYWNrSWR9KTticmVhaztjYXNlIHY6dmFyIGg9dGhpcy52aWRlb1RyYWNrU3RhdGUsZj1vKGUpO2lmKCFofHxoLnRyYWNrSW5mby5jb2RlY0lkIT09Zi5jb2RlY0lkKXRocm93IG5ldyBFcnJvcihcIlVuZXhwZWN0ZWQgdmlkZW8gcGFja2V0IGNvZGVjOiBcIitmLmNvZGVjRGVzY3JpcHRpb24pO3N3aXRjaChmLmNvZGVjSWQpe2RlZmF1bHQ6dGhyb3cgbmV3IEVycm9yKFwidW5zdXBwb3J0ZWQgdmlkZW8gY29kZWM6IFwiK2YuY29kZWNEZXNjcmlwdGlvbik7Y2FzZSBwOmJyZWFrO2Nhc2UgZzppZihmLnBhY2tldFR5cGU9PT1fLkhFQURFUilyZXR1cm4gdm9pZCBoLmluaXRpYWxpemF0aW9uRGF0YS5wdXNoKGYuZGF0YSl9dGhpcy5jYWNoZWRQYWNrZXRzLnB1c2goe3BhY2tldDpmLHRpbWVzdGFtcDpuLHRyYWNrSWQ6aC50cmFja0lkfSk7YnJlYWs7ZGVmYXVsdDp0aHJvdyBuZXcgRXJyb3IoXCJ1bmtub3duIHBhY2tldCB0eXBlOiBcIit0KX10aGlzLnN0YXRlPT09bS5ORUVEX0hFQURFUl9EQVRBJiZ0aGlzLl90cnlHZW5lcmF0ZUhlYWRlcigpfSx0LnByb3RvdHlwZS5mbHVzaD1mdW5jdGlvbigpe3RoaXMuY2FjaGVkUGFja2V0cy5sZW5ndGg+MCYmdGhpcy5fY2h1bmsoKX0sdC5wcm90b3R5cGUuX2NoZWNrSWZOZWVkSGVhZGVyRGF0YT1mdW5jdGlvbigpe3RoaXMudHJhY2tTdGF0ZXMuc29tZShmdW5jdGlvbih0KXtyZXR1cm4gdC50cmFja0luZm8uY29kZWNJZD09PWx8fHQudHJhY2tJbmZvLmNvZGVjSWQ9PT1nfSk/dGhpcy5zdGF0ZT1tLk5FRURfSEVBREVSX0RBVEE6dGhpcy5zdGF0ZT1tLkNBTl9HRU5FUkFURV9IRUFERVJ9LHQucHJvdG90eXBlLl90cnlHZW5lcmF0ZUhlYWRlcj1mdW5jdGlvbigpe3ZhciB0PXRoaXMudHJhY2tTdGF0ZXMuZXZlcnkoZnVuY3Rpb24odCl7c3dpdGNoKHQudHJhY2tJbmZvLmNvZGVjSWQpe2Nhc2UgbDpjYXNlIGc6cmV0dXJuIHQuaW5pdGlhbGl6YXRpb25EYXRhLmxlbmd0aD4wO2RlZmF1bHQ6cmV0dXJuITB9fSk7aWYodCl7Zm9yKHZhciBlPVtcImlzb21cIl0sbj0xLHI9MSxvPVtdLHM9MDtzPHRoaXMudHJhY2tTdGF0ZXMubGVuZ3RoO3MrKyl7dmFyIGEsaD10aGlzLnRyYWNrU3RhdGVzW3NdLGY9aC50cmFja0luZm87c3dpdGNoKGYuY29kZWNJZCl7Y2FzZSBsOnZhciBkPWguaW5pdGlhbGl6YXRpb25EYXRhWzBdO2E9bmV3IHUuQXVkaW9TYW1wbGVFbnRyeShcIm1wNGFcIixuLGYuY2hhbm5lbHMsZi5zYW1wbGVzaXplLGYuc2FtcGxlcmF0ZSk7dmFyIF89bmV3IFVpbnQ4QXJyYXkoNDErZC5sZW5ndGgpO18uc2V0KGkoXCIwMDAwMDAwMDAzODA4MDgwXCIpLDApLF9bOF09MzIrZC5sZW5ndGgsXy5zZXQoaShcIjAwMDIwMDA0ODA4MDgwXCIpLDkpLF9bMTZdPTE4K2QubGVuZ3RoLF8uc2V0KGkoXCI0MDE1MDAwMDAwMDAwMEZBMDAwMDAwMDAwMDA1ODA4MDgwXCIpLDE3KSxfWzM0XT1kLmxlbmd0aCxfLnNldChkLDM1KSxfLnNldChpKFwiMDY4MDgwODAwMTAyXCIpLDM1K2QubGVuZ3RoKSxhLm90aGVyQm94ZXM9W25ldyB1LlJhd1RhZyhcImVzZHNcIixfKV07dmFyIHk9ZFswXT4+MztoLm1pbWVUeXBlQ29kZWM9XCJtcDRhLjQwLlwiK3k7YnJlYWs7Y2FzZSBjOmE9bmV3IHUuQXVkaW9TYW1wbGVFbnRyeShcIi5tcDNcIixuLGYuY2hhbm5lbHMsZi5zYW1wbGVzaXplLGYuc2FtcGxlcmF0ZSksaC5taW1lVHlwZUNvZGVjPVwibXAzXCI7YnJlYWs7Y2FzZSBnOnZhciB2PWguaW5pdGlhbGl6YXRpb25EYXRhWzBdO2E9bmV3IHUuVmlkZW9TYW1wbGVFbnRyeShcImF2YzFcIixyLGYud2lkdGgsZi5oZWlnaHQpLGEub3RoZXJCb3hlcz1bbmV3IHUuUmF3VGFnKFwiYXZjQ1wiLHYpXTt2YXIgRT12WzFdPDwxNnx2WzJdPDw4fHZbM107aC5taW1lVHlwZUNvZGVjPVwiYXZjMS5cIisoMTY3NzcyMTZ8RSkudG9TdHJpbmcoMTYpLnN1YnN0cigxKSxlLnB1c2goXCJpc28yXCIsXCJhdmMxXCIsXCJtcDQxXCIpO2JyZWFrO2Nhc2UgcDphPW5ldyB1LlZpZGVvU2FtcGxlRW50cnkoXCJWUDZGXCIscixmLndpZHRoLGYuaGVpZ2h0KSxhLm90aGVyQm94ZXM9W25ldyB1LlJhd1RhZyhcImdsYmxcIixpKFwiMDBcIikpXSxoLm1pbWVUeXBlQ29kZWM9XCJhdmMxLjQyMDAxRVwiO2JyZWFrO2RlZmF1bHQ6dGhyb3cgbmV3IEVycm9yKFwibm90IHN1cHBvcnRlZCB0cmFjayB0eXBlXCIpfXZhciBTLEE9dS5UcmFja0hlYWRlckZsYWdzLlRSQUNLX0VOQUJMRUR8dS5UcmFja0hlYWRlckZsYWdzLlRSQUNLX0lOX01PVklFO2g9PT10aGlzLmF1ZGlvVHJhY2tTdGF0ZT9TPW5ldyB1LlRyYWNrQm94KG5ldyB1LlRyYWNrSGVhZGVyQm94KEEsaC50cmFja0lkLC0xLDAsMCwxLHMpLG5ldyB1Lk1lZGlhQm94KG5ldyB1Lk1lZGlhSGVhZGVyQm94KGYudGltZXNjYWxlLC0xLGYubGFuZ3VhZ2UpLG5ldyB1LkhhbmRsZXJCb3goXCJzb3VuXCIsXCJTb3VuZEhhbmRsZXJcIiksbmV3IHUuTWVkaWFJbmZvcm1hdGlvbkJveChuZXcgdS5Tb3VuZE1lZGlhSGVhZGVyQm94LG5ldyB1LkRhdGFJbmZvcm1hdGlvbkJveChuZXcgdS5EYXRhUmVmZXJlbmNlQm94KFtuZXcgdS5EYXRhRW50cnlVcmxCb3godS5TRUxGX0NPTlRBSU5FRF9EQVRBX1JFRkVSRU5DRV9GTEFHKV0pKSxuZXcgdS5TYW1wbGVUYWJsZUJveChuZXcgdS5TYW1wbGVEZXNjcmlwdGlvbkJveChbYV0pLG5ldyB1LlJhd1RhZyhcInN0dHNcIixpKFwiMDAwMDAwMDAwMDAwMDAwMFwiKSksbmV3IHUuUmF3VGFnKFwic3RzY1wiLGkoXCIwMDAwMDAwMDAwMDAwMDAwXCIpKSxuZXcgdS5SYXdUYWcoXCJzdHN6XCIsaShcIjAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMFwiKSksbmV3IHUuUmF3VGFnKFwic3Rjb1wiLGkoXCIwMDAwMDAwMDAwMDAwMDAwXCIpKSkpKSk6aD09PXRoaXMudmlkZW9UcmFja1N0YXRlJiYoUz1uZXcgdS5UcmFja0JveChuZXcgdS5UcmFja0hlYWRlckJveChBLGgudHJhY2tJZCwtMSxmLndpZHRoLGYuaGVpZ2h0LDAscyksbmV3IHUuTWVkaWFCb3gobmV3IHUuTWVkaWFIZWFkZXJCb3goZi50aW1lc2NhbGUsLTEsZi5sYW5ndWFnZSksbmV3IHUuSGFuZGxlckJveChcInZpZGVcIixcIlZpZGVvSGFuZGxlclwiKSxuZXcgdS5NZWRpYUluZm9ybWF0aW9uQm94KG5ldyB1LlZpZGVvTWVkaWFIZWFkZXJCb3gsbmV3IHUuRGF0YUluZm9ybWF0aW9uQm94KG5ldyB1LkRhdGFSZWZlcmVuY2VCb3goW25ldyB1LkRhdGFFbnRyeVVybEJveCh1LlNFTEZfQ09OVEFJTkVEX0RBVEFfUkVGRVJFTkNFX0ZMQUcpXSkpLG5ldyB1LlNhbXBsZVRhYmxlQm94KG5ldyB1LlNhbXBsZURlc2NyaXB0aW9uQm94KFthXSksbmV3IHUuUmF3VGFnKFwic3R0c1wiLGkoXCIwMDAwMDAwMDAwMDAwMDAwXCIpKSxuZXcgdS5SYXdUYWcoXCJzdHNjXCIsaShcIjAwMDAwMDAwMDAwMDAwMDBcIikpLG5ldyB1LlJhd1RhZyhcInN0c3pcIixpKFwiMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwXCIpKSxuZXcgdS5SYXdUYWcoXCJzdGNvXCIsaShcIjAwMDAwMDAwMDAwMDAwMDBcIikpKSkpKSksby5wdXNoKFMpfXZhciB3PW5ldyB1Lk1vdmllRXh0ZW5kc0JveChudWxsLFtuZXcgdS5UcmFja0V4dGVuZHNCb3goMSwxLDAsMCwwKSxuZXcgdS5UcmFja0V4dGVuZHNCb3goMiwxLDAsMCwwKV0sbnVsbCksVD1uZXcgdS5Cb3hDb250YWluZXJCb3goXCJ1ZGF0XCIsW25ldyB1Lk1ldGFCb3gobmV3IHUuUmF3VGFnKFwiaGRsclwiLGkoXCIwMDAwMDAwMDAwMDAwMDAwNkQ2NDY5NzI2MTcwNzA2QzAwMDAwMDAwMDAwMDAwMDAwMFwiKSksW25ldyB1LlJhd1RhZyhcImlsc3RcIixpKFwiMDAwMDAwMjVBOTc0NkY2RjAwMDAwMDFENjQ2MTc0NjEwMDAwMDAwMTAwMDAwMDAwNEM2MTc2NjYzNTM0MkUzNjMzMkUzMTMwMzRcIikpXSldKSxiPW5ldyB1Lk1vdmllSGVhZGVyQm94KDFlMywwLHRoaXMudHJhY2tTdGF0ZXMubGVuZ3RoKzEpLFA9bmV3IHUuTW92aWVCb3goYixvLHcsVCksST1uZXcgdS5GaWxlVHlwZUJveChcImlzb21cIiw1MTIsZSksTD1JLmxheW91dCgwKSxPPVAubGF5b3V0KEwpLFI9bmV3IFVpbnQ4QXJyYXkoTCtPKTtJLndyaXRlKFIpLFAud3JpdGUoUiksdGhpcy5vbmNvZGVjaW5mbyh0aGlzLnRyYWNrU3RhdGVzLm1hcChmdW5jdGlvbih0KXtyZXR1cm4gdC5taW1lVHlwZUNvZGVjfSkpLHRoaXMub25kYXRhKFIpLHRoaXMuZmlsZVBvcys9Ui5sZW5ndGgsdGhpcy5zdGF0ZT1tLk1BSU5fUEFDS0VUU319LHQucHJvdG90eXBlLl9jaHVuaz1mdW5jdGlvbigpe3ZhciB0PXRoaXMuY2FjaGVkUGFja2V0cztpZihFJiZ0aGlzLnZpZGVvVHJhY2tTdGF0ZSl7Zm9yKHZhciBlPXQubGVuZ3RoLTEsbj10aGlzLnZpZGVvVHJhY2tTdGF0ZS50cmFja0lkO2U+MCYmKHRbZV0udHJhY2tJZCE9PW58fHRbZV0ucGFja2V0LmZyYW1lVHlwZSE9PWYuS0VZKTspZS0tO2U+MCYmKHQ9dC5zbGljZSgwLGUpKX1pZigwIT09dC5sZW5ndGgpe2Zvcih2YXIgaT1bXSxyPTAsbz1bXSxzPVtdLGE9MDthPHRoaXMudHJhY2tTdGF0ZXMubGVuZ3RoO2ErKyl7dmFyIGg9dGhpcy50cmFja1N0YXRlc1thXSxkPWgudHJhY2tJbmZvLF89aC50cmFja0lkLG09dC5maWx0ZXIoZnVuY3Rpb24odCl7cmV0dXJuIHQudHJhY2tJZD09PV99KTtpZigwIT09bS5sZW5ndGgpe3ZhciB5LHYsUyxBPW5ldyB1LlRyYWNrRnJhZ21lbnRCYXNlTWVkaWFEZWNvZGVUaW1lQm94KGguY2FjaGVkRHVyYXRpb24pO3N3aXRjaChzLnB1c2gociksZC5jb2RlY0lkKXtjYXNlIGw6Y2FzZSBjOlM9W107Zm9yKHZhciBlPTA7ZTxtLmxlbmd0aDtlKyspe3ZhciB3PW1bZV0ucGFja2V0LFQ9TWF0aC5yb3VuZCh3LnNhbXBsZXMqZC50aW1lc2NhbGUvZC5zYW1wbGVyYXRlKTtpLnB1c2gody5kYXRhKSxyKz13LmRhdGEubGVuZ3RoLFMucHVzaCh7ZHVyYXRpb246VCxzaXplOncuZGF0YS5sZW5ndGh9KSxoLnNhbXBsZXNQcm9jZXNzZWQrPXcuc2FtcGxlc312YXIgYj11LlRyYWNrRnJhZ21lbnRGbGFncy5ERUZBVUxUX1NBTVBMRV9GTEFHU19QUkVTRU5UO3k9bmV3IHUuVHJhY2tGcmFnbWVudEhlYWRlckJveChiLF8sMCwwLDAsMCx1LlNhbXBsZUZsYWdzLlNBTVBMRV9ERVBFTkRTX09OX05PX09USEVSUyk7dmFyIFA9dS5UcmFja1J1bkZsYWdzLkRBVEFfT0ZGU0VUX1BSRVNFTlR8dS5UcmFja1J1bkZsYWdzLlNBTVBMRV9EVVJBVElPTl9QUkVTRU5UfHUuVHJhY2tSdW5GbGFncy5TQU1QTEVfU0laRV9QUkVTRU5UO3Y9bmV3IHUuVHJhY2tSdW5Cb3goUCxTLDAsMCksaC5jYWNoZWREdXJhdGlvbj1NYXRoLnJvdW5kKGguc2FtcGxlc1Byb2Nlc3NlZCpkLnRpbWVzY2FsZS9kLnNhbXBsZXJhdGUpO2JyZWFrO2Nhc2UgZzpjYXNlIHA6Uz1bXTtmb3IodmFyIEk9aC5zYW1wbGVzUHJvY2Vzc2VkLEw9SSpkLnRpbWVzY2FsZS9kLmZyYW1lcmF0ZSxPPU1hdGgucm91bmQoTCksZT0wO2U8bS5sZW5ndGg7ZSsrKXt2YXIgUj1tW2VdLnBhY2tldDtJKys7dmFyIEQ9TWF0aC5yb3VuZChJKmQudGltZXNjYWxlL2QuZnJhbWVyYXRlKSxNPUQtTztPPUQ7dmFyIGs9TWF0aC5yb3VuZChJKmQudGltZXNjYWxlL2QuZnJhbWVyYXRlK1IuY29tcG9zaXRpb25UaW1lKmQudGltZXNjYWxlLzFlMyk7aS5wdXNoKFIuZGF0YSkscis9Ui5kYXRhLmxlbmd0aDt2YXIgTj1SLmZyYW1lVHlwZT09PWYuS0VZP3UuU2FtcGxlRmxhZ3MuU0FNUExFX0RFUEVORFNfT05fTk9fT1RIRVJTOnUuU2FtcGxlRmxhZ3MuU0FNUExFX0RFUEVORFNfT05fT1RIRVJ8dS5TYW1wbGVGbGFncy5TQU1QTEVfSVNfTk9UX1NZTkM7Uy5wdXNoKHtkdXJhdGlvbjpNLHNpemU6Ui5kYXRhLmxlbmd0aCxmbGFnczpOLGNvbXBvc2l0aW9uVGltZU9mZnNldDprLUR9KX12YXIgYj11LlRyYWNrRnJhZ21lbnRGbGFncy5ERUZBVUxUX1NBTVBMRV9GTEFHU19QUkVTRU5UO3k9bmV3IHUuVHJhY2tGcmFnbWVudEhlYWRlckJveChiLF8sMCwwLDAsMCx1LlNhbXBsZUZsYWdzLlNBTVBMRV9ERVBFTkRTX09OX05PX09USEVSUyk7dmFyIFA9dS5UcmFja1J1bkZsYWdzLkRBVEFfT0ZGU0VUX1BSRVNFTlR8dS5UcmFja1J1bkZsYWdzLlNBTVBMRV9EVVJBVElPTl9QUkVTRU5UfHUuVHJhY2tSdW5GbGFncy5TQU1QTEVfU0laRV9QUkVTRU5UfHUuVHJhY2tSdW5GbGFncy5TQU1QTEVfRkxBR1NfUFJFU0VOVHx1LlRyYWNrUnVuRmxhZ3MuU0FNUExFX0NPTVBPU0lUSU9OX1RJTUVfT0ZGU0VUO3Y9bmV3IHUuVHJhY2tSdW5Cb3goUCxTLDAsMCksaC5jYWNoZWREdXJhdGlvbj1PLGguc2FtcGxlc1Byb2Nlc3NlZD1JO2JyZWFrO2RlZmF1bHQ6dGhyb3cgbmV3IEVycm9yKFwiVW4gY29kZWNcIil9dmFyIHg9bmV3IHUuVHJhY2tGcmFnbWVudEJveCh5LEEsdik7by5wdXNoKHgpfX10aGlzLmNhY2hlZFBhY2tldHMuc3BsaWNlKDAsdC5sZW5ndGgpO2Zvcih2YXIgQz1uZXcgdS5Nb3ZpZUZyYWdtZW50SGVhZGVyQm94KCsrdGhpcy5jaHVua0luZGV4KSxGPW5ldyB1Lk1vdmllRnJhZ21lbnRCb3goQyxvKSxVPUYubGF5b3V0KDApLEI9bmV3IHUuTWVkaWFEYXRhQm94KGkpLEg9Qi5sYXlvdXQoVSksaj1VKzgsYT0wO2E8by5sZW5ndGg7YSsrKW9bYV0ucnVuLmRhdGFPZmZzZXQ9aitzW2FdO3ZhciBHPW5ldyBVaW50OEFycmF5KFUrSCk7Ri53cml0ZShHKSxCLndyaXRlKEcpLHRoaXMub25kYXRhKEcpLHRoaXMuZmlsZVBvcys9Ry5sZW5ndGh9fSx0fSgpO3QuZXhwb3J0cz1TLFMuTVAzX1NPVU5EX0NPREVDX0lEPWMsUy5BQUNfU09VTkRfQ09ERUNfSUQ9bCxTLlRZUEVfQVVESU9fUEFDS0VUPXksUy5UWVBFX1ZJREVPX1BBQ0tFVD12LFMuUHJvZmlsZXM9e01QM19BVURJT19PTkxZOnthdWRpb1RyYWNrSWQ6MCx2aWRlb1RyYWNrSWQ6LTEsdHJhY2tzOlt7Y29kZWNJZDpTLk1QM19TT1VORF9DT0RFQ19JRCxjaGFubmVsczoyLHNhbXBsZXJhdGU6NDQxMDAsc2FtcGxlc2l6ZToxNix0aW1lc2NhbGU6NDQxMDB9XX19fSxmdW5jdGlvbih0LGUpe2Z1bmN0aW9uIG4odCl7Zm9yKHZhciBlPW5ldyBVaW50OEFycmF5KDQqdC5sZW5ndGgpLG49MCxpPTAscj10Lmxlbmd0aDtyPmk7aSsrKXt2YXIgbz10LmNoYXJDb2RlQXQoaSk7aWYoMTI3Pj1vKWVbbisrXT1vO2Vsc2V7aWYobz49NTUyOTYmJjU2MzE5Pj1vKXt2YXIgcz10LmNoYXJDb2RlQXQoaSsxKTtzPj01NjMyMCYmNTczNDM+PXMmJihvPSgoMTAyMyZvKTw8MTApKygxMDIzJnMpKzY1NTM2LCsraSl9MCE9PSg0MjkyODcwMTQ0Jm8pPyhlW24rK109MjQ4fG8+Pj4yNCYzLGVbbisrXT0xMjh8bz4+PjE4JjYzLGVbbisrXT0xMjh8bz4+PjEyJjYzLGVbbisrXT0xMjh8bz4+PjYmNjMsZVtuKytdPTEyOHw2MyZvKTowIT09KDQyOTQ5MDE3NjAmbyk/KGVbbisrXT0yNDB8bz4+PjE4JjcsZVtuKytdPTEyOHxvPj4+MTImNjMsZVtuKytdPTEyOHxvPj4+NiY2MyxlW24rK109MTI4fDYzJm8pOjAhPT0oNDI5NDk2NTI0OCZvKT8oZVtuKytdPTIyNHxvPj4+MTImMTUsZVtuKytdPTEyOHxvPj4+NiY2MyxlW24rK109MTI4fDYzJm8pOihlW24rK109MTkyfG8+Pj42JjMxLGVbbisrXT0xMjh8NjMmbyl9fXJldHVybiBlLnN1YmFycmF5KDAsbil9ZnVuY3Rpb24gaSh0KXtmb3IodmFyIGU9W10sbj0xO248YXJndW1lbnRzLmxlbmd0aDtuKyspZVtuLTFdPWFyZ3VtZW50c1tuXTtyZXR1cm4gQXJyYXkucHJvdG90eXBlLmNvbmNhdC5hcHBseSh0LGUpfWZ1bmN0aW9uIHIodCxlLG4pe3RbZV09bj4+MjQmMjU1LHRbZSsxXT1uPj4xNiYyNTUsdFtlKzJdPW4+PjgmMjU1LHRbZSszXT0yNTUmbn1mdW5jdGlvbiBvKHQpe3JldHVybiB0LmNoYXJDb2RlQXQoMCk8PDI0fHQuY2hhckNvZGVBdCgxKTw8MTZ8dC5jaGFyQ29kZUF0KDIpPDw4fHQuY2hhckNvZGVBdCgzKX1mdW5jdGlvbiBzKHQpe3JldHVybih0LWQpLzFlM3wwfWZ1bmN0aW9uIGEodCl7cmV0dXJuIDY1NTM2KnR8MH1mdW5jdGlvbiB1KHQpe3JldHVybiAxMDczNzQxODI0KnR8MH1mdW5jdGlvbiBoKHQpe3JldHVybiAyNTYqdHwwfWZ1bmN0aW9uIGModCl7cmV0dXJuKDMxJnQuY2hhckNvZGVBdCgwKSk8PDEwfCgzMSZ0LmNoYXJDb2RlQXQoMSkpPDw1fDMxJnQuY2hhckNvZGVBdCgyKX12YXIgbCxmPXRoaXMmJnRoaXMuX19leHRlbmRzfHxmdW5jdGlvbih0LGUpe2Z1bmN0aW9uIG4oKXt0aGlzLmNvbnN0cnVjdG9yPXR9Zm9yKHZhciBpIGluIGUpZS5oYXNPd25Qcm9wZXJ0eShpKSYmKHRbaV09ZVtpXSk7dC5wcm90b3R5cGU9bnVsbD09PWU/T2JqZWN0LmNyZWF0ZShlKToobi5wcm90b3R5cGU9ZS5wcm90b3R5cGUsbmV3IG4pfTt0LmV4cG9ydHM9bD17fTt2YXIgZD0tMjA4Mjg0NDhlNSxwPVsxLDAsMCwwLDEsMCwwLDAsMV0sZz1bMCwwLDBdLF89ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KHQsZSl7dGhpcy5ib3h0eXBlPXQsXCJ1dWlkXCI9PT10JiYodGhpcy51c2VyVHlwZT1lKX1yZXR1cm4gdC5wcm90b3R5cGUubGF5b3V0PWZ1bmN0aW9uKHQpe3RoaXMub2Zmc2V0PXQ7dmFyIGU9ODtyZXR1cm4gdGhpcy51c2VyVHlwZSYmKGUrPTE2KSx0aGlzLnNpemU9ZSxlfSx0LnByb3RvdHlwZS53cml0ZT1mdW5jdGlvbih0KXtyZXR1cm4gcih0LHRoaXMub2Zmc2V0LHRoaXMuc2l6ZSkscih0LHRoaXMub2Zmc2V0KzQsbyh0aGlzLmJveHR5cGUpKSx0aGlzLnVzZXJUeXBlPyh0LnNldCh0aGlzLnVzZXJUeXBlLHRoaXMub2Zmc2V0KzgpLDI0KTo4fSx0LnByb3RvdHlwZS50b1VpbnQ4QXJyYXk9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLmxheW91dCgwKSxlPW5ldyBVaW50OEFycmF5KHQpO3JldHVybiB0aGlzLndyaXRlKGUpLGV9LHR9KCk7bC5Cb3g9Xzt2YXIgbT1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKGUsbixpKXt2b2lkIDA9PT1uJiYobj0wKSx2b2lkIDA9PT1pJiYoaT0wKSx0LmNhbGwodGhpcyxlKSx0aGlzLnZlcnNpb249bix0aGlzLmZsYWdzPWl9cmV0dXJuIGYoZSx0KSxlLnByb3RvdHlwZS5sYXlvdXQ9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuc2l6ZT10LnByb3RvdHlwZS5sYXlvdXQuY2FsbCh0aGlzLGUpKzQsdGhpcy5zaXplfSxlLnByb3RvdHlwZS53cml0ZT1mdW5jdGlvbihlKXt2YXIgbj10LnByb3RvdHlwZS53cml0ZS5jYWxsKHRoaXMsZSk7cmV0dXJuIHIoZSx0aGlzLm9mZnNldCtuLHRoaXMudmVyc2lvbjw8MjR8dGhpcy5mbGFncyksbis0fSxlfShfKTtsLkZ1bGxCb3g9bTt2YXIgeT1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKGUsbixpKXt0LmNhbGwodGhpcyxcImZ0eXBlXCIpLHRoaXMubWFqb3JCcmFuZD1lLHRoaXMubWlub3JWZXJzaW9uPW4sdGhpcy5jb21wYXRpYmxlQnJhbmRzPWl9cmV0dXJuIGYoZSx0KSxlLnByb3RvdHlwZS5sYXlvdXQ9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuc2l6ZT10LnByb3RvdHlwZS5sYXlvdXQuY2FsbCh0aGlzLGUpKzQqKDIrdGhpcy5jb21wYXRpYmxlQnJhbmRzLmxlbmd0aCksdGhpcy5zaXplfSxlLnByb3RvdHlwZS53cml0ZT1mdW5jdGlvbihlKXt2YXIgbj10aGlzLGk9dC5wcm90b3R5cGUud3JpdGUuY2FsbCh0aGlzLGUpO3JldHVybiByKGUsdGhpcy5vZmZzZXQraSxvKHRoaXMubWFqb3JCcmFuZCkpLHIoZSx0aGlzLm9mZnNldCtpKzQsdGhpcy5taW5vclZlcnNpb24pLGkrPTgsdGhpcy5jb21wYXRpYmxlQnJhbmRzLmZvckVhY2goZnVuY3Rpb24odCl7cihlLG4ub2Zmc2V0K2ksbyh0KSksaSs9NH0sdGhpcyksaX0sZX0oXyk7bC5GaWxlVHlwZUJveD15O3ZhciB2PWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoZSxuKXt0LmNhbGwodGhpcyxlKSx0aGlzLmNoaWxkcmVuPW59cmV0dXJuIGYoZSx0KSxlLnByb3RvdHlwZS5sYXlvdXQ9ZnVuY3Rpb24oZSl7dmFyIG49dC5wcm90b3R5cGUubGF5b3V0LmNhbGwodGhpcyxlKTtyZXR1cm4gdGhpcy5jaGlsZHJlbi5mb3JFYWNoKGZ1bmN0aW9uKHQpe3QmJihuKz10LmxheW91dChlK24pKX0pLHRoaXMuc2l6ZT1ufSxlLnByb3RvdHlwZS53cml0ZT1mdW5jdGlvbihlKXt2YXIgbj10LnByb3RvdHlwZS53cml0ZS5jYWxsKHRoaXMsZSk7cmV0dXJuIHRoaXMuY2hpbGRyZW4uZm9yRWFjaChmdW5jdGlvbih0KXt0JiYobis9dC53cml0ZShlKSl9KSxufSxlfShfKTtsLkJveENvbnRhaW5lckJveD12O3ZhciBFPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoZSxuLHIsbyl7dC5jYWxsKHRoaXMsXCJtb292XCIsaShbZV0sbixbcixvXSkpLHRoaXMuaGVhZGVyPWUsdGhpcy50cmFja3M9bix0aGlzLmV4dGVuZHNCb3g9cix0aGlzLnVzZXJEYXRhPW99cmV0dXJuIGYoZSx0KSxlfSh2KTtsLk1vdmllQm94PUU7dmFyIFM9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZShlLG4saSxyLG8scyxhLHUpe3ZvaWQgMD09PXImJihyPTEpLHZvaWQgMD09PW8mJihvPTEpLHZvaWQgMD09PXMmJihzPXApLHZvaWQgMD09PWEmJihhPWQpLHZvaWQgMD09PXUmJih1PWQpLHQuY2FsbCh0aGlzLFwibXZoZFwiLDAsMCksdGhpcy50aW1lc2NhbGU9ZSx0aGlzLmR1cmF0aW9uPW4sdGhpcy5uZXh0VHJhY2tJZD1pLHRoaXMucmF0ZT1yLHRoaXMudm9sdW1lPW8sdGhpcy5tYXRyaXg9cyx0aGlzLmNyZWF0aW9uVGltZT1hLHRoaXMubW9kaWZpY2F0aW9uVGltZT11fXJldHVybiBmKGUsdCksZS5wcm90b3R5cGUubGF5b3V0PWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLnNpemU9dC5wcm90b3R5cGUubGF5b3V0LmNhbGwodGhpcyxlKSsxNis0KzIrMis4KzM2KzI0KzQsdGhpcy5zaXplfSxlLnByb3RvdHlwZS53cml0ZT1mdW5jdGlvbihlKXt2YXIgbj10LnByb3RvdHlwZS53cml0ZS5jYWxsKHRoaXMsZSk7cmV0dXJuIHIoZSx0aGlzLm9mZnNldCtuLHModGhpcy5jcmVhdGlvblRpbWUpKSxyKGUsdGhpcy5vZmZzZXQrbis0LHModGhpcy5tb2RpZmljYXRpb25UaW1lKSkscihlLHRoaXMub2Zmc2V0K24rOCx0aGlzLnRpbWVzY2FsZSkscihlLHRoaXMub2Zmc2V0K24rMTIsdGhpcy5kdXJhdGlvbiksbis9MTYscihlLHRoaXMub2Zmc2V0K24sYSh0aGlzLnJhdGUpKSxyKGUsdGhpcy5vZmZzZXQrbis0LGgodGhpcy52b2x1bWUpPDwxNikscihlLHRoaXMub2Zmc2V0K24rOCwwKSxyKGUsdGhpcy5vZmZzZXQrbisxMiwwKSxuKz0xNixyKGUsdGhpcy5vZmZzZXQrbixhKHRoaXMubWF0cml4WzBdKSkscihlLHRoaXMub2Zmc2V0K24rNCxhKHRoaXMubWF0cml4WzFdKSkscihlLHRoaXMub2Zmc2V0K24rOCxhKHRoaXMubWF0cml4WzJdKSkscihlLHRoaXMub2Zmc2V0K24rMTIsYSh0aGlzLm1hdHJpeFszXSkpLHIoZSx0aGlzLm9mZnNldCtuKzE2LGEodGhpcy5tYXRyaXhbNF0pKSxyKGUsdGhpcy5vZmZzZXQrbisyMCxhKHRoaXMubWF0cml4WzVdKSkscihlLHRoaXMub2Zmc2V0K24rMjQsdSh0aGlzLm1hdHJpeFs2XSkpLHIoZSx0aGlzLm9mZnNldCtuKzI4LHUodGhpcy5tYXRyaXhbN10pKSxyKGUsdGhpcy5vZmZzZXQrbiszMix1KHRoaXMubWF0cml4WzhdKSksbis9MzYscihlLHRoaXMub2Zmc2V0K24sMCkscihlLHRoaXMub2Zmc2V0K24rNCwwKSxyKGUsdGhpcy5vZmZzZXQrbis4LDApLHIoZSx0aGlzLm9mZnNldCtuKzEyLDApLHIoZSx0aGlzLm9mZnNldCtuKzE2LDApLHIoZSx0aGlzLm9mZnNldCtuKzIwLDApLG4rPTI0LHIoZSx0aGlzLm9mZnNldCtuLHRoaXMubmV4dFRyYWNrSWQpLG4rPTR9LGV9KG0pO2wuTW92aWVIZWFkZXJCb3g9UyxmdW5jdGlvbih0KXt0W3QuVFJBQ0tfRU5BQkxFRD0xXT1cIlRSQUNLX0VOQUJMRURcIix0W3QuVFJBQ0tfSU5fTU9WSUU9Ml09XCJUUkFDS19JTl9NT1ZJRVwiLHRbdC5UUkFDS19JTl9QUkVWSUVXPTRdPVwiVFJBQ0tfSU5fUFJFVklFV1wifShsLlRyYWNrSGVhZGVyRmxhZ3N8fChsLlRyYWNrSGVhZGVyRmxhZ3M9e30pKTt2YXIgQT0obC5UcmFja0hlYWRlckZsYWdzLGZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoZSxuLGkscixvLHMsYSx1LGgsYyxsKXt2b2lkIDA9PT1hJiYoYT0wKSx2b2lkIDA9PT11JiYodT0wKSx2b2lkIDA9PT1oJiYoaD1wKSx2b2lkIDA9PT1jJiYoYz1kKSx2b2lkIDA9PT1sJiYobD1kKSx0LmNhbGwodGhpcyxcInRraGRcIiwwLGUpLHRoaXMudHJhY2tJZD1uLHRoaXMuZHVyYXRpb249aSx0aGlzLndpZHRoPXIsdGhpcy5oZWlnaHQ9byx0aGlzLnZvbHVtZT1zLHRoaXMuYWx0ZXJuYXRlR3JvdXA9YSx0aGlzLmxheWVyPXUsdGhpcy5tYXRyaXg9aCx0aGlzLmNyZWF0aW9uVGltZT1jLHRoaXMubW9kaWZpY2F0aW9uVGltZT1sfXJldHVybiBmKGUsdCksZS5wcm90b3R5cGUubGF5b3V0PWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLnNpemU9dC5wcm90b3R5cGUubGF5b3V0LmNhbGwodGhpcyxlKSsyMCs4KzYrMiszNis4LHRoaXMuc2l6ZX0sZS5wcm90b3R5cGUud3JpdGU9ZnVuY3Rpb24oZSl7dmFyIG49dC5wcm90b3R5cGUud3JpdGUuY2FsbCh0aGlzLGUpO3JldHVybiByKGUsdGhpcy5vZmZzZXQrbixzKHRoaXMuY3JlYXRpb25UaW1lKSkscihlLHRoaXMub2Zmc2V0K24rNCxzKHRoaXMubW9kaWZpY2F0aW9uVGltZSkpLHIoZSx0aGlzLm9mZnNldCtuKzgsdGhpcy50cmFja0lkKSxyKGUsdGhpcy5vZmZzZXQrbisxMiwwKSxyKGUsdGhpcy5vZmZzZXQrbisxNix0aGlzLmR1cmF0aW9uKSxuKz0yMCxyKGUsdGhpcy5vZmZzZXQrbiwwKSxyKGUsdGhpcy5vZmZzZXQrbis0LDApLHIoZSx0aGlzLm9mZnNldCtuKzgsdGhpcy5sYXllcjw8MTZ8dGhpcy5hbHRlcm5hdGVHcm91cCkscihlLHRoaXMub2Zmc2V0K24rMTIsaCh0aGlzLnZvbHVtZSk8PDE2KSxuKz0xNixyKGUsdGhpcy5vZmZzZXQrbixhKHRoaXMubWF0cml4WzBdKSkscihlLHRoaXMub2Zmc2V0K24rNCxhKHRoaXMubWF0cml4WzFdKSkscihlLHRoaXMub2Zmc2V0K24rOCxhKHRoaXMubWF0cml4WzJdKSkscihlLHRoaXMub2Zmc2V0K24rMTIsYSh0aGlzLm1hdHJpeFszXSkpLHIoZSx0aGlzLm9mZnNldCtuKzE2LGEodGhpcy5tYXRyaXhbNF0pKSxyKGUsdGhpcy5vZmZzZXQrbisyMCxhKHRoaXMubWF0cml4WzVdKSkscihlLHRoaXMub2Zmc2V0K24rMjQsdSh0aGlzLm1hdHJpeFs2XSkpLHIoZSx0aGlzLm9mZnNldCtuKzI4LHUodGhpcy5tYXRyaXhbN10pKSxyKGUsdGhpcy5vZmZzZXQrbiszMix1KHRoaXMubWF0cml4WzhdKSksbis9MzYscihlLHRoaXMub2Zmc2V0K24sYSh0aGlzLndpZHRoKSkscihlLHRoaXMub2Zmc2V0K24rNCxhKHRoaXMuaGVpZ2h0KSksbis9OH0sZX0obSkpO2wuVHJhY2tIZWFkZXJCb3g9QTt2YXIgdz1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKGUsbixpLHIsbyl7dm9pZCAwPT09aSYmKGk9XCJ1bmtcIiksdm9pZCAwPT09ciYmKHI9ZCksdm9pZCAwPT09byYmKG89ZCksdC5jYWxsKHRoaXMsXCJtZGhkXCIsMCwwKSx0aGlzLnRpbWVzY2FsZT1lLHRoaXMuZHVyYXRpb249bix0aGlzLmxhbmd1YWdlPWksdGhpcy5jcmVhdGlvblRpbWU9cix0aGlzLm1vZGlmaWNhdGlvblRpbWU9b31yZXR1cm4gZihlLHQpLGUucHJvdG90eXBlLmxheW91dD1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5zaXplPXQucHJvdG90eXBlLmxheW91dC5jYWxsKHRoaXMsZSkrMTYrNCx0aGlzLnNpemV9LGUucHJvdG90eXBlLndyaXRlPWZ1bmN0aW9uKGUpe3ZhciBuPXQucHJvdG90eXBlLndyaXRlLmNhbGwodGhpcyxlKTtyZXR1cm4gcihlLHRoaXMub2Zmc2V0K24scyh0aGlzLmNyZWF0aW9uVGltZSkpLHIoZSx0aGlzLm9mZnNldCtuKzQscyh0aGlzLm1vZGlmaWNhdGlvblRpbWUpKSxyKGUsdGhpcy5vZmZzZXQrbis4LHRoaXMudGltZXNjYWxlKSxyKGUsdGhpcy5vZmZzZXQrbisxMix0aGlzLmR1cmF0aW9uKSxyKGUsdGhpcy5vZmZzZXQrbisxNixjKHRoaXMubGFuZ3VhZ2UpPDwxNiksbisyMH0sZX0obSk7bC5NZWRpYUhlYWRlckJveD13O3ZhciBUPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoZSxpKXt0LmNhbGwodGhpcyxcImhkbHJcIiwwLDApLHRoaXMuaGFuZGxlclR5cGU9ZSx0aGlzLm5hbWU9aSx0aGlzLl9lbmNvZGVkTmFtZT1uKHRoaXMubmFtZSl9cmV0dXJuIGYoZSx0KSxlLnByb3RvdHlwZS5sYXlvdXQ9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuc2l6ZT10LnByb3RvdHlwZS5sYXlvdXQuY2FsbCh0aGlzLGUpKzgrMTIrKHRoaXMuX2VuY29kZWROYW1lLmxlbmd0aCsxKSx0aGlzLnNpemV9LGUucHJvdG90eXBlLndyaXRlPWZ1bmN0aW9uKGUpe3ZhciBuPXQucHJvdG90eXBlLndyaXRlLmNhbGwodGhpcyxlKTtyZXR1cm4gcihlLHRoaXMub2Zmc2V0K24sMCkscihlLHRoaXMub2Zmc2V0K24rNCxvKHRoaXMuaGFuZGxlclR5cGUpKSxyKGUsdGhpcy5vZmZzZXQrbis4LDApLHIoZSx0aGlzLm9mZnNldCtuKzEyLDApLHIoZSx0aGlzLm9mZnNldCtuKzE2LDApLG4rPTIwLGUuc2V0KHRoaXMuX2VuY29kZWROYW1lLHRoaXMub2Zmc2V0K24pLGVbdGhpcy5vZmZzZXQrbit0aGlzLl9lbmNvZGVkTmFtZS5sZW5ndGhdPTAsbis9dGhpcy5fZW5jb2RlZE5hbWUubGVuZ3RoKzF9LGV9KG0pO2wuSGFuZGxlckJveD1UO3ZhciBiPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoZSl7dm9pZCAwPT09ZSYmKGU9MCksdC5jYWxsKHRoaXMsXCJzbWhkXCIsMCwwKSx0aGlzLmJhbGFuY2U9ZX1yZXR1cm4gZihlLHQpLGUucHJvdG90eXBlLmxheW91dD1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5zaXplPXQucHJvdG90eXBlLmxheW91dC5jYWxsKHRoaXMsZSkrNCx0aGlzLnNpemV9LGUucHJvdG90eXBlLndyaXRlPWZ1bmN0aW9uKGUpe3ZhciBuPXQucHJvdG90eXBlLndyaXRlLmNhbGwodGhpcyxlKTtyZXR1cm4gcihlLHRoaXMub2Zmc2V0K24saCh0aGlzLmJhbGFuY2UpPDwxNiksbis0fSxlfShtKTtsLlNvdW5kTWVkaWFIZWFkZXJCb3g9Yjt2YXIgUD1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKGUsbil7dm9pZCAwPT09ZSYmKGU9MCksdm9pZCAwPT09biYmKG49ZyksdC5jYWxsKHRoaXMsXCJ2bWhkXCIsMCwwKSx0aGlzLmdyYXBoaWNzTW9kZT1lLHRoaXMub3BDb2xvcj1ufXJldHVybiBmKGUsdCksZS5wcm90b3R5cGUubGF5b3V0PWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLnNpemU9dC5wcm90b3R5cGUubGF5b3V0LmNhbGwodGhpcyxlKSs4LHRoaXMuc2l6ZX0sZS5wcm90b3R5cGUud3JpdGU9ZnVuY3Rpb24oZSl7dmFyIG49dC5wcm90b3R5cGUud3JpdGUuY2FsbCh0aGlzLGUpO3JldHVybiByKGUsdGhpcy5vZmZzZXQrbix0aGlzLmdyYXBoaWNzTW9kZTw8MTZ8dGhpcy5vcENvbG9yWzBdKSxyKGUsdGhpcy5vZmZzZXQrbis0LHRoaXMub3BDb2xvclsxXTw8MTZ8dGhpcy5vcENvbG9yWzJdKSxuKzh9LGV9KG0pO2wuVmlkZW9NZWRpYUhlYWRlckJveD1QLGwuU0VMRl9DT05UQUlORURfREFUQV9SRUZFUkVOQ0VfRkxBRz0xO3ZhciBJPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoZSxpKXt2b2lkIDA9PT1pJiYoaT1udWxsKSx0LmNhbGwodGhpcyxcInVybCBcIiwwLGUpLHRoaXMubG9jYXRpb249aSxlJmwuU0VMRl9DT05UQUlORURfREFUQV9SRUZFUkVOQ0VfRkxBR3x8KHRoaXMuX2VuY29kZWRMb2NhdGlvbj1uKGkpKX1yZXR1cm4gZihlLHQpLGUucHJvdG90eXBlLmxheW91dD1mdW5jdGlvbihlKXt2YXIgbj10LnByb3RvdHlwZS5sYXlvdXQuY2FsbCh0aGlzLGUpO3JldHVybiB0aGlzLl9lbmNvZGVkTG9jYXRpb24mJihuKz10aGlzLl9lbmNvZGVkTG9jYXRpb24ubGVuZ3RoKzEpLHRoaXMuc2l6ZT1ufSxlLnByb3RvdHlwZS53cml0ZT1mdW5jdGlvbihlKXt2YXIgbj10LnByb3RvdHlwZS53cml0ZS5jYWxsKHRoaXMsZSk7cmV0dXJuIHRoaXMuX2VuY29kZWRMb2NhdGlvbiYmKGUuc2V0KHRoaXMuX2VuY29kZWRMb2NhdGlvbix0aGlzLm9mZnNldCtuKSxlW3RoaXMub2Zmc2V0K24rdGhpcy5fZW5jb2RlZExvY2F0aW9uLmxlbmd0aF09MCxuKz10aGlzLl9lbmNvZGVkTG9jYXRpb24ubGVuZ3RoKSxufSxlfShtKTtsLkRhdGFFbnRyeVVybEJveD1JO3ZhciBMPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoZSl7dC5jYWxsKHRoaXMsXCJkcmVmXCIsMCwwKSx0aGlzLmVudHJpZXM9ZX1yZXR1cm4gZihlLHQpLGUucHJvdG90eXBlLmxheW91dD1mdW5jdGlvbihlKXt2YXIgbj10LnByb3RvdHlwZS5sYXlvdXQuY2FsbCh0aGlzLGUpKzQ7cmV0dXJuIHRoaXMuZW50cmllcy5mb3JFYWNoKGZ1bmN0aW9uKHQpe24rPXQubGF5b3V0KGUrbil9KSx0aGlzLnNpemU9bn0sZS5wcm90b3R5cGUud3JpdGU9ZnVuY3Rpb24oZSl7dmFyIG49dC5wcm90b3R5cGUud3JpdGUuY2FsbCh0aGlzLGUpO3JldHVybiByKGUsdGhpcy5vZmZzZXQrbix0aGlzLmVudHJpZXMubGVuZ3RoKSx0aGlzLmVudHJpZXMuZm9yRWFjaChmdW5jdGlvbih0KXtuKz10LndyaXRlKGUpfSksbn0sZX0obSk7bC5EYXRhUmVmZXJlbmNlQm94PUw7dmFyIE89ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZShlKXt0LmNhbGwodGhpcyxcImRpbmZcIixbZV0pLHRoaXMuZGF0YVJlZmVyZW5jZT1lfXJldHVybiBmKGUsdCksZX0odik7bC5EYXRhSW5mb3JtYXRpb25Cb3g9Tzt2YXIgUj1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKGUpe3QuY2FsbCh0aGlzLFwic3RzZFwiLDAsMCksdGhpcy5lbnRyaWVzPWV9cmV0dXJuIGYoZSx0KSxlLnByb3RvdHlwZS5sYXlvdXQ9ZnVuY3Rpb24oZSl7dmFyIG49dC5wcm90b3R5cGUubGF5b3V0LmNhbGwodGhpcyxlKTtyZXR1cm4gbis9NCx0aGlzLmVudHJpZXMuZm9yRWFjaChmdW5jdGlvbih0KXtuKz10LmxheW91dChlK24pfSksdGhpcy5zaXplPW59LGUucHJvdG90eXBlLndyaXRlPWZ1bmN0aW9uKGUpe3ZhciBuPXQucHJvdG90eXBlLndyaXRlLmNhbGwodGhpcyxlKTtyZXR1cm4gcihlLHRoaXMub2Zmc2V0K24sdGhpcy5lbnRyaWVzLmxlbmd0aCksbis9NCx0aGlzLmVudHJpZXMuZm9yRWFjaChmdW5jdGlvbih0KXtuKz10LndyaXRlKGUpfSksbn0sZX0obSk7bC5TYW1wbGVEZXNjcmlwdGlvbkJveD1SO3ZhciBEPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoZSxuLGkscixvKXt0LmNhbGwodGhpcyxcInN0YmxcIixbZSxuLGkscixvXSksdGhpcy5zYW1wbGVEZXNjcmlwdGlvbnM9ZSx0aGlzLnRpbWVUb1NhbXBsZT1uLHRoaXMuc2FtcGxlVG9DaHVuaz1pLHRoaXMuc2FtcGxlU2l6ZXM9cix0aGlzLmNodW5rT2Zmc2V0PW99cmV0dXJuIGYoZSx0KSxlfSh2KTtsLlNhbXBsZVRhYmxlQm94PUQ7dmFyIE09ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZShlLG4saSl7dC5jYWxsKHRoaXMsXCJtaW5mXCIsW2UsbixpXSksdGhpcy5oZWFkZXI9ZSx0aGlzLmluZm89bix0aGlzLnNhbXBsZVRhYmxlPWl9cmV0dXJuIGYoZSx0KSxlfSh2KTtsLk1lZGlhSW5mb3JtYXRpb25Cb3g9TTt2YXIgaz1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKGUsbixpKXt0LmNhbGwodGhpcyxcIm1kaWFcIixbZSxuLGldKSx0aGlzLmhlYWRlcj1lLHRoaXMuaGFuZGxlcj1uLHRoaXMuaW5mbz1pfXJldHVybiBmKGUsdCksZX0odik7bC5NZWRpYUJveD1rO3ZhciBOPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoZSxuKXt0LmNhbGwodGhpcyxcInRyYWtcIixbZSxuXSksdGhpcy5oZWFkZXI9ZSx0aGlzLm1lZGlhPW59cmV0dXJuIGYoZSx0KSxlfSh2KTtsLlRyYWNrQm94PU47dmFyIHg9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZShlLG4saSxyLG8pe3QuY2FsbCh0aGlzLFwidHJleFwiLDAsMCksdGhpcy50cmFja0lkPWUsdGhpcy5kZWZhdWx0U2FtcGxlRGVzY3JpcHRpb25JbmRleD1uLHRoaXMuZGVmYXVsdFNhbXBsZUR1cmF0aW9uPWksdGhpcy5kZWZhdWx0U2FtcGxlU2l6ZT1yLHRoaXMuZGVmYXVsdFNhbXBsZUZsYWdzPW99cmV0dXJuIGYoZSx0KSxlLnByb3RvdHlwZS5sYXlvdXQ9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuc2l6ZT10LnByb3RvdHlwZS5sYXlvdXQuY2FsbCh0aGlzLGUpKzIwLHRoaXMuc2l6ZX0sZS5wcm90b3R5cGUud3JpdGU9ZnVuY3Rpb24oZSl7dmFyIG49dC5wcm90b3R5cGUud3JpdGUuY2FsbCh0aGlzLGUpO3JldHVybiByKGUsdGhpcy5vZmZzZXQrbix0aGlzLnRyYWNrSWQpLHIoZSx0aGlzLm9mZnNldCtuKzQsdGhpcy5kZWZhdWx0U2FtcGxlRGVzY3JpcHRpb25JbmRleCkscihlLHRoaXMub2Zmc2V0K24rOCx0aGlzLmRlZmF1bHRTYW1wbGVEdXJhdGlvbikscihlLHRoaXMub2Zmc2V0K24rMTIsdGhpcy5kZWZhdWx0U2FtcGxlU2l6ZSkscihlLHRoaXMub2Zmc2V0K24rMTYsdGhpcy5kZWZhdWx0U2FtcGxlRmxhZ3MpLG4rMjB9LGV9KG0pO2wuVHJhY2tFeHRlbmRzQm94PXg7dmFyIEM9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZShlLG4scil7dC5jYWxsKHRoaXMsXCJtdmV4XCIsaShbZV0sbixbcl0pKSx0aGlzLmhlYWRlcj1lLHRoaXMudHJhY0RlZmF1bHRzPW4sdGhpcy5sZXZlbHM9cn1yZXR1cm4gZihlLHQpLGV9KHYpO2wuTW92aWVFeHRlbmRzQm94PUM7dmFyIEY9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZShlLG4pe3QuY2FsbCh0aGlzLFwibWV0YVwiLDAsMCksdGhpcy5oYW5kbGVyPWUsdGhpcy5vdGhlckJveGVzPW59cmV0dXJuIGYoZSx0KSxlLnByb3RvdHlwZS5sYXlvdXQ9ZnVuY3Rpb24oZSl7dmFyIG49dC5wcm90b3R5cGUubGF5b3V0LmNhbGwodGhpcyxlKTtyZXR1cm4gbis9dGhpcy5oYW5kbGVyLmxheW91dChlK24pLHRoaXMub3RoZXJCb3hlcy5mb3JFYWNoKGZ1bmN0aW9uKHQpe24rPXQubGF5b3V0KGUrbil9KSx0aGlzLnNpemU9bn0sZS5wcm90b3R5cGUud3JpdGU9ZnVuY3Rpb24oZSl7dmFyIG49dC5wcm90b3R5cGUud3JpdGUuY2FsbCh0aGlzLGUpO3JldHVybiBuKz10aGlzLmhhbmRsZXIud3JpdGUoZSksdGhpcy5vdGhlckJveGVzLmZvckVhY2goZnVuY3Rpb24odCl7bis9dC53cml0ZShlKX0pLG59LGV9KG0pO2wuTWV0YUJveD1GO3ZhciBVPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoZSl7dC5jYWxsKHRoaXMsXCJtZmhkXCIsMCwwKSx0aGlzLnNlcXVlbmNlTnVtYmVyPWV9cmV0dXJuIGYoZSx0KSxlLnByb3RvdHlwZS5sYXlvdXQ9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuc2l6ZT10LnByb3RvdHlwZS5sYXlvdXQuY2FsbCh0aGlzLGUpKzQsdGhpcy5zaXplfSxlLnByb3RvdHlwZS53cml0ZT1mdW5jdGlvbihlKXt2YXIgbj10LnByb3RvdHlwZS53cml0ZS5jYWxsKHRoaXMsZSk7cmV0dXJuIHIoZSx0aGlzLm9mZnNldCtuLHRoaXMuc2VxdWVuY2VOdW1iZXIpLG4rNH0sZX0obSk7bC5Nb3ZpZUZyYWdtZW50SGVhZGVyQm94PVUsZnVuY3Rpb24odCl7dFt0LkJBU0VfREFUQV9PRkZTRVRfUFJFU0VOVD0xXT1cIkJBU0VfREFUQV9PRkZTRVRfUFJFU0VOVFwiLHRbdC5TQU1QTEVfREVTQ1JJUFRJT05fSU5ERVhfUFJFU0VOVD0yXT1cIlNBTVBMRV9ERVNDUklQVElPTl9JTkRFWF9QUkVTRU5UXCIsdFt0LkRFRkFVTFRfU0FNUExFX0RVUkFUSU9OX1BSRVNFTlQ9OF09XCJERUZBVUxUX1NBTVBMRV9EVVJBVElPTl9QUkVTRU5UXCIsdFt0LkRFRkFVTFRfU0FNUExFX1NJWkVfUFJFU0VOVD0xNl09XCJERUZBVUxUX1NBTVBMRV9TSVpFX1BSRVNFTlRcIix0W3QuREVGQVVMVF9TQU1QTEVfRkxBR1NfUFJFU0VOVD0zMl09XCJERUZBVUxUX1NBTVBMRV9GTEFHU19QUkVTRU5UXCJ9KGwuVHJhY2tGcmFnbWVudEZsYWdzfHwobC5UcmFja0ZyYWdtZW50RmxhZ3M9e30pKTt2YXIgQj1sLlRyYWNrRnJhZ21lbnRGbGFncyxIPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoZSxuLGkscixvLHMsYSl7dC5jYWxsKHRoaXMsXCJ0ZmhkXCIsMCxlKSx0aGlzLnRyYWNrSWQ9bix0aGlzLmJhc2VEYXRhT2Zmc2V0PWksdGhpcy5zYW1wbGVEZXNjcmlwdGlvbkluZGV4PXIsdGhpcy5kZWZhdWx0U2FtcGxlRHVyYXRpb249byx0aGlzLmRlZmF1bHRTYW1wbGVTaXplPXMsdGhpcy5kZWZhdWx0U2FtcGxlRmxhZ3M9YX1yZXR1cm4gZihlLHQpLGUucHJvdG90eXBlLmxheW91dD1mdW5jdGlvbihlKXt2YXIgbj10LnByb3RvdHlwZS5sYXlvdXQuY2FsbCh0aGlzLGUpKzQsaT10aGlzLmZsYWdzO3JldHVybiBpJkIuQkFTRV9EQVRBX09GRlNFVF9QUkVTRU5UJiYobis9OCksaSZCLlNBTVBMRV9ERVNDUklQVElPTl9JTkRFWF9QUkVTRU5UJiYobis9NCksaSZCLkRFRkFVTFRfU0FNUExFX0RVUkFUSU9OX1BSRVNFTlQmJihuKz00KSxpJkIuREVGQVVMVF9TQU1QTEVfU0laRV9QUkVTRU5UJiYobis9NCksaSZCLkRFRkFVTFRfU0FNUExFX0ZMQUdTX1BSRVNFTlQmJihuKz00KSx0aGlzLnNpemU9bn0sZS5wcm90b3R5cGUud3JpdGU9ZnVuY3Rpb24oZSl7dmFyIG49dC5wcm90b3R5cGUud3JpdGUuY2FsbCh0aGlzLGUpLGk9dGhpcy5mbGFncztyZXR1cm4gcihlLHRoaXMub2Zmc2V0K24sdGhpcy50cmFja0lkKSxuKz00LGkmQi5CQVNFX0RBVEFfT0ZGU0VUX1BSRVNFTlQmJihyKGUsdGhpcy5vZmZzZXQrbiwwKSxyKGUsdGhpcy5vZmZzZXQrbis0LHRoaXMuYmFzZURhdGFPZmZzZXQpLG4rPTgpLGkmQi5TQU1QTEVfREVTQ1JJUFRJT05fSU5ERVhfUFJFU0VOVCYmKHIoZSx0aGlzLm9mZnNldCtuLHRoaXMuc2FtcGxlRGVzY3JpcHRpb25JbmRleCksbis9NCksaSZCLkRFRkFVTFRfU0FNUExFX0RVUkFUSU9OX1BSRVNFTlQmJihyKGUsdGhpcy5vZmZzZXQrbix0aGlzLmRlZmF1bHRTYW1wbGVEdXJhdGlvbiksbis9NCksaSZCLkRFRkFVTFRfU0FNUExFX1NJWkVfUFJFU0VOVCYmKHIoZSx0aGlzLm9mZnNldCtuLHRoaXMuZGVmYXVsdFNhbXBsZVNpemUpLG4rPTQpLGkmQi5ERUZBVUxUX1NBTVBMRV9GTEFHU19QUkVTRU5UJiYocihlLHRoaXMub2Zmc2V0K24sdGhpcy5kZWZhdWx0U2FtcGxlRmxhZ3MpLG4rPTQpLG59LGV9KG0pO2wuVHJhY2tGcmFnbWVudEhlYWRlckJveD1IO1xudmFyIGo9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZShlKXt0LmNhbGwodGhpcyxcInRmZHRcIiwwLDApLHRoaXMuYmFzZU1lZGlhRGVjb2RlVGltZT1lfXJldHVybiBmKGUsdCksZS5wcm90b3R5cGUubGF5b3V0PWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLnNpemU9dC5wcm90b3R5cGUubGF5b3V0LmNhbGwodGhpcyxlKSs0LHRoaXMuc2l6ZX0sZS5wcm90b3R5cGUud3JpdGU9ZnVuY3Rpb24oZSl7dmFyIG49dC5wcm90b3R5cGUud3JpdGUuY2FsbCh0aGlzLGUpO3JldHVybiByKGUsdGhpcy5vZmZzZXQrbix0aGlzLmJhc2VNZWRpYURlY29kZVRpbWUpLG4rNH0sZX0obSk7bC5UcmFja0ZyYWdtZW50QmFzZU1lZGlhRGVjb2RlVGltZUJveD1qO3ZhciBHPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoZSxuLGkpe3QuY2FsbCh0aGlzLFwidHJhZlwiLFtlLG4saV0pLHRoaXMuaGVhZGVyPWUsdGhpcy5kZWNvZGVUaW1lPW4sdGhpcy5ydW49aX1yZXR1cm4gZihlLHQpLGV9KHYpO2wuVHJhY2tGcmFnbWVudEJveD1HLGZ1bmN0aW9uKHQpe3RbdC5JU19MRUFESU5HX01BU0s9MjAxMzI2NTkyXT1cIklTX0xFQURJTkdfTUFTS1wiLHRbdC5TQU1QTEVfREVQRU5EU19PTl9NQVNLPTUwMzMxNjQ4XT1cIlNBTVBMRV9ERVBFTkRTX09OX01BU0tcIix0W3QuU0FNUExFX0RFUEVORFNfT05fT1RIRVI9MTY3NzcyMTZdPVwiU0FNUExFX0RFUEVORFNfT05fT1RIRVJcIix0W3QuU0FNUExFX0RFUEVORFNfT05fTk9fT1RIRVJTPTMzNTU0NDMyXT1cIlNBTVBMRV9ERVBFTkRTX09OX05PX09USEVSU1wiLHRbdC5TQU1QTEVfSVNfREVQRU5ERURfT05fTUFTSz0xMjU4MjkxMl09XCJTQU1QTEVfSVNfREVQRU5ERURfT05fTUFTS1wiLHRbdC5TQU1QTEVfSEFTX1JFRFVOREFOQ1lfTUFTSz0zMTQ1NzI4XT1cIlNBTVBMRV9IQVNfUkVEVU5EQU5DWV9NQVNLXCIsdFt0LlNBTVBMRV9QQURESU5HX1ZBTFVFX01BU0s9OTE3NTA0XT1cIlNBTVBMRV9QQURESU5HX1ZBTFVFX01BU0tcIix0W3QuU0FNUExFX0lTX05PVF9TWU5DPTY1NTM2XT1cIlNBTVBMRV9JU19OT1RfU1lOQ1wiLHRbdC5TQU1QTEVfREVHUkFEQVRJT05fUFJJT1JJVFlfTUFTSz02NTUzNV09XCJTQU1QTEVfREVHUkFEQVRJT05fUFJJT1JJVFlfTUFTS1wifShsLlNhbXBsZUZsYWdzfHwobC5TYW1wbGVGbGFncz17fSkpLGwuU2FtcGxlRmxhZ3MsIWZ1bmN0aW9uKHQpe3RbdC5EQVRBX09GRlNFVF9QUkVTRU5UPTFdPVwiREFUQV9PRkZTRVRfUFJFU0VOVFwiLHRbdC5GSVJTVF9TQU1QTEVfRkxBR1NfUFJFU0VOVD00XT1cIkZJUlNUX1NBTVBMRV9GTEFHU19QUkVTRU5UXCIsdFt0LlNBTVBMRV9EVVJBVElPTl9QUkVTRU5UPTI1Nl09XCJTQU1QTEVfRFVSQVRJT05fUFJFU0VOVFwiLHRbdC5TQU1QTEVfU0laRV9QUkVTRU5UPTUxMl09XCJTQU1QTEVfU0laRV9QUkVTRU5UXCIsdFt0LlNBTVBMRV9GTEFHU19QUkVTRU5UPTEwMjRdPVwiU0FNUExFX0ZMQUdTX1BSRVNFTlRcIix0W3QuU0FNUExFX0NPTVBPU0lUSU9OX1RJTUVfT0ZGU0VUPTIwNDhdPVwiU0FNUExFX0NPTVBPU0lUSU9OX1RJTUVfT0ZGU0VUXCJ9KGwuVHJhY2tSdW5GbGFnc3x8KGwuVHJhY2tSdW5GbGFncz17fSkpO3ZhciBZPWwuVHJhY2tSdW5GbGFncyxWPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoZSxuLGkscil7dC5jYWxsKHRoaXMsXCJ0cnVuXCIsMSxlKSx0aGlzLnNhbXBsZXM9bix0aGlzLmRhdGFPZmZzZXQ9aSx0aGlzLmZpcnN0U2FtcGxlRmxhZ3M9cn1yZXR1cm4gZihlLHQpLGUucHJvdG90eXBlLmxheW91dD1mdW5jdGlvbihlKXt2YXIgbj10LnByb3RvdHlwZS5sYXlvdXQuY2FsbCh0aGlzLGUpKzQsaT10aGlzLnNhbXBsZXMubGVuZ3RoLHI9dGhpcy5mbGFncztyZXR1cm4gciZZLkRBVEFfT0ZGU0VUX1BSRVNFTlQmJihuKz00KSxyJlkuRklSU1RfU0FNUExFX0ZMQUdTX1BSRVNFTlQmJihuKz00KSxyJlkuU0FNUExFX0RVUkFUSU9OX1BSRVNFTlQmJihuKz00KmkpLHImWS5TQU1QTEVfU0laRV9QUkVTRU5UJiYobis9NCppKSxyJlkuU0FNUExFX0ZMQUdTX1BSRVNFTlQmJihuKz00KmkpLHImWS5TQU1QTEVfQ09NUE9TSVRJT05fVElNRV9PRkZTRVQmJihuKz00KmkpLHRoaXMuc2l6ZT1ufSxlLnByb3RvdHlwZS53cml0ZT1mdW5jdGlvbihlKXt2YXIgbj10LnByb3RvdHlwZS53cml0ZS5jYWxsKHRoaXMsZSksaT10aGlzLnNhbXBsZXMubGVuZ3RoLG89dGhpcy5mbGFncztyKGUsdGhpcy5vZmZzZXQrbixpKSxuKz00LG8mWS5EQVRBX09GRlNFVF9QUkVTRU5UJiYocihlLHRoaXMub2Zmc2V0K24sdGhpcy5kYXRhT2Zmc2V0KSxuKz00KSxvJlkuRklSU1RfU0FNUExFX0ZMQUdTX1BSRVNFTlQmJihyKGUsdGhpcy5vZmZzZXQrbix0aGlzLmZpcnN0U2FtcGxlRmxhZ3MpLG4rPTQpO2Zvcih2YXIgcz0wO2k+cztzKyspe3ZhciBhPXRoaXMuc2FtcGxlc1tzXTtvJlkuU0FNUExFX0RVUkFUSU9OX1BSRVNFTlQmJihyKGUsdGhpcy5vZmZzZXQrbixhLmR1cmF0aW9uKSxuKz00KSxvJlkuU0FNUExFX1NJWkVfUFJFU0VOVCYmKHIoZSx0aGlzLm9mZnNldCtuLGEuc2l6ZSksbis9NCksbyZZLlNBTVBMRV9GTEFHU19QUkVTRU5UJiYocihlLHRoaXMub2Zmc2V0K24sYS5mbGFncyksbis9NCksbyZZLlNBTVBMRV9DT01QT1NJVElPTl9USU1FX09GRlNFVCYmKHIoZSx0aGlzLm9mZnNldCtuLGEuY29tcG9zaXRpb25UaW1lT2Zmc2V0KSxuKz00KX1yZXR1cm4gbn0sZX0obSk7bC5UcmFja1J1bkJveD1WO3ZhciB6PWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoZSxuKXt0LmNhbGwodGhpcyxcIm1vb2ZcIixpKFtlXSxuKSksdGhpcy5oZWFkZXI9ZSx0aGlzLnRyYWZzPW59cmV0dXJuIGYoZSx0KSxlfSh2KTtsLk1vdmllRnJhZ21lbnRCb3g9ejt2YXIgVz1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKGUpe3QuY2FsbCh0aGlzLFwibWRhdFwiKSx0aGlzLmNodW5rcz1lfXJldHVybiBmKGUsdCksZS5wcm90b3R5cGUubGF5b3V0PWZ1bmN0aW9uKGUpe3ZhciBuPXQucHJvdG90eXBlLmxheW91dC5jYWxsKHRoaXMsZSk7cmV0dXJuIHRoaXMuY2h1bmtzLmZvckVhY2goZnVuY3Rpb24odCl7bis9dC5sZW5ndGh9KSx0aGlzLnNpemU9bn0sZS5wcm90b3R5cGUud3JpdGU9ZnVuY3Rpb24oZSl7dmFyIG49dGhpcyxpPXQucHJvdG90eXBlLndyaXRlLmNhbGwodGhpcyxlKTtyZXR1cm4gdGhpcy5jaHVua3MuZm9yRWFjaChmdW5jdGlvbih0KXtlLnNldCh0LG4ub2Zmc2V0K2kpLGkrPXQubGVuZ3RofSx0aGlzKSxpfSxlfShfKTtsLk1lZGlhRGF0YUJveD1XO3ZhciBLPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoZSxuKXt0LmNhbGwodGhpcyxlKSx0aGlzLmRhdGFSZWZlcmVuY2VJbmRleD1ufXJldHVybiBmKGUsdCksZS5wcm90b3R5cGUubGF5b3V0PWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLnNpemU9dC5wcm90b3R5cGUubGF5b3V0LmNhbGwodGhpcyxlKSs4LHRoaXMuc2l6ZX0sZS5wcm90b3R5cGUud3JpdGU9ZnVuY3Rpb24oZSl7dmFyIG49dC5wcm90b3R5cGUud3JpdGUuY2FsbCh0aGlzLGUpO3JldHVybiByKGUsdGhpcy5vZmZzZXQrbiwwKSxyKGUsdGhpcy5vZmZzZXQrbis0LHRoaXMuZGF0YVJlZmVyZW5jZUluZGV4KSxuKzh9LGV9KF8pO2wuU2FtcGxlRW50cnk9Szt2YXIgcT1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKGUsbixpLHIsbyxzKXt2b2lkIDA9PT1pJiYoaT0yKSx2b2lkIDA9PT1yJiYocj0xNiksdm9pZCAwPT09byYmKG89NDQxMDApLHZvaWQgMD09PXMmJihzPW51bGwpLHQuY2FsbCh0aGlzLGUsbiksdGhpcy5jaGFubmVsQ291bnQ9aSx0aGlzLnNhbXBsZVNpemU9cix0aGlzLnNhbXBsZVJhdGU9byx0aGlzLm90aGVyQm94ZXM9c31yZXR1cm4gZihlLHQpLGUucHJvdG90eXBlLmxheW91dD1mdW5jdGlvbihlKXt2YXIgbj10LnByb3RvdHlwZS5sYXlvdXQuY2FsbCh0aGlzLGUpKzIwO3JldHVybiB0aGlzLm90aGVyQm94ZXMmJnRoaXMub3RoZXJCb3hlcy5mb3JFYWNoKGZ1bmN0aW9uKHQpe24rPXQubGF5b3V0KGUrbil9KSx0aGlzLnNpemU9bn0sZS5wcm90b3R5cGUud3JpdGU9ZnVuY3Rpb24oZSl7dmFyIG49dC5wcm90b3R5cGUud3JpdGUuY2FsbCh0aGlzLGUpO3JldHVybiByKGUsdGhpcy5vZmZzZXQrbiwwKSxyKGUsdGhpcy5vZmZzZXQrbis0LDApLHIoZSx0aGlzLm9mZnNldCtuKzgsdGhpcy5jaGFubmVsQ291bnQ8PDE2fHRoaXMuc2FtcGxlU2l6ZSkscihlLHRoaXMub2Zmc2V0K24rMTIsMCkscihlLHRoaXMub2Zmc2V0K24rMTYsdGhpcy5zYW1wbGVSYXRlPDwxNiksbis9MjAsdGhpcy5vdGhlckJveGVzJiZ0aGlzLm90aGVyQm94ZXMuZm9yRWFjaChmdW5jdGlvbih0KXtuKz10LndyaXRlKGUpfSksbn0sZX0oSyk7bC5BdWRpb1NhbXBsZUVudHJ5PXEsbC5DT0xPUl9OT19BTFBIQV9WSURFT19TQU1QTEVfREVQVEg9MjQ7dmFyIFg9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZShlLG4saSxyLG8scyxhLHUsaCxjKXtpZih2b2lkIDA9PT1vJiYobz1cIlwiKSx2b2lkIDA9PT1zJiYocz03Miksdm9pZCAwPT09YSYmKGE9NzIpLHZvaWQgMD09PXUmJih1PTEpLHZvaWQgMD09PWgmJihoPWwuQ09MT1JfTk9fQUxQSEFfVklERU9fU0FNUExFX0RFUFRIKSx2b2lkIDA9PT1jJiYoYz1udWxsKSx0LmNhbGwodGhpcyxlLG4pLHRoaXMud2lkdGg9aSx0aGlzLmhlaWdodD1yLHRoaXMuY29tcHJlc3Nvck5hbWU9byx0aGlzLmhvcml6UmVzb2x1dGlvbj1zLHRoaXMudmVydFJlc29sdXRpb249YSx0aGlzLmZyYW1lQ291bnQ9dSx0aGlzLmRlcHRoPWgsdGhpcy5vdGhlckJveGVzPWMsby5sZW5ndGg+MzEpdGhyb3cgbmV3IEVycm9yKFwiaW52YWxpZCBjb21wcmVzc29yIG5hbWVcIil9cmV0dXJuIGYoZSx0KSxlLnByb3RvdHlwZS5sYXlvdXQ9ZnVuY3Rpb24oZSl7dmFyIG49dC5wcm90b3R5cGUubGF5b3V0LmNhbGwodGhpcyxlKSsxNisxMis0KzIrMzIrMisyO3JldHVybiB0aGlzLm90aGVyQm94ZXMmJnRoaXMub3RoZXJCb3hlcy5mb3JFYWNoKGZ1bmN0aW9uKHQpe24rPXQubGF5b3V0KGUrbil9KSx0aGlzLnNpemU9bn0sZS5wcm90b3R5cGUud3JpdGU9ZnVuY3Rpb24oZSl7dmFyIG49dC5wcm90b3R5cGUud3JpdGUuY2FsbCh0aGlzLGUpO3IoZSx0aGlzLm9mZnNldCtuLDApLHIoZSx0aGlzLm9mZnNldCtuKzQsMCkscihlLHRoaXMub2Zmc2V0K24rOCwwKSxyKGUsdGhpcy5vZmZzZXQrbisxMiwwKSxuKz0xNixyKGUsdGhpcy5vZmZzZXQrbix0aGlzLndpZHRoPDwxNnx0aGlzLmhlaWdodCkscihlLHRoaXMub2Zmc2V0K24rNCxhKHRoaXMuaG9yaXpSZXNvbHV0aW9uKSkscihlLHRoaXMub2Zmc2V0K24rOCxhKHRoaXMudmVydFJlc29sdXRpb24pKSxuKz0xMixyKGUsdGhpcy5vZmZzZXQrbiwwKSxyKGUsdGhpcy5vZmZzZXQrbis0LHRoaXMuZnJhbWVDb3VudDw8MTYpLG4rPTYsZVt0aGlzLm9mZnNldCtuXT10aGlzLmNvbXByZXNzb3JOYW1lLmxlbmd0aDtmb3IodmFyIGk9MDszMT5pO2krKyllW3RoaXMub2Zmc2V0K24raSsxXT1pPHRoaXMuY29tcHJlc3Nvck5hbWUubGVuZ3RoPzEyNyZ0aGlzLmNvbXByZXNzb3JOYW1lLmNoYXJDb2RlQXQoaSk6MDtyZXR1cm4gbis9MzIscihlLHRoaXMub2Zmc2V0K24sdGhpcy5kZXB0aDw8MTZ8NjU1MzUpLG4rPTQsdGhpcy5vdGhlckJveGVzJiZ0aGlzLm90aGVyQm94ZXMuZm9yRWFjaChmdW5jdGlvbih0KXtuKz10LndyaXRlKGUpfSksbn0sZX0oSyk7bC5WaWRlb1NhbXBsZUVudHJ5PVg7dmFyICQ9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZShlLG4pe3QuY2FsbCh0aGlzLGUpLHRoaXMuZGF0YT1ufXJldHVybiBmKGUsdCksZS5wcm90b3R5cGUubGF5b3V0PWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLnNpemU9dC5wcm90b3R5cGUubGF5b3V0LmNhbGwodGhpcyxlKSt0aGlzLmRhdGEubGVuZ3RoLHRoaXMuc2l6ZX0sZS5wcm90b3R5cGUud3JpdGU9ZnVuY3Rpb24oZSl7dmFyIG49dC5wcm90b3R5cGUud3JpdGUuY2FsbCh0aGlzLGUpO3JldHVybiBlLnNldCh0aGlzLmRhdGEsdGhpcy5vZmZzZXQrbiksbit0aGlzLmRhdGEubGVuZ3RofSxlfShfKTtsLlJhd1RhZz0kfSxmdW5jdGlvbih0LGUsbil7KGZ1bmN0aW9uKGUpe3ZhciBpLHI9big3NCksbz1uKDY5KSxzPShvLkJhc2VUcmFuc2Zvcm0sbigxMTkpKTtuKDEyMCksdC5leHBvcnRzPWk9ZnVuY3Rpb24oKXtvLkJhc2VQYXJzZXIucHJvdG90eXBlLmNvbnN0cnVjdG9yLmFwcGx5KHRoaXMsYXJndW1lbnRzKSx0aGlzLnBhcnNlcj1uZXcgcyx0aGlzLnBhcnNlci5vbkZyYW1lPXRoaXMuX29uTXAzRnJhbWUuYmluZCh0aGlzKSx0aGlzLnBhcnNlci5vbk5vaXNlPXRoaXMuX29uTm9pc2UuYmluZCh0aGlzKSx0aGlzLnBhcnNlci5vbkNsb3NlPXRoaXMuX29uQ2xvc2UuYmluZCh0aGlzKSx0aGlzLl9zYW1wbGVSYXRlPTAsdGhpcy5fYml0UmF0ZT0wLHRoaXMuX3RpbWVzdGFtcD0wfSxpLnByb3RvdHlwZT1vLmNyZWF0ZUJhc2VQYXJzZXIoe2NvbnN0cnVjdG9yOmksX29uTXAzRnJhbWU6ZnVuY3Rpb24odCxuLGkpe3IoXCJGb3VuZCBmcmFtZSBsZW5ndGggXCIrdC5sZW5ndGgrXCIgYml0UmF0ZT1cIituK1wiLCBzYW1wbGVSYXRlPVwiK2kpO3ZhciBzPW5ldyBlKHQpLGE9MTE1MjtzLm1ldGE9e21pbWVUeXBlOlwiYXVkaW8vbXBlZ1wiLGNvZGVjSWQ6MixjaGFubmVsczoyLGJpdFJhdGU6bixzYW1wbGVSYXRlOmksc2FtcGxlU2l6ZToxNn0scy5kdXJhdGlvbj1hLHMudGltZXN0YW1wPXRoaXMuX3RpbWVzdGFtcCx0aGlzLmVucXVldWUobmV3IG8uVHJhbnNmZXIocyxcImJ1ZmZlclwiKSksdGhpcy5fYml0UmF0ZT1uLHRoaXMuX3RpbWVzdGFtcCs9YX0sX29uTm9pc2U6ZnVuY3Rpb24oKXtyKFwibXAzIGhhcyBub2lzZVwiKX0sX29uQ2xvc2U6ZnVuY3Rpb24oKXtyKFwicGFyc2VyIGNsb3NlZFwiKX0sX3BhcnNlOmZ1bmN0aW9uKHQpe3JldHVybiByKFwicGFyc2UgY2FsbGVkXCIpLHQuZGF0YS5lbXB0eT8ocihcImVtcHR5IHRyYW5zZmVyXCIpLHZvaWQgdGhpcy5lbnF1ZXVlKHQpKTp2b2lkIHRoaXMucGFyc2VyLnB1c2gobmV3IFVpbnQ4QXJyYXkodC5kYXRhKSl9fSl9KS5jYWxsKGUsbig3MCkuQnVmZmVyKX0sZnVuY3Rpb24odCxlLG4pe3ZhciBpPW4oNzQpLHI9WzMyLDY0LDk2LDEyOCwxNjAsMTkyLDIyNCwyNTYsMjg4LDMyMCwzNTIsMzg0LDQxNiw0NDgsMzIsNDgsNTYsNjQsODAsOTYsMTEyLDEyOCwxNjAsMTkyLDIyNCwyNTYsMzIwLDM4NCwzMiw0MCw0OCw1Niw2NCw4MCw5NiwxMTIsMTI4LDE2MCwxOTIsMjI0LDI1NiwzMjAsMzIsNDgsNTYsNjQsODAsOTYsMTEyLDEyOCwxNDQsMTYwLDE3NiwxOTIsMjI0LDI1Niw4LDE2LDI0LDMyLDQwLDQ4LDU2LDY0LDgwLDk2LDExMiwxMjgsMTQ0LDE2MF0sbz1bNDQxMDAsNDhlMywzMmUzLDIyMDUwLDI0ZTMsMTZlMywxMTAyNSwxMmUzLDhlM10scz1mdW5jdGlvbigpe2Z1bmN0aW9uIHQoKXt0aGlzLmJ1ZmZlcj1udWxsLHRoaXMuYnVmZmVyU2l6ZT0wfXJldHVybiB0LnByb3RvdHlwZS5wdXNoPWZ1bmN0aW9uKHQpe3ZhciBlO2lmKHRoaXMuYnVmZmVyU2l6ZT4wKXt2YXIgbj10Lmxlbmd0aCt0aGlzLmJ1ZmZlclNpemU7aWYoIXRoaXMuYnVmZmVyfHx0aGlzLmJ1ZmZlci5sZW5ndGg8bil7dmFyIHI9bmV3IFVpbnQ4QXJyYXkobik7dGhpcy5idWZmZXJTaXplPjAmJnIuc2V0KHRoaXMuYnVmZmVyLnN1YmFycmF5KDAsdGhpcy5idWZmZXJTaXplKSksdGhpcy5idWZmZXI9cn10aGlzLmJ1ZmZlci5zZXQodCx0aGlzLmJ1ZmZlclNpemUpLHRoaXMuYnVmZmVyU2l6ZT1uLHQ9dGhpcy5idWZmZXIsZT1ufWVsc2UgZT10Lmxlbmd0aDtpKFwicHVzaCBcIitlKTtmb3IodmFyIG8scz0wO2U+cyYmKG89dGhpcy5fcGFyc2UodCxzLGUpKT4wOylzKz1vO3ZhciBhPWUtczthPjAmJighdGhpcy5idWZmZXJ8fHRoaXMuYnVmZmVyLmxlbmd0aDxhP3RoaXMuYnVmZmVyPW5ldyBVaW50OEFycmF5KHQuc3ViYXJyYXkocyxlKSk6dGhpcy5idWZmZXIuc2V0KHQuc3ViYXJyYXkocyxlKSkpLHRoaXMuYnVmZmVyU2l6ZT1hfSx0LnByb3RvdHlwZS5fcGFyc2U9ZnVuY3Rpb24odCxlLG4pe2lmKGkoXCJfcGFyc2VcIiksZSsyPm4pcmV0dXJuLTE7aWYoMjU1PT09dFtlXXx8MjI0PT09KDIyNCZ0W2UrMV0pKXtpZihlKzI0Pm4pcmV0dXJuLTE7dmFyIHM9dFtlKzFdPj4zJjMsYT10W2UrMV0+PjEmMyx1PXRbZSsyXT4+NCYxNSxoPXRbZSsyXT4+MiYzLGM9ISEoMiZ0W2UrMl0pO2lmKDEhPT1zJiYwIT09dSYmMTUhPT11JiYzIT09aCl7dmFyIGw9Mz09PXM/My1hOjM9PT1hPzM6NCxmPTFlMypyWzE0KmwrdS0xXSxkPTM9PT1zPzA6Mj09PXM/MToyLHA9b1szKmQraF0sZz1jPzE6MCxfPTM9PT1hPygzPT09cz8xMjo2KSpmL3ArZzw8MjooMz09PXM/MTQ0OjcyKSpmL3ArZ3wwO3JldHVybiBlK18+bj8tMToodGhpcy5vbkZyYW1lJiYoaShcIm9uRnJhbWVcIiksdGhpcy5vbkZyYW1lKHQuc3ViYXJyYXkoZSxlK18pLGYscCkpLF8pfX1mb3IodmFyIG09ZSsyO24+bTspe2lmKDI1NT09PXRbbS0xXSYmMjI0PT09KDIyNCZ0W21dKSlyZXR1cm4gdGhpcy5vbk5vaXNlJiZ0aGlzLm9uTm9pc2UodC5zdWJhcnJheShlLG0tMSkpLG0tZS0xO20rK31yZXR1cm4tMX0sdC5wcm90b3R5cGUuY2xvc2U9ZnVuY3Rpb24oKXt0aGlzLmJ1ZmZlclNpemU+MCYmdGhpcy5vbk5vaXNlJiZ0aGlzLm9uTm9pc2UodGhpcy5idWZmZXIuc3ViYXJyYXkoMCx0aGlzLmJ1ZmZlclNpemUpKSx0aGlzLmJ1ZmZlcj1udWxsLHRoaXMuYnVmZmVyU2l6ZT0wLHRoaXMub25DbG9zZSYmdGhpcy5vbkNsb3NlKCl9LHR9KCk7dC5leHBvcnRzPXN9LGZ1bmN0aW9uKHQsZSl7dmFyIG49MWU5O3QuZXhwb3J0cz17VElNRVNDQUxFX1NFQ09ORFM6bn19LGZ1bmN0aW9uKHQsZSxuKXt2YXIgaSxyPW4oMTIyKSxvPW4oNjkpLHM9by5CYXNlU2luayxhPW4oMTIzKTt0LmV4cG9ydHM9aT1mdW5jdGlvbih0KXtpZihzLnByb3RvdHlwZS5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMpLCFyLmhhdmVNZWRpYVNvdXJjZVN1cHBvcnRNaW1lVHlwZSh0KSl0aHJvdyBuZXcgRXJyb3IoXCJMb2NhbCBNZWRpYVNvdXJjZSBkb2Vzbid0IHN1cHBvcnQgcHJvdmlkZWQgTUlNRSB0eXBlOiBcIit0KTt2YXIgZTtlPWFyZ3VtZW50cy5sZW5ndGg+MT9BcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMpOnQgaW5zdGFuY2VvZiBBcnJheT90Olt0XSx0aGlzLm1pbWVUeXBlcz1lLHRoaXMubWVkaWFTb3VyY2U9bmV3IE1lZGlhU291cmNlLHRoaXMubXNlV3JpdGVyPW5ldyBhKHRoaXMubWVkaWFTb3VyY2UpLHRoaXMuZGF0YVNvdXJjZXM9W10sdGhpcy5zZWxlY3RlZERhdGFTb3VyY2VJbmRleD0wLHRoaXMubWltZVR5cGVzLmZvckVhY2goZnVuY3Rpb24odCl7dmFyIGU9e21pbWVUeXBlOnR9O3RoaXMubXNlV3JpdGVyLmxpc3RlbihlKSx0aGlzLmRhdGFTb3VyY2VzLnB1c2goZSl9LmJpbmQodGhpcykpfSxpLnByb3RvdHlwZT1vLmNyZWF0ZUJhc2VTaW5rKHtjb25zdHJ1Y3RvcjppLF9vbkRhdGE6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLmRhdGFTb3VyY2VzW3RoaXMuc2VsZWN0ZWREYXRhU291cmNlSW5kZXhdO2lmKCF0fHwhdC5vbkRhdGEpdGhyb3cgbmV3IEVycm9yKFwiRGF0YVNvdXJjZSBpcyBub3QgZXhpc3Rpbmcgb3IgaGFzIG5vIG9uRGF0YSBmdW5jdGlvbiBkZWZpbmVkXCIpO3ZhciBlPXRoaXMuZGVxdWV1ZSgpO2UmJnQub25EYXRhKGUuZGF0YSl9LGdldE1lZGlhU291cmNlVXJsOmZ1bmN0aW9uKCl7cmV0dXJuIFVSTC5jcmVhdGVPYmplY3RVUkwodGhpcy5tZWRpYVNvdXJjZSl9fSl9LGZ1bmN0aW9uKHQsZSl7dmFyIG47dC5leHBvcnRzPW49e2hhdmVHbG9iYWxXaW5kb3c6ZnVuY3Rpb24oKXtyZXR1cm5cInVuZGVmaW5lZFwiIT10eXBlb2Ygd2luZG93fSxoYXZlTWVkaWFTb3VyY2VFeHRlbnNpb25zOmZ1bmN0aW9uKCl7cmV0dXJuIG4uaGF2ZUdsb2JhbFdpbmRvdygpJiZ3aW5kb3cuTWVkaWFTb3VyY2V9LGhhdmVNZWRpYVNvdXJjZVN1cHBvcnRNaW1lVHlwZTpmdW5jdGlvbih0KXtyZXR1cm4gbi5oYXZlTWVkaWFTb3VyY2VFeHRlbnNpb25zKCkmJndpbmRvdy5NZWRpYVNvdXJjZS5pc1R5cGVTdXBwb3J0ZWQodCl9fX0sZnVuY3Rpb24odCxlKXt2YXIgbj1mdW5jdGlvbigpe2Z1bmN0aW9uIHQodCxlKXt0aGlzLm1lZGlhU291cmNlPXQsdGhpcy5kYXRhU291cmNlPWUsdGhpcy5kYXRhU291cmNlLm9uRGF0YT10aGlzLnB1c2hEYXRhLmJpbmQodGhpcyksdGhpcy51cGRhdGVFbmFibGVkPSExLHRoaXMuYnVmZmVyPVtdLHRoaXMuc291cmNlQnVmZmVyPW51bGwsdGhpcy5zb3VyY2VCdWZmZXJVcGRhdGVkQm91bmQ9bnVsbH1yZXR1cm4gdC5wcm90b3R5cGUuYWxsb3dXcml0aW5nPWZ1bmN0aW9uKCl7dGhpcy51cGRhdGVFbmFibGVkPSEwLHRoaXMudXBkYXRlKCl9LHQucHJvdG90eXBlLnB1c2hEYXRhPWZ1bmN0aW9uKHQpe3RoaXMuYnVmZmVyLnB1c2godCksdGhpcy51cGRhdGUoKX0sdC5wcm90b3R5cGUudXBkYXRlPWZ1bmN0aW9uKCl7aWYodGhpcy51cGRhdGVFbmFibGVkJiYwIT09dGhpcy5idWZmZXIubGVuZ3RoKXt0aGlzLnNvdXJjZUJ1ZmZlcnx8KHRoaXMuc291cmNlQnVmZmVyPXRoaXMubWVkaWFTb3VyY2UuYWRkU291cmNlQnVmZmVyKHRoaXMuZGF0YVNvdXJjZS5taW1lVHlwZSksdGhpcy5zb3VyY2VCdWZmZXJVcGRhdGVkQm91bmQ9dGhpcy5fc291cmNlQnVmZmVyVXBkYXRlZC5iaW5kKHRoaXMpLHRoaXMuc291cmNlQnVmZmVyLmFkZEV2ZW50TGlzdGVuZXIoXCJ1cGRhdGVcIix0aGlzLnNvdXJjZUJ1ZmZlclVwZGF0ZWRCb3VuZCkpLHRoaXMudXBkYXRlRW5hYmxlZD0hMTt2YXIgdD10aGlzLmJ1ZmZlci5zaGlmdCgpO2lmKG51bGw9PT10KXJldHVybiB2b2lkIHRoaXMuc291cmNlQnVmZmVyLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJ1cGRhdGVcIix0aGlzLnNvdXJjZUJ1ZmZlclVwZGF0ZWRCb3VuZCk7dC50aW1lc3RhbXAmJih0aGlzLnNvdXJjZUJ1ZmZlci50aW1lc3RhbXBPZmZzZXQ9dC50aW1lc3RhbXAvMWU5KSx0aGlzLnNvdXJjZUJ1ZmZlci5hcHBlbmRCdWZmZXIodCl9fSx0LnByb3RvdHlwZS5fc291cmNlQnVmZmVyVXBkYXRlZD1mdW5jdGlvbih0KXt0aGlzLnVwZGF0ZUVuYWJsZWQ9ITAsdGhpcy51cGRhdGUoKX0sdC5wcm90b3R5cGUuZmluaXNoPWZ1bmN0aW9uKCl7dGhpcy5idWZmZXIucHVzaChudWxsKSx0aGlzLnVwZGF0ZSgpfSx0fSgpLGk9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KHQpe3RoaXMuYnVmZmVyV3JpdGVycz1bXSx0aGlzLm1lZGlhU291cmNlPXQsdGhpcy5tZWRpYVNvdXJjZU9wZW5lZD0hMSx0aGlzLm1lZGlhU291cmNlLmFkZEV2ZW50TGlzdGVuZXIoXCJzb3VyY2VvcGVuXCIsZnVuY3Rpb24odCl7dGhpcy5tZWRpYVNvdXJjZU9wZW5lZD0hMCx0aGlzLmJ1ZmZlcldyaXRlcnMuZm9yRWFjaChmdW5jdGlvbih0KXt0LmFsbG93V3JpdGluZygpfSl9LmJpbmQodGhpcykpLHRoaXMubWVkaWFTb3VyY2UuYWRkRXZlbnRMaXN0ZW5lcihcInNvdXJjZWVuZFwiLGZ1bmN0aW9uKHQpe3RoaXMubWVkaWFTb3VyY2VPcGVuZWQ9ITF9LmJpbmQodGhpcykpfXJldHVybiB0LnByb3RvdHlwZS5saXN0ZW49ZnVuY3Rpb24odCl7dmFyIGU9bmV3IG4odGhpcy5tZWRpYVNvdXJjZSx0KTt0aGlzLmJ1ZmZlcldyaXRlcnMucHVzaChlKSx0aGlzLm1lZGlhU291cmNlT3BlbmVkJiZlLmFsbG93V3JpdGluZygpfSx0fSgpO3QuZXhwb3J0cz1pfSxmdW5jdGlvbih0LGUsbil7dmFyIGkscixvPW4oNjkpO3I9ZnVuY3Rpb24odCl7by5CYXNlUHVzaFNyYy5wcm90b3R5cGUuY29uc3RydWN0b3IuY2FsbCh0aGlzKTt2YXIgZT10aGlzLnJlcT1uZXcgWE1MSHR0cFJlcXVlc3Q7ZS5vcGVuKFwiR0VUXCIsdCwhMCksZS5yZXNwb25zZVR5cGU9XCJhcnJheWJ1ZmZlclwiLGUub25sb2FkPWZ1bmN0aW9uKHQpe3RoaXMuZW5xdWV1ZShuZXcgby5UcmFuc2ZlcihuZXcgVWludDhBcnJheShlLnJlc3BvbnNlKSxcImJpbmFyeVwiKSksdGhpcy5lbnF1ZXVlKG5ldyBvLlRyYW5zZmVyKG51bGwsXCJiaW5hcnlcIikpfS5iaW5kKHRoaXMpLGUuc2VuZCgpfSxyLnByb3RvdHlwZT1vLmNyZWF0ZUJhc2VQdXNoU3JjKHtjb25zdHJ1Y3RvcjpyfSksdC5leHBvcnRzPWk9e1NyYzpyfX0sZnVuY3Rpb24odCxlLG4pe3ZhciBpLHIsbyxzPW4oNjkpLGE9bigxMjYpO24oNzYpLHI9ZnVuY3Rpb24odCxlKXtzLnByb3RvdHlwZS5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMpO3ZhciBuPWEuY3JlYXRlUmVhZFN0cmVhbSh0LGUpO3RoaXMub24oXCJlbmRcIixmdW5jdGlvbigpe24uY2xvc2UoKX0pLHRoaXMuYWRkT3V0cHV0KG4pfSxyLnByb3RvdHlwZT1zLmNyZWF0ZSh7Y29uc3RydWN0b3I6cn0pLG89ZnVuY3Rpb24odCxlKXtzLnByb3RvdHlwZS5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMpO3ZhciBuPWEuY3JlYXRlV3JpdGVTdHJlYW0odCxlKTt0aGlzLm9uKFwiZmluaXNoXCIsZnVuY3Rpb24oKXtuLmNsb3NlKCl9KSx0aGlzLmFkZElucHV0KG4pfSxvLnByb3RvdHlwZT1zLmNyZWF0ZSh7Y29uc3RydWN0b3I6b30pLHQuZXhwb3J0cz1pPXtTcmM6cixTaW5rOm99fSxmdW5jdGlvbih0LGUsbil7dmFyIGk9bigxMjIpO3QuZXhwb3J0cz1pLmhhdmVHbG9iYWxXaW5kb3coKT9uZXcobigxMjcpKTpuKCFmdW5jdGlvbigpe3ZhciB0PW5ldyBFcnJvcignQ2Fubm90IGZpbmQgbW9kdWxlIFwiZnNcIicpO3Rocm93IHQuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIix0fSgpKX0sZnVuY3Rpb24odCxlLG4pe3ZhciBpO2k9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KCl7cmV0dXJuITF9ZnVuY3Rpb24gZSh0KXtyZXR1cm4hKCEodCYmdC5kYXRhIGluc3RhbmNlb2YgT2JqZWN0KXx8bih0KSl9ZnVuY3Rpb24gbih0KXtyZXR1cm4hISh0JiZ0LmRhdGEgaW5zdGFuY2VvZiBBcnJheUJ1ZmZlcil9ZnVuY3Rpb24gaSh0LG4pe3ZhciBpLHI9dC5sZW5ndGgsbz1uO2ZvcihpPTA7cj5pOysraSl7aWYoIWUobykpdGhyb3cgbmV3IEVycm9yKFwiRU5PRU5UXCIpO289by5kYXRhW3RbaV1dfXJldHVybiBvfVN0cmluZy5wcm90b3R5cGUudHJpbXx8IWZ1bmN0aW9uKCl7dmFyIHQ9L15bXFxzXFx1RkVGRlxceEEwXSt8W1xcc1xcdUZFRkZcXHhBMF0rJC9nO1N0cmluZy5wcm90b3R5cGUudHJpbT1mdW5jdGlvbigpe3JldHVybiB0aGlzLnJlcGxhY2UodCxcIlwiKX19KCk7dmFyIHI9ZnVuY3Rpb24oKXt2YXIgdD1EYXRlLm5vdygpO3RoaXMucm9vdD17bXRpbWU6dCxjdGltZTp0LGF0aW1lOnQsZGF0YTp7fX19O3JldHVybiByLnByb3RvdHlwZS5qb2luPWZ1bmN0aW9uKCl7dmFyIHQ9W10sZT1hcmd1bWVudHN8fFtdO3JldHVybiB0PXRoaXMucGFyc2UoQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoZSkuam9pbihcIi9cIikpLChcIi9cIj09PWVbMF1bMF0/XCIvXCI6XCJcIikrdC5qb2luKFwiL1wiKX0sci5wcm90b3R5cGUucGFyc2U9ZnVuY3Rpb24odCl7dmFyIGU9W107cmV0dXJuIHQ9dHx8XCIvXCIsdC5zcGxpdCgvXFwvKy8pLmZvckVhY2goZnVuY3Rpb24odCl7dD10LnRyaW0oKSx0Lmxlbmd0aCYmXCIuXCIhPT10JiYoXCIuLlwiPT09dD9lLnBvcCgpOmUucHVzaCh0KSl9KSxlfSxyLnByb3RvdHlwZS5maWxlU2l6ZVNJPWZ1bmN0aW9uKHQsZSxuLGkscil7cmV0dXJuKGU9TWF0aCxuPWUubG9nLGk9MWUzLHI9bih0KS9uKGkpfDAsdC9lLnBvdyhpLHIpKS50b0ZpeGVkKHI/MjowKStcIiBcIisocj9cImtNR1RQRVpZXCJbLS1yXStcIkJcIjpcIkJ5dGVzXCIpfSxyLnByb3RvdHlwZS5maWxlU2l6ZUlFQz1mdW5jdGlvbih0LGUsbixpLHIpe3JldHVybihlPU1hdGgsbj1lLmxvZyxpPTEwMjQscj1uKHQpL24oaSl8MCx0L2UucG93KGkscikpLnRvRml4ZWQocj8yOjApK1wiIFwiKyhyP1wiS01HVFBFWllcIlstLXJdK1wiaUJcIjpcIkJ5dGVzXCIpfSxyLnByb3RvdHlwZS5zdGF0U3luYz1mdW5jdGlvbihuKXt2YXIgcj10aGlzLnBhcnNlKG4pLG89aShyLHRoaXMucm9vdCkscz1lKG8pO2lmKCFvfHwhby5kYXRhKXRocm93IG5ldyBFcnJvcihcIkVOT0VOVFwiKTtyZXR1cm57c2l6ZTpzP09iamVjdC5rZXlzKG8uZGF0YSkubGVuZ3RoOm8uZGF0YS5ieXRlTGVuZ3RoLGN0aW1lOm5ldyBEYXRlKG8uY3RpbWUpLG10aW1lOm5ldyBEYXRlKG8ubXRpbWUpLGF0aW1lOm5ldyBEYXRlKG8uYXRpbWUpLGlzRmlsZTpmdW5jdGlvbigpe3JldHVybiFzfSxpc0RpcmVjdG9yeTpmdW5jdGlvbigpe3JldHVybiBzfSxpc0Jsb2NrRGV2aWNlOnQsaXNDaGFyYWN0ZXJEZXZpY2U6dCxpc1N5bWJvbGljTGluazp0LGlzRklGTzp0LGlzU29ja2V0OnR9fSxyLnByb3RvdHlwZS5leGlzdHNTeW5jPWZ1bmN0aW9uKHQpe3ZhciBuLGk9dGhpcy5wYXJzZSh0KSxyPWkubGVuZ3RoLG89dGhpcy5yb290O2ZvcihuPTA7cj5uOysrbil7aWYoIWUobykpcmV0dXJuITE7bz1vLmRhdGFbaVtuXV19cmV0dXJuISFvfSxyLnByb3RvdHlwZS5ta2RpclN5bmM9ZnVuY3Rpb24odCl7dmFyIG49dGhpcy5wYXJzZSh0KSxyPWkobi5zbGljZSgwLG4ubGVuZ3RoLTEpLHRoaXMucm9vdCksbz1EYXRlLm5vdygpO2lmKCFuLmxlbmd0aHx8IWUocikpdGhyb3cgbmV3IEVycm9yKFwiRU5PRElSXCIpO3IuZGF0YVtuW24ubGVuZ3RoLTFdXT17ZGF0YTp7fSxjdGltZTpvLG10aW1lOm8sYXRpbWU6b30sci5tdGltZT1vfSxyLnByb3RvdHlwZS5ta2RpcnBTeW5jPWZ1bmN0aW9uKHQpe3ZhciByLG8scyxhPXRoaXMucGFyc2UodCksdT1hLmxlbmd0aDtpZighYS5sZW5ndGgpdGhyb3cgbmV3IEVycm9yKFwiRU5PRElSXCIpO2ZvcihvPTA7dT5vOysrbyl7aWYocj1hLnNsaWNlKDAsbysxKSxzPWkocix0aGlzLnJvb3QpLG4ocykpdGhyb3cgbmV3IEVycm9yKFwiRU5PRElSXCIpO2Uocyl8fHRoaXMubWtkaXJTeW5jKHIuam9pbihcIi9cIikpfX0sci5wcm90b3R5cGUucmVhZGRpclN5bmM9ZnVuY3Rpb24odCl7dmFyIG49dGhpcy5wYXJzZSh0KSxyPWkobix0aGlzLnJvb3QpO2lmKCFlKHIpKXRocm93IG5ldyBFcnJvcihcIkVOT0RJUlwiKTtyZXR1cm4gci5hdGltZT1EYXRlLm5vdygpLE9iamVjdC5rZXlzKHIuZGF0YSl9LHIucHJvdG90eXBlLnJtZGlyU3luYz1mdW5jdGlvbih0KXt2YXIgbj10aGlzLnBhcnNlKHQpLHI9aShuLHRoaXMucm9vdCk7aWYoZGlybmFtZT1uLnBvcCgpLHBhcmVudERpcj1pKG4sdGhpcy5yb290KSwhZShyKSl0aHJvdyBuZXcgRXJyb3IoXCJFTk9ESVJcIik7aWYoT2JqZWN0LmtleXMoci5kYXRhKS5sZW5ndGgpdGhyb3cgbmV3IEVycm9yKFwiRU5PVEVNUFRZXCIpO2RlbGV0ZSBwYXJlbnREaXIuZGF0YVtkaXJuYW1lXSxwYXJlbnREaXIubXRpbWU9RGF0ZS5ub3coKX0sci5wcm90b3R5cGUucm1yZlN5bmM9ZnVuY3Rpb24odCl7dmFyIG49dGhpcy5wYXJzZSh0KSxyPW4ucG9wKCksbz1pKG4sdGhpcy5yb290KTtpZighZShvKSl0aHJvdyBuZXcgRXJyb3IoXCJFTk9ESVJcIik7cj9kZWxldGUgby5kYXRhW3JdOm8uZGF0YT17fSxvLm10aW1lPURhdGUubm93KCl9LHIucHJvdG90eXBlLndyaXRlRmlsZVN5bmM9ZnVuY3Rpb24odCxuLHIpe3ZhciBvLHMsYT10aGlzLnBhcnNlKHQpLHU9YS5wb3AoKSxoPXRoaXMuZXhpc3RzU3luYyh0KSxjPWkoYSx0aGlzLnJvb3QpO2lmKCFlKGMpKXRocm93IG5ldyBFcnJvcihcIkVOT0RJUlwiKTtpZighdSl0aHJvdyBuZXcgRXJyb3IoXCJFSU5WQUxJRFBBVEhcIik7aWYocj1yfHx7ZW5jb2Rpbmc6ITB9LFwic3RyaW5nXCI9PXR5cGVvZiBuKXtvPW5ldyBBcnJheUJ1ZmZlcigyKm4ubGVuZ3RoKTtmb3IodmFyIGw9bmV3IFVpbnQxNkFycmF5KG8pLGY9MCxkPW4ubGVuZ3RoO2Q+ZjsrK2YpbFtmXT1uLmNoYXJDb2RlQXQoZil9ZWxzZSBvPW47cz1EYXRlLm5vdygpLGMuZGF0YVt1XT17ZGF0YTpvLGN0aW1lOnMsbXRpbWU6cyxhdGltZTpzfSxofHwoYy5tdGltZT1zKSxjLmF0aW1lPXN9LHIucHJvdG90eXBlLnJlYWRGaWxlU3luYz1mdW5jdGlvbih0LGUpe3ZhciByPXRoaXMucGFyc2UodCksbz1pKHIsdGhpcy5yb290KSxlPWV8fHtlbmNvZGluZzohMX07aWYoIW4obykpdGhyb3cgbmV3IEVycm9yKFwiRU5PRU5UXCIpO3JldHVybiBvLmF0aW1lPURhdGUubm93KCksZS5lbmNvZGluZz9TdHJpbmcuZnJvbUNoYXJDb2RlLmFwcGx5KG51bGwsbmV3IFVpbnQxNkFycmF5KG8uZGF0YSkpOm8uZGF0YX0sci5wcm90b3R5cGUucmVuYW1lU3luYz1mdW5jdGlvbih0LG4pe3ZhciByPXRoaXMucGFyc2UodCksbz1pKHIsdGhpcy5yb290KSxzPWkoci5zbGljZSgwLHIubGVuZ3RoLTEpLHRoaXMucm9vdCksYT1yW3IubGVuZ3RoLTFdLHU9dGhpcy5wYXJzZShuKSxoPWkodSx0aGlzLnJvb3QpLGM9aSh1LnNsaWNlKDAsdS5sZW5ndGgtMSksdGhpcy5yb290KSxsPXVbdS5sZW5ndGgtMV0sZj1EYXRlLm5vdygpO2lmKCFyLmxlbmd0aHx8IXUubGVuZ3RoKXRocm93IG5ldyBFcnJvcihcIkVOT0VOVFwiKTtpZighZShzfHwhZShjKSkpdGhyb3cgbmV3IEVycm9yKFwiRU5PRElSXCIpO2lmKGgpdGhyb3cgbmV3IEVycm9yKFwiRUVYSVNUU1wiKTtjLmRhdGFbbF09aD1vLGguY3RpbWU9ZixjLm10aW1lPWYsZGVsZXRlIHMuZGF0YVthXSxzLm10aW1lPWZ9LFtcInN0YXRcIixcImV4aXN0c1wiLFwicmVhZGRpclwiLFwibWtkaXJwXCIsXCJta2RpclwiLFwicm1kaXJcIixcInJtcmZcIixcInVubGlua1wiXS5mb3JFYWNoKGZ1bmN0aW9uKHQpe3IucHJvdG90eXBlW3RdPWZ1bmN0aW9uKGUsbil7dHJ5e3ZhciBpPXRoaXNbdCtcIlN5bmNcIl0oZSl9Y2F0Y2gocil7cmV0dXJuIG4ocil9cmV0dXJuIG4obnVsbCxpKX19KSxbXCJ3cml0ZUZpbGVcIixcInJlYWRGaWxlXCJdLmZvckVhY2goZnVuY3Rpb24odCl7ci5wcm90b3R5cGVbdF09ZnVuY3Rpb24oZSxuLGkpe2l8fChpPW4sbj12b2lkIDApO3RyeXt2YXIgcj10aGlzW3QrXCJTeW5jXCJdKGUsbil9Y2F0Y2gobyl7cmV0dXJuIGkobyl9cmV0dXJuIGkobnVsbCxyKX19KSxbXCJyZW5hbWVcIl0uZm9yRWFjaChmdW5jdGlvbih0KXtyLnByb3RvdHlwZVt0XT1mdW5jdGlvbihlLG4saSl7dHJ5e3ZhciByPXRoaXNbdCtcIlN5bmNcIl0oZSxuKX1jYXRjaChvKXtyZXR1cm4gaShvKX1yZXR1cm4gaShudWxsLHIpfX0pLHJ9LmNhbGwoZSxuLGUsdCksISh2b2lkIDAhPT1pJiYodC5leHBvcnRzPWkpKX0sZnVuY3Rpb24odCxlKXt2YXIgbj17SFRUUDpcImh0dHBcIixSVE1QOlwicnRtcFwiLEhMUzpcImhsc1wifTt0LmV4cG9ydHM9bn0sZnVuY3Rpb24odCxlKXt0LmV4cG9ydHM9e0FBQzpcImF1ZGlvL2FhY1wiLE0zVTg6XCJhcHBsaWNhdGlvbi94LW1wZWdVUkxcIixITFM6XCJhcHBsaWNhdGlvbi92bmQuYXBwbGUubXBlZ3VybFwiLE1QNEE6XCJhdWRpby9tcDRcIixNUDM6XCJhdWRpby9tcGVnXCIsT0dHOlwiYXVkaW8vb2dnXCIsV0FWOlwiYXVkaW8vd2F2XCIsV0VCTUE6XCJhdWRpby93ZWJtXCIsZ2V0VHlwZUJ5RXh0ZW5zaW9uOmZ1bmN0aW9uKHQpe3ZhciBlPXttcDM6dGhpcy5NUDMsYWFjOnRoaXMuQUFDLG1wNDp0aGlzLk1QNEEsbXA0YTp0aGlzLk1QNEEsb2dnOnRoaXMuT0dHLG9nYTp0aGlzLk9HRyxvcHVzOnRoaXMuT0dHLHdlYm06dGhpcy5XRUJNLHdhdjp0aGlzLldBVixtM3U4OnRoaXMuTTNVOH07cmV0dXJuIGVbdF18fG51bGx9fX0sZnVuY3Rpb24odCxlLG4saSxyLG8pe2Z1bmN0aW9uIHModCxlLG4pe2Zvcih2YXIgaT0tMSxyPWgoZSksbz1yLmxlbmd0aDsrK2k8bzspe3ZhciBzPXJbaV0sYT10W3NdLHU9bihhLGVbc10scyx0LGUpOyh1PT09dT91PT09YTphIT09YSkmJih2b2lkIDAhPT1hfHxzIGluIHQpfHwodFtzXT11KX1yZXR1cm4gdH12YXIgYT1uKGkpLHU9bihyKSxoPW4obyksYz11KGZ1bmN0aW9uKHQsZSxuKXtyZXR1cm4gbj9zKHQsZSxuKTphKHQsZSl9KTt0LmV4cG9ydHM9Y30sZnVuY3Rpb24odCxlLG4saSxyKXtmdW5jdGlvbiBvKHQsZSl7cmV0dXJuIG51bGw9PWU/dDpzKGUsYShlKSx0KX12YXIgcz1uKGkpLGE9bihyKTt0LmV4cG9ydHM9b30sZnVuY3Rpb24odCxlLG4saSxyLG8pe2Z1bmN0aW9uIHModCl7cmV0dXJuIGZ1bmN0aW9uKGUpe3JldHVybiBudWxsPT1lP3ZvaWQgMDplW3RdfX1mdW5jdGlvbiBhKHQpe3JldHVybiBudWxsIT10JiZoKFModCkpfWZ1bmN0aW9uIHUodCxlKXtyZXR1cm4gdD1cIm51bWJlclwiPT10eXBlb2YgdHx8Xy50ZXN0KHQpPyt0Oi0xLGU9bnVsbD09ZT9FOmUsdD4tMSYmdCUxPT0wJiZlPnR9ZnVuY3Rpb24gaCh0KXtyZXR1cm5cIm51bWJlclwiPT10eXBlb2YgdCYmdD4tMSYmdCUxPT0wJiZFPj10fWZ1bmN0aW9uIGModCl7Zm9yKHZhciBlPWYodCksbj1lLmxlbmd0aCxpPW4mJnQubGVuZ3RoLHI9ISFpJiZoKGkpJiYoZyh0KXx8cCh0KSksbz0tMSxzPVtdOysrbzxuOyl7dmFyIGE9ZVtvXTsociYmdShhLGkpfHx5LmNhbGwodCxhKSkmJnMucHVzaChhKX1yZXR1cm4gc31mdW5jdGlvbiBsKHQpe3ZhciBlPXR5cGVvZiB0O3JldHVybiEhdCYmKFwib2JqZWN0XCI9PWV8fFwiZnVuY3Rpb25cIj09ZSl9ZnVuY3Rpb24gZih0KXtpZihudWxsPT10KXJldHVybltdO2wodCl8fCh0PU9iamVjdCh0KSk7dmFyIGU9dC5sZW5ndGg7ZT1lJiZoKGUpJiYoZyh0KXx8cCh0KSkmJmV8fDA7Zm9yKHZhciBuPXQuY29uc3RydWN0b3IsaT0tMSxyPVwiZnVuY3Rpb25cIj09dHlwZW9mIG4mJm4ucHJvdG90eXBlPT09dCxvPUFycmF5KGUpLHM9ZT4wOysraTxlOylvW2ldPWkrXCJcIjtmb3IodmFyIGEgaW4gdClzJiZ1KGEsZSl8fFwiY29uc3RydWN0b3JcIj09YSYmKHJ8fCF5LmNhbGwodCxhKSl8fG8ucHVzaChhKTtyZXR1cm4gb312YXIgZD1uKGkpLHA9bihyKSxnPW4obyksXz0vXlxcZCskLyxtPU9iamVjdC5wcm90b3R5cGUseT1tLmhhc093blByb3BlcnR5LHY9ZChPYmplY3QsXCJrZXlzXCIpLEU9OTAwNzE5OTI1NDc0MDk5MSxTPXMoXCJsZW5ndGhcIiksQT12P2Z1bmN0aW9uKHQpe3ZhciBlPW51bGw9PXQ/dm9pZCAwOnQuY29uc3RydWN0b3I7cmV0dXJuXCJmdW5jdGlvblwiPT10eXBlb2YgZSYmZS5wcm90b3R5cGU9PT10fHxcImZ1bmN0aW9uXCIhPXR5cGVvZiB0JiZhKHQpP2ModCk6bCh0KT92KHQpOltdfTpjO3QuZXhwb3J0cz1BfSxmdW5jdGlvbih0LGUsbixpLHIsbyl7ZnVuY3Rpb24gcyh0KXtyZXR1cm4gaChmdW5jdGlvbihlLG4pe3ZhciBpPS0xLHI9bnVsbD09ZT8wOm4ubGVuZ3RoLG89cj4yP25bci0yXTp2b2lkIDAscz1yPjI/blsyXTp2b2lkIDAsaD1yPjE/bltyLTFdOnZvaWQgMDtmb3IoXCJmdW5jdGlvblwiPT10eXBlb2Ygbz8obz1hKG8saCw1KSxyLT0yKToobz1cImZ1bmN0aW9uXCI9PXR5cGVvZiBoP2g6dm9pZCAwLHItPW8/MTowKSxzJiZ1KG5bMF0sblsxXSxzKSYmKG89Mz5yP3ZvaWQgMDpvLHI9MSk7KytpPHI7KXt2YXIgYz1uW2ldO2MmJnQoZSxjLG8pfXJldHVybiBlfSl9dmFyIGE9bihpKSx1PW4ociksaD1uKG8pO3QuZXhwb3J0cz1zfSxmdW5jdGlvbih0LGUsbixpKXtmdW5jdGlvbiByKHQsZSl7cmV0dXJuIHAodCxlLGwpfWZ1bmN0aW9uIG8odCl7cmV0dXJuIGZ1bmN0aW9uKGUpe3JldHVybiBudWxsPT1lP3ZvaWQgMDplW3RdfX1mdW5jdGlvbiBzKHQsZSl7cmV0dXJuIGZ1bmN0aW9uKG4saSl7dmFyIHI9bj9nKG4pOjA7aWYoIXUocikpcmV0dXJuIHQobixpKTtmb3IodmFyIG89ZT9yOi0xLHM9aChuKTsoZT9vLS06KytvPHIpJiZpKHNbb10sbyxzKSE9PSExOyk7cmV0dXJuIG59fWZ1bmN0aW9uIGEodCl7cmV0dXJuIGZ1bmN0aW9uKGUsbixpKXtmb3IodmFyIHI9aChlKSxvPWkoZSkscz1vLmxlbmd0aCxhPXQ/czotMTt0P2EtLTorK2E8czspe3ZhciB1PW9bYV07aWYobihyW3VdLHUscik9PT0hMSlicmVha31yZXR1cm4gZX19ZnVuY3Rpb24gdSh0KXtyZXR1cm5cIm51bWJlclwiPT10eXBlb2YgdCYmdD4tMSYmdCUxPT0wJiZmPj10fWZ1bmN0aW9uIGgodCl7cmV0dXJuIGModCk/dDpPYmplY3QodCl9ZnVuY3Rpb24gYyh0KXt2YXIgZT10eXBlb2YgdDtyZXR1cm4hIXQmJihcIm9iamVjdFwiPT1lfHxcImZ1bmN0aW9uXCI9PWUpfXZhciBsPW4oaSksZj05MDA3MTk5MjU0NzQwOTkxLGQ9cyhyKSxwPWEoKSxnPW8oXCJsZW5ndGhcIik7dC5leHBvcnRzPWR9XSkpfSxmdW5jdGlvbih0LGUsbil7dmFyIGk9bigyMikscj1mdW5jdGlvbih0LGUpe3ZhciBuPWV8fHt9LHI9bi5idWZmZXJMZW58fDQwOTYsbz1uLm51bUNoYW5uZWxzfHwyO3RoaXMuY29udGV4dD10LmNvbnRleHQsdGhpcy5ub2RlPSh0aGlzLmNvbnRleHQuY3JlYXRlU2NyaXB0UHJvY2Vzc29yfHx0aGlzLmNvbnRleHQuY3JlYXRlSmF2YVNjcmlwdE5vZGUpLmNhbGwodGhpcy5jb250ZXh0LHIsbyxvKTt2YXIgcz1uZXcgaTtzLnBvc3RNZXNzYWdlKHtjb21tYW5kOlwiaW5pdFwiLGNvbmZpZzp7c2FtcGxlUmF0ZTp0aGlzLmNvbnRleHQuc2FtcGxlUmF0ZSxudW1DaGFubmVsczpvfX0pO3ZhciBhLHU9ITE7dGhpcy5ub2RlLm9uYXVkaW9wcm9jZXNzPWZ1bmN0aW9uKHQpe2lmKHUpe2Zvcih2YXIgZT1bXSxuPTA7bz5uO24rKyllLnB1c2godC5pbnB1dEJ1ZmZlci5nZXRDaGFubmVsRGF0YShuKSk7cy5wb3N0TWVzc2FnZSh7Y29tbWFuZDpcInJlY29yZFwiLGJ1ZmZlcjplfSl9fSx0aGlzLmNvbmZpZ3VyZT1mdW5jdGlvbih0KXtmb3IodmFyIGUgaW4gdCl0Lmhhc093blByb3BlcnR5KGUpJiYobltlXT10W2VdKX0sdGhpcy5yZWNvcmQ9ZnVuY3Rpb24oKXt1PSEwfSx0aGlzLnN0b3A9ZnVuY3Rpb24oKXt1PSExfSx0aGlzLmNsZWFyPWZ1bmN0aW9uKCl7cy5wb3N0TWVzc2FnZSh7Y29tbWFuZDpcImNsZWFyXCJ9KX0sdGhpcy5nZXRCdWZmZXI9ZnVuY3Rpb24odCl7YT10fHxuLmNhbGxiYWNrLHMucG9zdE1lc3NhZ2Uoe2NvbW1hbmQ6XCJnZXRCdWZmZXJcIn0pfSx0aGlzLmV4cG9ydFdBVj1mdW5jdGlvbih0LGUpe2lmKGE9dHx8bi5jYWxsYmFjayxlPWV8fG4udHlwZXx8XCJhdWRpby93YXZcIiwhYSl0aHJvdyBuZXcgRXJyb3IoXCJDYWxsYmFjayBub3Qgc2V0XCIpO3MucG9zdE1lc3NhZ2Uoe2NvbW1hbmQ6XCJleHBvcnRXQVZcIix0eXBlOmV9KX0scy5vbm1lc3NhZ2U9ZnVuY3Rpb24odCl7dmFyIGU9dC5kYXRhO2EoZSl9LHQuY29ubmVjdCh0aGlzLm5vZGUpLHRoaXMubm9kZS5jb25uZWN0KHRoaXMuY29udGV4dC5kZXN0aW5hdGlvbil9O3IuZm9yY2VEb3dubG9hZD1mdW5jdGlvbih0LGUpe3ZhciBuPSh3aW5kb3cuVVJMfHx3aW5kb3cud2Via2l0VVJMKS5jcmVhdGVPYmplY3RVUkwodCksaT13aW5kb3cuZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImFcIik7aS5ocmVmPW4saS5kb3dubG9hZD1lfHxcIm91dHB1dC53YXZcIjt2YXIgcj1kb2N1bWVudC5jcmVhdGVFdmVudChcIkV2ZW50XCIpO3IuaW5pdEV2ZW50KFwiY2xpY2tcIiwhMCwhMCksaS5kaXNwYXRjaEV2ZW50KHIpfSx0LmV4cG9ydHM9cn0sZnVuY3Rpb24odCxlKXt0LmV4cG9ydHM9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZShpKXtpZihuW2ldKXJldHVybiBuW2ldLmV4cG9ydHM7dmFyIHI9bltpXT17ZXhwb3J0czp7fSxpZDppLGxvYWRlZDohMX07cmV0dXJuIHRbaV0uY2FsbChyLmV4cG9ydHMscixyLmV4cG9ydHMsZSksci5sb2FkZWQ9ITAsci5leHBvcnRzfXZhciBuPXt9O3JldHVybiBlLm09dCxlLmM9bixlLnA9XCJcIixlKDApfShbZnVuY3Rpb24odCxlLG4pe2Z1bmN0aW9uIGkoKXtyZXR1cm4gdGhpcy5faG9va3NQYXVzZS5ldmVyeShmdW5jdGlvbih0KXtyZXR1cm4gdC5jYWxsKCl9KX1mdW5jdGlvbiByKHQpe3ZhciBlPXQucmVzb3VyY2VfaWR8fHQuaWR8fHQuY2lkO2lmKCFlKXRocm93IG5ldyBFcnJvcihcIllvdXIgbW9kZWwgc2hvdWxkIGhhdmUgYSB1bmlxdWUgYGlkYCwgYGNpZGAgb3IgYHJlc291cmNlX2lkYCBwcm9wZXJ0eVwiKTtyZXR1cm4gZX1mdW5jdGlvbiBvKHQpe0M9dCx0JiYoeC5BdWRpb01hbmFnZXJTdGF0ZXM9dC5TdGF0ZXMpfWZ1bmN0aW9uIHMoKXt2YXIgdD1HKCk7cmV0dXJuIHAuY2FsbCh0aGlzLCEwKS5kb25lKGZ1bmN0aW9uKGUpe3QucmVzb2x2ZShlLnVybCl9KS5mYWlsKGZ1bmN0aW9uKCl7dC5yZWplY3QoKX0pLHQucHJvbWlzZSgpfWZ1bmN0aW9uIGEodCl7dmFyIGUsbj10aGlzLm9wdGlvbnM7cmV0dXJuIGU9e2lkOnRoaXMuZ2V0SWQoKSxzcmM6dC51cmwsZHVyYXRpb246JC5yZXN1bHQobi5kdXJhdGlvbiksdGl0bGU6dGhpcy5vcHRpb25zLnRpdGxlLG1pbWVUeXBlOnQubWltZVR5cGUsZm9yY2VTaW5nbGU6bi51c2VTaW5nbGVQbGF5ZXJ9LEMuY3JlYXRlQXVkaW9QbGF5ZXIoZSx7c3RyZWFtVXJsUHJvdmlkZXI6cy5iaW5kKHRoaXMpfSl9ZnVuY3Rpb24gdSh0LGUpe3ZhciBuPWU/XCJvblwiOlwib2ZmXCI7dFtuXShcInN0YXRlLWNoYW5nZVwiLEwsdGhpcylbbl0oXCJwb3NpdGlvbi1jaGFuZ2VcIixjLHRoaXMpW25dKFwibWV0YWRhdGFcIixoLHRoaXMpfWZ1bmN0aW9uIGgoKXt0aGlzLnRyaWdnZXIoWS5NRVRBREFUQSl9ZnVuY3Rpb24gYygpe3RoaXMuX3ByZXZQb3NpdGlvbiE9PXRoaXMuY3VycmVudFRpbWUoKSYmKHRoaXMudHJpZ2dlcihZLlRJTUUpLHRoaXMuX3ByZXZQb3NpdGlvbj10aGlzLmN1cnJlbnRUaW1lKCkpfWZ1bmN0aW9uIGwoKXt0aGlzLl9pbml0QXVkaW9EZWZlciYmKHRoaXMuX2luaXRBdWRpb0RlZmVyLnJlamVjdCgpLHRoaXMuX2luaXRBdWRpb0RlZmVyPW51bGwsdGhpcy5zdHJlYW1JbmZvPW51bGwpfWZ1bmN0aW9uIGYoKXtsLmNhbGwodGhpcyksdGhpcy5jb250cm9sbGVyJiYodGhpcy5fc3RvcmVkUG9zaXRpb249dGhpcy5jdXJyZW50VGltZSgpLHRoaXMuY29udHJvbGxlci5raWxsKCksdGhpcy5jb250cm9sbGVyPW51bGwsdGhpcy50cmlnZ2VyKFkuUkVTRVQpKX1mdW5jdGlvbiBkKCl7dGhpcy5fcmVnaXN0ZXJQbGF5cz0hMCx0aGlzLnBhdXNlKCksdGhpcy50cmlnZ2VyKFkuRklOSVNIKX1mdW5jdGlvbiBwKHQpe3ZhciBlPUcoKSxuPXRoaXMuc3RyZWFtSW5mbyYmIXQ7cmV0dXJuIG4/ZS5yZXNvbHZlKHRoaXMuc3RyZWFtSW5mbyk6Zy5jYWxsKHRoaXMpLmRvbmUoZnVuY3Rpb24odCl7dmFyIG49cS5jaG9vc2VQcmVmZXJyZWRTdHJlYW0odCx0aGlzLm9wdGlvbnMpO24/ZS5yZXNvbHZlKG4pOih0aGlzLnRyaWdnZXIoWS5OT19QUk9UT0NPTCksRi53YXJuKFwiKCVzKSBDb3VsZCBub3QgbWF0Y2ggYSBwcm90b2NvbCBvZiBnaXZlbiBtZWRpYSBkZXNjcmlwdG9yIHRvIG9uZSBvZiB0aGUgc3VwcG9ydGVkIHByb3RvY29scyAoJXMpLCBhYm9ydGluZyBhdHRlbXB0IHRvIHBsYXkuXCIsdGhpcy5nZXRJZCgpLHRoaXMub3B0aW9ucy5wcm90b2NvbHMpLGUucmVqZWN0KCkpfS5iaW5kKHRoaXMpKS5mYWlsKGZ1bmN0aW9uKHQpe0Yud2FybihcIiglcykgU3RyZWFtIHJlcXVlc3QgZmFpbGVkIHdpdGggc3RhdHVzOiAlZFwiLHRoaXMuZ2V0SWQoKSx0LnN0YXR1cyksXy5jYWxsKHRoaXMsdCksbS5jYWxsKHRoaXMsdCksZS5yZWplY3QoKX0uYmluZCh0aGlzKSksZS5wcm9taXNlKCl9ZnVuY3Rpb24gZygpe2lmKHRoaXMub3B0aW9ucy5zdHJlYW1VcmxzJiYhdGhpcy5fdXNlZFByZWZldGNoVXJscyl7dmFyIHQsZT1HKCk7cmV0dXJuIHRoaXMuX3VzZWRQcmVmZXRjaFVybHM9ITAsdD0kLnJlc3VsdCh0aGlzLm9wdGlvbnMuc3RyZWFtVXJscyksZS5yZXNvbHZlKHQpLGUucHJvbWlzZSgpfXJldHVybiB0aGlzLmFqYXgoe3R5cGU6XCJHRVRcIix1cmw6JC5yZXN1bHQodGhpcy5vcHRpb25zLnN0cmVhbVVybHNFbmRwb2ludCksZGF0YVR5cGU6XCJqc29uXCIsYXN5bmM6dGhpcy5vcHRpb25zLmFzeW5jRmV0Y2gsdGltZW91dDp0aGlzLm9wdGlvbnMuYXN5bmNGZXRjaD9udDpldH0pfWZ1bmN0aW9uIF8odCl7dmFyIGU9dC5zdGF0dXM+PTQwMCYmLTEhPT0odC5yZXNwb25zZVRleHR8fFwiXCIpLmluZGV4T2YoXCJnZW9fYmxvY2tlZFwiKTtlJiZ0aGlzLnRyaWdnZXIoWS5HRU9fQkxPQ0tFRCl9ZnVuY3Rpb24gbSh0KXswPT09dC5zdGF0dXMmJnRoaXMudHJpZ2dlcihZLk5PX0NPTk5FQ1RJT04pfWZ1bmN0aW9uIHkoKXtyZXR1cm4gdGhpcy5jb250cm9sbGVyJiZ0aGlzLmNvbnRyb2xsZXIuZ2V0Q2FwYWJpbGl0aWVzJiZ0aGlzLmNvbnRyb2xsZXIuZ2V0Q2FwYWJpbGl0aWVzKCk/dGhpcy5jb250cm9sbGVyLmdldENhcGFiaWxpdGllcygpLm5lZWRzVXJsUmVmcmVzaDohMH1mdW5jdGlvbiB2KHQpe2lmKCF5LmNhbGwodGhpcykpcmV0dXJuITA7dmFyIGU9dGhpcy5faW5pdEF1ZGlvRGVmZXImJnRoaXMuX2luaXRBdWRpb0RlZmVyLnN0YXRlKCksbj1xLnN0cmVhbVZhbGlkRm9yUGxheWluZ0Zyb20odGhpcy5zdHJlYW1JbmZvLHQpO3JldHVybiB0aGlzLmNvbnRyb2xsZXImJnRoaXMuY29udHJvbGxlci5oYXNTdHJlYW1VcmxQcm92aWRlciYmdGhpcy5jb250cm9sbGVyLmhhc1N0cmVhbVVybFByb3ZpZGVyKCk/ITA6ZSYmKFwicGVuZGluZ1wiPT09ZXx8XCJyZXNvbHZlZFwiPT09ZSYmbil9ZnVuY3Rpb24gRSh0KXt0JiYhdGhpcy5fYnVmZmVyaW5nVGltZW91dD90aGlzLl9idWZmZXJpbmdUaW1lb3V0PXdpbmRvdy5zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7dGhpcy5faXNCdWZmZXJpbmc9ITAsdGhpcy50cmlnZ2VyKFkuQlVGRkVSUklOR19TVEFSVCl9LmJpbmQodGhpcyksaXQpOnR8fCh0aGlzLl9idWZmZXJpbmdUaW1lb3V0JiYod2luZG93LmNsZWFyVGltZW91dCh0aGlzLl9idWZmZXJpbmdUaW1lb3V0KSx0aGlzLl9idWZmZXJpbmdUaW1lb3V0PW51bGwpLHRoaXMuX2lzQnVmZmVyaW5nJiYodGhpcy5faXNCdWZmZXJpbmc9ITEsdGhpcy50cmlnZ2VyKFkuQlVGRkVSUklOR19FTkQpKSl9ZnVuY3Rpb24gUygpe3RoaXMub2ZmKFkuVElNRSx0aGlzLnNlZWtUaW1lRXZlbnRIYW5kbGVyKSx0aGlzLnRyaWdnZXIoWS5TRUVLRUQpLHRoaXMuc2Vla1RpbWVFdmVudEhhbmRsZXI9bnVsbH1mdW5jdGlvbiBBKCl7dGhpcy5fZXJyb3JSZWNvdmVyeUZsYWdzUmVzZXRUaW1lb3V0PXdpbmRvdy5zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7dGhpcy5fZXJyb3JSZWNvdmVyeVRpbWU9bnVsbCx0aGlzLl9lcnJvclJlY292ZXJ5Q291bnRzPTB9LmJpbmQodGhpcyksYXQpfWZ1bmN0aW9uIHcoKXt0aGlzLl9lcnJvclJlY292ZXJ5RmxhZ3NSZXNldFRpbWVvdXQmJndpbmRvdy5jbGVhclRpbWVvdXQodGhpcy5fZXJyb3JSZWNvdmVyeUZsYWdzUmVzZXRUaW1lb3V0KX1mdW5jdGlvbiBUKCl7dmFyIHQ9dGhpcy5pc1BsYXlpbmcoKSxlPURhdGUubm93KCk7cmV0dXJuIHcuY2FsbCh0aGlzKSx0aGlzLl9lcnJvclJlY292ZXJ5VGltZSYmdGhpcy5fZXJyb3JSZWNvdmVyeVRpbWUrb3Q+ZSYmdGhpcy5fZXJyb3JSZWNvdmVyeUNvdW50cz5zdD92b2lkIHRoaXMudHJpZ2dlcihZLkFVRElPX0VSUk9SLHRoaXMpOih0aGlzLl9lcnJvclJlY292ZXJ5VGltZT1EYXRlLm5vdygpLHRoaXMuX2Vycm9yUmVjb3ZlcnlDb3VudHMrKyxmLmNhbGwodGhpcyksdm9pZCh0JiZ0aGlzLnBsYXkoe3NlZWs6dGhpcy5jdXJyZW50VGltZSgpLHVzZXJJbml0aWF0ZWQ6ITF9KSkpfWZ1bmN0aW9uIGIodCl7dGhpcy5sb2dBdWRpb0Vycm9yKHtlcnJvcl9jb2RlOnQscHJvdG9jb2w6dGhpcy5zdHJlYW1JbmZvP3RoaXMuc3RyZWFtSW5mby5wcm90b2NvbDp2b2lkIDAscGxheWVyX3R5cGU6dGhpcy5jb250cm9sbGVyP3RoaXMuY29udHJvbGxlci5nZXRUeXBlKCk6dm9pZCAwLGhvc3Q6dGhpcy5zdHJlYW1JbmZvP1guZ2V0VXJsSG9zdCh0aGlzLnN0cmVhbUluZm8udXJsKTp2b2lkIDAsdXJsOnRoaXMuc3RyZWFtSW5mbz90aGlzLnN0cmVhbUluZm8udXJsOnZvaWQgMH0pfWZ1bmN0aW9uIFAoKXt2YXIgdCxlPUMuRXJyb3JzO2lmKCF0aGlzLmNvbnRyb2xsZXIpcmV0dXJuIEYuZXJyb3IoXCIoJXMpIENvbnRyb2xsZXIgaXMgbnVsbCwgYWJvcnRpbmcgZXJyb3IgaGFuZGxlci5cIix0aGlzLmdldElkKCksdGhpcyksYi5jYWxsKHRoaXMsbnVsbCksdm9pZCBULmNhbGwodGhpcyk7c3dpdGNoKHQ9dGhpcy5jb250cm9sbGVyJiZ0aGlzLmNvbnRyb2xsZXIuZ2V0RXJyb3JJRCgpLEYuZXJyb3IoXCIoJXMpICVzXCIsdGhpcy5nZXRJZCgpLHRoaXMuY29udHJvbGxlci5nZXRFcnJvck1lc3NhZ2U/dGhpcy5jb250cm9sbGVyLmdldEVycm9yTWVzc2FnZSgpOlwiQ29udHJvbGxlciBkb2VzIG5vdCBwcm92aWRlIGdldEVycm9yTWVzc2FnZSgpXCIpLEQodCxcIk1TRVwiLFwiR0VORVJJQ1wiLFwiSFRNTDVfQVVESU9fREVDT0RFXCIsXCJIVE1MNV9BVURJT19TUkNfTk9UX1NVUFBPUlRFRFwiLFwiRkxBU0hfUFJPWFlcIixcIkZMQVNIX1JUTVBfQ09OTkVDVF9GQUlMRURcIixcIkZMQVNIX1JUTVBfQ0FOTk9UX1BMQVlfU1RSRUFNXCIpJiZiLmNhbGwodGhpcyx0KSx0KXtjYXNlIGUuRkxBU0hfUFJPWFlfQ0FOVF9MT0FEX0ZMQVNIOnRoaXMudHJpZ2dlcihZLkZMQVNIX05PVF9MT0FERUQpO2JyZWFrO2Nhc2UgZS5GTEFTSF9QUk9YWV9GTEFTSF9CTE9DS0VEOnRoaXMudHJpZ2dlcihZLkZMQVNIX0JMT0NLKTticmVhaztjYXNlIGUuRkxBU0hfUlRNUF9DT05ORUNUX0ZBSUxFRDokLndpdGhvdXQodGhpcy5vcHRpb25zLnByb3RvY29scyxXLlJUTVApO2Nhc2UgZS5GTEFTSF9SVE1QX0NBTk5PVF9QTEFZX1NUUkVBTTpjYXNlIGUuRkxBU0hfUlRNUF9DT05ORUNUX0NMT1NFRDpjYXNlIGUuSFRNTDVfQVVESU9fTkVUV09SSzpjYXNlIGUuSFRNTDVfQVVESU9fQUJPUlRFRDpjYXNlIGUuSFRNTDVfQVVESU9fREVDT0RFOmNhc2UgZS5IVE1MNV9BVURJT19TUkNfTk9UX1NVUFBPUlRFRDpjYXNlIGUuR0VORVJJQ19BVURJT19FTkRFRF9FQVJMWTpjYXNlIGUuTVNFX0JBRF9PQkpFQ1RfU1RBVEU6Y2FzZSBlLk1TRV9OT1RfU1VQUE9SVEVEOmNhc2UgZS5NU0VfTVAzX05PVF9TVVBQT1JURUQ6Y2FzZSBlLk1TRV9ITFNfTk9UX1ZBTElEX1BMQVlMSVNUOmNhc2UgZS5NU0VfSExTX1BMQVlMSVNUX05PVF9GT1VORDpjYXNlIGUuTVNFX0hMU19TRUdNRU5UX05PVF9GT1VORDpULmNhbGwodGhpcyk7YnJlYWs7Y2FzZSBlLkdFTkVSSUNfQVVESU9fT1ZFUlJVTjpkLmNhbGwodGhpcyk7YnJlYWs7ZGVmYXVsdDpGLmVycm9yKFwiKCVzKSBVbmhhbmRsZWQgYXVkaW8gZXJyb3IgY29kZTogJXNcIix0aGlzLmdldElkKCksdCx0aGlzKX19ZnVuY3Rpb24gSSh0LGUpe3N3aXRjaCh0aGlzLm9wdGlvbnMuZGVidWcmJk8uY2FsbCh0aGlzLHQsZSksdCl7Y2FzZSBZLlBBVVNFOnRoaXMuX2lzUGxheWluZz0hMSx0aGlzLl9pc1BsYXlBY3Rpb25RdWV1ZWQ9ITE7YnJlYWs7Y2FzZSBZLlBMQVk6dmFyIG49ZTt0aGlzLnRvZ2dsZU11dGUoSi5tdXRlZCksdGhpcy5zZXRWb2x1bWUoSi52b2x1bWUpLHRoaXMuX2lzUGxheWluZz0hMSx0aGlzLl9pc1BsYXlBY3Rpb25RdWV1ZWQ9ITAsdGhpcy5fdXNlckluaXRpYXRlZFBsYXk9dm9pZCAwIT09bi51c2VySW5pdGlhdGVkPyEhbi51c2VySW5pdGlhdGVkOiEwLE0uY2FsbCh0aGlzKTticmVhaztjYXNlIFkuUExBWV9TVEFSVDp0aGlzLl9pc1BsYXlpbmc9ITAsdGhpcy5faXNQbGF5QWN0aW9uUXVldWVkPSExLHRoaXMuX3JlZ2lzdGVyUGxheXMmJnRoaXMucmVnaXN0ZXJQbGF5KCk7YnJlYWs7Y2FzZSBZLkJVRkZFUlJJTkdfU1RBUlQ6Y2FzZSBZLlNFRUs6dGhpcy5faXNQbGF5aW5nJiYodGhpcy5faXNQbGF5aW5nPSExLHRoaXMuX2lzUGxheUFjdGlvblF1ZXVlZD0hMCk7YnJlYWs7Y2FzZSBZLkJVRkZFUlJJTkdfRU5EOmNhc2UgWS5TRUVLRUQ6dGhpcy5faXNQbGF5QWN0aW9uUXVldWVkJiYodGhpcy5faXNQbGF5aW5nPSEwLHRoaXMuX2lzUGxheUFjdGlvblF1ZXVlZD0hMSk7YnJlYWs7Y2FzZSBZLk5PX0NPTk5FQ1RJT046dGhpcy5faGFzTm9Db25uZWN0aW9uPSEwLHRoaXMuX25vQ29ubmVjdGlvblNpbmNlPURhdGUubm93KCk7YnJlYWs7Y2FzZSBZLk5PX1NUUkVBTVM6dGhpcy5wYXVzZSgpLEUuY2FsbCh0aGlzLCExKSxsLmNhbGwodGhpcyksTi5jYWxsKHRoaXMpO2JyZWFrO2Nhc2UgWS5TVFJFQU1TOnRoaXMuX25vQ29ubmVjdGlvblNpbmNlPW51bGwsdGhpcy5faGFzTm9Db25uZWN0aW9uPSExO2JyZWFrO2Nhc2UgWS5PTkxJTkU6ay5jYWxsKHRoaXMpO2JyZWFrO2Nhc2UgWS5PRkZMSU5FOn19ZnVuY3Rpb24gTCh0KXt2YXIgZT1DLlN0YXRlcyxuPUMuRXJyb3JzO3N3aXRjaCh0KXtjYXNlIGUuSURMRTpSLmNhbGwodGhpcyksdGhpcy5jb250cm9sbGVyJiZ0aGlzLmNvbnRyb2xsZXIuZ2V0RXJyb3JJRCgpPT09bi5GTEFTSF9QUk9YWV9GTEFTSF9CTE9DS0VEJiZ0aGlzLnRyaWdnZXIoWS5GTEFTSF9VTkJMT0NLKTticmVhaztjYXNlIGUuUEFVU0VEOlIuY2FsbCh0aGlzKSxFLmNhbGwodGhpcywhMSksdGhpcy5zZWVrVGltZUV2ZW50SGFuZGxlciYmdGhpcy5pc1BhdXNlZCgpJiZTLmNhbGwodGhpcyksdGhpcy5pc1BsYXlpbmcoKSYmdGhpcy50cmlnZ2VyKFkuUEFVU0Use3Bvc2l0aW9uOnRoaXMuY3VycmVudFRpbWUoKX0pO2JyZWFrO2Nhc2UgZS5QTEFZSU5HOlIuY2FsbCh0aGlzKSxFLmNhbGwodGhpcywhMSksQS5jYWxsKHRoaXMpLHRoaXMudHJpZ2dlcihZLlBMQVlfUkVTVU1FKTticmVhaztjYXNlIGUuTE9BRElORzpjYXNlIGUuU0VFS0lORzpSLmNhbGwodGhpcyksRS5jYWxsKHRoaXMsITApO2JyZWFrO2Nhc2UgZS5FTkRFRDpSLmNhbGwodGhpcyksZC5jYWxsKHRoaXMpO2JyZWFrO2Nhc2UgZS5FUlJPUjpFLmNhbGwodGhpcywhMSksUC5jYWxsKHRoaXMpfXRoaXMudHJpZ2dlcihZLlNUQVRFX0NIQU5HRSx0KX1mdW5jdGlvbiBPKHQsZSl7dmFyIG49dGhpcy5vcHRpb25zLnRpdGxlO249biYmbi5sZW5ndGg/XCIgW1wiK24ucmVwbGFjZSgvXFxzL2csXCJcIikuc3Vic3RyKDAsNikrXCJdXCI6XCJcIix0PT09WS5TVEFURV9DSEFOR0U/RihcIiglcyklcyBFdmVudDogJXMgKCVzKVwiLHRoaXMuZ2V0SWQoKSxuLHQsZSk6dCE9PVkuVElNRXx8dGhpcy5fbG9nZ2VkVGltZT90IT09WS5USU1FJiZGKFwiKCVzKSVzIEV2ZW50OiAlc1wiLHRoaXMuZ2V0SWQoKSxuLHQpOkYoXCIoJXMpJXMgRXZlbnQ6ICVzICVkbXNcIix0aGlzLmdldElkKCksbix0LHRoaXMuY3VycmVudFRpbWUoKSksdGhpcy5fbG9nZ2VkVGltZT10PT09WS5USU1FfWZ1bmN0aW9uIFIoKXt0aGlzLl9pbml0QXVkaW9EZWZlciYmdGhpcy5faW5pdEF1ZGlvRGVmZXIucmVzb2x2ZSgpfWZ1bmN0aW9uIEQodCl7cmV0dXJuIHZvaWQgMD09PUMuRXJyb3JzW3RdPyExOkFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywxKS5zb21lKGZ1bmN0aW9uKGUpe3JldHVybiAwPT09dC5pbmRleE9mKGUpfSl9ZnVuY3Rpb24gTSgpe2Z1bmN0aW9uIHQoKXt2YXIgdD13aW5kb3cubmF2aWdhdG9yLm9uTGluZTtGKFwiTmF2aWdhdG9yIGBvbkxpbmVgIHN0YXR1cyBpcyBub3c6IFwiK3QpLHdpbmRvdy5zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7d2luZG93Lm5hdmlnYXRvci5vbkxpbmU9PT10JiZ0aGlzLnRyaWdnZXIodD9ZLk9OTElORTpZLk9GRkxJTkUpfS5iaW5kKHRoaXMpLDUwMCl9dGhpcy5fb25saW5lRXZlbnRzUmVnaXN0ZXJlZHx8KHRoaXMuX29ubGluZUV2ZW50c1JlZ2lzdGVyZWQ9ITAsd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJvbmxpbmVcIix0LmJpbmQodGhpcykpLHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwib2ZmbGluZVwiLHQuYmluZCh0aGlzKSkpfWZ1bmN0aW9uIGsoKXtpZih0aGlzLmhhc05vQ29ubmVjdGlvbigpJiZ0aGlzLl9pc1BsYXlSZXRyeVF1ZXVlZCl7dmFyIHQ9RGF0ZS5ub3coKS10aGlzLl9ub0Nvbm5lY3Rpb25TaW5jZTt0aGlzLl9pc1BsYXlSZXRyeVF1ZXVlZD0hMCx0PHRoaXMub3B0aW9ucy5yZXRyeUFmdGVyTm9Db25uZWN0aW9uRXZlbnRUaW1lb3V0JiZ0aGlzLnBsYXkoe3VzZXJJbml0aWF0ZWQ6ITF9KX19ZnVuY3Rpb24gTigpe3RoaXMuaGFzTm9Db25uZWN0aW9uKCkmJiF0aGlzLl91c2VySW5pdGlhdGVkUGxheSYmKHRoaXMuX2lzUGxheVJldHJ5UXVldWVkPSEwKX12YXIgeCxDLEYsVT1uKDEpLEI9big2KSxIPW4oOCksaj1uKDkpLEc9bigyKS5EZWZlcnJlZCxZPW4oNyksVj1uKDE0KSx6PW4oMTApLFc9bigxNSksSz1uKDE2KSxxPW4oMTgpLFg9bigxMiksJD1uKDEzKSxaPW4oMTkpLFE9e30sSj17bXV0ZWQ6ITEsdm9sdW1lOjF9LHR0PXtzb3VuZElkOlEsZHVyYXRpb246USx0aXRsZTpudWxsLHJlZ2lzdGVyRW5kcG9pbnQ6USxzdHJlYW1VcmxzRW5kcG9pbnQ6USxyZXNvdXJjZUlkOiExLGRlYnVnOiExLGFzeW5jRmV0Y2g6ITAsdXNlU2luZ2xlUGxheWVyOiEwLHByb3RvY29sczpbVy5ITFMsVy5SVE1QLFcuSFRUUF0sZXh0ZW5zaW9uczpbVi5NUDNdLG1heEJpdHJhdGU6MS8wLG1lZGlhU291cmNlRW5hYmxlZDohMSxtc2VGaXJlZm94OiExLG1zZVNhZmFyaTohMSxldmVudExvZ2dlcjpudWxsLGxvZ0Vycm9yczohMCxsb2dQZXJmb3JtYW5jZTohMCxhamF4Om51bGwscmV0cnlBZnRlck5vQ29ubmVjdGlvbkV2ZW50VGltZW91dDo2ZTQsZmFkZU91dE9uUGF1c2U6ITEsZmFkZU91dEFsZ286Wi5Wb2x1bWVBdXRvbWF0b3IuQWxnb3MuRWFzZUluT3V0fSxldD02ZTMsbnQ9NmUzLGl0PTQwMCxydD02ZTQsb3Q9NmUzLHN0PTMsYXQ9M2U0LHV0PVtdO3g9dC5leHBvcnRzPWZ1bmN0aW9uKHQsZSl7aWYoMT09PWFyZ3VtZW50cy5sZW5ndGg/ZT10Onguc2V0QXVkaW9NYW5hZ2VyKHQpLCFDKXRocm93IG5ldyBFcnJvcihcIlNDQXVkaW86IEF1ZGlvTWFuYWdlciBpbnN0YW5jZSBtdXN0IGJlIHNldCB3aXRoIGBTQ0F1ZGlvLnNldEF1ZGlvTWFuYWdlcigpYCBvciBwYXNzZWQgdmlhIHRoZSBjb25zdHJ1Y3RvclwiKTt0aGlzLm9wdGlvbnM9JC5leHRlbmQoe30sdHQsZSk7dmFyIG49T2JqZWN0LmtleXModGhpcy5vcHRpb25zKS5maWx0ZXIoZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMub3B0aW9uc1t0XT09PVF9LHRoaXMpO2lmKG4ubGVuZ3RoKXRocm93IG5ldyBFcnJvcihcIlNDQXVkaW86IHBhc3MgaW50byBjb25zdHJ1Y3RvciB0aGUgZm9sbG93aW5nIG9wdGlvbnM6IFwiK24uam9pbihcIiwgXCIpKTtLLnByaW9yaXRpemVBbmRGaWx0ZXIodGhpcy5vcHRpb25zKSx0aGlzLmNvbnRyb2xsZXI9bnVsbCx0aGlzLnN0cmVhbUluZm89bnVsbCx0aGlzLl91c2VySW5pdGlhdGVkUGxheT10aGlzLl9yZWdpc3RlclBsYXlzPSEwLHRoaXMuX3JlZ2lzdGVyQ291bnRzPXRoaXMuX2Vycm9yUmVjb3ZlcnlDb3VudHM9MCx0aGlzLl9pc1BsYXlBY3Rpb25RdWV1ZWQ9dGhpcy5fb25saW5lRXZlbnRzUmVnaXN0ZXJlZD10aGlzLl91c2VkUHJlZmV0Y2hVcmxzPXRoaXMuX2lzUGxheWluZz10aGlzLl9pc0J1ZmZlcmluZz10aGlzLl9oYXNOb0Nvbm5lY3Rpb249ITEsdGhpcy5faW5pdEF1ZGlvRGVmZXI9dGhpcy5fZXhwaXJhdGlvblRpbWVvdXQ9dGhpcy5fYnVmZmVyaW5nVGltZW91dD10aGlzLl9lcnJvclJlY292ZXJ5VGltZT10aGlzLl9lcnJvclJlY292ZXJ5RmxhZ3NSZXNldFRpbWVvdXQ9dGhpcy5fc3RvcmVkUG9zaXRpb249dGhpcy5fcHJldlBvc2l0aW9uPXRoaXMuX25vQ29ubmVjdGlvblNpbmNlPW51bGwsdGhpcy5vcHRpb25zLmRlYnVnJiYodGhpcy5fbG9nZ2VkVGltZT0hMSksdGhpcy5fbW9kZWxMaXN0ZW5lcnM9e30sdGhpcy5faG9va3NQYXVzZT1bXSx0aGlzLmF1ZGlvUGVyZk1vbml0b3I9bmV3IEgodGhpcyx0aGlzLmxvZ0F1ZGlvUGVyZm9ybWFuY2UuYmluZCh0aGlzKSksdGhpcy5hdWRpb0xvZ2dlcj1uZXcgQih0aGlzKSx0aGlzLnZvbHVtZUF1dG9tYXRvcj1uZXcgWi5Wb2x1bWVBdXRvbWF0b3IodGhpcyksRj1GfHxqKGUuZGVidWcsXCJzY2F1ZGlvXCIpfSwkLmV4dGVuZCh4LnByb3RvdHlwZSx6LHtjb25zdHJ1Y3Rvcjp4LGluaXRBdWRpbzpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9pbml0QXVkaW9EZWZlcnx8KHRoaXMuX2luaXRBdWRpb0RlZmVyPUcoKSxwLmNhbGwodGhpcykuZG9uZShmdW5jdGlvbih0KXt2YXIgZT0hMDt0aGlzLnN0cmVhbUluZm8mJihlPSExKSx0aGlzLnN0cmVhbUluZm89dCxlJiZ0aGlzLnRyaWdnZXIoWS5TVFJFQU1TKSx0aGlzLmNvbnRyb2xsZXI9YS5jYWxsKHRoaXMsdCksdS5jYWxsKHRoaXMsdGhpcy5jb250cm9sbGVyLCEwKSxMLmNhbGwodGhpcyx0aGlzLmNvbnRyb2xsZXIuZ2V0U3RhdGUoKSl9LmJpbmQodGhpcykpLmZhaWwoZnVuY3Rpb24oKXt0aGlzLnRyaWdnZXIoWS5OT19TVFJFQU1TKX0uYmluZCh0aGlzKSksdGhpcy5faW5pdEF1ZGlvRGVmZXIuZG9uZShmdW5jdGlvbigpe3RoaXMudHJpZ2dlcihZLkNSRUFURUQpfS5iaW5kKHRoaXMpKSksdGhpcy5faW5pdEF1ZGlvRGVmZXIucHJvbWlzZSgpfSxyZWdpc3RlclBsYXk6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLm9wdGlvbnMuc291bmRJZCxlPSExO3JldHVybi0xPT09dXQuaW5kZXhPZih0KSYmKHV0LnB1c2godCksd2luZG93LnNldFRpbWVvdXQoZnVuY3Rpb24oKXt2YXIgZT11dC5pbmRleE9mKHQpO2U+LTEmJnV0LnNwbGljZShlLDEpfSxydCksdGhpcy5hamF4KHt0eXBlOlwiUE9TVFwiLHVybDokLnJlc3VsdCh0aGlzLm9wdGlvbnMucmVnaXN0ZXJFbmRwb2ludCksZGF0YVR5cGU6XCJqc29uXCJ9KSx0aGlzLl9yZWdpc3RlckNvdW50cysrLHRoaXMuX3JlZ2lzdGVyUGxheXM9ITEsdGhpcy50cmlnZ2VyKFkuUkVHSVNURVJFRCksZT0hMCksZX0sdG9nZ2xlOmZ1bmN0aW9uKCl7XG50aGlzW3RoaXMuaXNQYXVzZWQoKT9cInBsYXlcIjpcInBhdXNlXCJdKCl9LHBsYXk6ZnVuY3Rpb24odCl7dmFyIGU7aWYodCYmbnVsbCE9dC5zZWVrKWU9dC5zZWVrO2Vsc2V7aWYodGhpcy5pc1BsYXlpbmcoKSlyZXR1cm47ZT10aGlzLmN1cnJlbnRUaW1lKCl9dD0kLmV4dGVuZCh7fSx0LHtwb3NpdGlvbjplfSksdGhpcy50cmlnZ2VyKFkuUExBWSx0KSx2LmNhbGwodGhpcyxlKXx8KGYuY2FsbCh0aGlzKSx0aGlzLl9pc1BsYXlBY3Rpb25RdWV1ZWQ9ITApLHRoaXMuaW5pdEF1ZGlvKCkuZG9uZShmdW5jdGlvbigpe3RoaXMuX2lzUGxheUFjdGlvblF1ZXVlZCYmKHRoaXMuX3N0b3JlZFBvc2l0aW9uPW51bGwsdGhpcy50cmlnZ2VyKFkuUExBWV9TVEFSVCx0KSx0aGlzLmNvbnRyb2xsZXImJnRoaXMuY29udHJvbGxlci5wbGF5KGUpKX0uYmluZCh0aGlzKSksRS5jYWxsKHRoaXMsITApfSxwYXVzZTpmdW5jdGlvbih0KXt0aGlzLmlzUGF1c2VkKCl8fCh0PSQuZXh0ZW5kKHt9LHQse3Bvc2l0aW9uOnRoaXMuY3VycmVudFRpbWUoKX0pLGkuY2FsbCh0aGlzKSYmKHRoaXMudHJpZ2dlcihZLlBBVVNFLHQpLHRoaXMuY29udHJvbGxlciYmdGhpcy5jb250cm9sbGVyLnBhdXNlKCkpKX0scmVnaXN0ZXJIb29rOmZ1bmN0aW9uKHQsZSl7c3dpdGNoKHQpe2Nhc2VcInBhdXNlXCI6dGhpcy5faG9va3NQYXVzZS5wdXNoKGUpO2JyZWFrO2RlZmF1bHQ6dGhyb3cgbmV3IEVycm9yKFwiY2FuYHQgcmVnaXN0ZXIgaG9vayBmb3IgXCIrdCl9fSxnZXRMaXN0ZW5UaW1lOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuYXVkaW9Mb2dnZXI/dGhpcy5hdWRpb0xvZ2dlci5nZXRMaXN0ZW5UaW1lKCk6MH0sZGlzcG9zZTpmdW5jdGlvbigpe3RoaXMuYXVkaW9Mb2dnZXI9bnVsbCx0aGlzLmF1ZGlvUGVyZk1vbml0b3I9bnVsbCwkLndpdGhvdXQodXQsdGhpcy5vcHRpb25zLnNvdW5kSWQpLHdpbmRvdy5jbGVhclRpbWVvdXQodGhpcy5fYnVmZmVyaW5nVGltZW91dCksbC5jYWxsKHRoaXMpLHRoaXMuY29udHJvbGxlciYmKHRoaXMuY29udHJvbGxlci5raWxsKCksdGhpcy5jb250cm9sbGVyPW51bGwpLGRlbGV0ZSB0aGlzLmNvbnRyb2xsZXIsdGhpcy50cmlnZ2VyKFkuREVTVFJPWUVEKSx0aGlzLm9mZigpfSxzZWVrOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmNvbnRyb2xsZXI/dD49JC5yZXN1bHQodGhpcy5vcHRpb25zLmR1cmF0aW9uKT92b2lkIGQuY2FsbCh0aGlzKToodGhpcy5zZWVrVGltZUV2ZW50SGFuZGxlciYmdGhpcy5vZmYoWS5USU1FLHRoaXMuc2Vla1RpbWVFdmVudEhhbmRsZXIpLHRoaXMuc2Vla1RpbWVFdmVudEhhbmRsZXI9JC5hZnRlcigyLGZ1bmN0aW9uKCl7Uy5jYWxsKHRoaXMpfS5iaW5kKHRoaXMpKSx0aGlzLm9uKFkuVElNRSx0aGlzLnNlZWtUaW1lRXZlbnRIYW5kbGVyKSx0aGlzLnRyaWdnZXIoWS5TRUVLLHtmcm9tOnRoaXMuY3VycmVudFRpbWUoKSx0bzp0fSksdGhpcy5pc1BsYXlpbmcoKSYmIXYuY2FsbCh0aGlzLHQpPyhmLmNhbGwodGhpcyksdm9pZCB0aGlzLnBsYXkoe3NlZWs6dH0pKTp2b2lkIHRoaXMuY29udHJvbGxlci5zZWVrKHQpKTp2b2lkIDB9LHNlZWtSZWxhdGl2ZTpmdW5jdGlvbih0KXt0aGlzLmNvbnRyb2xsZXImJnRoaXMuc2Vlayh0aGlzLmN1cnJlbnRUaW1lKCkrdCl9LGN1cnJlbnRUaW1lOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3N0b3JlZFBvc2l0aW9uP3RoaXMuX3N0b3JlZFBvc2l0aW9uOnRoaXMuY29udHJvbGxlcj90aGlzLmNvbnRyb2xsZXIuZ2V0Q3VycmVudFBvc2l0aW9uKCk6MH0sbG9hZFByb2dyZXNzOmZ1bmN0aW9uKCl7dmFyIHQ9MDtyZXR1cm4gdGhpcy5jb250cm9sbGVyJiYodD10aGlzLmNvbnRyb2xsZXIuZ2V0TG9hZGVkUG9zaXRpb24oKS90aGlzLmNvbnRyb2xsZXIuZ2V0RHVyYXRpb24oKSx0PXQ+PS45OT8xOnQpLHR9LGJ1ZmZlcmVkOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29udHJvbGxlciYmdGhpcy5jb250cm9sbGVyLmdldER1cmF0aW9uKCl8fDB9LGlzUGF1c2VkOmZ1bmN0aW9uKCl7cmV0dXJuIXRoaXMuaXNQbGF5aW5nKCl9LGlzQnVmZmVyaW5nOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2lzQnVmZmVyaW5nfSxpc1BsYXlpbmc6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5faXNQbGF5QWN0aW9uUXVldWVkfHx0aGlzLl9pc1BsYXlpbmd9LGlzTG9hZGluZzpmdW5jdGlvbigpe3JldHVybiEoIXRoaXMuY29udHJvbGxlcnx8dGhpcy5jb250cm9sbGVyLmdldFN0YXRlKCkhPT1DLlN0YXRlcy5MT0FESU5HKX0saGFzTm9Db25uZWN0aW9uOmZ1bmN0aW9uKCl7cmV0dXJuISF0aGlzLl9oYXNOb0Nvbm5lY3Rpb259LGhhc1N0cmVhbUluZm86ZnVuY3Rpb24oKXtyZXR1cm4hIXRoaXMuc3RyZWFtSW5mb30sdG9nZ2xlTXV0ZTpmdW5jdGlvbih0KXt4LnRvZ2dsZU11dGUodCl9LGlzTXV0ZWQ6ZnVuY3Rpb24oKXtyZXR1cm4geC5pc011dGVkKCl9LHNldFZvbHVtZTpmdW5jdGlvbih0KXt4LnNldFZvbHVtZSh0KX0sZ2V0Vm9sdW1lOmZ1bmN0aW9uKCl7cmV0dXJuIHguZ2V0Vm9sdW1lKCl9LGxvZ0F1ZGlvUGVyZm9ybWFuY2U6ZnVuY3Rpb24odCl7dGhpcy5nZXRFdmVudExvZ2dlcigpJiZ0aGlzLm9wdGlvbnMubG9nUGVyZm9ybWFuY2UmJnRoaXMuZ2V0RXZlbnRMb2dnZXIoKS5hdWRpb1BlcmZvcm1hbmNlKHQpfSxsb2dBdWRpb0Vycm9yOmZ1bmN0aW9uKHQpe3RoaXMuZ2V0RXZlbnRMb2dnZXIoKSYmdGhpcy5vcHRpb25zLmxvZ0Vycm9ycyYmdGhpcy5nZXRFdmVudExvZ2dlcigpLmF1ZGlvRXJyb3IodCl9LGdldEF1ZGlvTWFuYWdlclN0YXRlczpmdW5jdGlvbigpe3JldHVybiBDLlN0YXRlc30sZ2V0SWQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5vcHRpb25zLnJlc291cmNlSWR8fHRoaXMub3B0aW9ucy5zb3VuZElkfSxnZXRFdmVudExvZ2dlcjpmdW5jdGlvbigpe3JldHVybiB0aGlzLm9wdGlvbnMuZXZlbnRMb2dnZXJ9LHJlZ2lzdGVyTW9kZWxFdmVudExpc3RlbmVyOmZ1bmN0aW9uKHQsZSl7dmFyIG49cih0KTtpZih0aGlzLl9tb2RlbExpc3RlbmVyc1tuXSl0aHJvdyBuZXcgRXJyb3IoXCJEYXRhIG1vZGVsIGlzIGFscmVhZHkgcmVnaXN0ZXJlZCAoZm9yZ290IHRvIHVucmVnaXN0ZXIgaXQgb3IgcmVnaXN0ZXJpbmcgdHdpY2U/KVwiKTt0aGlzLl9tb2RlbExpc3RlbmVyc1tuXT1lPWUuYmluZCh0aGlzLHQpLHRoaXMub24oXCJhbGxcIixlKX0sdW5yZWdpc3Rlck1vZGVsRXZlbnRMaXN0ZW5lcjpmdW5jdGlvbih0KXt2YXIgZT1yKHQpO3RoaXMuX21vZGVsTGlzdGVuZXJzW2VdJiYodGhpcy5vZmYoXCJhbGxcIix0aGlzLl9tb2RlbExpc3RlbmVyc1tlXSksZGVsZXRlIHRoaXMuX21vZGVsTGlzdGVuZXJzW2VdKX0sYWpheDpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5vcHRpb25zLmFqYXg/dGhpcy5vcHRpb25zLmFqYXgodCk6VSh0KX0sdHJpZ2dlcjpmdW5jdGlvbih0LGUpe0kuY2FsbCh0aGlzLHQsZSksei50cmlnZ2VyLmNhbGwodGhpcyx0LGUpfX0pLCQuZXh0ZW5kKHgse2dldFNldHRpbmdzOmZ1bmN0aW9uKCl7cmV0dXJuIEp9LHNldFNldHRpbmdzOmZ1bmN0aW9uKHQpeyQuZXh0ZW5kKEosdCl9LHNldEF1ZGlvTWFuYWdlcjpvLHNldEF1ZGlvTWFuYWdlck9uY2U6JC5vbmNlKG8pLHRvZ2dsZU11dGU6ZnVuY3Rpb24odCl7Si5tdXRlZD12b2lkIDA9PT10PyFKLm11dGVkOiEhdCxDJiZDLnNldFZvbHVtZShKLm11dGVkPzA6MSl9LGlzTXV0ZWQ6ZnVuY3Rpb24oKXtyZXR1cm4gSi5tdXRlZH0sc2V0Vm9sdW1lOmZ1bmN0aW9uKHQpe0oudm9sdW1lPXZvaWQgMD09PXQ/MTp0LEMmJkMuc2V0Vm9sdW1lKEoudm9sdW1lKX0sZ2V0Vm9sdW1lOmZ1bmN0aW9uKCl7cmV0dXJuIEoudm9sdW1lfSxFeHRlbnNpb25zOlYsUHJvdG9jb2xzOlcsRXZlbnRzOlksQlVGRkVSX0RFTEFZOml0LFBMQVlfUkVHSVNUUkFUSU9OX1RJTUVPVVQ6cnR9KX0sZnVuY3Rpb24odCxlLG4pe3ZhciBpPW4oMikuRGVmZXJyZWQscj00O3QuZXhwb3J0cz1mdW5jdGlvbih0KXt2YXIgZSxuLG8scyxhLHUsaCxjO3QmJihvPXQuZGF0YXx8bnVsbCxuPXQudXJsfHxcIlwiLGU9dC50eXBlfHxcIkdFVFwiLHM9dC5kYXRhVHlwZXx8XCJ0ZXh0XCIsYT10LmFzeW5jLHU9dC50aW1lb3V0LGg9dC5iZWZvcmVTZW5kfHxudWxsKTt2YXIgbD1pKCk7YT1hIT09ITE7dmFyIGY9bmV3IFhNTEh0dHBSZXF1ZXN0O3JldHVybiBmLm9wZW4oZSxuLGEpLGEmJihmLnJlc3BvbnNlVHlwZT1cInRleHRcIiksaCYmaChmKSxmLm9ucmVhZHlzdGF0ZWNoYW5nZT1mdW5jdGlvbigpe2lmKGYucmVhZHlTdGF0ZT09PXIpaWYoY2xlYXJUaW1lb3V0KGMpLDAhPT1mLnN0YXR1cyYmZi5zdGF0dXM8NDAwKXt2YXIgdD1mLnJlc3BvbnNlVGV4dDtpZihcImpzb25cIj09PXMpdHJ5e3Q9SlNPTi5wYXJzZSh0KX1jYXRjaChlKXtyZXR1cm4gdm9pZCBsLnJlamVjdChmKX1sLnJlc29sdmUodCl9ZWxzZSBsLnJlamVjdChmKX0sbnVsbCE9dSYmKGM9c2V0VGltZW91dChmdW5jdGlvbigpe2YucmVhZHlTdGF0ZSE9PXImJihmLmFib3J0KCksbC5yZWplY3QoZikpfSx1KSksZi5zZW5kKG8pLGwucHJvbWlzZSgpfX0sZnVuY3Rpb24odCxlLG4pe3QuZXhwb3J0cz1uKDMpfSxmdW5jdGlvbih0LGUsbil7LyohXG5cdFx0KiBqcXVlcnktZGVmZXJyZWRcblx0XHQqIENvcHlyaWdodChjKSAyMDExIEhpZGRlbiA8enpkaGlkZGVuQGdtYWlsLmNvbT5cblx0XHQqIE1JVCBMaWNlbnNlZFxuXHRcdCovXG52YXIgaT10LmV4cG9ydHM9big0KSxyPUFycmF5LnByb3RvdHlwZS5zbGljZTtpLmV4dGVuZCh7RGVmZXJyZWQ6ZnVuY3Rpb24odCl7dmFyIGU9W1tcInJlc29sdmVcIixcImRvbmVcIixpLkNhbGxiYWNrcyhcIm9uY2UgbWVtb3J5XCIpLFwicmVzb2x2ZWRcIl0sW1wicmVqZWN0XCIsXCJmYWlsXCIsaS5DYWxsYmFja3MoXCJvbmNlIG1lbW9yeVwiKSxcInJlamVjdGVkXCJdLFtcIm5vdGlmeVwiLFwicHJvZ3Jlc3NcIixpLkNhbGxiYWNrcyhcIm1lbW9yeVwiKV1dLG49XCJwZW5kaW5nXCIscj17c3RhdGU6ZnVuY3Rpb24oKXtyZXR1cm4gbn0sYWx3YXlzOmZ1bmN0aW9uKCl7cmV0dXJuIG8uZG9uZShhcmd1bWVudHMpLmZhaWwoYXJndW1lbnRzKSx0aGlzfSx0aGVuOmZ1bmN0aW9uKCl7dmFyIHQ9YXJndW1lbnRzO3JldHVybiBpLkRlZmVycmVkKGZ1bmN0aW9uKG4pe2kuZWFjaChlLGZ1bmN0aW9uKGUscil7dmFyIHM9clswXSxhPXRbZV07b1tyWzFdXShpLmlzRnVuY3Rpb24oYSk/ZnVuY3Rpb24oKXt2YXIgdD1hLmFwcGx5KHRoaXMsYXJndW1lbnRzKTt0JiZpLmlzRnVuY3Rpb24odC5wcm9taXNlKT90LnByb21pc2UoKS5kb25lKG4ucmVzb2x2ZSkuZmFpbChuLnJlamVjdCkucHJvZ3Jlc3Mobi5ub3RpZnkpOm5bcytcIldpdGhcIl0odGhpcz09PW8/bjp0aGlzLFt0XSl9Om5bc10pfSksdD1udWxsfSkucHJvbWlzZSgpfSxwcm9taXNlOmZ1bmN0aW9uKHQpe3JldHVybiBudWxsIT10P2kuZXh0ZW5kKHQscik6cn19LG89e307cmV0dXJuIHIucGlwZT1yLnRoZW4saS5lYWNoKGUsZnVuY3Rpb24odCxpKXt2YXIgcz1pWzJdLGE9aVszXTtyW2lbMV1dPXMuYWRkLGEmJnMuYWRkKGZ1bmN0aW9uKCl7bj1hfSxlWzFedF1bMl0uZGlzYWJsZSxlWzJdWzJdLmxvY2spLG9baVswXV09cy5maXJlLG9baVswXStcIldpdGhcIl09cy5maXJlV2l0aH0pLHIucHJvbWlzZShvKSx0JiZ0LmNhbGwobyxvKSxvfSx3aGVuOmZ1bmN0aW9uKHQpe3ZhciBlLG4sbyxzPTAsYT1yLmNhbGwoYXJndW1lbnRzKSx1PWEubGVuZ3RoLGg9MSE9PXV8fHQmJmkuaXNGdW5jdGlvbih0LnByb21pc2UpP3U6MCxjPTE9PT1oP3Q6aS5EZWZlcnJlZCgpLGw9ZnVuY3Rpb24odCxuLGkpe3JldHVybiBmdW5jdGlvbihvKXtuW3RdPXRoaXMsaVt0XT1hcmd1bWVudHMubGVuZ3RoPjE/ci5jYWxsKGFyZ3VtZW50cyk6byxpPT09ZT9jLm5vdGlmeVdpdGgobixpKTotLWh8fGMucmVzb2x2ZVdpdGgobixpKX19O2lmKHU+MSlmb3IoZT1uZXcgQXJyYXkodSksbj1uZXcgQXJyYXkodSksbz1uZXcgQXJyYXkodSk7dT5zO3MrKylhW3NdJiZpLmlzRnVuY3Rpb24oYVtzXS5wcm9taXNlKT9hW3NdLnByb21pc2UoKS5kb25lKGwocyxvLGEpKS5mYWlsKGMucmVqZWN0KS5wcm9ncmVzcyhsKHMsbixlKSk6LS1oO3JldHVybiBofHxjLnJlc29sdmVXaXRoKG8sYSksYy5wcm9taXNlKCl9fSl9LGZ1bmN0aW9uKHQsZSxuKXtmdW5jdGlvbiBpKHQpe3ZhciBlPXNbdF09e307cmV0dXJuIHIuZWFjaCh0LnNwbGl0KG8pLGZ1bmN0aW9uKHQsbil7ZVtuXT0hMH0pLGV9dmFyIHI9dC5leHBvcnRzPW4oNSksbz0vXFxzKy8scz17fTtyLkNhbGxiYWNrcz1mdW5jdGlvbih0KXt0PVwic3RyaW5nXCI9PXR5cGVvZiB0P3NbdF18fGkodCk6ci5leHRlbmQoe30sdCk7dmFyIGUsbixvLGEsdSxoLGM9W10sbD0hdC5vbmNlJiZbXSxmPWZ1bmN0aW9uKGkpe2ZvcihlPXQubWVtb3J5JiZpLG49ITAsaD1hfHwwLGE9MCx1PWMubGVuZ3RoLG89ITA7YyYmdT5oO2grKylpZihjW2hdLmFwcGx5KGlbMF0saVsxXSk9PT0hMSYmdC5zdG9wT25GYWxzZSl7ZT0hMTticmVha31vPSExLGMmJihsP2wubGVuZ3RoJiZmKGwuc2hpZnQoKSk6ZT9jPVtdOmQuZGlzYWJsZSgpKX0sZD17YWRkOmZ1bmN0aW9uKCl7aWYoYyl7dmFyIG49Yy5sZW5ndGg7IWZ1bmN0aW9uIGkoZSl7ci5lYWNoKGUsZnVuY3Rpb24oZSxuKXt2YXIgbz1yLnR5cGUobik7XCJmdW5jdGlvblwiPT09bz90LnVuaXF1ZSYmZC5oYXMobil8fGMucHVzaChuKTpuJiZuLmxlbmd0aCYmXCJzdHJpbmdcIiE9PW8mJmkobil9KX0oYXJndW1lbnRzKSxvP3U9Yy5sZW5ndGg6ZSYmKGE9bixmKGUpKX1yZXR1cm4gdGhpc30scmVtb3ZlOmZ1bmN0aW9uKCl7cmV0dXJuIGMmJnIuZWFjaChhcmd1bWVudHMsZnVuY3Rpb24odCxlKXtmb3IodmFyIG47KG49ci5pbkFycmF5KGUsYyxuKSk+LTE7KWMuc3BsaWNlKG4sMSksbyYmKHU+PW4mJnUtLSxoPj1uJiZoLS0pfSksdGhpc30saGFzOmZ1bmN0aW9uKHQpe3JldHVybiByLmluQXJyYXkodCxjKT4tMX0sZW1wdHk6ZnVuY3Rpb24oKXtyZXR1cm4gYz1bXSx0aGlzfSxkaXNhYmxlOmZ1bmN0aW9uKCl7cmV0dXJuIGM9bD1lPXZvaWQgMCx0aGlzfSxkaXNhYmxlZDpmdW5jdGlvbigpe3JldHVybiFjfSxsb2NrOmZ1bmN0aW9uKCl7cmV0dXJuIGw9dm9pZCAwLGV8fGQuZGlzYWJsZSgpLHRoaXN9LGxvY2tlZDpmdW5jdGlvbigpe3JldHVybiFsfSxmaXJlV2l0aDpmdW5jdGlvbih0LGUpe3JldHVybiBlPWV8fFtdLGU9W3QsZS5zbGljZT9lLnNsaWNlKCk6ZV0sIWN8fG4mJiFsfHwobz9sLnB1c2goZSk6ZihlKSksdGhpc30sZmlyZTpmdW5jdGlvbigpe3JldHVybiBkLmZpcmVXaXRoKHRoaXMsYXJndW1lbnRzKSx0aGlzfSxmaXJlZDpmdW5jdGlvbigpe3JldHVybiEhbn19O3JldHVybiBkfX0sZnVuY3Rpb24odCxlKXtmdW5jdGlvbiBuKHQpe3JldHVybiBudWxsPT10P1N0cmluZyh0KTpjW2guY2FsbCh0KV18fFwib2JqZWN0XCJ9ZnVuY3Rpb24gaSh0KXtyZXR1cm5cImZ1bmN0aW9uXCI9PT11LnR5cGUodCl9ZnVuY3Rpb24gcih0KXtyZXR1cm5cImFycmF5XCI9PT11LnR5cGUodCl9ZnVuY3Rpb24gbyh0LGUsbil7dmFyIHIsbz0wLHM9dC5sZW5ndGgsYT12b2lkIDA9PT1zfHxpKHQpO2lmKG4paWYoYSl7Zm9yKHIgaW4gdClpZihlLmFwcGx5KHRbcl0sbik9PT0hMSlicmVha31lbHNlIGZvcig7cz5vJiZlLmFwcGx5KHRbbysrXSxuKSE9PSExOyk7ZWxzZSBpZihhKXtmb3IociBpbiB0KWlmKGUuY2FsbCh0W3JdLHIsdFtyXSk9PT0hMSlicmVha31lbHNlIGZvcig7cz5vJiZlLmNhbGwodFtvXSxvLHRbbysrXSkhPT0hMTspO3JldHVybiB0fWZ1bmN0aW9uIHModCl7cmV0dXJuISghdHx8XCJvYmplY3RcIiE9PXUudHlwZSh0KSl9ZnVuY3Rpb24gYSgpe3ZhciB0LGUsbixpLHIsbyxzPWFyZ3VtZW50c1swXXx8e30sYT0xLGg9YXJndW1lbnRzLmxlbmd0aCxjPSExO2ZvcihcImJvb2xlYW5cIj09dHlwZW9mIHMmJihjPXMscz1hcmd1bWVudHNbMV18fHt9LGE9MiksXCJvYmplY3RcIj09dHlwZW9mIHN8fHUuaXNGdW5jdGlvbihzKXx8KHM9e30pLGg9PT1hJiYocz10aGlzLC0tYSk7aD5hO2ErKylpZihudWxsIT0odD1hcmd1bWVudHNbYV0pKWZvcihlIGluIHQpbj1zW2VdLGk9dFtlXSxzIT09aSYmKGMmJmkmJih1LmlzUGxhaW5PYmplY3QoaSl8fChyPXUuaXNBcnJheShpKSkpPyhyPyhyPSExLG89biYmdS5pc0FycmF5KG4pP246W10pOm89biYmdS5pc1BsYWluT2JqZWN0KG4pP246e30sc1tlXT11LmV4dGVuZChjLG8saSkpOnZvaWQgMCE9PWkmJihzW2VdPWkpKTtyZXR1cm4gc312YXIgdT10LmV4cG9ydHM9e3R5cGU6bixpc0FycmF5OnIsaXNGdW5jdGlvbjppLGlzUGxhaW5PYmplY3Q6cyxlYWNoOm8sZXh0ZW5kOmEsbm9vcDpmdW5jdGlvbigpe319LGg9T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZyxjPXt9O1wiQm9vbGVhbiBOdW1iZXIgU3RyaW5nIEZ1bmN0aW9uIEFycmF5IERhdGUgUmVnRXhwIE9iamVjdFwiLnNwbGl0KFwiIFwiKS5mb3JFYWNoKGZ1bmN0aW9uKHQpe2NbXCJbb2JqZWN0IFwiK3QrXCJdXCJdPXQudG9Mb3dlckNhc2UoKX0pfSxmdW5jdGlvbih0LGUsbil7ZnVuY3Rpb24gaSh0KXt0aGlzLmxpc3RlblRpbWUrPXQuZnJvbS10aGlzLmN1cnJlbnRUaW1lLHRoaXMuY3VycmVudFRpbWU9dC50b31mdW5jdGlvbiByKHQpe3RoaXMubGlzdGVuVGltZSs9dC5wb3NpdGlvbi10aGlzLmN1cnJlbnRUaW1lLHRoaXMuY3VycmVudFRpbWU9dC5wb3NpdGlvbn1mdW5jdGlvbiBvKHQpe3RoaXMuY3VycmVudFRpbWU9dC5wb3NpdGlvbn12YXIgcyxhPW4oNyk7cz10LmV4cG9ydHM9ZnVuY3Rpb24odCl7dGhpcy5zY0F1ZGlvPXQsdGhpcy5saXN0ZW5UaW1lPTAsdGhpcy5jdXJyZW50VGltZT0wLHRoaXMuc2NBdWRpby5vbihhLlNFRUssaSx0aGlzKS5vbihhLlBMQVlfU1RBUlQsbyx0aGlzKS5vbihhLlBBVVNFLHIsdGhpcyl9LHMucHJvdG90eXBlPXtjb25zdHJ1Y3RvcjpzLGdldExpc3RlblRpbWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5saXN0ZW5UaW1lK3RoaXMuc2NBdWRpby5jdXJyZW50VGltZSgpLXRoaXMuY3VycmVudFRpbWV9fX0sZnVuY3Rpb24odCxlKXt2YXIgbj17Q1JFQVRFRDpcImNyZWF0ZWRcIixTVEFURV9DSEFOR0U6XCJzdGF0ZS1jaGFuZ2VcIixERVNUUk9ZRUQ6XCJkZXN0cm95ZWRcIixQTEFZOlwicGxheVwiLFBMQVlfU1RBUlQ6XCJwbGF5LXN0YXJ0XCIsUExBWV9SRVNVTUU6XCJwbGF5LXJlc3VtZVwiLE1FVEFEQVRBOlwibWV0YWRhdGFcIixQQVVTRTpcInBhdXNlXCIsRklOSVNIOlwiZmluaXNoXCIsUkVTRVQ6XCJyZXNldFwiLFNFRUs6XCJzZWVrXCIsU0VFS0VEOlwic2Vla2VkXCIsR0VPX0JMT0NLRUQ6XCJnZW9fYmxvY2tlZFwiLEJVRkZFUlJJTkdfU1RBUlQ6XCJidWZmZXJpbmdfc3RhcnRcIixCVUZGRVJSSU5HX0VORDpcImJ1ZmZlcmluZ19lbmRcIixGTEFTSF9OT1RfTE9BREVEOlwiZmxhc2hfbm90X2xvYWRlZFwiLEZMQVNIX0JMT0NLOlwiZmxhc2hfYmxvY2tlZFwiLEZMQVNIX1VOQkxPQ0s6XCJmbGFzaF91bmJsb2NrZWRcIixBVURJT19FUlJPUjpcImF1ZGlvX2Vycm9yXCIsVElNRTpcInRpbWVcIixOT19TVFJFQU1TOlwibm9fc3RyZWFtc1wiLFNUUkVBTVM6XCJzdHJlYW1zXCIsTk9fUFJPVE9DT0w6XCJub19wcm90b2NvbFwiLE5PX0NPTk5FQ1RJT046XCJub19jb25uZWN0aW9uXCIsUkVHSVNURVJFRDpcInJlZ2lzdGVyZWRcIixPTkxJTkU6XCJvbmxpbmVcIixPRkZMSU5FOlwib2ZmbGluZVwifTt0LmV4cG9ydHM9bn0sZnVuY3Rpb24odCxlLG4pe2Z1bmN0aW9uIGkoKXtyZXR1cm4gdGhpcy5zY0F1ZGlvLmNvbnRyb2xsZXI/dGhpcy5jb250cm9sbGVyP3ZvaWQgbS53YXJuKFwiKCVzKSBTZXR1cCB3YXMgY2FsbGVkIHdoaWxlIGl0IHdhcyBhbHJlYWR5IGluaXRpYWxpemVkIChyZXR1cm5lZCB3aXRoIGEgbm8tb3ApXCIsdGhpcy5zY0F1ZGlvLmdldElkKCkpOihtKFwiKCVzKSBJbml0aWFsaXplZFwiLHRoaXMuc2NBdWRpby5nZXRJZCgpKSx0aGlzLmNvbnRyb2xsZXI9dGhpcy5zY0F1ZGlvLmNvbnRyb2xsZXIsdGhpcy5wcm90b2NvbD10aGlzLnNjQXVkaW8uc3RyZWFtSW5mby5wcm90b2NvbCx2b2lkKHRoaXMuaG9zdD1TLmdldFVybEhvc3QodGhpcy5zY0F1ZGlvLnN0cmVhbUluZm8udXJsKSkpOnZvaWQgbS53YXJuKFwiQ2FuwrR0IGluaXRpYWxpemUgd2hlbiBjb250cm9sbGVyIGlzIG51bGxcIil9ZnVuY3Rpb24gcigpe3RoaXMuY29udHJvbGxlciYmKG0oXCIoJXMpIFJlc2V0XCIsdGhpcy5zY0F1ZGlvLmdldElkKCkpLHRoaXMuY29udHJvbGxlcj10aGlzLnByb3RvY29sPXRoaXMuaG9zdD1udWxsLHRoaXMudGltZVRvUGxheU1lYXN1cmVkPSExKX1mdW5jdGlvbiBvKHQpe3ZhciBlPXRoaXMuc2NBdWRpby5nZXRBdWRpb01hbmFnZXJTdGF0ZXMoKTt0PT09ZS5MT0FESU5HP3RoaXMudGltZVRvUGxheU1lYXN1cmVkJiZmLmNhbGwodGhpcyk6QS5pc051bGwodGhpcy5idWZmZXJpbmdTdGFydFRpbWUpfHxkLmNhbGwodGhpcyl9ZnVuY3Rpb24gcygpe3RoaXMubWV0YWRhdGFMb2FkU3RhcnRUaW1lPURhdGUubm93KCl9ZnVuY3Rpb24gYSgpe3JldHVybiBBLmlzTnVsbCh0aGlzLm1ldGFkYXRhTG9hZFN0YXJ0VGltZSk/dm9pZCBtLndhcm4oXCIoJXMpIG9uTWV0YWRhdGFFbmQgd2FzIGNhbGxlZCB3aXRob3V0IG9uTWV0YWRhdGFTdGFydCBiZWluZyBjYWxsZWQgYmVmb3JlLlwiLHRoaXMuc2NBdWRpby5nZXRJZCgpKToodGhpcy5sb2coe3R5cGU6XCJtZXRhZGF0YVwiLGxhdGVuY3k6RGF0ZS5ub3coKS10aGlzLm1ldGFkYXRhTG9hZFN0YXJ0VGltZX0pLHZvaWQodGhpcy5tZXRhZGF0YUxvYWRTdGFydFRpbWU9bnVsbCkpfWZ1bmN0aW9uIHUoKXt0aGlzLnBsYXlDbGlja1RpbWU9RGF0ZS5ub3coKX1mdW5jdGlvbiBoKCl7aWYoIXRoaXMudGltZVRvUGxheU1lYXN1cmVkKXtpZihBLmlzTnVsbCh0aGlzLnBsYXlDbGlja1RpbWUpKXJldHVybiB2b2lkIG0ud2FybihcIiglcykgb25QbGF5UmVzdW1lIHdhcyBjYWxsZWQgd2l0aG91dCBvblBsYXlTdGFydCBiZWluZyBjYWxsZWQgYmVmb3JlLlwiLHRoaXMuc2NBdWRpby5nZXRJZCgpKTt0aGlzLmxvZyh7dHlwZTpcInBsYXlcIixsYXRlbmN5OkRhdGUubm93KCktdGhpcy5wbGF5Q2xpY2tUaW1lfSksdGhpcy5wbGF5Q2xpY2tUaW1lPW51bGwsdGhpcy50aW1lVG9QbGF5TWVhc3VyZWQ9ITB9fWZ1bmN0aW9uIGMoKXt0aGlzLnNjQXVkaW8uaXNQYXVzZWQoKXx8KHRoaXMuc2Vla1N0YXJ0VGltZT1EYXRlLm5vdygpKX1mdW5jdGlvbiBsKCl7aWYoIXRoaXMuc2NBdWRpby5pc1BhdXNlZCgpKXtpZihBLmlzTnVsbCh0aGlzLnNlZWtTdGFydFRpbWUpKXJldHVybiB2b2lkIG0ud2FybihcIiglcykgb25TZWVrRW5kIHdhcyBjYWxsZWQgd2l0aG91dCBvblNlZWtTdGFydCBiZWluZyBjYWxsZWQgYmVmb3JlLlwiLHRoaXMuc2NBdWRpby5nZXRJZCgpKTt0aGlzLmxvZyh7dHlwZTpcInNlZWtcIixsYXRlbmN5OkRhdGUubm93KCktdGhpcy5zZWVrU3RhcnRUaW1lfSksdGhpcy5zZWVrU3RhcnRUaW1lPW51bGx9fWZ1bmN0aW9uIGYoKXt0aGlzLmJ1ZmZlcmluZ1N0YXJ0VGltZXx8KHRoaXMuYnVmZmVyaW5nU3RhcnRUaW1lPURhdGUubm93KCkpfWZ1bmN0aW9uIGQoKXtyZXR1cm4gQS5pc051bGwodGhpcy5idWZmZXJpbmdTdGFydFRpbWUpP3ZvaWQgbS53YXJuKFwiKCVzKSBvbkJ1ZmZlcmluZ0VuZCB3YXMgY2FsbGVkIHdpdGhvdXQgb25CdWZmZXJpbmdTdGFydCBiZWluZyBjYWxsZWQgYmVmb3JlLlwiLHRoaXMuc2NBdWRpby5nZXRJZCgpKToocC5jYWxsKHRoaXMpLHZvaWQodGhpcy5idWZmZXJpbmdTdGFydFRpbWU9bnVsbCkpfWZ1bmN0aW9uIHAoKXtBLmlzTnVsbCh0aGlzLmJ1ZmZlcmluZ1N0YXJ0VGltZSl8fChBLmlzTnVsbCh0aGlzLmJ1ZmZlcmluZ1RpbWVBY2N1bXVsYXRlZCkmJih0aGlzLmJ1ZmZlcmluZ1RpbWVBY2N1bXVsYXRlZD0wKSx0aGlzLmJ1ZmZlcmluZ1RpbWVBY2N1bXVsYXRlZCs9RGF0ZS5ub3coKS10aGlzLmJ1ZmZlcmluZ1N0YXJ0VGltZSl9ZnVuY3Rpb24gZygpe3AuY2FsbCh0aGlzKSxBLmlzTnVsbCh0aGlzLmJ1ZmZlcmluZ1RpbWVBY2N1bXVsYXRlZCl8fCh0aGlzLmxvZyh7dHlwZTpcImJ1ZmZlclwiLGxhdGVuY3k6dGhpcy5idWZmZXJpbmdUaW1lQWNjdW11bGF0ZWR9KSx0aGlzLmJ1ZmZlcmluZ1N0YXJ0VGltZT10aGlzLmJ1ZmZlcmluZ1RpbWVBY2N1bXVsYXRlZD1udWxsKX12YXIgXyxtLHk9big5KSx2PW4oNyksRT1uKDEwKSxTPW4oMTIpLEE9bigxMyk7Xz10LmV4cG9ydHM9ZnVuY3Rpb24odCxlKXt0aGlzLnNjQXVkaW89dCx0aGlzLmxvZ0ZuPWUsdGhpcy5jb250cm9sbGVyPW51bGwsdGhpcy5yZXNldCgpLG09bXx8eSh0Lm9wdGlvbnMuZGVidWcsXCJhdWRpb3BlcmZcIiksdC5vbih2LkNSRUFURUQsaSx0aGlzKS5vbih2LlJFU0VULHIsdGhpcykub24odi5ERVNUUk9ZRUQscix0aGlzKS5vbih2LlNFRUssYyx0aGlzKS5vbih2LlNFRUtFRCxsLHRoaXMpLm9uKHYuUExBWSx1LHRoaXMpLm9uKHYuUExBWV9TVEFSVCxzLHRoaXMpLm9uKHYuUExBWV9SRVNVTUUsaCx0aGlzKS5vbih2LlBBVVNFLGcsdGhpcykub24odi5GSU5JU0gsZyx0aGlzKS5vbih2LlNUQVRFX0NIQU5HRSxvLHRoaXMpLm9uKHYuTUVUQURBVEEsYSx0aGlzKX0sQS5leHRlbmQoXy5wcm90b3R5cGUsRSx7Y29uc3RydWN0b3I6Xyxsb2c6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuY29udHJvbGxlcj8oQS5leHRlbmQodCx7cHJvdG9jb2w6dGhpcy5wcm90b2NvbCxob3N0OnRoaXMuaG9zdCxwbGF5ZXJ0eXBlOnRoaXMuY29udHJvbGxlci5nZXRUeXBlKCl9KSxtKFwiKCVzKSAlcyBsYXRlbmN5OiAlZCBwcm90b2NvbDogJXMgaG9zdDogJXMgcGxheWVydHlwZTogJXNcIix0aGlzLnNjQXVkaW8uZ2V0SWQoKSx0LnR5cGUsdC5sYXRlbmN5LHQucHJvdG9jb2wsdC5ob3N0LHQucGxheWVydHlwZSksdm9pZCB0aGlzLmxvZ0ZuKHQpKTp2b2lkIG0ud2FybihcIiglcykgTW9uaXRvciBsb2cgd2FzIGNhbGxlZCB3aGlsZSBjb250cm9sbGVyIGlzIG51bGwgKHJldHVybmVkIHdpdGggYSBuby1vcClcIix0aGlzLnNjQXVkaW8uZ2V0SWQoKSl9LHJlc2V0OmZ1bmN0aW9uKCl7dGhpcy5idWZmZXJpbmdTdGFydFRpbWU9dGhpcy5idWZmZXJpbmdUaW1lQWNjdW11bGF0ZWQ9dGhpcy5wbGF5Q2xpY2tUaW1lPXRoaXMuc2Vla1N0YXJ0VGltZT10aGlzLm1ldGFkYXRhTG9hZFN0YXJ0VGltZT1udWxsLHRoaXMudGltZVRvUGxheU1lYXN1cmVkPSExfX0pfSxmdW5jdGlvbih0LGUpe2Z1bmN0aW9uIG4oKXtmdW5jdGlvbiB0KHQsbil7Zm9yKHZhciBpLHI9YXJndW1lbnRzLmxlbmd0aCxvPUFycmF5KHI+Mj9yLTI6MCkscz0yO3I+cztzKyspb1tzLTJdPWFyZ3VtZW50c1tzXTtcInN0cmluZ1wiPT10eXBlb2Ygbj9uPVwiIFwiK246KG8udW5zaGlmdChuKSxuPVwiXCIpLChpPXdpbmRvdy5jb25zb2xlKVt0XS5hcHBseShpLFtlKCkrXCIgfFwiK2MrXCIlY1wiK25dLmNvbmNhdChsLG8pKX1mdW5jdGlvbiBlKCl7dmFyIHQ9bmV3IERhdGUsZT1udWxsPT09aD8wOnQtaDtyZXR1cm4gaD0rdCxcIiVjXCIrcih0LmdldEhvdXJzKCkpK1wiOlwiK3IodC5nZXRNaW51dGVzKCkpK1wiOlwiK3IodC5nZXRTZWNvbmRzKCkpK1wiLlwiK2kodC5nZXRNaWxsaXNlY29uZHMoKSxcIjBcIiwzKStcIiVjICglY1wiK2koXCIrXCIrZStcIm1zXCIsXCIgXCIsOCkrXCIlYylcIn12YXIgbj1hcmd1bWVudHMubGVuZ3RoPD0wfHx2b2lkIDA9PT1hcmd1bWVudHNbMF0/ITA6YXJndW1lbnRzWzBdLG89YXJndW1lbnRzLmxlbmd0aDw9MXx8dm9pZCAwPT09YXJndW1lbnRzWzFdP1wiXCI6YXJndW1lbnRzWzFdO2lmKCFuKXJldHVybiBzO3ZhciBoPW51bGwsYz1hKG8pLGw9W1wiY29sb3I6IGdyZWVuXCIsXCJjb2xvcjogZ3JleVwiLFwiY29sb3I6IGJsdWVcIixcImNvbG9yOiBncmV5XCIsdShvKSxcIlwiXSxmPXQuYmluZChudWxsLFwibG9nXCIpO3JldHVybiBmLmxvZz1mLFtcImluZm9cIixcIndhcm5cIixcImVycm9yXCJdLmZvckVhY2goZnVuY3Rpb24oZSl7ZltlXT10LmJpbmQobnVsbCxlKX0pLGZ9ZnVuY3Rpb24gaSh0LGUsbil7cmV0dXJuIG8oZSxuLShcIlwiK3QpLmxlbmd0aCkrdH1mdW5jdGlvbiByKHQpe3JldHVybiBpKHQsXCIwXCIsMil9ZnVuY3Rpb24gbyh0LGUpe3JldHVybiBlPjA/bmV3IEFycmF5KGUrMSkuam9pbih0KTpcIlwifWZ1bmN0aW9uIHMoKXt9ZnVuY3Rpb24gYSh0KXtyZXR1cm4gdD9cIiVjXCIrdDpcIiVjXCJ9dC5leHBvcnRzPW4scy5sb2c9cy5pbmZvPXMud2Fybj1zLmVycm9yPXM7dmFyIHU9ZnVuY3Rpb24oKXt2YXIgdD1bXCIjNTE2MTNDXCIsXCIjNDQ3ODQ4XCIsXCIjNDg2RTVGXCIsXCIjNzg3NDQ0XCIsXCIjNkU2NjRFXCJdLGU9MDtyZXR1cm4gZnVuY3Rpb24obil7cmV0dXJuIG4/XCJiYWNrZ3JvdW5kLWNvbG9yOlwiK3RbZSsrJXQubGVuZ3RoXStcIjtjb2xvcjojZmZmO2JvcmRlci1yYWRpdXM6M3B4O3BhZGRpbmc6MnB4IDRweDtmb250LWZhbWlseTpzYW5zLXNlcmlmO3RleHQtdHJhbnNmb3JtOnVwcGVyY2FzZTtmb250LXNpemU6OXB4O21hcmdpbjowIDRweFwiOlwiXCJ9fSgpfSxmdW5jdGlvbih0LGUsbil7dC5leHBvcnRzPW4oMTEpfSxmdW5jdGlvbih0LGUsbil7IWZ1bmN0aW9uKCl7ZnVuY3Rpb24gbigpe3JldHVybntrZXlzOk9iamVjdC5rZXlzfHxmdW5jdGlvbih0KXtpZihcIm9iamVjdFwiIT10eXBlb2YgdCYmXCJmdW5jdGlvblwiIT10eXBlb2YgdHx8bnVsbD09PXQpdGhyb3cgbmV3IFR5cGVFcnJvcihcImtleXMoKSBjYWxsZWQgb24gYSBub24tb2JqZWN0XCIpO3ZhciBlLG49W107Zm9yKGUgaW4gdCl0Lmhhc093blByb3BlcnR5KGUpJiYobltuLmxlbmd0aF09ZSk7cmV0dXJuIG59LHVuaXF1ZUlkOmZ1bmN0aW9uKHQpe3ZhciBlPSsrYStcIlwiO3JldHVybiB0P3QrZTplfSxoYXM6ZnVuY3Rpb24odCxlKXtyZXR1cm4gby5jYWxsKHQsZSl9LGVhY2g6ZnVuY3Rpb24odCxlLG4pe2lmKG51bGwhPXQpaWYociYmdC5mb3JFYWNoPT09cil0LmZvckVhY2goZSxuKTtlbHNlIGlmKHQubGVuZ3RoPT09K3QubGVuZ3RoKWZvcih2YXIgaT0wLG89dC5sZW5ndGg7bz5pO2krKyllLmNhbGwobix0W2ldLGksdCk7ZWxzZSBmb3IodmFyIHMgaW4gdCl0aGlzLmhhcyh0LHMpJiZlLmNhbGwobix0W3NdLHMsdCl9LG9uY2U6ZnVuY3Rpb24odCl7dmFyIGUsbj0hMTtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gbj9lOihuPSEwLGU9dC5hcHBseSh0aGlzLGFyZ3VtZW50cyksdD1udWxsLGUpfX19fXZhciBpLHI9QXJyYXkucHJvdG90eXBlLmZvckVhY2gsbz1PYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LHM9QXJyYXkucHJvdG90eXBlLnNsaWNlLGE9MCx1PW4oKTtpPXtvbjpmdW5jdGlvbih0LGUsbil7aWYoIWModGhpcyxcIm9uXCIsdCxbZSxuXSl8fCFlKXJldHVybiB0aGlzO3RoaXMuX2V2ZW50c3x8KHRoaXMuX2V2ZW50cz17fSk7dmFyIGk9dGhpcy5fZXZlbnRzW3RdfHwodGhpcy5fZXZlbnRzW3RdPVtdKTtyZXR1cm4gaS5wdXNoKHtjYWxsYmFjazplLGNvbnRleHQ6bixjdHg6bnx8dGhpc30pLHRoaXN9LG9uY2U6ZnVuY3Rpb24odCxlLG4pe2lmKCFjKHRoaXMsXCJvbmNlXCIsdCxbZSxuXSl8fCFlKXJldHVybiB0aGlzO3ZhciBpPXRoaXMscj11Lm9uY2UoZnVuY3Rpb24oKXtpLm9mZih0LHIpLGUuYXBwbHkodGhpcyxhcmd1bWVudHMpfSk7cmV0dXJuIHIuX2NhbGxiYWNrPWUsdGhpcy5vbih0LHIsbil9LG9mZjpmdW5jdGlvbih0LGUsbil7dmFyIGkscixvLHMsYSxoLGwsZjtpZighdGhpcy5fZXZlbnRzfHwhYyh0aGlzLFwib2ZmXCIsdCxbZSxuXSkpcmV0dXJuIHRoaXM7aWYoIXQmJiFlJiYhbilyZXR1cm4gdGhpcy5fZXZlbnRzPXt9LHRoaXM7Zm9yKHM9dD9bdF06dS5rZXlzKHRoaXMuX2V2ZW50cyksYT0wLGg9cy5sZW5ndGg7aD5hO2ErKylpZih0PXNbYV0sbz10aGlzLl9ldmVudHNbdF0pe2lmKHRoaXMuX2V2ZW50c1t0XT1pPVtdLGV8fG4pZm9yKGw9MCxmPW8ubGVuZ3RoO2Y+bDtsKyspcj1vW2xdLChlJiZlIT09ci5jYWxsYmFjayYmZSE9PXIuY2FsbGJhY2suX2NhbGxiYWNrfHxuJiZuIT09ci5jb250ZXh0KSYmaS5wdXNoKHIpO2kubGVuZ3RofHxkZWxldGUgdGhpcy5fZXZlbnRzW3RdfXJldHVybiB0aGlzfSx0cmlnZ2VyOmZ1bmN0aW9uKHQpe2lmKCF0aGlzLl9ldmVudHMpcmV0dXJuIHRoaXM7dmFyIGU9cy5jYWxsKGFyZ3VtZW50cywxKTtpZighYyh0aGlzLFwidHJpZ2dlclwiLHQsZSkpcmV0dXJuIHRoaXM7dmFyIG49dGhpcy5fZXZlbnRzW3RdLGk9dGhpcy5fZXZlbnRzLmFsbDtyZXR1cm4gbiYmbChuLGUpLGkmJmwoaSxhcmd1bWVudHMpLHRoaXN9LHN0b3BMaXN0ZW5pbmc6ZnVuY3Rpb24odCxlLG4pe3ZhciBpPXRoaXMuX2xpc3RlbmVycztpZighaSlyZXR1cm4gdGhpczt2YXIgcj0hZSYmIW47XCJvYmplY3RcIj09dHlwZW9mIGUmJihuPXRoaXMpLHQmJigoaT17fSlbdC5fbGlzdGVuZXJJZF09dCk7Zm9yKHZhciBvIGluIGkpaVtvXS5vZmYoZSxuLHRoaXMpLHImJmRlbGV0ZSB0aGlzLl9saXN0ZW5lcnNbb107cmV0dXJuIHRoaXN9fTt2YXIgaD0vXFxzKy8sYz1mdW5jdGlvbih0LGUsbixpKXtpZighbilyZXR1cm4hMDtpZihcIm9iamVjdFwiPT10eXBlb2Ygbil7Zm9yKHZhciByIGluIG4pdFtlXS5hcHBseSh0LFtyLG5bcl1dLmNvbmNhdChpKSk7cmV0dXJuITF9aWYoaC50ZXN0KG4pKXtmb3IodmFyIG89bi5zcGxpdChoKSxzPTAsYT1vLmxlbmd0aDthPnM7cysrKXRbZV0uYXBwbHkodCxbb1tzXV0uY29uY2F0KGkpKTtyZXR1cm4hMX1yZXR1cm4hMH0sbD1mdW5jdGlvbih0LGUpe3ZhciBuLGk9LTEscj10Lmxlbmd0aCxvPWVbMF0scz1lWzFdLGE9ZVsyXTtzd2l0Y2goZS5sZW5ndGgpe2Nhc2UgMDpmb3IoOysraTxyOykobj10W2ldKS5jYWxsYmFjay5jYWxsKG4uY3R4KTtyZXR1cm47Y2FzZSAxOmZvcig7KytpPHI7KShuPXRbaV0pLmNhbGxiYWNrLmNhbGwobi5jdHgsbyk7cmV0dXJuO2Nhc2UgMjpmb3IoOysraTxyOykobj10W2ldKS5jYWxsYmFjay5jYWxsKG4uY3R4LG8scyk7cmV0dXJuO2Nhc2UgMzpmb3IoOysraTxyOykobj10W2ldKS5jYWxsYmFjay5jYWxsKG4uY3R4LG8scyxhKTtyZXR1cm47ZGVmYXVsdDpmb3IoOysraTxyOykobj10W2ldKS5jYWxsYmFjay5hcHBseShuLmN0eCxlKX19LGY9e2xpc3RlblRvOlwib25cIixsaXN0ZW5Ub09uY2U6XCJvbmNlXCJ9O3UuZWFjaChmLGZ1bmN0aW9uKHQsZSl7aVtlXT1mdW5jdGlvbihlLG4saSl7dmFyIHI9dGhpcy5fbGlzdGVuZXJzfHwodGhpcy5fbGlzdGVuZXJzPXt9KSxvPWUuX2xpc3RlbmVySWR8fChlLl9saXN0ZW5lcklkPXUudW5pcXVlSWQoXCJsXCIpKTtyZXR1cm4gcltvXT1lLFwib2JqZWN0XCI9PXR5cGVvZiBuJiYoaT10aGlzKSxlW3RdKG4saSx0aGlzKSx0aGlzfX0pLGkuYmluZD1pLm9uLGkudW5iaW5kPWkub2ZmLGkubWl4aW49ZnVuY3Rpb24odCl7dmFyIGU9W1wib25cIixcIm9uY2VcIixcIm9mZlwiLFwidHJpZ2dlclwiLFwic3RvcExpc3RlbmluZ1wiLFwibGlzdGVuVG9cIixcImxpc3RlblRvT25jZVwiLFwiYmluZFwiLFwidW5iaW5kXCJdO3JldHVybiB1LmVhY2goZSxmdW5jdGlvbihlKXt0W2VdPXRoaXNbZV19LHRoaXMpLHR9LFwidW5kZWZpbmVkXCIhPXR5cGVvZiB0JiZ0LmV4cG9ydHMmJihlPXQuZXhwb3J0cz1pKSxlLkJhY2tib25lRXZlbnRzPWl9KHRoaXMpfSxmdW5jdGlvbih0LGUpe3ZhciBuPXtnZXRVcmxQYXJhbXM6ZnVuY3Rpb24odCl7dmFyIGU9e30sbj10LmluZGV4T2YoXCI/XCIpO3JldHVybiBuPi0xJiZ0LnN1YnN0cihuKzEpLnNwbGl0KFwiJlwiKS5mb3JFYWNoKGZ1bmN0aW9uKHQpe3ZhciBuPXQuc3BsaXQoXCI9XCIpO2VbblswXV09blsxXX0pLGV9LGdldFVybEhvc3Q6ZnVuY3Rpb24odCl7dmFyIGUsbj10LnNwbGl0KFwiLy9cIik7cmV0dXJuIGU9blswXT09PXQ/blswXS5zcGxpdChcIi9cIilbMF06blsxXT9uWzFdLnNwbGl0KFwiL1wiKVswXTpcIlwifX07dC5leHBvcnRzPW59LGZ1bmN0aW9uKHQsZSl7dmFyIG49e2V4dGVuZDpmdW5jdGlvbih0KXt2YXIgZT1BcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsMSk7cmV0dXJuIGUuZm9yRWFjaChmdW5jdGlvbihlKXtpZihlKWZvcih2YXIgbiBpbiBlKWUuaGFzT3duUHJvcGVydHkobikmJih0W25dPWVbbl0pfSksdH0sZWFjaDpmdW5jdGlvbih0LGUsbil7T2JqZWN0LmtleXModCkuZm9yRWFjaChmdW5jdGlvbihpKXtlLmNhbGwobnx8bnVsbCx0W2ldLGkpfSl9LHdpdGhvdXQ6ZnVuY3Rpb24odCxlKXt2YXIgbj10LmluZGV4T2YoZSk7bj4tMSYmdC5zcGxpY2UobiwxKX0scmVzdWx0OmZ1bmN0aW9uKHQpe3ZhciBlPXQ7cmV0dXJuIG4uaXNGdW5jdGlvbihlKSYmKGU9dCgpKSxlfSxpc0Z1bmN0aW9uOmZ1bmN0aW9uKHQpe3JldHVyblwiZnVuY3Rpb25cIj09dHlwZW9mIHR9LGFmdGVyOmZ1bmN0aW9uKHQsZSl7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuLS10PDE/ZS5hcHBseSh0aGlzLGFyZ3VtZW50cyk6dm9pZCAwfX0saXNOdWxsOmZ1bmN0aW9uKHQpe3JldHVybiBudWxsPT09dH0sb25jZTpmdW5jdGlvbih0KXt2YXIgZSxuPSExO3JldHVybiBmdW5jdGlvbigpe3JldHVybiBuP2U6KG49ITAsdm9pZChlPXQuYXBwbHkodGhpcyxhcmd1bWVudHMpKSl9fX07dC5leHBvcnRzPW59LGZ1bmN0aW9uKHQsZSl7dmFyIG49e0FBQzpcImFhY1wiLE1QMzpcIm1wM1wiLE9HRzpcIm9nZ1wiLE9QVVM6XCJvcHVzXCIsV0FWOlwid2F2XCJ9O3QuZXhwb3J0cz1ufSxmdW5jdGlvbih0LGUpe3ZhciBuPXtIVFRQOlwiaHR0cFwiLFJUTVA6XCJydG1wXCIsSExTOlwiaGxzXCJ9O3QuZXhwb3J0cz1ufSxmdW5jdGlvbih0LGUsbil7ZnVuY3Rpb24gaSh0KXtyZXR1cm4gaC5zdXBwb3J0c01lZGlhU291cmNlRXh0ZW5zaW9ucygpJiZ0Lm1lZGlhU291cmNlRW5hYmxlZCYmKGguaXNDaHJvbWUoKSYmaC5nZXRDaHJvbWVWZXJzaW9uKCk+PTM1fHxoLmlzRmlyZWZveCgpJiZ0Lm1zZUZpcmVmb3h8fGguaXNTYWZhcmkoKSYmdC5tc2VTYWZhcmkpfWZ1bmN0aW9uIHIodCl7cmV0dXJuIGZ1bmN0aW9uKGUpe3ZhciBuPSExO3N3aXRjaChlKXtjYXNlIHUuUlRNUDpuPWguc3VwcG9ydHNGbGFzaCgpO2JyZWFrO2Nhc2UgdS5IVFRQOm49aC5zdXBwb3J0c0hUTUw1QXVkaW8oKXx8aC5zdXBwb3J0c0ZsYXNoKCk7YnJlYWs7Y2FzZSB1LkhMUzpuPWkodCl9cmV0dXJuIG59fWZ1bmN0aW9uIG8odCl7cmV0dXJuIGguaXNTYWZhcmkoKXx8aC5pc0ZpcmVmb3goKT9bdS5ITFMsdS5IVFRQLHUuUlRNUF06dH1mdW5jdGlvbiBzKHQpe3QucHJvdG9jb2xzPW8odC5wcm90b2NvbHMpLmZpbHRlcihyKHQpKX12YXIgYSx1PW4oMTUpLGg9bigxNyk7YT17cHJpb3JpdGl6ZUFuZEZpbHRlcjpzfSx0LmV4cG9ydHM9YX0sZnVuY3Rpb24odCxlKXtmdW5jdGlvbiBuKHQpe3JldHVybiB0LnRlc3Qod2luZG93Lm5hdmlnYXRvci51c2VyQWdlbnQudG9Mb3dlckNhc2UoKSl9ZnVuY3Rpb24gaSh0LGUpe3RyeXtyZXR1cm4gd2luZG93Lm5hdmlnYXRvci51c2VyQWdlbnQudG9Mb3dlckNhc2UoKS5tYXRjaCh0KVtlXX1jYXRjaChuKXtyZXR1cm4gbnVsbH19ZnVuY3Rpb24gcigpe3RyeXtyZXR1cm4gcGFyc2VJbnQoaSgvY2hyb20oZXxpdW0pXFwvKFswLTldKylcXC4vLDIpLDEwKX1jYXRjaCh0KXtyZXR1cm4gTmFOfX1mdW5jdGlvbiBvKCl7cmV0dXJuIWgoKSYmbigvc2FmYXJpLyl9ZnVuY3Rpb24gcygpe3JldHVybiBvKCkmJm4oL3ZlcnNpb25cXC83XFwuMS8pfWZ1bmN0aW9uIGEoKXtyZXR1cm4gbygpJiZuKC92ZXJzaW9uXFwvOC8pJiYhbigvdmVyc2lvblxcLzgwLyl9ZnVuY3Rpb24gdSgpe3JldHVybiBvKCkmJm4oL3ZlcnNpb25cXC85XFwuLyl9ZnVuY3Rpb24gaCgpe3JldHVybiBuKC9jaHJvbShlfGl1bSkvKX1mdW5jdGlvbiBjKCl7cmV0dXJuIG4oL2ZpcmVmb3gvKX1mdW5jdGlvbiBsKCl7cmV0dXJuISF3aW5kb3cuTWVkaWFTb3VyY2UmJih3aW5kb3cuTWVkaWFTb3VyY2UuaXNUeXBlU3VwcG9ydGVkKFwiYXVkaW8vbXBlZ1wiKXx8d2luZG93Lk1lZGlhU291cmNlLmlzVHlwZVN1cHBvcnRlZChcImF1ZGlvL21wNFwiKSl9ZnVuY3Rpb24gZigpe3RyeXtyZXR1cm4gd2luZG93Lmhhc093blByb3BlcnR5KFwiQXVkaW9cIikmJiEhKG5ldyB3aW5kb3cuQXVkaW8pLmNhblBsYXlUeXBlKFwiYXVkaW8vbXBlZ1wiKX1jYXRjaCh0KXtyZXR1cm4hMX19ZnVuY3Rpb24gZCgpe3RyeXt2YXIgdD1vKCkmJm4oL3ZlcnNpb25cXC81XFwuMC8pLGU9d2luZG93Lmhhc093blByb3BlcnR5KFwiQXVkaW9cIikmJighIShuZXcgd2luZG93LkF1ZGlvKS5jYW5QbGF5VHlwZSgnYXVkaW8veC1tcGVnVVJMOyBjb2RlY3M9XCJtcDNcIicpfHwhIShuZXcgd2luZG93LkF1ZGlvKS5jYW5QbGF5VHlwZSgndm5kLmFwcGxlLm1wZWdVUkw7IGNvZGVjcz1cIm1wM1wiJykpO3JldHVybiF0JiZlfWNhdGNoKGkpe3JldHVybiExfX1mdW5jdGlvbiBwKCl7cmV0dXJuIF8oZygpKT49eX1mdW5jdGlvbiBnKCl7dmFyIHQsZSxuLGk7aWYoXCJ1bmRlZmluZWRcIiE9dHlwZW9mIHdpbmRvdy5BY3RpdmVYT2JqZWN0KXRyeXtpPW5ldyB3aW5kb3cuQWN0aXZlWE9iamVjdChcIlNob2Nrd2F2ZUZsYXNoLlNob2Nrd2F2ZUZsYXNoXCIpLGkmJih0PWkuR2V0VmFyaWFibGUoXCIkdmVyc2lvblwiKSl9Y2F0Y2gocil7dD1udWxsfWVsc2Ugd2luZG93Lm5hdmlnYXRvciYmd2luZG93Lm5hdmlnYXRvci5wbHVnaW5zJiZ3aW5kb3cubmF2aWdhdG9yLnBsdWdpbnMubGVuZ3RoPjAmJihuPVwiYXBwbGljYXRpb24veC1zaG9ja3dhdmUtZmxhc2hcIixlPXdpbmRvdy5uYXZpZ2F0b3IubWltZVR5cGVzLGUmJmVbbl0mJmVbbl0uZW5hYmxlZFBsdWdpbiYmZVtuXS5lbmFibGVkUGx1Z2luLmRlc2NyaXB0aW9uJiYodD1lW25dLmVuYWJsZWRQbHVnaW4uZGVzY3JpcHRpb24pKTtyZXR1cm4gdH1mdW5jdGlvbiBfKHQpe2lmKCF0KXJldHVybiAwO3ZhciBlPXQubWF0Y2goL1xcZFxcUysvKVswXS5yZXBsYWNlKC8sL2csXCIuXCIpLnNwbGl0KFwiLlwiKTtyZXR1cm4gcGFyc2VGbG9hdChbZVswXSxlWzFdXS5qb2luKFwiLlwiKSl8fDB9dmFyIG0seT05O209e2ZsYXNoUGx1Z2luOmcsaXNTYWZhcmk6byxpc1NhZmFyaTcxOnMsaXNTYWZhcmk4OmEsaXNTYWZhcmk5OnUsaXNDaHJvbWU6aCxnZXRDaHJvbWVWZXJzaW9uOnIsaXNGaXJlZm94OmMsc3VwcG9ydHNOYXRpdmVITFNBdWRpbzpkLHN1cHBvcnRzSFRNTDVBdWRpbzpmLHN1cHBvcnRzRmxhc2g6cCxzdXBwb3J0c01lZGlhU291cmNlRXh0ZW5zaW9uczpsfSx0LmV4cG9ydHM9bX0sZnVuY3Rpb24odCxlLG4pe2Z1bmN0aW9uIGkodCl7dmFyIGU9Zi5nZXRVcmxIb3N0KHQpO3JldHVybiBwLmV2ZXJ5KGZ1bmN0aW9uKHQpe3JldHVybiAwIT09ZS5pbmRleE9mKHQpfSl9ZnVuY3Rpb24gcih0LGUpe3JldHVybiEodD09PWMuSExTJiYhaShlKSl9ZnVuY3Rpb24gbyh0LGUpe2lmKCF0KXJldHVybiExO3ZhciBuPXQuaXNzdWVkQXQrcyh0LnByb3RvY29sLHQuZHVyYXRpb24pO3JldHVybiBhKHQucHJvdG9jb2wpP0RhdGUubm93KCkrdC5kdXJhdGlvbi0oZXx8MCk8bjpEYXRlLm5vdygpPG59ZnVuY3Rpb24gcyh0LGUpe3ZhciBuPWEodCk7cmV0dXJuIGcrKG4/bC5yZXN1bHQoZSk6MCl9ZnVuY3Rpb24gYSh0KXtyZXR1cm4gdD09PWMuSFRUUHx8dD09PWMuSExTfWZ1bmN0aW9uIHUodCxlKXtmdW5jdGlvbiBuKHQpe3JldHVybi0xKnR9ZnVuY3Rpb24gaSh0LGUpe3JldHVybiBNYXRoLmFicyhlLW0pLU1hdGguYWJzKHQtbSl9dmFyIG8scyxhLHUsaCxjLGYsZCxwLGcsXz17fSxtPWUubWF4Qml0cmF0ZSx5PWUucHJvdG9jb2xzLHY9ZS5leHRlbnNpb25zO2ZvcihsLmVhY2godCxmdW5jdGlvbih0LGUpe3ZhciBuPWUuc3BsaXQoXCJfXCIpLGk9blswXSxyPW5bMV0sbz1uWzJdO19baV09X1tpXXx8e30sX1tpXVtyXT1fW2ldW3JdfHx7fSxfW2ldW3JdW29dPXR9KSxoPTAsYz15Lmxlbmd0aDtjPmg7KytoKWZvcih1PXlbaF0sZD0wLHA9di5sZW5ndGg7cD5kOysrZClpZihmPXZbZF0sX1t1XSYmX1t1XVtmXSl7aWYobz1PYmplY3Qua2V5cyhfW3VdW2ZdKS5tYXAoTnVtYmVyKS5zb3J0KG4pLHM9bT09PTEvMCxhPW09PT0tKDEvMCksbT1zfHxhP29bcz9cInBvcFwiOlwic2hpZnRcIl0oKTpvLnNvcnQoaSkucG9wKCksZz1fW3VdW2ZdW21dLCFyKHUsZykpY29udGludWU7cmV0dXJue3VybDpnLGJpdHJhdGU6bSxwcm90b2NvbDp1LGV4dGVuc2lvbjpmLGlzc3VlZEF0OkRhdGUubm93KCksZHVyYXRpb246bC5yZXN1bHQoZS5kdXJhdGlvbil9fXJldHVybiBudWxsfXZhciBoLGM9bigxNSksbD1uKDEzKSxmPW4oMTIpLGQ9LjkscD1bXSxnPU1hdGguZmxvb3IoMTJlNCpkKTtoPXtjaG9vc2VQcmVmZXJyZWRTdHJlYW06dSxzdHJlYW1WYWxpZEZvclBsYXlpbmdGcm9tOm99LHQuZXhwb3J0cz1ofSxmdW5jdGlvbih0LGUsbil7dmFyIGkscixvPW4oNykscz1uKDEzKSxhPXtMaW5lYXI6MCxFYXNlT3V0OjEsRWFzZUluT3V0OjJ9LHU9NjAwLGg9MjU7dC5leHBvcnRzPWk9e30saS5Wb2x1bWVBdXRvbWF0b3I9cj1mdW5jdGlvbih0KXt0aGlzLnNjQXVkaW89dCx0aGlzLmZhZGVPdXRBbGdvPXRoaXMuc2NBdWRpby5vcHRpb25zLmZhZGVPdXRBbGdvLHRoaXMuZmFkZU91dFRpbWVyPW51bGwsdGhpcy5pbml0aWFsVm9sdW1lPXZvaWQgMCx0aGlzLnNjQXVkaW8ub3B0aW9ucy5mYWRlT3V0T25QYXVzZSYmci5pc1N1cHBvcnRlZCgpJiYodGhpcy5zY0F1ZGlvLm9uKG8uUExBWSx0aGlzLm9uUGxheSx0aGlzKSx0aGlzLnNjQXVkaW8ucmVnaXN0ZXJIb29rKFwicGF1c2VcIix0aGlzLmhvb2tQYXVzZS5iaW5kKHRoaXMpKSl9LGkuVm9sdW1lQXV0b21hdG9yLmlzU3VwcG9ydGVkPWZ1bmN0aW9uKCl7dmFyIHQ9bmV3IHdpbmRvdy5BdWRpbyxlPXQudm9sdW1lLG49MD09PWU/MTplLzI7cmV0dXJuIHQudm9sdW1lPW4sdC52b2x1bWU9PT1ufSxpLlZvbHVtZUF1dG9tYXRvci5BbGdvcz1hLHMuZXh0ZW5kKHIucHJvdG90eXBlLHtmYWRlT3V0QW5kUGF1c2U6ZnVuY3Rpb24oKXt2YXIgdD1EYXRlLm5vdygpLGU9ZnVuY3Rpb24oKXt2YXIgbixpPShEYXRlLm5vdygpLXQpL3Uscj10aGlzLmluaXRpYWxWb2x1bWU7aWYoaT49MSl0aGlzLnNjQXVkaW8uY29udHJvbGxlciYmdGhpcy5zY0F1ZGlvLmNvbnRyb2xsZXIucGF1c2UoKSx0aGlzLmNhbmNlbEZhZGVvdXQoKTtlbHNle3N3aXRjaCh0aGlzLmZhZGVPdXRBbGdvKXtjYXNlIGEuTGluZWFyOm49ciooMS1pKTticmVhaztjYXNlIGEuRWFzZU91dDpuPXIqKDEvKDEwKihpKy4xKSktLjA1KTticmVhaztjYXNlIGEuRWFzZUluT3V0OmRlZmF1bHQ6bj1yKihNYXRoLmNvcyhpKk1hdGguUEkpLzIrLjUpfXRoaXMuc2NBdWRpby5zZXRWb2x1bWUobiksd2luZG93LmNsZWFyVGltZW91dCh0aGlzLmZhZGVPdXRUaW1lciksdGhpcy5mYWRlT3V0VGltZXI9d2luZG93LnNldFRpbWVvdXQoZSxoKX19LmJpbmQodGhpcyk7dGhpcy5pbml0aWFsVm9sdW1lPXRoaXMuc2NBdWRpby5nZXRWb2x1bWUoKSxlKCl9LGNhbmNlbEZhZGVvdXQ6ZnVuY3Rpb24oKXt0aGlzLmZhZGVPdXRUaW1lciYmKHdpbmRvdy5jbGVhclRpbWVvdXQodGhpcy5mYWRlT3V0VGltZXIpLHRoaXMuZmFkZU91dFRpbWVyPW51bGwsdGhpcy5zY0F1ZGlvLnNldFZvbHVtZSh0aGlzLmluaXRpYWxWb2x1bWUpLHRoaXMuaW5pdGlhbFZvbHVtZT12b2lkIDApfSxob29rUGF1c2U6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuZmFkZU91dEFuZFBhdXNlKCksITF9LG9uUGxheTpmdW5jdGlvbigpe3RoaXMuY2FuY2VsRmFkZW91dCgpfX0pfV0pfSxmdW5jdGlvbih0LGUpe31dKX0pO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9c2RrLmpzLm1hcFxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9zb3VuZGNsb3VkL3Nkay5qc1xuLy8gbW9kdWxlIGlkID0gMFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJpbXBvcnQgVG9hc3QgZnJvbSAnLi4vY29udHJvbHMvdG9hc3QnO1xyXG5cclxuY2xhc3MgVXRpbHMge1xyXG5cclxuICAgICAvKipcclxuICAgICAqIFNpbXBsZSBmdW5jdGlvbiB0byBjb252ZXJ0IG1pbGxpc2Vjb25kcyB0byBhIHN0cmluZyB3aXRoIG1pbnV0ZXMgYW5kIHNlY29uZHNcclxuICAgICAqIEBwYXJhbSB7KmludH0gbWlsbGlzIC0gdGltZSBpbiBtaWxsaXNlY29uZHNcclxuICAgICAqL1xyXG4gICAgc3RhdGljIGNvbnZlcnRNaWxsaXNlY29uZHNUb0RpZ2l0YWxDbG9jayhtcykge1xyXG4gICAgICAgIGxldCBob3VycyA9IE1hdGguZmxvb3IobXMgLyAzNjAwMDAwKSwgLy8gMSBIb3VyID0gMzYwMDAgTWlsbGlzZWNvbmRzXHJcbiAgICAgICAgbWludXRlcyA9IE1hdGguZmxvb3IoKG1zICUgMzYwMDAwMCkgLyA2MDAwMCksIC8vIDEgTWludXRlcyA9IDYwMDAwIE1pbGxpc2Vjb25kc1xyXG4gICAgICAgIHNlY29uZHMgPSBNYXRoLmZsb29yKCgobXMgJSAzNjAwMDApICUgNjAwMDApIC8gMTAwMCkgLy8gMSBTZWNvbmQgPSAxMDAwIE1pbGxpc2Vjb25kc1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIGhvdXJzIDogaG91cnMsXHJcbiAgICAgICAgICAgIG1pbnV0ZXMgOiBtaW51dGVzLFxyXG4gICAgICAgICAgICBzZWNvbmRzIDogc2Vjb25kcyxcclxuICAgICAgICAgICAgY2xvY2sgOiAoKGhvdXJzID09PSAwKSA/ICcnIDogaG91cnMgKyAnOicpICsgKHNlY29uZHMgPCAxMCAmJiBob3VycyA+IDAgPyAnMCcgOiAnJykgKyBtaW51dGVzICsgJzonICsgKHNlY29uZHMgPCAxMCA/ICcwJyA6ICcnKSArIHNlY29uZHNcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogR3JhYiBhIHJhbmRvbSBpbWFnZSB3aGVuIGEgc29uZyBkb2VzIG5vdCBoYXZlIGNvdmVyIGFydC5cclxuICAgICAqL1xyXG4gICAgc3RhdGljIGZldGNoUmFuZG9tSW1hZ2UoKSB7XHJcbiAgICAgICAgbGV0IGkgPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiA0MDUwKSArIDE7XHJcbiAgICAgICAgcmV0dXJuIGBodHRwOi8vaW1nLmluZmluaXR5bmV3dGFiLmNvbS93YWxscGFwZXIvJHtpfS5qcGdgO1xyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyBzaG93VG9hc3QobWVzc2FnZSkge1xyXG4gICAgICAgIHRoaXMudG9hc3RDb250YWluZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndG9hc3RDb250YWluZXInKTtcclxuICAgICAgICB0aGlzLnRvYXN0Q29udGFpbmVyLmlubmVySFRNTCA9IFRvYXN0KG1lc3NhZ2UsICcnKTtcclxuICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkgeyBcclxuICAgICAgICAgICAgJCgnI3RvYXN0JykuYWRkQ2xhc3MoJ3Nob3duJyk7XHJcbiAgICAgICAgfSwgNTAwKTtcclxuICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkgeyAvLyBIaWRlIHRvYXN0XHJcbiAgICAgICAgICAgICQoJyN0b2FzdCcpLnJlbW92ZUNsYXNzKCdzaG93bicpO1xyXG4gICAgICAgIH0sIDMwMDApO1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBVdGlscztcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3B1YmxpYy9qcy91dGlscy5qc1xuLy8gbW9kdWxlIGlkID0gMVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJtb2R1bGUuZXhwb3J0cyA9IHtcblx0XCJjbGllbnRfaWRcIjogXCIydDlsb05RSDkwa3pKY3NGQ09EZGlneGZwMzI1YXE0elwiLFxuXHRcImNsaWVudF9zZWNyZXRcIjogXCJhMDVrU000MTh4bmhwU3ZQVlBYelFCUmptTzFzOEdXV1wiXG59O1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vY29uc3RzLXNlYy5qc29uXG4vLyBtb2R1bGUgaWQgPSAyXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsImNsYXNzIFNldHRpbmdzIHtcclxuXHJcbiAgICBzdGF0aWMgbG9hZFByZWZzKCkge1xyXG4gICAgICAgIHRoaXMuYmF0dGVyeVNhdmVyQ1NTID0gXCI8c3R5bGUgaWQ9J2JhdHRlcnlTYXZlcic+KiB7LXdlYmtpdC1maWx0ZXI6IG5vbmUgIWltcG9ydGFudDtmaWx0ZXI6IG5vbmUgIWltcG9ydGFudDsgdHJhbnNpdGlvbjogbm9uZSAhaW1wb3J0YW50OyAtd2Via2l0LXRyYW5zaXRpb246IG5vbmU7ICFpbXBvcnRhbnR9I2hpc3RJdGVtQmcgey13ZWJraXQtZmlsdGVyOiBicmlnaHRuZXNzKC41KSAhaW1wb3J0YW50O2ZpbHRlcjogYnJpZ2h0bmVzcyguNSkgIWltcG9ydGFudDsgfTwvc3R5bGU+XCI7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gRGVmYXVsdCBzZXR0aW5ncyBvYmplY3RcclxuICAgICAgICB0aGlzLl9zZXR0aW5ncyA9IHtcclxuICAgICAgICAgICAgYmF0dGVyeVNhdmVyOiBmYWxzZVxyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLl9zZXR0aW5ncy5iYXR0ZXJ5U2F2ZXIgPSB0aGlzLmdldFByZWYoJ2JhdHRlcnlTYXZlcicpIHx8IGZhbHNlO1xyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyBzdG9yZVByZWYobmFtZSwgdmFsdWUpIHtcclxuICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShuYW1lLCB2YWx1ZSk7XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIGdldFByZWYobmFtZSkge1xyXG4gICAgICAgIHJldHVybiBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShuYW1lKTtcclxuICAgIH1cclxuXHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IFNldHRpbmdzO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vcHVibGljL2pzL3NldHRpbmdzLmpzXG4vLyBtb2R1bGUgaWQgPSAzXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsImNvbnN0IFRvYXN0ID0gKHRleHQsIHNob3duKSA9PiAoXHJcbiAgICBgXHJcbiAgICAgICAgPGRpdiBjbGFzcz1cInRvYXN0ICR7c2hvd259XCIgaWQ9XCJ0b2FzdFwiPlxyXG4gICAgICAgICAgICA8cCBjbGFzcz1cInRleHQtY2VudGVyXCI+JHt0ZXh0fTwvcD5cclxuICAgICAgICA8L2Rpdj5cclxuICAgIGBcclxuKTtcclxuZXhwb3J0IGRlZmF1bHQgVG9hc3RcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3B1YmxpYy9jb250cm9scy90b2FzdC5qc1xuLy8gbW9kdWxlIGlkID0gNFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJpbXBvcnQgY29uc3RzIGZyb20gJy4uLy4uL2NvbnN0cy1zZWMuanNvbic7XHJcbmltcG9ydCBIaXN0SXRlbSBmcm9tICcuLi9jb250cm9scy9IaXN0SXRlbSc7XHJcbmltcG9ydCBTb25nSW5mbyBmcm9tICcuLi9jb250cm9scy9zb25naW5mbyc7XHJcbmltcG9ydCBXYXZlRm9ybSBmcm9tICcuLi9jb250cm9scy93YXZlZm9ybSc7XHJcbmltcG9ydCBSZXF1ZXN0IGZyb20gJy4vcmVxdWVzdCc7XHJcbmltcG9ydCBTZWFyY2hEaWFsb2cgZnJvbSAnLi4vY29udHJvbHMvc2VhcmNoJztcclxuaW1wb3J0IFRvYXN0IGZyb20gJy4uL2NvbnRyb2xzL3RvYXN0JztcclxuaW1wb3J0IERhc2hib2FyZCBmcm9tICcuLi9jb250cm9scy9kYXNoYm9hcmQnO1xyXG5pbXBvcnQgVXRpbHMgZnJvbSAnLi91dGlscyc7XHJcbmltcG9ydCBTZXR0aW5ncyBmcm9tICcuL3NldHRpbmdzJztcclxuXHJcbmNvbnN0IFNDID0gcmVxdWlyZSgnc291bmRjbG91ZCcpOyAvLyBJbXBvcnQgbm9kZSBtb2R1bGVcclxuXHJcbi8vIFNvdW5kY2xvdWQgUHJvcGVydGllcyBcclxuXHJcbi8vIE9sZGVzdCByYW5nZSAoYXJvdW5kIDIwMDcgb253YXJkKVxyXG5jb25zdCBSQU5EX0NPVU5UID0gOTAwMDA7XHJcbmNvbnN0IE9GRlNFVCA9IDA7XHJcblxyXG4vLyBHb2luZyBmcm9tIDIwMTBcclxuY29uc3QgUkFORF9DT1VOVF8xID0gNzAwMDAwMDtcclxuY29uc3QgT0ZGU0VUXzEgPSAzMDAwMDAwO1xyXG5cclxuLy8gTW9yZSBSZWNlbnRcclxuY29uc3QgUkFORF9DT1VOVF8yID0gOTAwMDAwMDA7XHJcbmNvbnN0IE9GRlNFVF8yID0gMTAwMDAwMDA7XHJcblxyXG4vLyBUaGUgZnJlc2ggc3R1ZmZcclxuY29uc3QgUkFORF9DT1VOVF8zID0gMzAwMDAwMDAwO1xyXG5jb25zdCBPRkZTRVRfMyA9IDEwMDAwMDAwMDtcclxuXHJcbi8vIFdpZGdldCBQYXJhbWV0ZXJzXHJcbi8vY29uc3QgV0lER0VUX1BBUkFNUyA9ICcmbGlraW5nPWZhbHNlJnNob3dfYXJ0d29yaz1mYWxzZSZzaG93X2NvbW1lbnRzPWZhbHNlJnNob3dfcGxheWNvdW50PWZhbHNlJnZpc3VhbD1mYWxzZSc7XHJcbmNvbnN0IFdJREdFVF9QQVJBTVMgPSAnJztcclxuXHJcbmNsYXNzIFBsYXllciB7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBTZXRzIHVwIHRoZSB0aGUgYXBwbGljYXRpb24gdmFyaWFibGVzIGFuZCBob29raW5nIGV2ZW50cyB0byBjb250cm9scy5cclxuICAgICAqL1xyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgLy8gSW5pdGlhbGl6ZSB2YXJpYWJsZXNcclxuICAgICAgICB0aGlzLmhpc3RvcnkgPSBbXTtcclxuICAgICAgICB0aGlzLnF1ZXVlID0gW107IC8vIEZvciB0cmFja3MgcGxheWluZyBuZXh0XHJcbiAgICAgICAgdGhpcy5pc1BsYXlpbmcgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLmN1clBsYXllciA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5jdXJQb3NpdGlvbiA9IDA7XHJcbiAgICAgICAgdGhpcy53YXZlZm9ybSA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5pc1JlcGVhdGluZyA9IGZhbHNlOyAvLyBGb3IgcmVwZWF0aW5nIHNvbmdzXHJcbiAgICAgICAgdGhpcy5oYXNCZWVuRmV0Y2hlZCA9IGZhbHNlOyAvLyBVc2VkIHRvIHN0b3AgZHVwbGljYXRlcyBkdXJpbmcgcmVjdXJzaW9uXHJcbiAgICAgICAgdGhpcy50aW1lclVwZGF0ZSA9IDA7XHJcbiAgICAgICAgdGhpcy5pc1BsYXlsaXN0ID0gZmFsc2U7IC8vIENoZWNrIGlmIHdlIGFyZSBwbGF5aW5nIGEgcGxheWxpc3QuXHJcbiAgICAgICAgdGhpcy5zZXRDdXJJbmRleCA9IDA7IC8vIFRoZSBjdXJyZW50IGluZGV4IG9mIHRoZSBzb25nIGluIHRoZSBwbGF5bGlzdFxyXG4gICAgICAgIHRoaXMuc2V0VHJhY2tDb3VudCA9IDA7IC8vIFRoaXMgaG9sZHMgdGhlIG51bWJlciBvZiB0cmFja3MgaW4gdGhlIHBsYXlsaXN0IHNvIHdlIGNhbiB0ZWxsIHdoZW4gd2UgaGF2ZSByZWFjaGVkIHRoZSBlbmQuXHJcbiAgICAgICAgdGhpcy5zaHVmZmxlUXVldWUgPSBmYWxzZTsgLy8gU2hvdWxkIHRoZSBxdWV1ZSBiZSBzaHVmZmxlZCB3aGVuIHdlIGdldCBhIGxpc3Qgb2YgdHJhY2tzO1xyXG4gICAgICAgIHRoaXMucXVldWVOdW0gPSAxMjA7IC8vIEhvdyBtYW55IHJlc3VsdHMgdG8gYWRkIHRvIHRoZSBxdWV1ZVxyXG5cclxuICAgICAgICAvLyBFeHBlcmltZW50YWwgQVBJIHYyIEVuZHBvaW50XHJcbiAgICAgICAgdGhpcy5TT1VORENMT1VEX0FQSV9WMiA9ICdodHRwczovL2FwaS12Mi5zb3VuZGNsb3VkLmNvbS8nO1xyXG5cclxuICAgICAgICAvLyBXaWRnZXQgUHJvcHNcclxuICAgICAgICB0aGlzLndpZGdldFRyYWNrID0ge1xyXG4gICAgICAgICAgICBjb3ZlcjogJycsXHJcbiAgICAgICAgICAgIHRpdGxlOiAnJyxcclxuICAgICAgICAgICAgaWQ6IDAsXHJcbiAgICAgICAgICAgIGFydGlzdDogJycsXHJcbiAgICAgICAgICAgIHBlcm1hbGlua191cmw6ICcnLFxyXG4gICAgICAgICAgICBkZXNjcmlwdGlvbjogJycsXHJcbiAgICAgICAgICAgIGNyZWF0ZWRfYXQ6ICcnLFxyXG4gICAgICAgICAgICBkdXJhdGlvbjogMCxcclxuICAgICAgICAgICAgY3VycmVudFBvc2l0aW9uOiAwXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgLy8gQmluZCBwYWdlIGVsZW1lbnRzIFxyXG4gICAgICAgIHRoaXMuYmluZENvbnRyb2xFbGVtZW50cygpO1xyXG4gICAgICAgIHRoaXMuYmluZENvbnRyb2xFdmVudHMoKTtcclxuXHJcbiAgICAgICAgLy8gSW5pdGlhbGl6ZSBTZWFyY2ggZGlhbG9nXHJcbiAgICAgICAgdGhpcy5zZWFyY2hEaWFsb2cgPSBuZXcgU2VhcmNoRGlhbG9nKHRoaXMpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIEluaXRpYWxpemUgdGhlIGRhc2hib2FyZCwgYWxzbyBpbml0aWFsaXplcyBzZXR0aW5nc1xyXG4gICAgICAgIHRoaXMuZGFzaGJvYXJkID0gbmV3IERhc2hib2FyZCh0aGlzKTtcclxuXHJcbiAgICAgICAgLy8gU2V0dGluZ3MgYWxyZWFkeSBJbml0aWFsaXplZFxyXG4gICAgICAgIGlmIChKU09OLnBhcnNlKFNldHRpbmdzLmdldFByZWYoJ2JhdHRlcnlTYXZlcicpKSkge1xyXG4gICAgICAgICAgICAkKFNldHRpbmdzLmJhdHRlcnlTYXZlckNTUykuYXBwZW5kVG8oXCJoZWFkXCIpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gTG9hZCBhIHRyYWNrIHdoZW4gdGhlIGFwcCBpcyBsb2FkZWQgKHRha2UgdXJsIHBhcmFtIGludG8gYWNjb3VudCkuXHJcbiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3dpZGdldHRlc3QnKS5zZXRBdHRyaWJ1dGUoJ3NyYycsICdodHRwczovL3cuc291bmRjbG91ZC5jb20vcGxheWVyLz91cmw9aHR0cHMlM0EvL2FwaS5zb3VuZGNsb3VkLmNvbS90cmFja3MvMTcwMjAyMTUxJyArIFdJREdFVF9QQVJBTVMpO1xyXG4gICAgICAgIGxldCBpZnJhbWVJRCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd3aWRnZXR0ZXN0Jyk7XHJcbiAgICAgICAgdGhpcy5jdXJQbGF5ZXIgPSBTQy5XaWRnZXQoaWZyYW1lSUQpO1xyXG4gICAgICAgIC8vIFVwZGF0ZSB0aGUgcGxheWVyXHJcbiAgICAgICAgdGhpcy5iaW5kV2lkZ2V0RXZlbnRzKHRoaXMuY3VyUGxheWVyKTsgLy8gQmluZCBldmVudCBoYW5kbGVycyBmb3Igd2lkZ2V0LlxyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIENoZWNrIGZvciBwYXJhbXMgYW5kIHRoZW4gZGVjaWRlIHdoYXQgdG8gcGxheVxyXG4gICAgICAgIHRoaXMuY2hlY2tQYXJhbXNBbmRGZXRjaCgpO1xyXG5cclxuICAgICAgICBjb25zb2xlLmxvZygnY29uc3RydWN0IGRvbmUnKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEJpbmRzIHRoZSBwYWdlIGVsZW1lbnRzIHRvIEpTIG9iamVjdHMgc28gd2UgY2FuIGFjY2VzcyB0aGVtIGluIG90aGVyIGZ1bmN0aW9ucy5cclxuICAgICAqL1xyXG4gICAgYmluZENvbnRyb2xFbGVtZW50cygpIHtcclxuICAgICAgICB0aGlzLm1haW5QbGF5ZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc29uZ0NvbnRhaW5lcicpO1xyXG4gICAgICAgIHRoaXMucGxheUJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwbGF5LWJ0bicpO1xyXG4gICAgICAgIHRoaXMuaGlzdENvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdoaXN0Q29udGFpbmVyJyk7XHJcbiAgICAgICAgdGhpcy5idG5GZiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzZWVrLWZ3LWJ0bicpO1xyXG4gICAgICAgIHRoaXMuYnRuQmsgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2Vlay1iay1idG4nKTtcclxuICAgICAgICB0aGlzLmJ0blNlYXJjaCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjdXN0b20tYnRuJyk7XHJcbiAgICAgICAgdGhpcy5idG5SZXBlYXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmVwZWF0LWJ0bicpO1xyXG4gICAgICAgIHRoaXMuYnRuRGFzaGJvYXJkID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Rhc2hib2FyZC1idG4nKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEJpbmRzIGNvbXBvbmVudHMgb24gdGhlIHBhZ2UgdG8gY29tbWFuZHMgb24gYWN0aW9uLlxyXG4gICAgICovXHJcbiAgICBiaW5kQ29udHJvbEV2ZW50cygpIHtcclxuICAgICAgICB0aGlzLnBsYXlCdG4ub25jbGljayA9IChlKSA9PiB7XHJcbiAgICAgICAgICAgIC8vIGlmICh0aGlzLmN1clBsYXllciA9PT0gbnVsbCAmJiAhdGhpcy5pc1BsYXlpbmcpXHJcbiAgICAgICAgICAgIC8vICAgICB0aGlzLnVwZGF0ZVN0cmVhbSh0aGlzLmdldFJhbmRvbVRyYWNrKCkpO1xyXG4gICAgICAgICAgICB0aGlzLnRvZ2dsZVBsYXkoKTtcclxuXHJcbiAgICAgICAgICAgIC8vIENoZWNrIGlmIHNvbmcgdGl0bGUgbWF0Y2hlcyB0aXRsZSBpbiBhcHBcclxuICAgICAgICAgICAgaWYgKCQoJyNzb25nVGl0bGUnKS52YWx1ZSAhPT0gdGhpcy5jdXJQbGF5ZXIudGl0bGUpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuY3VyUGxheWVyLmdldEN1cnJlbnRTb3VuZCgoc29uZykgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlU29uZ0luZm8oc29uZyk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gRXZlbnQgaGFuZGxlciBmb3Igc2Vla2luZyBmb3J3YXJkIC8gZmV0Y2ggbmV3IHNvbmdcclxuICAgICAgICB0aGlzLmJ0bkZmLm9uY2xpY2sgPSAoZSkgPT4ge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5xdWV1ZS5sZW5ndGggPiAwIHx8IHRoaXMuaXNQbGF5bGlzdCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zZWVrRm9yd2FyZCgpOyAvLyBTZWVrIGZvcndhcmQgaW4gcXVldWVcclxuICAgICAgICAgICAgfSBlbHNlIHsgLy8gRWxzZSBqdXN0IGxvYWQgYW5vdGhlciBzb25nXHJcbiAgICAgICAgICAgICAgICB0aGlzLmZldGNoTmV4dCgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBFdmVudCBoYW5kbGVyIGZvciBzZWVraW5nIGJhY2tcclxuICAgICAgICB0aGlzLmJ0bkJrLm9uY2xpY2sgPSAoZSkgPT4ge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5jdXJQb3NpdGlvbiA+IDEwMDAwKSB7IC8vIElmIHRoZSBzb25nIGlzIHBhc3QgMTAgc2Vjb25kcywgcmVzZXQgc29uZyBiYWNrIHRvIGJlZ2lubmluZyAobGlrZSBpbiBTcG90aWZ5KVxyXG4gICAgICAgICAgICAgICAgdGhpcy5yZXN0YXJ0U29uZygpO1xyXG4gICAgICAgICAgICB9IGVsc2UgeyAvLyBFbHNlLCBnbyB0byB0aGUgbGFzdCBzb25nXHJcbiAgICAgICAgICAgICAgICB0aGlzLnNlZWtCYWNrKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIEV2ZW50IGhhbmRsZXIgdG8gcGxheSBjdXN0b20gc29uZ1xyXG4gICAgICAgIHRoaXMuYnRuU2VhcmNoLm9uY2xpY2sgPSAoZSkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLnNlYXJjaERpYWxvZy50b2dnbGVTZWFyY2hEaWFsb2coKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gRXZlbnQgaGFuZGxlciBmb3IgcmVwZWF0c1xyXG4gICAgICAgIHRoaXMuYnRuUmVwZWF0Lm9uY2xpY2sgPSAoZSkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLmlzUmVwZWF0aW5nID0gIXRoaXMuaXNSZXBlYXRpbmc7IC8vIFRvZ2dsZSB0aGUgdmFsdWVcclxuICAgICAgICAgICAgaWYgKHRoaXMuaXNSZXBlYXRpbmcpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuYnRuUmVwZWF0LnN0eWxlLmNvbG9yID0gJyNmZjIxNjAnO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5idG5SZXBlYXQuc3R5bGUuY29sb3IgPSAnaW5oZXJpdCc7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIEV2ZW50IGhhbmRsZXIgdG8gc2hvdyBkYXNoYm9hcmRcclxuICAgICAgICB0aGlzLmJ0bkRhc2hib2FyZC5vbmNsaWNrID0gKGUpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5kYXNoYm9hcmQudG9nZ2xlRGFzaGJvYXJkKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBCaW5kIGtleWJvYXJkIHNob3J0Y3V0c1xyXG4gICAgICAgIGRvY3VtZW50Lm9ua2V5ZG93biA9IChlKSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChlLmtleUNvZGUgPT0gMzIpIHtcclxuICAgICAgICAgICAgICAgIC8vIHNwYWNlIGtleSB0byB0b2dnbGUgcGxheWJhY2tcclxuICAgICAgICAgICAgICAgIHZhciB0YWcgPSBlLnRhcmdldC50YWdOYW1lLnRvTG93ZXJDYXNlKCk7XHJcbiAgICAgICAgICAgICAgICBpZiAodGFnICE9ICdpbnB1dCcpIC8vIElnbm9yZSB0aGUgc2VhcmNoIGZpZWxkXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50b2dnbGVQbGF5KCk7XHJcblxyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGUuc2hpZnRLZXkgJiYgZS5rZXlDb2RlID09IDM4KSB7XHJcbiAgICAgICAgICAgICAgICAvLyBzaGlmdCB1cFxyXG4gICAgICAgICAgICAgICAgdGhpcy52b2x1bWVVcCgxMCk7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZS5zaGlmdEtleSAmJiBlLmtleUNvZGUgPT0gNDApIHtcclxuICAgICAgICAgICAgICAgIC8vIHNoaWZ0IGRvd25cclxuICAgICAgICAgICAgICAgIHRoaXMudm9sdW1lRG93bigxMCk7XHJcblxyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGUuc2hpZnRLZXkgJiYgZS5rZXlDb2RlID09IDY2KSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgaWQgPSBwcm9tcHQoXCJFbnRlciBzb25nIGlkLlwiKTtcclxuICAgICAgICAgICAgICAgIGlmIChpZCA9PSBudWxsKVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuXHJcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnd2lkZ2V0dGVzdCcpLnNldEF0dHJpYnV0ZSgnc3JjJywgYGh0dHBzOi8vdy5zb3VuZGNsb3VkLmNvbS9wbGF5ZXIvP3VybD1odHRwcyUzQS8vYXBpLnNvdW5kY2xvdWQuY29tL3RyYWNrcy8ke2lkfWAgKyBXSURHRVRfUEFSQU1TKTtcclxuICAgICAgICAgICAgICAgIGxldCBpZnJhbWVJRCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd3aWRnZXR0ZXN0Jyk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmN1clBsYXllciA9IFNDLldpZGdldChpZnJhbWVJRCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmN1clBsYXllci5sb2FkKGBodHRwcyUzQS8vYXBpLnNvdW5kY2xvdWQuY29tL3RyYWNrcy8ke2lkfWAgKyBXSURHRVRfUEFSQU1TKTtcclxuICAgICAgICAgICAgICAgIC8vIFVwZGF0ZSB0aGUgcGxheWVyXHJcbiAgICAgICAgICAgICAgICB0aGlzLmJpbmRXaWRnZXRFdmVudHModGhpcy5jdXJQbGF5ZXIpOyAvLyBCaW5kIGV2ZW50IGhhbmRsZXJzIGZvciB3aWRnZXQuXHJcbiAgICAgICAgICAgICAgICB0aGlzLnRvZ2dsZVBsYXkoKTtcclxuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gdGhpcy5sb2FkV2lkZ2V0U29uZyh0aGlzLmN1clBsYXllciksIDEwMDApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEF0dGVtcHRzIHRvIGxvYWQgaW5mb3JtYXRpb24gYXNzb2NpYXRlZCB0byB0aGUgd2lkZ2V0IHRvIGxvY2FsIHZhcnMgYW5kIGRpc3BsYXlzIHRoZW1cclxuICAgICAqIEBwYXJhbSB7U291bmRDbG91ZFdpZGdldH0gd2lkZ2V0IC0gd2lkZ2V0IGxvYWRlZCBieSBBUElcclxuICAgICAqL1xyXG4gICAgbG9hZFdpZGdldFNvbmcod2lkZ2V0KSB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ2xvYWR3aWRnZXRzb25nIGNhbGxlZCcpO1xyXG4gICAgICAgICAgICB0aGlzLndhdmVmb3JtID0gbnVsbDsgLy8gUmVzZXQgdGhlIHJlZmVyZW5jZVxyXG4gICAgICAgICAgICB3aWRnZXQuZ2V0Q3VycmVudFNvdW5kKChzb25nKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKHNvbmcpO1xyXG4gICAgICAgICAgICAgICAgbGV0IHJuZEltZyA9IFV0aWxzLmZldGNoUmFuZG9tSW1hZ2UoKTtcclxuICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlU29uZ0luZm8oc29uZyk7XHJcblxyXG4gICAgICAgICAgICAgICAgbGV0IGZvdW5kID0gZmFsc2U7IC8vIEJvb2xlYW4gdG8gc2VlIGlmIHRoZSBzb25nIGV4aXN0c1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuaGlzdG9yeS5sZW5ndGggPiAwIHx8IHRoaXMucXVldWUubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBzb25nTGlzdCA9IHRoaXMuaGlzdG9yeS5jb25jYXQodGhpcy5xdWV1ZSk7IC8vIFVzZSB0aGlzIHRvIHByZXZlbnQgYWRkaW5nIGFueSBkdXBsaWNhdGVzXHJcbiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzb25nTGlzdC5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoc29uZ0xpc3RbaV0uX3Jlc291cmNlX2lkID09PSBzb25nLl9yZXNvdXJjZV9pZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm91bmQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFmb3VuZCkgeyAvLyBBcHBlbmQgdGhlIHNvbmcgaWYgbm90IGZvdW5kXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaGlzdG9yeS5wdXNoKHNvbmcpOyAvLyBQdXNoIHRoZSB0cmFjayBzbyBpdCBjYW4gYmUgcmVwbGF5ZWQgZnJvbSBoaXN0b3J5LiBcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGggPSBuZXcgSGlzdEl0ZW0oKHNvbmcuYXJ0d29ya191cmwgPT09IG51bGwgPyBybmRJbWcgOiBzb25nLmFydHdvcmtfdXJsKSwgc29uZywgdGhpcywgXCJqYXZhc2NyaXB0OmFsZXJ0KCdEb3dubG9hZCBsaW5rIHVuYXZhaWxhYmxlJyk7XCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmhpc3RDb250YWluZXIuYXBwZW5kQ2hpbGQoaC5yZW5kZXIoKSk7IC8vIEFwcGVuZCB0byBoaXN0b3J5XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAkKCcuYWN0aW9uLWJhci1pdGVtJykuY2xpY2soKGUpID0+IHsgLy8gU3RvcCBidXR0b24gY2xpY2tzIGZyb20gdHJpZ2dlcmluZyBwbGF5aW5nIHRoZSBzb25nXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaGlzdG9yeS5wdXNoKHNvbmcpOyAvLyBQdXNoIHRoZSB0cmFjayBzbyBpdCBjYW4gYmUgcmVwbGF5ZWQgZnJvbSBoaXN0b3J5LiBcclxuICAgICAgICAgICAgICAgICAgICBsZXQgaCA9IG5ldyBIaXN0SXRlbSgoc29uZy5hcnR3b3JrX3VybCA9PT0gbnVsbCA/IHJuZEltZyA6IHNvbmcuYXJ0d29ya191cmwpLCBzb25nLCB0aGlzLCBcImphdmFzY3JpcHQ6YWxlcnQoJ0Rvd25sb2FkIGxpbmsgdW5hdmFpbGFibGUnKTtcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5oaXN0Q29udGFpbmVyLmFwcGVuZENoaWxkKGgucmVuZGVyKCkpOyAvLyBBcHBlbmQgdG8gaGlzdG9yeVxyXG4gICAgICAgICAgICAgICAgICAgICQoJy5hY3Rpb24tYmFyLWl0ZW0nKS5jbGljaygoZSkgPT4geyAvLyBTdG9wIGJ1dHRvbiBjbGlja3MgZnJvbSB0cmlnZ2VyaW5nIHBsYXlpbmcgdGhlIHNvbmdcclxuICAgICAgICAgICAgICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICB0aGlzLmhhc0JlZW5GZXRjaGVkID0gZmFsc2U7IC8vIFJlc2V0XHJcblxyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ2dldGN1cnJlbnRzb3VuZCBkb25lJyk7XHJcbiAgICAgICAgICAgIH0sIChlcnIpID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVyci5tZXNzYWdlKTtcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAvLyBVcGRhdGUgdGhlIHBsYXkgc3RhdGVcclxuICAgICAgICAgICAgdGhpcy50b2dnbGVQbGF5U3RhdGUodHJ1ZSk7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9IGNhdGNoIChleCkge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhleC5tZXNzYWdlKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgdXBkYXRlU29uZ0luZm8oc29uZykge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCdnZXRjdXJyZW50c291bmQgc3RhcnQnKTtcclxuICAgICAgICAvLyBpZiggL0FuZHJvaWR8d2ViT1N8aVBob25lfGlQYWR8aVBvZHxCbGFja0JlcnJ5fElFTW9iaWxlfE9wZXJhIE1pbmkvaS50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpKSB7IC8vIEF0dGVtcHQgdG8gZml4IG9uIG1vYmlsZSBkZXZpY2VzXHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgIC8vICAgICAvLyBTb3JyeSBjYW4gbm90IGF1dG8gcGxheSBvbiBtb2JpbGUgPV8oXHJcbiAgICAgICAgLy8gICAgIC8vIGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vcXVlc3Rpb25zLzI2MDY2MDYyL2F1dG9wbGF5LWh0bWw1LWF1ZGlvLXBsYXllci1vbi1tb2JpbGUtYnJvd3NlcnNcclxuICAgICAgICAvLyAgICAgLy8gTmVlZCB0byB1c2UgdHJpY2suXHJcbiAgICAgICAgLy8gICAgIC8vIHdpZGdldC5wbGF5KCk7XHJcbiAgICAgICAgLy8gICAgIC8vIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgIC8vICAgICAvLyAgICAgICAgICQoJyNwbGF5LWJ0bicpLnRyaWdnZXIoJ2NsaWNrJyk7IC8vIENhbm5vdCBmaXggYXV0b3BsYXkgaXNzdWUsIGJ1dCBub3cgdXNlcnMgY2FuIHBsYXkgdGhlIHRyYWNrIHdpdGggMSB0YXAgb2YgdGhlIHBsYXkgYnV0dG9uIGluc3RlYWQgbyBzZXZlcmFsIChidWcgZml4KVxyXG4gICAgICAgIC8vICAgICAvLyAgICAgICAgIGNvbnNvbGUubG9nKCd0ZXN0IHBsYXknKVxyXG4gICAgICAgIC8vICAgICAvLyAgICAgfSwgMjAwMCk7XHJcbiAgICAgICAgLy8gICAgIC8vIHRoaXMudG9nZ2xlUGxheVN0YXRlKHRydWUpO1xyXG4gICAgICAgIC8vIH0gZWxzZSB7XHJcbiAgICAgICAgdGhpcy5jdXJQbGF5ZXIucGxheSgpOyAvLyBQbGF5IG5vcm1hbGx5IG9uIG5vbiBtb2JpbGVcclxuICAgICAgICB0aGlzLnRvZ2dsZVBsYXlTdGF0ZSh0cnVlKTtcclxuICAgICAgICAvL31cclxuICAgICAgICB0aGlzLmlzUGxheWluZyA9IHRydWU7XHJcbiAgICAgICAgbGV0IHJuZEltZyA9IFV0aWxzLmZldGNoUmFuZG9tSW1hZ2UoKTtcclxuICAgICAgICB0aGlzLndpZGdldFRyYWNrLmNvdmVyID0gc29uZy5hcnR3b3JrX3VybDtcclxuICAgICAgICB0aGlzLndpZGdldFRyYWNrLnRpdGxlID0gc29uZy50aXRsZTtcclxuICAgICAgICB0aGlzLndpZGdldFRyYWNrLmlkID0gc29uZy5pZDtcclxuICAgICAgICB0aGlzLndpZGdldFRyYWNrLmFydGlzdCA9IHNvbmcudXNlci51c2VybmFtZSB8fCAnTi9BJzsgLy8gU29tZSB0cmFja3MgZG9uJ3QgaGF2ZSBhIHVzZXJubWUgYXNzb2NpYXRlZFxyXG4gICAgICAgIHRoaXMud2lkZ2V0VHJhY2sucGVybWFsaW5rX3VybCA9IHNvbmcucGVybWFsaW5rX3VybDtcclxuICAgICAgICB0aGlzLndpZGdldFRyYWNrLmRlc2NyaXB0aW9uID0gc29uZy5kZXNjcmlwdGlvbiB8fCAnTi9BJztcclxuICAgICAgICB0aGlzLndpZGdldFRyYWNrLmNyZWF0ZWRfYXQgPSBzb25nLmNyZWF0ZWRfYXQ7XHJcbiAgICAgICAgdGhpcy53aWRnZXRUcmFjay5kdXJhdGlvbiA9IHNvbmcuZHVyYXRpb24gfHwgJ04vQSc7XHJcbiAgICAgICAgdGhpcy53aWRnZXRUcmFjay5jdXJyZW50UG9zaXRpb24gPSAwO1xyXG5cclxuICAgICAgICBkb2N1bWVudC50aXRsZSA9IGBcXHUyNUI2ICAgTmltYnVzIC0gJHt0aGlzLndpZGdldFRyYWNrLnRpdGxlfWA7XHJcblxyXG4gICAgICAgIC8vIENyZWF0ZSB0YWcgbGlzdFxyXG4gICAgICAgIGxldCB0YWdCdG5zID0gYGA7XHJcbiAgICAgICAgbGV0IHRhZ0NvbGxlY3Rpb24gPSBzb25nLnRhZ19saXN0O1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIEdldCB0YWdzIHRoYXQgYXJlIGluc2lkZSBxdW90ZXMgYWxyZWFkeSAodHJlYXQgbXVsdGlwbGUgd29yZHMgYXMgMSB0YWcpXHJcbiAgICAgICAgbGV0IHF1b3RlZFRhZ3MgPSBzb25nLnRhZ19saXN0Lm1hdGNoKC8oW1wiJ10pKD86KD89KFxcXFw/KSlcXDIuKSo/XFwxL2cpO1xyXG5cclxuICAgICAgICAvLyBDbGVhbiB0aGUgb3JpZ2luYWwgbGlzdFxyXG4gICAgICAgIHRhZ0NvbGxlY3Rpb24gPSB0YWdDb2xsZWN0aW9uLnJlcGxhY2UoLyhbXCInXSkoPzooPz0oXFxcXD8pKVxcMi4pKj9cXDEvZywgJycpOyAvLyBSZW1vdmUgYWxsIGRvdWJsZSBxdW90ZWQgZW50cmllc1xyXG4gICAgICAgIHRhZ0NvbGxlY3Rpb24gPSB0YWdDb2xsZWN0aW9uLnNwbGl0KCcgJyk7XHJcbiAgICAgICAgdGFnQ29sbGVjdGlvbiA9IHRhZ0NvbGxlY3Rpb24uY29uY2F0KHF1b3RlZFRhZ3MpO1xyXG5cclxuICAgICAgICBpZiAoc29uZy50YWdfbGlzdCAhPT0gJycpIHtcclxuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0YWdDb2xsZWN0aW9uLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgdGFnTmFtZSA9IHRhZ0NvbGxlY3Rpb25baV07XHJcbiAgICAgICAgICAgICAgICBpZiAodGFnTmFtZSAhPT0gJycgJiYgdGFnTmFtZSAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRhZ05hbWUgPSB0YWdOYW1lLnJlcGxhY2UoL1xcXCIvZywgJycpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRhZ0J0bnMgKz0gYDxhIGhyZWY9XCJodHRwczovL3NvdW5kY2xvdWQuY29tL3RhZ3MvJHt0YWdOYW1lfVwiIHRhcmdldD1cIl9ibGFua1wiPjxidXR0b24gY2xhc3M9XCJidG4tdHJhbnNwYXJlbnRcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgIyR7dGFnTmFtZX1cclxuICAgICAgICAgICAgICAgICAgICA8L2J1dHRvbj48L2E+XHJcbiAgICAgICAgICAgICAgICAgICAgYDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5tYWluUGxheWVyLmlubmVySFRNTCA9IFNvbmdJbmZvKChzb25nLmFydHdvcmtfdXJsID09PSBudWxsID8gc29uZy51c2VyLmF2YXRhcl91cmwgOiBzb25nLmFydHdvcmtfdXJsLnJlcGxhY2UoJ2xhcmdlJywgJ3Q1MDB4NTAwJykpLCBzb25nLCB0YWdCdG5zLCBcImphdmFzY3JpcHQ6YWxlcnQoJ1B1cmNoYXNlIGxpbmsgdW5hdmFpbGFibGUnKTtcIik7XHJcbiAgICAgICAgLy90aGlzLmN1clRyYWNrLnRyYWNrID0gdHJhY2s7XHJcbiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2JhY2tncm91bmQnKS5zdHlsZS5iYWNrZ3JvdW5kSW1hZ2UgPSAndXJsKCcgKyAoc29uZy5hcnR3b3JrX3VybCA9PT0gbnVsbCA/IHJuZEltZyA6IHNvbmcuYXJ0d29ya191cmwucmVwbGFjZSgnbGFyZ2UnLCAndDUwMHg1MDAnKSkgKyAnKSc7XHJcblxyXG4gICAgICAgIC8vIEFkZCBsaXN0ZW5lciBmb3IgZmxpcENvbnRhaW5lclxyXG4gICAgICAgIHRoaXMuZmxpcENvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmbGlwQ29udGFpbmVyJyk7XHJcbiAgICAgICAgdGhpcy5mbGlwQ29udGFpbmVyLm9uY2xpY2sgPSAoZSkgPT4ge1xyXG4gICAgICAgICAgICAkKCcjZmxpcENvbnRhaW5lcicpLnRvZ2dsZUNsYXNzKCdmbGlwcGVkJyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLnZvbHVtZVNsaWRlciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd2b2x1bWVTbGlkZXInKTtcclxuXHJcbiAgICAgICAgLy8gVXBkYXRlIHRoZSB2b2x1bWVcclxuICAgICAgICB0aGlzLmN1clBsYXllci5nZXRWb2x1bWUoKHZvbCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLnZvbHVtZVNsaWRlci52YWx1ZSA9IHZvbDtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGhpcy52b2x1bWVTbGlkZXIuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgKCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLmN1clBsYXllci5zZXRWb2x1bWUodGhpcy52b2x1bWVTbGlkZXIudmFsdWUpO1xyXG4gICAgICAgIH0sIGZhbHNlKTtcclxuXHJcbiAgICAgICAgLy8gQXN5bmMgbWV0aG9kIHRvIGJ1aWxkIHdhdmVmb3JtXHJcbiAgICAgICAgKGFzeW5jIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICBsZXQgcmVxID0gbmV3IFJlcXVlc3QoKTsgLy8gQ29uc3RydWN0IGl0XHJcbiAgICAgICAgICAgIGxldCBkYXRhID0gYXdhaXQgcmVxLmdldEpTT04oc29uZy53YXZlZm9ybV91cmwpO1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhzb25nLndhdmVmb3JtX3VybCk7XHJcblxyXG4gICAgICAgICAgICAvLyBEcmF3IHRoZSB3YXZlZm9ybVxyXG4gICAgICAgICAgICBjb25zdCB3YXZlRm9ybUNvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy53YXZlZm9ybScpO1xyXG4gICAgICAgICAgICBpZiAoIXRoaXMud2F2ZWZvcm0pIHtcclxuICAgICAgICAgICAgICAgIHRoaXMud2F2ZWZvcm0gPSBuZXcgV2F2ZUZvcm0oe1xyXG4gICAgICAgICAgICAgICAgY29udGFpbmVyOiB3YXZlRm9ybUNvbnRhaW5lcixcclxuICAgICAgICAgICAgICAgIGF1ZGlvOiB0aGlzLmN1clBsYXllcixcclxuICAgICAgICAgICAgICAgIGR1cmF0aW9uOiBzb25nLmR1cmF0aW9uLFxyXG4gICAgICAgICAgICAgICAgZGF0YTogZGF0YS5zYW1wbGVzLFxyXG4gICAgICAgICAgICAgICAgcGVha1dpZHRoOiAyLFxyXG4gICAgICAgICAgICAgICAgcGVha1NwYWNlOiAxLFxyXG4gICAgICAgICAgICAgICAgcmVzcG9uc2l2ZTogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIG1vdXNlT3ZlckV2ZW50czogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIG1vdXNlQ2xpY2tFdmVudHM6IHRydWUsXHJcbiAgICAgICAgICAgICAgICBjb2xvcjoge1xyXG4gICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmQ6IFwicmdiYSgxNDAsIDE0MCwgMTQwLCAwLjcpXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgZm9vdGVyOiBcInJnYmEoOTAsIDkwLCA5MCwgMC42KVwiLFxyXG4gICAgICAgICAgICAgICAgICAgIGZvb3RlclBsYXliYWNrOiBcIiM1ZDE4MzVcIixcclxuICAgICAgICAgICAgICAgICAgICBob3ZlckdyYWRpZW50OiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZyb206IFwiI2Q5MWU1M1wiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0bzogXCIjZDkxZTUzXCJcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIHBsYXliYWNrR3JhZGllbnQ6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZnJvbTogXCIjZDkxZTUzXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRvOiBcIiNkOTFlNTNcIlxyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgaG92ZXJQbGF5YmFja0dyYWRpZW50OiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZyb206IFwiI2ZmMjE2MFwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0bzogXCIjZmYyMTYwXCJcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGF3YWl0IHdhdmVmb3JtLnVwZGF0ZVdhdmVmb3JtRGF0YShkYXRhLnNhbXBsZXMpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB9KS5iaW5kKHRoaXMpKCk7XHJcblxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogVGhlIHN0YXJ0aW5nIHBvaW50IG9mIHRoZSBhcHBsaWNhdGlvbiBjYWxsZWQgYnkgYXBwLmpzLiBUaGlzIGluaXRhbGl6ZXMgdGhlIFNvdW5kQ2xvdWQgQVBJLlxyXG4gICAgICovXHJcbiAgICBzdGFydCgpIHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBTQy5pbml0aWFsaXplKHtcclxuICAgICAgICAgICAgICAgIGNsaWVudF9pZDogY29uc3RzLmNsaWVudF9pZFxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdFcnJvciBpbml0aWFsaXppbmcgU291bmRDbG91ZCBBUEkuIFN0YWNrIHRyYWNlOiAnICsgZS50b1N0cmluZygpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc29sZS5sb2coJ1NvdW5kQ2xvdWQgQVBJIGluaXRhbGl6ZWQhJyk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBCaW5kIGV2ZW50IGhhbmRsZXJzIHRvIHRoZSB3aWRnZXRcclxuICAgICAqIEBwYXJhbSB7U291bmRDbG91ZFdpZGdldH0gd2lkZ2V0IC0gd2lkZ2V0IGxvYWRlZCBmcm9tIEFQSVxyXG4gICAgICovXHJcbiAgICBiaW5kV2lkZ2V0RXZlbnRzKHdpZGdldCkge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKFwiY29vbFwiKTtcclxuICAgICAgICB0aGlzLmN1clBsYXllciA9IHdpZGdldDtcclxuICAgICAgICB3aWRnZXQuYmluZChTQy5XaWRnZXQuRXZlbnRzLlJFQURZLCAoZSkgPT4ge1xyXG5cclxuICAgICAgICAgICAgLy8gQmluZCB3aGVuIHRoZSBzb25nIGlzIHBsYXlpbmdcclxuICAgICAgICAgICAgd2lkZ2V0LmJpbmQoU0MuV2lkZ2V0LkV2ZW50cy5QTEFZX1BST0dSRVNTLCAoZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jdXJQb3NpdGlvbiA9IGUuY3VycmVudFBvc2l0aW9uO1xyXG4gICAgICAgICAgICAgICAgbGV0IGN1clRpbWVTdHIgPSBVdGlscy5jb252ZXJ0TWlsbGlzZWNvbmRzVG9EaWdpdGFsQ2xvY2soZS5jdXJyZW50UG9zaXRpb24pLmNsb2NrO1xyXG4gICAgICAgICAgICAgICAgbGV0IHRvdGFsVGltZVN0ciA9IFV0aWxzLmNvbnZlcnRNaWxsaXNlY29uZHNUb0RpZ2l0YWxDbG9jayh0aGlzLndpZGdldFRyYWNrLmR1cmF0aW9uKS5jbG9jaztcclxuICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjdXJUaW1lJykuaW5uZXJUZXh0ID0gYCR7Y3VyVGltZVN0cn0gLyAke3RvdGFsVGltZVN0cn1gO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAvLyBGb3Igc29tZSByZWFzb24gRklOSVNIIGV2ZW50IG5vIGxvbmdlciBmaXJlcyB3aGVuIGNoYW5naW5nIHNvbmdzIGluIHBsYXlsaXN0LCBtYW51YWwgb3ZlcnJpZGUgaGVyZVxyXG4gICAgICAgICAgICAgICAgaWYgKGUuY3VycmVudFBvc2l0aW9uID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuaXNQbGF5bGlzdCAmJiAhdGhpcy5pc1JlcGVhdGluZykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmxvYWRXaWRnZXRTb25nKHRoaXMuY3VyUGxheWVyKTsgLy8gVXBkYXRlIHRyYWNrIGluZm8gdG8gdGhlIG5leHQgc29uZyBpbiB0aGUgcGxheWxpc3RcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMuaXNQbGF5bGlzdCAmJiB0aGlzLmlzUmVwZWF0aW5nKSB7IC8vIFJlcGxheSBzZXRcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jdXJQbGF5ZXIucGF1c2UoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmN1clBsYXllci5wcmV2KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmxvYWRXaWRnZXRTb25nKHRoaXMuY3VyUGxheWVyKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSwgNTAwKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIC8vIEJpbmQgd2hlbiB0aGUgc29uZyBoYXMgZmluaXNoZWRcclxuICAgICAgICAgICAgd2lkZ2V0LmJpbmQoU0MuV2lkZ2V0LkV2ZW50cy5GSU5JU0gsIChlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAvLyBXaGVuIHRoZSBzb25nIGZpbmlzaGVzLCB3ZSBuZWVkIHRvIGZpbmQgYSBuZXcgc29uZyB0byBwbGF5LlxyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ2ZpbmlzaGVkJyk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmlzUGxheWluZyA9IGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgICAgIC8vIENoZWNrIGlmIHVzZXIgaXMgcGxheWluZyBhIHBsYXlsaXN0XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5pc1BsYXlsaXN0ICYmICF0aGlzLmlzUmVwZWF0aW5nKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IG9sZFNvbmdJRCA9IHRoaXMud2lkZ2V0VHJhY2suaWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50b2dnbGVQbGF5KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5sb2FkV2lkZ2V0U29uZyh0aGlzLmN1clBsYXllcik7IC8vIFVwZGF0ZSB0cmFjayBpbmZvIHRvIHRoZSBuZXh0IHNvbmcgaW4gdGhlIHBsYXlsaXN0XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5pc1BsYXlpbmcgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ2hlY2sgaWYgd2UgaGF2ZSByZWFjaGVkIHRoZSBlbmQgb2YgdGhlIHBsYXlsaXN0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvbGRTb25nSUQgPT09IHRoaXMud2lkZ2V0VHJhY2suaWQpIHsgLy8gSWYgdGhlIGxhc3Qgc29uZyB3ZSBwbGF5ZWQgaGFzIHRoZSBzYW1lIElEIGFzIHRoZSBuZXcgb25lLCBmZXRjaCBhIG5ldyBzb25nLiAoU291bmRDbG91ZCBlbmRzIHVwIGxvb3BpbmcgdGhlIGxhc3Qgc29uZyBhZ2FpbilcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaXNQbGF5bGlzdCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRDdXJJbmRleCA9IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNldFRyYWNrQ291bnQgPSAwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5mZXRjaE5leHQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVzdGFydFNvbmcoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudG9nZ2xlUGxheSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jdXJQbGF5ZXIucGxheSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSwgMjAwKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gQ2hlY2sgaWYgcmVwZWF0IGlzIG9uIGZpcnN0LiBUT0RPOiBNYWtlIGl0IHdvcmsgd2l0aCBwbGF5bGlzdHNcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmlzUmVwZWF0aW5nKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuaXNQbGF5bGlzdCkgeyAvLyBJZiB3ZSBhcmUgcmVwZWF0aW5nIGluIGEgcGxheWxpc3QsIHdlIG5lZWQgdG8gZ28gYmFjayB0byBwcmV2aW91cyBzb25nIHNpbmNlIHRoZSBBUEkgcHJlbG9hZHMgdGhlIG5leHQgb25lXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVzdGFydFNvbmcoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jdXJQbGF5ZXIucGF1c2UoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jdXJQbGF5ZXIucGF1c2UoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dCh0aGlzLmN1clBsYXllci5wcmV2KCksIDIwMCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBFbHNlIHdlIGNhbiBqdXN0IHJlc3RhcnQgdGhlIHNvbmcgKEFQSSBkb2VzIG5vdCBwcmVsb2FkIHNvbmcpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVzdGFydFNvbmcoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy50b2dnbGVQbGF5KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIC8vIENoZWNrIGlmIHRoZSBxdWV1ZSBpcyBub3QgZW1wdHkgYW5kIHBsYXkgd2hhdGV2ZXIgc29uZyB0aGF0IGlzIG5leHQgaW4gdGhlIHF1ZXVlXHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5xdWV1ZS5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IG5leHRTb25nID0gdGhpcy5xdWV1ZS5wb3AoKTsgLy8gUG9wIHRoZSBuZXh0IHNvbmdcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG5leHRTb25nKSB7IC8vIElmIG5vdCBudWxsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY3VyUGxheWVyLmxvYWQobmV4dFNvbmcucGVybWFsaW5rX3VybCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gdGhpcy5sb2FkV2lkZ2V0U29uZyh0aGlzLmN1clBsYXllciksIDIwMDApOyAvLyBVcGRhdGUgcGxheWVyIGluZm8sIHNvbmcgd2lsbCBiZSBhZGRlZCB0byBoaXN0b3J5IGhlcmVcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKCF0aGlzLmhhc0JlZW5GZXRjaGVkKSB7IC8vIElmIHdlIGhhdmUgZmV0Y2hlZCBhIHNvbmcgYWxyZWFkeSwgZG8gbm90IGZldGNoIGFub3RoZXIgb25lLlxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZmV0Y2hOZXh0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5oYXNCZWVuRmV0Y2hlZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgLy8gQmluZCBwbGF5IHN0YXRlIGV2ZW50XHJcbiAgICAgICAgICAgIHdpZGdldC5iaW5kKFNDLldpZGdldC5FdmVudHMuUExBWSwgKGUpID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMudG9nZ2xlUGxheVN0YXRlKHRydWUpO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIC8vIEJpbmQgcGF1c2Ugc3RhdGUgZXZlbnRcclxuICAgICAgICAgICAgd2lkZ2V0LmJpbmQoU0MuV2lkZ2V0LkV2ZW50cy5QQVVTRSwgKGUpID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMudG9nZ2xlUGxheVN0YXRlKGZhbHNlKTtcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAvLyBUaHJvdyBlcnJvciBpbiBjYXNlIHVzZXIgZW50ZXJzIGludmFsaWQgVVJMXHJcbiAgICAgICAgICAgIHdpZGdldC5iaW5kKFNDLldpZGdldC5FdmVudHMuRVJST1IsIChlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBhbGVydCgnRXJyb3IsIHVuYWJsZSB0byBsb2FkIHJlc291cmNlLicpO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBUaGlzIGZ1bmN0aW9uIGlzIGRlc2lnbmVkIHRvIGdldCBhIHJhbmRvbSB0cmFjayBmcm9tIFNvdW5kQ2xvdWRcclxuICAgICAqL1xyXG4gICAgZ2V0UmFuZG9tVHJhY2soKSB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgLy8gQ2hvb3NlIHRvIHVzZSBvbGQgdHJhY2sgaWRzIG9yIG5ldyB0cmFjayBpZHNcclxuICAgICAgICAgICAgbGV0IGNob29zZUlkID0gKE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDEwKSk7XHJcbiAgICAgICAgICAgIGxldCB0cmFja0lkID0gMDtcclxuXHJcbiAgICAgICAgICAgIC8vIEdlbmVyYXRlIHJhbmRvbSBzb25nIGlkLiBHaXZlIHNsaWdodCBwcmVmZXJlbmNlIHRvIG5ld2VyIHRyYWNrcyBcclxuICAgICAgICAgICAgaWYgKGNob29zZUlkID4gNCkge1xyXG4gICAgICAgICAgICAgICAgdHJhY2tJZCA9IE1hdGguZmxvb3IoKE1hdGgucmFuZG9tKCkgKiBSQU5EX0NPVU5UXzMpICsgT0ZGU0VUXzMpO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGNob29zZUlkID4gMikge1xyXG4gICAgICAgICAgICAgICAgdHJhY2tJZCA9IE1hdGguZmxvb3IoKE1hdGgucmFuZG9tKCkgKiBSQU5EX0NPVU5UXzIpICsgT0ZGU0VUXzIpO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGNob29zZUlkID4gMSkge1xyXG4gICAgICAgICAgICAgICAgdHJhY2tJZCA9IE1hdGguZmxvb3IoKE1hdGgucmFuZG9tKCkgKiBSQU5EX0NPVU5UXzEpICsgT0ZGU0VUXzEpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdHJhY2tJZCA9IE1hdGguZmxvb3IoKE1hdGgucmFuZG9tKCkgKiBSQU5EX0NPVU5UKSArIE9GRlNFVCk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdpbiBpZCcpO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHRyYWNrSWQ7XHJcbiAgICAgICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnZ2V0UmFuZG9tVHJhY2soKSAtICcgKyBlLnRvU3RyaW5nKCkpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEV4dHJhY3RzIGFkZHJlc3MgcGFyYW10ZXJzIGJ5IG5hbWUgYW5kIGxvYWRzIHRoZSBhcHByb3ByaWF0ZSBjb250ZW50LlxyXG4gICAgICogXHJcbiAgICAgKiBcclxuICAgICAqIEBtZW1iZXJvZiBQbGF5ZXJcclxuICAgICAqL1xyXG4gICAgY2hlY2tQYXJhbXNBbmRGZXRjaCgpIHtcclxuICAgICAgICAvLyBGZXRjaCBwYXJhbSB2YWx1ZXMgaWYgcHJlc2VudFxyXG4gICAgICAgIGxldCBpZCA9IHRoaXMuZ2V0VVJMUGFyYW1zQnlOYW1lKCdpZCcsIHdpbmRvdy5sb2NhdGlvbi5ocmVmKTtcclxuICAgICAgICBsZXQgdXJsID0gdGhpcy5nZXRVUkxQYXJhbXNCeU5hbWUoJ3VybCcsIHdpbmRvdy5sb2NhdGlvbi5ocmVmKTtcclxuXHJcbiAgICAgICAgLy8gRG8gbm90IGZldGNoIGEgcmFuZG9tIHNvbmcgaWYgYW4gaWQgd2FzIGFscmVhZHkgcHJvdmlkZWRcclxuICAgICAgICBpZiAoaWQpIC8vIGlkIHRha2VzIHRha2VzIHByZWNlZGVuY2VcclxuICAgICAgICAgICAgdGhpcy5zdHJlYW1Tb25nKGlkKTtcclxuICAgICAgICBlbHNlIGlmICh1cmwpXHJcbiAgICAgICAgICAgIHRoaXMuY3VyUGxheWVyLmxvYWQodXJsKTsgLy8gTG9hZCB0aGUgc29uZyBieSB1cmwgKFdpZGdldCBBUEkgdGFrZXMgY2FyZSBvZiB0aGUgcmVzdClcclxuICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIHRoaXMuZmV0Y2hOZXh0KCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBVcGRhdGUgdGhlIFVJIGNvbnRyb2xzIGZvciB3aGVuIHRoZSBzb25nIGlzIHBsYXlpbmdcclxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gcGxheWluZyAtIGlmIHRoZSBzb25nIGlzIHBsYXlpbmcgb3Igbm90XHJcbiAgICAgKi9cclxuICAgIHRvZ2dsZVBsYXlTdGF0ZShwbGF5aW5nKSB7XHJcbiAgICAgICAgaWYgKHBsYXlpbmcpIHtcclxuICAgICAgICAgICAgdGhpcy5wbGF5QnRuLmlubmVySFRNTCA9ICc8aSBjbGFzcz1cImZhIGZhLXBhdXNlXCIgYXJpYS1oaWRkZW49XCJ0cnVlXCI+PC9pPic7XHJcbiAgICAgICAgICAgIGRvY3VtZW50LnRpdGxlID0gYFxcdTI1QjYgICBOaW1idXMgLSAke3RoaXMud2lkZ2V0VHJhY2sudGl0bGV9YDtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLnBsYXlCdG4uaW5uZXJIVE1MID0gJzxpIGNsYXNzPVwiZmEgZmEtcGxheVwiIGFyaWEtaGlkZGVuPVwidHJ1ZVwiPjwvaT4nO1xyXG4gICAgICAgICAgICBkb2N1bWVudC50aXRsZSA9IGBcXHUyM0Y4ICAgTmltYnVzIC0gJHt0aGlzLndpZGdldFRyYWNrLnRpdGxlfWA7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIFVUSUwgZnVuY3Rpb25zXHJcbiAgICAvKipcclxuICAgICAqIFNlZWsgdG8gbmV4dCBzb25nIGluIHF1ZXVlXHJcbiAgICAgKi9cclxuICAgIHNlZWtGb3J3YXJkKCkge1xyXG4gICAgICAgIC8vIElmIHdlIGFyZSBpbiBwbGF5bGlzdCBtb2RlLCBwbGF5IHRoZSBuZXh0IHNvbmcgaW4gdGhlIHBsYXlsaXN0IGFuZCBkbyBub3QgZmV0Y2ggYSBuZXcgc29uZ1xyXG4gICAgICAgIGNvbnNvbGUubG9nKHRoaXMuaXNQbGF5bGlzdCk7XHJcbiAgICAgICAgaWYgKHRoaXMuaXNQbGF5bGlzdCkge1xyXG4gICAgICAgICAgICBsZXQgbmV4dFNvbmdJRCA9IHRoaXMud2lkZ2V0VHJhY2suaWQ7XHJcbiAgICAgICAgICAgIHRoaXMucmVzdGFydFNvbmcoKTtcclxuICAgICAgICAgICAgdGhpcy5jdXJQbGF5ZXIucGF1c2UoKTtcclxuICAgICAgICAgICAgdGhpcy5jdXJQbGF5ZXIucGF1c2UoKTsgLy8gV2lkZ2V0IG5vdCByZWFsbHkgcmVzcG9uc2l2ZSB3aGVuIHVzZXIgZ29lcyBiYWNrIGFuZCBmb3J0aCBxdWlja2x5XHJcbiAgICAgICAgICAgIHNldFRpbWVvdXQodGhpcy5jdXJQbGF5ZXIubmV4dCgpLCAyMDApO1xyXG4gICAgICAgICAgICB0aGlzLnJlc3RhcnRTb25nKCk7IC8vIFNlZW1zIHdlaXJkIHRvIGNhbGwgcmVzdGFydFNvbmcoKSBzbyBtYW55IHRpbWVzLCBidXQgdGhpcyBpcyB1c2VkIHRvIHJlc2V0IHRoZSBzb25ncyBhbmQgYXZvaWQgdGhlIHdlaXJkIGJ1ZyB3aGVyZSB0aGUgcGxheWVyIHBsYXlzIDIgc29uZ3Mgc2ltdWxhdGVub3VzbHkuXHJcbiAgICAgICAgICAgIHRoaXMuY3VyUGxheWVyLnBsYXkoKTtcclxuICAgICAgICAgICAgdGhpcy5jdXJQbGF5ZXIucGF1c2UoKTsgLy8gU2FtZSBpbnRlcnJ1cHRlZCBQcm9taXNlIGlzc3VlIGZyb20gQVBJXHJcbiAgICAgICAgICAgIHRoaXMuY3VyUGxheWVyLnBsYXkoKTtcclxuICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmxvYWRXaWRnZXRTb25nKHRoaXMuY3VyUGxheWVyKTtcclxuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHRoaXMud2lkZ2V0VHJhY2suaWQgKyAnIC0gJyArIG5leHRTb25nSUQpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLndpZGdldFRyYWNrLmlkID09PSBuZXh0U29uZ0lEKSB7IC8vIElmIHdlIGhhdmUgcmVhY2hlZCB0aGUgZW5kIG9mIHRoZSBwbGF5bGlzdFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmlzUGxheWxpc3QgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRDdXJJbmRleCA9IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0VHJhY2tDb3VudCA9IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZmV0Y2hOZXh0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSwgMjAwKTtcclxuXHJcbiAgICAgICAgICAgIH0sIDIwMCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgbGV0IG5leHRTb25nID0gdGhpcy5xdWV1ZS5wb3AoKTsgLy8gUG9wIHRoZSBuZXh0IHNvbmdcclxuXHJcbiAgICAgICAgICAgIGlmIChuZXh0U29uZykgeyAvLyBJZiBub3QgbnVsbFxyXG4gICAgICAgICAgICAgICAgdGhpcy5jdXJQbGF5ZXIubG9hZChuZXh0U29uZy5wZXJtYWxpbmtfdXJsKTtcclxuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gdGhpcy5sb2FkV2lkZ2V0U29uZyh0aGlzLmN1clBsYXllciksIDIwMDApOyAvLyBVcGRhdGUgcGxheWVyIGluZm8sIHdpbGwgYWRkIHNvbmcgdG8gaGlzdG9yeVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmV3aW5kIHRvIHByZXZpb3VzIHNvbmdcclxuICAgICAqL1xyXG4gICAgc2Vla0JhY2soKSB7XHJcbiAgICAgICAgLy8gdGhpcy5pc1BsYXlsaXN0ID0gZmFsc2U7IC8vIEV4aXQgcGxheWxpc3QgbW9kZSBzbyB3ZSBkb24ndCBlbmQgdXAgc3R1Y2sgaW4gYSBsb29wIHdpdGggc29uZ3NcclxuICAgICAgICAvLyBJZiB3ZSBhcmUgaW4gYSBwbGF5bGlzdCwgc2ltcGx5IG1vdmUgYmFjayB0byB0aGUgcHJldmlvdXMgc29uZ1xyXG4gICAgICAgIGlmICh0aGlzLmlzUGxheWxpc3QpIHtcclxuICAgICAgICAgICAgbGV0IGxhc3RTb25nSUQgPSB0aGlzLndpZGdldFRyYWNrLmlkO1xyXG4gICAgICAgICAgICB0aGlzLnJlc3RhcnRTb25nKCk7XHJcbiAgICAgICAgICAgIHRoaXMuY3VyUGxheWVyLnBhdXNlKCk7XHJcbiAgICAgICAgICAgIHRoaXMuY3VyUGxheWVyLnBhdXNlKCk7XHJcbiAgICAgICAgICAgIHNldFRpbWVvdXQodGhpcy5jdXJQbGF5ZXIucHJldigpLCAyMDApOyAvLyBQbGF5ZXIgbm90IGNvb3BlcmF0aW5nIHdpdGggYXN5bmNcclxuICAgICAgICAgICAgdGhpcy5yZXN0YXJ0U29uZygpOyAvLyBTZWVtcyB3ZWlyZCB0byBjYWxsIHJlc3RhcnRTb25nKCkgc28gbWFueSB0aW1lcywgYnV0IHRoaXMgaXMgdXNlZCB0byByZXNldCB0aGUgc29uZ3MgYW5kIGF2b2lkIHRoZSB3ZWlyZCBidWcgd2hlcmUgdGhlIHBsYXllciBwbGF5cyAyIHNvbmdzIHNpbXVsYXRlbm91c2x5LlxyXG4gICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMubG9hZFdpZGdldFNvbmcodGhpcy5jdXJQbGF5ZXIpO1xyXG4gICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2codGhpcy53aWRnZXRUcmFjay5pZCArICcgLSAnICsgbGFzdFNvbmdJRCk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMud2lkZ2V0VHJhY2suaWQgPT09IGxhc3RTb25nSUQpIHsgLy8gSWYgd2UgaGF2ZSByZWFjaGVkIHRoZSBiZWdpbm5pbmcgb2YgdGhlIHBsYXlsaXN0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubG9hZFByZXZpb3VzU29uZygpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0sIDIwMCk7IC8vIE5lZWRlZCB0byBiZSBkb25lIHRvIGFsbG93IHRpbWUgZm9yIGFzeW5jIHJlcXVlc3QgdG8gY29tcGxldGUgaW4gbG9hZFdpZGdldFNvbmcoKVxyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIH0sIDIwMCk7XHJcbiAgICAgICAgICAgIHRoaXMuY3VyUGxheWVyLnBsYXkoKTtcclxuICAgICAgICAgICAgdGhpcy5jdXJQbGF5ZXIucGF1c2UoKTsgLy8gU2FtZSBpbnRlcnJ1cHRlZCBQcm9taXNlIGlzc3VlIGZyb20gQVBJXHJcbiAgICAgICAgICAgIHRoaXMuY3VyUGxheWVyLnBsYXkoKTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zb2xlLmxvZygnbm90IHBsYXlsaXN0Jyk7XHJcblxyXG4gICAgICAgIHRoaXMubG9hZFByZXZpb3VzU29uZygpO1xyXG4gICAgfVxyXG5cclxuICAgIGxvYWRQcmV2aW91c1NvbmcoKSB7XHJcbiAgICAgICAgdGhpcy5pc1BsYXlsaXN0ID0gZmFsc2U7XHJcblxyXG4gICAgICAgICAvLyBQb3AgY3VycmVudCBzb25nIGFuZCBhZGQgaXQgdG8gcXVldWUgc28gaXQgaXMgb3VyIG5leHQgc29uZ1xyXG4gICAgICAgIHRoaXMucXVldWUucHVzaCh0aGlzLmhpc3RvcnkucG9wKCkpO1xyXG4gICAgICAgIGxldCBwcmV2U29uZyA9IHRoaXMuaGlzdG9yeVt0aGlzLmhpc3RvcnkubGVuZ3RoIC0gMV07XHJcblxyXG4gICAgICAgIGlmIChwcmV2U29uZykgeyAvLyBJZiBub3QgbnVsbFxyXG4gICAgICAgICAgICB0aGlzLmN1clBsYXllci5sb2FkKHByZXZTb25nLnBlcm1hbGlua191cmwpO1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhwcmV2U29uZy5wZXJtYWxpbmtfdXJsKTtcclxuICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB0aGlzLmxvYWRXaWRnZXRTb25nKHRoaXMuY3VyUGxheWVyKSwgMjAwMCk7IC8vIFVwZGF0ZSBwbGF5ZXIgaW5mb1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFJlc2V0cyB0aGUgc29uZyBiYWNrIHRvIDBcclxuICAgICAqL1xyXG4gICAgcmVzdGFydFNvbmcoKSB7XHJcbiAgICAgICAgdGhpcy5jdXJQbGF5ZXIuc2Vla1RvKDApO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogSW5jcmVhc2VzIHRoZSB2b2x1bWUgd2l0aCB0aGUgbWF4aW11bSBib3VuZCBiZWluZyAxMDAuXHJcbiAgICAgKiBAcGFyYW0ge2Zsb2F0fSBvZmZzZXQgLSBob3cgbXVjaCB0byBpbmNyZWFzZSB0aGUgdm9sdW1lIGJ5XHJcbiAgICAgKi9cclxuICAgIHZvbHVtZVVwKG9mZnNldCkge1xyXG4gICAgICAgIHRoaXMuY3VyUGxheWVyLmdldFZvbHVtZSgodm9sKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuY3VyUGxheWVyLnNldFZvbHVtZShNYXRoLm1pbigxMDAsIHZvbCArIG9mZnNldCkpO1xyXG4gICAgICAgICAgICB0aGlzLnZvbHVtZVNsaWRlci52YWx1ZSA9IE1hdGgubWluKDEwMCwgdm9sICsgb2Zmc2V0KTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIExvd2VycyB0aGUgdm9sdW1lIGJ5IG9mZnNldCB3aXRoIHRoZSBtaW5pbXVtIGJvdW5kIGJlaW5nIDAuXHJcbiAgICAgKiBAcGFyYW0ge2Zsb2F0fSBvZmZzZXQgLSBob3cgbXVjaCB0byBsb3dlciB0aGUgdm9sdW1lIGJ5XHJcbiAgICAgKi9cclxuICAgIHZvbHVtZURvd24ob2Zmc2V0KSB7XHJcbiAgICAgICAgdGhpcy5jdXJQbGF5ZXIuZ2V0Vm9sdW1lKCh2b2wpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5jdXJQbGF5ZXIuc2V0Vm9sdW1lKE1hdGgubWF4KDAsIHZvbCAtIG9mZnNldCkpO1xyXG4gICAgICAgICAgICB0aGlzLnZvbHVtZVNsaWRlci52YWx1ZSA9IE1hdGgubWF4KDAsIHZvbCAtIG9mZnNldCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBVcGRhdGVzIGNvbnRyb2xzIHRvIHNob3cgdGhhdCB0aGUgc29uZyBpcyBpbiBwcm9ncmVzcy5cclxuICAgICAqL1xyXG4gICAgdG9nZ2xlUGxheSgpIHtcclxuICAgICAgICBpZiAoIXRoaXMuaXNQbGF5aW5nKSB7XHJcbiAgICAgICAgICAgIC8vIE51YW5jZWQgYnV0IGFkZHMgdGhhdCAnYnJlYWsnIGluIHRoZSBzb3VuZCBzbyB5b3Uga25vdyBpdCB3YXMgcHJlc3NlZCBqdXN0IGluIGNhc2UgaXNQbGF5aW5nIGlzIHRoZSB3cm9uZyB2YWx1ZVxyXG4gICAgICAgICAgICB0aGlzLmN1clBsYXllci5wbGF5KCk7IFxyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnaXNQbGF5aW5nID0gdHJ1ZScpO1xyXG4gICAgICAgICAgICB0aGlzLmlzUGxheWluZyA9IHRydWU7XHJcbiAgICAgICAgICAgIC8vIHRoaXMubWFpblBsYXllci5pbm5lckhUTUwgPSBTb25nSW5mbygodGhpcy5jdXJUcmFjay50cmFjay5hcnR3b3JrX3VybCA9PT0gbnVsbCA/ICcuLi9pbWcvY2QucG5nJyA6IHRoaXMuY3VyVHJhY2sudHJhY2suYXJ0d29ya191cmwucmVwbGFjZSgnbGFyZ2UnLCAndDUwMHg1MDAnKSksIHRoaXMuY3VyVHJhY2sudHJhY2spO1xyXG4gICAgICAgICAgICAvLyBVcGRhdGUgcGxheSBzdGF0ZVxyXG4gICAgICAgICAgICB0aGlzLnRvZ2dsZVBsYXlTdGF0ZSh0cnVlKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLmN1clBsYXllci5wYXVzZSgpO1xyXG5cclxuICAgICAgICAgICAgLy8gVXBkYXRlIHBsYXkgc3RhdGVcclxuICAgICAgICAgICAgdGhpcy50b2dnbGVQbGF5U3RhdGUoZmFsc2UpO1xyXG4gICAgICAgICAgICB0aGlzLmlzUGxheWluZyA9IGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEZldGNoIHRoZSBuZXh0IHNvbmcgYW5kIHZlcmlmeSB0aGF0IHRoZSBzb25nIGV4aXN0cyAobm9uIDQwNCkuXHJcbiAgICAgKi9cclxuICAgIGZldGNoTmV4dCgpIHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnUXVldWUgbGVuZ3RoIC0gJyArIHRoaXMucXVldWUubGVuZ3RoKTtcclxuICAgICAgICAgICAgaWYgKHRoaXMucXVldWUubGVuZ3RoID4gMCkgeyAvLyBGaXJzdCBjaGVjayBpZiB0aGUgcXVldWUgaXMgbm9uLWVtcHR5XHJcbiAgICAgICAgICAgICAgICBsZXQgbmV4dFNvbmcgPSB0aGlzLnF1ZXVlLnBvcCgpOyAvLyBQb3AgdGhlIG5leHQgc29uZ1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChuZXh0U29uZykgeyAvLyBJZiBub3QgbnVsbFxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaGlzdG9yeS5wdXNoKG5leHRTb25nKTsgLy8gQWRkIGl0IHRvIGhpc3RvcnlcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmN1clBsYXllci5sb2FkKG5leHRTb25nLnBlcm1hbGlua191cmwpO1xyXG4gICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gdGhpcy5sb2FkV2lkZ2V0U29uZyh0aGlzLmN1clBsYXllciksIDIwMDApOyAvLyBVcGRhdGUgcGxheWVyIGluZm9cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIHsgLy8gSWYgdGhlIHF1ZXVlIGlzIGVtcHR5LCBmZXRjaCBhIG5ldyBzb25nXHJcbiAgICAgICAgICAgICAgICB0aGlzLmN1clBsYXllci5wYXVzZSgpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yZXN0YXJ0U29uZygpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnZmV0Y2hOZXh0JyArIGUudG9TdHJpbmcoKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGxldCBpZCA9IHRoaXMuZ2V0UmFuZG9tVHJhY2soKTsgLy8gV29ya3MgZm9yIHRyYWNrcyB3aXRoIDQwMyBlcnJvcnMgaW4gb3RoZXIgQVBJXHJcblxyXG4gICAgICAgIFNDLmdldCgnL3RyYWNrcy8nICsgaWQpLnRoZW4oKHRyYWNrKSA9PiB7IC8vIENoZWNrIGlmIHRoZXJlIGFyZSByZXN1bHRzXHJcbiAgICAgICAgICAgIC8vIFJlYWxseSBqdXN0IGRlc2lnbmVkIHRvIGNoZWNrIGlmIHRoZSBzb25nIGFjdHVhbGx5IGV4aXN0c1xyXG4gICAgICAgICAgIHRoaXMuc3RyZWFtU29uZyhpZCk7XHJcbiAgICAgICAgfSwgKGVycikgPT4ge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIuc3RhdHVzKTtcclxuICAgICAgICAgICAgLy8gaWYgKGVyci5zdGF0dXMgPT09IDApIHsgLy8gSW52YWxpZCBBUEkga2V5XHJcbiAgICAgICAgICAgIC8vICAgICBjb25zb2xlLmxvZygnMC80MDEgVW5hdXRob3JpemVkLiBQb3NzaWJsZSBJbnZhbGlkIFNvdW5kQ2xvdWQga2V5JylcclxuICAgICAgICAgICAgLy8gICAgIHRocm93ICcwLzQwMSBVbmF1dGhvcml6ZWQuIFBvc3NpYmxlIEludmFsaWQgU291bmRDbG91ZCBrZXknXHJcbiAgICAgICAgICAgIC8vIH1cclxuICAgICAgICAgICAgaWYgKGVyci5zdGF0dXMgPT09IDQwMykgeyAvLyBQbGF5IHRoZSBzb25nIGFueXdheSBldmVuIGlmIHRoaXMgQVBJIHJlcXVpZXN0IHJldHVybnMgYSBmb3JiaWRkZW4gcmVxdWVzdCAoU291bmRjbG91ZCBwcm9ibGVtKVxyXG4gICAgICAgICAgICAgICAgdGhpcy5zdHJlYW1Tb25nKGlkKTtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyBJZiB0aGVyZSBpcyBubyBzb25nIHdpdGggdGhlIGFzc29jaWF0ZWQgSUQsIGZldGNoIGEgbmV3IG9uZS5cclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ3RyYWNrIGZldGNoIGZhaWwnICsgaWQpO1xyXG4gICAgICAgICAgICB0aGlzLmZldGNoTmV4dCgpO1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygndHJhY2sgZmV0Y2ggZmFpbCBwb3N0JyArIGlkKTtcclxuICAgICAgICB9KS5jYXRjaCgoZXJyKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGVyci5zdGF0dXMpO1xyXG4gICAgICAgICAgICBpZiAoZXJyLnN0YXR1cyA9PT0gMCkgeyAvLyBJbnZhbGlkIEFQSSBrZXlcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCcwLzQwMSBVbmF1dGhvcml6ZWQuIFBvc3NpYmxlIEludmFsaWQgU291bmRDbG91ZCBrZXknKVxyXG4gICAgICAgICAgICAgICAgdGhyb3cgJzAvNDAxIFVuYXV0aG9yaXplZC4gUG9zc2libGUgSW52YWxpZCBTb3VuZENsb3VkIGtleSc7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGVyci5zdGF0dXMgPT09IDQwMykgeyAvLyBQbGF5IHRoZSBzb25nIGFueXdheSBldmVuIGlmIHRoaXMgQVBJIHJlcXVpZXN0IHJldHVybnMgYSBmb3JiaWRkZW4gcmVxdWVzdCAoU291bmRjbG91ZCBwcm9ibGVtKVxyXG4gICAgICAgICAgICAgICAgdGhpcy5zdHJlYW1Tb25nKGlkKTtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyBJZiB0aGVyZSBpcyBubyBzb25nIHdpdGggdGhlIGFzc29jaWF0ZWQgSUQsIGZldGNoIGEgbmV3IG9uZS5cclxuICAgICAgICAgICAgdGhpcy5mZXRjaE5leHQoKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFN0cmVhbSB0aGUgc29uZyB3aGVuIGEgdmFsaWQgaWQgaXMgZm91bmRcclxuICAgICAqIEBwYXJhbSB7aW50fSBpZCAtIGhvbGRzIHRoZSBzb25nIGlkXHJcbiAgICAgKi9cclxuICAgIHN0cmVhbVNvbmcoaWQpIHtcclxuICAgICAgICBjb25zb2xlLmxvZygndHJhY2sgZmV0Y2ggc3VjY2VzcyAnICsgaWQpO1xyXG4gICAgICAgIHRoaXMuY3VyUGxheWVyLmxvYWQoYGh0dHBzJTNBLy9hcGkuc291bmRjbG91ZC5jb20vdHJhY2tzLyR7aWR9YCArIFdJREdFVF9QQVJBTVMpO1xyXG4gICAgICAgIHRoaXMudG9nZ2xlUGxheVN0YXRlKHRydWUpO1xyXG4gICAgICAgIHNldFRpbWVvdXQoKCkgPT4gdGhpcy5sb2FkV2lkZ2V0U29uZyh0aGlzLmN1clBsYXllciksIDIwMDApO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogRmluZCB0aGUgc29uZyBiYXNlZCBvbiB1c2VyIGVudGVyZWQga2V5d29yZHMsIGxpa2UgJ0knbSBGZWVsaW5nIEx1Y2t5JyBvbiBHb29nbGUuXHJcbiAgICAgKiBcclxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBxdWVyeSAtIHNlYXJjaCB0ZXJtcyB0byBmaW5kIHNvbmdcclxuICAgICAqIFxyXG4gICAgICogQG1lbWJlcm9mIFBsYXllclxyXG4gICAgICovXHJcbiAgICBnZXRUcmFja0J5S2V5V29yZChxdWVyeSkge1xyXG4gICAgICAgIC8vIEdldCBhIGxpc3Qgb2Ygc29uZ3MgYnkgdGhlIHNlYXJjaCBxdWVyeSBhbmQgcGxheSBmaXJzdCBjaG9pY2VcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBTQy5nZXQoJy90cmFja3MnLCB7cTogcXVlcnl9KS50aGVuKCh0cmFja3MpID0+IHtcclxuICAgICAgICAgICAgICAgIGlmICh0cmFja3MubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIExvYWQgdGhlIGZpcnN0IHNvbmdcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmN1clBsYXllci5sb2FkKHRyYWNrc1swXS5wZXJtYWxpbmtfdXJsKTsgLy8gVGhlIFwiSSdtIGZlZWxpbmcgbHVja3kgcGFydCBvZiB0aGUgc2VhcmNoXCJcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnZ2V0VHJhY2tCeUtleVdvcmQgRXJyb3IgLSAnICsgZS5tZXNzYWdlKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBGZXRjaGVzIHRyYWNrcyBieSBhIGxpc3Qgb2YgdGFncyBmcm9tIHRoZSB1c2VyIHNlcGFyYXRlZCBieSBjb21tYXMuXHJcbiAgICAgKiBcclxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSB0YWdMaXN0IC0gYSBzdHJpbmcgd2l0aCB0YWdzIHNlcGFyYXRlZCBieSBjb21tYXNcclxuICAgICAqIFxyXG4gICAgICogQG1lbWJlcm9mIFBsYXllclxyXG4gICAgICovXHJcbiAgICBnZXRUcmFja3NCeVRhZ3ModGFnTGlzdCkge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIC8vIENyZWF0ZSBvcHRpb25zIG9iamVjdCB0byBob2xkIHdoYXQgd2Ugd2FudCB0byBzZWFyY2ggZm9yXHJcbiAgICAgICAgICAgIGxldCBvcHRpb25zID0ge1xyXG4gICAgICAgICAgICAgICAgdGFnczogdGFnTGlzdCxcclxuICAgICAgICAgICAgICAgIGxpbWl0OiB0aGlzLnF1ZXVlTnVtXHJcbiAgICAgICAgICAgIH0gLy8gVE9ETzogQWxsb3cgdG8gbW9kaWZ5IGxpbWl0IGxhdGVyXHJcblxyXG4gICAgICAgICAgICBTQy5nZXQoJy90cmFja3MnLCBvcHRpb25zKS50aGVuKCh0cmFja3MpID0+IHtcclxuICAgICAgICAgICAgICAgIGlmICh0cmFja3MubGVuZ3RoID4gMCkge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBsZXQgdHJhY2tDb2xsZWN0aW9uID0gbnVsbDtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5zaHVmZmxlUXVldWUpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyYWNrQ29sbGVjdGlvbiA9IHRoaXMuc2h1ZmZsZVRyYWNrcyh0cmFja3MpO1xyXG4gICAgICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgICAgICAgICAgdHJhY2tDb2xsZWN0aW9uID0gdHJhY2tzLnJldmVyc2UoKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gUXVldWUgYWxsIHRyYWNrcyB0byB0aGUgcXVldWUgb2YgdGhlIHVzZXIncyBwbGF5bGlzdC4gTm90ZSB0aGF0IHF1ZXVlIGlzIGFjdHVhbGx5IGFjdGluZyBsaWtlIGEgc3RhY2sgc2luY2Ugd2UgdXNlIHB1c2goKSBhbmQgcG9wKClcclxuICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRyYWNrQ29sbGVjdGlvbi5sZW5ndGggLSAxOyBpKyspIHsgLy8gU2tpcCB0aGUgZmlyc3Qgb25lIHNpbmNlIHdlIGFyZSBhbHJlYWR5IHBsYXlpbmcgaXQgYXQgdGhpcyBwb2ludCAobmVlZCB0byBzdWJ0cmFjdCB1cHBlciBib3VuZCBieSAxIHNpbmNlIHdlIHdhbnQgdG8gZXhjbHVkZSB0aGUgZmlyc3QgdHJhY2sgZnJvbSB0aGUgcmV2ZXJzZWQgYXJyYXkpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucXVldWUucHVzaCh0cmFja0NvbGxlY3Rpb25baV0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyh0cmFja3NbaV0udGl0bGUpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gTG9hZCB0aGUgc29uZ1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY3VyUGxheWVyLmxvYWQodHJhY2tDb2xsZWN0aW9uWzBdLnBlcm1hbGlua191cmwpO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gRGlzcGxheSB0b2FzdCBtZXNzYWdlIHdoZW4gZG9uZVxyXG4gICAgICAgICAgICAgICAgICAgIFV0aWxzLnNob3dUb2FzdChgJHt0cmFja3MubGVuZ3RofSB0cmFja3MgYWRkZWQgdG8gdGhlIHF1ZXVlLmApO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBVdGlscy5zaG93VG9hc3QoJ1NlYXJjaCByZXR1cm5lZCBubyByZXN1bHRzLiBQbGVhc2UgdHJ5IGFnYWluLicpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdnZXRUcmFja3NCeVRhZ3MgRXJyb3IgLSAnICsgZS5tZXNzYWdlKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBTZWFyY2hlcyBmb3IgYSBwbGF5bGlzdCBieSBrZXl3b3JkLlxyXG4gICAgICogXHJcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gcXVlcnkgLSBuYW1lIG9mIHRoZSBwbGF5bGlzdFxyXG4gICAgICogXHJcbiAgICAgKiBAbWVtYmVyb2YgUGxheWVyXHJcbiAgICAgKi9cclxuICAgIGdldFNldEJ5S2V5V29yZChxdWVyeSkge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIFNDLmdldCgnL3BsYXlsaXN0cycsIHtxOiBxdWVyeX0pLnRoZW4oKHNldHMpID0+IHtcclxuICAgICAgICAgICAgICAgIGlmIChzZXRzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5zaHVmZmxlUXVldWUpIHsgLy8gSWYgd2Ugd2FudCB0byBzaHVmZmxlIHRoZSByZXN1bHRzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIExvYWQgdGhlIHNldFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgcmVzSW5kZXggPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAoc2V0cy5sZW5ndGggKyAxKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY3VyUGxheWVyLmxvYWQoc2V0c1tyZXNJbmRleF0ucGVybWFsaW5rX3VybCk7IC8vIFRoZSBcIkknbSBmZWVsaW5nIGx1Y2t5IHBhcnQgb2YgdGhlIHNlYXJjaFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0VHJhY2tDb3VudCA9IHNldHNbcmVzSW5kZXhdLnRyYWNrX2NvdW50O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBVdGlscy5zaG93VG9hc3QoYE5vdyBwbGF5aW5nICR7c2V0c1tyZXNJbmRleF0udGl0bGV9ICgke3RoaXMuc2V0VHJhY2tDb3VudH0gc29uZ3MpYClcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBMb2FkIHRoZSBzZXRcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jdXJQbGF5ZXIubG9hZChzZXRzWzBdLnBlcm1hbGlua191cmwpOyAvLyBUaGUgXCJJJ20gZmVlbGluZyBsdWNreSBwYXJ0IG9mIHRoZSBzZWFyY2hcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNldFRyYWNrQ291bnQgPSBzZXRzWzBdLnRyYWNrX2NvdW50O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBVdGlscy5zaG93VG9hc3QoYE5vdyBwbGF5aW5nICR7c2V0c1swXS50aXRsZX0gKCR7dGhpcy5zZXRUcmFja0NvdW50fSBzb25ncylgKVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnZ2V0U2V0QnlLZXlXb3JkIEVycm9yIC0gJyArIGUubWVzc2FnZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogU2VhcmNoZXMgZm9yIHRoZSBmaXJzdCBxdWV1ZU51bSBzb25ncyBieSBhIHVzZXIuXHJcbiAgICAgKiBcclxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSB1c2VyIC0gdXNlcm5hbWUgb2YgdGhlIHVzZXJcclxuICAgICAqIFxyXG4gICAgICogQG1lbWJlcm9mIFBsYXllclxyXG4gICAgICovXHJcbiAgICBnZXRUcmFja3NCeVVzZXIodXNlcikge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIFNDLnJlc29sdmUoYGh0dHBzOi8vc291bmRjbG91ZC5jb20vJHt1c2VyfWApLnRoZW4oKHJlc3BvbnNlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhyZXNwb25zZS5pZCk7XHJcbiAgICAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIENyZWF0ZSBvcHRpb25zIG9iamVjdCB0byBob2xkIHdoYXQgd2Ugd2FudCB0byBzZWFyY2ggZm9yXHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IG9wdGlvbnMgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxpbWl0OiB0aGlzLnF1ZXVlTnVtXHJcbiAgICAgICAgICAgICAgICAgICAgfSAvLyBUT0RPOiBBbGxvdyB0byBtb2RpZnkgbGltaXQgbGF0ZXJcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgU0MuZ2V0KGAvdXNlcnMvJHtyZXNwb25zZS5pZH0vdHJhY2tzYCwgb3B0aW9ucykudGhlbigodHJhY2tzKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHRyYWNrcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0cmFja3MubGVuZ3RoID4gMCkge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCB0cmFja0NvbGxlY3Rpb24gPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuc2h1ZmZsZVF1ZXVlKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyYWNrQ29sbGVjdGlvbiA9IHRoaXMuc2h1ZmZsZVRyYWNrcyh0cmFja3MpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyYWNrQ29sbGVjdGlvbiA9IHRyYWNrcy5yZXZlcnNlKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gUXVldWUgYWxsIHRyYWNrcyB0byB0aGUgcXVldWUgb2YgdGhlIHVzZXIncyBwbGF5bGlzdC4gTm90ZSB0aGF0IHF1ZXVlIGlzIGFjdHVhbGx5IGFjdGluZyBsaWtlIGEgc3RhY2sgc2luY2Ugd2UgdXNlIHB1c2goKSBhbmQgcG9wKClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdHJhY2tDb2xsZWN0aW9uLmxlbmd0aCAtIDE7IGkrKykgeyAvLyBTa2lwIHRoZSBmaXJzdCBvbmUgc2luY2Ugd2UgYXJlIGFscmVhZHkgcGxheWluZyBpdCBhdCB0aGlzIHBvaW50IChuZWVkIHRvIHN1YnRyYWN0IHVwcGVyIGJvdW5kIGJ5IDEgc2luY2Ugd2Ugd2FudCB0byBleGNsdWRlIHRoZSBmaXJzdCB0cmFjayBmcm9tIHRoZSByZXZlcnNlZCBhcnJheSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnF1ZXVlLnB1c2godHJhY2tDb2xsZWN0aW9uW2ldKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyh0cmFja3NbaV0udGl0bGUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBMb2FkIHRoZSBzb25nXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmN1clBsYXllci5sb2FkKHRyYWNrQ29sbGVjdGlvblswXS5wZXJtYWxpbmtfdXJsKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBEaXNwbGF5IHRvYXN0IG1lc3NhZ2Ugd2hlbiBkb25lXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBVdGlscy5zaG93VG9hc3QoYCR7dHJhY2tzLmxlbmd0aH0gdHJhY2tzIGFkZGVkIHRvIHRoZSBxdWV1ZS5gKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFV0aWxzLnNob3dUb2FzdCgnU2VhcmNoIHJldHVybmVkIG5vIHJlc3VsdHMuIFBsZWFzZSB0cnkgYWdhaW4uJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnZ2V0U29uZ3NCeVVzZXIgRXJyb3IgLSAnICsgZS5tZXNzYWdlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhlKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBTZWFyY2hlcyBmb3Igc29uZ3MgYnkgZ2VucmVzIChzdHJpbmcgb2YgZ2VucmVzIHNlcGFyYXRlZCBieSBjb21tYXMpXHJcbiAgICAgKiBcclxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBnZW5yZUxpc3QgLSBjb21tYSBzZXBhcmF0ZWQgbGlzdCBvZiBnZW5yZXNcclxuICAgICAqIFxyXG4gICAgICogQG1lbWJlcm9mIFBsYXllclxyXG4gICAgICovXHJcbiAgICBnZXRUcmFja3NCeUdlbnJlcyhnZW5yZUxpc3QpIHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAvLyBDcmVhdGUgb3B0aW9ucyBvYmplY3QgdG8gaG9sZCB3aGF0IHdlIHdhbnQgdG8gc2VhcmNoIGZvclxyXG4gICAgICAgICAgICBsZXQgb3B0aW9ucyA9IHtcclxuICAgICAgICAgICAgICAgIGdlbnJlczogZ2VucmVMaXN0LFxyXG4gICAgICAgICAgICAgICAgbGltaXQ6IHRoaXMucXVldWVOdW1cclxuICAgICAgICAgICAgfSAvLyBUT0RPOiBBbGxvdyB0byBtb2RpZnkgbGltaXQgbGF0ZXJcclxuXHJcbiAgICAgICAgICAgIFNDLmdldCgnL3RyYWNrcycsIG9wdGlvbnMpLnRoZW4oKHRyYWNrcykgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKHRyYWNrcy5sZW5ndGggPiAwKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGxldCB0cmFja0NvbGxlY3Rpb24gPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnNodWZmbGVRdWV1ZSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgdHJhY2tDb2xsZWN0aW9uID0gdGhpcy5zaHVmZmxlVHJhY2tzKHRyYWNrcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0cmFja0NvbGxlY3Rpb24gPSB0cmFja3MucmV2ZXJzZSgpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAvLyBRdWV1ZSBhbGwgdHJhY2tzIHRvIHRoZSBxdWV1ZSBvZiB0aGUgdXNlcidzIHBsYXlsaXN0LiBOb3RlIHRoYXQgcXVldWUgaXMgYWN0dWFsbHkgYWN0aW5nIGxpa2UgYSBzdGFjayBzaW5jZSB3ZSB1c2UgcHVzaCgpIGFuZCBwb3AoKVxyXG4gICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdHJhY2tDb2xsZWN0aW9uLmxlbmd0aCAtIDE7IGkrKykgeyAvLyBTa2lwIHRoZSBmaXJzdCBvbmUgc2luY2Ugd2UgYXJlIGFscmVhZHkgcGxheWluZyBpdCBhdCB0aGlzIHBvaW50IChuZWVkIHRvIHN1YnRyYWN0IHVwcGVyIGJvdW5kIGJ5IDEgc2luY2Ugd2Ugd2FudCB0byBleGNsdWRlIHRoZSBmaXJzdCB0cmFjayBmcm9tIHRoZSByZXZlcnNlZCBhcnJheSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5xdWV1ZS5wdXNoKHRyYWNrQ29sbGVjdGlvbltpXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAvLyBMb2FkIHRoZSBzb25nXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jdXJQbGF5ZXIubG9hZCh0cmFja0NvbGxlY3Rpb25bMF0ucGVybWFsaW5rX3VybCk7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAvLyBEaXNwbGF5IHRvYXN0IG1lc3NhZ2Ugd2hlbiBkb25lXHJcbiAgICAgICAgICAgICAgICAgICAgVXRpbHMuc2hvd1RvYXN0KGAke3RyYWNrcy5sZW5ndGh9IHRyYWNrcyBhZGRlZCB0byB0aGUgcXVldWUuYCk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIFV0aWxzLnNob3dUb2FzdCgnU2VhcmNoIHJldHVybmVkIG5vIHJlc3VsdHMuIFBsZWFzZSB0cnkgYWdhaW4uJyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ2dldFNvbmdzQnlHZW5yZXMgRXJyb3IgLSAnICsgZS5tZXNzYWdlKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBDaGVja3MgaWYgc29uZyBoaXN0b3J5IGNvbnRhaW5zIGEgc29uZyBieSBpZC5cclxuICAgICAqIFxyXG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IGlkIC0gaWQgb2YgdGhlIHNvbmcgd2UgYXJlIGxvb2tpbmcgZm9yLlxyXG4gICAgICogQHJldHVybnMge0Jvb2xlYW59XHJcbiAgICAgKiBcclxuICAgICAqIEBtZW1iZXJvZiBQbGF5ZXJcclxuICAgICAqL1xyXG4gICAgaGlzdG9yeUNvbnRhaW5zSWQoaWQpIHtcclxuICAgICAgICBsZXQgZm91bmQgPSBmYWxzZTtcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuaGlzdG9yeS5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5oaXN0b3J5W2ldLmlkID09PSBpZCkge1xyXG4gICAgICAgICAgICAgICAgZm91bmQgPSB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgICAgICByZXR1cm4gZm91bmQ7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBFeHRyYWN0cyB0aGUgdXJsIHBhcmFtcyB0byBwbGF5IHNwZWNpZmljIHRyYWNrcyBvbiBsb2FkLlxyXG4gICAgICogXHJcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gbmFtZSAtIG5hbWUgb2YgdGhlIHBhcmFtXHJcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gdXJsIC0gY3VycmVudCBhZGRyZXNzIGxvYWRlZCBieSB0aGUgdXNlclxyXG4gICAgICogQHJldHVybnMgXHJcbiAgICAgKiBcclxuICAgICAqIEBtZW1iZXJvZiBQbGF5ZXJcclxuICAgICAqL1xyXG4gICAgZ2V0VVJMUGFyYW1zQnlOYW1lKG5hbWUsIHVybCkge1xyXG4gICAgICAgIGlmICghdXJsKSB1cmwgPSB3aW5kb3cubG9jYXRpb24uaHJlZjtcclxuICAgICAgICBuYW1lID0gbmFtZS5yZXBsYWNlKC9bXFxbXFxdXS9nLCBcIlxcXFwkJlwiKTtcclxuICAgICAgICB2YXIgcmVnZXggPSBuZXcgUmVnRXhwKFwiWz8mXVwiICsgbmFtZSArIFwiKD0oW14mI10qKXwmfCN8JClcIiksXHJcbiAgICAgICAgICAgIHJlc3VsdHMgPSByZWdleC5leGVjKHVybCk7XHJcbiAgICAgICAgaWYgKCFyZXN1bHRzKSByZXR1cm4gbnVsbDtcclxuICAgICAgICBpZiAoIXJlc3VsdHNbMl0pIHJldHVybiAnJztcclxuICAgICAgICByZXR1cm4gZGVjb2RlVVJJQ29tcG9uZW50KHJlc3VsdHNbMl0ucmVwbGFjZSgvXFwrL2csIFwiIFwiKSk7XHJcbiAgICB9XHJcblxyXG4gICAgc2h1ZmZsZVRyYWNrcyh0cmFja3MpIHtcclxuICAgICAgICBsZXQgdGVtcCA9IG51bGw7XHJcbiAgICAgICAgY29uc29sZS5sb2coJ3NodWZmbGluZyB0cmFja3MnKTtcclxuICAgICAgICAvLyBVc2luZyBpbiBwbGFjZSBEdXJzdGVuZmVsZCBzaHVmZmxlXHJcbiAgICAgICAgZm9yIChsZXQgaSA9IHRyYWNrcy5sZW5ndGggLSAxOyBpID4gMDsgaSAtLSkge1xyXG4gICAgICAgICAgICBsZXQgaiA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIChpKzEpKTsgLy8gR2VuZXJhdGUgYSByYW5kb20gaW5kZXggWzAuLi5pXVxyXG4gICAgICAgICAgICB0ZW1wID0gdHJhY2tzW2ldOyAvLyBTdGFydCBzd2FwcGluZ1xyXG4gICAgICAgICAgICB0cmFja3NbaV0gPSB0cmFja3Nbal07XHJcbiAgICAgICAgICAgIHRyYWNrc1tqXSA9IHRlbXA7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gdHJhY2tzO1xyXG4gICAgfVxyXG5cclxuICAgIGdldFRyYWNrc0Zyb21DaGFydHMoX2tpbmQsIF9nZW5yZXMsIF9saW1pdCwgJF9wYXJ0aXRpb24gPSAxKSB7XHJcbiAgICAgICAgLy8ga2luZD10b3AmZ2VucmU9c291bmRjbG91ZCUzQWdlbnJlcyUzQWFsbC1tdXNpYyZsaW1pdD01MFxyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIC8vIGxldCBvUmVxID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7IC8vTmV3IHJlcXVlc3Qgb2JqZWN0XHJcbiAgICAgICAgICAgIC8vIG9SZXEub25sb2FkID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIC8vICAgICAvLyBDYWxsYmFja1xyXG4gICAgICAgICAgICAvLyAgICAgbGV0IHNvbmdzID0gSlNPTi5wYXJzZSh0aGlzLnJlc3BvbnNlVGV4dCk7XHJcbiAgICAgICAgICAgIC8vICAgICBjb25zb2xlLmxvZyhzb25ncyk7XHJcbiAgICAgICAgICAgIC8vICAgICBjb25zb2xlLmxvZyh0aGlzLnF1ZXVlKTtcclxuICAgICAgICAgICAgLy8gfTtcclxuICAgICAgICAgICAgLy8gb1JlcS5vcGVuKFwiZ2V0XCIsIGBodHRwOi8vcG9sYXJpdHkueDEwLm14L3Rlc3QucGhwP2tpbmQ9JHtfa2luZH0mZ2VucmU9JHtfZ2VucmVzfSZsaW1pdD0ke19saW1pdH0mbGlua2VkX3BhcnRpdGlvbmluZz0keyRfcGFydGl0aW9ufSZjbGllbnRfaWQ9JHtjb25zdHMuY2xpZW50X2lkfWAsIHRydWUpO1xyXG4gICAgICAgICAgICAvLyAvLyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBeIERvbid0IGJsb2NrIHRoZSByZXN0IG9mIHRoZSBleGVjdXRpb24uXHJcbiAgICAgICAgICAgIC8vIC8vICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRG9uJ3Qgd2FpdCB1bnRpbCB0aGUgcmVxdWVzdCBmaW5pc2hlcyB0byBcclxuICAgICAgICAgICAgLy8gLy8gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZS5cclxuICAgICAgICAgICAgLy8gb1JlcS5zZW5kKCk7XHJcbiAgICAgICAgICAgIC8vIC8vIGNvbnNvbGUubG9nKGBodHRwczovL2FwaS12Mi5zb3VuZGNsb3VkLmNvbS9jaGFydHM/a2luZD0ke19raW5kfSZnZW5yZT0ke19nZW5yZXN9JmxpbWl0PSR7X2xpbWl0fSZsaW5rZWRfcGFydGl0aW9uaW5nPSR7JF9wYXJ0aXRpb259JmNsaWVudF9pZD0ke2NvbnN0cy5jbGllbnRfaWR9YCk7XHJcbiAgICAgICAgICAgIC8vIC8vIGxldCByZXEgPSBuZXcgUmVxdWVzdCgpOyAvLyBDb25zdHJ1Y3QgaXRcclxuICAgICAgICAgICAgLy8gLy8gbGV0IHRyYWNrcyA9IGF3YWl0IHJlcS5nZXRKU09OKGBodHRwczovL2FwaS12Mi5zb3VuZGNsb3VkLmNvbS9jaGFydHM/a2luZD0ke19raW5kfSZnZW5yZT0ke19nZW5yZXN9JmxpbWl0PSR7X2xpbWl0fSZsaW5rZWRfcGFydGl0aW9uaW5nPSR7JF9wYXJ0aXRpb259JmNsaWVudF9pZD0ke2NvbnN0cy5jbGllbnRfaWR9YCk7XHJcblxyXG4gICAgICAgICAgICAkLmFqYXgoe1xyXG4gICAgICAgICAgICAgICAgdXJsOiAnaHR0cDovL3BvbGFyaXR5LngxMC5teC90ZXN0LnBocCcsIC8vVGhpcyBpcyB0aGUgY3VycmVudCBkb2NcclxuICAgICAgICAgICAgICAgIHR5cGU6IFwiR0VUXCIsXHJcbiAgICAgICAgICAgICAgICBkYXRhVHlwZTonanNvbicsIC8vIGFkZCBqc29uIGRhdGF0eXBlIHRvIGdldCBqc29uXHJcbiAgICAgICAgICAgICAgICBkYXRhOiAoe1xyXG4gICAgICAgICAgICAgICAgICAgIGtpbmQ6IF9raW5kLFxyXG4gICAgICAgICAgICAgICAgICAgIGdlbnJlOiBfZ2VucmVzLFxyXG4gICAgICAgICAgICAgICAgICAgIGxpbWl0OiBfbGltaXQsXHJcbiAgICAgICAgICAgICAgICAgICAgbGlua2VkX3BhcnRpdGlvbmluZzogJF9wYXJ0aXRpb24sXHJcbiAgICAgICAgICAgICAgICAgICAgY2xpZW50X2lkOiBjb25zdHMuY2xpZW50X2lkXHJcbiAgICAgICAgICAgICAgICB9KSxcclxuICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IChkYXRhKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IHRyYWNrQ29sbGVjdGlvbiA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuc2h1ZmZsZVF1ZXVlKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0cmFja0NvbGxlY3Rpb24gPSB0aGlzLnNodWZmbGVUcmFja3MoZGF0YS5jb2xsZWN0aW9uKTtcclxuICAgICAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyYWNrQ29sbGVjdGlvbiA9IGRhdGEuY29sbGVjdGlvbi5yZXZlcnNlKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdHJhY2tDb2xsZWN0aW9uLmxlbmd0aCAtIDE7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnF1ZXVlLnB1c2godHJhY2tDb2xsZWN0aW9uW2ldLnRyYWNrKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHRyYWNrQ29sbGVjdGlvbik7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAvLyBMb2FkIHRoZSBzb25nXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jdXJQbGF5ZXIubG9hZCh0cmFja0NvbGxlY3Rpb25bdHJhY2tDb2xsZWN0aW9uLmxlbmd0aCAtIDFdLnRyYWNrLnBlcm1hbGlua191cmwpO1xyXG4gICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gdGhpcy5sb2FkV2lkZ2V0U29uZyh0aGlzLmN1clBsYXllciksIDEwMDApO1xyXG4gICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIC8vIERpc3BsYXkgdG9hc3QgbWVzc2FnZSB3aGVuIGRvbmVcclxuICAgICAgICAgICAgICAgICAgICBVdGlscy5zaG93VG9hc3QoYCR7dHJhY2tDb2xsZWN0aW9uLmxlbmd0aH0gdHJhY2tzIGFkZGVkIHRvIHRoZSBxdWV1ZS5gKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7ICBcclxuICAgICAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdnZXRUcmFja3NGcm9tQ2hhcnRzIEVycm9yIC0gJyArIGUubWVzc2FnZSk7IFxyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgUGxheWVyO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vcHVibGljL2pzL3BsYXllci5qc1xuLy8gbW9kdWxlIGlkID0gNVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJpbXBvcnQgY29uc3RzIGZyb20gJy4uLy4uL2NvbnN0cy1zZWMuanNvbic7XHJcblxyXG5sZXQgU0MgPSByZXF1aXJlKCdzb3VuZGNsb3VkJyk7XHJcblxyXG5jbGFzcyBIaXN0SXRlbSB7XHJcblxyXG4gICAgY29uc3RydWN0b3IoYmcsIHRyYWNrLCBwbGF5ZXIsIGVycm9yRG93bmxvYWRDYWxsYmFjaykge1xyXG4gICAgICAgIHRoaXMuX2JnID0gYmc7XHJcbiAgICAgICAgdGhpcy5fdHJhY2sgPSB0cmFjaztcclxuICAgICAgICB0aGlzLl9lcnJvckRvd25sb2FkQ2FsbGJhY2sgPSBlcnJvckRvd25sb2FkQ2FsbGJhY2s7XHJcblxyXG4gICAgICAgIHRoaXMuaGlzdEl0ZW0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICB0aGlzLmhpc3RJdGVtLmNsYXNzTmFtZSA9ICdjYXJkJztcclxuICAgICAgICB0aGlzLmhpc3RJdGVtLnNldEF0dHJpYnV0ZSgnaWQnLCAnaGlzdEl0ZW0nKTtcclxuICAgICAgICB0aGlzLmhpc3RJdGVtLnNldEF0dHJpYnV0ZSgnZGF0YS1pZCcsIHRyYWNrLmlkKTtcclxuICAgICAgICB0aGlzLmhpc3RJdGVtLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcclxuICAgICAgICAgICAgcGxheWVyLnN0cmVhbVNvbmcodHJhY2suaWQpO1xyXG4gICAgICAgIH0sIGZhbHNlKTtcclxuICAgICAgICBsZXQgdGVtcElubmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICAgICAgdGVtcElubmVyLmlubmVySFRNTCA9IGBcclxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNhcmRcIiBkYXRhLWlkPVwiJHt0aGlzLl90cmFjay5pZH1cIj5cclxuICAgICAgICAgICAgICAgIDxkaXYgaWQ9XCJoaXN0SXRlbUJnXCIgY2xhc3M9XCJiZy1pbWFnZVwiIHN0eWxlPVwiYmFja2dyb3VuZC1pbWFnZTogdXJsKCcke3RoaXMuX2JnfScpXCI+PC9kaXY+XHJcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwicGxheWVyLWNvbnRlbnQgb3ZlcmxheVwiPlxyXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJyb3cgbGV2ZWxcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImxldmVsLWxlZnRcIiBzdHlsZT1cInBvc2l0aW9uOnJlbGF0aXZlO1wiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGltZyBzcmM9XCIke3RoaXMuX3RyYWNrLmFydHdvcmtfdXJsID09PSBudWxsID8gdGhpcy5fdHJhY2sudXNlci5hdmF0YXJfdXJsIDogdGhpcy5fdHJhY2suYXJ0d29ya191cmx9XCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cImhpc3QtcGxheSBjZW50ZXJcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aSBjbGFzcz1cImZhIGZhLXBsYXkgY2VudGVyLWFsdFwiIGFyaWEtaGlkZGVuPVwidHJ1ZVwiPjwvaT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvc3Bhbj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJkZXNjXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzcz1cInRpdGxlXCI+JHt0aGlzLl90cmFjay50aXRsZX08L3A+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzcz1cInN1YnRpdGxlXCI+JHt0aGlzLl90cmFjay5hcnRpc3R9PC9wPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3M9XCJzdWJ0aXRsZVwiPiR7dGhpcy5fdHJhY2suZ2VucmUgfHwgJ04vQSd9PC9wPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInJvdyBvdmVybGF5XCI+XHJcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImFjdGlvbi1iYXIgY2VudGVyIG5vLXBhZGRpbmdcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImFjdGlvbi1iYXItaXRlbVwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGEgaHJlZj1cIiR7dGhpcy5fdHJhY2suZG93bmxvYWRhYmxlID09PSBmYWxzZSA/IHRoaXMuX2Vycm9yRG93bmxvYWRDYWxsYmFjayA6IGBodHRwczovL2FwaS5zb3VuZGNsb3VkLmNvbS90cmFja3MvJHt0aGlzLl90cmFjay5pZH0vZG93bmxvYWQ/Y2xpZW50X2lkPSR7Y29uc3RzLmNsaWVudF9pZH1gfVwiIHRhcmdldD1cIl9ibGFua1wiPjxidXR0b24gY2xhc3M9XCJidG4tdHJhbnNwYXJlbnRcIj5Eb3dubG9hZDwvYnV0dG9uPjwvYT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJhY3Rpb24tYmFyLWl0ZW1cIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxhIGhyZWY9XCIke3RoaXMuX3RyYWNrLnBlcm1hbGlua191cmx9XCIgdGFyZ2V0PVwiX2JsYW5rXCI+PGJ1dHRvbiBjbGFzcz1cImJ0bi10cmFuc3BhcmVudFwiPlZpZXc8L2J1dHRvbj48L2E+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgIGA7XHJcbiAgICAgICAgdGhpcy5oaXN0SXRlbS5hcHBlbmRDaGlsZCh0ZW1wSW5uZXIpOyAvLyBNdXN0IHVzZSB0aGlzIG1ldGhvZCB0byBwcmVzZXJ2ZSBsaXN0ZW5lcnNcclxuICAgIH1cclxuXHJcbiAgICByZW5kZXIoKSB7XHJcbiAgICAgICAgIHJldHVybiB0aGlzLmhpc3RJdGVtOyAvLyBDYW5ub3QgcmV0dXJuIGlubmVySFRNTCBzaW5jZSB0aGF0IHJlbW92ZXMgYWxsIGxpc3RlbmVyc1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBIaXN0SXRlbVxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vcHVibGljL2NvbnRyb2xzL0hpc3RJdGVtLmpzXG4vLyBtb2R1bGUgaWQgPSA2XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsImltcG9ydCBjb25zdHMgZnJvbSAnLi4vLi4vY29uc3RzLXNlYy5qc29uJztcclxuXHJcbmxldCBTQyA9IHJlcXVpcmUoJ3NvdW5kY2xvdWQnKTtcclxuXHJcbmNsYXNzIENoYXJ0SXRlbSB7XHJcbiAgICBjb25zdHJ1Y3RvcihwbGF5ZXIsIHRpdGxlLCBhcnRpc3QsIGtpbmQsIGdlbnJlLCBsaW1pdCwgYXJ0KSB7XHJcbiAgICAgICAgdGhpcy5fcGxheWVyID0gcGxheWVyO1xyXG4gICAgICAgIHRoaXMuX3RpdGxlID0gdGl0bGU7XHJcbiAgICAgICAgdGhpcy5fYXJ0aXN0ID0gYXJ0aXN0O1xyXG4gICAgICAgIHRoaXMuX2tpbmQgPSBraW5kO1xyXG4gICAgICAgIHRoaXMuX2dlbnJlID0gZ2VucmU7XHJcbiAgICAgICAgdGhpcy5fbGltaXQgPSBsaW1pdDtcclxuICAgICAgICB0aGlzLl9hcnQgPSBhcnQ7XHJcblxyXG4gICAgICAgIHRoaXMuY2hhcnRJdGVtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICAgICAgdGhpcy5jaGFydEl0ZW0uY2xhc3NOYW1lID0gJ2NvbC00JztcclxuICAgICAgICAvLyB0aGlzLmNoYXJ0SXRlbS5zZXRBdHRyaWJ1dGUoJ2RhdGEtZ2VucmUnLCB0aGlzLl9nZW5yZSk7XHJcbiAgICAgICAgLy8gdGhpcy5jaGFydEl0ZW0uc2V0QXR0cmlidXRlKCdkYXRhLWxpbWl0JywgdGhpcy5fbGltaXQpO1xyXG4gICAgICAgIHRoaXMuYmluZEV2ZW50cygpO1xyXG4gICAgICAgIGxldCB0ZW1wSW5uZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICB0ZW1wSW5uZXIuaW5uZXJIVE1MID0gYFxyXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNoYXJ0LWl0ZW0gY2FyZFwiPlxyXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjYXJkLWNvbnRhaW5lclwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY2FyZC1pbWFnZVwiIHN0eWxlPVwiYmFja2dyb3VuZC1pbWFnZTogdXJsKCR7YXJ0fSk7XCI+PC9kaXY+XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwidGl0bGUtY29udGFpbmVyXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzcz1cInRpdGxlXCI+JHt0aGlzLl90aXRsZX08L3A+PHNwYW4gY2xhc3M9XCJzdWJ0aXRsZVwiPkJ5IFNvdW5kQ2xvdWQ8L3NwYW4+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgIGA7XHJcbiAgICAgICAgdGhpcy5jaGFydEl0ZW0uYXBwZW5kQ2hpbGQodGVtcElubmVyKTsgLy8gTXVzdCB1c2UgdGhpcyBtZXRob2QgdG8gcHJlc2VydmUgbGlzdGVuZXJzXHJcbiAgICB9XHJcblxyXG4gICAgcmVuZGVyKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmNoYXJ0SXRlbTtcclxuICAgIH1cclxuXHJcbiAgICBiaW5kRXZlbnRzKCkge1xyXG4gICAgICAgIHRoaXMuY2hhcnRJdGVtLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5fcGxheWVyLmdldFRyYWNrc0Zyb21DaGFydHModGhpcy5fa2luZCwgdGhpcy5fZ2VucmUsIHRoaXMuX2xpbWl0KTtcclxuICAgICAgICAgICAgdGhpcy5fcGxheWVyLnNlYXJjaERpYWxvZy50b2dnbGVTZWFyY2hEaWFsb2coKTtcclxuICAgICAgICB9LCBmYWxzZSk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IENoYXJ0SXRlbTtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3B1YmxpYy9jb250cm9scy9jaGFydGl0ZW0uanNcbi8vIG1vZHVsZSBpZCA9IDdcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiaW1wb3J0IFF1ZXVlSXRlbSBmcm9tICcuL3F1ZXVlaXRlbSc7XHJcbmltcG9ydCBVdGlscyBmcm9tICcuLi9qcy91dGlscyc7XHJcbmltcG9ydCBTZXR0aW5ncyBmcm9tICcuLi9qcy9zZXR0aW5ncyc7XHJcblxyXG5jbGFzcyBEYXNoYm9hcmQge1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKHBsYXllcikge1xyXG4gICAgICAgIHRoaXMuX3BsYXllciA9IHBsYXllcjtcclxuICAgICAgICB0aGlzLmlzU2hvd24gPSBmYWxzZTtcclxuICAgICAgICB0aGlzLnF1ZXVlSXRlbUNvdW50ID0gMDsgLy8gQ291bnRzIG51bWJlciBvZiBzb25ncyBvbiBxdWV1ZVxyXG4gICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNkYXNoYm9hcmRNb2RhbENvbnRhaW5lcicpLmlubmVySFRNTCArPSB0aGlzLnJlbmRlcigpO1xyXG4gICAgICAgIHRoaXMuYmluZEV2ZW50cygpO1xyXG4gICAgICAgIFNldHRpbmdzLmxvYWRQcmVmcygpOyAvLyBJbml0IHNldHRpbmdzXHJcbiAgICAgICAgdGhpcy51cGRhdGVDb250cm9scygpOyAvLyBVcGRhdGUgc2V0dGluZ3MgY29udHJvbHNcclxuICAgIH1cclxuXHJcbiAgICByZW5kZXIoKSB7XHJcbiAgICAgICAgcmV0dXJuIGBcclxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cImhlcm8tYm9keVwiPlxyXG4gICAgICAgICAgICAgICAgPGRpdiBpZD1cImRhc2hib2FyZENsb3NlQnRuXCIgY2xhc3M9XCJkaWFsb2ctY2xvc2UtYnRuIGxpbmstYnRuXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJpY29uXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxpIGNsYXNzPVwiZmEgZmEtdGltZXNcIiBhcmlhLWhpZGRlbj1cInRydWVcIj48L2k+XHJcbiAgICAgICAgICAgICAgICAgICAgPC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICA8ZGl2IGlkPVwidGFic1wiIGNsYXNzPVwiY29udGVudFwiPlxyXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJ0YWItY29udGFpbmVyIHRhYnMtY2VudGVyXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDx1bD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsaSBjbGFzcz1cInRhYi1pdGVtIHNlbGVjdGVkXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGE+U2V0dGluZ3M8L2E+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2xpPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxpIGlkPVwicXVldWVUYWJcIiBjbGFzcz1cInRhYi1pdGVtXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGE+UXVldWU8L2E+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2xpPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8L3VsPlxyXG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJ0YWJwYWdlIHNob3duXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxoMz5TZXR0aW5nczwvaDM+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJkaXZpZGVyXCI+PC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJyb3dcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJ0b2dnbGUtY29udGFpbmVyXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHA+RW5hYmxlIGJhdHRlcnkgc2F2ZXI8L3A+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInRvZ2dsZS1zd2l0Y2hcIj48aW5wdXQgdHlwZT1cImNoZWNrYm94XCIgaWQ9XCJjaGtCYXR0ZXJ5XCIvPjxsYWJlbCBmb3I9XCJjaGtCYXR0ZXJ5XCI+PC9sYWJlbD48L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInRvZ2dsZS1jb250YWluZXJcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cD5EYXJrIFRoZW1lPC9wPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJ0b2dnbGUtc3dpdGNoXCI+PGlucHV0IHR5cGU9XCJjaGVja2JveFwiIGlkPVwiY2hrRGFya1wiLz48bGFiZWwgZm9yPVwiY2hrRGFya1wiPjwvbGFiZWw+PC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInRhYnBhZ2VcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInJvdyBsZXZlbFwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGgzIHN0eWxlPVwiZmxleC1ncm93OiAxO1wiPlF1ZXVlPC9oMz48YnV0dG9uIGlkPVwiYnRuQ2xlYXJRdWV1ZVwiIGNsYXNzPVwiYnRuLXNtYWxsIGJ0bi1uaW1idXNcIj5DbGVhciBRdWV1ZTwvYnV0dG9uPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImRpdmlkZXJcIj48L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPHNwYWNlPjwvc3BhY2U+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgaWQ9XCJxdWV1ZUNvbnRhaW5lclwiPlxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgYDtcclxuICAgIH1cclxuXHJcbiAgICBiaW5kRXZlbnRzKCkge1xyXG4gICAgICAgIHRoaXMuZGFzaGJvYXJkQ2xvc2VCdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZGFzaGJvYXJkQ2xvc2VCdG4nKTtcclxuICAgICAgICB0aGlzLnF1ZXVlVGFiID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3F1ZXVlVGFiJyk7XHJcbiAgICAgICAgdGhpcy5xdWV1ZUNvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdxdWV1ZUNvbnRhaW5lcicpO1xyXG4gICAgICAgIHRoaXMuYnRuQ2xlYXJRdWV1ZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdidG5DbGVhclF1ZXVlJyk7XHJcblxyXG4gICAgICAgIHRoaXMuY2hrQmF0dGVyeSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjaGtCYXR0ZXJ5Jyk7XHJcblxyXG4gICAgICAgIC8vIEV2ZW50IGhhbmRsZXIgZm9yIGNsb3NlIGJ1dHRvbiBmb3Igc2VhcmNoIGRpYWxvZ1xyXG4gICAgICAgIHRoaXMuZGFzaGJvYXJkQ2xvc2VCdG4ub25jbGljayA9IChlKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuaGlkZURhc2hib2FyZCgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5xdWV1ZVRhYi5vbmNsaWNrID0gKGUpID0+IHtcclxuICAgICAgICAgICAgLy8gVXBkYXRlIHF1ZXVlIGl0ZW1zXHJcbiAgICAgICAgICAgIHRoaXMucmVmcmVzaFF1ZXVlQ29udGFpbmVyKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBTZXR0aW5ncyBjb250cm9sc1xyXG4gICAgICAgIHRoaXMuY2hrQmF0dGVyeS5vbmNsaWNrID0gKGUpID0+IHtcclxuICAgICAgICAgICAgU2V0dGluZ3Muc3RvcmVQcmVmKCdiYXR0ZXJ5U2F2ZXInLCB0aGlzLmNoa0JhdHRlcnkuY2hlY2tlZCk7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmNoa0JhdHRlcnkuY2hlY2tlZCAmJiAhZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJiYXR0ZXJ5U2F2ZXJcIikpIHtcclxuICAgICAgICAgICAgICAgICQoU2V0dGluZ3MuYmF0dGVyeVNhdmVyQ1NTKS5hcHBlbmRUbyhcImhlYWRcIik7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAkKCcjYmF0dGVyeVNhdmVyJykucmVtb3ZlKCk7IC8vIFJlbW92ZSB0aGUgc3R5bGUgc2hlZXRcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5idG5DbGVhclF1ZXVlLm9uY2xpY2sgPSAoZSkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLmNsZWFyUXVldWUoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgdXBkYXRlQ29udHJvbHMoKSB7XHJcblxyXG4gICAgICAgIC8vIFVwZGF0ZSBzZXR0aW5ncyBjb250cm9sc1xyXG4gICAgICAgIHRoaXMuY2hrQmF0dGVyeS5jaGVja2VkID0gSlNPTi5wYXJzZShTZXR0aW5ncy5nZXRQcmVmKCdiYXR0ZXJ5U2F2ZXInKSk7XHJcbiAgICB9XHJcblxyXG4gICAgdG9nZ2xlRGFzaGJvYXJkKCkge1xyXG4gICAgICAgIC8vIFNjcm9sbCB0byB0b3AgdG8gc2hvdyB0aGUgc2VhcmNoIGRpYWxvZ1xyXG4gICAgICAgIHdpbmRvdy5zY3JvbGxUbygwLCAwKTtcclxuXHJcbiAgICAgICAgdGhpcy5pc1Nob3duID0gIXRoaXMuaXNTaG93bjtcclxuICAgICAgICBpZiAodGhpcy5pc1Nob3duKSB7XHJcbiAgICAgICAgICAgICQoJyNkYXNoYm9hcmRNb2RhbENvbnRhaW5lcicpLmFkZENsYXNzKCdzaG93bicpO1xyXG4gICAgICAgICAgICBpZiAoJCh3aW5kb3cpLndpZHRoKCkgPD0gNzY4KVxyXG4gICAgICAgICAgICAgICAgJCgnYm9keScpLmNzcyh7J292ZXJmbG93LXknOiAnaGlkZGVuJ30pO1xyXG4gICAgICAgICAgICB0aGlzLnJlZnJlc2hRdWV1ZUNvbnRhaW5lcigpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIC8vIFJlc2V0IGRpYWxvZyAobXVzdCBwbGFjZSB1cCBoZXJlIHRvIGFjY291bnQgZm9yIGludmFsaWQgaW5wdXQpXHJcbiAgICAgICAgICAgICQoJyNkYXNoYm9hcmRNb2RhbENvbnRhaW5lcicpLnJlbW92ZUNsYXNzKCdzaG93bicpOyAvLyBIaWRlIHRoZSBzZWFyY2ggbW9kYWxcclxuICAgICAgICAgICAgaWYgKCQod2luZG93KS53aWR0aCgpIDw9IDc2OCkgLy8gRm9yIG1vYmlsZSBVSVxyXG4gICAgICAgICAgICAgICAgJCgnYm9keScpLmNzcyh7J292ZXJmbG93LXknOiAnc2Nyb2xsJ30pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcblxyXG4gICAgaGlkZURhc2hib2FyZCgpIHtcclxuICAgICAgICAvLyBSZXNldCBkaWFsb2cgKG11c3QgcGxhY2UgdXAgaGVyZSB0byBhY2NvdW50IGZvciBpbnZhbGlkIGlucHV0KVxyXG4gICAgICAgICQoJyNkYXNoYm9hcmRNb2RhbENvbnRhaW5lcicpLnJlbW92ZUNsYXNzKCdzaG93bicpOyAvLyBIaWRlIHRoZSBzZWFyY2ggbW9kYWxcclxuICAgICAgICBpZiAoJCh3aW5kb3cpLndpZHRoKCkgPD0gNzY4KSAvLyBGb3IgbW9iaWxlIFVJXHJcbiAgICAgICAgICAgICQoJ2JvZHknKS5jc3MoeydvdmVyZmxvdy15JzogJ3Njcm9sbCd9KTtcclxuICAgICAgICB0aGlzLmlzU2hvd24gPSBmYWxzZTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgcmVmcmVzaFF1ZXVlQ29udGFpbmVyKCkge1xyXG4gICAgICAgIGlmICh0aGlzLl9wbGF5ZXIucXVldWUubGVuZ3RoID4gMCApIHtcclxuICAgICAgICAgICAgdGhpcy5xdWV1ZUl0ZW1Db3VudCA9IDA7XHJcbiAgICAgICAgICAgIGxldCBxID0gbnVsbDtcclxuICAgICAgICAgICAgbGV0IGZyYWcgPSAnJztcclxuICAgICAgICAgICAgZm9yIChsZXQgaSA9IHRoaXMuX3BsYXllci5xdWV1ZS5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xyXG4gICAgICAgICAgICAgICAgcSA9IG5ldyBRdWV1ZUl0ZW0odGhpcy5fcGxheWVyLCB0aGlzLl9wbGF5ZXIucXVldWVbaV0pO1xyXG4gICAgICAgICAgICAgICAgZnJhZyArPSBxLnJlbmRlcigpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5xdWV1ZUl0ZW1Db3VudCArPSAxO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMucXVldWVDb250YWluZXIuaW5uZXJIVE1MID0gZnJhZztcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLnF1ZXVlSXRlbUNvdW50ID0gMDtcclxuICAgICAgICAgICAgLy8gTm90aWZpY2F0aW9uIHRoYXQgcXVldWUgaXMgZW1wdHlcclxuICAgICAgICAgICAgdGhpcy5xdWV1ZUNvbnRhaW5lci5pbm5lckhUTUwgPSBgPGRpdiBjbGFzcz1cInRleHQtY2VudGVyXCI+XHJcbiAgICAgICAgICAgICAgICA8aDYgY2xhc3M9XCJsaWdodFwiIHN0eWxlPVwiY29sb3I6ICM3MTc1Nzk7XCI+XHJcbiAgICAgICAgICAgICAgICBMb29rcyBsaWtlIHlvdXIgcXVldWUgaXMgZW1wdHkuIE5pbWJ1cyB3aWxsIGNvbnRpbnVlIHRvIGZldGNoIG11c2ljIGluIHRoZSBiYWNrZ3JvdW5kLjwvaDY+XHJcbiAgICAgICAgICAgIDwvZGl2PmA7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGNsZWFyUXVldWUoKSB7XHJcbiAgICAgICAgdGhpcy5fcGxheWVyLnF1ZXVlID0gW107IC8vIENsZWFyIHRoZSBxdWV1ZVxyXG4gICAgICAgIHRoaXMucXVldWVDb250YWluZXIuaW5uZXJIVE1MID0gYDxkaXYgY2xhc3M9XCJ0ZXh0LWNlbnRlclwiPlxyXG4gICAgICAgICAgICAgICAgPGg2IGNsYXNzPVwibGlnaHRcIiBzdHlsZT1cImNvbG9yOiAjNzE3NTc5O1wiPlxyXG4gICAgICAgICAgICAgICAgTG9va3MgbGlrZSB5b3VyIHF1ZXVlIGlzIGVtcHR5LiBOaW1idXMgd2lsbCBjb250aW51ZSB0byBmZXRjaCBtdXNpYyBpbiB0aGUgYmFja2dyb3VuZC48L2g2PlxyXG4gICAgICAgICAgICA8L2Rpdj5gO1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBEYXNoYm9hcmQ7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9wdWJsaWMvY29udHJvbHMvZGFzaGJvYXJkLmpzXG4vLyBtb2R1bGUgaWQgPSA4XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsImltcG9ydCBVdGlscyBmcm9tICcuLi9qcy91dGlscyc7XHJcblxyXG5jbGFzcyBRdWV1ZUl0ZW0ge1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKHBsYXllciwgdHJhY2spIHtcclxuICAgICAgICB0aGlzLl9wbGF5ZXIgPSBwbGF5ZXI7XHJcbiAgICAgICAgdGhpcy5fdHJhY2sgPSB0cmFjaztcclxuICAgIH1cclxuXHJcbiAgICByZW5kZXIoKSB7XHJcbiAgICAgICAgcmV0dXJuIGBcclxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cInF1ZXVlLWl0ZW1cIj5cclxuICAgICAgICAgICAgICAgIDxoNiBjbGFzcz1cInRpdGxlIGxpZ2h0IGJ0bi10b29sdGlwXCIgZGF0YS10b29sdGlwPVwiJHt0aGlzLl90cmFjay50aXRsZX1cIj48c3Bhbj4ke3RoaXMuX3RyYWNrLnRpdGxlfTwvc3Bhbj48ZGl2IGNsYXNzPVwicHVsbC1yaWdodFwiPiR7VXRpbHMuY29udmVydE1pbGxpc2Vjb25kc1RvRGlnaXRhbENsb2NrKHRoaXMuX3RyYWNrLmR1cmF0aW9uKS5jbG9ja308L2Rpdj48L2g2PlxyXG4gICAgICAgICAgICAgICAgPHAgY2xhc3M9XCJzdWJ0aXRsZVwiPjxzcGFuPiR7dGhpcy5fdHJhY2sudXNlci51c2VybmFtZX08L3NwYW4+XHJcbiAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJxdWV1ZS1pdGVtLWFjdGlvbnMgcHVsbC1yaWdodFwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8YSBocmVmPVwiJHt0aGlzLl90cmFjay5wZXJtYWxpbmtfdXJsfVwiIHRhcmdldD1cIl9ibGFua1wiPjxzcGFuIGNsYXNzPVwiaWNvblwiPjxpIGNsYXNzPVwiZmEgZmEtZXh0ZXJuYWwtbGluay1zcXVhcmUgc21hbGxcIiBhcmlhLWhpZGRlbj1cInRydWVcIj48L2k+PC9zcGFuPjwvYT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJpY29uXCIgaWQ9XCJxdWV1ZURlbGV0ZVwiPjxpIGNsYXNzPVwiZmEgZmEtdGltZXMgc21hbGxcIiBhcmlhLWhpZGRlbj1cInRydWVcIj48L2k+PC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgICAgIDwvc3Bhbj5cclxuICAgICAgICAgICAgICAgIDwvcD5cclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgYDtcclxuICAgIH1cclxuXHJcbiAgICBiaW5kRXZlbnRzKCkge1xyXG5cclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgUXVldWVJdGVtO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vcHVibGljL2NvbnRyb2xzL3F1ZXVlaXRlbS5qc1xuLy8gbW9kdWxlIGlkID0gOVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJpbXBvcnQgQ2hhcnRJdGVtIGZyb20gJy4vY2hhcnRpdGVtJ1xyXG5pbXBvcnQgVXRpbHMgZnJvbSAnLi4vanMvdXRpbHMnXHJcblxyXG5sZXQgU0MgPSByZXF1aXJlKCdzb3VuZGNsb3VkJyk7XHJcblxyXG5jbGFzcyBTZWFyY2gge1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKHBsYXllcikge1xyXG4gICAgICAgIHRoaXMuX3BsYXllciA9IHBsYXllcjtcclxuICAgICAgICB0aGlzLmlzU2hvd24gPSBmYWxzZTtcclxuICAgICAgICBcclxuICAgICAgICB0aGlzLnJlbmRlcigpO1xyXG4gICAgICAgIHRoaXMuYmluZEV2ZW50cygpO1xyXG5cclxuICAgICAgICB0aGlzLmxvYWRDaGFydHMoKTtcclxuICAgIH1cclxuXHJcbiAgICByZW5kZXIoKSB7XHJcbiAgICAgICAgLy8gQ3JlYXRlIHRoZSBzZWFyY2ggZGlhbG9nIGh0bWxcclxuICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjc2VhcmNoTW9kYWxDb250YWluZXInKS5pbm5lckhUTUwgKz0gYFxyXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwiaGVyby1ib2R5XCI+XHJcbiAgICAgICAgICAgICAgICA8ZGl2IGlkPVwic2VhcmNoQ2xvc2VCdG5cIiBjbGFzcz1cImRpYWxvZy1jbG9zZS1idG4gbGluay1idG5cIj5cclxuICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cImljb25cIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPGkgY2xhc3M9XCJmYSBmYS10aW1lc1wiIGFyaWEtaGlkZGVuPVwidHJ1ZVwiPjwvaT5cclxuICAgICAgICAgICAgICAgICAgICA8L3NwYW4+XHJcbiAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjb250ZW50XCI+XHJcbiAgICAgICAgICAgICAgICAgICAgPHNwYWNlIHN0eWxlPVwiaGVpZ2h0OiAyMHZoO1wiPjwvc3BhY2U+XHJcbiAgICAgICAgICAgICAgICAgICAgPGg2IGNsYXNzPVwidXBwZXJjYXNlXCI+U2VhcmNoIGZvciBzb25ncywgPHNwYW4gY2xhc3M9XCJzZWFyY2gtaXRlbVwiIGlkPVwic2VhcmNoU2V0c1wiPnNldHM8L3NwYW4+LCA8c3BhbiBjbGFzcz1cInNlYXJjaC1pdGVtXCIgaWQ9XCJzZWFyY2hVc2VyXCI+dXNlcnM8L3NwYW4+LCA8c3BhbiBjbGFzcz1cInNlYXJjaC1pdGVtXCIgaWQ9XCJzZWFyY2hUYWdzXCI+dGFnczwvc3Bhbj4sIGFuZCBtb3JlPC9oNj5cclxuICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT1cInRleHRcIiBwbGFjZWhvbGRlcj1cInNlYXJjaFwiIGlkPVwic2VhcmNoRmllbGRcIi8+XHJcbiAgICAgICAgICAgICAgICAgICAgPHNwYWNlPjwvc3BhY2U+XHJcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cIm92ZXJmbG93LWNvbnRhaW5lclwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwicm93IGxldmVsXCIgaWQ9XCJvcHRpb25zQ29udGFpbmVyXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgY2xhc3M9XCJidXR0b24tc3dpdGNoIGJ0bi10b29sdGlwXCIgZGF0YS10b29sdGlwPVwiU2h1ZmZsZSB0cmFja3MgYmVmb3JlIGFkZGluZyB0byBxdWV1ZS5cIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT1cImNoZWNrYm94XCIgbmFtZT1cInNodWZmbGVcIiB2YWx1ZT1cIlNodWZmbGVcIiBpZD1cImNoa1NodWZmbGVcIi8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJ1cHBlcmNhc2VcIj5TaHVmZmxlPC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9sYWJlbD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBjbGFzcz1cImJ1dHRvbi1zd2l0Y2ggYnRuLXRvb2x0aXBcIiBkYXRhLXRvb2x0aXA9XCJOdW1iZXIgb2YgcmVzdWx0cyB0byBxdWV1ZS5cIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT1cImNoZWNrYm94XCIgbmFtZT1cInJlc3VsdHNcIiB2YWx1ZT1cInJlc3VsdHNcIiBpZD1cImNoa051bWJlclwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGlkPVwiY2hrTnVtYmVyVGV4dFwiIGNsYXNzPVwidXBwZXJjYXNlXCI+MTIwIHJlc3VsdHM8L3NwYW4+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2xhYmVsPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICA8c3BhY2UgY2xhc3M9XCJ4LWxhcmdlXCI+PC9zcGFjZT5cclxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwicm93XCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxoMz5DaGFydHM8L2gzPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwicm93XCIgaWQ9XCJjaGFydENvbnRhaW5lclwiPlxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgIGA7XHJcbiAgICB9XHJcblxyXG4gICAgYmluZEV2ZW50cygpIHtcclxuICAgICAgICB0aGlzLnNlYXJjaENsb3NlQnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NlYXJjaENsb3NlQnRuJyk7XHJcbiAgICAgICAgdGhpcy5zZWFyY2hGaWVsZCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzZWFyY2hGaWVsZCcpO1xyXG4gICAgICAgIHRoaXMuY2hrU2h1ZmZsZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjaGtTaHVmZmxlJyk7XHJcbiAgICAgICAgdGhpcy5jaGtOdW1iZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY2hrTnVtYmVyJyk7XHJcblxyXG4gICAgICAgIHRoaXMuc2VhcmNoU2V0cyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzZWFyY2hTZXRzJyk7XHJcbiAgICAgICAgdGhpcy5zZWFyY2hVc2VyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NlYXJjaFVzZXInKTtcclxuICAgICAgICB0aGlzLnNlYXJjaFRhZ3MgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2VhcmNoVGFncycpO1xyXG5cclxuICAgICAgICAvLyBCaW5kIHNlYXJjaCBmaWVsZCBrZXkgY29tYmluYXRpb25cclxuICAgICAgICB0aGlzLnNlYXJjaEZpZWxkLm9ua2V5ZG93biA9IChlKSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChlLmtleUNvZGUgPT09IDEzKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBFRElUOiBJZiB0aGUgcXVldWUgaXMgbm9uZW1wdHksIHByZXNlcnZlIHRoZSBxdWV1ZSBlbGVtZW50cyBhbmQganVzdCBpbnNlcnQgdGhlIHNvbmcgaW4gYmV0d2VlbiBoaXN0b3J5IGFuZCBxdWV1ZSAobm8gY29kZSlcclxuXHJcbiAgICAgICAgICAgICAgICAvLyBIaWRlIHRoZSBzZWFyY2ggZGlhbG9nXHJcbiAgICAgICAgICAgICAgICB0aGlzLmhpZGVTZWFyY2hEaWFsb2coKTtcclxuICAgICAgICAgICAgICAgIHRoaXMucHJvY2Vzc1NlYXJjaEZpZWxkKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGRvY3VtZW50Lm9ua2V5dXAgPSAoZSkgPT4ge1xyXG4gICAgICAgICAgICBpZiAoZS5rZXlDb2RlID09PSAyNykgeyAvLyBlc2NcclxuICAgICAgICAgICAgICAgIHRoaXMudG9nZ2xlU2VhcmNoRGlhbG9nKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIEV2ZW50IGhhbmRsZXIgZm9yIGNsb3NlIGJ1dHRvbiBmb3Igc2VhcmNoIGRpYWxvZ1xyXG4gICAgICAgIHRoaXMuc2VhcmNoQ2xvc2VCdG4ub25jbGljayA9IChlKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuaGlkZVNlYXJjaERpYWxvZygpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5jaGtTaHVmZmxlLm9uY2xpY2sgPSAoZSkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLl9wbGF5ZXIuc2h1ZmZsZVF1ZXVlID0gdGhpcy5jaGtTaHVmZmxlLmNoZWNrZWQ7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLmNoa051bWJlci5vbmNsaWNrID0gKGUpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5zZXRSZXN1bHRDb3VudCgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5zZWFyY2hTZXRzLm9uY2xpY2sgPSAoZSkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLnNlYXJjaEl0ZW1DbGljayh0aGlzLnNlYXJjaFNldHMpO1xyXG4gICAgICAgICAgICB0aGlzLnNlYXJjaEZpZWxkLmZvY3VzKCk7XHJcbiAgICAgICAgfSAgXHJcblxyXG4gICAgICAgIHRoaXMuc2VhcmNoVXNlci5vbmNsaWNrID0gKGUpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5zZWFyY2hJdGVtQ2xpY2sodGhpcy5zZWFyY2hVc2VyKTtcclxuICAgICAgICAgICAgdGhpcy5zZWFyY2hGaWVsZC5mb2N1cygpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5zZWFyY2hUYWdzLm9uY2xpY2sgPSAoZSkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLnNlYXJjaEl0ZW1DbGljayh0aGlzLnNlYXJjaFRhZ3MpO1xyXG4gICAgICAgICAgICB0aGlzLnNlYXJjaEZpZWxkLmZvY3VzKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByb2Nlc3NTZWFyY2hGaWVsZCgpIHtcclxuICAgICAgICAvLyBDaGVjayBpZiBpbnB1dCBpcyBlbXB0eVxyXG4gICAgICAgIGlmICh0aGlzLnNlYXJjaEZpZWxkLnZhbHVlLmxlbmd0aCA9PT0gMClcclxuICAgICAgICAgICAgcmV0dXJuOyAvLyBFeGl0XHJcblxyXG4gICAgICAgIGxldCBpZnJhbWVJRCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd3aWRnZXR0ZXN0Jyk7XHJcbiAgICAgICAgdGhpcy5fcGxheWVyLmN1clBsYXllciA9IFNDLldpZGdldChpZnJhbWVJRCk7XHJcblxyXG4gICAgICAgIGxldCBzZWFyY2hRdWVyeSA9IHRoaXMuc2VhcmNoRmllbGQudmFsdWUudG9Mb3dlckNhc2UoKTsgLy8gQXNzaWduIHRoZSBzZWFyY2ggcXVlcnlcclxuXHJcbiAgICAgICAgLy8gRGV0ZXJtaW5lIGlucHV0IHR5cGVcclxuICAgICAgICBpZiAoc2VhcmNoUXVlcnkuc3RhcnRzV2l0aCgnaHR0cCcpICYmIGlzTmFOKHNlYXJjaFF1ZXJ5KSkgeyAvLyBDaGVjayBpZiB0aGlzIGlzIGEgdXJsXHJcbiAgICAgICAgICAgIHRoaXMuX3BsYXllci5pc1BsYXlsaXN0ID0gZmFsc2U7IC8vIFJlc2V0XHJcbiAgICAgICAgICAgIGlmIChzZWFyY2hRdWVyeS5pbmNsdWRlcygnc2V0cycpKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9wbGF5ZXIuaXNQbGF5bGlzdCA9IHRydWU7XHJcbiAgICAgICAgICAgIH0gICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICB0aGlzLl9wbGF5ZXIuY3VyUGxheWVyLmxvYWQoYCR7c2VhcmNoUXVlcnl9YCk7XHJcbiAgICAgICAgfSBlbHNlIGlmIChpc05hTihzZWFyY2hRdWVyeSkpIHsgLy8gQ2hlY2sgaWYgdGhpcyBpcyBhIHN0cmluZyBxdWVyeVxyXG4gICAgICAgICAgICAvLyBDaGVjayB0YWdzXHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKHNlYXJjaFF1ZXJ5LnN0YXJ0c1dpdGgoJ3NldDonKSk7XHJcbiAgICAgICAgICAgIGlmIChzZWFyY2hRdWVyeS5zdGFydHNXaXRoKCdwbGF5bGlzdDonKSB8fCBzZWFyY2hRdWVyeS5zdGFydHNXaXRoKCdzZXQ6JykpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX3BsYXllci5nZXRTZXRCeUtleVdvcmQoc2VhcmNoUXVlcnkuc3BsaXQoJzonKVsxXS50cmltKCkpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fcGxheWVyLmlzUGxheWxpc3QgPSB0cnVlO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKHNlYXJjaFF1ZXJ5LnN0YXJ0c1dpdGgoJ3RhZzonKSB8fCBzZWFyY2hRdWVyeS5zdGFydHNXaXRoKCd0YWdzOicpKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9wbGF5ZXIuZ2V0VHJhY2tzQnlUYWdzKHNlYXJjaFF1ZXJ5LnNwbGl0KCc6JylbMV0udHJpbSgpKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuX3BsYXllci5pc1BsYXlsaXN0ID0gZmFsc2U7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoc2VhcmNoUXVlcnkuc3RhcnRzV2l0aCgndXNlcjonKSl7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9wbGF5ZXIuZ2V0VHJhY2tzQnlVc2VyKHNlYXJjaFF1ZXJ5LnNwbGl0KCc6JylbMV0udHJpbSgpKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuX3BsYXllci5pc1BsYXlsaXN0ID0gZmFsc2U7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoc2VhcmNoUXVlcnkuc3RhcnRzV2l0aCgnZ2VucmU6JykgfHwgc2VhcmNoUXVlcnkuc3RhcnRzV2l0aCgnZ2VucmVzOicpKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9wbGF5ZXIuZ2V0VHJhY2tzQnlHZW5yZXMoc2VhcmNoUXVlcnkuc3BsaXQoJzonKVsxXS50cmltKCkpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fcGxheWVyLmlzUGxheWxpc3QgPSBmYWxzZTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX3BsYXllci5nZXRUcmFja0J5S2V5V29yZChzZWFyY2hRdWVyeSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9wbGF5ZXIuaXNQbGF5bGlzdCA9IGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIHsgLy8gTXVzdCBiZSBhIHNvbmcgSURcclxuICAgICAgICAgICAgdGhpcy5fcGxheWVyLmN1clBsYXllci5sb2FkKGBodHRwcyUzQS8vYXBpLnNvdW5kY2xvdWQuY29tL3RyYWNrcy8ke3NlYXJjaFF1ZXJ5fWApOyAvLyBGb3IgaWRcclxuICAgICAgICAgICAgdGhpcy5fcGxheWVyLmlzUGxheWxpc3QgPSBmYWxzZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHNldFRpbWVvdXQoKCkgPT4gdGhpcy5fcGxheWVyLmxvYWRXaWRnZXRTb25nKHRoaXMuX3BsYXllci5jdXJQbGF5ZXIpLCAyMDAwKTsgLy8gTmVlZHMgbG9uZ2VyIGRlbGF5IHRpbWUgc28gaXQgcHJldmVudHMgc3RhbGxpbmcgKHRyYWNrIG5vdCBhdXRvIHBsYXlpbmcpXHJcbiAgICB9XHJcblxyXG4gICAgdG9nZ2xlU2VhcmNoRGlhbG9nKCkge1xyXG4gICAgICAgIC8vIFNjcm9sbCB0byB0b3AgdG8gc2hvdyB0aGUgc2VhcmNoIGRpYWxvZ1xyXG4gICAgICAgIHdpbmRvdy5zY3JvbGxUbygwLCAwKTtcclxuXHJcbiAgICAgICAgdGhpcy5pc1Nob3duID0gIXRoaXMuaXNTaG93bjtcclxuICAgICAgICBpZiAodGhpcy5pc1Nob3duKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2VhcmNoRmllbGQudmFsdWUgPSBcIlwiO1xyXG4gICAgICAgICAgICB0aGlzLnNlYXJjaEZpZWxkLmZvY3VzKCk7XHJcbiAgICAgICAgICAgICQoJyNzZWFyY2hNb2RhbENvbnRhaW5lcicpLmFkZENsYXNzKCdzaG93bicpO1xyXG4gICAgICAgICAgICBpZiAoJCh3aW5kb3cpLndpZHRoKCkgPD0gNzY4KVxyXG4gICAgICAgICAgICAgICAgJCgnYm9keScpLmNzcyh7J292ZXJmbG93LXknOiAnaGlkZGVuJ30pO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIC8vIFJlc2V0IGRpYWxvZyAobXVzdCBwbGFjZSB1cCBoZXJlIHRvIGFjY291bnQgZm9yIGludmFsaWQgaW5wdXQpXHJcbiAgICAgICAgICAgICQoJyNzZWFyY2hNb2RhbENvbnRhaW5lcicpLnJlbW92ZUNsYXNzKCdzaG93bicpOyAvLyBIaWRlIHRoZSBzZWFyY2ggbW9kYWxcclxuICAgICAgICAgICAgaWYgKCQod2luZG93KS53aWR0aCgpIDw9IDc2OCkgLy8gRm9yIG1vYmlsZSBVSVxyXG4gICAgICAgICAgICAgICAgJCgnYm9keScpLmNzcyh7J292ZXJmbG93LXknOiAnc2Nyb2xsJ30pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcblxyXG4gICAgaGlkZVNlYXJjaERpYWxvZygpIHtcclxuICAgICAgICAvLyBSZXNldCBkaWFsb2cgKG11c3QgcGxhY2UgdXAgaGVyZSB0byBhY2NvdW50IGZvciBpbnZhbGlkIGlucHV0KVxyXG4gICAgICAgICQoJyNzZWFyY2hNb2RhbENvbnRhaW5lcicpLnJlbW92ZUNsYXNzKCdzaG93bicpOyAvLyBIaWRlIHRoZSBzZWFyY2ggbW9kYWxcclxuICAgICAgICBpZiAoJCh3aW5kb3cpLndpZHRoKCkgPD0gNzY4KSAvLyBGb3IgbW9iaWxlIFVJXHJcbiAgICAgICAgICAgICQoJ2JvZHknKS5jc3MoeydvdmVyZmxvdy15JzogJ3Njcm9sbCd9KTtcclxuICAgICAgICB0aGlzLmlzU2hvd24gPSBmYWxzZTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBTZWFyY2ggdGFnIGJ1dHRvbnNcclxuICAgIHNlYXJjaEl0ZW1DbGljayhlbGVtZW50KSB7XHJcbiAgICAgICAgc3dpdGNoIChlbGVtZW50LmlkKSB7XHJcbiAgICAgICAgICAgIGNhc2UgJ3NlYXJjaFNldHMnOlxyXG4gICAgICAgICAgICAgICAgdGhpcy5zZWFyY2hGaWVsZC52YWx1ZSA9ICdzZXQ6ICc7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSAnc2VhcmNoVXNlcic6XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNlYXJjaEZpZWxkLnZhbHVlID0gJ3VzZXI6ICc7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSAnc2VhcmNoVGFncyc6XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNlYXJjaEZpZWxkLnZhbHVlID0gJ3RhZ3M6ICc7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHNldFJlc3VsdENvdW50KCkge1xyXG4gICAgICAgIGxldCBjb3VudCA9IHByb21wdCgnSG93IG1hbnkgcmVzdWx0cyBkbyB5b3Ugd2FudCB0byBxdWV1ZT8nKTtcclxuXHJcbiAgICAgICAgaWYgKGNvdW50ID09PSBudWxsIHx8ICFpc0Zpbml0ZShjb3VudCkpIHtcclxuICAgICAgICAgICAgVXRpbHMuc2hvd1RvYXN0KCdQbGVhc2UgZW50ZXIgYSBudW1lcmljYWwgdmFsdWUgYW5kIHRyeSBhZ2Fpbi4nKTtcclxuICAgICAgICAgICAgdGhpcy5jaGtOdW1iZXIuY2hlY2tlZCA9IGZhbHNlO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgICQoJyNjaGtOdW1iZXJUZXh0JykudGV4dChgJHtjb3VudH0gcmVzdWx0c2ApO1xyXG4gICAgICAgIHRoaXMuX3BsYXllci5xdWV1ZU51bSA9IGNvdW50O1xyXG4gICAgfVxyXG5cclxuICAgIGxvYWRDaGFydHMoKSB7XHJcbiAgICAgICAgdGhpcy5jaGFydENvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNjaGFydENvbnRhaW5lcicpO1xyXG4gICAgICAgIGxldCBjID0gbmV3IENoYXJ0SXRlbSh0aGlzLl9wbGF5ZXIsICdTb3VuZENsb3VkIFRvcCA1MCcsICdTb3VuZENsb3VkJywgJ3RvcCcsICdzb3VuZGNsb3VkJTNBZ2VucmVzJTNBYWxsLW11c2ljJywgNTAsIGAuLi9pbWcvc291bmRjbG91ZF90b3A1MC5qcGdgKTtcclxuICAgICAgICB0aGlzLmNoYXJ0Q29udGFpbmVyLmFwcGVuZENoaWxkKGMucmVuZGVyKCkpO1xyXG4gICAgICAgIGMgPSBuZXcgQ2hhcnRJdGVtKHRoaXMuX3BsYXllciwgJ1JhcCBUb3AgNTAnLCAnU291bmRDbG91ZCcsICd0b3AnLCAnc291bmRjbG91ZCUzQWdlbnJlcyUzQWhpcGhvcHJhcCcsIDUwLCBgLi4vaW1nL3JhcF90b3A1MC5wbmdgKTtcclxuICAgICAgICB0aGlzLmNoYXJ0Q29udGFpbmVyLmFwcGVuZENoaWxkKGMucmVuZGVyKCkpO1xyXG4gICAgICAgIGMgPSBuZXcgQ2hhcnRJdGVtKHRoaXMuX3BsYXllciwgJ0ZyZXNoIEhpcC1ob3AgJiBSYXAnLCAnU291bmRDbG91ZCcsICd0cmVuZGluZycsICdzb3VuZGNsb3VkJTNBZ2VucmVzJTNBaGlwaG9wcmFwJywgNTAsIGAuLi9pbWcvZnJlc2hfcmFwLnBuZ2ApO1xyXG4gICAgICAgIHRoaXMuY2hhcnRDb250YWluZXIuYXBwZW5kQ2hpbGQoYy5yZW5kZXIoKSk7XHJcbiAgICAgICAgYyA9IG5ldyBDaGFydEl0ZW0odGhpcy5fcGxheWVyLCAnRGFuY2UgJiBFRE0gVG9wIDUwJywgJ1NvdW5kQ2xvdWQnLCAndG9wJywgJ3NvdW5kY2xvdWQlM0FnZW5yZXMlM0FkYW5jZWVkbScsIDUwLCBgLi4vaW1nL2VkbV90b3A1MC5qcGdgKTtcclxuICAgICAgICB0aGlzLmNoYXJ0Q29udGFpbmVyLmFwcGVuZENoaWxkKGMucmVuZGVyKCkpO1xyXG4gICAgICAgIGMgPSBuZXcgQ2hhcnRJdGVtKHRoaXMuX3BsYXllciwgJ0Vzc2VudGlhbCBFRE0nLCAnU291bmRDbG91ZCcsICd0cmVuZGluZycsICdzb3VuZGNsb3VkJTNBZ2VucmVzJTNBZGFuY2VlZG0nLCA1MCwgYC4uL2ltZy9lc3NlbnRpYWxfZWRtLnBuZ2ApO1xyXG4gICAgICAgIHRoaXMuY2hhcnRDb250YWluZXIuYXBwZW5kQ2hpbGQoYy5yZW5kZXIoKSk7XHJcbiAgICAgICAgXHJcbiAgICB9XHJcblxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBTZWFyY2g7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9wdWJsaWMvY29udHJvbHMvc2VhcmNoLmpzXG4vLyBtb2R1bGUgaWQgPSAxMFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJjb25zdCBTb25nSW5mbyA9IChsYXJnZUFydCwgdHJhY2ssIHRhZ3MsIGVycm9yUHVyY2hhc2UpID0+IChcclxuICAgIGBcclxuICAgICAgICA8ZGl2IGNsYXNzPVwiY2FyZCBsZXZlbFwiPlxyXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY29udGVudC1uby1wYWRkaW5nIHRleHQtY2VudGVyXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInJvdyBjZW50ZXJcIiBpZD1cImFydENvbnRhaW5lclwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY29sLTEyIG5vLW1hcmdpbiBuby1wYWRkaW5nXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZmxpcENvbnRhaW5lclwiIGlkPVwiZmxpcENvbnRhaW5lclwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbWcgaWQ9XCJzb25nQXJ0XCIgc3JjPVwiJHtsYXJnZUFydH1cIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwic29uZy1kZXNjXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjb250ZW50LW5vLXBhZGRpbmdcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJyb3cgdGV4dC1jZW50ZXJcIiBpZD1cImRlc2NOYXZCYXJcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPVwiYnRuLXRyYW5zcGFyZW50XCIgaWQ9XCJkZXNjLWxpa2VzXCI+PGkgY2xhc3M9XCJmYSBmYS1oZWFydCBzbWFsbFwiIGFyaWEtaGlkZGVuPVwidHJ1ZVwiPjwvaT48c3Bhbj4ke3RyYWNrLmxpa2VzX2NvdW50fTwvc3Bhbj48L2J1dHRvbj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YSBocmVmPVwiJHt0cmFjay5wZXJtYWxpbmtfdXJsICsgJy9jb21tZW50cyd9XCIgdGFyZ2V0PVwiX2JsYW5rXCI+PGJ1dHRvbiBjbGFzcz1cImJ0bi10cmFuc3BhcmVudFwiIGlkPVwiZGVzYy1jb21tZW50c1wiPjxpIGNsYXNzPVwiZmEgZmEtY29tbWVudCBzbWFsbFwiIGFyaWEtaGlkZGVuPVwidHJ1ZVwiPjwvaT48c3Bhbj4ke3RyYWNrLmNvbW1lbnRfY291bnQgfHwgMH08L3NwYW4+PC9idXR0b24+PC9hPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9XCJidG4tdHJhbnNwYXJlbnRcIiBpZD1cImRlc2MtcmVwb3N0c1wiPjxpIGNsYXNzPVwiZmEgZmEtcmV0d2VldCBzbWFsbFwiIGFyaWEtaGlkZGVuPVwidHJ1ZVwiPjwvaT48c3Bhbj4ke3RyYWNrLnJlcG9zdHNfY291bnR9PC9zcGFuPjwvYnV0dG9uPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxhIGhyZWY9XCIke3RyYWNrLnVzZXIucGVybWFsaW5rX3VybH1cIiB0YXJnZXQ9XCJfYmxhbmtcIj48YnV0dG9uIGNsYXNzPVwiYnRuLXRyYW5zcGFyZW50XCIgaWQ9XCJkZXNjLXVzZXJcIj48aSBjbGFzcz1cImZhIGZhLXVzZXIgc21hbGxcIiBhcmlhLWhpZGRlbj1cInRydWVcIj48L2k+PHNwYW4+JHt0cmFjay51c2VyLnVzZXJuYW1lfTwvc3Bhbj48L2J1dHRvbj48L2E+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGEgaHJlZj1cIiR7dHJhY2sudXNlci5wdXJjaGFzZV91cmwgfHwgZXJyb3JQdXJjaGFzZX1cIiB0YXJnZXQ9XCJfYmxhbmtcIj48YnV0dG9uIGNsYXNzPVwiYnRuLXRyYW5zcGFyZW50XCIgaWQ9XCJkZXNjLWJ1eVwiPjxpIGNsYXNzPVwiZmEgZmEtdXNkIHNtYWxsXCIgYXJpYS1oaWRkZW49XCJ0cnVlXCI+PC9pPjxzcGFuPlB1cmNoYXNlPC9zcGFuPjwvYnV0dG9uPjwvYT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInJvdyB0ZXh0LWNlbnRlclwiIGlkPVwiZGVzY1N0YXRzXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHA+Q3JlYXRlZDogJHt0cmFjay5jcmVhdGVkX2F0LnNwbGl0KCdUJylbMF0ucmVwbGFjZSgvLS9nLCAnIC8gJyl9PC9wPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwicm93XCIgaWQ9XCJkZXNjVGFnc1wiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICR7dGFnc31cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYWNlIGNsYXNzPVwibGFyZ2VcIj48L3NwYWNlPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY29udGVudFwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHByZT4ke3RyYWNrLmRlc2NyaXB0aW9uIHx8ICdObyBkZXNjcmlwdGlvbiBhdmFpbGFibGUuJ308L3ByZT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgPGg1IGlkPVwidHJhY2tUaXRsZVwiIGNsYXNzPVwibGlnaHRcIj4ke3RyYWNrLnRpdGxlfTwvaDU+XHJcbiAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3M9XCJ0aXRsZSB1cHBlcmNhc2VcIiBpZD1cInRyYWNrVXNlclwiPiR7dHJhY2sudXNlci51c2VybmFtZX08L3A+XHJcbiAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3M9XCJzdWJ0aXRsZVwiIGlkPVwiY3VyVGltZVwiPjA6MDAgLyA0OjIwPC9wPlxyXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJ3YXZlZm9ybVwiPjwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgIDxzcGFjZT48L3NwYWNlPlxyXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJsZXZlbFwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cImljb25cIj48aSBjbGFzcz1cImZhIGZhLXZvbHVtZS1vZmZcIiBhcmlhLWhpZGRlbj1cInRydWVcIj48L2k+PC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgaWQ9XCJ2b2x1bWVTbGlkZXJcIiB0eXBlPVwicmFuZ2VcIiBtaW49XCIwXCIgbWF4PVwiMTAwXCIgdmFsdWU9XCIwXCIgY2xhc3M9XCJyYW5nZVwiLz5cclxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICBgXHJcbik7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBTb25nSW5mb1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vcHVibGljL2NvbnRyb2xzL3NvbmdpbmZvLmpzXG4vLyBtb2R1bGUgaWQgPSAxMVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvKipcclxuICogRHJhd3MgdGhlIHdhdmVmb3JtIGNvbXBvbmVudCBvZiB0aGUgcGxheWVyLlxyXG4gKi9cclxuaW1wb3J0IFNldHRpbmdzIGZyb20gJy4uL2pzL3NldHRpbmdzJztcclxubGV0IFNDID0gcmVxdWlyZSgnc291bmRjbG91ZCcpO1xyXG5cclxuY2xhc3MgV2F2ZUZvcm0ge1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQ29uc3RydWN0b3IgZm9yIHRoZSB3YXZlZm9ybVxyXG4gICAgICogQHBhcmFtIHtXYXZlRm9ybUNvbmZpZ30gLSB7XHJcbiAgICAgICAgICAgIGNvbnRhaW5lcjogSFRNTEVsZW1lbnQsXHJcbiAgICAgICAgICAgIGF1ZGlvOiBBdWRpbyxcclxuICAgICAgICAgICAgZGF0YTogQXJyYXksXHJcbiAgICAgICAgICAgIHBlYWtXaWR0aDogbnVtYmVyLFxyXG4gICAgICAgICAgICBwZWFrU3BhY2U6IG51bWJlcixcclxuICAgICAgICAgICAgcmVzcG9uc2l2ZTogYm9vbGVhbixcclxuICAgICAgICAgICAgbW91c2VPdmVyRXZlbnRzOiBib29sZWFuLFxyXG4gICAgICAgICAgICBjb2xvcjoge1xyXG4gICAgICAgICAgICAgICAgYmFja2dyb3VuZDogc3RyaW5nLFxyXG4gICAgICAgICAgICAgICAgZm9vdGVyOiBzdHJpbmcsXHJcbiAgICAgICAgICAgICAgICBmb290ZXJQbGF5YmFjazogc3RyaW5nLFxyXG4gICAgICAgICAgICAgICAgaG92ZXJHcmFkaWVudDoge1xyXG4gICAgICAgICAgICAgICAgICAgIGZyb206IHN0cmluZyxcclxuICAgICAgICAgICAgICAgICAgICB0bzogc3RyaW5nXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIHBsYXliYWNrR3JhZGllbnQ6IHtcclxuICAgICAgICAgICAgICAgICAgICBmcm9tOiBzdHJpbmcsXHJcbiAgICAgICAgICAgICAgICAgICAgdG86IHN0cmluZ1xyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICBob3ZlclBsYXliYWNrR3JhZGllbnQ6IHtcclxuICAgICAgICAgICAgICAgICAgICBmcm9tOiBzdHJpbmcsXHJcbiAgICAgICAgICAgICAgICAgICAgdG86IHN0cmluZ1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICovXHJcbiAgICBjb25zdHJ1Y3RvcihwYXJhbXMpIHtcclxuICAgICAgICB0aGlzLmN1cnJlbnRQb3NpdGlvbiA9IDA7XHJcbiAgICAgICAgdGhpcy5kdXJhdGlvbiA9IDA7XHJcbiAgICAgICAgdGhpcy5tb3VzZU92ZXIgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLmNhbnZhcyA9IG51bGw7XHJcblxyXG4gICAgICAgIHRoaXMud2F2ZUZvcm1GcmFtZSA9IDA7XHJcbiAgICAgICAgdGhpcy51cGRhdGVJbnRlcnZhbCA9IChTZXR0aW5ncy5nZXRQcmVmKCdiYXR0ZXJ5U2F2ZXInKSA/IDEwMCA6IDEwKTsgLy8gVXBkYXRlIGV2ZXJ5IHdoYXRldmVyIG1ldHJpYyBTQyB1c2VzXHJcblxyXG4gICAgICAgIC8vIENyZWF0ZSB0aGUgY29uZmlnIGZpbGUgZm9yIHRoZSB3YXZlZm9ybSBzZXR0aW5nc1xyXG4gICAgICAgIHRoaXMuY29uZmlnID0ge1xyXG4gICAgICAgICAgICBjb250YWluZXI6IG51bGwsXHJcbiAgICAgICAgICAgIGF1ZGlvOiBudWxsLFxyXG4gICAgICAgICAgICBkdXJhdGlvbjogMCxcclxuICAgICAgICAgICAgZGF0YTogbnVsbCxcclxuICAgICAgICAgICAgcGVha1dpZHRoOiAyLCAvLyBQaXhlbCB3aWR0aCBvZiB0aGUgdmVydGljYWwgbGluZXMgaW4gdGhlIHdhdmVmb3JtXHJcbiAgICAgICAgICAgIHBlYWtTcGFjZTogMiwgLy8gVGhlIHNwYWNlIGJldHdlZW4gdGhlIHBlYWtzIGluIHBpeGVsc1xyXG4gICAgICAgICAgICByZXNwb25zaXZlOiB0cnVlLFxyXG4gICAgICAgICAgICBtb3VzZU92ZXJFdmVudHM6IHRydWUsXHJcbiAgICAgICAgICAgIG1vdXNlQ2xpY2tFdmVudHM6IHRydWUsXHJcbiAgICAgICAgICAgIC8vIENvbG9yIGNvbmZpZ1xyXG4gICAgICAgICAgICBjb2xvcjoge1xyXG4gICAgICAgICAgICAgICAgYmFja2dyb3VuZDogXCIjOEM4QzhDXCIsXHJcbiAgICAgICAgICAgICAgICBmb290ZXI6IFwiI0IyQjJCMlwiLFxyXG4gICAgICAgICAgICAgICAgZm9vdGVyUGxheWJhY2s6IFwiI0ZGQUE4MFwiLFxyXG4gICAgICAgICAgICAgICAgaG92ZXJHcmFkaWVudDoge1xyXG4gICAgICAgICAgICAgICAgZnJvbTogXCIjRkY3MjAwXCIsXHJcbiAgICAgICAgICAgICAgICB0bzogXCIjREE0MjE4XCJcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBwbGF5YmFja0dyYWRpZW50OiB7XHJcbiAgICAgICAgICAgICAgICAgICAgZnJvbTogXCIjRkY3MjAwXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgdG86IFwiI0RBNDIxOFwiXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgaG92ZXJQbGF5YmFja0dyYWRpZW50OiB7XHJcbiAgICAgICAgICAgICAgICAgICAgZnJvbTogXCIjQUI1RDIwXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgdG86IFwiI0E4NDAyNFwiXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9OyAvLyBDb25maWcgb2JqZWN0IGVuZFxyXG5cclxuICAgICAgICBpZiAocGFyYW1zKSB7IC8vIENoZWNrIGlmIG5vdCBudWxsXHJcbiAgICAgICAgICAgIE9iamVjdC5hc3NpZ24odGhpcy5jb25maWcsIHBhcmFtcyk7IC8vIEVudW1lcmF0ZSB0aHJvdWdoIGZpZWxkcyBhbmQgYXNzaWduIHRoZW0gdG8gY29ycmVzcG9uZGluZyBmaWVsZHMgaW4gdGhpcy5jb25maWcgKFNpbWlsYXIgdG8gc2VyaWFsaXppbmcpXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBVcGRhdGUgZHVyYXRpb25cclxuICAgICAgICB0aGlzLmR1cmF0aW9uID0gdGhpcy5jb25maWcuZHVyYXRpb247XHJcblxyXG4gICAgICAgIHRoaXMuYnVpbGRDYW52YXMoKTtcclxuICAgICAgICB0aGlzLmJpbmRFdmVudHMoKTtcclxuICAgICAgICB0aGlzLmRyYXdXYXZlRm9ybSgpOyAvLyBEcmF3IHRoZSB3YXZlZm9ybVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQ3JlYXRlIHRoZSBjYW52YXNcclxuICAgICAqL1xyXG4gICAgYnVpbGRDYW52YXMoKSB7XHJcbiAgICAgICAgdGhpcy5jYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdjYW52YXMnKTsgLy8gQ3JlYXRlIHRoZSBjYW52YXMgZWxlbWVudFxyXG4gICAgICAgIHRoaXMuY29uZmlnLmNvbnRhaW5lci5hcHBlbmRDaGlsZCh0aGlzLmNhbnZhcyk7IC8vIFVwZGF0ZSB0aGUgY29udGFpbmVyIHRvIHRoZSBjYW52YXMgb2JqZWN0XHJcbiAgICAgICAgdGhpcy51cGRhdGVDYW52YXNTaXplKCk7XHJcbiAgICAgICAgdGhpcy5jdHggPSB0aGlzLmNhbnZhcy5nZXRDb250ZXh0KCcyZCcpO1xyXG4gICAgICAgIHRoaXMuY3R4LmxpbmVXaWR0aCA9IHRoaXMuY29uZmlnLnBlYWtXaWR0aDsgLy8gU2V0cyB0aGUgd2lkdGggb2YgZWFjaCB2ZXJ0aWNhbCBsaW5lIGluIHRoZSBjYW52YXMuXHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBCaW5kIHdhdmVmb3JtIGV2ZW50c1xyXG4gICAgICovXHJcbiAgICBiaW5kRXZlbnRzKCkge1xyXG4gICAgICAgIGlmICh0aGlzLmNvbmZpZy5yZXNwb25zaXZlKSAvLyBJZiB3YXZlZm9ybSBpcyByZXNwb25zaXZlLCByZXNpemUgd2l0aCBwYXJlbnQuXHJcbiAgICAgICAgICAgIHRoaXMub25SZXNpemVIYW5kbGVyKCk7XHJcblxyXG4gICAgICAgIGlmICh0aGlzLmNvbmZpZy5tb3VzZU92ZXJFdmVudHMpIHsgLy8gRW5hYmxlIG1vdXNlIG92ZXIvbGVhdmUgZXZlbnRzXHJcbiAgICAgICAgICAgIHRoaXMub25Nb3VzZU1vdmVIYW5kbGVyKCk7XHJcbiAgICAgICAgICAgIHRoaXMub25Nb3VzZUxlYXZlSGFuZGxlcigpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHRoaXMuY29uZmlnLm1vdXNlQ2xpY2tFdmVudHMpIC8vIEVuYWJsZSBtb3VzZSBjbGljayBoYW5kbGluZ1xyXG4gICAgICAgICAgICB0aGlzLm9uTW91c2VDbGlja0hhbmRsZXIoKTtcclxuICAgICAgICBcclxuICAgICAgICBpZiAodGhpcy5jb25maWcuYXVkaW8pIHsgLy8gVE9ETzogTmVlZCB0byBmaWd1cmUgb3V0IGhvdyB0byBiaW5kIHdpdGggd2lkZ2V0IEFQSSwgbm90IHJlZ3VsYXIgQVBJLlxyXG4gICAgICAgICAgICB0aGlzLm9uVGltZVVwZGF0ZUhhbmRsZXIoKTtcclxuICAgICAgICAgICAgdGhpcy5vbkNhblBsYXlIYW5kbGVyKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogRVZFTlQgSEFORExFUlNcclxuICAgICAqL1xyXG5cclxuICAgICAvKipcclxuICAgICAgKiBUaGlzIGZpcmVzIHdoZW4gdGhlIHdpZGdldCBpcyByZWFkeSBhbmQgdXBkYXRlcyB0aGUgd2F2ZWZvcm0gYnkgZHVyYXRpb24gYW5kIGN1cnJlbnQgdGltZS5cclxuICAgICAgKiBOT1RFOiBUaGlzIGV2ZW50IG1pZ2h0IG5vdCBiZSBmaXJlZC5cclxuICAgICAgKi9cclxuICAgIG9uQ2FuUGxheUhhbmRsZXIoKSB7XHJcbiAgICAgICAgLy8gUkVBRFkgc2lnbmFsIG1pZ2h0IG5vdCBiZSBuZWVkZWRcclxuICAgICAgICB0aGlzLmNvbmZpZy5hdWRpby5iaW5kKFNDLldpZGdldC5FdmVudHMuUkVBRFksIChlKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuY3VycmVudFBvc2l0aW9uID0gdGhpcy5jb25maWcuYXVkaW8uY3VycmVudFBvc2l0aW9uO1xyXG4gICAgICAgICAgICB0aGlzLmRyYXdXYXZlRm9ybSgpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogRXZlbnQgZmlyZWQgd2hlbiB0aW1lIHVwZGF0ZXMgaW4gdGhlIHdpZGdldCBvYmplY3RcclxuICAgICAqL1xyXG4gICAgb25UaW1lVXBkYXRlSGFuZGxlcigpIHtcclxuICAgICAgICB0aGlzLmNvbmZpZy5hdWRpby5iaW5kKFNDLldpZGdldC5FdmVudHMuUExBWV9QUk9HUkVTUywgKGUpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5jdXJyZW50UG9zaXRpb24gPSBlLmN1cnJlbnRQb3NpdGlvbjtcclxuICAgICAgICAgICAgdGhpcy53YXZlRm9ybUZyYW1lKys7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLndhdmVGb3JtRnJhbWUgJSB0aGlzLnVwZGF0ZUludGVydmFsID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmRyYXdXYXZlRm9ybSgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBVcGRhdGUgd2F2ZWZvcm0gY29sb3JzIGJhc2VkIG9uIG1vdXNlIGxvY2F0aW9uXHJcbiAgICAgKi9cclxuICAgIG9uTW91c2VNb3ZlSGFuZGxlcigpIHtcclxuICAgICAgICB0aGlzLmNhbnZhcy5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCBldmVudCA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMubW91c2VPdmVyID0gdGhpcy5nZXRNb3VzZVBvc2l0aW9uKGV2ZW50KTsgLy8gQXNzaWduIGNvb3JkcyB0byBtb3VzZU92ZXJcclxuICAgICAgICAgICAgdGhpcy5kcmF3V2F2ZUZvcm0oKTsgLy8gVXBkYXRlIHdhdmVmb3JtXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBIYW5kbGVzIHdoZW4gdGhlIG1vdXNlIGxlYXZlcyB0aGUgd2F2ZWZvcm0gYXJlYVxyXG4gICAgICovXHJcbiAgICBvbk1vdXNlTGVhdmVIYW5kbGVyKCkge1xyXG4gICAgICAgIHRoaXMuY2FudmFzLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbGVhdmUnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMubW91c2VPdmVyID0gbnVsbDtcclxuICAgICAgICAgICAgdGhpcy5kcmF3V2F2ZUZvcm0oKTsgLy8gVXBkYXRlIHdhdmVmb3JtXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBIYW5kbGVzIHRoZSBtb3VzZSBjbGlja1xyXG4gICAgICovXHJcbiAgICBvbk1vdXNlQ2xpY2tIYW5kbGVyKCkge1xyXG4gICAgICAgIHRoaXMuY2FudmFzLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZXZlbnQgPT4ge1xyXG4gICAgICAgICAgICAvLyBHZXQgbGVmdCBjbGljayBhbmQgdGltZSA+IDBcclxuICAgICAgICAgICAgaWYgKGV2ZW50LmJ1dHRvbiA9PT0gMCAmJiB0aGlzLmR1cmF0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgeCA9IGV2ZW50Lm9mZnNldFggfHwgZXZlbnQubGF5ZXJYO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmNvbmZpZy5hdWRpbykgeyAvLyBBdWRpbyBpcyBub3QgbnVsbFxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY29uZmlnLmN1cnJlbnRQb3NpdGlvbiA9IHBhcnNlSW50KHRoaXMuZHVyYXRpb24gLyAxMDAgKiAoeCAvICh0aGlzLmNvbmZpZy5jb250YWluZXIuY2xpZW50V2lkdGggLyAxMDApKSk7IC8vIFVwZGF0ZSB0aGUgdHJhY2sgcG9zaXRpb25cclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbmZpZy5hdWRpby5zZWVrVG8oTWF0aC5mbG9vcih0aGlzLmNvbmZpZy5jdXJyZW50UG9zaXRpb24pKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50VGltZSA9IHBhcnNlSW50KHRoaXMuZHVyYXRpb24gLyAxMDAgKiAoeCAvICh0aGlzLmNvbmZpZy5jb250YWluZXIuY2xpZW50V2lkdGggLyAxMDApKSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgdGhpcy5kcmF3V2F2ZUZvcm0oKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogR2V0IHRoZSBtb3VzZSBwb3NpdGlvbiByZWxhdGl2ZSB0byBjYW52YXMgbG9jYXRpb24uXHJcbiAgICAgKiBAcGFyYW0ge01vdXNlRXZlbnR9IGV2ZW50XHJcbiAgICAgKiBAcmV0dXJuIHt7eDogbnVtYmVyLCB5OiBudW1iZXJ9fVxyXG4gICAgICovXHJcbiAgICBnZXRNb3VzZVBvc2l0aW9uKGUpIHtcclxuICAgICAgICBsZXQgcmVjdCA9IHRoaXMuY2FudmFzLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIHg6IGV2ZW50LmNsaWVudFggLSByZWN0LmxlZnQsIC8vIEdldCB4IHBvc2l0aW9uIHJlbGF0aXZlIHRvIGNhbnZhcyBsZWZ0IGJvcmRlclxyXG4gICAgICAgICAgICB5OiBldmVudC5jbGllbnRZIC0gcmVjdC50b3AgLy8gR2V0IHkgcG9zaXRpb24gcmVsYXRpdmUgdG8gY2FudmFzIHRvcCBib3JkZXJcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogSGFuZGxlcyB3aGVuIHRoZSB3aW5kb3cgb2JqZWN0IHJlc2l6ZXMgdG8gcmVkcmF3IHRoZSB3YXZlZm9ybSBhY2NvcmRpbmcgdG8gdGhlIGNvbnRhaW5lciBzaXplLiBUaGlzIGlzIG9ubHkgcmVkcmF3biB3aGVuIHNpemVzIGFyZSBkaWZmZXJlbnQuXHJcbiAgICAgKi9cclxuICAgIG9uUmVzaXplSGFuZGxlcigpIHtcclxuICAgICAgICBsZXQgb2xkV2lkdGggPSB0aGlzLmNvbmZpZy5jb250YWluZXIuY2xpZW50V2lkdGg7IC8vIEdldCBkaW1lbnNpb25zIG9mIHRoZSBjb250YW5lciB0aGF0IGhvbGRzIHRoZSBjYW52YXNcclxuICAgICAgICBsZXQgb2xkSGVpZ2h0ID0gdGhpcy5jb25maWcuY29udGFpbmVyLmNsaWVudEhlaWdodDtcclxuXHJcbiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsICgpID0+IHtcclxuICAgICAgICAgICAgaWYgKG9sZFdpZHRoICE9PSB0aGlzLmNvbmZpZy5jb250YWluZXIuY2xpZW50V2lkdGggfHwgb2xkSGVpZ2h0ICE9PSB0aGlzLmNvbmZpZy5jb250YWluZXIuY2xpZW50SGVpZ2h0KSB7IFxyXG5cclxuICAgICAgICAgICAgICAgIC8vIFVwZGF0ZSB0cmFja2VkIHByZXZpb3VzIGRpbWVuc2lvbnMgb24gcmVzaXplXHJcbiAgICAgICAgICAgICAgICBvbGRXaWR0aCA9IHRoaXMuY29uZmlnLmNvbnRhaW5lci5jbGllbnRXaWR0aDtcclxuICAgICAgICAgICAgICAgIG9sZEhlaWdodCA9IHRoaXMuY29uZmlnLmNvbnRhaW5lci5jbGllbnRIZWlnaHQ7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZUNhbnZhc1NpemUoKTsgLy8gUmVmcmVzaCB0aGUgZGlzcGxheVxyXG4gICAgICAgICAgICAgICAgdGhpcy5kcmF3V2F2ZUZvcm0oKTsgLy8gRHJhdyBpdFxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBVcGRhdGUgdGhlIGNhbnZhcyBzaXplIHRvIG1hdGNoIHRoZSBjb250YWluZXIuIChQcm9iYWJseSBjb3VsZCBiZSByZXBsYWNlZCB3aXRoIENTUylcclxuICAgICAqL1xyXG4gICAgdXBkYXRlQ2FudmFzU2l6ZSgpIHtcclxuICAgICAgICB0aGlzLmNhbnZhcy53aWR0aCA9IHRoaXMuY29uZmlnLmNvbnRhaW5lci5jbGllbnRXaWR0aDtcclxuICAgICAgICB0aGlzLmNhbnZhcy5oZWlnaHQgPSB0aGlzLmNvbmZpZy5jb250YWluZXIuY2xpZW50SGVpZ2h0O1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogV0FWRUZPUk0gQ09MT1JJTkdcclxuICAgICAqL1xyXG5cclxuICAgICAvKipcclxuICAgICAgKiBDb25zdHJ1Y3QgYSBsaW5lYXIgZ3JhZGllbnQgb3ZlciB0aGUgd2F2ZWZvcm1cclxuICAgICAgKiBcclxuICAgICAgKiBAcGFyYW0ge251bWJlcn0geDFcclxuICAgICAgKiBAcGFyYW0ge251bWJlcn0geTEgXHJcbiAgICAgICogQHBhcmFtIHtudW1iZXJ9IHgyIFxyXG4gICAgICAqIEBwYXJhbSB7bnVtYmVyfSB5MiBcclxuICAgICAgKiBAcGFyYW0ge3tmcm9tOiBzdHJpbmcsIHRvOiBzdHJpbmd9fSBwYXJhbSAtIHBhcmFtIG9iamVjdCB0aGF0IGhvbGRzIHRoZSBjb2xvciB2YWx1ZXMgYXMgc3RyaW5ncy5cclxuICAgICAgKiBAcmV0dXJucyB7Q2FudmFzR3JhZGllbnR9XHJcbiAgICAgICpcclxuICAgICAgKiBAbWVtYmVyb2YgV2F2ZUZvcm1cclxuICAgICAgKi9cclxuICAgIGdldEdyYWRpZW50KHgxLCB5MSwgeDIsIHkyLCBwYXJhbSkge1xyXG4gICAgICAgIGxldCBncmFkaWVudCA9IHRoaXMuY3R4LmNyZWF0ZUxpbmVhckdyYWRpZW50KHgxLCB5MSwgeDIsIHkyKTtcclxuICAgICAgICBcclxuICAgICAgICAvLyBDb2xvciBzZWN0aW9ucyBvZiB0aGUgZ3JhZGllbnQgd2l0aCBjb2xvcnMgaW4gcGFyYW0uKiB3aGVyZSBpbmRleGVzIGluZGljYXRlIHN0YXJ0IGFuZCBlbmQgcG9zaXRpb25zLlxyXG4gICAgICAgIGdyYWRpZW50LmFkZENvbG9yU3RvcCgwLCBwYXJhbS5mcm9tKTtcclxuICAgICAgICBncmFkaWVudC5hZGRDb2xvclN0b3AoMSwgcGFyYW0udG8pO1xyXG5cclxuICAgICAgICByZXR1cm4gZ3JhZGllbnQ7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBDb25zdHJ1Y3QgYSBsaW5lYXIgZ3JhZGllbnQgb24gbW91c2UgaG92ZXJcclxuICAgICAqIFxyXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHgxIFxyXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHkxIFxyXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHgyIFxyXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHkyIFxyXG4gICAgICogQHJldHVybnMge0NhbnZhc0dyYWRpZW50fVxyXG4gICAgICogXHJcbiAgICAgKiBAbWVtYmVyb2YgV2F2ZUZvcm1cclxuICAgICAqL1xyXG4gICAgZ2V0SG92ZXJHcmFkaWVudCh4MSwgeTEsIHgyLCB5Mikge1xyXG4gICAgICAgIC8vIFJldHVybiBncmFkaWVudCB3aXRoIGhvdmVyZWQgY29sb3JzLlxyXG4gICAgICAgIHJldHVybiB0aGlzLmdldEdyYWRpZW50KHgxLCB5MSwgeDIsIHkyLCB7XHJcbiAgICAgICAgICAgIGZyb206IHRoaXMuY29uZmlnLmNvbG9yLmhvdmVyR3JhZGllbnQuZnJvbSxcclxuICAgICAgICAgICAgdG86IHRoaXMuY29uZmlnLmNvbG9yLmhvdmVyR3JhZGllbnQudG9cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIENvbnN0cnVjdCBhIGxpbmVhciBncmFkaWVudCBmb3IgcGxheWJhY2sgcGVha1xyXG4gICAgICogXHJcbiAgICAgKiBAcGFyYW0ge251bWJlcn0geDEgXHJcbiAgICAgKiBAcGFyYW0ge251bWJlcn0geTEgXHJcbiAgICAgKiBAcGFyYW0ge251bWJlcn0geDIgXHJcbiAgICAgKiBAcGFyYW0ge251bWJlcn0geTIgXHJcbiAgICAgKiBAcmV0dXJucyB7Q2FudmFzR3JhZGllbnR9XHJcbiAgICAgKiBcclxuICAgICAqIEBtZW1iZXJvZiBXYXZlRm9ybVxyXG4gICAgICovXHJcbiAgICBnZXRQbGF5QmFja0dyYWRpZW50KHgxLCB5MSwgeDIsIHkyKSB7XHJcbiAgICAgICAgLy8gUmV0dXJuIGdyYWRpZW50IHdpdGggcGxheWJhY2sgY29sb3JzIChpbiBwcm9ncmVzcyBjb2xvcnMpXHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0R3JhZGllbnQoeDEsIHkxLCB4MiwgeTIsIHtcclxuICAgICAgICAgICAgZnJvbTogdGhpcy5jb25maWcuY29sb3IucGxheWJhY2tHcmFkaWVudC5mcm9tLFxyXG4gICAgICAgICAgICB0bzogdGhpcy5jb25maWcuY29sb3IucGxheWJhY2tHcmFkaWVudC50b1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQ29uc3RydWN0IGxpbmVhciBncmFkaWVudCBmb3IgcGxheWJhY2sgY29sb3JzIG9uIG1vdXNlIGhvdmVyXHJcbiAgICAgKiBcclxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB4MSBcclxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB5MSBcclxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB4MiBcclxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB5MiBcclxuICAgICAqIEByZXR1cm5zIHtDYW52YXNHcmFkaWVudH1cclxuICAgICAqIFxyXG4gICAgICogQG1lbWJlcm9mIFdhdmVGb3JtXHJcbiAgICAgKi9cclxuICAgIGdldEhvdmVyUGxheUJhY2tHcmFkaWVudCh4MSwgeTEsIHgyLCB5Mikge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmdldEdyYWRpZW50KHgxLCB5MSwgeDIsIHkyLCB7XHJcbiAgICAgICAgICAgIGZyb206IHRoaXMuY29uZmlnLmNvbG9yLmhvdmVyUGxheWJhY2tHcmFkaWVudC5mcm9tLFxyXG4gICAgICAgICAgICB0bzogdGhpcy5jb25maWcuY29sb3IuaG92ZXJQbGF5YmFja0dyYWRpZW50LnRvIFxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogRHJhdyB0aGUgc3Ryb2tlIHN0eWxlIGFjY29yZGluZyB0byB0aGUgbW91c2UgcG9zaXRpb24uXHJcbiAgICAgKiBcclxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB4IFxyXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHkgXHJcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gbGluZUJyZWFrIFxyXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHBsYXliYWNrIFxyXG4gICAgICogQHJldHVybnMge2NvbmZpZ31cclxuICAgICAqIFxyXG4gICAgICogQG1lbWJlcm9mIFdhdmVGb3JtXHJcbiAgICAgKi9cclxuICAgIGdldENvbnRleHRTdHJva2VTdHlsZSh4LCB5LCBsaW5lQnJlYWssIHBsYXliYWNrKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuY29uZmlnLm1vdXNlT3ZlckV2ZW50cykgeyAvLyBVc2VkIHRvIGNoZWNrIGlmIHRoaXMgaXMgZW5hYmxlZCBpbiB0aGUgY29uZmlnc1xyXG4gICAgICAgICAgICBpZiAodGhpcy5tb3VzZU92ZXIgJiYgdGhpcy5tb3VzZU92ZXIueCA+PSB4KSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRIb3ZlckdyYWRpZW50KHgsIHksIHgsIGxpbmVCcmVhayk7IC8vIENvbG9yIHVudGlsIHRoZSBsaW5lIGJyZWFrLlxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIGlmIChwbGF5YmFjayA+PSB4KSB7IC8vIElmIHRoZSBzb25nIHByb2dyZXNzIGlzIGdyZWF0ZXIgdGhhbiB0aGUgeCB2YWx1ZVxyXG4gICAgICAgICAgICBpZiAodGhpcy5jb25maWcubW91c2VPdmVyRXZlbnRzKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5tb3VzZU92ZXIpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRIb3ZlclBsYXlCYWNrR3JhZGllbnQoeCwgeSwgeCwgbGluZUJyZWFrKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0UGxheUJhY2tHcmFkaWVudCh4LCB5ICx4LCBsaW5lQnJlYWspO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHRoaXMuY29uZmlnLmNvbG9yLmJhY2tncm91bmQ7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBEcmF3IHRoZSB3YXZlZm9ybSBjYW52YXMgb2JqZWN0LlxyXG4gICAgICogXHJcbiAgICAgKiBAbWVtYmVyb2YgV2F2ZUZvcm1cclxuICAgICAqL1xyXG4gICAgZHJhd1dhdmVGb3JtKCkge1xyXG4gICAgICAgIC8vIFBhcnNlIHdhdmVmb3JtIGZyb20gdXJsLCBleDogaHR0cHM6Ly93aXMuc25kY2RuLmNvbS9pdmFzaWoyRFFvcXpfbS5qc29uXHJcblxyXG4gICAgICAgIC8vIFdlIG5lZWQgdG8gY2FsY3VsYXRlIHRoZSBvZmZzZXQgb2YgaG93IG1hbnkgcGVha3Mgd2UgY2FuIGRpc3BsYXkuIElmIHRoZSB3YXZmb3JtIGlzIGF0IDEwMCUgd2lkdGgsIHdlIGNhbiBkaXNwbGF5IGFsbCwgYnV0IGlmIG5vdCwgd2UgbmVlZCB0byBzZWxlY3QgZXZlcnkgTiBwZWFrcyB0byBkcmF3LlxyXG4gICAgICAgIC8vIGRhdGEubGVuZ3RoIC0gbnVtYmVyIG9mIHBlYWtzIGluIHRoZSB3YXZlZm9ybVxyXG4gICAgICAgIC8vIGNvbmZpZy5wZWFrV2lkdGggLSBkZWZhdWx0IHNldCB0byAycHggaW4gY29uc3RyY3RvciAod2lkdGggaWYgaW5kaXZpZHVhbCBwZWFrKVxyXG4gICAgICAgIC8vIGNvbmlnLnBlYWtTcGFjZSAtIGRlZmF1bHQgc2V0IHRvIDFweCBpbiB0aGUgY29uc3RydWN0b3IgKHNwYWNlIGJldHdlZW4gcGVhaylcclxuICAgICAgICBsZXQgTiA9IHRoaXMuY29uZmlnLmRhdGEubGVuZ3RoIC8gdGhpcy5jb25maWcuY29udGFpbmVyLmNsaWVudFdpZHRoICogKHRoaXMuY29uZmlnLnBlYWtXaWR0aCArIHRoaXMuY29uZmlnLnBlYWtTcGFjZSk7XHJcblxyXG4gICAgICAgIGxldCBjb3VudCA9IE1hdGguZmxvb3IodGhpcy5jb25maWcuZGF0YS5sZW5ndGggLyBOKTsgLy8gQ291bnQgaG93IG1hbnkgcGVha3Mgd2Ugd2lsbCBkaXNwbGF5ICh0b3RhbCBwZWFrcyAvIGV2ZXJ5IE50aCBwZWFrIGJ5IHRoZSBhbW91bnQgb2YgcGl4ZWxzIHRoZXkgdXNlKVxyXG5cclxuICAgICAgICBsZXQgcGxheWJhY2sgPSAwO1xyXG5cclxuICAgICAgICAvLyBOZWVkcyBjaGVja2luZ1xyXG4gICAgICAgIGlmICghIXRoaXMuZHVyYXRpb24gJiYgdGhpcy5jdXJyZW50UG9zaXRpb24gPj0gMCkge1xyXG4gICAgICAgICAgICBwbGF5YmFjayA9IHRoaXMuY2FudmFzLndpZHRoIC8gdGhpcy5kdXJhdGlvbiAqIHRoaXMuY3VycmVudFBvc2l0aW9uO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5jdHguY2xlYXJSZWN0KDAsIDAsIHRoaXMuY3R4LmNhbnZhcy53aWR0aCwgdGhpcy5jdHguY2FudmFzLmhlaWdodCk7XHJcblxyXG4gICAgICAgIGZvciAobGV0IGkgPSAwLCB4ID0gMDsgaSA8IGNvdW50OyBpKyssIHggKz0gKHRoaXMuY29uZmlnLnBlYWtXaWR0aCArIHRoaXMuY29uZmlnLnBlYWtTcGFjZSkpIHsgLy8gSXRlcmF0ZSBvdmVyIGFsbCB0aGUgcGVha3MgaW4gdGhlIGRhdGEgYW5kIGRyYXcgdGhlbS4gSW5jcmVtZW50IGJ5IHRoZSBhbW91bnQgb2YgcGl4ZWxzIHRoZXkgdXNlICh4KS5cclxuICAgICAgICAgICAgLy8gQ2FsY3VsYXRlIHRoZSBoZWlnaHQgb2YgdGhhdCBwZWFrIHNvIHdlIGNhbiBkcmF3IHRoZSBsaW5lLlxyXG4gICAgICAgICAgICBsZXQgcGVha0hlaWdodCA9IHRoaXMuY2FudmFzLmhlaWdodCAvIDE0MCAqIHRoaXMuY29uZmlnLmRhdGFbTWF0aC5yb3VuZChpICogTildO1xyXG4gICAgICAgICAgICBsZXQgeSA9ICh0aGlzLmNhbnZhcy5oZWlnaHQgLyAyIC0gcGVha0hlaWdodCAvIDIpICogMS41O1xyXG5cclxuICAgICAgICAgICAgLy8gQ2FsY3VsYXRlIHRoZSBsaW5lIGJyZWFrIHdoaWNoIGlzIHRoZSAycHggbGluZSB5b3Ugc2VlIGN1dHRpbmcgYWNyb3NzIHRoZSB3YXZlZm9ybS5cclxuICAgICAgICAgICAgbGV0IGxpbmVCcmVhayA9IE1hdGguZmxvb3IodGhpcy5jYW52YXMuaGVpZ2h0IC8gMS4zMzMzMykgLSAxO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5jdHguc3Ryb2tlU3R5bGUgPSB0aGlzLmdldENvbnRleHRTdHJva2VTdHlsZSh4LCB5LCBsaW5lQnJlYWssIHBsYXliYWNrKTsgLy8gR2V0IHRoZSBncmFkaWVudCBjb2xvciB0byBkcmF3IHRoZSBsaW5lLiBIb3ZlcmVkIGV2ZW50cyBhbmQgb3RoZXIgZXZlbnRzIGFscmVhZHkgaGFuZGxlZCBpbnNpZGUgdGhlIG1ldGhvZC5cclxuXHJcbiAgICAgICAgICAgIHRoaXMuY3R4LmJlZ2luUGF0aCgpO1xyXG4gICAgICAgICAgICB0aGlzLmN0eC5tb3ZlVG8oeCwgeSk7XHJcbiAgICAgICAgICAgIHRoaXMuY3R4LmxpbmVUbyh4LCBsaW5lQnJlYWspOyAvLyBEcmF3IHRvIGJyZWFrXHJcbiAgICAgICAgICAgIHRoaXMuY3R4LnN0cm9rZSgpO1xyXG5cclxuICAgICAgICAgICAgLy8gRHJhdyB0aGUgcGVha3MgdW5kZXIgdGhlIGxpbmUgYnJlYWsuXHJcbiAgICAgICAgICAgIGlmIChwbGF5YmFjayA+PSB4KSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmN0eC5zdHJva2VTdHlsZSA9IHRoaXMuY29uZmlnLmNvbG9yLmZvb3RlclBsYXliYWNrOyAvLyBDb2xvcmVkIHBhcnQgb2YgdGhlIHBsYXliYWNrXHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmN0eC5zdHJva2VTdHlsZSA9IHRoaXMuY29uZmlnLmNvbG9yLmZvb3RlcjsgLy8gRGVmYXVsdCBjb2xvclxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB0aGlzLmN0eC5iZWdpblBhdGgoKTtcclxuICAgICAgICAgICAgdGhpcy5jdHgubW92ZVRvKHgsIGxpbmVCcmVhayArIDEpO1xyXG4gICAgICAgICAgICB0aGlzLmN0eC5saW5lVG8oeCwgcGVha0hlaWdodCArIHkpO1xyXG4gICAgICAgICAgICB0aGlzLmN0eC5zdHJva2UoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBTZXQgdGhlIGN1cnJlbnQgdHJhY2sgdGltZSBhbmQgcmVkcmF3IHRoZSB3YXZlZm9ybVxyXG4gICAgICogXHJcbiAgICAgKiBAcGFyYW0ge051bWJlcn0gY3VycmVudFBvc2l0aW9uIFxyXG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IGR1cmF0aW9uIFxyXG4gICAgICogXHJcbiAgICAgKiBAbWVtYmVyb2YgV2F2ZUZvcm1cclxuICAgICAqL1xyXG4gICAgc2V0UGxheUJhY2soY3VycmVudFBvc2l0aW9uLCBkdXJhdGlvbikge1xyXG4gICAgICAgIHRoaXMuY3VycmVudFBvc2l0aW9uID0gY3VycmVudFBvc2l0aW9uO1xyXG4gICAgICAgIHRoaXMuZHVyYXRpb24gPSBkdXJhdGlvbjtcclxuICAgICAgICB0aGlzLmRyYXdXYXZlRm9ybSgpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogVXBkYXRlIHRoZSBjdXJyZW50IGRhdGEgb2JqZWN0LlxyXG4gICAgICogXHJcbiAgICAgKiBAcGFyYW0ge0RhdGF9IGRhdGEgXHJcbiAgICAgKiBcclxuICAgICAqIEBtZW1iZXJvZiBXYXZlRm9ybVxyXG4gICAgICovXHJcbiAgICBhc3luYyB1cGRhdGVXYXZlZm9ybURhdGEoZGF0YSkge1xyXG4gICAgICAgIHRoaXMuY29uZmlnLmRhdGEgPSBkYXRhO1xyXG4gICAgICAgIHRoaXMudXBkYXRlSW50ZXJ2YWwgPSAoU2V0dGluZ3MuZ2V0UHJlZignYmF0dGVyeVNhdmVyJykgPyAxMDAgOiAxMCk7IFxyXG4gICAgICAgIHRoaXMuZHJhd1dhdmVGb3JtKCk7XHJcbiAgICB9XHJcblxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBXYXZlRm9ybVxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vcHVibGljL2NvbnRyb2xzL3dhdmVmb3JtLmpzXG4vLyBtb2R1bGUgaWQgPSAxMlxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvLyBJbml0aWFsaXplIHRoZSBTb3VuZENsb3VkIFBsYXllciBvYmplY3RcclxuaW1wb3J0IFBsYXllciBmcm9tICcuL3BsYXllcidcclxuXHJcbndpbmRvdy5vbmxvYWQgPSAoKSA9PiB7XHJcbiAgICBjb25zdCBzY19wbGF5ZXIgPSBuZXcgUGxheWVyKCk7XHJcbiAgICBzY19wbGF5ZXIuc3RhcnQoKTtcclxuXHJcbiAgICB2YXIgbXlUYWJzID0gdGFicyh7XHJcbiAgICAgICAgZWw6ICcjdGFicycsXHJcbiAgICAgICAgdGFiTmF2aWdhdGlvbkxpbmtzOiAnLnRhYi1pdGVtJyxcclxuICAgICAgICB0YWJDb250ZW50Q29udGFpbmVyczogJy50YWJwYWdlJ1xyXG4gICAgfSk7XHJcbiAgICBteVRhYnMuaW5pdCgpO1xyXG59XHJcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vcHVibGljL2pzL2FwcC5qc1xuLy8gbW9kdWxlIGlkID0gMTNcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiLyoqXHJcbiAqIERlc2lnbmVkIHRvIGZldGNoIGRhdGEgdXNpbmcgWE1MSHR0cC5cclxuICovXHJcbmNsYXNzIFJlcXVlc3Qge1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQ3JlYXRlcyBhbiBpbnN0YW5jZSBvZiBSZXF1ZXN0LlxyXG4gICAgICogXHJcbiAgICAgKiBAbWVtYmVyb2YgUmVxdWVzdFxyXG4gICAgICovXHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICBjb25zb2xlLmxvZygnSW5pdCBSZXF1ZXN0IHNlcnZpY2UnKTtcclxuICAgIH1cclxuXHJcbiAgICBnZXQodXJsKSB7XHJcbiAgICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHhociA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xyXG4gICAgICAgICAgICB4aHIuYWRkRXZlbnRMaXN0ZW5lcihcImxvYWRcIiwgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5zdGF0dXMgPj0gMjAwICYmIHRoaXMuc3RhdHVzIDwgMzAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSh0aGlzLnJlc3BvbnNlVGV4dCk7IC8vIFJlc29sdmUgb24gdmFsaWQgcmVzcG9uc2VcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVqZWN0KHRoaXMpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIHhoci5hZGRFdmVudExpc3RlbmVyKFwiZXJyb3JcIiwgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICByZWplY3QodGhpcyk7IC8vIFJlamVjdCBvbiBlcnJvclxyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIHhoci5vcGVuKCdHRVQnLCB1cmwsIHRydWUpO1xyXG4gICAgICAgICAgICB4aHIuc2VuZCgpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogR2V0IHRoZSBKU09OIGRhdGEgZm9yIHRoZSB3YXZlZm9ybVxyXG4gICAgICogXHJcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gdXJsIFxyXG4gICAgICogQHJldHVybnMgLSBXYXZlRm9ybSBKU09OIG9iamVjdFxyXG4gICAgICovXHJcbiAgICBhc3luYyBnZXRKU09OKHVybCkge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIHJldHVybiBKU09OLnBhcnNlKGF3YWl0IHRoaXMuZ2V0KHVybCkpO1xyXG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coZSk7XHJcbiAgICAgICAgICAgIHJldHVybiBbXTsgLy8gUmV0dXJuIG51bGxcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IFJlcXVlc3RcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3B1YmxpYy9qcy9yZXF1ZXN0LmpzXG4vLyBtb2R1bGUgaWQgPSAxNFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwic291cmNlUm9vdCI6IiJ9