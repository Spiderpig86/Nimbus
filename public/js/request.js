/**
 * Designed to fetch data using XMLHttp.
 */
class Request {

    /**
     * Creates an instance of Request.
     * 
     * @memberof Request
     */
    constructor() {
        console.log('Init Request service');
    }

    get(url) {
         return new Promise(function (resolve, reject) {
            const xhr = new XMLHttpRequest();
            xhr.addEventListener("load", function() {
                if (this.status >= 200 && this.status < 300) {
                    resolve(this.responseText); // Resolve on valid response
                } else {
                    reject(this);
                }
            });

            xhr.addEventListener("error", function() {
                reject(this); // Reject on error
            });

            xhr.open('GET', url, true);
            xhr.send();
        });
    }

    /**
     * Get the JSON data for the waveform
     * 
     * @param {string} url 
     * @returns - WaveForm JSON object
     */
    async getJSON(url) {
        //try {
            return JSON.parse(await this.get(url));
        // } catch (e) {
        //     console.log(e);
        //     return {"width":1800,"height":140,"samples":[79,87,84,71,73,68,83,96,89,78,85,79,88,94,98,89,87,84,86,90,85,103,104,85,65,72,67,77,98,95,75,67,67,64,88,101,85,86,92,80,83,92,71,79,93,79,93,107,86,77,85,78,75,98,94,91,94,95,84,106,89,81,82,74,69,91,83,75,67,62,72,101,96,63,76,72,62,94,100,68,87,89,70,106,98,84,82,82,74,94,98,86,82,74,75,101,94,67,127,115,121,127,115,112,125,118,112,127,120,116,122,116,108,132,117,124,118,113,108,119,122,106,133,119,116,124,123,114,115,112,103,132,126,119,118,118,118,133,123,118,118,112,120,113,123,111,127,127,121,122,121,118,115,121,114,125,131,119,120,119,116,108,132,120,114,126,116,109,121,116,113,131,126,114,123,122,104,111,95,105,116,112,100,98,97,98,106,96,112,109,100,93,106,109,110,130,121,114,123,120,120,118,115,111,132,124,119,116,120,109,134,126,117,120,117,117,109,115,119,128,129,113,116,123,123,117,120,114,120,131,115,113,125,118,128,131,122,113,108,99,95,95,88,68,129,115,114,122,112,113,116,119,113,129,119,116,121,119,107,130,122,117,112,117,111,116,115,110,127,114,113,123,123,120,112,108,117,131,121,113,116,116,123,108,118,86,92,100,93,98,96,81,130,136,112,122,124,117,114,115,117,120,132,126,126,122,112,131,133,121,122,125,120,116,129,118,110,132,126,112,131,126,112,124,119,114,132,119,123,118,123,122,131,118,119,126,126,114,124,119,113,129,130,115,115,132,116,118,115,117,126,124,120,115,119,118,128,125,123,118,134,110,108,127,121,124,135,124,115,125,122,110,122,111,124,130,119,113,124,113,129,129,124,112,124,113,109,124,115,103,129,118,112,130,117,112,118,112,113,133,120,120,124,109,116,126,118,113,122,114,119,119,121,104,133,124,114,126,124,117,121,120,115,135,128,123,124,125,116,132,132,120,126,120,114,117,131,122,119,127,122,116,132,117,109,126,116,123,128,116,114,125,126,110,131,125,110,129,131,107,115,116,104,131,119,110,122,127,115,117,114,110,127,117,124,128,122,113,132,129,122,117,128,118,108,117,84,106,117,126,116,113,101,117,117,110,131,127,117,125,118,114,136,126,123,119,124,111,108,125,105,118,128,121,120,117,116,108,117,111,123,135,116,120,125,112,113,136,127,119,122,117,108,119,117,104,134,123,127,127,115,110,122,110,117,132,127,115,126,120,119,130,128,120,123,117,122,112,114,113,130,125,114,117,124,114,111,121,110,128,131,116,121,123,113,120,131,118,116,125,118,119,119,113,129,128,114,122,134,115,110,127,118,114,133,126,111,123,111,107,136,122,118,118,124,108,124,122,102,134,119,115,128,120,116,117,113,102,133,124,114,122,114,121,136,118,120,115,112,119,119,121,102,129,124,126,120,122,117,117,126,111,133,123,123,121,125,112,132,130,116,118,125,114,113,120,112,127,130,122,95,123,114,100,111,105,82,114,111,96,99,97,97,103,109,101,106,91,95,112,97,98,124,115,99,123,115,121,107,106,102,135,101,94,103,97,67,125,95,95,103,95,90,94,100,97,128,108,64,109,105,110,100,89,104,125,115,81,104,111,104,129,112,95,88,107,93,98,89,88,122,118,83,78,104,96,92,100,95,125,127,91,96,99,81,70,128,98,91,99,99,78,103,91,86,131,83,80,108,103,94,109,85,106,124,97,79,97,95,102,123,105,96,104,99,98,96,95,83,131,118,113,131,132,119,120,120,116,133,126,114,115,124,112,129,129,131,126,127,112,108,124,120,125,128,125,117,132,116,111,125,117,128,134,126,120,125,114,114,133,121,119,124,113,110,131,118,110,131,126,118,129,129,114,123,113,121,135,117,116,116,127,120,129,124,115,125,119,116,135,120,109,132,125,113,113,124,117,109,123,108,129,125,124,112,126,118,132,130,123,113,127,115,110,128,122,102,131,119,113,126,117,110,123,114,125,132,120,113,124,122,113,133,122,115,122,114,113,131,111,104,131,119,113,129,111,119,125,109,117,130,119,121,114,110,127,132,121,121,119,117,112,118,116,105,130,119,114,115,131,115,112,104,102,134,133,121,126,123,112,128,128,120,115,125,122,111,134,121,120,126,119,117,126,113,112,120,120,122,131,124,119,117,114,129,131,122,118,126,122,108,113,122,114,129,121,117,125,113,119,122,118,104,133,123,114,123,117,115,131,123,125,120,122,117,121,123,118,128,122,113,123,122,112,120,113,117,136,129,122,129,125,122,117,133,112,106,115,117,111,118,113,126,128,121,117,126,120,110,129,113,109,140,119,113,120,120,108,130,126,120,127,124,114,117,116,107,130,124,113,119,119,119,116,112,103,136,116,123,129,121,114,133,124,123,122,123,111,121,114,110,125,127,125,127,129,116,110,123,117,129,127,119,113,119,110,129,132,118,113,121,114,106,123,114,126,137,119,117,122,112,116,114,112,104,131,121,113,121,115,120,135,124,121,119,114,117,122,120,102,132,121,122,122,121,115,125,116,104,133,118,124,117,122,112,139,120,116,117,119,112,115,117,111,126,129,121,119,118,111,113,106,107,80,107,99,101,101,96,99,103,104,81,101,91,102,107,100,120,127,103,99,123,115,106,109,102,124,131,96,95,103,100,67,132,92,91,99,97,87,89,99,96,131,85,88,112,109,97,107,93,102,127,96,82,113,102,97,127,102,96,96,103,97,97,90,82,125,113,81,103,117,97,99,102,93,124,130,106,96,100,73,127,126,103,91,103,89,89,123,108,131,129,81,112,115,104,98,102,109,95,129,105,96,100,99,96,133,109,91,108,100,103,111,106,85,131,119,119,123,118,108,111,116,107,138,121,119,113,116,108,132,124,118,128,124,112,121,127,118,128,119,116,114,123,119,117,118,112,134,125,119,115,128,116,133,129,121,120,121,115,109,122,122,113,135,126,111,125,124,110,122,115,129,130,126,124,122,110,116,138,132,125,125,123,118,131,112,112,136,121,127,125,121,117,119,120,118,135,126,124,117,119,119,132,124,126,128,120,115,125,117,115,130,125,113,113,124,116,116,126,114,131,128,126,126,125,116,133,134,122,114,122,118,119,129,126,121,125,121,114,132,112,110,119,118,109,132,124,112,115,110,101,115,92,89,124,91,113,126,115,102,133,128,120,118,126,115,115,117,114,135,115,121,110,110,107,131,125,112,122,133,113,115,130,122,135,128,119,119,129,114,114,114,111,135,129,118,118,119,121,116,138,121,116,126,115,115,117,113,124,128,118,114,125,113,107,123,114,103,129,121,120,127,117,115,130,123,111,123,118,116,118,118,102,132,120,112,123,117,108,121,116,111,130,130,117,114,110,103,110,116,111,108,104,93,101,116,92,130,123,122,119,123,115,117,116,117,133,135,120,122,126,111,111,132,121,119,126,127,118,119,109,125,131,126,121,119,119,120,126,117,101,130,115,112,122,122,110,131,125,122,117,122,112,130,113,108,100,99,93,117,102,94,106,106,101,98,108,82,115,115,66,94,89,105,75,97,80,101,113,92,129,124,115,123,130,112,112,117,106,106,125,126,116,121,119,116,129,119,117,123,117,113,124,115,102,118,125,120,125,123,111,125,114,104,127,122,116,125,116,110,131,127,112,123,115,109,119,116,112,124,122,119,120,129,126,118,113,117,119,123,124,117,119,115,124,117,119,123,118,116,124,122,116,132,124,115,120,112,106,99,103,102,108,114,96,97,101,67,102,114,96,94,96,96,74,96,94,100,106,67,96,110,106,96,99,105,97,102,95,88,112,99,98,88,99,82,105,105,102,102,95,71,132,117,111,118,116,119,114,117,109,134,119,114,118,117,108,132,116,118,114,123,115,111,114,117,134,124,116,117,121,122,113,116,117,110,134,113,114,120,118,125,129,116,116,119,113,112,117,115,104,110,99,96,94,92,89,83,81,79,39,43,43,39,35,36,35,33,38,30,33,29,30,29,11,10,9,10,10,11,10,9,10,9,17,56,0,0,0,0,0,0,0,0,0,0,0,0]}; // Return null
        // }
    }
}

export default Request